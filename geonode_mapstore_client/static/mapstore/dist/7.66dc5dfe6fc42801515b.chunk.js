(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"./MapStore2/web/client/actions/dashboard.js":function(e,t){e.exports={SET_EDITING:"DASHBOARD:SET_EDITING",setEditing:function(e){return{type:"DASHBOARD:SET_EDITING",editing:e}},SET_EDITOR_AVAILABLE:"DASHBOARD:SET_AVAILABLE",setEditorAvailable:function(e){return{type:"DASHBOARD:SET_AVAILABLE",available:e}},SHOW_CONNECTIONS:"DASHBOARD:SHOW_CONNECTIONS",triggerShowConnections:function(e){return{type:"DASHBOARD:SHOW_CONNECTIONS",show:e}},TRIGGER_SAVE_MODAL:"DASHBOARD:TRIGGER_SAVE_MODAL",triggerSave:function(e){return{type:"DASHBOARD:TRIGGER_SAVE_MODAL",show:e}},TRIGGER_SAVE_AS_MODAL:"DASHBOARD:TRIGGER_SAVE_AS_MODAL",triggerSaveAs:function(e){return{type:"DASHBOARD:TRIGGER_SAVE_AS_MODAL",show:e}},SAVE_DASHBOARD:"DASHBOARD:SAVE_DASHBOARD",saveDashboard:function(e){return{type:"DASHBOARD:SAVE_DASHBOARD",resource:e}},SAVE_ERROR:"DASHBOARD:SAVE_ERROR",dashboardSaveError:function(e){return{type:"DASHBOARD:SAVE_ERROR",error:e}},DASHBOARD_SAVED:"DASHBOARD:DASHBOARD_SAVED",dashboardSaved:function(e){return{type:"DASHBOARD:DASHBOARD_SAVED",id:e}},LOAD_DASHBOARD:"DASHBOARD:LOAD_DASHBOARD",loadDashboard:function(e){return{type:"DASHBOARD:LOAD_DASHBOARD",id:e}},DASHBOARD_LOADED:"DASHBOARD:DASHBOARD_LOADED",DASHBOARD_RESET:"DASHBOARD:DASHBOARD_RESET",resetDashboard:function(){return{type:"DASHBOARD:DASHBOARD_RESET"}},dashboardLoaded:function(e,t){return{type:"DASHBOARD:DASHBOARD_LOADED",resource:e,data:t}},DASHBOARD_LOADING:"DASHBOARD:DASHBOARD_LOADING",dashboardLoading:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"loading";return{type:"DASHBOARD:DASHBOARD_LOADING",name:t,value:e}},DASHBOARD_LOAD_ERROR:"DASHBOARD:DASHBOARD_LOAD_ERROR",dashboardLoadError:function(e){return{type:"DASHBOARD:DASHBOARD_LOAD_ERROR",error:e}}}},"./MapStore2/web/client/actions/floatinglegend.js":function(e,t){e.exports={RESIZE_LEGEND:"FLOATINGLEGEND:RESIZE_LEGEND",EXPAND_LEGEND:"FLOATINGLEGEND:EXPAND_LEGEND",resizeLegend:function(e){return{type:"FLOATINGLEGEND:RESIZE_LEGEND",size:e}},expandLegend:function(e){return{type:"FLOATINGLEGEND:EXPAND_LEGEND",expanded:e}}}},"./MapStore2/web/client/actions/geostory.js":function(e,t,n){"use strict";n.r(t),n.d(t,"ADD",(function(){return l})),n.d(t,"ADD_RESOURCE",(function(){return c})),n.d(t,"CHANGE_MODE",(function(){return u})),n.d(t,"CLEAR_SAVE_ERROR",(function(){return p})),n.d(t,"EDIT_RESOURCE",(function(){return d})),n.d(t,"EDIT_WEBPAGE",(function(){return f})),n.d(t,"ERRORS_LOGO",(function(){return m})),n.d(t,"GEOSTORY_LOADED",(function(){return y})),n.d(t,"LOAD_GEOSTORY",(function(){return b})),n.d(t,"LOAD_GEOSTORY_ERROR",(function(){return g})),n.d(t,"LOADING_GEOSTORY",(function(){return h})),n.d(t,"MOVE",(function(){return v})),n.d(t,"REMOVE",(function(){return S})),n.d(t,"SAVE",(function(){return w})),n.d(t,"SAVE_ERROR",(function(){return O})),n.d(t,"SAVED",(function(){return j})),n.d(t,"SELECT_CARD",(function(){return E})),n.d(t,"SET_CONTROL",(function(){return x})),n.d(t,"SET_RESOURCE",(function(){return P})),n.d(t,"SET_CURRENT_STORY",(function(){return C})),n.d(t,"SET_WEBPAGE_URL",(function(){return T})),n.d(t,"TOGGLE_CARD_PREVIEW",(function(){return M})),n.d(t,"TOGGLE_SETTINGS_PANEL",(function(){return _})),n.d(t,"TOGGLE_SETTING",(function(){return A})),n.d(t,"TOGGLE_CONTENT_FOCUS",(function(){return R})),n.d(t,"UPDATE",(function(){return I})),n.d(t,"UPDATE_SETTING",(function(){return D})),n.d(t,"UPDATE_CURRENT_PAGE",(function(){return k})),n.d(t,"REMOVE_RESOURCE",(function(){return L})),n.d(t,"SET_PENDING_CHANGES",(function(){return N})),n.d(t,"SET_UPDATE_URL_SCROLL",(function(){return F})),n.d(t,"add",(function(){return U})),n.d(t,"addResource",(function(){return G})),n.d(t,"clearSaveError",(function(){return B})),n.d(t,"setEditing",(function(){return z})),n.d(t,"editResource",(function(){return W})),n.d(t,"loadGeostory",(function(){return V})),n.d(t,"geostoryLoaded",(function(){return H})),n.d(t,"loadingGeostory",(function(){return q})),n.d(t,"loadGeostoryError",(function(){return Y})),n.d(t,"remove",(function(){return Q})),n.d(t,"saveStory",(function(){return K})),n.d(t,"saveGeoStoryError",(function(){return Z})),n.d(t,"setControl",(function(){return X})),n.d(t,"selectCard",(function(){return J})),n.d(t,"setResource",(function(){return $})),n.d(t,"storySaved",(function(){return ee})),n.d(t,"setCurrentStory",(function(){return te})),n.d(t,"toggleCardPreview",(function(){return ne})),n.d(t,"toggleSetting",(function(){return re})),n.d(t,"toggleSettingsPanel",(function(){return oe})),n.d(t,"update",(function(){return ie})),n.d(t,"updateCurrentPage",(function(){return ae})),n.d(t,"move",(function(){return se})),n.d(t,"setFocusOnContent",(function(){return le})),n.d(t,"updateSetting",(function(){return ce})),n.d(t,"setWebPageUrl",(function(){return ue})),n.d(t,"editWebPage",(function(){return pe})),n.d(t,"removeResource",(function(){return de})),n.d(t,"setPendingChanges",(function(){return fe})),n.d(t,"updateUrlOnScroll",(function(){return me}));var r=n("./node_modules/lodash/isString.js"),o=n.n(r),i=n("./node_modules/uuid/index.js"),a=n.n(i),s=n("./MapStore2/web/client/utils/GeoStoryUtils.js"),l="GEOSTORY:ADD",c="GEOSTORY:ADD_RESOURCE",u="GEOSTORY:CHANGE_MODE",p="GEOSTORY:CLEAR_SAVE_ERROR",d="GEOSTORY:EDIT_RESOURCE",f="GEOSTORY:EDIT_WEBPAGE",m="GEOSTORY:ERRORS_LOGO",y="GEOSTORY:GEOSTORY_LOADED",b="GEOSTORY:LOAD_GEOSTORY",g="GEOSTORY:LOAD_GEOSTORY_ERROR",h="GEOSTORY:LOADING_GEOSTORY",v="GEOSTORY:MOVE",S="GEOSTORY:REMOVE",w="GEOSTORY:SAVE_STORY",O="GEOSTORY:SAVE_ERROR",j="GEOSTORY:STORY_SAVED",E="GEOSTORY:SELECT_CARD",x="GEOSTORY:SET_CONTROL",P="GEOSTORY:SET_RESOURCE",C="GEOSTORY:SET_CURRENT_STORY",T="GEOSTORY:SET_WEBPAGE_URL",M="GEOSTORY:TOGGLE_CARD_PREVIEW",_="GEOSTORY:TOGGLE_SETTINGS_PANEL",A="GEOSTORY:TOGGLE_SETTING",R="GEOSTORY:TOGGLE_CONTENT_FOCUS",I="GEOSTORY:UPDATE",D="GEOSTORY:UPDATE_SETTING",k="GEOSTORY:UPDATE_CURRENT_PAGE",L="GEOSTORY:REMOVE_RESOURCE",N="GEOSTORY:SET_PENDING_CHANGES",F="GEOSTORY:SET_UPDATE_URL_SCROLL",U=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(e){return e};return{type:l,id:n&&n.id||a()(),path:e,position:t,element:o()(n)&&Object(s.m)(n,r)||n}},G=function(e,t,n){return{type:c,id:e,mediaType:t,data:n}},B=function(){return{type:p}},z=function(e){return{type:u,mode:e?s.e.EDIT:s.e.VIEW}},W=function(e,t,n){return{type:d,id:e,mediaType:t,data:n}},V=function(e,t){return{type:b,id:e,options:t}},H=function(e){return{type:y,id:e}},q=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"loading";return{type:h,value:e,name:t}},Y=function(e){return{type:g,error:e}},Q=function(e){return{type:S,path:e}},K=function(e){return{type:w,resource:e}},Z=function(e){return{type:O,error:e}},X=function(e,t){return{type:x,control:e,value:t}},J=function(e){return{type:E,card:e}},$=function(e){return{type:P,resource:e}},ee=function(e){return{type:j,id:e}},te=function(e){return{type:C,story:e}},ne=function(){return{type:M}},re=function(e){return{type:A,option:e}},oe=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{type:_,withSave:e}},ie=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"replace";return{type:I,path:e,element:t,mode:n}},ae=function(e){var t=e.sectionId,n=e.columnId;return{type:k,sectionId:t,columnId:n}},se=function(e,t,n){return{type:v,source:e,target:t,position:n}},le=function(e,t,n,r,o){return{type:R,status:e,target:t,selector:n,hideContent:r,path:o}},ce=function(e,t){return{type:D,prop:e,value:t}},ue=function(e){return{type:T,src:e}},pe=function(e){var t=e.path,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GEOSTORY";return{type:f,path:t,owner:n}},de=function(e,t){return{type:L,id:e,mediaType:t}},fe=function(e){return{type:N,value:e}},me=function(e){return{type:F,value:e}}},"./MapStore2/web/client/actions/globeswitcher.js":function(e,t){e.exports={toggle3d:function(e,t){return{type:"TOGGLE_3D",enable:e,originalMapType:t}},updateLast2dMapType:function(e){return{type:"UPDATE_LAST_2D_MAPTYPE",mapType:e}},UPDATE_LAST_2D_MAPTYPE:"UPDATE_LAST_2D_MAPTYPE",TOGGLE_3D:"TOGGLE_3D"}},"./MapStore2/web/client/actions/layerCapabilities.js":function(e,t,n){var r=n("./MapStore2/web/client/actions/layers.js").updateNode,o=n("./MapStore2/web/client/api/WMS.js"),i=n("./MapStore2/web/client/api/WFS.js"),a=n("./MapStore2/web/client/api/WCS.js"),s=n("./MapStore2/web/client/utils/LayersUtils.js"),l=n("./node_modules/lodash/lodash.js"),c=l.get,u=l.head;e.exports={getDescribeLayer:function(e,t,n){return function(s){return o.describeLayer(e,t.name,n).then((function(n){return n&&"WFS"===n.owsType?i.describeFeatureTypeOGCSchemas(e,n.name).then((function(e){var o=c(e,"complexType[0].complexContent.extension.sequence.element"),i=u(o&&o.filter((function(e){return"the_geom"===e.name||0===e.type.prefix.indexOf("gml")})));return i=i&&i.type.localPart,n.geometryType=i&&i.split("PropertyType")[0],s(r(t.id,"id",{describeLayer:n,describeFeatureType:e}))})).catch((function(){return s(r(t.id,"id",{describeLayer:n||{error:"no describe feature found"}}))})):(n&&"WCS"===n.owsType&&a.describeCoverage(e,n.name).then((function(e){var o=c(e,"wcs:CoverageDescriptions.wcs:CoverageDescription.wcs:Range.wcs:Field.wcs:Axis.wcs:AvailableKeys.wcs:Key");n.bands=o&&"string"==typeof o?["1"]:o.map((function(e,t){return t+1+""})),s(r(t.id,"id",{describeLayer:n,describeCoverage:e}))})).catch((function(){return s(r(t.id,"id",{describeLayer:n||{error:"no describe coverage found"}}))})),s(r(t.id,"id",{describeLayer:n||{error:"no describe Layer found"}})))})).catch((function(e){return s(r(t.id,"id",{describeLayer:{error:e.status}}))}))}},getLayerCapabilities:function(e,t){var n=s.getCapabilitiesUrl(e);return function(i){return i(r(e.id,"id",{capabilitiesLoading:!0})),o.getCapabilities(n,t).then((function(t){var n=o.parseLayerCapabilities(t,e);i(r(e.id,"id",n?s.formatCapabitiliesOptions(n):{capabilitiesLoading:null,capabilities:{error:"error getting capabilities",details:"no layer info"},description:null}))})).catch((function(t){i(r(e.id,"id",{capabilitiesLoading:null,capabilities:{error:"error getting capabilities",details:t},description:null}))}))}}}},"./MapStore2/web/client/actions/layerFilter.js":function(e,t){e.exports={OPEN_QUERY_BUILDER:"LAYER_FILTER:OPEN_QUERY_BUILDER",openQueryBuilder:function(){return{type:"LAYER_FILTER:OPEN_QUERY_BUILDER"}},INIT_LAYER_FILTER:"LAYER_FILTER:INIT_LAYER_FILTER",initLayerFilter:function(e){return{type:"LAYER_FILTER:INIT_LAYER_FILTER",filter:e}},APPLIED_FILTER:"LAYER_FILTER:APPLIED_FILTER",storeAppliedFilter:function(e){return{type:"LAYER_FILTER:APPLIED_FILTER",filter:e}},STORE_CURRENT_APPLIED_FILTER:"LAYER_FILTER:STORE_CURRENT_APPLIED_FILTER",storeCurrentFilter:function(){return{type:"LAYER_FILTER:STORE_CURRENT_APPLIED_FILTER"}},DISCARD_CURRENT_FILTER:"LAYER_FILTER:DISCARD_CURRENT_FILTER",discardCurrentFilter:function(){return{type:"LAYER_FILTER:DISCARD_CURRENT_FILTER"}},applyFilter:function(){return{type:"LAYER_FILTER:APPLY_FILTER"}},APPLY_FILTER:"LAYER_FILTER:APPLY_FILTER"}},"./MapStore2/web/client/actions/mapimport.js":function(e,t){e.exports={SET_LAYERS:"IMPORT::SET_LAYERS",ON_ERROR:"IMPORT::ON_ERROR",LOADING:"IMPORT::LOADING",ON_SELECT_LAYER:"IMPORT::ON_SELECT_LAYER",ON_LAYER_ADDED:"IMPORT::ON_LAYER_ADDED",UPDATE_BBOX:"IMPORT::UPDATE_BBOX",ON_SUCCESS:"IMPORT::ON_SUCCESS",ON_SHAPE_ERROR:"ON_SHAPE_ERROR",ON_LAYER_SKIPPED:"IMPORT::ON_LAYER_SKIPPED",onShapeError:function(e){return{type:"ON_SHAPE_ERROR",message:e}},setLayers:function(e,t){return{type:"IMPORT::SET_LAYERS",layers:e,errors:t}},onError:function(e){return{type:"IMPORT::ON_ERROR",error:e}},setLoading:function(e){return{type:"IMPORT::LOADING",status:e}},onSelectLayer:function(e){return{type:"IMPORT::ON_SELECT_LAYER",layer:e}},onLayerAdded:function(e){return{type:"IMPORT::ON_LAYER_ADDED",layer:e}},updateBBox:function(e){return{type:"IMPORT::UPDATE_BBOX",bbox:e}},onSuccess:function(e){return{type:"IMPORT::ON_SUCCESS",message:e}},onLayerSkipped:function(e){return{type:"IMPORT::ON_LAYER_SKIPPED",layer:e}}}},"./MapStore2/web/client/actions/mousePosition.js":function(e,t){e.exports={CHANGE_MOUSE_POSITION:"CHANGE_MOUSE_POSITION",CHANGE_MOUSE_POSITION_CRS:"CHANGE_MOUSE_POSITION_CRS",CHANGE_MOUSE_POSITION_STATE:"CHANGE_MOUSE_POSITION_STATE",changeMousePosition:function(e){return{type:"CHANGE_MOUSE_POSITION",position:e}},changeMousePositionCrs:function(e){return{type:"CHANGE_MOUSE_POSITION_CRS",crs:e}},changeMousePositionState:function(e){return{type:"CHANGE_MOUSE_POSITION_STATE",enabled:e}}}},"./MapStore2/web/client/actions/queryform.js":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=n("./MapStore2/web/client/libs/ajax.js");function i(e,t){return{type:"ZONE_FILTER",data:e,id:t}}function a(e,t){return{type:"ZONE_SEARCH_ERROR",error:e,id:t}}function s(e,t){return{type:"ZONE_SEARCH",active:e,id:t}}e.exports={ADD_FILTER_FIELD:"ADD_FILTER_FIELD",REMOVE_FILTER_FIELD:"REMOVE_FILTER_FIELD",UPDATE_FILTER_FIELD:"UPDATE_FILTER_FIELD",UPDATE_EXCEPTION_FIELD:"UPDATE_EXCEPTION_FIELD",ADD_GROUP_FIELD:"ADD_GROUP_FIELD",UPDATE_LOGIC_COMBO:"UPDATE_LOGIC_COMBO",REMOVE_GROUP_FIELD:"REMOVE_GROUP_FIELD",CHANGE_CASCADING_VALUE:"CHANGE_CASCADING_VALUE",EXPAND_ATTRIBUTE_PANEL:"EXPAND_ATTRIBUTE_PANEL",EXPAND_SPATIAL_PANEL:"EXPAND_SPATIAL_PANEL",EXPAND_CROSS_LAYER:"QUERYFORM:EXPAND_CROSS_LAYER",SELECT_SPATIAL_METHOD:"SELECT_SPATIAL_METHOD",SELECT_SPATIAL_OPERATION:"SELECT_SPATIAL_OPERATION",CHANGE_SPATIAL_ATTRIBUTE:"CHANGE_SPATIAL_ATTRIBUTE",CHANGE_SPATIAL_FILTER_VALUE:"CHANGE_SPATIAL_FILTER_VALUE",REMOVE_SPATIAL_SELECT:"REMOVE_SPATIAL_SELECT",SHOW_SPATIAL_DETAILS:"SHOW_SPATIAL_DETAILS",SET_CROSS_LAYER_PARAMETER:"QUERYFORM:SET_CROSS_LAYER_PARAMETER",QUERY_FORM_SEARCH:"QUERY_FORM_SEARCH",QUERY_FORM_RESET:"QUERY_FORM_RESET",SHOW_GENERATED_FILTER:"SHOW_GENERATED_FILTER",CHANGE_DWITHIN_VALUE:"CHANGE_DWITHIN_VALUE",ZONE_SEARCH:"ZONE_SEARCH",ZONE_SEARCH_ERROR:"ZONE_SEARCH_ERROR",ZONE_FILTER:"ZONE_FILTER",ZONE_CHANGE:"ZONE_CHANGE",ZONES_RESET:"ZONES_RESET",SIMPLE_FILTER_FIELD_UPDATE:"SIMPLE_FILTER_FIELD_UPDATE",ADD_SIMPLE_FILTER_FIELD:"ADD_SIMPLE_FILTER_FIELD",REMOVE_SIMPLE_FILTER_FIELD:"REMOVE_SIMPLE_FILTER_FIELD",REMOVE_ALL_SIMPLE_FILTER_FIELDS:"REMOVE_ALL_SIMPLE_FILTER_FIELDS",SELECT_VIEWPORT_SPATIAL_METHOD:"SELECT_VIEWPORT_SPATIAL_METHOD",UPDATE_GEOMETRY:"UPDATE_GEOMETRY",UPDATE_FILTER_FIELD_OPTIONS:"UPDATE_FILTER_FIELD_OPTIONS",LOADING_FILTER_FIELD_OPTIONS:"LOADING_FILTER_FIELD_OPTIONS",ADD_CROSS_LAYER_FILTER_FIELD:"QUERYFORM:ADD_CROSS_LAYER_FILTER_FIELD",UPDATE_CROSS_LAYER_FILTER_FIELD:"QUERYFORM:UPDATE_CROSS_LAYER_FILTER_FIELD",REMOVE_CROSS_LAYER_FILTER_FIELD:"QUERYFORM:REMOVE_CROSS_LAYER_FILTER_FIELD",RESET_CROSS_LAYER_FILTER:"QUERYFORM:RESET_CROSS_LAYER_FILTER",SET_AUTOCOMPLETE_MODE:"SET_AUTOCOMPLETE_MODE",TOGGLE_AUTOCOMPLETE_MENU:"TOGGLE_AUTOCOMPLETE_MENU",LOAD_FILTER:"QUERYFORM:LOAD_FILTER",setAutocompleteMode:function(e){return{type:"SET_AUTOCOMPLETE_MODE",status:e}},loadingFilterFieldOptions:function(e,t){return{type:"LOADING_FILTER_FIELD_OPTIONS",status:e,filterField:t}},updateGeometrySpatialField:function(e){return{type:"UPDATE_GEOMETRY",geometry:e}},selectViewportSpatialMethod:function(){return{type:"SELECT_VIEWPORT_SPATIAL_METHOD"}},resetZones:function(){return{type:"ZONES_RESET"}},zoneChange:function(e,t){return{type:"ZONE_CHANGE",id:e,value:t}},search:function(e,t){return{type:"QUERY_FORM_SEARCH",searchUrl:e,filterObj:t}},loadFilter:function(e){return{type:"QUERYFORM:LOAD_FILTER",filter:e}},zoneSearch:s,zoneSearchError:a,zoneFilter:i,zoneGetValues:function(e,t,n){return function(l){return o.post(e,t,{timeout:1e4,headers:{Accept:"application/json","Content-Type":"text/plain"}}).then((function(o){var c=o.data;if("object"!==r(c))try{c=JSON.parse(c)}catch(r){l(a("Search result broken ("+e+":   "+t+"): "+r.message,n))}l(i(c,n)),l(s(!1,n))})).catch((function(e){l(a(e,n))}))}},addFilterField:function(e){return{type:"ADD_FILTER_FIELD",groupId:e}},removeFilterField:function(e){return{type:"REMOVE_FILTER_FIELD",rowId:e}},updateFilterField:function(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return{type:"UPDATE_FILTER_FIELD",rowId:e,fieldName:t,fieldValue:n,fieldType:r,fieldOptions:o}},updateExceptionField:function(e,t){return{type:"UPDATE_EXCEPTION_FIELD",rowId:e,exceptionMessage:t}},addGroupField:function(e,t){return{type:"ADD_GROUP_FIELD",groupId:e,index:t}},updateLogicCombo:function(e,t){return{type:"UPDATE_LOGIC_COMBO",groupId:e,logic:t}},removeGroupField:function(e){return{type:"REMOVE_GROUP_FIELD",groupId:e}},changeCascadingValue:function(e){return{type:"CHANGE_CASCADING_VALUE",attributes:e}},expandAttributeFilterPanel:function(e){return{type:"EXPAND_ATTRIBUTE_PANEL",expand:e}},expandSpatialFilterPanel:function(e){return{type:"EXPAND_SPATIAL_PANEL",expand:e}},expandCrossLayerFilterPanel:function(e){return{type:"QUERYFORM:EXPAND_CROSS_LAYER",expand:e}},selectSpatialMethod:function(e,t){return{type:"SELECT_SPATIAL_METHOD",fieldName:t,method:e}},selectSpatialOperation:function(e,t){return{type:"SELECT_SPATIAL_OPERATION",fieldName:t,operation:e}},changeSpatialAttribute:function(e){return{type:"CHANGE_SPATIAL_ATTRIBUTE",attribute:e}},changeSpatialFilterValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.feature,n=e.srsName,r=e.collectGeometries,o=e.style,i=e.options,a=e.value;return{type:"CHANGE_SPATIAL_FILTER_VALUE",value:a,collectGeometries:r,options:i,geometry:t&&t.geometry,feature:t,srsName:n,style:o}},removeSpatialSelection:function(){return{type:"REMOVE_SPATIAL_SELECT"}},showSpatialSelectionDetails:function(e){return{type:"SHOW_SPATIAL_DETAILS",show:e}},setCrossLayerFilterParameter:function(e,t){return{type:"QUERYFORM:SET_CROSS_LAYER_PARAMETER",key:e,value:t}},query:function(e,t){return{type:"SHOW_GENERATED_FILTER",data:t}},reset:function(e){return{type:"QUERY_FORM_RESET",skip:e}},changeDwithinValue:function(e){return{type:"CHANGE_DWITHIN_VALUE",distance:e}},simpleFilterFieldUpdate:function(e,t){return{type:"SIMPLE_FILTER_FIELD_UPDATE",id:e,properties:t}},addSimpleFilterField:function(e){return{type:"ADD_SIMPLE_FILTER_FIELD",properties:e}},removeSimpleFilterField:function(e){return{type:"REMOVE_SIMPLE_FILTER_FIELD",id:e}},removeAllSimpleFilterFields:function(){return{type:"REMOVE_ALL_SIMPLE_FILTER_FIELDS"}},addCrossLayerFilterField:function(e){return{type:"QUERYFORM:ADD_CROSS_LAYER_FILTER_FIELD",rowId:(new Date).getTime(),groupId:e}},updateCrossLayerFilterField:function(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return{type:"QUERYFORM:UPDATE_CROSS_LAYER_FILTER_FIELD",rowId:e,fieldName:t,fieldValue:n,fieldType:r,fieldOptions:o}},removeCrossLayerFilterField:function(e){return{type:"QUERYFORM:REMOVE_CROSS_LAYER_FILTER_FIELD",rowId:e}},resetCrossLayerFilter:function(){return{type:"QUERYFORM:RESET_CROSS_LAYER_FILTER"}},updateFilterFieldOptions:function(e,t,n){return{type:"UPDATE_FILTER_FIELD_OPTIONS",filterField:e,options:t,valuesCount:n}},toggleMenu:function(e,t){return{type:"TOGGLE_AUTOCOMPLETE_MENU",rowId:e,status:t}}}},"./MapStore2/web/client/actions/rasterstyler.js":function(e,t){e.exports={SET_RASTERSTYLE_PARAMETER:"SET_RASTERSTYLE_PARAMETER",SET_RASTER_LAYER:"SET_RASTER_LAYER",setRasterStyleParameter:function(e,t,n){return{type:"SET_RASTERSTYLE_PARAMETER",component:e,property:t,value:n}},setRasterLayer:function(e){return{type:"SET_RASTER_LAYER",layer:e}}}},"./MapStore2/web/client/actions/rulesmanager.js":function(e,t){var n="RULES_MANAGER:EDIT_RULE";e.exports={RULES_SELECTED:"RULES_SELECTED",UPDATE_FILTERS_VALUES:"UPDATE_FILTERS_VALUES",OPTIONS_LOADED:"OPTIONS_LOADED",rulesSelected:function(e,t,n,r){return{type:"RULES_SELECTED",rules:e,merge:t,unselect:n,targetPosition:r}},updateFiltersValues:function(e){return{type:"UPDATE_FILTERS_VALUES",filtersValues:e}},optionsLoaded:function(e,t,n,r){return{type:"OPTIONS_LOADED",name:e,values:t,page:n,valuesCount:r}},LOADING:"RULES_MANAGER:LOADING",setLoading:function(e){return{type:"RULES_MANAGER:LOADING",loading:e}},SET_FILTER:"RULES_MANAGER:SET_FILTER",setFilter:function(e,t){return{type:"RULES_MANAGER:SET_FILTER",key:e,value:t}},EDIT_RULE:n,onEditRule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{type:n,createNew:t,targetPriority:e}},CLEAN_EDITING:"RULES_MANAGER:CLEAN_EDITING",cleanEditing:function(){return{type:"RULES_MANAGER:CLEAN_EDITING"}},SAVE_RULE:"RULES_MANAGER:SAVE_RULE",saveRule:function(e){return{type:"RULES_MANAGER:SAVE_RULE",rule:e}},RULE_SAVED:"RULES_MANAGER:RULE_SAVED",DELETE_RULES:"RULES_MANAGER:DELETE_RULES",delRules:function(e){return{type:"RULES_MANAGER:DELETE_RULES",ids:e}},CACHE_CLEAN:"RULES_MANAGER:CACHE_CLEAN",onCacheClean:function(){return{type:"RULES_MANAGER:CACHE_CLEAN"}}}},"./MapStore2/web/client/actions/search.js":function(e,t,n){"use strict";n.r(t),n.d(t,"SEARCH_LAYER_WITH_FILTER",(function(){return o})),n.d(t,"TEXT_SEARCH_STARTED",(function(){return i})),n.d(t,"TEXT_SEARCH_RESULTS_LOADED",(function(){return a})),n.d(t,"TEXT_SEARCH_PERFORMED",(function(){return s})),n.d(t,"TEXT_SEARCH_RESULTS_PURGE",(function(){return l})),n.d(t,"TEXT_SEARCH_RESET",(function(){return c})),n.d(t,"TEXT_SEARCH_ADD_MARKER",(function(){return u})),n.d(t,"TEXT_SEARCH_TEXT_CHANGE",(function(){return p})),n.d(t,"TEXT_SEARCH_LOADING",(function(){return d})),n.d(t,"TEXT_SEARCH_NESTED_SERVICES_SELECTED",(function(){return f})),n.d(t,"TEXT_SEARCH_ERROR",(function(){return m})),n.d(t,"TEXT_SEARCH_CANCEL_ITEM",(function(){return y})),n.d(t,"TEXT_SEARCH_ITEM_SELECTED",(function(){return b})),n.d(t,"TEXT_SEARCH_SHOW_GFI",(function(){return g})),n.d(t,"TEXT_SEARCH_SET_HIGHLIGHTED_FEATURE",(function(){return h})),n.d(t,"UPDATE_RESULTS_STYLE",(function(){return v})),n.d(t,"CHANGE_SEARCH_TOOL",(function(){return S})),n.d(t,"ZOOM_ADD_POINT",(function(){return w})),n.d(t,"CHANGE_FORMAT",(function(){return O})),n.d(t,"CHANGE_COORD",(function(){return j})),n.d(t,"changeFormat",(function(){return E})),n.d(t,"searchLayerWithFilter",(function(){return x})),n.d(t,"zoomAndAddPoint",(function(){return P})),n.d(t,"changeActiveSearchTool",(function(){return C})),n.d(t,"searchResultLoaded",(function(){return T})),n.d(t,"searchTextChanged",(function(){return M})),n.d(t,"searchTextLoading",(function(){return _})),n.d(t,"searchResultError",(function(){return A})),n.d(t,"resultsPurge",(function(){return R})),n.d(t,"resetSearch",(function(){return I})),n.d(t,"addMarker",(function(){return D})),n.d(t,"textSearch",(function(){return k})),n.d(t,"selectSearchItem",(function(){return L})),n.d(t,"showGFI",(function(){return N})),n.d(t,"selectNestedService",(function(){return F})),n.d(t,"cancelSelectedItem",(function(){return U})),n.d(t,"setHighlightedFeature",(function(){return G})),n.d(t,"updateResultsStyle",(function(){return B})),n.d(t,"changeCoord",(function(){return z})),n.d(t,"nonQueriableLayerError",(function(){return W})),n.d(t,"serverError",(function(){return V}));var r=n("./MapStore2/web/client/actions/notifications.js"),o="SEARCH:SEARCH_WITH_FILTER",i="TEXT_SEARCH_STARTED",a="TEXT_SEARCH_RESULTS_LOADED",s="TEXT_SEARCH_PERFORMED",l="TEXT_SEARCH_RESULTS_PURGE",c="TEXT_SEARCH_RESET",u="TEXT_SEARCH_ADD_MARKER",p="TEXT_SEARCH_TEXT_CHANGE",d="TEXT_SEARCH_LOADING",f="TEXT_SEARCH_NESTED_SERVICE_SELECTED",m="TEXT_SEARCH_ERROR",y="TEXT_SEARCH_CANCEL_ITEM",b="TEXT_SEARCH_ITEM_SELECTED",g="TEXT_SEARCH_SHOW_GFI",h="TEXT_SEARCH_SET_HIGHLIGHTED_FEATURE",v="UPDATE_RESULTS_STYLE",S="CHANGE_SEARCH_TOOL",w="SEARCH:ZOOM_ADD_POINT",O="SEARCH:CHANGE_FORMAT",j="SEARCH:CHANGE_COORD";function E(e){return{type:O,format:e}}function x(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layer,n=e.cql_filter;return{type:o,layer:t,cql_filter:n}}function P(e,t,n){return{type:w,pos:e,zoom:t,crs:n}}function C(e){return{type:S,activeSearchTool:e}}function T(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0;return{type:a,results:e,append:t,services:n}}function M(e){return{type:p,searchText:e}}function _(e){return{type:d,loading:e}}function A(e){return{type:m,error:e}}function R(){return{type:l}}function I(){return{type:c}}function D(e,t){return{type:u,markerPosition:e,markerLabel:t}}function k(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.services,r=void 0===n?null:n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:15;return{type:i,searchText:e,services:r,maxResults:o}}function L(e,t,n){return{type:b,item:e,mapConfig:t,resultsStyle:n}}var N=function(e){return{type:g,item:e}};function F(e,t,n){return{type:f,searchText:n,services:e,items:t}}function U(e){return{type:y,item:e}}function G(e){return{type:h,highlightedFeature:e}}function B(e){return{type:v,style:e}}function z(e,t){return{type:j,coord:e,val:t}}function W(){return Object(r.error)({title:"Error",position:"tc",message:"search.errors.nonQueriableLayers",autoDismiss:10})}function V(){return Object(r.error)({title:"Error",position:"tc",message:"search.errors.serverError",autoDismiss:10})}},"./MapStore2/web/client/actions/searchbookmarkconfig.js":function(e,t){e.exports={SET_SEARCH_BOOKMARK_CONFIG:"SET_SEARCH_BOOKMARK_CONFIG",RESET_BOOKMARK_CONFIG:"RESET_BOOKMARK_CONFIG",UPDATE_BOOKMARK:"UPDATE_BOOKMARK",FILTER_BOOKMARKS:"FILTER_BOOKMARKS",setSearchBookmarkConfig:function(e,t){return{type:"SET_SEARCH_BOOKMARK_CONFIG",property:e,value:t}},resetBookmarkConfig:function(){return{type:"RESET_BOOKMARK_CONFIG"}},updateBookmark:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return{type:"UPDATE_BOOKMARK",bookmark:e,idx:t}},filterBookmarks:function(e){return{type:"FILTER_BOOKMARKS",filter:e}}}},"./MapStore2/web/client/actions/searchconfig.js":function(e,t){e.exports={SET_SEARCH_CONFIG_PROP:"SET_SEARCH_CONFIG_PROP",RESET_SEARCH_CONFIG:"RESET_SEARCH_CONFIG",UPDATE_SERVICE:"UPDATE_SERVICE",setSearchConfigProp:function(e,t){return{type:"SET_SEARCH_CONFIG_PROP",property:e,value:t}},restServiceConfig:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return{type:"RESET_SEARCH_CONFIG",page:e}},updateService:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return{type:"UPDATE_SERVICE",service:e,idx:t}}}},"./MapStore2/web/client/actions/snapshot.js":function(e,t,n){var r=n("./MapStore2/web/client/utils/FileUtils.js");e.exports={CHANGE_SNAPSHOT_STATE:"CHANGE_SNAPSHOT_STATE",SNAPSHOT_ERROR:"SNAPSHOT_ERROR",SNAPSHOT_READY:"SNAPSHOT_READY",SNAPSHOT_ADD_QUEUE:"SNAPSHOT_ADD_QUEUE",SNAPSHOT_REMOVE_QUEUE:"SNAPSHOT_REMOVE_QUEUE",changeSnapshotState:function(e,t){return{type:"CHANGE_SNAPSHOT_STATE",state:e,tainted:t}},onSnapshotError:function(e){return{type:"SNAPSHOT_ERROR",error:e}},onSnapshotReady:function(e,t,n,r){return{type:"SNAPSHOT_READY",imgData:e,width:t,height:n,size:r}},onCreateSnapshot:function(e){return{type:"SNAPSHOT_ADD_QUEUE",options:e}},onRemoveSnapshot:function(e){return{type:"SNAPSHOT_REMOVE_QUEUE",options:e}},saveImage:function(e){return r.downloadCanvasDataURL(e,"snapshot.png","image/png"),{type:"SAVE_IMAGE",dataURL:e}}}},"./MapStore2/web/client/actions/style.js":function(e,t){e.exports={SET_STYLE_PARAMETER:"SET_STYLE_PARAMETER",setStyleParameter:function(e,t){return{type:"SET_STYLE_PARAMETER",name:e,value:t}}}},"./MapStore2/web/client/actions/styler.js":function(e,t,n){var r=n("./MapStore2/web/client/api/geoserver/Layers.js").getLayer,o=n("./MapStore2/web/client/api/geoserver/Styles.js").saveStyle;function i(e,t,n){return{type:"STYLE_SAVE_ERROR",layer:e,style:t,error:n}}e.exports={STYLE_SAVED:"STYLER_STYLE_SAVED",STYLER_RESET:"STYLER_RESET",SET_STYLER_LAYER:"SET_STYLER_LAYER",saveLayerDefaultStyle:function(e,t,n){return function(a){return r(e,t).then((function(r){o(e,r.defaultStyle&&r.defaultStyle.name,n).then((function(){a(function(e,t){return{type:"STYLER_STYLE_SAVED",name:e,style:t}}(r.defaultStyle.name,n))})).catch((function(e){i(t,r.defaultStyle,e)}))})).catch((function(e){i(t,null,e)}))}},setStylerLayer:function(e){return{type:"SET_STYLER_LAYER",layer:e}},reset:function(e){return{type:"STYLER_RESET",layer:e}}}},"./MapStore2/web/client/actions/thematic.js":function(e,t){e.exports={FIELDS_LOADED:"THEMATIC:FIELDS_LOADED",FIELDS_ERROR:"THEMATIC:FIELDS_ERROR",LOAD_FIELDS:"THEMATIC:LOAD_FIELDS",CLASSIFICATION_LOADED:"THEMATIC:CLASSIFICATION_LOADED",CLASSIFICATION_ERROR:"THEMATIC:CLASSIFICATION_ERROR",LOAD_CLASSIFICATION:"THEMATIC:LOAD_CLASSIFICATION",CHANGE_CONFIGURATION:"THEMATIC:CHANGE_CONFIGURATION",CHANGE_DIRTY:"THEMATIC:CHANGE_DIRTY",CHANGE_INPUT_VALIDITY:"THEMATIC:CHANGE_INPUT_VALIDITY",fieldsLoaded:function(e,t){return{type:"THEMATIC:FIELDS_LOADED",layer:e,fields:t}},loadFields:function(e){return{type:"THEMATIC:LOAD_FIELDS",layer:e}},fieldsError:function(e,t){return{type:"THEMATIC:FIELDS_ERROR",layer:e,error:t}},loadClassification:function(e,t){return{type:"THEMATIC:LOAD_CLASSIFICATION",layer:e,params:t}},classificationLoaded:function(e,t){return{type:"THEMATIC:CLASSIFICATION_LOADED",layer:e,classification:t}},classificationError:function(e,t){return{type:"THEMATIC:CLASSIFICATION_ERROR",layer:e,error:t}},changeConfiguration:function(e,t,n,r){return{type:"THEMATIC:CHANGE_CONFIGURATION",layer:e,editEnabled:t,current:n,error:r}},setDirty:function(){return{type:"THEMATIC:CHANGE_DIRTY",dirty:!0}},cancelDirty:function(){return{type:"THEMATIC:CHANGE_DIRTY",dirty:!1}},setInvalidInput:function(e,t,n){return{type:"THEMATIC:CHANGE_INPUT_VALIDITY",valid:!1,input:e,message:t,params:n}},resetInvalidInput:function(e){return{type:"THEMATIC:CHANGE_INPUT_VALIDITY",valid:!0,input:e}}}},"./MapStore2/web/client/actions/tutorial.js":function(e,t){e.exports={START_TUTORIAL:"START_TUTORIAL",INIT_TUTORIAL:"INIT_TUTORIAL",SETUP_TUTORIAL:"SETUP_TUTORIAL",UPDATE_TUTORIAL:"UPDATE_TUTORIAL",DISABLE_TUTORIAL:"DISABLE_TUTORIAL",RESET_TUTORIAL:"RESET_TUTORIAL",CLOSE_TUTORIAL:"CLOSE_TUTORIAL",TOGGLE_TUTORIAL:"TOGGLE_TUTORIAL",CHANGE_PRESET:"CHANGE_PRESET",startTutorial:function(){return{type:"START_TUTORIAL"}},initTutorial:function(e,t,n,r,o,i){return{type:"INIT_TUTORIAL",id:e,steps:t,style:n,checkbox:r,defaultStep:o,presetList:i}},setupTutorial:function(e,t,n,r,o,i,a,s){return{type:"SETUP_TUTORIAL",id:e,steps:t,style:n,checkbox:r,defaultStep:o,stop:i,presetGroup:a,ignoreDisabled:s}},updateTutorial:function(e,t){return{type:"UPDATE_TUTORIAL",tour:e,steps:t}},disableTutorial:function(){return{type:"DISABLE_TUTORIAL"}},resetTutorial:function(){return{type:"RESET_TUTORIAL"}},closeTutorial:function(){return{type:"CLOSE_TUTORIAL"}},toggleTutorial:function(){return{type:"TOGGLE_TUTORIAL"}},changePreset:function(e,t,n){return{type:"CHANGE_PRESET",preset:e,presetGroup:t,ignoreDisabled:n}}}},"./MapStore2/web/client/actions/vectorstyler.js":function(e,t,n){var r=n("./node_modules/uuid/index.js");e.exports={NEW_VECTOR_RULE:"NEW_VECTOR_RULE",REMOVE_VECTOR_RULE:"REMOVE_VECTOR_RULE",SELECT_VECTOR_RULE:"SELECT_VECTOR_RULE",SET_VECTORSTYLE_PARAMETER:"SET_VECTORSTYLE_PARAMETER",SET_VECTOR_RULE_PARAMETER:"SET_VECTOR_RULE_PARAMETER",SET_VECTOR_LAYER:"SET_VECTOR_LAYER",setVectorRuleParameter:function(e,t){return{type:"SET_VECTOR_RULE_PARAMETER",property:e,value:t}},setVectorStyleParameter:function(e,t,n){return{type:"SET_VECTORSTYLE_PARAMETER",component:e,property:t,value:n}},setVectorLayer:function(e){return{type:"SET_VECTOR_LAYER",layer:e}},newVectorRule:function(){return{type:"NEW_VECTOR_RULE",id:r.v1()}},removeVectorRule:function(e){return{type:"REMOVE_VECTOR_RULE",id:e}},selectVectorRule:function(e){return{type:"SELECT_VECTOR_RULE",id:e}}}},"./MapStore2/web/client/actions/widgets.js":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=n("./node_modules/uuid/v1.js"),a="WIDGETS:INSERT",s="WIDGETS:NEW",l="WIDGETS:UPDATE",c="WIDGETS:DELETE",u=function(e,t){return{type:"WIDGETS:EDITOR_SETTING_CHANGE",key:e,value:t}},p=function(e){return u("".concat("dependencySelector"),e)};e.exports={NEW:s,INSERT:a,UPDATE:l,UPDATE_PROPERTY:"WIDGETS:UPDATE_PROPERTY",UPDATE_LAYER:"WIDGETS:UPDATE_LAYER",DELETE:c,CLEAR_WIDGETS:"WIDGETS:CLEAR_WIDGETS",CHANGE_LAYOUT:"WIDGETS:CHANGE_LAYOUT",EDIT:"WIDGETS:EDIT",EDIT_NEW:"WIDGETS:EDIT_NEW",EDITOR_CHANGE:"WIDGETS:EDITOR_CHANGE",EDITOR_SETTING_CHANGE:"WIDGETS:EDITOR_SETTING_CHANGE",ADD_DEPENDENCY:"WIDGETS:ADD_DEPENDENCY",REMOVE_DEPENDENCY:"WIDGETS:REMOVE_DEPENDENCY",LOAD_DEPENDENCIES:"WIDGETS:LOAD_DEPENDENCIES",RESET_DEPENDENCIES:"WIDGETS:RESET_DEPENDENCIES",OPEN_FILTER_EDITOR:"WIDGETS:OPEN_FILTER_EDITOR",EXPORT_CSV:"WIDGETS:EXPORT_CSV",EXPORT_IMAGE:"WIDGETS:EXPORT_IMAGE",TOGGLE_CONNECTION:"WIDGETS:TOGGLE_CONNECTION",WIDGET_SELECTED:"WIDGETS:WIDGET_SELECTED",createChart:function(){return{type:"WIDGETS:NEW_CHART"}},NEW_CHART:"WIDGETS:NEW_CHART",exportCSV:function(e){var t=e.data,n=void 0===t?[]:t,r=e.title;return{type:"WIDGETS:EXPORT_CSV",data:n,title:void 0===r?"export":r}},exportImage:function(e){return{type:"WIDGETS:EXPORT_IMAGE",widgetDivId:e.widgetDivId}},openFilterEditor:function(){return{type:"WIDGETS:OPEN_FILTER_EDITOR"}},createWidget:function(e){return{type:s,widget:e}},insertWidget:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"floating";return{type:a,target:t,id:i(),widget:e}},updateWidget:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"floating";return{type:l,target:t,widget:e}},updateWidgetProperty:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"replace",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"floating";return{type:"WIDGETS:UPDATE_PROPERTY",id:e,target:o,key:t,value:n,mode:r}},updateWidgetLayer:function(e){return{type:"WIDGETS:UPDATE_LAYER",layer:e}},deleteWidget:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"floating";return{type:c,target:t,widget:e}},clearWidgets:function(){return{type:"WIDGETS:CLEAR_WIDGETS"}},changeLayout:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"floating";return{type:"WIDGETS:CHANGE_LAYOUT",allLayouts:t,layout:e,target:n}},editWidget:function(e){return{type:"WIDGETS:EDIT",widget:e}},editNewWidget:function(e,t){return{type:"WIDGETS:EDIT_NEW",widget:e,settings:t}},onEditorChange:function(e,t){return{type:"WIDGETS:EDITOR_CHANGE",key:e,value:t}},changeEditorSetting:u,toggleConnection:function(e,t,n,r){return{type:"WIDGETS:TOGGLE_CONNECTION",active:e,availableDependencies:t,options:n,target:r}},selectWidget:function(e,t){return{type:"WIDGETS:WIDGET_SELECTED",widget:e,opts:t}},addDependency:function(e,t){return{type:"WIDGETS:ADD_DEPENDENCY",key:e,value:t}},removeDependency:function(e){return{type:"WIDGETS:REMOVE_DEPENDENCY",key:e}},loadDependencies:function(e){return{type:"WIDGETS:LOAD_DEPENDENCIES",dependencies:e}},resetDependencies:function(){return{type:"WIDGETS:RESET_DEPENDENCIES"}},setPage:function(e){return u("step",e)},changeDependencySelector:function(e,t){return u("".concat("dependencySelector","[").concat(e,"]"),t)},setupDependencySelector:p,toggleDependencySelector:function(e,t){return p(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({active:e},t))},DEPENDENCY_SELECTOR_KEY:"dependencySelector",DEFAULT_TARGET:"floating",WIDGETS_REGEX:/^widgets\["?([^"\]]*)"?\]\.?(.*)$/,toggleCollapse:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"floating";return{type:"WIDGET:TOGGLE_COLLAPSE",widget:e,target:t}},TOGGLE_COLLAPSE:"WIDGET:TOGGLE_COLLAPSE",toggleCollapseAll:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"floating";return{type:"WIDGET:TOGGLE_COLLAPSE_ALL",target:e}},TOGGLE_COLLAPSE_ALL:"WIDGET:TOGGLE_COLLAPSE_ALL",toggleTray:function(e){return{type:"WIDGET:TOGGLE_TRAY",value:e}},TOGGLE_TRAY:"WIDGET:TOGGLE_TRAY"}},"./MapStore2/web/client/api/SLDService.js":function(e,t,n){function r(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var s=n("./MapStore2/web/client/utils/URLUtils.js").urlParts,l=n("./node_modules/url/url.js"),c=n("./node_modules/lodash/lodash.js"),u=c.sortBy,p=c.head,d=c.castArray,f=c.isNumber,m=c.isString,y=c.uniq,b=n("./node_modules/object-assign/index.js"),g=n("./node_modules/chroma-js/chroma.js"),h=n("./MapStore2/web/client/utils/LayersUtils.js").getLayerUrl,v=y(Object.keys(g.brewer).map((function(e){return e.toLocaleLowerCase()}))).map((function(e){return{name:e,colors:e}})),S=[{name:"red",colors:["#000","#f00"]},{name:"green",colors:["#000","#008000","#0f0"]},{name:"blue",colors:["#000","#00f"]},{name:"gray",colors:["#333","#eee"]},{name:"jet",colors:["#00f","#ff0","#f00"]}].concat(i(v)),w=function(e,t,n,r){var o=p(e?(e.thematic.colors||e.thematic.additionalColors||[]).filter((function(e){return e.name===t})):r?[r].concat(i(S)).filter((function(e){return e.name===t})):S.filter((function(e){return e.name===t})));return o&&(m(o.colors)||o.colors.length>=2)?{ramp:"custom",colors:g.scale(o.colors).colors(n).join(",")}:{ramp:t}},O=function(e,t){var n=e.thematic&&e.thematic.params||[],r=e.thematic&&e.thematic.fieldAsParam&&["field"]||[];return Object.keys(t).reduce((function(a,s){return function(e,t){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t.filter((function(t){return t.field===e})).length>0}(e,t)}(s,[].concat(i(n),i(r)))?b(a,function(e,t,n){return{viewparams:(e?e+";":"")+t+":"+n}}(a.viewparams,s,t[s])):"ramp"===s?b(a,w(e,t[s],t.intervals||5)):"classification"===s?b(a,(l=t[s])?{customClasses:l.reduce((function(e,t){return[].concat(i(e),[t.min+","+t.max+","+t.color])}),[]).join(";")}:{}):"attribute"===s?b(a,{attribute:e.thematic&&e.thematic.fieldAsParam?t[s]:t.field}):"field"===s&&e.thematic&&!e.thematic.fieldAsParam?a:"strokeWeight"!==s||t.strokeOn?"strokeOn"===s?a:b(a,o({},s,t[s])):b(a,o({},s,-1));var l}),{})},j=function(e){return b({protocol:e.protocol,hostname:e.domain},e.port?{port:e.port}:{})},E=function(e){return e.reduce((function(e,t){return f(t)?t:e}),null)},x=function(e){return e.PolygonSymbolizer?"Polygon":e.LineSymbolizer?"LineString":e.PointSymbolizer?"Point":null},P=function(e){return e.PolygonSymbolizer?e.PolygonSymbolizer.Fill&&e.PolygonSymbolizer.Fill.CssParameter&&e.PolygonSymbolizer.Fill.CssParameter.$||"#808080":e.LineSymbolizer?e.LineSymbolizer.Stroke&&e.LineSymbolizer.Stroke.CssParameter&&e.LineSymbolizer.Stroke.CssParameter.$||"#808080":e.PointSymbolizer&&e.PointSymbolizer.Graphic&&e.PointSymbolizer.Graphic.Mark&&e.PointSymbolizer.Graphic.Mark.Fill&&e.PointSymbolizer.Graphic.Mark.Fill.CssParameter&&e.PointSymbolizer.Graphic.Mark.Fill.CssParameter.$||"#808080"},C={getStyleService:function(e,t){var n=s(h(e));return l.format(b(j(n),{pathname:n.applicationRootPath+"/rest/sldservice/"+e.name+"/classify.xml",query:b({},O(e,t),{fullSLD:!0})}))},getCapabilitiesUrl:function(e){var t=s(h(e));return l.format(b(j(t),{pathname:t.applicationRootPath+"/rest/sldservice/capabilities.json"}))},getStyleMetadataService:function(e,t){var n=s(h(e));return l.format(b(j(n),{pathname:n.applicationRootPath+"/rest/sldservice/"+e.name+"/classify.json",query:t}))},getStyleParameters:function(e,t){return{SLD:C.getStyleService(e,t),viewparams:O(e,t).viewparams}},getMetadataParameters:function(e,t){return O(e,t)},getFieldsService:function(e){var t=s(h(e)),n=e.thematic&&e.thematic.datatable||e.name;return l.format(b(j(t),{pathname:t.applicationRootPath+"/rest/sldservice/"+n+"/attributes.json"}))},readFields:function(e){return u(d(e.Attributes.Attribute||[]).filter((function(e){return t=e.type,-1!==["Integer","Long","Double","Float","BigDecimal"].indexOf(t);var t})).map((function(e){return{name:e.name,type:(e.type,"number")}})),(function(e){return e.name}))},readClassification:function(e){!function(e){if(!e||!e.Rules||!e.Rules.Rule)throw new Error("toc.thematic.invalid_object");d(e.Rules.Rule).forEach((function(e){if(!e.PolygonSymbolizer&&!e.LineSymbolizer&&!e.PointSymbolizer)throw new Error("toc.thematic.invalid_geometry")}))}(e);var t=d(e.Rules.Rule||[]);return t.map((function(e,n){var r,o,i,a;return{title:e.Title,color:P(e),type:x(e),min:E([e.Filter.And&&(e.Filter.And.PropertyIsGreaterThanOrEqualTo||e.Filter.And.PropertyIsGreaterThan).Literal,e.Filter.PropertyIsEqualTo&&e.Filter.PropertyIsEqualTo.Literal,n===t.length-1&&(null==e||null===(r=e.Filter)||void 0===r||null===(o=r.PropertyIsGreaterThanOrEqualTo)||void 0===o?void 0:o.Literal)]),max:E([e.Filter.And&&(e.Filter.And.PropertyIsLessThanOrEqualTo||e.Filter.And.PropertyIsLessThan).Literal,e.Filter.PropertyIsEqualTo&&e.Filter.PropertyIsEqualTo.Literal,0===n&&(null==e||null===(i=e.Filter)||void 0===i||null===(a=i.PropertyIsLessThan)||void 0===a?void 0:a.Literal)])}}))||[]},readRasterClassification:function(e){var t,n,r,o;return((null===(n=d(null==e||null===(t=e.Rules)||void 0===t?void 0:t.Rule)[0])||void 0===n||null===(r=n.RasterSymbolizer)||void 0===r||null===(o=r.ColorMap)||void 0===o?void 0:o.ColorMapEntry)||[]).map((function(e){return{color:e["@color"],opacity:void 0===e["@opacity"]?1:e["@opacity"],label:e["@label"],quantity:parseFloat(e["@quantity"])}}))},methods:["equalInterval","quantile","jenks"],getThematicParameters:function(e){return e.map((function(e){return e.type&&C.standardParams[e.type]&&b({},C.standardParams[e.type],e)||e}))},standardParams:{aggregate:{title:"toc.thematic.classification_aggregate",defaultValue:"sum",values:[{name:"toc.thematic.values.sum",value:"sum"},{name:"toc.thematic.values.avg",value:"avg"},{name:"toc.thematic.values.count",value:"count"},{name:"toc.thematic.values.min",value:"min"},{name:"toc.thematic.values.max",value:"max"}]}},getColor:w,getColors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,o=t?t.thematic.colors||[].concat(i(e),i(t.thematic.additionalColors||[])):r?[r].concat(i(e)):i(e);return o.map((function(e){return!m(e.colors)&&e.colors.length>=n?e:b({},e,{colors:g.scale(e.colors).colors(n)})}))},hasThematicStyle:function(e){return!!(e&&e.params&&e.params.SLD)},removeThematicStyle:function(e){e.SLD,e.viewparams;var t=r(e,["SLD","viewparams"]);return b({},t,{SLD:null,viewparams:null})},defaultParams:{attribute:"",intervals:5,method:"equalInterval",ramp:"red",field:"",open:!1,strokeWeight:.2,strokeColor:"#ff0000",strokeOn:!1}};e.exports=C},"./MapStore2/web/client/api/StyleEditor.js":function(e,t,n){"use strict";n.r(t),n.d(t,"clearCache",(function(){return h})),n.d(t,"updateStyleService",(function(){return S})),n.d(t,"classificationVector",(function(){return w})),n.d(t,"classificationRaster",(function(){return O}));var r=n("./node_modules/lodash/isEqual.js"),o=n.n(r),i=n("./MapStore2/web/client/api/SLDService.js"),a=n("./MapStore2/web/client/libs/ajax.js"),s=n.n(a),l=n("./MapStore2/web/client/api/geoserver/Styles.js");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var m=["equalInterval","quantile","jenks","standardDeviation"],y=["equalInterval","quantile","jenks"],b={};function g(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e};return t.map((function(t){return t.ruleId===e?n(t):t}))}function h(){b={}}var v={updateStyleService:function(e){var t=e.baseUrl,n=e.styleService,r=(null==n?void 0:n.isStatic)?n.baseUrl:t;if(b[r])return new Promise((function(e){return e(b[r])}));var o=Object(i.getCapabilitiesUrl)({url:r});return((null==n?void 0:n.isStatic)?new Promise((function(e){return e(n)})):l.default.getStyleService({baseUrl:r})).then((function(e){return s.a.get(o).then((function(t){var n=t.data;return[e,n]})).catch((function(){return[e,null]}))})).then((function(e){var t,n,o,i,a,s,l,c,p,f=d(e,2),g=f[0],h=f[1],v=u(u({},g),{},{classificationMethods:h?(t=h,n=(t||{}).capabilities,o=void 0===n?{}:n,i=o.vector,a=void 0===i?{}:i,s=o.raster,l=void 0===s?{}:s,c=a.classifications||[],p=l.classifications||[],{vector:c.filter((function(e){return-1!==m.indexOf(e)})),raster:p.filter((function(e){return-1!==m.indexOf(e)}))}):{vector:y,raster:y}});return b[r]=v,v}))}};function S(e){var t=e.baseUrl,n=e.styleService;return v.updateStyleService({baseUrl:t,styleService:n})}function w(e){var t=e.values,n=e.properties,r=e.rules,a=e.layer,l=["intervals","method","reverse","attribute","ramp"],c=u(u({},n),t),d=n.ruleId;if(void 0!==t.ramp&&t.ramp!==n.ramp&&"customInterval"===(null==c?void 0:c.method)&&!t.classification){var f=Object(i.getColor)(void 0,t.ramp,c.intervals).colors.split(",");return new Promise((function(e){return e(g(d,r,(function(e){return u(u(u({},e),c),{},{classification:c.classification.map((function(e,t){return u(u({},e),{},{color:f[t]})})),errorId:void 0})})))}))}var m=l.reduce((function(e,t){return u(u({},e),{},p({},t,n[t]))}),{}),y=l.reduce((function(e,t){return u(u({},e),{},p({},t,c[t]))}),{});if(!l.find((function(e){return void 0===c[e]}))&&!o()(m,y)&&"custom"!==(null==t?void 0:t.ramp)&&"customInterval"!==(null==c?void 0:c.method)){var b="custom"===c.ramp&&c.classification.length>0&&{name:"custom",colors:c.classification.map((function(e){return e.color}))},h=Object(i.getColor)(void 0,c.ramp,c.intervals,b);return s.a.get(Object(i.getStyleMetadataService)(a,u({intervals:c.intervals,method:c.method,attribute:c.attribute,reverse:c.reverse},h))).then((function(e){var n=e.data;return g(d,r,(function(e){return u(u(u({},e),t),{},{classification:Object(i.readClassification)(n),errorId:void 0})}))})).catch((function(){return g(d,r,(function(e){return u(u(u({},e),t),{},{errorId:"styleeditor.classificationError"})}))}))}return new Promise((function(e){return e(g(d,r,(function(e){return u(u(u({},e),t),{},{errorId:void 0})})))}))}function O(e){var t=e.values,n=e.properties,r=e.rules,a=e.layer,l=["intervals","continuous","method","reverse","ramp"],c=u(u({},n),t),d=n.ruleId,f=l.reduce((function(e,t){return u(u({},e),{},p({},t,n[t]))}),{}),m=l.reduce((function(e,t){return u(u({},e),{},p({},t,c[t]))}),{});if(!l.find((function(e){return void 0===c[e]}))&&!o()(f,m)){var y="custom"===c.ramp&&c.classification.length>0&&{name:"custom",colors:c.classification.map((function(e){return e.color}))},b=Object(i.getColor)(void 0,c.ramp,c.intervals,y);return s.a.get(Object(i.getStyleMetadataService)(a,u({intervals:c.intervals,continuous:c.continuous,method:c.method,reverse:c.reverse},b))).then((function(e){var n=e.data;return g(d,r,(function(e){return u(u(u({},e),t),{},{classification:Object(i.readRasterClassification)(n),errorId:void 0})}))})).catch((function(){return g(d,r,(function(e){return u(u(u({},e),t),{},{errorId:"styleeditor.classificationRasterError"})}))}))}return new Promise((function(e){return e(g(d,r,(function(e){return u(u(u({},e),t),{},{errorId:void 0})})))}))}t.default={classificationVector:w,classificationRaster:O,updateStyleService:S,clearCache:h}},"./MapStore2/web/client/api/WCS.js":function(e,t,n){var r=n("./MapStore2/web/client/libs/ajax.js"),o=n("./node_modules/url/url.js"),i=n("./node_modules/object-assign/index.js"),a=n("./node_modules/xml2js/lib/xml2js.js"),s={describeCoverage:function(e,t){var n=o.parse(e,!0),s=o.format(i({},n,{query:i({service:"WCS",version:"1.1.0",identifiers:t,request:"DescribeCoverage"},n.query)}));return r.get(s).then((function(e){var t;return a.parseString(e.data,{explicitArray:!1},(function(e,n){t=n})),t}))}};e.exports=s},"./MapStore2/web/client/api/catalog/index.js":function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"getRecords",(function(){return Y})),n.d(r,"textSearch",(function(){return Q})),n.d(r,"validate",(function(){return K})),n.d(r,"testService",(function(){return Z}));var o={};n.r(o),n.d(o,"parseUrl",(function(){return ie})),n.d(o,"getRecords",(function(){return ae})),n.d(o,"textSearch",(function(){return se}));var i=n("./MapStore2/web/client/api/CSW.js"),a=n.n(i),s=n("./MapStore2/web/client/api/WMS.js"),l=n.n(s),c=n("./MapStore2/web/client/api/WMTS.js"),u=n.n(c),p=n("./MapStore2/web/client/utils/ConfigUtils.js"),d=n.n(p),f=n("./node_modules/xml2js/lib/xml2js.js"),m=n.n(f),y=n("./MapStore2/web/client/libs/ajax.js"),b=n.n(y),g=n("./node_modules/lodash/lodash.js"),h=n("./MapStore2/web/client/utils/SecurityUtils.js");function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){w(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O={},j=function(e,t){return e===t||"EPSG:3857"===e&&"EPSG:900913"===t||"EPSG:900913"===e&&"EPSG:3857"===t},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.split("?")[0].split("@");if(t.length>1){var n=t[t.length-1];if(Object(g.includes)(["png","png8","jpeg","vnd.jpeg-png","gif"],n))return n}return null},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=Object(g.castArray)(Object(g.get)(e,"TileMapService.TileMaps.TileMap",[])),a=o.projection,s=Object(g.get)(o,"options.service.allSRS"),l=i.map((function(t){var n=t.$,r=void 0===n?{}:n;return S(S({},r),{},{href:Object(h.cleanAuthParamsFromURL)(r.href),identifier:Object(h.cleanAuthParamsFromURL)(r.href),format:E(r.href),tmsUrl:Object(h.cleanAuthParamsFromURL)(e.url)})})).filter((function(e){var t=e.srs;return!(a&&!s)||j(t,a)})).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.title,n=void 0===t?"":t,o=e.srs,i=void 0===o?"":o;return!r||-1!==n.toLowerCase().indexOf(r.toLowerCase())||-1!==i.toLowerCase().indexOf(r.toLowerCase())}));return{numberOfRecordsMatched:l.length,numberOfRecordsReturned:Math.min(n,l.length),nextRecord:t+Math.min(n,l.length)+1,records:l.filter((function(e,r){return r>=t-1&&r<t-1+n}))}},P=function(e){return e},C=function(e,t,n,r,o){var i=O[e];return i&&(new Date).getTime()<i.timestamp+1e3*(d.a.getConfigProp("cacheExpire")||60)?new Promise((function(e){e(x(i.data,t,n,r,o))})):b.a.get(e).then((function(i){var a;return m.a.parseString(i.data,{explicitArray:!1},(function(t,n){a=S(S({},n),{},{url:e})})),O[e]={timestamp:(new Date).getTime(),data:a},x(a,t,n,r,o)}))},T=n("./MapStore2/web/client/utils/ConfigProvider.js"),M=n("./node_modules/rxjs/Rx.js"),_=n.n(M),A=n("./MapStore2/web/client/utils/URLUtils.js");function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){D(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function D(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var k=function(e,t,n,r,o){var i,a,s,l=Object(g.get)(o,"options.service"),c=[];if(l.provider&&"custom"!==l.provider){var u=(i=l.provider,Object.keys(null!==(a=null===T.a||void 0===T.a||null===(s=T.a[i])||void 0===s?void 0:s.variants)&&void 0!==a?a:{}));0===u.length?c.push({provider:"".concat(l.provider),title:"".concat(l.provider)}):c=u.map((function(e){return{provider:"".concat(l.provider,".").concat(e)}}))}else l.url&&(c=[I(I({},l),{},{title:l.title,type:"tileprovider",url:l.url,attribution:l.attribution,options:l.options||{},provider:"custom"})]);return new Promise((function(e){e(function(e,t,n,r){var o=e.filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.title,n=void 0===t?"":t;return!r||-1!==n.toLowerCase().indexOf(r.toLowerCase())})),i=o.filter((function(e,r){return r>=t-1&&r<t-1+n}));return{numberOfRecordsMatched:o.length,numberOfRecordsReturned:i.length,nextRecord:t+Math.min(n,o.length)+1,records:i}}(c,t,n,r))}))},L=function(e){var t,n=e.provider&&"custom"!==e.provider?!!e.provider:(t=e.url,Object(A.isValidURLTemplate)(t));if(e.title&&n)return M.Observable.of(e);throw new Error("catalog.config.notValidURLTemplate")};function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F(e,t){return!t||"object"!==N(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function U(e){var t="function"==typeof Map?new Map:void 0;return(U=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return G(e,arguments,W(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),z(r,e)})(e)}function G(e,t,n){return(G=B()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&z(o,n.prototype),o}).apply(null,arguments)}function B(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function z(e,t){return(z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function W(e){return(W=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var V=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&z(e,t)}(o,e);var t,n,r=(t=o,n=B(),function(){var e,r=W(t);if(n){var o=W(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return F(this,e)});function o(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(n=r.call(this,e)).name="ServiceValidationError",n.notification=t,n}return o}(U(Error)),H=function(e){return""===e.title||""===e.url?_.a.Observable.throw(new V("Validation Error","catalog.notification.warningAddCatalogService")):_.a.Observable.of(e)},q=function(e){var t=e.parseUrl;return function(e){return _.a.Observable.defer((function(){return b.a.get(t(e.url))})).catch((function(){throw new V("Service Test error","catalog.notification.errorServiceUrl")})).switchMap((function(t){if(t.error||""===t.data)throw new V("Service Test error","catalog.notification.errorServiceUrl");return _.a.Observable.of(e)}))}},Y=function(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=o.options,a=i||{},s=a.service,l=void 0===s?{}:s;return"tms"===l.provider&&C(e,t,n,r,o),k(0,t,n,r,o)},Q=function(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=o.options,a=i||{},s=a.service,l=void 0===s?{}:s;return"tms"===l.provider?C(e,t,n,r,o):k(0,t,n,r,o)},K=function(e){return"tms"===e.provider?H(e):L(e)},Z=function(e){return"tms"===e.provider?q({parseUrl:P})(e):function(e){return M.Observable.of(e)}(e)},X=n("./MapStore2/web/client/api/WFS.js");function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(Object(n),!0).forEach((function(t){ee(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ee(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function te(e){return function(e){if(Array.isArray(e))return ne(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return ne(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ne(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var re={},oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,o=Object(g.castArray)(Object(g.get)(e,'["wfs:WFS_Capabilities"].FeatureTypeList.FeatureType',[])),i=o.map((function(t){var n=t.Name,r=t.Title,o=t.Abstract,i=t.DefaultSRS,a=t.OtherSRS,s=void 0===a?[]:a,l=t["ows:WGS84BoundingBox"],c=l["ows:LowerCorner"].split(" "),u=l["ows:UpperCorner"].split(" "),p={minx:parseFloat(c[0]),miny:parseFloat(c[1]),maxx:parseFloat(u[0]),maxy:parseFloat(u[1])};return{featureType:t,type:"wfs",url:Object(h.cleanAuthParamsFromURL)(e.url),name:n,title:r,description:o,SRS:[i].concat(te(s)),defaultSRS:i,boundingBox:{bounds:p,crs:"EPSG:4326"}}})).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.title,n=void 0===t?"":t,o=e.name,i=void 0===o?"":o,a=e.description;return!r||-1!==n.toLowerCase().indexOf(r.toLowerCase())||-1!==i.toLowerCase().indexOf(r.toLowerCase())||-1!==a.toLowerCase().indexOf(r.toLowerCase())})),a=i.filter((function(e,r){return r>=t-1&&r<t-1+n}));return{numberOfRecordsMatched:i.length,numberOfRecordsReturned:Math.min(n,a.length),nextRecord:t+Math.min(n,i.length)+1,records:a}},ie=X.getCapabilitiesURL,ae=function(e,t,n,r,o){var i=re[e];return i&&(new Date).getTime()<i.timestamp+1e3*(d.a.getConfigProp("cacheExpire")||60)?new Promise((function(e){e(oe(i.data,t,n,r,o))})):Object(X.getCapabilities)(e).then((function(i){var a;return m.a.parseString(i.data,{explicitArray:!1,stripPrefix:!0},(function(t,n){a=$($({},n),{},{url:e})})),re[e]={timestamp:(new Date).getTime(),data:a},oe(a,t,n,r,o)}))},se=function(e,t,n,r,o){return ae(e,t,n,r,o)},le=n("./MapStore2/web/client/api/mapBackground.js"),ce=n.n(le);function ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(n),!0).forEach((function(t){de(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function de(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.default={csw:pe({validate:H,testService:q(a.a)},a.a),wfs:pe({validate:H,testService:q(o)},o),wms:pe({validate:H,testService:q(l.a)},l.a),tms:r,wmts:pe({validate:H,testService:q(u.a)},u.a),backgrounds:pe({validate:H,testService:q(ce.a)},ce.a)}},"./MapStore2/web/client/api/geofence/RuleService.js":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=n("./MapStore2/web/client/libs/ajax.js"),l=n("./MapStore2/web/client/api/geofence/common.js").toJSONPromise,c={constraints:{},ipaddress:"",layer:"",request:"",rolename:"",service:"",username:"",workspace:""},u=function(e){if(!e.constraints)return e;if("DENY"===e.grant){e.constraints;return a(e,["constraints"])}var t=o({},e.constraints);return t.allowedStyles=t.allowedStyles&&t.allowedStyles.style||[],t.attributes=t.attributes&&t.attributes.attribute||[],t.restrictedAreaWkt=t.restrictedAreaWkt||"",o(o({},e),{},{constraints:t})},p=function(e){return"*"===e?void 0:e},d=function(e){switch(e){case"username":return"userName";case"rolename":return"groupName";default:return e}},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).map((function(e){return{key:e,normKey:d(e)}})).reduce((function(t,n){var r=n.key,a=n.normKey;return o(o({},t),{},i({},a,p(e[r])))}),{})};e.exports=function(e){var t=e.addBaseUrl,n=e.addBaseUrlGS,r=e.getGeoServerInstance;return{cleanCache:function(){return s.get("rest/geofence/ruleCache/invalidate",n()).then((function(e){return e.data}))},loadRules:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,i=o({page:e,entries:r},f(n)),a={params:i,headers:{Content:"application/xml"}};return s.get("/rules",t(a)).then((function(e){return l(e.data)})).then((function(e){var t=e.RuleList;return{rules:(void 0===t?{}:t).rule||[]}}))},getRulesCount:function(e){var n={params:f(e)};return s.get("/rules/count",t(n)).then((function(e){return e.data}))},moveRules:function(e,n){var r={params:{targetPriority:e,rulesIds:n&&n.map((function(e){return e.id})).join()}};return s.get("/rules/move",t(r)).then((function(e){return e.data}))},deleteRule:function(e){return s.delete("/rules/id/"+e,t({}))},addRule:function(e){var n=o({},e);if(!n.instance){var i=r().id;n.instance={id:i}}return n.grant||(n.grant="ALLOW"),s.post("/rules",u(n),t({headers:{Content:"application/json"}}))},updateRule:function(e){var n=u(e),r=n.id,i=(n.priority,n.grant,n.position,a(n,["id","priority","grant","position"])),l=o(o({},c),i);return s.put("/rules/id/".concat(r),l,t({headers:{Content:"application/json"}}))}}}},"./MapStore2/web/client/api/geofence/UserService.js":function(e,t,n){var r=n("./MapStore2/web/client/libs/ajax.js"),o=n("./MapStore2/web/client/api/geofence/common.js").toJSONPromise;e.exports=function(e){var t=e.addBaseUrl;return{getRolesCount:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:" ",n=encodeURIComponent("%".concat(e,"%"));return r.get("/groups/count/".concat(n),t({headers:{Accept:"text/plain"}})).then((function(e){return e.data}))},getRoles:function(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,a={page:n,entries:i,nameLike:"%".concat(e,"%")},s={params:a};return r.get("/groups",t(s)).then((function(e){return o(e.data)})).then((function(e){var t=e.UserGroupList;return{roles:[].concat((void 0===t?{}:t).UserGroup||[])}}))},getUsersCount:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:" ",n=encodeURIComponent("%".concat(e,"%"));return r.get("/users/count/".concat(n),t({headers:{Accept:"text/plain"}})).then((function(e){return e.data}))},getUsers:function(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,a={page:n,entries:i,nameLike:"%".concat(e,"%")},s={params:a};return r.get("/users",t(s)).then((function(e){return o(e.data)})).then((function(e){var t=e.UserList;return{users:[].concat((void 0===t?{}:t).User||[])}}))}}}},"./MapStore2/web/client/api/geofence/common.js":function(e,t,n){var r=n("./node_modules/rxjs/Rx.js"),o=n("./node_modules/lodash/lodash.js").isString,i=n("./node_modules/xml2js/lib/xml2js.js").parseString,a=n("./node_modules/xml2js/lib/processors.js").stripPrefix;e.exports={toJSONPromise:function(e){return function(e){return o(e)?r.Observable.bindNodeCallback((function(e,t){return i(e,{tagNameProcessors:[a],explicitArray:!1,mergeAttrs:!0},t)}))(e):r.Observable.of(e)}(e).toPromise()}}},"./MapStore2/web/client/api/geoserver/GeoFence.js":function(e,t,n){var r=n("./MapStore2/web/client/libs/ajax.js"),o=n("./node_modules/object-assign/index.js"),i=n("./node_modules/lodash/lodash.js"),a=i.castArray,s=i.get,l=n("./MapStore2/web/client/api/CSW.js"),c=n("./MapStore2/web/client/utils/ConfigUtils.js"),u={geofence:n("./MapStore2/web/client/api/geofence/UserService.js"),geoserver:n("./MapStore2/web/client/api/geoserver/geofence/UserService.js")},p={geofence:n("./MapStore2/web/client/api/geofence/RuleService.js"),geoserver:n("./MapStore2/web/client/api/geoserver/geofence/RuleService.js")},d={csw:function(e){var t=e.getGeoServerInstance;return{getLayers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=t(),a=i.url,s=a+"csw",c=o.workspace,u=void 0===c?"":c;return l.workspaceSearch(s,n*r+1,r,e,u).then((function(e){return{data:e.records.map((function(e){return{name:e.dc.identifier.replace(/^.*?:/g,"")}})),count:e.numberOfRecordsMatched}}))}}},rest:function(e){var t=e.addBaseUrlGS;return{getLayers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=o.workspace,l=void 0===i?"":i;return r.get("/rest/layers.json",t({headers:{Accept:"application/json"}})).then((function(e){return s(e,"data.layers.layer")})).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return a(e)})).then((function(e){return e.filter((function(e){return!l||e&&e.name&&0===e.name.indexOf("".concat(l,":"))}))})).then((function(t){return{data:t.filter((function(t,r){return r>=e*n&&r<(e+1)*n})).map((function(e){return{name:e.name.replace(/^.*?:/g,"")}})),count:t.length}}))}}}},f={cleanCache:function(){return f.getRuleService().cleanCache()},loadRules:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return f.getRuleService().loadRules(e,t,n)},getRulesCount:function(e){return f.getRuleService().getRulesCount(e)},moveRules:function(e,t){return f.getRuleService().moveRules(e,t)},updateRule:function(e){return f.getRuleService().updateRule(e)},deleteRule:function(e){return f.getRuleService().deleteRule(e)},addRule:function(e){return f.getRuleService().addRule(e)},getRolesCount:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:" ";return f.getUserService().getRolesCount(e)},getRoles:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return f.getUserService().getRoles(e,t,n)},getUsersCount:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:" ";return f.getUserService().getUsersCount(e)},getUsers:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return f.getUserService().getUsers(e,t,n)},getWorkspaces:function(){return r.get("rest/workspaces",f.addBaseUrlGS({headers:{Accept:"application/json"}})).then((function(e){return e.data}))},getLayers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return f.getLayerService().getLayers(e,t,n,r)},getGeoServerInstance:function(){return c.getDefaults().geoFenceGeoServerInstance},getUserService:function(){return u[f.getUserServiceType()]({addBaseUrl:f.addBaseUrl,addBaseUrlGS:f.addBaseUrlGS,getUserService:f.getUserServiceName})},getRuleService:function(){return p[f.getRuleServiceType()]({addBaseUrl:f.addBaseUrl,addBaseUrlGS:f.addBaseUrlGS,getGeoServerInstance:f.getGeoServerInstance})},getLayerService:function(){return d[f.getLayerServiceType()]({addBaseUrl:f.addBaseUrl,addBaseUrlGS:f.addBaseUrlGS,getGeoServerInstance:f.getGeoServerInstance})},getUserServiceType:function(){return c.getDefaults().geoFenceUserServiceType||c.getDefaults().geoFenceServiceType||"geofence"},getRuleServiceType:function(){return c.getDefaults().geoFenceServiceType||"geofence"},getLayerServiceType:function(){return c.getDefaults().geoFenceLayerServiceType||"csw"},getUserServiceName:function(){return c.getDefaults().geoserverUserServiceName},addBaseUrl:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(e,{baseURL:c.getDefaults().geoFenceUrl+(c.getDefaults().geoFencePath||"geofence/rest")})},addBaseUrlGS:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=c.getDefaults().geoFenceGeoServerInstance||{},n=t.url;return o(e,{baseURL:n})}};e.exports=f},"./MapStore2/web/client/api/geoserver/Layers.js":function(e,t,n){function r(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=n("./MapStore2/web/client/libs/ajax.js"),c=n("./node_modules/lodash/lodash.js"),u=c.uniqBy,p=c.castArray,d=n("./MapStore2/web/client/utils/StyleEditorUtils.js").getNameParts,f={getLayer:function(e,t,n){var r=e+"layers/"+t+".json";return l.get(r,n).then((function(e){return e.data&&e.data.layer}))},removeStyles:function(e){var t=e.baseUrl,n=e.layerName,r=e.styles,o=void 0===r?[]:r,i=e.options,s=void 0===i?{}:i,c=d(n),u=c.name,f=c.workspace,m="".concat(t,"rest/").concat(f&&"workspaces/".concat(f,"/")||"","layers/").concat(u,".json");return l.get(m,s).then((function(e){var t=e.data.layer||{},n=t.styles&&t.styles.style&&p(t.styles.style)||[],r=o.map((function(e){return e.name})),i=n.filter((function(e){var t=e.name;return-1===r.indexOf(t)}));return{layer:a(a({},t),{},{styles:{"@class":"linked-hash-set",style:i}})}})).then((function(e){return l.put(m,e).then((function(){return e}))}))},updateAvailableStyles:function(e){var t=e.baseUrl,n=e.layerName,o=e.styles,i=void 0===o?[]:o,s=e.options,c=void 0===s?{}:s,u=d(n),f=u.name,m=u.workspace,y="".concat(t,"rest/").concat(m&&"workspaces/".concat(m,"/")||"","layers/").concat(f,".json");return l.get(y,c).then((function(e){var t=e.data.layer||{},n=t.styles&&t.styles.style&&p(t.styles.style)||[];return{layer:a(a({},t),{},{styles:{"@class":"linked-hash-set",style:[].concat(r(n),r(i))}})}})).then((function(e){return l.put(y,e).then((function(){return e}))}))},updateDefaultStyle:function(e){var t=e.baseUrl,n=e.layerName,o=e.styleName,i=e.options,s=void 0===i?{}:i,c=d(n),f=c.name,m=c.workspace,y="".concat(t,"rest/").concat(m&&"workspaces/".concat(m,"/")||"","layers/").concat(f,".json");return l.get(y,s).then((function(e){var t=e.data.layer||{},n=t.styles&&t.styles.style&&p(t.styles.style)||[],i=t.defaultStyle||{},s=u([i].concat(r(n)),"name");return{layer:a(a({},t),{},{defaultStyle:{name:o},styles:{"@class":"linked-hash-set",style:s}})}})).then((function(e){return l.put(y,e).then((function(){return e}))}))}};e.exports=f},"./MapStore2/web/client/api/geoserver/Styles.js":function(e,t,n){"use strict";n.r(t);var r=n("./MapStore2/web/client/libs/ajax.js"),o=n.n(r),i=n("./node_modules/object-assign/index.js"),a=n.n(i),s=n("./node_modules/lodash/lodash.js");function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var u={},p=function(e){return e.map((function(e){return Object(s.mapKeys)(e,(function(e,t){return Object(s.camelCase)(t)}))}))},d=n("./node_modules/lodash/head.js"),f=n.n(d),m=n("./node_modules/lodash/castArray.js"),y=n.n(m),b=n("./MapStore2/web/client/utils/StyleEditorUtils.js");function g(e){return function(e){if(Array.isArray(e))return h(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){w(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"getStyleBaseUrl",(function(){return P}));var O=[{regex:/gt-css/,format:"css"}],j={css:"application/vnd.geoserver.geocss+css",sld:"application/vnd.ogc.sld+xml",sldse:"application/vnd.ogc.se+xml",zip:"application/zip"},E=function(e,t){return"sld"===e?t&&t.version&&"1.1.0"===t.version?j.sldse:j.sld:j[e]||j.sld},x=function(e,t){var n=e.options,r=void 0===n?{}:n,o=e.format,i=e.baseUrl,a=e.name,s=e.workspace,l=e.languageVersion,c=t?{name:encodeURIComponent(a)}:{};return{options:S(S({},r),{},{params:S(S({},r.params),c),headers:S(S({},r.headers||{}),{},{"Content-Type":E(o,l)})}),url:"".concat(i,"rest/").concat(s&&"workspaces/".concat(s,"/")||"","styles").concat(t?".json":"/".concat(encodeURIComponent(a)))}},P=function(e){var t=e.geoserverBaseUrl,n=e.workspace,r=e.name,o=e.format,i=void 0===o?"json":o;return"".concat(t,"rest/").concat(n&&"workspaces/".concat(n,"/")||"","styles/","".concat(encodeURIComponent(r),".").concat(i))},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=y()((null==e?void 0:e.entry)||[]);return t.reduce((function(e,t){return S(S({},e),{},w({},t["@key"],t.$))}),{})},T=function(e){var t=e.baseUrl,n=e.styleName,r=e.metadata,i=P(S(S({},Object(b.getNameParts)(n)),{},{geoserverBaseUrl:t}));return o.a.get(i).then((function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.data,a=void 0===n?{}:n;return o.a.put(i,{style:S(S({},a.style),{},{metadata:S(S({},C(null===(e=a.style)||void 0===e?void 0:e.metadata)),r)})})}))},M={saveStyle:function(e,t,n,r){var i=e+"styles/"+encodeURI(t),s=a()({},r);return s.headers=a()({},s.headers,{"Content-Type":"application/vnd.ogc.sld+xml"}),o.a.put(i,n,s)},getStyleService:function(e){var t=e.baseUrl;return function(e){var t=e.baseUrl;return u[t]?new Promise((function(e){return e(u[t])})):o.a.all([o.a.get("".concat(t,"rest/about/version"),{"Content-Type":"application/json"}).then((function(e){var t=e.data;return Object(s.get)(t,"about.resource")})).catch((function(){return null})),o.a.get("".concat(t,"rest/about/manifest"),{"Content-Type":"application/json"}).then((function(e){var t=e.data;return Object(s.get)(t,"about.resource")})).catch((function(){return null})),o.a.get("".concat(t,"rest/fonts"),{"Content-Type":"application/json"}).then((function(e){var t=e.data;return Object(s.get)(t,"fonts")})).catch((function(){return null}))]).then((function(e){var n=l(e,3),r=n[0],o=n[1],i=n[2],a={version:r&&p(r),manifest:o&&p(o),fonts:i};return r&&o?(u[t]=a,u[t]):a}))}({baseUrl:t}).then((function(e){var n=e.version,r=e.manifest,o=e.fonts,i=void 0===o?[]:o;if(!n)return null;var a=(r||[]).map((function(e){var t=e.name;return f()(O.filter((function(e){var n=e.regex;return t.match(n)})).map((function(e){return e.format})))})).filter((function(e){return e})),s=f()(n.filter((function(e){var t=e.name;return"geoserver"===(void 0===t?"":t).toLowerCase()})))||{};return{baseUrl:t,version:s.version,formats:[].concat(g(a),["sld"]),availableUrls:[],fonts:i}}))},getStyle:function(e){var t=e.options,n=e.format,r=e.baseUrl,i=e.styleName,a=Object(b.getNameParts)(i),s=a.name,l=a.workspace,c=x({options:t,format:n,baseUrl:r,name:s,workspace:l});return o.a.get(c.url,c.options)},createStyle:function(e){var t=e.baseUrl,n=e.code,r=e.options,i=e.format,a=void 0===i?"sld":i,s=e.styleName,l=e.languageVersion,c=e.metadata,u=Object(b.getNameParts)(s),p=u.name,d=u.workspace,f=x({options:r,format:a,baseUrl:t,name:p,workspace:d,languageVersion:l},!0);return o.a.post(f.url,n,f.options).then((function(){return c?T({baseUrl:t,styleName:s,metadata:c}).then((function(){return null})).catch((function(){return null})):null}))},updateStyle:function(e){var t=e.baseUrl,n=e.code,r=e.options,i=e.format,a=void 0===i?"sld":i,s=e.styleName,l=e.languageVersion,c=e.metadata,u=Object(b.getNameParts)(s),p=u.name,d=u.workspace,f=x({options:r,format:a,baseUrl:t,name:p,workspace:d,languageVersion:l});return o.a.put(f.url,n,f.options).then((function(){return c?T({baseUrl:t,styleName:s,metadata:c}).then((function(){return null})).catch((function(){return null})):null}))},deleteStyle:function(e){var t=e.baseUrl,n=e.options,r=e.format,i=void 0===r?"sld":r,a=e.styleName,s=Object(b.getNameParts)(a),l=s.name,c=s.workspace,u=x({options:n,format:i,baseUrl:t,name:l,workspace:c});return o.a.delete(u.url,u.options)},getStylesInfo:function(e){var t=e.baseUrl,n=e.styles,r=void 0===n?[]:n,i=[],s=r.length;return new Promise((function(e){r&&0!==r.length?r.forEach((function(n,l){var c=n.name;return o.a.get(P(S(S({},Object(b.getNameParts)(c)),{},{geoserverBaseUrl:t}))).then((function(t){var n=t.data;i[l]=a()({},r[l],n&&n.style&&S(S(S({},n.style),n.style.metadata&&{metadata:C(n.style.metadata)}),{},{name:Object(b.stringifyNameParts)(n.style)})||{}),0===--s&&e(i.filter((function(e){return e})))})).catch((function(){i[l]=a()({},r[l]),0===--s&&e(i.filter((function(e){return e})))}))})):e([])}))},getStyleCodeByName:function(e){var t=e.baseUrl,n=e.styleName,r=e.options,i=Object(b.getNameParts)(n),a=i.name,s=i.workspace,l=P({name:a,workspace:s,geoserverBaseUrl:t});return o.a.get(l,r).then((function(e){return e.data&&e.data.style&&e.data.style.name?o.a.get(P({workspace:s,geoserverBaseUrl:t,name:e.data.style.name,format:(n=e.data.style.filename,n.split(".").pop())})).then((function(t){var n=t.data;return S(S({},e.data.style),{},{code:n})})):null;var n}))},updateStyleMetadata:T};t.default=M},"./MapStore2/web/client/api/geoserver/geofence/RuleService.js":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=n("./MapStore2/web/client/libs/ajax.js"),l=n("./node_modules/lodash/lodash.js").pickBy,c=n("./MapStore2/web/client/utils/RuleServiceUtils.jsx"),u=c.convertRuleGS2GF,p=c.convertRuleGF2GS,d={constraints:{},ipaddress:"",layer:"",request:"",rolename:"",service:"",username:"",workspace:""},f=function(e){return l(e,(function(e){return null!==e}))},m=function(e){if(!e.constraints)return e;if("DENY"===e.grant){e.constraints;return a(e,["constraints"])}var t=o({},e.constraints);return t.allowedStyles={style:t.allowedStyles&&t.allowedStyles.style||[]},t.attributes={attribute:t.attributes&&t.attributes.attribute||[]},t.restrictedAreaWkt=t.restrictedAreaWkt||"",o(o({},e),{},{constraints:t})},y=function(e){return"*"===e?void 0:e},b=function(e){switch(e){case"username":return"userName";case"rolename":return"roleName";default:return e}},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).map((function(e){return{key:e,normKey:b(e)}})).reduce((function(t,n){var r=n.key,a=n.normKey;return o(o({},t),{},i({},a,y(e[r])))}),{})};e.exports=function(e){var t=e.addBaseUrl,n=e.addBaseUrlGS,r=e.getGeoServerInstance;return{cleanCache:function(){return s.get("rest/geofence/ruleCache/invalidate",n()).then((function(e){return e.data}))},loadRules:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,i=o({page:e,entries:r},g(n)),a={params:i,headers:{Content:"application/json"}};return s.get("/rules",t(a)).then((function(e){var t=e.data;return{count:t.count,rules:(t.rules||[]).map(u).map(f)}}))},getRulesCount:function(e){var n={params:g(e)};return s.get("/rules/count",t(n)).then((function(e){return e.data.count}))},moveRules:function(e,n){var r={params:{targetPriority:e,rulesIds:n&&n.map((function(e){return e.id})).join()}};return s.get("/rules/move",t(r)).then((function(e){return e.data}))},deleteRule:function(e){return s.delete("/rules/id/"+e,t({}))},addRule:function(e){var n=o({},e);if(!n.instance){var i=r().id;n.instance={id:i}}return n.grant||(n.grant="ALLOW"),s.post("/rules",{Rule:p(m(n))},t({headers:{Content:"application/json"}}))},updateRule:function(e){var n=o(o({},d),m(e));return s.put("/rules/id/".concat(e.id),{Rule:p(n)},t({headers:{Content:"application/json"}}))}}}},"./MapStore2/web/client/api/geoserver/geofence/UserService.js":function(e,t,n){var r=n("./MapStore2/web/client/libs/ajax.js"),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t.toUpperCase().indexOf(e.toUpperCase().replace("%",""))>=0}},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(t){var n=t.userName;return(void 0===n?"":n).toUpperCase().indexOf(e.toUpperCase().replace("%",""))>=0}},a=function(e,t){return function(n,r){return r>=e*t&&r<(e+1)*t}};e.exports=function(e){var t=e.addBaseUrlGS,n=e.getUserService,s=void 0===n?function(){}:n,l=function(){return r.get("/rest/security/roles.json",t({headers:{Accept:"application/json"}})).then((function(e){return e&&e.data&&e.data.roles||[]}))},c=function(e){return r.get("/rest/security/usergroup/".concat(e?"service/".concat(e,"/"):"","users.json"),t({headers:{Accept:"application/json"}})).then((function(e){return e&&e.data&&e.data.users||[]}))};return{getRolesCount:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return l().then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.filter(o(e)).length}))},getRoles:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return l().then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.filter(o(e))})).then((function(e){return e.filter(a(t,n))})).then((function(e){return{roles:e.map((function(e){return{enabled:!0,name:e}}))}}))},getUsersCount:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return c(s()).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.filter(i(e)).length}))},getUsers:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return c(s()).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.filter(i(e))})).then((function(e){return e.filter(a(t,n))})).then((function(e){return{users:e.map((function(e){return{userName:e.userName,enabled:e.enabled}}))}}))}}}},"./MapStore2/web/client/api/searchText.js":function(e,t,n){function r(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var o=n("./MapStore2/web/client/api/WFS.js"),i=n("./node_modules/object-assign/index.js"),a=n("./MapStore2/web/client/utils/GeoCodeUtils.js"),s=n("./MapStore2/web/client/utils/TemplateUtils.js").generateTemplateString,l=function(e){var t,n=e.searchText,r=e.staticFilter,o=e.blacklist,i=e.item,a=e.queriableAttributes,l=e.predicate,c=s(r||"")(i),u=n.split(" ").filter((function(e){return e})).filter((function(e){return o.indexOf(e.toLowerCase())<0}));return 0===u.length&&(u=n?[n]:[]),u.length>0&&(t="(".concat(u.map((function(e){return a.map((function(t){return"".concat(t," ").concat(l," '%").concat(e.replace("'","''"),"%'")})).join(" OR ")})).join(") AND (")).concat(")")),t=t?t.concat(c):c||null},c={nominatim:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{returnFullData:!1};return n("./MapStore2/web/client/api/Nominatim.js").geocode(e,t).then((function(e){return t.returnFullData?e:a.nominatimToGeoJson(e.data)}))},wfs:function(e,t){var n=t.url,a=t.typeName,s=t.queriableAttributes,c=void 0===s?[]:s,u=t.outputFormat,p=void 0===u?"application/json":u,d=t.predicate,f=void 0===d?"ILIKE":d,m=t.staticFilter,y=void 0===m?"":m,b=t.blacklist,g=void 0===b?[]:b,h=t.item,v=t.fromTextToFilter,S=void 0===v?l:v,w=t.returnFullData,O=void 0!==w&&w,j=r(t,["url","typeName","queriableAttributes","outputFormat","predicate","staticFilter","blacklist","item","fromTextToFilter","returnFullData"]),E=S({searchText:e,staticFilter:y,blacklist:g,item:h,queriableAttributes:c,predicate:f});return o.getFeatureSimple(n,i({maxFeatures:10,typeName:a,outputFormat:p,cql_filter:E},j)).then((function(e){return O?e:e.features}))}},u={setService:function(e,t){c[e]=t},getService:function(e){return c[e]?c[e]:null}};e.exports={API:{Services:c,Utils:u}}},"./MapStore2/web/client/components/I18N/Date.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=n("./node_modules/prop-types/index.js"),f=n("./node_modules/react/index.js"),m=n("./node_modules/react-intl/lib/index.es.js").FormattedDate,y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(u,e);var t,n,r,c=l(u);function u(){return i(this,u),c.apply(this,arguments)}return t=u,(n=[{key:"render",value:function(){return this.context.intl?f.createElement(m,o({value:this.props.value},this.props.dateParams)):f.createElement("span",null,this.props.value&&this.props.value.toString()||"")}}])&&a(t.prototype,n),r&&a(t,r),u}(f.Component);p(y,"propTypes",{value:d.object,dateParams:d.object}),p(y,"contextTypes",{intl:d.object}),p(y,"defaultProps",{value:new Date}),e.exports=y},"./MapStore2/web/client/components/I18N/FlagButton.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=n("./node_modules/react/index.js"),f=n("./node_modules/prop-types/index.js"),m=n("./node_modules/react-bootstrap/es/index.js"),y=m.Button,b=m.Tooltip,g=n("./MapStore2/web/client/components/misc/OverlayTrigger.jsx"),h=n("./MapStore2/web/client/utils/LocaleUtils.js"),v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(f,e);var t,r,l,u=s(f);function f(){var e;o(this,f);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return p(c(e=u.call.apply(u,[this].concat(n))),"launchFlagAction",(function(t){e.props.onFlagSelected(t)})),e}return t=f,(r=[{key:"render",value:function(){var e,t=d.createElement(b,{id:"flag-button."+this.props.code},this.props.label);try{e=n("./MapStore2/web/client/components/I18N/images/flags sync recursive ^\\.\\/.*\\.png$")("./"+this.props.code+".png")}catch(t){e=null}return e?d.createElement(g,{key:"overlay-"+this.props.code,overlay:t,placement:this.props.tooltipPlacement},d.createElement(y,{key:this.props.code,onClick:this.launchFlagAction.bind(this,this.props.code),active:this.props.active},d.createElement("img",{src:e,alt:this.props.label}))):null}}])&&i(t.prototype,r),l&&i(t,l),f}(d.Component);p(v,"propTypes",{id:f.string,lang:f.string,code:f.string,active:f.bool,label:f.string,description:f.string,onFlagSelected:f.func,tooltipPlacement:f.string}),p(v,"defaultProps",{locales:h.getSupportedLocales(),code:"en-US",onLanguageChange:function(){},onFlagSelected:function(){},tooltipPlacement:"bottom"}),e.exports=v},"./MapStore2/web/client/components/I18N/I18N.jsx":function(e,t,n){e.exports.Message=n("./MapStore2/web/client/components/I18N/Message.jsx"),e.exports.HTML=n("./MapStore2/web/client/components/I18N/HTML.jsx"),e.exports.DateFormat=n("./MapStore2/web/client/components/I18N/Date.jsx")},"./MapStore2/web/client/components/I18N/LangBar.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=n("./node_modules/react/index.js"),d=n("./node_modules/prop-types/index.js"),f=n("./node_modules/react-bootstrap/es/index.js"),m=f.DropdownButton,y=f.MenuItem,b=f.ButtonGroup,g=n("./node_modules/lodash/lodash.js").head,h=n("./MapStore2/web/client/utils/LocaleUtils.js"),v=n("./MapStore2/web/client/components/I18N/FlagButton.jsx"),S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(c,e);var t,n,r,l=s(c);function c(){return o(this,c),l.apply(this,arguments)}return t=c,(n=[{key:"render",value:function(){var e=this,t=h.getSupportedLocales(),n=g(Object.keys(t).filter((function(n){return t[n].code===e.props.currentLocale})));return this.props.dropdown?p.createElement("div",{className:this.props.className},p.createElement(m,{pullRight:!0,id:this.props.id,title:p.createElement(v,{key:n,code:this.props.currentLocale,label:t[n]&&t[n].description,lang:n})},Object.keys(t).filter((function(n){return t[n].code!==e.props.currentLocale})).map((function(n){return p.createElement(y,{key:n,eventKey:n,onClick:function(){return e.props.onLanguageChange(t[n].code)}},p.createElement(v,{key:n,code:t[n].code,label:t[n].description,lang:n,active:t[n].code===e.props.currentLocale})," "+t[n].description)})))):p.createElement(b,{id:this.props.id,type:"select",bsSize:"small"},Object.keys(t).map((function(n){return p.createElement(v,{key:n,code:t[n].code,label:t[n].description,lang:n,active:t[n].code===e.props.currentLocale,onFlagSelected:e.props.onLanguageChange})})))}}])&&i(t.prototype,n),r&&i(t,r),c}(p.Component);u(S,"propTypes",{id:d.string,className:d.string,locales:d.object,currentLocale:d.string,onLanguageChange:d.func,dropdown:d.bool}),u(S,"defaultProps",{id:"mapstore-langselector",className:"mapstore-langselector",locales:{},currentLocale:"en-US",onLanguageChange:function(){},dropdown:!0}),e.exports=S},"./MapStore2/web/client/components/I18N/images/flags sync recursive ^\\.\\/.*\\.png$":function(e,t,n){var r={"./de-DE.png":"./MapStore2/web/client/components/I18N/images/flags/de-DE.png","./de.png":"./MapStore2/web/client/components/I18N/images/flags/de.png","./en-US.png":"./MapStore2/web/client/components/I18N/images/flags/en-US.png","./en.png":"./MapStore2/web/client/components/I18N/images/flags/en.png","./es-ES.png":"./MapStore2/web/client/components/I18N/images/flags/es-ES.png","./es.png":"./MapStore2/web/client/components/I18N/images/flags/es.png","./fi-FI.png":"./MapStore2/web/client/components/I18N/images/flags/fi-FI.png","./fi.png":"./MapStore2/web/client/components/I18N/images/flags/fi.png","./fr-FR.png":"./MapStore2/web/client/components/I18N/images/flags/fr-FR.png","./fr.png":"./MapStore2/web/client/components/I18N/images/flags/fr.png","./hr-HR.png":"./MapStore2/web/client/components/I18N/images/flags/hr-HR.png","./it-IT.png":"./MapStore2/web/client/components/I18N/images/flags/it-IT.png","./jp.png":"./MapStore2/web/client/components/I18N/images/flags/jp.png","./nl-NL.png":"./MapStore2/web/client/components/I18N/images/flags/nl-NL.png","./nl.png":"./MapStore2/web/client/components/I18N/images/flags/nl.png","./pt-PT.png":"./MapStore2/web/client/components/I18N/images/flags/pt-PT.png","./pt.png":"./MapStore2/web/client/components/I18N/images/flags/pt.png","./us.png":"./MapStore2/web/client/components/I18N/images/flags/us.png","./vi-VN.png":"./MapStore2/web/client/components/I18N/images/flags/vi-VN.png","./vi.png":"./MapStore2/web/client/components/I18N/images/flags/vi.png","./zh-ZH.png":"./MapStore2/web/client/components/I18N/images/flags/zh-ZH.png"};function o(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=i,e.exports=o,o.id="./MapStore2/web/client/components/I18N/images/flags sync recursive ^\\.\\/.*\\.png$"},"./MapStore2/web/client/components/I18N/images/flags/de-DE.png":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAIAAAD5gJpuAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAGzSURBVHjaYvTxcWb4+53h3z8GZpZff/79+v3n/7/fDAz/GHAAgABi+f37e3FxOZD1Dwz+/v3z9y+E/AMFv3//+Qumfv9et241QACxMDExAVWfOHkJJAEW/gUEP0EQDn78+AHE/gFOQJUAAcQiy8Ag8O+fLFj1n1+/QDp+/gQioK7fP378+vkDqOH39x9A/RJ/gE5lAAhAYhzcAACCQBDkgRXRjP034R0IaDTZTFZn0DItot37S94KLOINerEcI7aKHAHE8v/3r/9//zIA1f36/R+o4tevf1ANYNVA9P07RD9IJQMDQACxADHD3z8Ig4GMHz+AqqHagKp//fwLVA0U//v7LwMDQACx/LZiYFD7/5/53/+///79BqK/EMZ/UPACSYa/v/8DyX9A0oTxx2EGgABi+a/H8F/m339BoCoQ+g8kgRaCQvgPJJiBYmAuw39hxn+uDAABxMLwi+E/0PusRkwMvxhBGoDkH4b/v/+D2EDyz///QB1/QLb8+sP0lQEggFh+vGXYM2/SP6A2Zoaf30Ex/J+PgekHwz9gQDAz/P0FYrAyMfz7wcDAzPDtFwNAgAEAd3SIyRitX1gAAAAASUVORK5CYII="},"./MapStore2/web/client/components/I18N/images/flags/de.png":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAIAAAD5gJpuAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAGzSURBVHjaYvTxcWb4+53h3z8GZpZff/79+v3n/7/fDAz/GHAAgABi+f37e3FxOZD1Dwz+/v3z9y+E/AMFv3//+Qumfv9et241QACxMDExAVWfOHkJJAEW/gUEP0EQDn78+AHE/gFOQJUAAcQiy8Ag8O+fLFj1n1+/QDp+/gQioK7fP378+vkDqOH39x9A/RJ/gE5lAAhAYhzcAACCQBDkgRXRjP034R0IaDTZTFZn0DItot37S94KLOINerEcI7aKHAHE8v/3r/9//zIA1f36/R+o4tevf1ANYNVA9P07RD9IJQMDQACxADHD3z8Ig4GMHz+AqqHagKp//fwLVA0U//v7LwMDQACx/LZiYFD7/5/53/+///79BqK/EMZ/UPACSYa/v/8DyX9A0oTxx2EGgABi+a/H8F/m339BoCoQ+g8kgRaCQvgPJJiBYmAuw39hxn+uDAABxMLwi+E/0PusRkwMvxhBGoDkH4b/v/+D2EDyz///QB1/QLb8+sP0lQEggFh+vGXYM2/SP6A2Zoaf30Ex/J+PgekHwz9gQDAz/P0FYrAyMfz7wcDAzPDtFwNAgAEAd3SIyRitX1gAAAAASUVORK5CYII="},"./MapStore2/web/client/components/I18N/images/flags/en-US.png":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAYAAAB24g05AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3woNChAfXTteVAAAAjRJREFUKM9VkklIlVEAhb9fHxkVDWLwQKw2URI0kQ2GmoYELcJFhFZQ+FBxHaRhIA20qKiWrzDSoAwMGsgicEIlizILi+ZNIERJhNp777/3/ve0sEV9q7M78J0TJBqGxb94D94BBhBguLK8B6V+M/njGwbwgJ23hLHSBCQahuV9pOsDTlZGHX1O1lq19TqFYUbJx07GhArDUJlMWul0SnZ0RD4KlXw0riDRMKyymq10DnoiD5EH40Sk2ZxxYpQW+PkLxbLxW7cwp7aWa13jnE++IAss8nC3SYQe7jdZIkH30RQZJ94GkGptxTXWk336FO/KqqjYfYs376fIGEOQqBtUaU0x1/o8kZ9tdhZCibeELHVPmWheSxCP/6dKgtcfvxPDp9hfItp6xIOmDJWn5tLdNEX8jGGy6jPzkx246glkDN5avDEQRcRW59P7EWIg2gcCnIPy0zl4J9ZczDB+dDGL9h3Hh5bsZyN/Fwnw3iOEBDs+TcLXr19krVUqldLMzIzS09MKW5olSX7jJtl1GzRLpImKcvVf7lY8/4r2Hr6jhSuOKCu//RLZY0/IuXCBWOcNwmSSRLhn9hJhiIwBie07Osnr7aMo+MarykHWFi1HkSXrS3U9bv02THwBoysrOPF7M7kLIiQICvMJCuNIomBVLgcP3WaosISlbW00Pm+l7kAxQX/HTX3oGqKrYBsvhwzWpXFRxMi9ah5WViHn2NXbTdHOs+Aj8BF5y5Zw7FwNAyev8gcAFF3B0hKD4gAAAABJRU5ErkJggg=="},"./MapStore2/web/client/components/I18N/images/flags/en.png":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAIAAAD5gJpuAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAGCSURBVHjaYvz48SMDEvj3j+Hfty/npKX/MTAY3L7NwMf3DxUABBALUBEfHx+Q/P//P1QPJ7t6UdG/P3+EpKQY2Nj+I4Fnz54BBBALRBFcNUj4378fDx78+/3739+/QBvhqhkZGf/8+QMQQCxoqiEkUPX/X7+BShiQjAc7+B9AALE8SEmRi4//++ED0Dyg2Qx///77+fPfr1//f/9+PWMGUBVQHCT15w+LkNCF3FyAAGJ5t3q1oJLSr8eP///+8//Pb5BLgMYDyV+/3q1Z8w/MAPrn/69f7AoKzxgYAAKIhcventvIiE1e/t+/vwx/QIYBbfi4dStQKa+LC9QGoIa/f1lFRAT27QMIIMa3b9/y8/PDXQ/ywI8ft1xdgQar7tsHDyWgLNDTd+7cAQggFqA/kL0LkQQ5A4j+/mVE8jEQAEMJIIBAGuCqIaKMDAxsMjJAJzEyMQFNhYlBZQECCKTh1atXyHH56927Q1u2/GJgcLh0iUFICOSEf//+gB0CBAABBgAC4UQezUonUAAAAABJRU5ErkJggg=="},"./MapStore2/web/client/components/I18N/images/flags/es-ES.png":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAIAAAD5gJpuAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAFnSURBVHjaYvzPgAD/UNlYEUAAmuTYAAAQhAEYqF/zFbe50RZ1cMmS9TLi0pJLRjZohAMTGFUN9HdnHgEE1sDw//+Tp0ClINW/f0NIKPoFJH/9//ULyGaUlQXaABBALAx/Gf4zAt31F4i+ffj3/cN/XrFfzOx//v///f//LzACM/79ZmD8/e8TA0AAMYHdDVT958vXP38nMDB0s3x94/Tj5y+YahhiAKLfQKUAAcQEdtJfoDHMF2L+vPzDmFXLelf551tGFOOhev4A/QgQQExgHwAd8IdFT/Wz6j+GhlpmXSOW/2z///8Eq/sJ18Dw/zdQA0AAMQExxJjjdy9x2/76EfLz4MXdP/i+wsyGkkA3Aw3984cBIIAYfzIwMKel/bt3jwEaLNAwgZIQxp/fDH/+MqqovL14ESCAWICeZvr9h0FSEhSgwBgAygFDEMT+wwAhgQgc4kAEVAwQQIxfUSMSTxxDAECAAQAJWke8v4u1tAAAAABJRU5ErkJggg=="},"./MapStore2/web/client/components/I18N/images/flags/es.png":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAIAAAD5gJpuAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAFnSURBVHjaYvzPgAD/UNlYEUAAmuTYAAAQhAEYqF/zFbe50RZ1cMmS9TLi0pJLRjZohAMTGFUN9HdnHgEE1sDw//+Tp0ClINW/f0NIKPoFJH/9//ULyGaUlQXaABBALAx/Gf4zAt31F4i+ffj3/cN/XrFfzOx//v///f//LzACM/79ZmD8/e8TA0AAMYHdDVT958vXP38nMDB0s3x94/Tj5y+YahhiAKLfQKUAAcQEdtJfoDHMF2L+vPzDmFXLelf551tGFOOhev4A/QgQQExgHwAd8IdFT/Wz6j+GhlpmXSOW/2z///8Eq/sJ18Dw/zdQA0AAMQExxJjjdy9x2/76EfLz4MXdP/i+wsyGkkA3Aw3984cBIIAYfzIwMKel/bt3jwEaLNAwgZIQxp/fDH/+MqqovL14ESCAWICeZvr9h0FSEhSgwBgAygFDEMT+wwAhgQgc4kAEVAwQQIxfUSMSTxxDAECAAQAJWke8v4u1tAAAAABJRU5ErkJggg=="},"./MapStore2/web/client/components/I18N/images/flags/fi-FI.png":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAYAAAB24g05AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH5AIUFBUyAPfcpAAAAUpJREFUKM+FkjtLA1EQhb979242IeKrCBokiqJgp0IaS8HOVjvxB1gI4o+wtBFs7CztrCwsbCy1UBCbiBiNDzD43NzdZMciJkTJxgNT3DNw7pk5g4h8iEggIlZE7O7Bmc3NbVpGNuz61qH1bWgbvXZlgCTg0IDwG3/ff6CBqJVIeQZHKRAh5bkkPdNRwJycF0Hq33gJw0XhCb9aA9fh+r7M8dkNnusQRe2tqJml7QBwAZSC5zefh5dPgrBGpj9Nti+NVirWgSK71hQgEujyoDeFMgZ5/YI3vz5kjIaZX5hqbkprze3zO4W7MpVKyPBohrHBHoyjEYkZ4fSqFMiPg2TCYf/okp29E0rFMivLs6wu5nGNQxQjYKYnBn4R47lHko6GsMpQppv8ZPbfGN1Wwq9UqYmA1viVEN9WO8cIFIBEcxGq5YBUPZlO+AYo0JZbV1yoGgAAAABJRU5ErkJggg=="},"./MapStore2/web/client/components/I18N/images/flags/fi.png":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAYAAAB24g05AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH5AIUFBUyAPfcpAAAAUpJREFUKM+FkjtLA1EQhb979242IeKrCBokiqJgp0IaS8HOVjvxB1gI4o+wtBFs7CztrCwsbCy1UBCbiBiNDzD43NzdZMciJkTJxgNT3DNw7pk5g4h8iEggIlZE7O7Bmc3NbVpGNuz61qH1bWgbvXZlgCTg0IDwG3/ff6CBqJVIeQZHKRAh5bkkPdNRwJycF0Hq33gJw0XhCb9aA9fh+r7M8dkNnusQRe2tqJml7QBwAZSC5zefh5dPgrBGpj9Nti+NVirWgSK71hQgEujyoDeFMgZ5/YI3vz5kjIaZX5hqbkprze3zO4W7MpVKyPBohrHBHoyjEYkZ4fSqFMiPg2TCYf/okp29E0rFMivLs6wu5nGNQxQjYKYnBn4R47lHko6GsMpQppv8ZPbfGN1Wwq9UqYmA1viVEN9WO8cIFIBEcxGq5YBUPZlO+AYo0JZbV1yoGgAAAABJRU5ErkJggg=="},"./MapStore2/web/client/components/I18N/images/flags/fr-FR.png":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAIAAAD5gJpuAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAGzSURBVHjaYiyeepkBBv79+Zfnx/f379+fP38CyT9//jAyMiq5GP77wvDnJ8MfoAIGBoAAYgGqC7STApL///3/9++/pCTv////Qdz/QO4/IMna0vf/z+9/v379//37bUUTQACBNDD8Z/j87fffvyAVX79+/Q8GQDbQeKA9fM+e/Pv18/+vnwzCIkBLAAKQOAY5AIAwCEv4/4PddNUm3ji0QJyxW3rgzE0iLfqDGr2oYuu0l54AYvnz5x9Q6d+/QPQfyAQqAin9B3EOyG1A1UDj//36zfjr1y8GBoAAFI9BDgAwCMIw+P8Ho3GDO6XQ0l4MN8b2kUwYaLszqgKM/KHcDXwBxAJUD3TJ779A8h9Q5D8SAHoARP36+Rfo41+/mcA2AAQQy49ff0Cu//MPpAeI/0FdA1QNYYNVA/3wmwEYVgwMAAHE8uPHH5BqoD1//gJJLADoJKDS378Z//wFhhJAALF8A3rizz8uTmYg788fJkj4QOKREQyYxSWBhjEC/fcXZANAALF8+/anbcHlHz9+ffvx58uPX9KckkCn/gby/wLd8uvHjx96k+cD1UGiGQgAAgwA7q17ZpsMdUQAAAAASUVORK5CYII="},"./MapStore2/web/client/components/I18N/images/flags/fr.png":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAIAAAD5gJpuAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAGzSURBVHjaYiyeepkBBv79+Zfnx/f379+fP38CyT9//jAyMiq5GP77wvDnJ8MfoAIGBoAAYgGqC7STApL///3/9++/pCTv////Qdz/QO4/IMna0vf/z+9/v379//37bUUTQACBNDD8Z/j87fffvyAVX79+/Q8GQDbQeKA9fM+e/Pv18/+vnwzCIkBLAAKQOAY5AIAwCEv4/4PddNUm3ji0QJyxW3rgzE0iLfqDGr2oYuu0l54AYvnz5x9Q6d+/QPQfyAQqAin9B3EOyG1A1UDj//36zfjr1y8GBoAAFI9BDgAwCMIw+P8Ho3GDO6XQ0l4MN8b2kUwYaLszqgKM/KHcDXwBxAJUD3TJ779A8h9Q5D8SAHoARP36+Rfo41+/mcA2AAQQy49ff0Cu//MPpAeI/0FdA1QNYYNVA/3wmwEYVgwMAAHE8uPHH5BqoD1//gJJLADoJKDS378Z//wFhhJAALF8A3rizz8uTmYg788fJkj4QOKREQyYxSWBhjEC/fcXZANAALF8+/anbcHlHz9+ffvx58uPX9KckkCn/gby/wLd8uvHjx96k+cD1UGiGQgAAgwA7q17ZpsMdUQAAAAASUVORK5CYII="},"./MapStore2/web/client/components/I18N/images/flags/hr-HR.png":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAYAAAB24g05AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3WAAAN1gGQb3mcAAAAB3RJTUUH4QoHCTAQC4tfhwAAARZJREFUKM+VkqtOA0EUhr+ZWWi3XS4hEBpAkCIICYKLRBIcOAQPUEHqeAEcDkOC4wVQqGLwWCyGFswGSLglTUvbmc7BYMhuFzjy5Fz//1ONUkkYGAIosiJIbdMaly/iTUDQa4MTtDiU978P0N5xsXvIx8Mjk+Mx9aVl5l5eKfcN6+dneG1+1KvnSiXxQmtkipvWGBPSJuc69BDmw08KvU7iAiUiSQ2sJd6vUtzapP/2TrN2yczpCcPlhT9qYC3h2iq23oBgiNGdbUwUpYqo05KqkAdrQWuUAul2MSbdDbV3UEu1sTr9xErYxHvhLlfi6DYiFyT3KRaPZRACG7OKKG+4uneI/IOD79FcxwK4TJaCTMyyIQTgC/dfW5JUkrXFAAAAAElFTkSuQmCC"},"./MapStore2/web/client/components/I18N/images/flags/it-IT.png":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAIAAAD5gJpuAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAE2SURBVHjaYmSYyMDwgwEE/jEw/GF4mvT0HyqQUlX9B5aEIIAAYmH4wlDtWg1SDwT//0lKSv7/D+T9/w+nYmL+//79/88fIPll0yaAAGJhYAGJP/n69O+/v0CAUAcHt2////ULqJpRVhZoA0AAsQCtAZoMVP0HiP7+RlcNBEDVYA0Mv38DNQAEEMj8vwx//wCt/AdC/zEBkgagYoAAYgF6FGj277+///wlpAEoz8AAEEAgDX/BZv/69wuoB48GRrCTAAKICajh9//fv/6CVP/++wu7BrDxQFf/YWAACCCwk0BKf0MQdg1/gBqAPv0L9ANAALEAY+33vz+S3JIgb/z5C45CBkZGRgY4UFICKQUjoJMAAoiRoZSB4RMojkHx/YPhbNVZoM3AOISQQPUK9vaQOIYAgAADAC5Wd4RRwnKfAAAAAElFTkSuQmCC"},"./MapStore2/web/client/components/I18N/images/flags/jp.png":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAIAAAD5gJpuAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAE2SURBVHjaYvz69SsDEvj37x+ERGbAwZ9//wACiAUoysXFBST///8P0QOm//+HU0jgxYsXAAHEAlP0H8HYt+//4SP/f//6b2b238sLrpqRkRFoCUAAsaCrXrv2/8KF///8+f/r9//Dh/8/ffI/OQWiAeJCgABigrseJPT27f/Vq////v3/1y8oWrzk/+PHcEv+/PkDEEBMEM/B3fj/40eo0t9g8suX/w8f/odZAVQMEEAsQAzj/2cQFf3PxARWCrYEaBXQLCkpqB/+/wcqBgggJrjxQPX/hYX/+/v///kLqhpIBgf/l5ODhxiQBAggFriToDoTEv5zcf3ftQuk2s7uf0wM3MdAAPQDQAAxvn37lo+PDy4KZUDcycj4/z9CBojv3r0LEEAgG969eweLSBDEBSCWAAQYACaTbJ/kuok9AAAAAElFTkSuQmCC"},"./MapStore2/web/client/components/I18N/images/flags/nl-NL.png":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAIAAAD5gJpuAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAFXSURBVHjaYvzPgAD/UNlYEUAAkuTgCAAIBgJggq5VoAs1qM0vdzmMz362vezjokxPGimkEQ5WoAQEKuK71zwCCKyB4c//J8+BShn+/vv/+w/D399AEox+//8FJH/9/wUU+cUoKw20ASCAWBhEDf/LyDOw84BU//kDtgGI/oARmAHRDJQSFwVqAAggxo8fP/Ly8oKc9P8/AxjiAoyMjA8ePAAIIJZ///5BVIM0MOBWDpRlZPzz5w9AALH8gyvCbz7QBrCJAAHEyKDYX15r/+j1199//v35++/Xn7+///77DST/wMl/f4Dk378K4jx7O2cABBALw7NP77/+ev3xB0gOpOHfr99AdX9/gTVASKCGP//+8XCyMjC8AwggFoZfIHWSwpwQk4CW/AYjsKlA8u+ff////v33998/YPgBnQQQQIzAaGNg+AVGf5AYf5BE/oCjGEIyAQQYAGvKZ4C6+xXRAAAAAElFTkSuQmCC"},"./MapStore2/web/client/components/I18N/images/flags/nl.png":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAIAAAD5gJpuAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAFXSURBVHjaYvzPgAD/UNlYEUAAkuTgCAAIBgJggq5VoAs1qM0vdzmMz362vezjokxPGimkEQ5WoAQEKuK71zwCCKyB4c//J8+BShn+/vv/+w/D399AEox+//8FJH/9/wUU+cUoKw20ASCAWBhEDf/LyDOw84BU//kDtgGI/oARmAHRDJQSFwVqAAggxo8fP/Ly8oKc9P8/AxjiAoyMjA8ePAAIIJZ///5BVIM0MOBWDpRlZPzz5w9AALH8gyvCbz7QBrCJAAHEyKDYX15r/+j1199//v35++/Xn7+///77DST/wMl/f4Dk378K4jx7O2cABBALw7NP77/+ev3xB0gOpOHfr99AdX9/gTVASKCGP//+8XCyMjC8AwggFoZfIHWSwpwQk4CW/AYjsKlA8u+ff////v33998/YPgBnQQQQIzAaGNg+AVGf5AYf5BE/oCjGEIyAQQYAGvKZ4C6+xXRAAAAAElFTkSuQmCC"},"./MapStore2/web/client/components/I18N/images/flags/pt-PT.png":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAIAAAD5gJpuAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAG8SURBVHjaYmSIZGD4wgAF/xgYWBj+boQysSKAAGJh+MRQnVoNUgEE///9ZfzLoPiX4e8fxj9/mP/8Yfr9+/+fP/9h5JdNmwACiIWBCaj4/5P3T7mY/xoJ/9UR/v0n8O+f17/Zlv/+//73/1+////+9f/XL6BqRllZoA0AAcQCNvv/339/C03+8v/8w7bk7+/vv/+7/P4S95ur+xdY9W+IBobfv4EaAAKICeiuv////vnz58PX3xxb/7BlN3/K7Ph1WoSR/fcfhl//f4KN/wW1BGg6QAAxMfxi+PP37++/v1kYfn//+usnE+cHCbWfTKz/mH7+ZgUpQmj48wdoA0AAsQA1/P0HZP458/qXqvNfjdnVItxy3wNvApUIvwPb8BvqJEawkwACiIXhDwPQ+F9/f+2890dY6/cnrycCb++z3frNfOwX01eEagZgKAHdzcAAEEAgG4DGA/W8+fO79+Rvdt5f2+b++sP+m+kdWDVEwx+gBmBY/wX6ASCAWBi+Mfz+80eSX/L3n99AzwBDm0H2NwtQHS/QapDBIPT3LwQBnQQQQIwMxgwM7xgYfjAArQKRTAyvP2OPYwgACDAAjtdGduN8tIgAAAAASUVORK5CYII="},"./MapStore2/web/client/components/I18N/images/flags/pt.png":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAIAAAD5gJpuAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAG8SURBVHjaYmSIZGD4wgAF/xgYWBj+boQysSKAAGJh+MRQnVoNUgEE///9ZfzLoPiX4e8fxj9/mP/8Yfr9+/+fP/9h5JdNmwACiIWBCaj4/5P3T7mY/xoJ/9UR/v0n8O+f17/Zlv/+//73/1+////+9f/XL6BqRllZoA0AAcQCNvv/339/C03+8v/8w7bk7+/vv/+7/P4S95ur+xdY9W+IBobfv4EaAAKICeiuv////vnz58PX3xxb/7BlN3/K7Ph1WoSR/fcfhl//f4KN/wW1BGg6QAAxMfxi+PP37++/v1kYfn//+usnE+cHCbWfTKz/mH7+ZgUpQmj48wdoA0AAsQA1/P0HZP458/qXqvNfjdnVItxy3wNvApUIvwPb8BvqJEawkwACiIXhDwPQ+F9/f+2890dY6/cnrycCb++z3frNfOwX01eEagZgKAHdzcAAEEAgG4DGA/W8+fO79+Rvdt5f2+b++sP+m+kdWDVEwx+gBmBY/wX6ASCAWBi+Mfz+80eSX/L3n99AzwBDm0H2NwtQHS/QapDBIPT3LwQBnQQQQIwMxgwM7xgYfjAArQKRTAyvP2OPYwgACDAAjtdGduN8tIgAAAAASUVORK5CYII="},"./MapStore2/web/client/components/I18N/images/flags/us.png":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAIAAAD5gJpuAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAHzSURBVHjaYkxOP8IAB//+Mfz7w8Dwi4HhP5CcJb/n/7evb16/APL/gRFQDiAAw3JuAgAIBEDQ/iswEERjGzBQLEru97ll0g0+3HvqMn1SpqlqGsZMsZsIe0SICA5gt5a/AGIEarCPtFh+6N/ffwxA9OvP/7//QYwff/6fZahmePeB4dNHhi+fGb59Y4zyvHHmCEAAAW3YDzQYaJJ93a+vX79aVf58//69fvEPlpIfnz59+vDhw7t37968efP3b/SXL59OnjwIEEAsDP+YgY53b2b89++/awvLn98MDi2cVxl+/vl6mituCtBghi9f/v/48e/XL86krj9XzwEEEENy8g6gu22rfn78+NGs5Ofr16+ZC58+fvyYwX8rxOxXr169fPny+fPn1//93bJlBUAAsQADZMEBxj9/GBxb2P/9+S/R8u3vzxuyaX8ZHv3j8/YGms3w8ycQARmi2eE37t4ACCDGR4/uSkrKAS35B3TT////wADOgLOBIaXIyjBlwxKAAGKRXjCB0SOEaeu+/y9fMnz4AHQxCP348R/o+l+//sMZQBNLEvif3AcIIMZbty7Ly6t9ZmXl+fXj/38GoHH/UcGfP79//BBiYHjy9+8/oUkNAAHEwt1V/vI/KBY/QSISFqM/GBg+MzB8A6PfYC5EFiDAABqgW776MP0rAAAAAElFTkSuQmCC"},"./MapStore2/web/client/components/I18N/images/flags/vi-VN.png":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAIAAAD5gJpuAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAFsSURBVHjaYvzPgAD/UNlYEUAAmuTYAAAQhAEYqF/zFbe50RZ1cMmS9TLi0pJLRjZohAMTGFUN9HdnHgEE1sDw//+Tp0ClINW/f4NI9d////3+f+b3/1+////+9f/XL6A4o6ws0AaAAGIBm/0fRTVQ2v3Pf97f/4/9Aqv+DdHA8Ps3UANAALEAMSNQNdDGP3+ALvnf8vv/t9//9X/////7f+uv/4K//iciNABNBwggsJP+/IW4kuH3n//1v/8v+wVSDURmv/57//7/CeokoKFA0wECiAnkpL9/wH4CO+DNr/+VQA1A9PN/w6//j36CVIMRxEkAAQR20m+QpSBXgU0CuSTj9/93v/8v//V/xW+48UBD/zAwAAQQSAMzOMiABoBUswCd8ev/M7A669//OX7///Lr/x+gBlCoAJ0DEEAgDUy//zBISoKNAfoepJNRFmQkyJecfxj4/kDCEIiAigECiPErakTiiWMIAAgwAB4ZUlqMMhQQAAAAAElFTkSuQmCC"},"./MapStore2/web/client/components/I18N/images/flags/vi.png":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAIAAAD5gJpuAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAFsSURBVHjaYvzPgAD/UNlYEUAAmuTYAAAQhAEYqF/zFbe50RZ1cMmS9TLi0pJLRjZohAMTGFUN9HdnHgEE1sDw//+Tp0ClINW/f4NI9d////3+f+b3/1+////+9f/XL6A4o6ws0AaAAGIBm/0fRTVQ2v3Pf97f/4/9Aqv+DdHA8Ps3UANAALEAMSNQNdDGP3+ALvnf8vv/t9//9X/////7f+uv/4K//iciNABNBwggsJP+/IW4kuH3n//1v/8v+wVSDURmv/57//7/CeokoKFA0wECiAnkpL9/wH4CO+DNr/+VQA1A9PN/w6//j36CVIMRxEkAAQR20m+QpSBXgU0CuSTj9/93v/8v//V/xW+48UBD/zAwAAQQSAMzOMiABoBUswCd8ev/M7A669//OX7///Lr/x+gBlCoAJ0DEEAgDUy//zBISoKNAfoepJNRFmQkyJecfxj4/kDCEIiAigECiPErakTiiWMIAAgwAB4ZUlqMMhQQAAAAAElFTkSuQmCC"},"./MapStore2/web/client/components/I18N/images/flags/zh-ZH.png":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAIAAAD5gJpuAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAFqSURBVHjaYrzOwPAPjJgYQEDAleHVbhADIvgHLPgHiQ0QQCxAlkR9NW8sw+cV/1gV/7Gb/hV4+vfzhj8Mv/78//Pn/+/f/8AkhH1t0yaAAAJp4I37zyz2lDfu79uqv/++/WYz+cuq/vvLxt8gdb+A5K9/v34B2SyyskBLAAII5JAva/7/+/z367a/f3/8ZuT9+//Pr78vQUrB6n4CSSj6/RuoASCAWEDO/fD3ddEfhv9/OE3/sKj8/n7k9/fDQNUIs/+DVf8HawAIIJCT/v38C3Hr95N/GDh/f94AVvT7N8RUBpjxQAVADQABBNLw/y/Ifwy/f/399ufTOpDBEPf8g5sN0QBEDAwAAQTWABEChgOSA9BVA00E2wAQQCANQBbEif/AzoCqgLkbbBYwWP/+//sXqBYggFhAkfL7D7OkJFCOCSj65zfUeFjwg8z++/ffX5AGoGKAAGI8jhSRyIw/SJH9D4aAYQoQYAA6rnMw1jU2vQAAAABJRU5ErkJggg=="},"./MapStore2/web/client/components/TOC/DefaultGroup.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function i(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=n("./node_modules/react/index.js"),y=n("./MapStore2/web/client/components/TOC/Node.jsx"),b=n("./node_modules/prop-types/index.js"),g=n("./MapStore2/web/client/components/TOC/enhancers/draggableComponent.jsx"),h=n("./MapStore2/web/client/components/TOC/fragments/GroupTitle.jsx"),v=n("./MapStore2/web/client/components/TOC/fragments/GroupChildren.jsx"),S=n("./MapStore2/web/client/components/TOC/fragments/VisibilityCheck.jsx"),w=n("./MapStore2/web/client/components/TOC/fragments/LayersTool.jsx"),O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(d,e);var t,n,r,u=c(d);function d(){var e;a(this,d);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return f(p(e=u.call.apply(u,[this].concat(n))),"renderVisibility",(function(t){return e.props.groupVisibilityCheckbox&&!t?m.createElement(S,{node:e.props.node,key:"visibility",tooltip:"toc.toggleGroupVisibility",checkType:e.props.visibilityCheckType,propertiesChangeHandler:e.props.propertiesChangeHandler}):m.createElement(w,{key:"loadingerror",glyph:"exclamation-mark text-danger",tooltip:"toc.loadingerror",className:"toc-error"})})),e}return t=d,(n=[{key:"render",value:function(){var e=this,t=this.props,n=(t.children,t.onToggle,t.connectDragPreview),r=t.connectDragSource,a=t.connectDropTarget,s=i(t,["children","onToggle","connectDragPreview","connectDragSource","connectDropTarget"]),l=this.props.selectedNodes.filter((function(t){return t===e.props.node.id})).length>0?" selected":"",c=this.props.node.loadingError?" group-error":"",u=s.isDraggable?m.createElement(w,{key:"grabTool",tooltip:"toc.grabGroupIcon",className:"toc-grab",ref:"target",glyph:"menu-hamburger"}):m.createElement("span",{className:"toc-layer-tool toc-grab"}),p=m.createElement("div",{className:"toc-default-group-head"},u,this.renderVisibility(c),m.createElement(h,{tooltipOptions:this.props.tooltipOptions,tooltip:this.props.titleTooltip,node:this.props.node,currentLocale:this.props.currentLocale,onClick:this.props.onToggle,onSelect:this.props.onSelect})),d=m.createElement(v,{level:this.props.level+1,onSort:this.props.onSort,onError:this.props.onError,setDndState:this.props.setDndState,position:"collapsible"},this.props.children);return this.props.node.showComponent&&!this.props.node.hide?m.createElement(y,o({className:(this.props.isDragging||this.props.node.placeholder?"is-placeholder ":"")+"toc-default-group toc-group-"+this.props.level+l+c,sortableStyle:this.props.sortableStyle,style:this.props.style,type:"group"},s),n(a(this.props.isDraggable?r(p):p)),this.props.isDragging||this.props.node.placeholder?null:d):null}}])&&s(t.prototype,n),r&&s(t,r),d}(m.Component);f(O,"propTypes",{node:b.object,style:b.object,sortableStyle:b.object,onToggle:b.func,level:b.number,onSort:b.func,onError:b.func,propertiesChangeHandler:b.func,groupVisibilityCheckbox:b.bool,visibilityCheckType:b.string,currentLocale:b.string,selectedNodes:b.array,onSelect:b.func,titleTooltip:b.bool,tooltipOptions:b.object,setDndState:b.func,connectDragSource:b.func,connectDragPreview:b.func,connectDropTarget:b.func,isDraggable:b.bool,isDragging:b.bool,isOver:b.bool}),f(O,"defaultProps",{node:{},onToggle:function(){},style:{marginBottom:"16px",cursor:"pointer"},sortableStyle:{},propertiesChangeHandler:function(){},groupVisibilityCheckbox:!1,visibilityCheckType:"glyph",level:1,currentLocale:"en-US",joinStr:" - ",selectedNodes:[],onSelect:function(){},titleTooltip:!1,connectDragPreview:function(e){return e},connectDragSource:function(e){return e},connectDropTarget:function(e){return e},isDraggable:!1,isDragging:!1,isOver:!1}),e.exports=g("LayerOrGroup",O)},"./MapStore2/web/client/components/TOC/DefaultLayer.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=n("./node_modules/react/index.js"),y=n("./node_modules/prop-types/index.js"),b=n("./MapStore2/web/client/components/TOC/Node.jsx"),g=n("./node_modules/lodash/lodash.js"),h=g.isObject,v=g.castArray,S=g.find,w=n("./node_modules/react-bootstrap/es/index.js"),O=w.Grid,j=w.Row,E=w.Col,x=w.Glyphicon,P=n("./MapStore2/web/client/components/TOC/enhancers/draggableComponent.jsx"),C=n("./MapStore2/web/client/components/TOC/fragments/VisibilityCheck.jsx"),T=n("./MapStore2/web/client/components/TOC/fragments/Title.jsx"),M=n("./MapStore2/web/client/components/TOC/fragments/WMSLegend.jsx"),_=n("./MapStore2/web/client/components/TOC/fragments/LayersTool.jsx"),A=n("./MapStore2/web/client/components/TOC/fragments/OpacitySlider.jsx"),R=n("./MapStore2/web/client/components/TOC/fragments/ToggleFilter.jsx"),I=n("./MapStore2/web/client/components/data/featuregrid/enhancers/withTooltip.js"),D=n("./MapStore2/web/client/components/misc/enhancers/localizedProps.js")("tooltip")(I(x)),k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(d,e);var t,n,r,u=c(d);function d(){var e;a(this,d);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return f(p(e=u.call.apply(u,[this].concat(n))),"getTitle",(function(t){return(h(t.title)?t.title[e.props.currentLocale]||t.title.default:t.title)||t.name})),f(p(e),"renderOpacitySlider",(function(t){return e.props.activateOpacityTool?m.createElement(A,{opacity:e.props.node.opacity,disabled:!e.props.node.visibility,hideTooltip:t,onChange:function(t){return e.props.onUpdateNode(e.props.node.id,"layers",{opacity:t})}}):null})),f(p(e),"renderCollapsible",(function(){return m.createElement("div",{key:"legend",position:"collapsible",className:"collapsible-toc"},m.createElement(O,{fluid:!0},e.props.showFullTitleOnExpand?m.createElement(j,null,m.createElement(E,{xs:12,className:"toc-full-title"},e.getTitle(e.props.node))):null,e.props.activateLegendTool?m.createElement(j,null,m.createElement(E,{xs:12},m.createElement(M,i({node:e.props.node,currentZoomLvl:e.props.currentZoomLvl,scales:e.props.scales,language:e.props.language},e.props.legendOptions)))):null),e.renderOpacitySlider(e.props.hideOpacityTooltip))})),f(p(e),"renderVisibility",(function(){return"Error"===e.props.node.loadingError?m.createElement(_,{key:"loadingerror",glyph:"exclamation-mark text-danger",tooltip:"toc.loadingerror",className:"toc-error"}):m.createElement(C,{key:"visibilitycheck",tooltip:"Warning"===e.props.node.loadingError?"toc.toggleLayerVisibilityWarning":"toc.toggleLayerVisibility",node:e.props.node,checkType:e.props.visibilityCheckType,propertiesChangeHandler:e.props.propertiesChangeHandler})})),f(p(e),"renderToolsLegend",(function(t){return"Error"===e.props.node.loadingError||t?null:m.createElement(_,{node:e.props.node,tooltip:"toc.displayLegendAndTools",key:"toollegend",className:"toc-legend",ref:"target",glyph:"chevron-left",onClick:function(t){return e.props.onToggle(t.id,t.expanded)}})})),f(p(e),"renderIndicators",(function(){return v(e.props.indicators).map((function(t){return"dimension"===t.type&&S(e.props.node&&e.props.node.dimensions||[],t.condition)?t.glyph&&m.createElement(D,i({key:t.key,glyph:t.glyph},t.props)):null}))})),f(p(e),"renderNode",(function(t,n,r,o,a,s,l){var c="wms"===e.props.node.type&&!e.props.activateLegendTool&&!e.props.showFullTitleOnExpand||"wms"!==e.props.node.type&&!e.props.showFullTitleOnExpand,u=s?m.createElement("div",{style:{padding:0,height:10},className:"toc-default-layer-head"}):m.createElement("div",{className:"toc-default-layer-head"},t,e.renderVisibility(),m.createElement(R,{node:e.props.node,propertiesChangeHandler:e.props.propertiesChangeHandler}),m.createElement(T,{tooltipOptions:e.props.tooltipOptions,tooltip:e.props.titleTooltip,filterText:e.props.filterText,node:e.props.node,currentLocale:e.props.currentLocale,onClick:e.props.onSelect,onContextMenu:e.props.onContextMenu}),e.props.node.loading?m.createElement("div",{className:"toc-inline-loader"}):e.renderToolsLegend(c),e.props.indicators?e.renderIndicators():null);return m.createElement(b,i({className:(e.props.isDragging||e.props.node.placeholder?"is-placeholder ":"")+"toc-default-layer"+n+r+o+a,style:e.props.style,type:"layer"},l),l.isDraggable&&!s?e.props.connectDragPreview(u):u,s||!e.props.activateOpacityTool||e.props.node.expanded||!e.props.node.visibility||"Error"===e.props.node.loadingError?null:e.renderOpacitySlider(e.props.hideOpacityTooltip),s||c?null:e.renderCollapsible())})),f(p(e),"filterLayers",(function(t){return-1!==((h(t.title)?t.title[e.props.currentLocale]||t.title.default:t.title)||t.name).toLowerCase().indexOf(e.props.filterText.toLowerCase())})),e}return t=d,(n=[{key:"render",value:function(){var e=this,t=this.props,n=(t.children,t.propertiesChangeHandler,t.onToggle,t.connectDragSource),r=t.connectDropTarget,i=o(t,["children","propertiesChangeHandler","onToggle","connectDragSource","connectDropTarget"]),a=!this.props.node.visibility||this.props.node.invalid?" visibility":"",s=this.props.selectedNodes.filter((function(t){return t===e.props.node.id})).length>0?" selected":"",l="Error"===this.props.node.loadingError?" layer-error":"",c="Warning"===this.props.node.loadingError?" layer-warning":"",u=i.isDraggable?m.createElement(_,{key:"grabTool",tooltip:"toc.grabLayerIcon",className:"toc-grab",ref:"target",glyph:"menu-hamburger"}):m.createElement("span",{className:"toc-layer-tool toc-grab"}),p=!!this.props.node.dummy,d=!p&&this.filterLayers(this.props.node)?this.renderNode(u,a,s,l,c,p,i):null,f=m.createElement("div",{style:p?{opacity:0,boxShadow:"none"}:{},className:"toc-list-item"},!this.props.filterText||this.props.filterText&&p?this.renderNode(u,a,s,l,c,p,i):d);return!1!==i.node.showComponent&&!i.node.hide&&this.props.filter(this.props.node)?r(i.isDraggable&&!p?n(f):f):null}}])&&s(t.prototype,n),r&&s(t,r),d}(m.Component);f(k,"propTypes",{node:y.object,propertiesChangeHandler:y.func,onToggle:y.func,onContextMenu:y.func,onSelect:y.func,style:y.object,sortableStyle:y.object,activateLegendTool:y.bool,activateOpacityTool:y.bool,indicators:y.array,visibilityCheckType:y.string,currentZoomLvl:y.number,scales:y.array,additionalTools:y.array,legendOptions:y.object,currentLocale:y.string,selectedNodes:y.array,filterText:y.string,onUpdateNode:y.func,titleTooltip:y.bool,filter:y.func,showFullTitleOnExpand:y.bool,hideOpacityTooltip:y.bool,tooltipOptions:y.object,connectDragPreview:y.func,connectDragSource:y.func,connectDropTarget:y.func,isDraggable:y.bool,isDragging:y.bool,isOver:y.bool,language:y.string}),f(k,"defaultProps",{style:{},sortableStyle:{},propertiesChangeHandler:function(){},onToggle:function(){},onContextMenu:function(){},onSelect:function(){},activateLegendTool:!1,activateOpacityTool:!0,indicators:[],visibilityCheckType:"glyph",additionalTools:[],currentLocale:"en-US",joinStr:" - ",selectedNodes:[],filterText:"",onUpdateNode:function(){},filter:function(){return!0},titleTooltip:!1,showFullTitleOnExpand:!1,hideOpacityTooltip:!1,connectDragPreview:function(e){return e},connectDragSource:function(e){return e},connectDropTarget:function(e){return e}}),e.exports=P("LayerOrGroup",k)},"./MapStore2/web/client/components/TOC/DefaultLayerOrGroup.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=n("./node_modules/prop-types/index.js"),y=n("./node_modules/react/index.js"),b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(p,e);var t,n,r,o=u(p);function p(){return s(this,p),o.apply(this,arguments)}return t=p,(n=[{key:"render",value:function(){var e=this.props,t=e.groupElement,n=e.layerElement,r=e.node,o=a(e,["groupElement","layerElement","node"]);return r.nodes?y.cloneElement(t,i({node:r},o),y.createElement(p,{groupElement:t,layerElement:n})):y.cloneElement(n,i({node:r},o))}}])&&l(t.prototype,n),r&&l(t,r),p}(y.Component);f(b,"propTypes",{node:m.object,groupElement:m.element.isRequired,layerElement:m.element.isRequired}),e.exports=b},"./MapStore2/web/client/components/TOC/FloatingLegend.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?d(e):t}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=n("./node_modules/react/index.js"),b=n("./node_modules/react-dom/index.js"),g=n("./node_modules/prop-types/index.js"),h=n("./node_modules/lodash/lodash.js"),v=h.isEqual,S=h.delay,w=n("./node_modules/react-bootstrap/es/index.js"),O=w.Glyphicon,j=w.Panel,E=w.Grid,x=w.Row,P=w.Col,C=w.Button,T=n("./node_modules/react-resizable/index.js").Resizable,M=n("./node_modules/react-container-dimensions/lib/index.js").default,_=n("./MapStore2/web/client/components/misc/enhancers/tooltip.jsx")(C),A=n("./MapStore2/web/client/components/misc/cardgrids/SideGrid.jsx"),R=n("./MapStore2/web/client/components/TOC/fragments/OpacitySlider.jsx"),I=n("./MapStore2/web/client/components/TOC/fragments/WMSLegend.jsx"),D=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(p,e);var t,n,r,i=u(p);function p(){var e;s(this,p);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return m(d(e=i.call.apply(i,[this].concat(n))),"state",{}),m(d(e),"findListHeight",(function(){var t=e.list&&b.findDOMNode(e.list),n=t&&t.clientHeight&&t.clientHeight+e.props.deltaHeight||9999;return e.setState({listHeight:n}),n})),e}return t=p,(n=[{key:"componentDidMount",value:function(){this.props.onExpand(this.props.expandedOnMount)}},{key:"componentDidUpdate",value:function(e){var t=this;S((function(){if(!v(t.props.layers,e.layers)||t.props.maxHeight!==e.maxHeight||t.props.disabled!==e.disabled){var n=t.findListHeight();t.props.maxHeight<t.props.height?t.props.onResize({height:t.props.maxHeight}):n&&n<t.props.height&&t.props.onResize({height:n})}if(t.props.layers.length!==e.layers.length||t.props.expanded&&!e.expanded){var r=t.findListHeight();t.props.onResize({height:r<t.props.maxHeight?r:t.props.maxHeight})}}),100)}},{key:"render",value:function(){var e=this,t=this.props.expanded&&this.props.layers&&this.props.layers.length>0;return this.props.layers&&0===this.props.layers.length&&!this.props.title&&y.createElement("div",{id:"ms-legend-action",className:"ms-legend-action"},this.props.toggleButton)||!this.props.disabled&&y.createElement(M,null,(function(n){var r=n.height;return y.createElement(T,{height:e.props.height,axis:"y",minConstraints:[e.props.width,e.props.minHeight],maxConstraints:[e.props.width,e.state.listHeight&&e.state.listHeight<e.props.maxHeight&&e.state.listHeight||r&&r<e.props.maxHeight&&r||e.props.maxHeight],onResize:function(t,n){return e.props.onResize({height:n.size&&n.size.height})}},y.createElement(j,{id:"ms-legend-action",className:"ms-legend-action",collapsible:!0,header:y.createElement(E,{fluid:!0},y.createElement(x,null,y.createElement(P,{xs:12,className:"ms-legend-header"},e.props.toggleButton,y.createElement("div",null,y.createElement("h5",null,e.props.title)),e.props.layers&&e.props.layers.length>0&&y.createElement(_,{tooltipId:e.props.expanded?"floatinglegend.hideLegend":"floatinglegend.showLegend",tooltipPosition:"bottom",className:"no-border square-button-md",onClick:function(){return e.props.onExpand(!e.props.expanded)}},y.createElement(O,{glyph:e.props.expanded?"chevron-down":"chevron-left"}))))),expanded:t,footer:t&&y.createElement(E,{fluid:!0}),style:a({width:e.props.width},e.props.height&&t?{height:e.props.minHeight>e.props.height?e.props.minHeight:e.props.height}:{})},y.createElement(A,{ref:function(t){e.list=t},size:"sm",items:e.props.layers.map((function(t){return{title:t.title&&""!==t.title?t.title:t.name,preview:y.createElement(O,{className:"text-primary",glyph:t.visibility?"eye-open":"eye-close",onClick:function(){return e.props.onChange(t.id,"layers",{visibility:!t.visibility})}}),style:{opacity:t.visibility?1:.4},body:t.visibility?y.createElement("div",null,y.createElement(E,{fluid:!0},y.createElement(x,null,y.createElement(P,{xs:12,className:"ms-legend-container"},y.createElement(I,o({node:a({},t),currentZoomLvl:e.props.currentZoomLvl,scales:e.props.scales},e.props.legendProps))))),!e.props.disableOpacitySlider&&y.createElement(R,{opacity:t.opacity,disabled:!t.visibility,hideTooltip:e.props.hideOpacityTooltip,onChange:function(n){return e.props.onChange(t.id,"layers",{opacity:n})}})):null}}))})))}))}}])&&l(t.prototype,n),r&&l(t,r),p}(y.Component);m(D,"propTypes",{layers:g.array,expanded:g.bool,width:g.number,height:g.number,title:g.string,legendProps:g.object,onChange:g.func,onResize:g.func,onExpand:g.func,toggleButton:g.node,minHeight:g.number,maxHeight:g.number,disabled:g.bool,currentZoomLvl:g.number,scales:g.array,disableOpacitySlider:g.bool,deltaHeight:g.number,expandedOnMount:g.bool,hideOpacityTooltip:g.bool}),m(D,"defaultProps",{layers:[],expanded:!0,width:300,height:900,title:"",legendProps:{},onChange:function(){},onResize:function(){},onExpand:function(){},toggleButton:y.createElement(O,{glyph:"1-map",style:{margin:"0 8px"}}),minHeight:150,maxHeight:9999,deltaHeight:110,expandedOnMount:!0}),e.exports=D},"./MapStore2/web/client/components/TOC/Header.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=n("./node_modules/react/index.js"),f=n("./node_modules/prop-types/index.js"),m=n("./node_modules/react-bootstrap/es/index.js"),y=m.Grid,b=m.Row,g=m.Col,h=m.Glyphicon,v=n("./MapStore2/web/client/components/misc/Filter.jsx"),S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(u,e);var t,n,r,l=s(u);function u(){var e;o(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return p(c(e=l.call.apply(l,[this].concat(n))),"renderTitle",(function(){return d.createElement(b,null,d.createElement(g,{xs:12,className:"mapstore-toc-head-title-container text-center no-border"},d.createElement("div",{className:"mapstore-toc-head-title",title:e.props.title},d.createElement(h,{glyph:"1-map"}),"",e.props.title)))})),p(c(e),"renderFilter",(function(){return d.createElement(b,null,d.createElement(g,{xs:12,className:"text-center"},d.createElement(v,{onFocus:e.props.onClear,filterPlaceholder:e.props.filterPlaceholder,tooltipClear:e.props.filterTooltipClear,filterText:e.props.filterText,onFilter:e.props.onFilter})))})),p(c(e),"renderTools",(function(){return d.createElement(b,null,d.createElement(g,{xs:12,className:"text-center"},e.props.toolbar))})),e}return t=u,(n=[{key:"render",value:function(){var e=[this.props.showTools,this.props.showFilter,this.props.showTitle].filter((function(e){return e})),t=e.length>0?" toc-head-sections-"+e.length:" toc-head-sections";return d.createElement("div",{className:"mapstore-toc-head"+t},d.createElement(y,{fluid:!0},this.props.showTitle?this.renderTitle():null,this.props.showFilter?this.renderFilter():null,this.props.showTools?this.renderTools():null))}}])&&i(t.prototype,n),r&&i(t,r),u}(d.Component);p(S,"propTypes",{title:f.string,filterText:f.string,filterPlaceholder:f.oneOfType([f.object,f.string]),showTitle:f.bool,showFilter:f.oneOfType([f.bool,f.number]),showTools:f.bool,toolbar:f.object,onFilter:f.func,onClear:f.func,filterTooltipClear:f.oneOfType([f.object,f.string])}),p(S,"defaultProps",{title:"",filterText:"",filterPlaceholder:"Filter",showTitle:!0,showFilter:!0,showTools:!0,toolbar:null,onFilter:function(){},onClear:function(){},filterTooltipClear:"Clear"}),e.exports=S},"./MapStore2/web/client/components/TOC/Node.jsx":function(e,t,n){function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=n("./node_modules/prop-types/index.js"),i=n("./node_modules/react/index.js"),a=n("./node_modules/create-react-class/index.js"),s=n("./node_modules/object-assign/index.js"),l=n("./node_modules/react-transition-group/index.js").CSSTransitionGroup,c=a({displayName:"Node",propTypes:{node:o.object,style:o.object,styler:o.func,className:o.string,type:o.string,onSort:o.func,isDraggable:o.bool,animateCollapse:o.bool},getDefaultProps:function(){return{node:null,style:{},styler:function(){},className:"",type:"node",onSort:null,animateCollapse:!0}},renderChildren:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return!0};return i.Children.map(this.props.children,(function(n){if(t(n)){var o=(n.type.inheritedPropTypes||["node"]).reduce((function(t,n){return e.props[n]?s(t,r({},n,e.props[n])):t}),{});return i.cloneElement(n,o)}return null}))},render:function(){var e=void 0===this.props.node.expanded||this.props.node.expanded,t=this.props.type,n=s({},this.props.style,this.props.styler(this.props.node)),r=e&&"Error"!==this.props.node.loadingError?this.renderChildren((function(e){return e&&"collapsible"===e.props.position})):[];return this.props.animateCollapse&&(r=i.createElement(l,{transitionName:"TOC-Node",transitionEnterTimeout:250,transitionLeaveTimeout:250},r)),i.createElement("div",{key:this.props.node.name,className:(e?t+"-expanded":t+"-collapsed")+" "+this.props.className,style:this.props.node.dummy?{padding:0}:n},this.renderChildren((function(e){return e&&"collapsible"!==e.props.position})),r)}});e.exports=c},"./MapStore2/web/client/components/TOC/TOC.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=n("./node_modules/react/index.js"),d=n("./node_modules/prop-types/index.js"),f=n("./MapStore2/web/client/components/TOC/enhancers/dndTree.jsx");n("./MapStore2/web/client/components/TOC/css/toc.css");var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(c,e);var t,n,r,l=s(c);function c(){return o(this,c),l.apply(this,arguments)}return t=c,(n=[{key:"render",value:function(){var e=this,t=[],n=this.props.nodes.filter(this.props.filter);if(this.props.children){var r=0;t=n.map((function(t){return p.cloneElement(e.props.children,{node:t,parentNodeId:"root",onSort:e.props.onSort,onError:e.props.onError,sortIndex:t.hide||t.dummy?r:r++,key:t.name||t.id||"default",isDraggable:!(!e.props.onSort||t.nodes&&"Default"===t.name),setDndState:e.props.setDndState})}))}return this.props.onSort,p.createElement("div",{id:this.props.id,className:"mapstore-layers-container"},t)}}])&&i(t.prototype,n),r&&i(t,r),c}(p.Component);u(m,"propTypes",{filter:d.func,nodes:d.array,id:d.string,onSort:d.func,onError:d.func,setDndState:d.func}),u(m,"defaultProps",{filter:function(){return!0},nodes:[],id:"mapstore-layers",onSort:null,setDndState:function(){}}),e.exports=f(m)},"./MapStore2/web/client/components/TOC/TOCItemsSettings.jsx":function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function o(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var a=n("./node_modules/react/index.js"),s=n("./node_modules/prop-types/index.js"),l=n("./node_modules/react-bootstrap/es/index.js"),c=l.Row,u=l.Col,p=l.Nav,d=l.NavItem,f=l.Glyphicon,m=n("./MapStore2/web/client/components/misc/panels/DockablePanel.jsx"),y=n("./MapStore2/web/client/components/misc/toolbar/Toolbar.jsx"),b=n("./MapStore2/web/client/components/misc/enhancers/tooltip.jsx")(d),g=n("./MapStore2/web/client/components/misc/ResizableModal.jsx"),h=n("./MapStore2/web/client/components/misc/Portal.jsx"),v=n("./node_modules/lodash/lodash.js"),S=v.head,w=v.isObject,O=v.isString,j=n("./MapStore2/web/client/components/I18N/Message.jsx"),E=function(e){var t=e.className,n=void 0===t?"":t,i=e.activeTab,s=void 0===i?"general":i,l=e.currentLocale,d=void 0===l?"en-US":l,v=e.currentLocaleLanguage,E=void 0===v?"en":v,x=e.width,P=void 0===x?500:x,C=e.groups,T=void 0===C?[]:C,M=e.element,_=void 0===M?{}:M,A=e.settings,R=void 0===A?{}:A,I=e.onSave,D=void 0===I?function(){}:I,k=e.onClose,L=void 0===k?function(){}:k,N=e.onHideSettings,F=void 0===N?function(){}:N,U=e.onSetTab,G=void 0===U?function(){}:U,B=e.onUpdateParams,z=void 0===B?function(){}:B,W=e.onRetrieveLayerData,V=void 0===W?function(){}:W,H=e.onShowAlertModal,q=void 0===H?function(){}:H,Y=e.realtimeUpdate,Q=void 0===Y||Y,K=e.alertModal,Z=void 0!==K&&K,X=e.dockStyle,J=void 0===X?{}:X,$=e.dock,ee=void 0===$||$,te=e.showFullscreen,ne=e.draggable,re=e.position,oe=void 0===re?"left":re,ie=e.tabs,ae=void 0===ie?[]:ie,se=e.tabsConfig,le=void 0===se?{}:se,ce=e.isLocalizedLayerStylesEnabled,ue=void 0!==ce&&ce,pe=S(ae.filter((function(e){return e.id===s&&e.toolbarComponent})).map((function(e){return e.toolbarComponent}))),de=ae&&ae.map((function(e){return e&&e.onClose})).filter((function(e){return e}))||[],fe=[{glyph:"floppy-disk",tooltipId:"save",visible:!!D,onClick:function(){return D(de)}}].concat(o(S(ae.filter((function(e){return e.id===s&&e.toolbar})).map((function(e){return e.toolbar})))||[]));return a.createElement("div",null,a.createElement(m,{open:R.expanded,glyph:"wrench",title:_.title&&w(_.title)&&(_.title[d]||_.title.default)||O(_.title)&&_.title||"",className:n,onClose:function(){L?L(!1,de):(de.forEach((function(e){e()})),F())},size:P,style:J,showFullscreen:te,dock:ee,draggable:ne,position:oe,header:[a.createElement(c,{key:"ms-toc-settings-toolbar",className:"text-center"},a.createElement(u,{xs:12},pe?a.createElement(pe,{buttons:fe}):a.createElement(y,{btnDefaultProps:{bsStyle:"primary",className:"square-button-md"},buttons:fe})))].concat(o(ae.length>1?[a.createElement(c,{key:"ms-toc-settings-navbar",className:"ms-row-tab"},a.createElement(u,{xs:12},a.createElement(p,{bsStyle:"tabs",activeKey:s,justified:!0},ae.map((function(e){return a.createElement(b,{key:"ms-tab-settings-"+e.id,tooltip:a.createElement(j,{msgId:e.tooltipId}),eventKey:e.id,onClick:function(){G(e.id),e.onClick&&e.onClick()}},a.createElement(f,{glyph:e.glyph}))})))))]:[]))},ae.filter((function(e){return e.id&&e.id===s})).filter((function(e){return e.Component})).map((function(t){return a.createElement(t.Component,r({},e,le[t.id],{key:"ms-tab-settings-body-"+t.id,containerWidth:P,element:_,groups:T,nodeType:R.nodeType,settings:R,retrieveLayerData:V,onChange:function(e,t){return w(e)?z(e,Q):z(function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},e,t),Q)},isLocalizedLayerStylesEnabled:ue,currentLocaleLanguage:E}))}))),a.createElement(h,null,a.createElement(g,{fade:!0,show:Z,title:a.createElement(j,{msgId:"layerProperties.changedSettings"}),size:"xs",onClose:function(){return q(!1)},buttons:[{bsStyle:"primary",text:a.createElement(j,{msgId:"close"}),onClick:function(){return L(!0,de)}},{bsStyle:"primary",text:a.createElement(j,{msgId:"save"}),onClick:function(){return D(de)}}]},a.createElement("div",{className:"ms-alert"},a.createElement("div",{className:"ms-alert-center"},a.createElement(j,{msgId:"layerProperties.changedSettingsAlert"}))))))};E.contextTypes={plugins:s.object,pluginsConfig:s.array,loadedPlugins:s.object},e.exports=E},"./MapStore2/web/client/components/TOC/Toolbar.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=n("./node_modules/react/index.js"),f=n("./node_modules/prop-types/index.js"),m=n("./node_modules/react-bootstrap/es/index.js"),y=m.ButtonGroup,b=m.Button,g=m.Glyphicon,h=m.Tooltip,v=n("./MapStore2/web/client/components/misc/OverlayTrigger.jsx"),S=n("./node_modules/react-addons-css-transition-group/index.js"),w=n("./node_modules/lodash/lodash.js").head,O=n("./MapStore2/web/client/components/maps/modals/ConfirmModal.jsx"),j=n("./MapStore2/web/client/components/TOC/fragments/LayerMetadataModal.jsx"),E=n("./MapStore2/web/client/libs/proj4.js").default,x=n("./MapStore2/web/client/components/I18N/Message.jsx"),P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(u,e);var t,n,r,l=s(u);function u(){var e;o(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return p(c(e=l.call.apply(l,[this].concat(n))),"state",{showDeleteDialog:!1}),p(c(e),"isNestedGroup",(function(){var t=e.props.selectedGroups.map((function(e){return e.id.split(".")}));return w(t.reduce((function(e,t){return e[0]===t[0]?t:[!1]}),t[0]))})),p(c(e),"isLoading",(function(){return w(e.props.selectedLayers.filter((function(e){return e.loading})))})),p(c(e),"getStatus",(function(){var t=e.props,n=t.selectedLayers,r=t.selectedGroups,o=e.isNestedGroup(),i=0===n.length&0===r.length?"DESELECT":"";return i=1===n.length&0===r.length?"LAYER":i,i=o?"GROUP":i,i=n.length>1&0===r.length?"LAYERS":i,i=r.length>1&&!o?"GROUPS":i,i=e.props.selectedLayers.length>0&&e.props.selectedLayers.filter((function(e){return"Error"===e.loadingError})).length===e.props.selectedLayers.length?"".concat(i,"_LOAD_ERROR"):i})),p(c(e),"getSelectedGroup",(function(){return e.props.selectedGroups.length>0&&e.props.selectedGroups[e.props.selectedGroups.length-1]})),p(c(e),"getSelectedNodeDepth",(function(){return"DESELECT"===e.getStatus()?0:e.getSelectedGroup().id.split(".").length+1})),p(c(e),"addLayer",(function(){var t=e.getSelectedGroup();e.props.onToolsActions.onAddLayer(t&&t.id)})),p(c(e),"addGroup",(function(){var t=e.getSelectedGroup();e.props.onToolsActions.onAddGroup(t&&t.id)})),p(c(e),"browseData",(function(){e.props.onToolsActions.onBrowseData({url:e.props.selectedLayers[0].search.url||e.props.selectedLayers[0].url,name:e.props.selectedLayers[0].name,id:e.props.selectedLayers[0].id})})),p(c(e),"download",(function(){e.props.onToolsActions.onDownload({url:e.props.selectedLayers[0].search.url||e.props.selectedLayers[0].url,name:e.props.selectedLayers[0].name,id:e.props.selectedLayers[0].id})})),p(c(e),"checkBbox",(function(){var t=e.props.selectedLayers.filter((function(e){return e.bbox})).map((function(e){return e.bbox})),n=t.length>0?t.reduce((function(e,t){return e.crs===t.crs?e:{crs:"differentCRS"}})):{crs:"differentCRS"};return!!w(t)&&"differentCRS"!==n.crs&&n.crs})),p(c(e),"zoomTo",(function(){var t=e.props.selectedLayers.filter((function(e){return e.bbox})).map((function(e){return e.bbox})),n=t.length>1?t.reduce((function(e,t){return{bounds:{maxx:e.bounds.maxx>t.bounds.maxx?e.bounds.maxx:t.bounds.maxx,maxy:e.bounds.maxy>t.bounds.maxy?e.bounds.maxy:t.bounds.maxy,minx:e.bounds.minx<t.bounds.minx?e.bounds.minx:t.bounds.minx,miny:e.bounds.miny<t.bounds.miny?e.bounds.miny:t.bounds.miny},crs:t.crs}}),t[0]):t[0];e.props.onToolsActions.onZoom(n.bounds,n.crs)})),p(c(e),"showSettings",(function(t){e.props.settings.expanded?e.props.onToolsActions.onHideSettings():"LAYER"===t||"LAYER_LOAD_ERROR"===t?e.props.onToolsActions.onSettings(e.props.selectedLayers[0].id,"layers",{opacity:parseFloat(void 0!==e.props.selectedLayers[0].opacity?e.props.selectedLayers[0].opacity:1)}):"GROUP"===t&&e.props.onToolsActions.onSettings(e.props.selectedGroups[e.props.selectedGroups.length-1].id,"groups",{})})),p(c(e),"showMetadata",(function(){e.props.layerMetadata.expanded?e.props.onToolsActions.onHideLayerMetadata():e.props.onToolsActions.onGetMetadataRecord(e.props.options.metadataOptions)})),p(c(e),"removeNodes",(function(){e.props.selectedLayers.forEach((function(t){e.props.onToolsActions.onRemove(t.id,"layers")})),e.props.selectedGroups.forEach((function(t){e.props.onToolsActions.onRemove(t.id,"groups")})),e.props.onToolsActions.onClear(),e.closeDeleteDialog()})),p(c(e),"reload",(function(){e.props.selectedLayers.forEach((function(t){e.props.onToolsActions.onShow(t.id,{visibility:!0}),e.props.onToolsActions.onReload(t.id)}))})),p(c(e),"closeDeleteDialog",(function(){e.setState({showDeleteDialog:!1})})),p(c(e),"displayDeleteDialog",(function(){e.setState({showDeleteDialog:!0})})),e}return t=u,(n=[{key:"render",value:function(){var e=this,t=this.getStatus(),n=this.checkBbox(),r=n&&E.defs(n),o=d.createElement(j,{key:"toollayermetadatamodal",layerMetadata:this.props.layerMetadata,metadataTemplate:this.props.metadataTemplate,hideLayerMetadata:this.props.onToolsActions.onHideLayerMetadata,layerMetadataPanelTitle:this.props.text.layerMetadataPanelTitle});return this.props.activateTool.activateToolsContainer?d.createElement(y,null,d.createElement(S,{transitionName:"toc-toolbar-btn-transition",transitionEnterTimeout:300,transitionLeaveTimeout:300},!this.props.activateTool.activateAddLayer||"DESELECT"!==t&&"GROUP"!==t?null:d.createElement(v,{key:"addLayer",placement:"top",overlay:d.createElement(h,{id:"toc-tooltip-addLayer"},"GROUP"===t?this.props.text.addLayerToGroupTooltip:this.props.text.addLayerTooltip)},d.createElement(b,{key:"addLayer",bsStyle:"primary",className:"square-button-md",onClick:this.addLayer},d.createElement(g,{glyph:"add-layer"}))),this.props.activateTool.activateAddGroup&&("DESELECT"===t||"GROUP"===t)&&this.getSelectedNodeDepth()<=this.props.maxDepth?d.createElement(v,{key:"addGroup",placement:"top",overlay:d.createElement(h,{id:"toc-tooltip-addGroup"},"GROUP"===t?this.props.text.addSubGroupTooltip:this.props.text.addGroupTooltip)},d.createElement(b,{key:"addGroup",bsStyle:"primary",className:"square-button-md",onClick:this.addGroup},d.createElement(g,{glyph:"add-folder"}))):null,this.props.activateTool.activateZoomTool&&("LAYER"===t||"GROUP"===t||"LAYERS"===t||"GROUPS"===t)&&n?d.createElement(v,{key:"zoomTo",placement:"top",overlay:d.createElement(h,{id:"toc-tooltip-zoomTo"},r?this.props.text.zoomToTooltip[this.props.selectedLayers.length>1?"LAYERS":"LAYER"]:d.createElement(x,{msgId:"toc.epsgNotSupported",msgParams:{epsg:n||" "}}))},d.createElement(b,{bsStyle:"primary",className:"square-button-md",style:r?{opacity:1,cursor:"pointer"}:{opacity:.5,cursor:"default"},onClick:r?this.zoomTo:function(){}},d.createElement(g,{glyph:"zoom-to"}))):null,!this.props.activateTool.activateSettingsTool||"LAYER"!==t&&"GROUP"!==t&&"LAYER_LOAD_ERROR"!==t||this.props.layerMetadata.expanded||this.props.wfsdownload.expanded?null:d.createElement(v,{key:"settings",placement:"top",overlay:d.createElement(h,{id:"toc-tooltip-settings"},this.props.text.settingsTooltip["LAYER_LOAD_ERROR"===t?"LAYER":t])},d.createElement(b,{active:this.props.settings.expanded,bsStyle:this.props.settings.expanded?"success":"primary",className:"square-button-md",onClick:function(){e.showSettings(t)}},d.createElement(g,{glyph:"wrench"}))),!this.props.activateTool.activateLayerFilterTool||"LAYER"!==t&&"LAYER_LOAD_ERROR"!==t||!this.props.selectedLayers[0].search||this.props.settings.expanded||this.props.layerMetadata.expanded||this.props.wfsdownload.expanded?null:d.createElement(v,{key:"queryPanel",placement:"top",overlay:d.createElement(h,{id:"toc-tooltip-layerFilter"},this.props.text.layerFilterTooltip)},d.createElement(b,{bsStyle:"primary",className:"square-button-md",onClick:this.props.onToolsActions.onQueryBuilder},d.createElement(g,{glyph:"filter-layer"}))),!this.props.activateTool.activateQueryTool||"LAYER"!==t||!this.props.selectedLayers[0].search||this.props.settings.expanded||this.props.layerMetadata.expanded||this.props.wfsdownload.expanded?null:d.createElement(v,{key:"featuresGrid",placement:"top",overlay:d.createElement(h,{id:"toc-tooltip-featuresGrid"},this.props.text.featuresGridTooltip)},d.createElement(b,{bsStyle:"primary",className:"square-button-md",onClick:this.browseData},d.createElement(g,{glyph:"features-grid"}))),(!this.props.activateTool.activateRemoveLayer||"LAYER"!==t&&"LAYERS"!==t&&"LAYER_LOAD_ERROR"!==t&&"LAYERS_LOAD_ERROR"!==t)&&(!this.props.activateTool.activateRemoveGroup||"GROUP"!==t&&"GROUPS"!==t&&"GROUP_LOAD_ERROR"!==t&&"GROUPS_LOAD_ERROR"!==t)||this.props.settings.expanded||this.props.layerMetadata.expanded||this.props.wfsdownload.expanded?null:d.createElement(v,{key:"removeNode",placement:"top",overlay:d.createElement(h,{id:"toc-tooltip-trash"},this.props.selectedGroups.length?this.props.text.trashTooltip.GROUP:this.props.text.trashTooltip[this.props.selectedLayers.length>1?"LAYERS":"LAYER"])},d.createElement(b,{active:this.state.showDeleteDialog,bsStyle:this.props.settings.showDeleteDialog?"success":"primary",className:"square-button-md",onClick:this.displayDeleteDialog},d.createElement(g,{glyph:"trash"}))),!this.isLoading()&&"LAYER_LOAD_ERROR"===t||"LAYERS_LOAD_ERROR"===t?d.createElement(v,{key:"reload",placement:"top",overlay:d.createElement(h,{id:"toc-tooltip-reload"},this.props.text.reloadTooltip[this.props.selectedLayers.length>1?"LAYERS":"LAYER"])},d.createElement(b,{bsStyle:"primary",className:"square-button-md",onClick:this.reload},d.createElement(g,{glyph:"refresh"}))):null,!this.props.activateTool.activateWidgetTool||"LAYER"!==t||1!==this.props.selectedLayers.length||"vector"===this.props.selectedLayers[0].type||this.props.settings.expanded||this.props.layerMetadata.expanded||this.props.wfsdownload.expanded?null:d.createElement(v,{key:"widgets",placement:"top",overlay:d.createElement(h,{id:"toc-tooltip-widgets"},this.props.text.createWidgetTooltip)},d.createElement(b,{bsStyle:"primary",className:"square-button-md",onClick:this.props.onToolsActions.onNewWidget},d.createElement(g,{glyph:"stats"}))),this.props.activateTool.activateDownloadTool&&"LAYER"===t&&this.props.selectedLayers[0].search&&!this.props.settings.expanded&&!this.props.layerMetadata.expanded?d.createElement(v,{key:"downloadTool",placement:"top",overlay:d.createElement(h,{id:"toc-tooltip-downloadTool"},this.props.text.downloadToolTooltip)},d.createElement(b,{bsStyle:this.props.wfsdownload.expanded?"success":"primary",className:"square-button-md",onClick:this.download},d.createElement(g,{glyph:"download"}))):null,!this.props.activateTool.activateMetedataTool||"LAYER"!==t||this.props.settings.expanded||this.props.wfsdownload.expanded?null:d.createElement(v,{key:"layerMetadata",placement:"top",overlay:d.createElement(h,{id:"legend-tooltip-metadata"},this.props.text.layerMetadataTooltip)},d.createElement(b,{key:"layer-metadata",bsStyle:this.props.layerMetadata.expanded?"success":"primary",className:"square-button-md",onClick:function(){return e.showMetadata()}},d.createElement(g,{glyph:"info-sign"})))),d.createElement(O,{ref:"removelayer",options:{animation:!1,className:"modal-fixed"},show:this.state.showDeleteDialog,onHide:this.closeDeleteDialog,onClose:this.closeDeleteDialog,onConfirm:this.removeNodes,titleText:this.props.selectedGroups&&this.props.selectedGroups.length?this.props.text.confirmDeleteLayerGroupText:this.props.text.confirmDeleteText,confirmText:this.props.text.confirmDeleteConfirmText,cancelText:this.props.text.confirmDeleteCancelText,body:this.props.selectedGroups&&this.props.selectedGroups.length?this.props.text.confirmDeleteLayerGroupMessage:this.props.text.confirmDeleteMessage}),o):null}}])&&i(t.prototype,n),r&&i(t,r),u}(d.Component);p(P,"propTypes",{groups:f.array,selectedLayers:f.array,generalInfoFormat:f.string,selectedGroups:f.array,onToolsActions:f.object,text:f.object,activateTool:f.object,options:f.object,style:f.object,settings:f.object,layerMetadata:f.object,wfsdownload:f.object,maxDepth:f.number,metadataTemplate:f.oneOfType([f.string,f.array,f.object,f.func])}),p(P,"defaultProps",{groups:[],selectedLayers:[],selectedGroups:[],onToolsActions:{onZoom:function(){},onNewWidget:function(){},onBrowseData:function(){},onQueryBuilder:function(){},onUpdate:function(){},onRemove:function(){},onClear:function(){},onSettings:function(){},onUpdateSettings:function(){},onRetrieveLayerData:function(){},onHideSettings:function(){},onReload:function(){},onAddLayer:function(){},onAddGroup:function(){},onDownload:function(){},onGetMetadataRecord:function(){},onHideLayerMetadata:function(){},onShow:function(){}},maxDepth:3,text:{settingsText:"",opacityText:"",elevationText:"",saveText:"",closeText:"",confirmDeleteText:"",confirmDeleteMessage:"",confirmDeleteConfirmText:"",confirmDeleteCancelText:"",createWidgetTooltip:"",addLayerTooltip:"",addLayerToGroupTooltip:"",addGroupTooltip:"",addSubGroupTooltip:"",zoomToTooltip:{LAYER:"",LAYERS:""},settingsTooltip:{LAYER:"",GROUP:""},featuresGridTooltip:"",downloadToolTooltip:"",trashTooltip:{LAYER:"",LAYERS:"",GROUP:""},reloadTooltip:{LAYER:"",LAYERS:""},layerMetadataTooltip:"",layerMetadataPanelTitle:"",layerFilter:""},activateTool:{activateToolsContainer:!0,activateRemoveLayer:!0,activateRemoveGroup:!0,activateZoomTool:!0,activateQueryTool:!0,activateDownloadTool:!0,activateSettingsTool:!0,activateAddLayer:!0,activateAddGroup:!0,includeDeleteButtonInSettings:!1,activateMetedataTool:!0,activateLayerFilterTool:!0},options:{modalOptions:{},metadataOptions:{},settingsOptions:{}},style:{chartStyle:{}},settings:{},layerMetadata:{},wfsdownload:{},metadataTemplate:null}),e.exports=P},"./MapStore2/web/client/components/TOC/css/toc.css":function(e,t,n){var r=n("./node_modules/css-loader/index.js!./node_modules/postcss-loader/src/index.js?!./MapStore2/web/client/components/TOC/css/toc.css");"string"==typeof r&&(r=[[e.i,r,""]]);n("./node_modules/style-loader/addStyles.js")(r,{});r.locals&&(e.exports=r.locals)},"./MapStore2/web/client/components/TOC/enhancers/dndTree.jsx":function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function o(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=n("./node_modules/react/index.js"),c=n("./node_modules/recompose/es/Recompose.js"),u=c.compose,p=c.branch,d=c.withState,f=n("./node_modules/lodash/isArray.js"),m=n("./node_modules/lodash/flatten.js"),y=function e(t,n,r){var o=t.findIndex((function(e){return e.id===n}));if(-1!==o){var i=t.slice();return r?i[o]=a(a({},i[o]),r):i.splice(o,1),i}return t.map((function(t){return a(a({},t),{},{nodes:t.nodes&&e(t.nodes,n,r)})}))},b=p((function(e){var t=e.nodes;return f(t)}),u(d("dndState","setDndState",{node:null,parentNodeId:"",newParentNodeId:"",sortIndex:0,illegalDrop:null}),(function(e){return function(t){var n=t.dndState,i=t.nodes,s=o(t,["dndState","nodes"]),c=n.node,u=n.parentNodeId,p=n.newParentNodeId,d=n.illegalDrop,f=function e(t,n){var r=n.node,o=n.sortIndex,i=n.parentNodeId,s=n.newParentNodeId,l=n.illegalDrop;return t&&r?t.map((function(t){if(t.nodes&&t.id===s){var c=s===i?y(t.nodes,r.id,null):t.nodes.slice();return c.splice(o,0,a(a({},r),s===i?{}:{id:r.id+"__placeholder",placeholder:!0,hide:!!l})),a(a({},t),{},{nodes:c})}return a(a({},t),{},{nodes:e(t.nodes,n)})})):t}([{id:"root",nodes:i}],n)[0],b=function e(t,n){var r=n.node,o=n.newParentNodeId,i=n.parentNodeId;return a(a({},t),{},{nodes:m(t.nodes.map((function(a,s){return!a.nodes||a.placeholder||a.hide||r&&a.id===r.id?[a]:[e(a,n)].concat(t.nodes[s+1]&&(t.nodes[s+1].placeholder||r&&t.id===o&&o===i&&t.nodes[s+1].id===r.id)?[]:[{id:a.id+"__dummy",dummy:!0}])})))})}({id:"root",nodes:p!==u||d?y(f.nodes,c.id,{hide:!0}):f.nodes},n);return l.createElement(e,r({},s,{nodes:b.nodes}))}})));e.exports=b},"./MapStore2/web/client/components/TOC/enhancers/draggableComponent.jsx":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=n("./node_modules/react-dom/index.js"),a=n("./node_modules/react-dnd/lib/index.js"),s=a.DragSource,l=a.DropTarget,c=n("./node_modules/recompose/es/Recompose.js"),u=c.compose,p=c.branch,d={beginDrag:function(e){return e.setDndState&&e.setDndState({node:e.node,parentNodeId:e.parentNodeId,newParentNodeId:e.parentNodeId,sortIndex:e.sortIndex}),{node:e.node,parentNodeId:e.parentNodeId,newParentNodeId:e.parentNodeId,sortIndex:e.sortIndex}},endDrag:function(e,t){var n=t.getItem(),i=n.sortIndex,a=n.newParentNodeId,s=n.illegalDrop;e.setDndState&&e.setDndState({node:null,illegalDrop:null}),s?e.onError&&e.onError(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({title:"notification.warning",autoDismiss:5,position:"tc"},s)):e.onSort&&e.onSort(e.node.id,a,i)}},f=function(e,t){return{connectDragSource:e.dragSource(),connectDragPreview:e.dragPreview(),isDragging:t.isDragging(),draggedItem:t.getItem()}},m={hover:function(e,t,n){var r=t.getItem(),o=r.sortIndex,a=e.sortIndex;if(t.isOver({shallow:!0})){var s=i.findDOMNode(n),l=s.getElementsByClassName("toc-default-group-head")[0],c=l||s;if(c){var u=c.getBoundingClientRect(),p=t.getClientOffset().y-u.top;if(l){var d=(u.bottom-u.top)/3;if(e.isDragging||e.node&&e.node.placeholder)return;if(r.newParentNodeId===e.parentNodeId&&o<a&&p<d)return;if(r.newParentNodeId===e.parentNodeId&&o>a&&p>2*d)return;p<d?(r.sortIndex=e.sortIndex,r.newParentNodeId=e.parentNodeId,"Default"===e.node.name&&(r.illegalDrop={message:"toc.error.defaultGroupOnTop",values:{groupTitle:e.node.title}})):(r.sortIndex=0,r.newParentNodeId=e.node.id,r.illegalDrop=null)}else{var f=(u.bottom-u.top)/2;if(o===a&&r.newParentNodeId===e.parentNodeId)return;if(r.newParentNodeId===e.parentNodeId&&o<a&&p<f)return;if(r.newParentNodeId===e.parentNodeId&&o>a&&p>f)return;r.sortIndex=e.sortIndex,r.newParentNodeId=e.parentNodeId,r.illegalDrop=null}e.setDndState&&e.setDndState(r)}}}},y=function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver({shallow:!0})}};e.exports=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return p((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isDraggable;return t}),u(s(e,d,f),l(e,m,y)),u(l(e,m,y))).apply(void 0,n)}},"./MapStore2/web/client/components/TOC/enhancers/tocItemsSettings.js":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n("./node_modules/lodash/lodash.js"),s=a.isNil,l=a.isEqual,c=a.isArray,u=a.isFunction,p=n("./node_modules/recompose/es/Recompose.js"),d=p.withState,f=p.withHandlers,m=p.compose,y=p.lifecycle,b=m(d("alertModal","onShowAlertModal",!1),d("showEditor","onShowEditor",!1)),g=m(f({onClose:function(e){var t=e.onUpdateInitialSettings,n=void 0===t?function(){}:t,r=e.onUpdateOriginalSettings,a=void 0===r?function(){}:r,s=e.onUpdateNode,p=void 0===s?function(){}:s,d=e.originalSettings,f=e.settings,m=e.onHideSettings,y=void 0===m?function(){}:m,b=e.onShowAlertModal,g=void 0===b?function(){}:b;return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=Object.keys(f.options).reduce((function(e,t){return o(o({},e),{},i({},t,"opacity"!==t||d[t]?d[t]:1))}),{});l(r,f.options)||e?(c(t)&&t.forEach((function(e){u(e)&&e()})),p(f.node,f.nodeType,o(o({},f.options),d)),y(),g(!1),a({}),n({})):g(!0)}},onSave:function(e){var t=e.onUpdateInitialSettings,n=void 0===t?function(){}:t,r=e.onUpdateOriginalSettings,o=void 0===r?function(){}:r,i=e.onHideSettings,a=void 0===i?function(){}:i,s=e.onShowAlertModal,l=void 0===s?function(){}:s;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];c(e)&&e.forEach((function(e){u(e)&&e()})),a(),l(!1),o({}),n({})}}}),y({componentWillMount:function(){var e=this.props,t=e.element,n=void 0===t?{}:t,r=e.onUpdateOriginalSettings,i=void 0===r?function(){}:r,a=e.onUpdateInitialSettings,s=void 0===a?function(){}:a;i({}),s(o({},n))},componentWillReceiveProps:function(e){var t=this.props,n=t.settings,r=void 0===n?{}:n,o=t.onRetrieveLayerData,i=void 0===o?function(){}:o;!r.expanded&&e.settings&&e.settings.expanded&&s(e.element.description)&&"wms"===e.element.type&&i(e.element)},componentWillUpdate:function(e){var t=this.props,n=t.initialActiveTab,r=void 0===n?"general":n,i=t.settings,a=void 0===i?{}:i,s=t.onUpdateOriginalSettings,l=void 0===s?function(){}:s,c=t.onUpdateInitialSettings,u=void 0===c?function(){}:c,p=t.onSetTab,d=void 0===p?function(){}:p;!a.expanded&&e.settings&&e.settings.expanded&&(l({}),u(o({},e.element)),d(r))}}));e.exports={settingsState:b,settingsLifecycle:g,updateSettingsLifecycle:m(b,g)}},"./MapStore2/web/client/components/TOC/fragments/GroupChildren.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=n("./node_modules/prop-types/index.js"),d=n("./node_modules/react/index.js");n("./MapStore2/web/client/components/TOC/fragments/css/groupchildren.css");var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(c,e);var t,n,r,l=s(c);function c(){return o(this,c),l.apply(this,arguments)}return t=c,(n=[{key:"render",value:function(){var e=this,t=[];if(this.props.children){var n=(this.props.node.nodes||[]).filter((function(t){return e.props.filter(t,e.props.node)})),r=0;t=n.map((function(t){return d.cloneElement(e.props.children,{node:t,parentNodeId:e.props.node?e.props.node.id:"",key:t.id,sortIndex:t.hide||t.dummy?r:r++,onSort:e.props.onSort,onError:e.props.onError,level:e.props.level,isDraggable:!!e.props.onSort,setDndState:e.props.setDndState})}))}return this.props.onSort,d.createElement("div",{className:"toc-group-children"},t)}}])&&i(t.prototype,n),r&&i(t,r),c}(d.Component);u(f,"propTypes",{node:p.object,filter:p.func,onSort:p.func,onError:p.func,setDndState:p.func,level:p.number}),u(f,"inheritedPropTypes",["node","filter","onSort"]),u(f,"defaultProps",{node:null,filter:function(){return!0},onSort:null,level:1}),e.exports=f},"./MapStore2/web/client/components/TOC/fragments/GroupTitle.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=n("./node_modules/react/index.js"),d=n("./node_modules/prop-types/index.js"),f=n("./MapStore2/web/client/components/TOC/fragments/StatusIcon.jsx"),m=n("./node_modules/react-bootstrap/es/index.js").Tooltip,y=n("./MapStore2/web/client/components/misc/OverlayTrigger.jsx"),b=n("./MapStore2/web/client/utils/TOCUtils.js").getTitleAndTooltip,g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(c,e);var t,n,r,l=s(c);function c(){return o(this,c),l.apply(this,arguments)}return t=c,(n=[{key:"render",value:function(){var e=this,t=void 0===this.props.node.expanded||this.props.node.expanded,n=b(this.props),r=n.title,o=n.tooltipText;return this.props.tooltip&&o?p.createElement(y,{placement:this.props.node.tooltipPlacement||"top",overlay:p.createElement(m,{id:"tooltip-layer-group"},o)},p.createElement("div",{style:this.props.style},p.createElement("span",{className:"toc-group-title",onClick:this.props.onSelect?function(t){return e.props.onSelect(e.props.node.id,"group",t.ctrlKey)}:function(){}},r),p.createElement(f,{onClick:function(){return e.props.onClick(e.props.node.id,t)},expanded:t,node:this.props.node}))):p.createElement("div",{style:this.props.style},p.createElement("span",{className:"toc-group-title",onClick:this.props.onSelect?function(t){return e.props.onSelect(e.props.node.id,"group",t.ctrlKey)}:function(){}},r),p.createElement(f,{onClick:function(){return e.props.onClick(e.props.node.id,t)},expanded:t,node:this.props.node}))}}])&&i(t.prototype,n),r&&i(t,r),c}(p.Component);u(g,"propTypes",{node:d.object,onClick:d.func,onSelect:d.func,style:d.object,currentLocale:d.string,tooltip:d.bool,tooltipOptions:d.object}),u(g,"inheritedPropTypes",["node"]),u(g,"defaultProps",{onClick:function(){},onSelect:null,currentLocale:"en-US",style:{},tooltip:!1,tooltipOptions:{maxLength:807,separator:" - "}}),e.exports=g},"./MapStore2/web/client/components/TOC/fragments/LayerMetadataModal.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=n("./node_modules/react/index.js"),f=n("./node_modules/prop-types/index.js"),m=n("./node_modules/react-bootstrap/es/index.js").Glyphicon;n("./MapStore2/web/client/components/TOC/fragments/css/settingsModal.css");var y=n("./MapStore2/web/client/components/misc/Dialog.jsx"),b=n("./MapStore2/web/client/components/misc/Portal.jsx"),g=n("./MapStore2/web/client/components/data/template/jsx/Template.jsx"),h=n("./MapStore2/web/client/components/TOC/fragments/template/MetadataTemplate.jsx"),v=n("./MapStore2/web/client/components/TOC/fragments/template/index.js"),S=n("./node_modules/lodash/lodash.js"),w=S.isArray,O=S.isString,j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(u,e);var t,n,r,l=s(u);function u(){var e;o(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return p(c(e=l.call.apply(l,[this].concat(n))),"onDelete",(function(){e.props.hideLayerMetadata()})),p(c(e),"onClose",(function(){e.props.hideLayerMetadata()})),p(c(e),"getTemplate",(function(){var t=e.props.metadataTemplate||h;if(w(t)||O(t)){var n=w(t)?t.join("\n"):t;return d.createElement(g,{model:e.props.layerMetadata.metadataRecord,template:n,renderContent:v})}var r=t;return d.createElement(r,{model:e.props.layerMetadata.metadataRecord})})),p(c(e),"renderBodyTemplate",(function(){return e.props.layerMetadata.maskLoading?null:e.getTemplate()})),e}return t=u,(n=[{key:"render",value:function(){var e=d.createElement("span",{role:"footer"});return this.props.layerMetadata.expanded?d.createElement(b,null,d.createElement(y,{maskLoading:this.props.layerMetadata.maskLoading,id:this.props.id,style:this.props.panelStyle,className:this.props.panelClassName},d.createElement("span",{role:"header"},d.createElement("span",{className:"layer-settings-metadata-panel-title"},this.props.layerMetadataPanelTitle),d.createElement("button",{onClick:this.onClose,className:"layer-settings-metadata-panel-close close"},this.props.closeGlyph?d.createElement(m,{glyph:this.props.closeGlyph}):d.createElement("span",null,""))),d.createElement("div",{role:"body",style:{minWidth:"500px"}},this.renderBodyTemplate()),e)):null}}])&&i(t.prototype,n),r&&i(t,r),u}(d.Component);p(j,"propTypes",{id:f.string,layerMetadata:f.object,metadataTemplate:f.oneOfType([f.string,f.array,f.object,f.func]),hideLayerMetadata:f.func,closeGlyph:f.string,panelStyle:f.object,panelClassName:f.string,maskLoading:f.bool,layerMetadataPanelTitle:f.oneOfType([f.string,f.object])}),p(j,"defaultProps",{id:"mapstore-layer-settings-metadata",layerMetadata:{expanded:!1},metadataTemplate:null,closeGlyph:"1-close",panelStyle:{},panelClassName:"toolbar-panel portal-dialog",maskLoading:!0,layerMetadataPanelTitle:""}),e.exports=j},"./MapStore2/web/client/components/TOC/fragments/LayersTool.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=n("./node_modules/prop-types/index.js"),d=n("./node_modules/react/index.js"),f=n("./node_modules/react-bootstrap/es/index.js"),m=f.Glyphicon,y=f.Tooltip,b=n("./MapStore2/web/client/components/misc/OverlayTrigger.jsx"),g=n("./MapStore2/web/client/components/I18N/Message.jsx"),h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(c,e);var t,n,r,l=s(c);function c(){return o(this,c),l.apply(this,arguments)}return t=c,(n=[{key:"render",value:function(){var e=this,t=this.props.className?" "+this.props.className:"",n=d.createElement(m,{className:"toc-layer-tool"+t,style:this.props.style,glyph:this.props.glyph,onClick:function(){return e.props.onClick(e.props.node)}});return this.props.tooltip?d.createElement(b,{placement:"bottom",overlay:d.createElement(y,{id:"Tooltip-"+this.props.tooltip},d.createElement("strong",null,d.createElement(g,{msgId:this.props.tooltip})))},n):n}}])&&i(t.prototype,n),r&&i(t,r),c}(d.Component);u(h,"propTypes",{node:p.object,onClick:p.func,style:p.object,glyph:p.string,tooltip:p.string,className:p.string}),u(h,"defaultProps",{onClick:function(){}}),e.exports=h},"./MapStore2/web/client/components/TOC/fragments/OpacitySlider.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=n("./node_modules/react/index.js"),d=n("./node_modules/prop-types/index.js"),f=n("./MapStore2/web/client/components/misc/Slider.jsx"),m=n("./node_modules/lodash/lodash.js"),y=m.isNil,b=m.isArray,g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(c,e);var t,n,r,l=s(c);function c(){return o(this,c),l.apply(this,arguments)}return t=c,(n=[{key:"render",value:function(){var e=this;return p.createElement("div",{className:"mapstore-slider ".concat(this.props.hideTooltip?"":"with-tooltip"),onClick:function(e){e.stopPropagation()}},this.props.hideTooltip&&p.createElement(f,{disabled:this.props.disabled,start:[y(this.props.opacity)?100:Math.round(100*this.props.opacity)],range:{min:0,max:100},onChange:function(t){b(t)&&t[0]&&e.props.onChange(parseFloat(t[0].replace(" %","")/100))}})||p.createElement(f,{disabled:this.props.disabled,start:[y(this.props.opacity)?100:Math.round(100*this.props.opacity)],tooltips:[!0],format:{from:function(e){return Math.round(e)},to:function(e){return Math.round(e)+" %"}},range:{min:0,max:100},onChange:function(t){return e.props.onChange(parseFloat(t[0].replace(" %",""))/100)}}))}}])&&i(t.prototype,n),r&&i(t,r),c}(p.Component);u(g,"propTypes",{opacity:d.number,disabled:d.bool,hideTooltip:d.bool,onChange:d.func}),u(g,"defaultProps",{opacity:1,onChange:function(){},visibility:!0}),e.exports=g},"./MapStore2/web/client/components/TOC/fragments/StatusIcon.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=n("./node_modules/react/index.js"),d=n("./node_modules/prop-types/index.js"),f=n("./node_modules/react-bootstrap/es/index.js"),m=f.Glyphicon,y=f.Tooltip,b=n("./MapStore2/web/client/components/I18N/Message.jsx"),g=n("./MapStore2/web/client/components/misc/OverlayTrigger.jsx"),h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(c,e);var t,n,r,l=s(c);function c(){return o(this,c),l.apply(this,arguments)}return t=c,(n=[{key:"render",value:function(){var e=void 0===this.props.node.expanded||this.props.node.expanded;return p.createElement(g,{placement:"bottom",overlay:p.createElement(y,{id:"toc-status-icon"},p.createElement(b,{msgId:e?"toc.statusIconOpen":"toc.statusIconClose"}))},p.createElement(m,{onClick:this.props.onClick,className:"toc-status-icon",glyph:e?"folder-open":"folder-close"}))}}])&&i(t.prototype,n),r&&i(t,r),c}(p.Component);u(h,"propTypes",{node:d.object,onClick:d.func}),u(h,"inheritedPropTypes",["node","expanded"]),u(h,"defaultProps",{node:null,onClick:function(){}}),e.exports=h},"./MapStore2/web/client/components/TOC/fragments/Title.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=n("./node_modules/prop-types/index.js"),y=n("./node_modules/react/index.js"),b=n("./node_modules/react-bootstrap/es/index.js").Tooltip,g=n("./MapStore2/web/client/components/misc/OverlayTrigger.jsx"),h=n("./MapStore2/web/client/utils/TOCUtils.js").getTitleAndTooltip;n("./MapStore2/web/client/components/TOC/fragments/css/toctitle.css");var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(u,e);var t,n,r,i=c(u);function u(){var e;a(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return f(p(e=i.call.apply(i,[this].concat(n))),"getFilteredTitle",(function(t){var n=t.toLowerCase().split(e.props.filterText.toLowerCase());return e.props.filterText?n.reduce((function(t,r,i){return i===n.length-1?[].concat(o(t),[r]):[].concat(o(t),[r,y.createElement("strong",{key:i},e.props.filterText.toLowerCase())])}),[]):t})),f(p(e),"renderTitle",(function(){var t=h(e.props).title;return y.createElement("div",{className:"toc-title",onClick:e.props.onClick?function(t){return e.props.onClick(e.props.node.id,"layer",t.ctrlKey)}:function(){},onContextMenu:function(t){t.preventDefault(),e.props.onContextMenu(e.props.node)}},e.getFilteredTitle(t))})),e}return t=u,(n=[{key:"render",value:function(){var e=h(this.props).tooltipText;return this.props.tooltip&&e?y.createElement(g,{placement:this.props.node.tooltipPlacement||"top",overlay:y.createElement(b,{id:"tooltip-layer-title"},e)},this.renderTitle()):this.renderTitle()}}])&&s(t.prototype,n),r&&s(t,r),u}(y.Component);f(v,"propTypes",{node:m.object,onClick:m.func,onContextMenu:m.func,currentLocale:m.string,filterText:m.string,tooltip:m.bool,tooltipOptions:m.object}),f(v,"defaultProps",{onClick:function(){},onContextMenu:function(){},currentLocale:"en-US",filterText:"",tooltip:!1,tooltipOptions:{maxLength:807,separator:" - "}}),e.exports=v},"./MapStore2/web/client/components/TOC/fragments/ToggleFilter.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=n("./node_modules/react/index.js"),y=n("./node_modules/prop-types/index.js"),b=n("./node_modules/react-bootstrap/es/index.js"),g=b.Glyphicon,h=b.Tooltip,v=n("./MapStore2/web/client/components/I18N/Message.jsx"),S=n("./MapStore2/web/client/components/misc/OverlayTrigger.jsx"),w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(u,e);var t,n,r,o=c(u);function u(){var e;a(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return f(p(e=o.call.apply(o,[this].concat(n))),"onClick",(function(){var t=(e.props.node||{}).layerFilter;e.props.propertiesChangeHandler(e.props.node.id,{layerFilter:i(i({},t),{},{disabled:!t.disabled})})})),e}return t=u,(n=[{key:"render",value:function(){var e=(this.props.node||{}).layerFilter,t=(e||{}).disabled;return!!e&&m.createElement(S,{placement:"bottom",overlay:m.createElement(h,{id:"toc-filter-icon"},m.createElement(v,{msgId:t?"toc.filterIconDisabled":"toc.filterIconEnabled"}))},m.createElement(g,{onClick:this.onClick,className:"toc-filter-icon ".concat(t?"disabled":""),glyph:"filter-layer"}))}}])&&s(t.prototype,n),r&&s(t,r),u}(m.Component);f(w,"propTypes",{node:y.object,propertiesChangeHandler:y.func}),f(w,"inheritedPropTypes",["node"]),f(w,"defaultProps",{node:null,propertiesChangeHandler:function(){}}),e.exports=w},"./MapStore2/web/client/components/TOC/fragments/VisibilityCheck.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=n("./node_modules/react/index.js"),f=n("./node_modules/prop-types/index.js"),m=n("./node_modules/lodash/lodash.js").isFunction,y=n("./MapStore2/web/client/components/TOC/fragments/LayersTool.jsx"),b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(u,e);var t,n,r,l=s(u);function u(){var e;o(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return p(c(e=l.call.apply(l,[this].concat(n))),"changeVisibility",(function(){e.props.propertiesChangeHandler(e.props.node.id,{visibility:!e.props.node.visibility})})),e}return t=u,(n=[{key:"render",value:function(){return"glyph"===this.props.checkType?d.createElement(y,{tooltip:this.props.tooltip,style:this.props.style,className:"visibility-check"+(this.props.node.visibility?" checked":""),"data-position":this.props.node.storeIndex,glyph:this.props.node.visibility?this.props.glyphChecked:this.props.glyphUnchecked,onClick:this.changeVisibility}):d.createElement("input",{className:"visibility-check",style:this.props.style,"data-position":this.props.node.storeIndex,type:m(this.props.checkType)?this.props.checkType(this.props.node):this.props.checkType,checked:this.props.node.visibility?"checked":"",onChange:this.changeVisibility})}}])&&i(t.prototype,n),r&&i(t,r),u}(d.Component);p(b,"propTypes",{node:f.object,tooltip:f.string,propertiesChangeHandler:f.func,style:f.object,checkType:f.oneOfType([f.string,f.func]),glyphChecked:f.string,glyphUnchecked:f.string}),p(b,"defaultProps",{style:{},checkType:"glyph",glyphChecked:"eye-open",tooltip:"toc.toggleLayerVisibility",glyphUnchecked:"eye-close"}),e.exports=b},"./MapStore2/web/client/components/TOC/fragments/WMSLegend.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=n("./node_modules/react/index.js"),f=n("./node_modules/prop-types/index.js"),m=n("./node_modules/lodash/lodash.js"),y=m.isEmpty,b=m.isNumber,g=n("./MapStore2/web/client/components/TOC/fragments/legend/Legend.jsx"),h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(u,e);var t,n,r,l=s(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),p(c(t=l.call(this,e)),"state",{containerWidth:0,legendContainerStyle:{overflowX:"auto"}}),p(c(t),"canShow",(function(e){return e.visibility||!t.props.showOnlyIfVisible})),p(c(t),"useLegendOptions",(function(){return!y(t.props.node.legendOptions)&&b(t.props.node.legendOptions.legendHeight)&&b(t.props.node.legendOptions.legendWidth)})),p(c(t),"setOverflow",(function(){return t.useLegendOptions()&&t.props.node.legendOptions.legendWidth>t.state.containerWidth})),t.containerRef=d.createRef(),t}return t=u,(n=[{key:"componentDidMount",value:function(){var e=this.containerRef.current&&this.containerRef.current.clientWidth;this.setState(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({containerWidth:e},this.state))}},{key:"render",value:function(){var e=this.props.node||{},t=this.canShow(e)&&"wms"===e.type&&"background"!==e.group,n=t&&this.useLegendOptions();return t?d.createElement("div",{style:this.setOverflow()?this.state.legendContainerStyle:this.props.legendContainerStyle,ref:this.containerRef},d.createElement(g,{style:this.setOverflow()?{}:this.props.legendStyle,layer:e,currentZoomLvl:this.props.currentZoomLvl,scales:this.props.scales,legendHeight:n&&this.props.node.legendOptions&&this.props.node.legendOptions.legendHeight||this.props.legendHeight||void 0,legendWidth:n&&this.props.node.legendOptions&&this.props.node.legendOptions.legendWidth||this.props.legendWidth||void 0,legendOptions:this.props.WMSLegendOptions,scaleDependent:this.props.scaleDependent,language:this.props.language})):null}}])&&i(t.prototype,n),r&&i(t,r),u}(d.Component);p(h,"propTypes",{node:f.object,legendContainerStyle:f.object,legendStyle:f.object,showOnlyIfVisible:f.bool,currentZoomLvl:f.number,scales:f.array,WMSLegendOptions:f.string,scaleDependent:f.bool,language:f.string,legendWidth:f.number,legendHeight:f.number}),p(h,"defaultProps",{legendContainerStyle:{},showOnlyIfVisible:!1,scaleDependent:!0}),e.exports=h},"./MapStore2/web/client/components/TOC/fragments/css/groupchildren.css":function(e,t,n){var r=n("./node_modules/css-loader/index.js!./node_modules/postcss-loader/src/index.js?!./MapStore2/web/client/components/TOC/fragments/css/groupchildren.css");"string"==typeof r&&(r=[[e.i,r,""]]);n("./node_modules/style-loader/addStyles.js")(r,{});r.locals&&(e.exports=r.locals)},"./MapStore2/web/client/components/TOC/fragments/css/settingsModal.css":function(e,t,n){var r=n("./node_modules/css-loader/index.js!./node_modules/postcss-loader/src/index.js?!./MapStore2/web/client/components/TOC/fragments/css/settingsModal.css");"string"==typeof r&&(r=[[e.i,r,""]]);n("./node_modules/style-loader/addStyles.js")(r,{});r.locals&&(e.exports=r.locals)},"./MapStore2/web/client/components/TOC/fragments/css/toctitle.css":function(e,t,n){var r=n("./node_modules/css-loader/index.js!./node_modules/postcss-loader/src/index.js?!./MapStore2/web/client/components/TOC/fragments/css/toctitle.css");"string"==typeof r&&(r=[[e.i,r,""]]);n("./node_modules/style-loader/addStyles.js")(r,{});r.locals&&(e.exports=r.locals)},"./MapStore2/web/client/components/TOC/fragments/legend/Legend.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=n("./node_modules/url/url.js"),f=n("./node_modules/prop-types/index.js"),m=n("./node_modules/react/index.js"),y=n("./node_modules/lodash/lodash.js").isArray,b=n("./MapStore2/web/client/components/I18N/Message.jsx"),g=n("./MapStore2/web/client/utils/SecurityUtils.js"),h=n("./node_modules/object-assign/index.js"),v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(u,e);var t,n,r,l=s(u);function u(){var e;o(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return p(c(e=l.call.apply(l,[this].concat(n))),"state",{error:!1}),p(c(e),"onImgError",(function(){e.setState((function(){return{error:!0}}))})),p(c(e),"getUrl",(function(e,t){if(e.layer&&"wms"===e.layer.type&&e.layer.url){var n=e.layer,r=t||y(n.url)&&Math.floor(Math.random()*n.url.length),o=y(n.url)?n.url[r]:n.url.replace(/[?].*$/g,""),i=d.parse(o),a=g.clearNilValuesForParams(n.params),s=h({},{service:"WMS",request:"GetLegendGraphic",format:"image/png",height:e.legendHeight,width:e.legendWidth,layer:n.name,style:n.style||null,version:n.version||"1.3.0",SLD_VERSION:"1.1.0",LEGEND_OPTIONS:e.legendOptions},n.legendParams||{},e.language&&n.localizedLayerStyles?{LANGUAGE:e.language}:{},g.addAuthenticationToSLD(a||{},e.layer),a&&a.SLD_BODY?{SLD_BODY:a.SLD_BODY}:{},e.scales&&e.currentZoomLvl&&e.scaleDependent?{SCALE:Math.round(e.scales[e.currentZoomLvl])}:{});return g.addAuthenticationParameter(o,s),d.format({host:i.host,protocol:i.protocol,pathname:i.pathname,query:s})}return""})),p(c(e),"validateImg",(function(t){t.height<=1&&t.width<=2&&e.onImgError()})),e}return t=u,(n=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.state.error&&this.getUrl(e,0)!==this.getUrl(this.props,0)&&this.setState((function(){return{error:!1}}))}},{key:"render",value:function(){var e=this;return!this.state.error&&this.props.layer&&"wms"===this.props.layer.type&&this.props.layer.url?m.createElement("img",{onError:this.onImgError,onLoad:function(t){return e.validateImg(t.target)},src:this.getUrl(this.props),style:this.props.style}):m.createElement(b,{msgId:"layerProperties.legenderror"})}}])&&i(t.prototype,n),r&&i(t,r),u}(m.Component);p(v,"propTypes",{layer:f.object,legendHeight:f.number,legendWidth:f.number,legendOptions:f.string,style:f.object,currentZoomLvl:f.number,scales:f.array,scaleDependent:f.bool,language:f.string}),p(v,"defaultProps",{legendHeight:12,legendWidth:12,legendOptions:"forceLabels:on",style:{maxWidth:"100%"},scaleDependent:!0}),e.exports=v},"./MapStore2/web/client/components/TOC/fragments/settings/Display.jsx":function(e,t,n){var r,o;function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?d(e):t}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=n("./node_modules/react/index.js"),b=n("./node_modules/prop-types/index.js"),g=n("./node_modules/react-widgets/lib/index.js").DropdownList,h=n("./MapStore2/web/client/components/I18N/Message.jsx"),v=n("./node_modules/react-bootstrap/es/index.js"),S=v.Grid,w=v.Row,O=v.Col,j=v.FormGroup,E=v.ControlLabel,x=v.FormControl,P=v.Checkbox,C=n("./node_modules/lodash/lodash.js"),T=C.clamp,M=C.isNil,_=C.isNumber,A=n("./MapStore2/web/client/components/TOC/fragments/legend/Legend.jsx"),R=n("./MapStore2/web/client/components/widgets/widget/InfoPopover.jsx");n("./node_modules/react-widgets/lib/less/react-widgets.less"),e.exports=(o=r=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(i,e);var t,n,r,o=u(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),m(d(t=o.call(this,e)),"state",{opacity:100,legendOptions:{legendWidth:12,legendHeight:12},containerStyle:{overflowX:"auto"},containerWidth:0}),m(d(t),"updateState",(function(e){e.settings&&e.settings.options&&t.setState(s(s({},t.state),{},{opacity:M(e.settings.options.opacity)?t.state.opacity:Math.round(100*e.settings.options.opacity),legendOptions:s(s({},t.state.legendOptions),{},{legendHeight:e.element.legendOptions&&!M(e.element.legendOptions.legendHeight)?e.element.legendOptions.legendHeight:t.state.legendOptions.legendHeight,legendWidth:e.element.legendOptions&&!M(e.element.legendOptions.legendWidth)?e.element.legendOptions.legendWidth:t.state.legendOptions.legendWidth}),containerWidth:t.containerRef.current&&t.containerRef.current.clientWidth}))})),m(d(t),"onChange",(function(e){var n=e.target.value,r=e.target.name;if("opacity"===r){var o=n&&T(Math.round(n),0,100);t.setState(s({opacity:o},t.state)),t.props.onChange("opacity",o&&o/100||0)}else{var i=n&&T(Math.round(n),0,1e3);t.setState(s(s({},t.state),{},{legendOptions:s(s({},t.state.legendOptions),{},m({},r,i))})),t.props.onChange({legendOptions:s(s({},t.state.legendOptions),{},m({},r,i))})}})),m(d(t),"onBlur",(function(e){var n=e.target.value&&Math.round(e.target.value),r=e.target.name;t.props.onChange({legendOptions:s(s({},t.state.legendOptions),{},m({},r,n>=12?n:""))})})),m(d(t),"getValidationState",(function(e){return t.state.legendOptions&&t.state.legendOptions[e]?parseInt(t.state.legendOptions[e],10)<12&&"error":null})),m(d(t),"setOverFlow",(function(){return t.state.legendOptions.legendWidth>t.state.containerWidth})),m(d(t),"useLegendOptions",(function(){return"error"!==t.getValidationState("legendWidth")&&"error"!==t.getValidationState("legendHeight")&&_(t.state.legendOptions.legendHeight)&&_(t.state.legendOptions.legendWidth)})),t.containerRef=y.createRef(),t}return t=i,(n=[{key:"componentDidMount",value:function(){this.updateState(this.props)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props!==e&&this.updateState(e)}},{key:"render",value:function(){var e=this;return y.createElement(S,{fluid:!0,className:"fluid-container "+(!this.props.containerWidth&&"adjust-display")},"wms"===this.props.element.type&&y.createElement(w,null,y.createElement(O,{xs:12},y.createElement(j,null,y.createElement(E,null,y.createElement(h,{msgId:"layerProperties.format"})),y.createElement(g,{key:"format-dropdown",data:this.props.formats||["image/png","image/png8","image/jpeg","image/vnd.jpeg-png","image/gif"],value:this.props.element&&this.props.element.format||"image/png",onChange:function(t){e.props.onChange("format",t)}})))),y.createElement(w,null,y.createElement(O,{xs:12},y.createElement(j,null,y.createElement(E,null,this.props.opacityText," %"),y.createElement(x,{type:"number",min:0,max:100,name:"opacity",value:this.state.opacity,onChange:this.onChange})))),"wms"===this.props.element.type&&y.createElement(w,null,y.createElement(O,{xs:12},y.createElement("hr",null),y.createElement(j,null,y.createElement(P,{key:"transparent",checked:this.props.element&&(void 0===this.props.element.transparent||this.props.element.transparent),onChange:function(t){e.props.onChange("transparent",t.target.checked)}},y.createElement(h,{msgId:"layerProperties.transparent"})),y.createElement(P,{value:"tiled",key:"tiled",disabled:!!this.props.element.singleTile,onChange:function(t){return e.props.onChange("tiled",t.target.checked)},checked:!this.props.element||void 0===this.props.element.tiled||this.props.element.tiled},y.createElement(h,{msgId:"layerProperties.cached"})),y.createElement(P,{key:"singleTile",value:"singleTile",checked:this.props.element&&void 0!==this.props.element.singleTile&&this.props.element.singleTile,onChange:function(t){return e.props.onChange("singleTile",t.target.checked)}},y.createElement(h,{msgId:"layerProperties.singleTile"})),this.props.isLocalizedLayerStylesEnabled&&y.createElement(P,{key:"localizedLayerStyles",value:"localizedLayerStyles","data-qa":"display-lacalized-layer-styles-option",checked:this.props.element&&void 0!==this.props.element.localizedLayerStyles&&this.props.element.localizedLayerStyles,onChange:function(t){return e.props.onChange("localizedLayerStyles",t.target.checked)}},y.createElement(h,{msgId:"layerProperties.enableLocalizedLayerStyles.label"}),"",y.createElement(R,{text:y.createElement(h,{msgId:"layerProperties.enableLocalizedLayerStyles.tooltip"})})))),y.createElement("div",{className:"legend-options"},y.createElement(O,{xs:12,className:"legend-label"},y.createElement("label",{key:"legend-options-title",className:"control-label"},y.createElement(h,{msgId:"layerProperties.legendOptions.title"}))),y.createElement(O,{xs:12,sm:6,className:"first-selectize"},y.createElement(j,{validationState:this.getValidationState("legendWidth")},y.createElement(E,null,y.createElement(h,{msgId:"layerProperties.legendOptions.legendWidth"})),y.createElement(x,{value:this.state.legendOptions.legendWidth,name:"legendWidth",type:"number",min:12,max:1e3,onChange:this.onChange,onKeyPress:function(e){return"-"===e.key&&e.preventDefault()},onBlur:this.onBlur}))),y.createElement(O,{xs:12,sm:6,className:"second-selectize"},y.createElement(j,{validationState:this.getValidationState("legendHeight")},y.createElement(E,null,y.createElement(h,{msgId:"layerProperties.legendOptions.legendHeight"})),y.createElement(x,{value:this.state.legendOptions.legendHeight,name:"legendHeight",type:"number",min:12,max:1e3,onChange:this.onChange,onKeyPress:function(e){return"-"===e.key&&e.preventDefault()},onBlur:this.onBlur}))),y.createElement(O,{xs:12,className:"legend-preview"},y.createElement(E,null,y.createElement(h,{msgId:"layerProperties.legendOptions.legendPreview"})),y.createElement("div",{style:this.setOverFlow()&&this.state.containerStyle||{},ref:this.containerRef},y.createElement(A,{style:this.setOverFlow()&&{}||void 0,layer:this.props.element,legendHeight:this.useLegendOptions()&&this.state.legendOptions.legendHeight||void 0,legendWidth:this.useLegendOptions()&&this.state.legendOptions.legendWidth||void 0,language:this.props.isLocalizedLayerStylesEnabled?this.props.currentLocaleLanguage:void 0}))))))}}])&&l(t.prototype,n),r&&l(t,r),i}(y.Component),m(r,"propTypes",{opacityText:b.node,element:b.object,formats:b.array,settings:b.object,onChange:b.func,isLocalizedLayerStylesEnabled:b.bool}),m(r,"defaultProps",{onChange:function(){},opacityText:y.createElement(h,{msgId:"opacity"})}),o)},"./MapStore2/web/client/components/TOC/fragments/settings/Elevation.jsx":function(e,t,n){var r,o;function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m(e);if(t){var o=m(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d(this,n)}}function d(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=n("./node_modules/react/index.js"),g=n("./node_modules/prop-types/index.js"),h=n("./node_modules/react-nouislider/dist/react-nouislider.common.js"),v=n("./MapStore2/web/client/components/TOC/fragments/settings/ElevationChart.jsx"),S=n("./node_modules/react-bootstrap/es/index.js").Grid,w=n("./MapStore2/web/client/components/I18N/Message.jsx"),O=n("./MapStore2/web/client/utils/LayersUtils.js");n("./node_modules/react-widgets/lib/less/react-widgets.less"),n("./MapStore2/web/client/components/TOC/fragments/settings/css/elevation.css"),e.exports=(o=r=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(i,e);var t,n,r,o=p(i);function i(){var e;l(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return y(f(e=o.call.apply(o,[this].concat(n))),"renderElevationsChart",(function(t){return e.props.showElevationChart?b.createElement(v,{elevations:t,chartStyle:s({height:200,width:e.props.containerWidth-30},e.props.chartStyle)}):null})),y(f(e),"renderElevationsSlider",(function(t){var n=t.values,r=n.length-1,o=r-0,i=parseFloat(n[0]),a=parseFloat(n[n.length-1]),s=e.props.element&&e.props.element.params&&e.props.element.params[t.name]||n[0];return b.createElement("div",{id:"mapstore-elevation"},b.createElement(h,{snap:!0,start:[parseFloat(s)]||!1,range:e.calculateRange(n,0,r,o,i,a),behaviour:"tap",pips:{mode:"range",stepped:!0,density:10,format:{to:function(e){return parseFloat(e).toFixed(1)}}},tooltips:!e.props.showElevationChart,onChange:function(n){e.props.onChange("params",Object.assign({},y({},t.name,n[0])))}}))})),y(f(e),"calculateRange",(function(e,t,n,r,o,i){var a=[],s="",l={min:o,max:i};return e.forEach((function(e,n){a[n]=(n-t)/r*100,s=a[n]+"%",l[s]=parseFloat(e)})),l})),e}return t=i,(n=[{key:"shouldComponentUpdate",value:function(e){return this.props.element.id!==e.element.id}},{key:"render",value:function(){var e=this.props.getDimension(this.props.element.dimensions,"elevation");return b.createElement(S,{fluid:!0,style:{paddingTop:15,paddingBottom:15}},b.createElement("label",{id:"mapstore-elevation-label",key:"elevation-label",className:"control-label",style:this.props.showElevationChart?{marginBottom:"10px"}:{marginBottom:"90px"}},this.props.elevationText,": (",e.units,")"),this.renderElevationsChart(e),b.createElement("div",null,b.createElement("div",{key:"elevation"},this.renderElevationsSlider(e))))}}])&&c(t.prototype,n),r&&c(t,r),i}(b.Component),y(r,"propTypes",{elevationText:g.node,element:g.object,getDimension:g.func,onChange:g.func,chartStyle:g.object,showElevationChart:g.bool,containerWidth:g.number}),y(r,"defaultProps",{onChange:function(){},showElevationChart:!0,containerWidth:500,elevationText:b.createElement(w,{msgId:"elevation"}),getDimension:O.getDimension}),o)},"./MapStore2/web/client/components/TOC/fragments/settings/ElevationChart.jsx":function(e,t,n){var r,o;function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=n("./node_modules/prop-types/index.js"),y=n("./node_modules/react/index.js"),b=n("./node_modules/recharts/es6/index.js"),g=b.LineChart,h=b.Line,v=b.XAxis,S=b.YAxis,w=b.CartesianGrid,O=b.Tooltip,j=n("./MapStore2/web/client/components/TOC/fragments/settings/ElevationChartTooltip.jsx");e.exports=(o=r=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(i,e);var t,n,r,o=c(i);function i(){var e;a(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return f(p(e=o.call.apply(o,[this].concat(n))),"renderLineChart",(function(){return y.createElement(g,{margin:e.props.chartStyle.margin,width:e.props.chartStyle.width,height:e.props.chartStyle.height,data:e.formatData(e.props.elevations.values)},y.createElement(v,{hide:!0,dataKey:"name"}),y.createElement(S,{hide:!0}),y.createElement(O,{content:y.createElement(j,null)}),y.createElement(w,{strokeDasharray:"3 3",horizontal:!1}),y.createElement(h,{isAnimationActive:e.props.animated,type:"monotone",dataKey:"value",stroke:"#82ca9d",activeDot:{r:8}}))})),f(p(e),"formatData",(function(t){var n=[];return t.map((function(e){n.push({name:this.props.elevations.name,value:parseFloat(this.props.elevations.positive?e:-e)})}),p(e)),n})),e}return t=i,(n=[{key:"render",value:function(){return y.createElement("div",null,this.renderLineChart())}}])&&s(t.prototype,n),r&&s(t,r),i}(y.Component),f(r,"propTypes",{elevations:m.object,chartStyle:m.object,animated:m.bool}),f(r,"defaultProps",{elevations:{},chartStyle:{margin:{top:5,right:5,left:5,bottom:45},width:600,height:200},animated:!1}),o)},"./MapStore2/web/client/components/TOC/fragments/settings/ElevationChartTooltip.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u,p,d,f=n("./node_modules/prop-types/index.js"),m=n("./node_modules/react/index.js"),y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(c,e);var t,n,r,l=s(c);function c(){return o(this,c),l.apply(this,arguments)}return t=c,(n=[{key:"render",value:function(){if(this.props.active){var e=this.props.payload;return m.createElement("div",{className:"custom-tooltip"},m.createElement("p",{className:"label"},Math.abs(e[0].value)))}return null}}])&&i(t.prototype,n),r&&i(t,r),c}(m.Component);u=y,p="propTypes",d={type:f.string,payload:f.array,label:f.string,active:f.bool},p in u?Object.defineProperty(u,p,{value:d,enumerable:!0,configurable:!0,writable:!0}):u[p]=d,e.exports=y},"./MapStore2/web/client/components/TOC/fragments/settings/FeatureInfo.jsx":function(e,t,n){var r,o;function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f(this,n)}}function f(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?m(e):t}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=n("./node_modules/react/index.js"),h=n("./node_modules/prop-types/index.js"),v=n("./MapStore2/web/client/components/misc/panels/Accordion.jsx"),S=n("./node_modules/react-bootstrap/es/index.js").Glyphicon,w=n("./MapStore2/web/client/components/I18N/Message.jsx");e.exports=(o=r=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(i,e);var t,n,r,o=d(i);function i(){var e;c(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return b(m(e=o.call.apply(o,[this].concat(n))),"getInfoFormat",(function(t){return Object.keys(t).map((function(t){var n=e.props.formatCards[t]&&e.props.formatCards[t].body;return{id:t,head:{preview:g.createElement(S,{glyph:e.props.formatCards[t]&&e.props.formatCards[t].glyph||"ext-empty"}),title:e.props.formatCards[t]&&e.props.formatCards[t].titleId&&g.createElement(w,{msgId:e.props.formatCards[t].titleId})||"",description:e.props.formatCards[t]&&e.props.formatCards[t].descId&&g.createElement(w,{msgId:e.props.formatCards[t].descId})||"",size:"sm"},body:n&&g.createElement(n,l({template:e.props.element.featureInfo&&e.props.element.featureInfo.template||""},e.props))||null}}))})),e}return t=i,(n=[{key:"render",value:function(){var e=this,t=this.getInfoFormat(this.props.defaultInfoFormat);return g.createElement("span",null,g.createElement(v,{fillContainer:!0,activePanel:this.props.element.featureInfo&&this.props.element.featureInfo.format,panels:t,onSelect:function(t){var n=e.props.element.featureInfo&&e.props.element.featureInfo.format&&t===e.props.element.featureInfo.format;e.props.onChange("featureInfo",s(s({},e.props.element&&e.props.element.featureInfo||{}),{},{format:n?"":t,viewer:e.props.element.featureInfo?e.props.element.featureInfo.viewer:void 0}))}}))}}])&&u(t.prototype,n),r&&u(t,r),i}(g.Component),b(r,"propTypes",{element:h.object,defaultInfoFormat:h.object,onChange:h.func,formatCards:h.object}),b(r,"defaultProps",{element:{},defaultInfoFormat:[],onChange:function(){},formatCards:{}}),o)},"./MapStore2/web/client/components/TOC/fragments/settings/FeatureInfoEditor.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=n("./node_modules/react/index.js"),y=n("./node_modules/prop-types/index.js"),b=n("./node_modules/react-quill/lib/index.js"),g=n("./MapStore2/web/client/components/misc/ResizableModal.jsx"),h=n("./MapStore2/web/client/components/misc/Portal.jsx"),v=n("./MapStore2/web/client/components/I18N/Message.jsx"),S=b.Quill,w=n("./MapStore2/web/client/components/misc/quillmodules/ResizeModule.js")(S),O=w.ResizeModule,j=w.IFrame,E=w.toolbarConfig;S.register({"formats/video":j,"modules/resizeModule":O});var x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(u,e);var t,n,r,o=c(u);function u(){var e;a(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return f(p(e=o.call.apply(o,[this].concat(n))),"state",{template:" "}),f(p(e),"close",(function(){e.props.onShowEditor(!e.props.showEditor),e.props.onChange("featureInfo",i(i({},e.props.element&&e.props.element.featureInfo||{}),{},{template:e.state.template}))})),e}return t=u,(n=[{key:"UNSAFE_componentWillMount",value:function(){this.setState({template:this.props.element&&this.props.element.featureInfo&&this.props.element.featureInfo.template||" "})}},{key:"render",value:function(){var e=this,t=this.props,n=t.showEditor,r=t.enableIFrameModule,o=void 0===r||r;return m.createElement(h,null,m.createElement(g,{fade:!0,show:n,title:m.createElement(v,{msgId:"layerProperties.editCustomFormat"}),size:"lg",showFullscreen:!0,clickOutEnabled:!1,onClose:function(){return e.close()},buttons:[{bsStyle:"primary",text:m.createElement(v,{msgId:"close"}),onClick:function(){return e.close()}}]},m.createElement("div",{id:"ms-template-editor",className:"ms-editor"},m.createElement(b,{bounds:"#ms-template-editor",ref:function(t){t&&(e.quill=t)},modules:o?{resizeModule:{},toolbar:E}:{},defaultValue:this.state.template,onChange:function(t){return e.setState({template:t})}}))))}}])&&s(t.prototype,n),r&&s(t,r),u}(m.Component);f(x,"propTypes",{showEditor:y.bool,element:y.object,onChange:y.func,onShowEditor:y.func,enableIFrameModule:y.bool}),f(x,"defaultProps",{showEditor:!1,element:{},enableIFrameModule:!1,onChange:function(){},onShowEditor:function(){}}),e.exports=x},"./MapStore2/web/client/components/TOC/fragments/settings/General.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=n("./node_modules/react/index.js"),y=n("./node_modules/prop-types/index.js"),b=n("./node_modules/react-spinkit/dist/index.js"),g=n("./node_modules/react-bootstrap/es/index.js"),h=g.FormControl,v=g.FormGroup,S=g.ControlLabel,w=g.InputGroup,O=g.Col,j=n("./MapStore2/web/client/components/I18N/Message.jsx"),E=n("./node_modules/react-selectize/src/index.js").SimpleSelect,x=n("./node_modules/lodash/lodash.js"),P=x.isString,C=x.isObject,T=x.find,M=n("./MapStore2/web/client/utils/LocaleUtils.js"),_=n("./node_modules/object-assign/index.js");n("./node_modules/react-selectize/themes/index.css");var A=n("./node_modules/react-bootstrap/es/index.js").Grid,R=n("./MapStore2/web/client/utils/TOCUtils.js"),I=R.createFromSearch,D=R.flattenGroups,k=n("./MapStore2/web/client/utils/TOCUtils.js"),L=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(d,e);var t,r,o,u=c(d);function d(){var e;a(this,d);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return f(p(e=u.call.apply(u,[this].concat(n))),"updateEntry",(function(t,n){return C(t)?e.props.onChange(t):e.props.onChange(t,n.target.value)})),f(p(e),"updateTranslation",(function(t,n){var r="default"===t&&P(e.props.element.title)?n.target.value:_({},C(e.props.element.title)?e.props.element.title:{default:e.props.element.title||""},f({},t,n.target.value));e.props.onChange("title",r)})),e}return t=d,(r=[{key:"render",value:function(){var e=this,t=M.getSupportedLocales(),r=C(this.props.element.title)?_({},this.props.element.title):{default:this.props.element.title},o=this.props.pluginCfg.hideTitleTranslations,a=void 0!==o&&o,s=[{value:"title",label:M.getMessageById(this.context.messages,"layerProperties.tooltip.title")},{value:"description",label:M.getMessageById(this.context.messages,"layerProperties.tooltip.description")},{value:"both",label:M.getMessageById(this.context.messages,"layerProperties.tooltip.both")},{value:"none",label:M.getMessageById(this.context.messages,"layerProperties.tooltip.none")}],l=[{value:"top",label:M.getMessageById(this.context.messages,"layerProperties.tooltip.top")},{value:"right",label:M.getMessageById(this.context.messages,"layerProperties.tooltip.right")},{value:"bottom",label:M.getMessageById(this.context.messages,"layerProperties.tooltip.bottom")}],c=this.props.groups&&D(this.props.groups);return m.createElement(A,{fluid:!0,style:{paddingTop:15,paddingBottom:15}},m.createElement("form",{ref:"settings"},m.createElement(v,null,m.createElement(S,null,m.createElement(j,{msgId:"layerProperties.title"})),m.createElement(h,{defaultValue:r.default||"",key:"title",type:"text",onBlur:this.updateTranslation.bind(null,"default")})),a||m.createElement(v,null,m.createElement(S,null,m.createElement(j,{msgId:"layerProperties.titleTranslations"})),Object.keys(t).map((function(o){var i;try{i=n("./MapStore2/web/client/components/I18N/images/flags sync recursive ^\\.\\/.*\\.png$")("./"+t[o].code+".png")}catch(e){i=!1}return i?m.createElement(w,{key:o},m.createElement(w.Addon,null,m.createElement("img",{src:i,alt:t[o].description})),m.createElement(h,{placeholder:t[o].description,defaultValue:r[t[o].code]||"",type:"text",onBlur:e.updateTranslation.bind(null,t[o].code)})):null}))),m.createElement(v,null,m.createElement(S,null,m.createElement(j,{msgId:"layerProperties.name"})),m.createElement(h,{defaultValue:this.props.element.name||"",key:"name",type:"text",disabled:!0,onBlur:this.updateEntry.bind(null,"name")})),m.createElement(v,null,m.createElement(S,null,m.createElement(j,{msgId:"layerProperties.description"})),this.props.element.capabilitiesLoading?m.createElement(b,{spinnerName:"circle"}):m.createElement(h,{defaultValue:this.props.element.description||"",key:"description",rows:"2",componentClass:"textarea",style:{resize:"vertical",minHeight:"33px"},onBlur:this.updateEntry.bind(null,"description")})),"layers"===this.props.nodeType?m.createElement("div",null,m.createElement("label",{key:"group-label",className:"control-label"},m.createElement(j,{msgId:"layerProperties.group"})),m.createElement(E,{key:"group-dropdown",options:(c||this.props.element&&this.props.element.group||[]).map((function(e){return C(e)?i(i({},e),{},{label:k.getLabelName(e.label,c)}):{label:k.getLabelName(e,c),value:e}})),defaultValue:{label:k.getLabelName(this.props.element&&this.props.element.group||"Default",c),value:this.props.element&&this.props.element.group||"Default"},placeholder:k.getLabelName(this.props.element&&this.props.element.group||"Default",c),onChange:function(t){e.updateEntry("group",{target:{value:t||"Default"}})},theme:"bootstrap3",createFromSearch:this.props.allowNew?I:void 0,hideResetButton:!this.props.allowNew,editable:this.props.allowNew,onValueChange:function(e){e&&e.newOption&&this.options.unshift({label:e.label,value:e.value}),this.onChange(e?e.value:null)}})):null,this.props.showTooltipOptions&&m.createElement("div",{style:{width:"100%"}},m.createElement(O,{xs:12,sm:8,className:"first-selectize"},m.createElement("br",null),m.createElement("label",{key:"tooltip-label",className:"control-label"},m.createElement(j,{msgId:"layerProperties.tooltip.label"})),m.createElement(E,{hideResetButton:!0,dropdownDirection:-1,key:"tooltips-dropdown",options:s,theme:"bootstrap3",value:T(s,(function(t){return t.value===(e.props.element.tooltipOptions||"title")})),onValueChange:function(t){e.updateEntry("tooltipOptions",{target:{value:t.value||"title"}})}})),m.createElement(O,{xs:12,sm:4,className:"second-selectize"},m.createElement("br",null),m.createElement("label",{key:"tooltip-placement-label",className:"control-label"},m.createElement(j,{msgId:"layerProperties.tooltip.labelPlacement"})),m.createElement(E,{hideResetButton:!0,dropdownDirection:-1,key:"tooltips-placement-dropdown",options:l,theme:"bootstrap3",value:T(l,(function(t){return t.value===(e.props.element.tooltipPlacement||"top")})),onValueChange:function(t){e.updateEntry("tooltipPlacement",{target:{value:t.value||"top"}})}})))))}}])&&s(t.prototype,r),o&&s(t,o),d}(m.Component);f(L,"propTypes",{onChange:y.func,element:y.object,settings:y.object,groups:y.array,nodeType:y.string,pluginCfg:y.object,showTooltipOptions:y.bool,allowNew:y.bool}),f(L,"contextTypes",{messages:y.object}),f(L,"defaultProps",{element:{},onChange:function(){},nodeType:"layers",showTooltipOptions:!0,pluginCfg:{},allowNew:!1}),e.exports=L},"./MapStore2/web/client/components/TOC/fragments/settings/WMSStyle.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=n("./node_modules/react/index.js"),f=n("./node_modules/prop-types/index.js"),m=n("./MapStore2/web/client/components/I18N/Message.jsx"),y=n("./node_modules/react-select/dist/react-select.es.js").default,b=n("./node_modules/react-bootstrap/es/index.js"),g=b.Button,h=b.Glyphicon,v=b.Alert,S=n("./node_modules/lodash/lodash.js").findIndex,w=n("./node_modules/react-bootstrap/es/index.js").Grid,O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(u,e);var t,n,r,l=s(u);function u(){var e;o(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return p(c(e=l.call.apply(l,[this].concat(n))),"renderLegend",(function(){return null})),p(c(e),"renderItemLabel",(function(e){return d.createElement("div",null,d.createElement("div",{key:"item-title"},e.title||e.name),d.createElement("div",null,d.createElement("small",{className:"text-muted",key:"item-key-description"},e.name)))})),p(c(e),"renderError",(function(){return e.props.element&&e.props.element.capabilities&&e.props.element&&e.props.element.capabilities.error?d.createElement(v,{bsStyle:"danger"},d.createElement(m,{msgId:"layerProperties.styleListLoadError"})):null})),p(c(e),"updateEntry",(function(t,n){var r=n.target.value;e.props.onChange(t,r)})),e}return t=u,(n=[{key:"render",value:function(){var e=this,t=[{label:"Default Style",value:""}].concat((this.props.element.availableStyles||[]).map((function(t){return{label:e.renderItemLabel(t),value:t.name}})));return(this.props.element.style&&this.props.element.availableStyles&&S(this.props.element.availableStyles,(function(t){return t.name===e.props.element.style})))>=0||!this.props.element.style||t.push({label:this.props.element.style,value:this.props.element.style}),d.createElement(w,{fluid:!0,style:{paddingTop:15,paddingBottom:15}},d.createElement("form",{ref:"style"},d.createElement(y.Creatable,{key:"styles-dropdown",options:t,isLoading:this.props.element&&this.props.element.capabilitiesLoading,value:this.props.element.style||"",onOpen:function(){!e.props.element||e.props.element.capabilities&&e.props.element.availableStyles||e.props.retrieveLayerData(e.props.element)},promptTextCreator:function(e){return d.createElement(m,{msgId:"layerProperties.styleCustom",msgParams:{value:e}})},onChange:function(t){e.updateEntry("style",{target:{value:t&&t.value||""}})}}),d.createElement("br",null),this.renderLegend(),this.renderError(),d.createElement(g,{bsStyle:"primary",style:{float:"right"},onClick:function(){return e.props.retrieveLayerData(e.props.element)}},d.createElement(h,{glyph:"refresh"}),"",d.createElement(m,{msgId:"layerProperties.stylesRefreshList"})),d.createElement("br",null)))}}])&&i(t.prototype,n),r&&i(t,r),u}(d.Component);p(O,"propTypes",{retrieveLayerData:f.func,onChange:f.func,element:f.object,groups:f.array}),p(O,"defaultProps",{element:{},retrieveLayerData:function(){},onChange:function(){}}),e.exports=O},"./MapStore2/web/client/components/TOC/fragments/settings/css/elevation.css":function(e,t,n){var r=n("./node_modules/css-loader/index.js!./node_modules/postcss-loader/src/index.js?!./MapStore2/web/client/components/TOC/fragments/settings/css/elevation.css");"string"==typeof r&&(r=[[e.i,r,""]]);n("./node_modules/style-loader/addStyles.js")(r,{});r.locals&&(e.exports=r.locals)},"./MapStore2/web/client/components/TOC/fragments/template/MetadataTemplate.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=n("./node_modules/react/index.js"),m=n("./node_modules/prop-types/index.js"),y=n("./node_modules/react-bootstrap/es/index.js"),b=y.Button,g=y.Glyphicon,h=n("./node_modules/lodash/lodash.js"),v=h.keys,S=h.isArray,w=h.isObject,O=h.isString,j=n("./MapStore2/web/client/components/I18N/Message.jsx"),E=n("./node_modules/react-bootstrap/es/index.js").Table,x=n("./MapStore2/web/client/utils/LocaleUtils.js"),P=n("./MapStore2/web/client/utils/URLUtils.js"),C=n("./MapStore2/web/client/utils/StringUtils.js"),T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(c,e);var t,n,r,o=l(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),d(u(t=o.call(this,e)),"renderMetadata",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=function(e,n){t.setState({collapsed:i(i({},t.state.collapsed),{},d({},e,n))})},a=function(e,n){return f.createElement("div",{style:{display:"flex",flexDirection:"row"}},e,f.createElement(b,{style:{margin:"4px 0 0 4px"},className:"square-button-md no-border",onClick:function(){return o(n,!t.state.collapsed[n])}},f.createElement(g,{glyph:t.state.collapsed[n]?"plus":"minus"})))},s=function(e,t){return"".concat(e,"@item_").concat(t)},l=v(e).filter((function(e){return"references"!==e})).map((function(n){var o,i,l=e[n],c="".concat(r,".").concat(n),u="toc.layerMetadata.".concat(n),p=x.getMessageById(t.context.messages,u)===u?f.createElement(j,{msgId:"toc.layerMetadata.defaultPropName",msgParams:{propName:n}}):f.createElement(j,{msgId:u}),d=function(e){return f.createElement("tr",null,f.createElement("td",null,p),f.createElement("td",null,e))};if(S(l))if(l.length){var m="toc.layerMetadata.itemTitles.".concat(n),y=x.getMessageById(t.context.messages,m),b=y===m?x.getMessageById(t.context.messages,"toc.layerMetadata.itemTitles.default"):y,g=l.map((function(e,n){var r=s(c,n);return w(e)?t.renderMetadata(e,l.length>1?a(f.createElement("h4",null,"".concat(b," #").concat(n+1)),r):null,r):f.createElement("li",{key:n},e)}));o=w(l[0])?(i=f.createElement("div",null,a(f.createElement("h4",null,p),c),t.state.collapsed[c]?null:f.createElement("div",null,g)),f.createElement("tr",null,f.createElement("td",{colSpan:"2"},i))):d(f.createElement("ul",null,g))}else o=null;else if(O(l)){var h=C.isValidEmail(l),v=P.isValidURL(l);o=d(h||v?f.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:v?l:"mailto:".concat(l)},l):l)}return o})).filter((function(e){return!!e}));return f.createElement("div",{style:r?{padding:"8px"}:{}},n,t.state.collapsed[r]?null:f.createElement(E,null,f.createElement("tbody",null,l)))})),t.state={collapsed:{}},t}return t=c,(n=[{key:"renderEmpty",value:function(){return f.createElement("div",null,f.createElement(j,{msgId:"toc.layerMetadata.emptyMetadata"}))}},{key:"render",value:function(){var e=this.props.model;return v(e).length?f.createElement("div",{style:{maxHeight:"400px",overflow:"auto"},id:e.identifier},this.renderMetadata(e)):this.renderEmpty()}}])&&a(t.prototype,n),r&&a(t,r),c}(f.Component);d(T,"propTypes",{model:m.object}),d(T,"contextTypes",{messages:m.object}),d(T,"defaultProps",{model:{}}),e.exports=T},"./MapStore2/web/client/components/TOC/fragments/template/index.js":function(module,exports,__webpack_require__){var Bootstrap=__webpack_require__("./node_modules/react-bootstrap/es/index.js"),Message=__webpack_require__("./MapStore2/web/client/components/I18N/Message.jsx"),React=__webpack_require__("./node_modules/react/index.js"),RenderTemplate=function RenderTemplate(comp,props){var model=props.model;return eval(comp)};module.exports=RenderTemplate},"./MapStore2/web/client/components/buttons/ConfirmButton.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=n("./node_modules/prop-types/index.js"),m=n("./node_modules/react/index.js"),y=n("./node_modules/classnames/index.js"),b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(p,e);var t,n,r,c=l(p);function p(){var e;i(this,p);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return d(u(e=c.call.apply(c,[this].concat(n))),"state",{is:"active"}),d(u(e),"onClick",(function(){return e.props.onClick?e.props.onClick.bind(u(e)):function(){}})),d(u(e),"onDisable",(function(){return e.props.onDisable?e.props.onDisable.bind(u(e)):function(){}})),d(u(e),"onConfirm",(function(){return e.props.onConfirm?e.props.onConfirm():e.props.confirming&&e.props.confirming.onClick?e.props.confirming.onClick():function(){}})),d(u(e),"isDisabled",(function(){return"disabled"===e.state.is})),d(u(e),"isConfirming",(function(){return"confirming"===e.state.is})),d(u(e),"isActive",(function(){return!e.isConfirming()&&!e.isDisabled()})),d(u(e),"handleClick",(function(){return e.isConfirming()&&e.props.disableAfterConfirmed?(e.onConfirm(),e.onDisable(),void e.setState({is:"disabled"})):e.isConfirming()?(e.onConfirm(),void e.setState({is:"active"})):(e.onClick(),void e.setState({is:"confirming"}))})),d(u(e),"handleBlur",(function(){e.setState({is:"active"})})),e}return t=p,(n=[{key:"render",value:function(){var e=this.props,t=e.children,n=e.buttonProps,r=e.confirming,i=e.disabled,a=this.props,s=a.text,l=a.style,c=a.className,u=void 0===c?"btn btn-sm btn-danger":c,p=this.isDisabled(),d=this.isConfirming();return p&&(s=i&&i.text||"Loading...",u=i&&i.className||"btn btn-sm btn-secondary",l=i&&i.style||{}),d&&(s=r&&r.text||"Confirm?",u=r&&r.className||"btn btn-sm btn-warning",l=r&&r.style||{}),m.createElement("button",o({className:y("confirm-button",u),style:l,onClick:this.handleClick,onBlur:this.handleBlur,disabled:p},n),t,t?" ":"",s)}}])&&a(t.prototype,n),r&&a(t,r),p}(m.Component);d(b,"propTypes",{disableAfterConfirmed:f.bool,resetOnBlur:f.bool,onConfirm:f.func,onDisable:f.func,onClick:f.func,text:f.oneOfType([f.string,f.node]),className:f.string,style:f.object,confirming:f.shape({text:f.oneOfType([f.string,f.node]),className:f.string,style:f.object,onClick:f.func}),disabled:f.shape({text:f.oneOfType([f.string,f.node]),className:f.string,style:f.object}),children:f.node,buttonProps:f.object}),d(b,"defaultProps",{resetOnBlur:!0}),e.exports=b},"./MapStore2/web/client/components/catalog/Catalog.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?d(e):t}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=n("./node_modules/lodash/lodash.js"),b=y.isNil,g=y.has,h=y.omit,v=n("./node_modules/object-assign/index.js"),S=n("./node_modules/prop-types/index.js"),w=n("./node_modules/react/index.js"),O=n("./node_modules/react-bootstrap/es/index.js"),j=O.FormControl,E=O.FormGroup,x=O.Alert,P=O.Pagination,C=O.Button,T=O.Panel,M=O.Form,_=O.InputGroup,A=O.ControlLabel,R=O.Glyphicon,I=n("./node_modules/react-select/dist/react-select.es.js").default,D=n("./MapStore2/web/client/components/layout/BorderLayout.jsx"),k=n("./MapStore2/web/client/utils/LocaleUtils.js"),L=n("./MapStore2/web/client/components/I18N/Message.jsx"),N=n("./MapStore2/web/client/components/catalog/RecordGrid.jsx"),F=n("./MapStore2/web/client/components/misc/Loader.jsx"),U=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(p,e);var t,n,r,i=u(p);function p(){var e;s(this,p);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return m(d(e=i.call.apply(i,[this].concat(n))),"state",{catalogURL:null}),m(d(e),"onSearchTextChange",(function(t){e.props.onChangeText(t.target.value)})),m(d(e),"onKeyDown",(function(t){13===t.keyCode&&e.search({services:e.props.services,selectedService:e.props.selectedService,searchText:e.props.searchText})})),m(d(e),"getServices",(function(){return(g(e.props.services,"default_map_backgrounds")?["default_map_backgrounds"]:[]).concat(Object.keys(h(e.props.services,"default_map_backgrounds"))).map((function(t){return v({},e.props.services[t],{label:k.getMessageById(e.context.messages,e.props.services[t].title),value:t})}))})),m(d(e),"renderResult",(function(){return e.props.result?0===e.props.result.numberOfRecordsMatched?w.createElement("div",null,w.createElement(L,{msgId:"catalog.noRecordsMatched"})):e.renderRecords():e.props.loadingError?e.renderError():null})),m(d(e),"renderError",(function(e){return w.createElement(x,{bsStyle:"danger"},w.createElement(L,{msgId:e||"catalog.error"}))})),m(d(e),"renderLoading",(function(){return w.createElement("div",{className:"catalog-results loading"},w.createElement(F,{size:176}))})),m(d(e),"renderPagination",(function(){if(e.props.result){var t=e.props.result.numberOfRecordsMatched,n=e.props.result.numberOfRecordsReturned,r=e.props.searchOptions.startPosition,o=e.props.pageSize,i=Math.floor(r/o),a=Math.ceil(t/o);return w.createElement("div",{className:"catalog-pagination"},w.createElement(P,{prev:!0,next:!0,first:!0,last:!0,ellipsis:!0,boundaryLinks:!0,bsSize:"small",items:a,maxButtons:5,activePage:i+1,onSelect:e.handlePage}),w.createElement("div",{className:"push-right"},w.createElement(L,{msgId:"catalog.pageInfo",msgParams:{start:r,end:r+n-1,total:t}})))}return null})),m(d(e),"renderRecords",(function(){var t="",n=!1,r=!1;if(e.props.services&&e.props.services[e.props.selectedService]){var i=e.props.services[e.props.selectedService];b(i.metadataTemplate)||b(i.showTemplate)||(n=i.showTemplate,t=i.metadataTemplate),b(i.hideThumbnail)||(r=i.hideThumbnail)}return w.createElement("div",{className:"catalog-results"},w.createElement(N,o({},e.props.gridOptions,{crs:e.props.crs,key:"records",hideThumbnail:r,records:e.props.records.map((function(e){return n&&t?a(a({},e),{},{metadataTemplate:t}):e})),clearModal:e.props.clearModal,layers:e.props.layers,modalParams:e.props.modalParams,onAddBackgroundProperties:e.props.onAddBackgroundProperties,source:e.props.source,authkeyParamNames:e.props.authkeyParamNames,catalogURL:e.isValidServiceSelected()&&e.props.services[e.props.selectedService].url||"",service:e.props.services[e.props.selectedService],catalogType:e.props.services[e.props.selectedService]&&e.props.services[e.props.selectedService].type,showTemplate:e.props.services[e.props.selectedService].showTemplate,onLayerAdd:e.props.onLayerAdd,onPropertiesChange:e.props.onPropertiesChange,zoomToLayer:e.props.zoomToLayer,onError:e.props.onError,showGetCapLinks:e.props.showGetCapLinks,addAuthentication:e.props.addAuthentication,currentLocale:e.props.currentLocale,recordItem:e.props.recordItem,hideIdentifier:e.props.hideIdentifier,hideExpand:e.props.hideExpand,onAddBackground:e.props.onAddBackground,defaultFormat:e.props.services[e.props.selectedService]&&e.props.services[e.props.selectedService].format,formatOptions:e.props.formatOptions,layerBaseConfig:e.props.layerBaseConfig,onAdd:function(){e.search({services:e.props.services,selectedService:e.props.selectedService})}})))})),m(d(e),"renderButtons",(function(){var t=[];return e.props.includeSearchButton&&t.push(w.createElement(C,{bsStyle:"primary",style:e.props.buttonStyle,onClick:function(){return e.search({services:e.props.services,selectedService:e.props.selectedService,searchText:e.props.searchText})},className:e.props.buttonClassName,key:"catalog_search_button",disabled:e.props.loading||!e.isValidServiceSelected()},w.createElement(L,{msgId:"catalog.search"}))),e.props.includeResetButton&&t.push(w.createElement(C,{style:e.props.buttonStyle,onClick:e.reset,key:"catalog_reset_button"},w.createElement(L,{msgId:"catalog.reset"}))),t})),m(d(e),"renderTextSearch",(function(){var t=w.createElement(j,{ref:"searchText",type:"text",style:{textOverflow:"ellipsis"},value:e.props.searchText,placeholder:k.getMessageById(e.context.messages,"catalog.textSearchPlaceholder"),onChange:e.onSearchTextChange,onKeyDown:e.onKeyDown});return e.props.wrapOptions?w.createElement(T,{collapsible:!0,defaultExpanded:!1,header:k.getMessageById(e.context.messages,"catalog.options")},t):t})),m(d(e),"isValidServiceSelected",(function(){return void 0!==e.props.services[e.props.selectedService]})),m(d(e),"search",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.services,r=t.selectedService,o=t.start,i=void 0===o?1:o,a=t.searchText,s=void 0===a?"":a,l=n[r].url,c=n[r].type;e.props.onSearch({format:c,url:l,startPosition:i,maxRecords:e.props.pageSize,text:s||"",options:{service:e.props.services[r]}})})),m(d(e),"reset",(function(){e.props.onReset()})),m(d(e),"handlePage",(function(t){if(t){var n=(t-1)*e.props.pageSize+1;e.search({services:e.props.services,selectedService:e.props.selectedService,start:n,searchText:e.props.searchText})}})),e}return t=p,(n=[{key:"componentDidMount",value:function(){this.props.selectedService&&this.isValidServiceSelected()&&this.props.services[this.props.selectedService].autoload&&this.search({services:this.props.services,selectedService:this.props.selectedService,searchText:this.props.searchText})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e!==this.props&&(("view"===e.mode&&"edit"===this.props.mode||e.services!==this.props.services||e.selectedService!==this.props.selectedService)&&e.active&&this.props.active&&e.selectedService&&e.services[e.selectedService]&&e.services[e.selectedService].autoload&&this.search({services:e.services,selectedService:e.selectedService,searchText:e.searchText}),e.active&&!1===this.props.active&&e.selectedService&&e.services[e.selectedService]&&e.services[e.selectedService].autoload&&this.search({services:e.services,selectedService:e.selectedService,searchText:e.searchText}))}},{key:"render",value:function(){var e=this;return w.createElement(D,{key:"catalog-BorderLayout",bodyClassName:"ms2-border-layout-body catalog",header:w.createElement(M,null,w.createElement(E,{controlId:"labelService",key:"labelService"},w.createElement(A,null,w.createElement(L,{msgId:"catalog.service"}))),w.createElement(E,{controlId:"service",key:"service"},w.createElement(_,null,w.createElement(I,{clearValueText:k.getMessageById(this.context.messages,"catalog.clearValueText"),noResultsText:k.getMessageById(this.context.messages,"catalog.noResultsText"),clearable:!0,options:this.getServices(),value:this.props.selectedService,onChange:function(t){return e.props.onChangeSelectedService(t&&t.value?t.value:"")},placeholder:k.getMessageById(this.context.messages,"catalog.servicePlaceholder")}),this.isValidServiceSelected()&&"default_map_backgrounds"!==this.props.selectedService?w.createElement(_.Addon,{className:"btn",onClick:function(){return e.props.onChangeCatalogMode("edit",!1)}},w.createElement(R,{glyph:"pencil"})):null,w.createElement(_.Addon,{className:"btn",onClick:function(){return e.props.onChangeCatalogMode("edit",!0)}},w.createElement(R,{glyph:"plus"})))),w.createElement(E,{controlId:"searchText",key:"searchText"},this.renderTextSearch()),w.createElement(E,{controlId:"buttons",key:"buttons"},this.renderButtons(),this.props.layerError?this.renderError(this.props.layerError):null)),footer:this.renderPagination()},this.props.loading?this.renderLoading():this.renderResult())}}])&&l(t.prototype,n),r&&l(t,r),p}(w.Component);m(U,"propTypes",{active:S.bool,searchText:S.string,addAuthentication:S.bool,buttonClassName:S.string,buttonStyle:S.object,currentLocale:S.string,loading:S.bool,format:S.string,crs:S.string,gridOptions:S.object,includeSearchButton:S.bool,includeResetButton:S.bool,loadingError:S.object,layerError:S.string,mode:S.string,onChangeCatalogMode:S.func,onChangeText:S.func,onChangeFormat:S.func,onChangeSelectedService:S.func,onPropertiesChange:S.func,onError:S.func,onLayerAdd:S.func,onReset:S.func,onSearch:S.func,onAddBackground:S.func,pageSize:S.number,records:S.array,authkeyParamNames:S.array,recordItem:S.element,result:S.object,searchOptions:S.object,selectedService:S.string,services:S.object,showGetCapLinks:S.bool,wrapOptions:S.bool,zoomToLayer:S.bool,hideThumbnail:S.bool,hideIdentifier:S.bool,hideExpand:S.bool,source:S.string,onAddBackgroundProperties:S.func,modalParams:S.object,layers:S.array,clearModal:S.func,formatOptions:S.array,layerBaseConfig:S.object}),m(U,"contextTypes",{messages:S.object}),m(U,"defaultProps",{buttonClassName:"search-button",buttonStyle:{marginBottom:"10px",marginRight:"5px"},currentLocale:"en-US",format:"csw",includeSearchButton:!0,includeResetButton:!1,mode:"view",onChangeCatalogMode:function(){},onChangeFormat:function(){},onChangeText:function(){},onChangeSelectedService:function(){},onPropertiesChange:function(){},onError:function(){},onLayerAdd:function(){},onReset:function(){},onSearch:function(){},changeLayerProperties:function(){},pageSize:4,records:[],loading:!1,services:{},wrapOptions:!1,zoomToLayer:!0,formatOptions:[{label:"image/png",value:"image/png"},{label:"image/png8",value:"image/png8"},{label:"image/jpeg",value:"image/jpeg"},{label:"image/vnd.jpeg-png",value:"image/vnd.jpeg-png"},{label:"image/gif",value:"image/gif"}],layerBaseConfig:{},crs:"EPSG:3857"}),e.exports=U},"./MapStore2/web/client/components/catalog/CatalogForm.jsx":function(e,t,n){var r=n("./node_modules/react/index.js"),o=n("./node_modules/react-bootstrap/es/index.js"),i=o.Col,a=o.FormGroup,s=o.FormControl,l=o.Grid,c=o.Row,u=n("./MapStore2/web/client/components/I18N/Message.jsx"),p=n("./MapStore2/web/client/components/catalog/CatalogServiceSelector.jsx"),d=n("./MapStore2/web/client/components/misc/enhancers/localizedProps.js")("placeholder")(s);e.exports=function(e){var t=e.onSearchTextChange,n=void 0===t?function(){}:t,o=e.searchText,s=e.title,f=void 0===s?r.createElement(u,{msgId:"catalog.title"}):s,m=e.catalog,y=e.services,b=e.isValidServiceSelected,g=e.showCatalogSelector;return r.createElement(l,{className:"catalog-form",fluid:!0},r.createElement(c,null,r.createElement(i,{xs:12},r.createElement("h4",{className:"text-center"},f),g?r.createElement(a,null,r.createElement(p,{servieces:y,catalog:m,isValidServiceSelected:b})):null,r.createElement(a,{controlId:"catalog-form"},r.createElement(d,{type:"text",placeholder:"catalog.textSearchPlaceholder",value:o,onChange:function(e){return n(e.currentTarget.value)}})))))}},"./MapStore2/web/client/components/catalog/CatalogServiceEditor.jsx":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/react/index.js"),o=n.n(r),i=n("./node_modules/react-spinkit/dist/index.js"),a=n.n(i),s=n("./node_modules/react-bootstrap/es/index.js"),l=n("./MapStore2/web/client/components/layout/BorderLayout.jsx"),c=n.n(l),u=n("./MapStore2/web/client/components/I18N/Message.jsx"),p=n.n(u),d=n("./node_modules/lodash/lodash.js"),f=n("./node_modules/react-quill/lib/index.js"),m=n.n(f),y=n("./MapStore2/web/client/components/widgets/widget/InfoPopover.jsx"),b=n.n(y),g=function(e){var t=e.children,n=e.service,r=e.isLocalizedLayerStylesEnabled,i=e.onChangeMetadataTemplate,a=void 0===i?function(){}:i,l=e.onChangeServiceProperty,c=void 0===l?function(){}:l,u=e.onToggleTemplate,f=void 0===u?function(){}:u,y=e.onToggleThumbnail,g=void 0===y?function(){}:y;return o.a.createElement("div",null,o.a.createElement(s.FormGroup,{controlId:"autoload",key:"autoload"},o.a.createElement(s.Col,{xs:12},o.a.createElement(s.Checkbox,{value:"autoload",onChange:function(e){return c("autoload",e.target.checked)},checked:!Object(d.isNil)(n.autoload)&&n.autoload},o.a.createElement(p.a,{msgId:"catalog.autoload"})))),o.a.createElement(s.FormGroup,{controlId:"thumbnail",key:"thumbnail"},o.a.createElement(s.Col,{xs:12},o.a.createElement(s.Checkbox,{onChange:function(){return g()},checked:!!Object(d.isNil)(n.hideThumbnail)||!n.hideThumbnail},o.a.createElement(p.a,{msgId:"catalog.showPreview"})))),!(!r||Object(d.isNil)(n.type))&&"wms"===n.type&&o.a.createElement(s.FormGroup,{controlId:"localized-styles",key:"localized-styles"},o.a.createElement(s.Col,{xs:12},o.a.createElement(s.Checkbox,{"data-qa":"service-lacalized-layer-styles-option",onChange:function(e){return c("localizedLayerStyles",e.target.checked)},checked:!Object(d.isNil)(n.localizedLayerStyles)&&n.localizedLayerStyles},o.a.createElement(p.a,{msgId:"catalog.enableLocalizedLayerStyles.label"}),"",o.a.createElement(b.a,{text:o.a.createElement(p.a,{msgId:"catalog.enableLocalizedLayerStyles.tooltip"})})))),!Object(d.isNil)(n.type)&&"csw"===n.type&&o.a.createElement(s.FormGroup,{controlId:"metadata-template",key:"metadata-template",className:"metadata-template-editor"},o.a.createElement(s.Col,{xs:12},o.a.createElement(s.Checkbox,{onChange:function(){return f()},checked:n&&n.showTemplate},o.a.createElement(p.a,{msgId:"catalog.showTemplate"})),o.a.createElement("br",null)),n&&n.showTemplate&&o.a.createElement(s.Col,{xs:12},o.a.createElement("span",null,o.a.createElement("p",null,o.a.createElement(p.a,{msgId:"layerProperties.templateFormatInfoAlert2",msgParams:{attribute:"{ }"}}),""),o.a.createElement("pre",null,o.a.createElement(p.a,{msgId:"catalog.templateFormatDescriptionExample"})," ${ description }"))),o.a.createElement(s.Col,{xs:12},n&&n.showTemplate&&o.a.createElement(m.a,{modules:{toolbar:[[{size:["small",!1,"large","huge"]},"bold","italic","underline","blockquote"],[{list:"bullet"},{align:[]}],[{color:[]},{background:[]},"clean"],["link"]]},value:n.metadataTemplate||"",onChange:function(e){a(e&&"<p><br></p>"!==e?e:"")}}))),t)},h=n("./MapStore2/web/client/components/misc/switch/SwitchPanel.jsx"),v=n.n(h),S=n("./node_modules/react-codemirror2/index.js");n("./node_modules/codemirror/lib/codemirror.css"),n("./node_modules/codemirror/addon/lint/lint.js"),n("./node_modules/codemirror/addon/lint/json-lint.js"),n("./node_modules/codemirror/mode/javascript/javascript.js");function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var j=function(e){var t=e.onValid,n=e.onError,i=e.json,a=void 0===i?{}:i,s=w(Object(r.useState)(JSON.stringify(a,!0,2)),2),l=s[0],c=s[1],u=w(Object(r.useState)(),2),d=u[0],f=u[1];return Object(r.useEffect)((function(){try{var e=JSON.parse(l);f(),t(e)}catch(e){f(e),n(e)}}),[l]),o.a.createElement("div",{className:"code-editor"},o.a.createElement(S.Controlled,{value:l,onBeforeChange:function(e,t,n){c(n)},options:{theme:"lesser-dark",mode:"application/json",lineNumbers:!0,styleSelectedText:!0,indentUnit:2,tabSize:2}}),d&&o.a.createElement("div",{className:"error-area"},o.a.createElement("div",{className:"error-area-header"},o.a.createElement(p.a,{msgId:"contextCreator.configurePlugins.cfgParsingError.title"})),o.a.createElement("div",{className:"error-area-body"},o.a.createElement(p.a,{msgId:"contextCreator.configurePlugins.cfgParsingError.body",msgParams:{error:d.message}},(function(e){return o.a.createElement("pre",{className:"error-msg"},e)})))))},E=n("./MapStore2/web/client/components/I18N/HTML.jsx"),x=n.n(E),P={options:{}},C=function(e){var t=e.service,n=void 0===t?{}:t,r=e.setValid,i=void 0===r?function(){}:r,a=e.onToggleThumbnail,l=void 0===a?function(){}:a,c=e.onChangeServiceProperty,u=void 0===c?function(){}:c,f=n.options||n.variants?{options:n.options||{},variants:n.variants}:void 0;return o.a.createElement("div",null,o.a.createElement(s.FormGroup,{controlId:"autoload",key:"autoload"},o.a.createElement(s.Col,{xs:12},o.a.createElement(s.Checkbox,{key:"autoload",value:"autoload",onChange:function(e){return u("autoload",e.target.checked)},checked:!Object(d.isNil)(n.autoload)&&n.autoload},o.a.createElement(p.a,{msgId:"catalog.autoload"})),o.a.createElement(s.Checkbox,{key:"thumbnail",value:"thumbnail",onChange:function(){return l()},checked:!!Object(d.isNil)(n.hideThumbnail)||!n.hideThumbnail},o.a.createElement(p.a,{msgId:"catalog.showPreview"})),"tms"===n.provider?o.a.createElement(s.Checkbox,{key:"forceDefaultTileGrid",value:"forceDefaultTileGrid",onChange:function(e){return u("forceDefaultTileGrid",e.target.checked)},checked:!Object(d.isNil)(n.forceDefaultTileGrid)&&n.forceDefaultTileGrid},o.a.createElement(p.a,{msgId:"catalog.tms.forceDefaultTileGrid"}),"",o.a.createElement(b.a,{text:o.a.createElement(p.a,{msgId:"catalog.tms.forceDefaultTileGridDescription"})})):null),n.provider&&"custom"!==n.provider?null:o.a.createElement(s.Col,null,o.a.createElement(s.ControlLabel,null,o.a.createElement(p.a,{msgId:"catalog.tms.customTMSConfiguration"}),"",o.a.createElement(b.a,{text:o.a.createElement(x.a,{msgId:"catalog.tms.customTMSConfigurationHint"})})),o.a.createElement(j,{json:f||P,onValid:function(e){var t=e.options,r=e.variants;Object(d.isEqual)(t,n.options)||u("options",t),Object(d.isEqual)(r,n.variants)||u("variants",r),i(!0)},onError:function(){n.options&&u("options",void 0),n.variants&&u("variants",void 0),i(!1)}}))))},T=n("./node_modules/react-select/dist/react-select.es.js");function M(){return(M=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var A=function(e){var t=e.service,n=e.formatOptions,r=e.onChangeServiceFormat,i=void 0===r?function(){}:r,a=_(e,["service","formatOptions","onChangeServiceFormat"]);return o.a.createElement(g,M({service:t},a),o.a.createElement(s.FormGroup,{style:{display:"flex",alignItems:"center",paddingTop:15,borderTop:"1px solid #ddd"}},o.a.createElement(s.Col,{xs:6},o.a.createElement(s.ControlLabel,null,"Format")),o.a.createElement(s.Col,{xs:6},o.a.createElement(T.default,{value:t&&t.format,clearable:!0,options:n,onChange:function(e){return i(e&&e.value)}}))))};function R(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var I=function(e){var t=e.onToggleAdvancedSettings,n=void 0===t?function(){}:t,r=R(e,["onToggleAdvancedSettings"]),i=r.service,a=void 0===i?{}:i,s=function(e){switch(e){case"tms":return C;case"wfs":return g;case"wms":case"wmts":case"csw":return A;default:return g}}(a.type);return o.a.createElement(v.a,{useToolbar:!0,title:o.a.createElement(p.a,{msgId:"catalog.advancedSettings"}),expanded:!Object(d.isNil)(a.showAdvancedSettings)&&a.showAdvancedSettings,onSwitch:n},o.a.createElement(s,r))},D=n("./MapStore2/web/client/utils/ConfigUtils.js"),k=n("./MapStore2/web/client/components/misc/enhancers/localizedProps.js"),L=n.n(k),N=n("./MapStore2/web/client/utils/ConfigProvider.js");function F(e){return function(e){if(Array.isArray(e))return U(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return U(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return U(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var G=L()("placeholder")(s.FormControl),B="custom",z="tms",W=function(e){var t=e.service,n=void 0===t?{}:t,r=e.onChangeUrl,i=void 0===r?function(){}:r;return o.a.createElement(s.FormGroup,{controlId:"URL"},o.a.createElement(s.Col,{xs:12},o.a.createElement(s.ControlLabel,null,o.a.createElement(p.a,{msgId:"catalog.url"})),o.a.createElement(G,{type:"text",style:{textOverflow:"ellipsis"},placeholder:"catalog.urlPlaceholder",value:n&&n.url,onChange:function(e){return i(e.target.value)}})))},V=function(e){return e===z?"TMS 1.0.0":e},H=function(e){var t,n,r,i=e.serviceTypes,a=void 0===i?[]:i,l=e.onChangeServiceProperty,c=e.service,u=void 0===c?{}:c,f=e.onChangeUrl,m=void 0===f?function(){}:f,y=e.onChangeTitle,g=void 0===y?function(){}:y,h=Object(D.getConfigProp)("allowedProviders")||Object(d.get)(Object(d.find)(a||[],{name:"tms"}),"allowedProviders")||[],v=Object.keys(N.a).filter((function(e){return"ALL"===h||h.indexOf(e)>=0})),S=u===z?u:null==u||null===(t=u.provider)||void 0===t||null===(n=t.split)||void 0===n||null===(r=n.call(t,"."))||void 0===r?void 0:r[0],w=!S||S===B,O=S===z,j=O||w;return o.a.createElement(s.FormGroup,null,o.a.createElement(s.Col,{xs:12,sm:w?3:12,md:j?3:12},o.a.createElement(s.ControlLabel,null,o.a.createElement(p.a,{msgId:"catalog.tms.provider"})),o.a.createElement(G,{onChange:function(e){var t=e.target.value;l("provider","".concat(t)),t!==B&&t!==z?g(t):w||O||g("")},value:S,componentClass:"select"},[B,z].concat(F(v)).map((function(e){return{name:e,label:V(e)}})).map((function(e){return o.a.createElement("option",{value:e.name,key:e.name},e.label)})))),o.a.createElement(s.Col,{xs:12,sm:9,md:9},w?o.a.createElement(o.a.Fragment,null,o.a.createElement(s.ControlLabel,null,o.a.createElement(p.a,{msgId:"catalog.tms.urlTemplate"}),"",o.a.createElement(b.a,{text:o.a.createElement(x.a,{msgId:"catalog.tms.urlTemplateHint"})})),o.a.createElement(G,{type:"text",style:{textOverflow:"ellipsis"},placeholder:"example: https://{s}.myUrl.com/{variant}/{z}/{x}/{y}",value:u&&u.url,onChange:function(e){return m(e.target.value)}})):O?o.a.createElement(o.a.Fragment,null,o.a.createElement(s.ControlLabel,null,o.a.createElement(p.a,{msgId:"catalog.url"})),o.a.createElement(G,{type:"text",style:{textOverflow:"ellipsis"},placeholder:"catalog.urlPlaceholder",value:u&&u.url,onChange:function(e){return m(e.target.value)}})):null))},q=function(e){var t=e.service,n=void 0===t?{}:t,r=e.serviceTypes,i=e.onChangeTitle,a=e.onChangeUrl,l=e.onChangeServiceProperty,c=e.onChangeType,u="tms"===n.type?H:W;return o.a.createElement(s.Form,{horizontal:!0},o.a.createElement(s.FormGroup,{controlId:"title",key:"type-title-row"},o.a.createElement(s.Col,{key:"type",xs:12,sm:3,md:3},o.a.createElement(s.ControlLabel,null,o.a.createElement(p.a,{msgId:"catalog.type"})),o.a.createElement(G,{onChange:function(e){return c(e.target.value)},value:n&&n.type,componentClass:"select"},r.map((function(e){return o.a.createElement("option",{value:e.name,key:e.name},e.label)})))),o.a.createElement(s.Col,{key:"title",xs:12,sm:9,md:9},o.a.createElement(s.ControlLabel,null,o.a.createElement(p.a,{msgId:"catalog.serviceTitle"})),o.a.createElement(G,{type:"text",style:{textOverflow:"ellipsis"},placeholder:"catalog.serviceTitlePlaceholder",value:n&&n.title,onChange:function(e){return i(e.target.value)}}))),o.a.createElement(u,{key:"url-row",serviceTypes:r,service:n,onChangeUrl:a,onChangeTitle:i,onChangeServiceProperty:l}))};n("./node_modules/react-select/dist/react-select.css"),n("./node_modules/react-quill/dist/quill.snow.css");function Y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Q(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Q(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.default=function(e){var t=e.service,n=void 0===t?{title:"",type:"wms",url:"",format:"image/png"}:t,i=e.serviceTypes,l=void 0===i?[{name:"csw",label:"CSW"}]:i,u=e.onChangeTitle,d=void 0===u?function(){}:u,f=e.onChangeUrl,m=void 0===f?function(){}:f,y=e.onChangeType,b=void 0===y?function(){}:y,g=e.id,h=e.urlTooltip,v=e.formatOptions,S=e.buttonStyle,w=e.saving,O=e.onChangeServiceFormat,j=void 0===O?function(){}:O,E=e.onChangeMetadataTemplate,x=void 0===E?function(){}:E,P=e.onToggleAdvancedSettings,C=void 0===P?function(){}:P,T=e.onChangeServiceProperty,M=void 0===T?function(){}:T,_=e.onToggleTemplate,A=void 0===_?function(){}:_,R=e.onToggleThumbnail,D=void 0===R?function(){}:R,k=e.onAddService,L=void 0===k?function(){}:k,N=e.onDeleteService,F=void 0===N?function(){}:N,U=e.onChangeCatalogMode,G=void 0===U?function(){}:U,B=e.isLocalizedLayerStylesEnabled,z=Y(Object(r.useState)(!0),2),W=z[0],V=z[1];return o.a.createElement(c.a,{bodyClassName:"ms2-border-layout-body catalog",header:o.a.createElement(q,{setValid:V,service:n,serviceTypes:l,onChangeTitle:d,onChangeUrl:m,onChangeType:b,onChangeServiceProperty:M,urlTooltip:h})},o.a.createElement(s.Form,null,o.a.createElement(I,{setValid:V,id:g,service:n,formatOptions:v,buttonStyle:S,saving:w,onChangeServiceFormat:j,onChangeMetadataTemplate:x,onToggleAdvancedSettings:C,onChangeServiceProperty:M,onToggleTemplate:A,onToggleThumbnail:D,isLocalizedLayerStylesEnabled:B}),o.a.createElement(s.FormGroup,{controlId:"buttons",key:"buttons"},o.a.createElement(s.Col,{xs:12},o.a.createElement(s.Button,{style:S,disabled:w||!W,onClick:function(){return L()},key:"catalog_add_service_button"},w?o.a.createElement(a.a,{spinnerName:"circle",noFadeIn:!0,overrideSpinnerClassName:"spinner"}):null,o.a.createElement(p.a,{msgId:"save"})),n&&!n.isNew?o.a.createElement(s.Button,{style:S,onClick:function(){return F()},key:"catalog_delete_service_button"},o.a.createElement(p.a,{msgId:"catalog.delete"})):null,o.a.createElement(s.Button,{style:S,disabled:w,onClick:function(){return G("view")},key:"catalog_back_view_button"},o.a.createElement(p.a,{msgId:"cancel"}))))))}},"./MapStore2/web/client/components/catalog/CatalogServiceSelector.jsx":function(e,t,n){var r=n("./node_modules/react/index.js"),o=n("./node_modules/react-bootstrap/es/index.js"),i=o.InputGroup,a=o.Glyphicon,s=n("./MapStore2/web/client/components/misc/enhancers/localizedProps.js")(["placeholder","clearValueText","noResultsText"])(n("./node_modules/react-select/dist/react-select.es.js").default);e.exports=function(e){var t=e.isValidServiceSelected,n=e.services,o=e.selectedService,l=e.onChangeCatalogMode,c=void 0===l?function(){}:l,u=e.onChangeSelectedService,p=void 0===u?function(){}:u;return r.createElement(i,null,r.createElement(s,{clearValueText:"catalog.clearValueText",noResultsText:"catalog.noResultsText",clearable:!0,options:n,value:o,onChange:function(e){return p(e&&e.value?e.value:"")},placeholder:"catalog.servicePlaceholder"}),t?r.createElement(i.Addon,{className:"btn",onClick:function(){return c("edit",!1)}},r.createElement(a,{glyph:"pencil"})):null,r.createElement(i.Addon,{className:"btn",onClick:function(){return c("edit",!0)}},r.createElement(a,{glyph:"plus"})))}},"./MapStore2/web/client/components/catalog/CompactCatalog.jsx":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n("./node_modules/react/index.js"),s=n("./node_modules/recompose/es/Recompose.js"),l=s.compose,c=s.mapPropsStream,u=n("./node_modules/lodash/lodash.js").isNil,p=n("./MapStore2/web/client/components/I18N/Message.jsx"),d=n("./node_modules/rxjs/Rx.js"),f=n("./node_modules/lodash/lodash.js").isObject,m={csw:n("./MapStore2/web/client/api/CSW.js"),wms:n("./MapStore2/web/client/api/WMS.js"),wmts:n("./MapStore2/web/client/api/WMTS.js"),backgrounds:n("./MapStore2/web/client/api/mapBackground.js")},y=n("./MapStore2/web/client/components/layout/BorderLayout.jsx"),b=n("./MapStore2/web/client/components/misc/LoadingSpinner.jsx"),g=n("./MapStore2/web/client/components/misc/enhancers/infiniteScroll/withInfiniteScroll.js"),h=n("./MapStore2/web/client/components/misc/enhancers/loadingState.jsx"),v=n("./MapStore2/web/client/components/misc/enhancers/emptyState.jsx"),S=n("./MapStore2/web/client/components/misc/enhancers/emptyState.jsx"),w=n("./MapStore2/web/client/components/misc/enhancers/withControllableState.js"),O=n("./MapStore2/web/client/components/catalog/CatalogForm.jsx"),j=n("./MapStore2/web/client/utils/CatalogUtils.js").getCatalogRecords,E=n("./MapStore2/web/client/components/misc/FitIcon.jsx"),x=a.createElement(E,{glyph:"geoserver",padding:20}),P=l(h((function(e){var t=e.loading,n=e.items;return 0===(void 0===n?[]:n).length&&t})),S((function(e){var t=e.loading,n=e.error;return!t&&n}),{title:a.createElement(p,{msgId:"catalog.error"}),style:{transform:"translateY(50%)"}}),v((function(e){var t=e.loading,n=e.items;return 0===(void 0===n?[]:n).length&&!t}),{title:a.createElement(p,{msgId:"catalog.noRecordsMatched"}),style:{transform:"translateY(50%)"}}))(n("./MapStore2/web/client/components/misc/cardgrids/SideGrid.jsx")),C=function(e){var t=e.records,n=e.result,r=void 0===n?{}:n;return{items:(t||[]).map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{title:e.title&&f(e.title)&&e.title.default||e.title,caption:e.identifier,description:e.description,preview:e.thumbnail?a.createElement("img",{src:"thumbnail"}):x,record:e}})),total:r&&r.numberOfRecordsMatched}},T={querySelector:".ms2-border-layout-body",pageSize:10};e.exports=l(w("searchText","setSearchText",""),g({loadPage:function(e){var t=e.text,n=e.catalog,r=void 0===n?{}:n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return d.Observable.fromPromise(m[r.type].textSearch(r.url,10*o+("csw"===r.type?1:0),10,t)).map((function(e){return{result:e,records:j(r.type,e||[],{url:r&&r.url,service:r})}})).map(C)},scrollSpyOptions:T}),c((function(e){return e.merge(e.take(1).switchMap((function(t){var n=t.catalog,r=t.loadFirst,o=void 0===r?function(){}:r;return e.debounceTime(500).startWith({searchText:"",catalog:n}).distinctUntilKeyChanged("searchText").do((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.searchText,n=e.catalog;return o({text:t,catalog:n})})).ignoreElements()})))})))((function(e){var t=e.setSearchText,n=void 0===t?function(){}:t,r=e.selected,i=e.onRecordSelected,s=e.loading,l=e.searchText,c=e.items,d=void 0===c?[]:c,f=e.total,m=e.catalog,g=e.services,h=e.title,v=e.showCatalogSelector,S=e.error;return a.createElement(y,{className:"compat-catalog",header:a.createElement(O,{services:g||[m],showCatalogSelector:v,title:h,searchText:l,onSearchTextChange:n}),footer:a.createElement("div",{className:"catalog-footer"},a.createElement("span",null,s?a.createElement(b,null):null),u(f)?null:a.createElement("span",{className:"res-info"},a.createElement(p,{msgId:"catalog.pageInfoInfinite",msgParams:{loaded:d.length,total:f}})))},a.createElement(P,{items:d.map((function(e){return e===r||r&&e&&e.record&&r.identifier===e.record.identifier?o(o({},e),{},{selected:!0}):e})),loading:s,error:S,onItemClick:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.record;return i(t,m)}}))}))},"./MapStore2/web/client/components/catalog/RecordGrid.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=n("./node_modules/react/index.js"),m=n("./node_modules/prop-types/index.js"),y=n("./node_modules/react-bootstrap/es/index.js"),b=y.Grid,g=y.Row,h=y.Col,v=n("./MapStore2/web/client/components/catalog/RecordItem.jsx").default,S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(p,e);var t,n,r,c=l(p);function p(){var e;i(this,p);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return d(u(e=c.call.apply(c,[this].concat(n))),"renderRecordItem",(function(t){var n=e.props.recordItem||v;return f.createElement(h,o({},e.props.column,{key:t.identifier}),f.createElement(n,{crs:e.props.crs,clearModal:e.props.clearModal,layers:e.props.layers,modalParams:e.props.modalParams,onAddBackgroundProperties:e.props.onAddBackgroundProperties,onAddBackground:e.props.onAddBackground,source:e.props.source,onLayerAdd:e.props.onLayerAdd,onPropertiesChange:e.props.onPropertiesChange,zoomToLayer:e.props.zoomToLayer,hideThumbnail:e.props.hideThumbnail,hideIdentifier:e.props.hideIdentifier,hideExpand:e.props.hideExpand,onError:e.props.onError,catalogURL:e.props.catalogURL,catalogType:e.props.catalogType,service:e.props.service,showTemplate:e.props.showTemplate,record:t,authkeyParamNames:e.props.authkeyParamNames,style:{height:"215px",maxHeight:"215px"},showGetCapLinks:e.props.showGetCapLinks,addAuthentication:e.props.addAuthentication,currentLocale:e.props.currentLocale,defaultFormat:e.props.defaultFormat,formatOptions:e.props.formatOptions,layerBaseConfig:e.props.layerBaseConfig}))})),e}return t=p,(n=[{key:"render",value:function(){if(this.props.records){var e=this.props.records instanceof Array?this.props.records:[this.props.records];return f.createElement(b,{className:"record-grid",fluid:!0,style:this.props.style},f.createElement(g,null,e.map(this.renderRecordItem)))}return null}}])&&a(t.prototype,n),r&&a(t,r),p}(f.Component);d(S,"propTypes",{crs:m.string,recordItem:m.element,catalogURL:m.string,catalogType:m.string,zoomToLayer:m.bool,onLayerAdd:m.func,onPropertiesChange:m.func,onError:m.func,records:m.array,authkeyParamNames:m.array,style:m.object,showGetCapLinks:m.bool,addAuthentication:m.bool,column:m.object,currentLocale:m.string,hideThumbnail:m.bool,hideIdentifier:m.bool,hideExpand:m.bool,source:m.string,onAddBackgroundProperties:m.func,modalParams:m.object,layers:m.object,clearModal:m.func,onAddBackground:m.func,showTemplate:m.bool,service:m.object,defaultFormat:m.string,formatOptions:m.array,layerBaseConfig:m.object}),d(S,"defaultProps",{column:{xs:12},currentLocale:"en-US",onLayerAdd:function(){},onPropertiesChange:function(){},onError:function(){},records:[],zoomToLayer:!0,layerBaseConfig:{},crs:"EPSG:3857"}),e.exports=S},"./MapStore2/web/client/components/catalog/RecordItem.jsx":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/react/index.js"),o=n.n(r),i=n("./node_modules/prop-types/index.js"),a=n.n(i),s=n("./node_modules/lodash/lodash.js"),l=n("./node_modules/react-bootstrap/es/index.js"),c=n("./MapStore2/web/client/utils/CatalogUtils.js"),u=n("./MapStore2/web/client/utils/CoordinatesUtils.js"),p=n.n(u),d=n("./MapStore2/web/client/components/misc/HtmlRenderer.jsx"),f=n.n(d),m=n("./MapStore2/web/client/utils/TemplateUtils.js"),y=n("./MapStore2/web/client/utils/LocaleUtils.js"),b=n.n(y),g=n("./MapStore2/web/client/components/I18N/Message.jsx"),h=n.n(g),v=n("./MapStore2/web/client/components/catalog/SharingLinks.jsx"),S=n.n(v),w=n("./MapStore2/web/client/components/misc/cardgrids/SideCard.jsx"),O=n.n(w),j=n("./MapStore2/web/client/components/misc/toolbar/Toolbar.jsx"),E=n.n(j),x=n("./MapStore2/web/client/components/misc/enhancers/tooltip.jsx"),P=n.n(x),C=n("./MapStore2/web/client/components/misc/LoadingSpinner.jsx"),T=n.n(C),M=n("./node_modules/xml2js/lib/xml2js.js"),_=n.n(M),A=n("./MapStore2/web/client/libs/ajax.js"),R=n.n(A);function I(){return(I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function D(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function L(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var N=P()(l.Button),F=function(e){var t=e.record,n=e.service,i=e.children,a=e.addLayer,s=void 0===a?function(){}:a,l=L(e,["record","service","children","addLayer"]),u=D(Object(r.useState)(!1),2),p=u[0],d=u[1];return o.a.createElement(N,I({disabled:p},l,{onClick:function(){var e;d(!0),(e=t.tileMapUrl,R.a.get(e).then((function(e){return new Promise((function(t){_.a.parseString(e.data,{explicitArray:!1},(function(e,n){return t(n)}))}))}))).then((function(e){d(!1),s(Object(c.tmsToLayer)(t,e,n))}))}}),p?o.a.createElement(T.a,null):i)};function U(){return(U=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function G(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var B=P()(l.Button),z=function(e){var t=e.record,n=e.service,r=e.children,i=e.addLayer,a=void 0===i?function(){}:i,s=G(e,["record","service","children","addLayer"]);return o.a.createElement(B,U({},s,{onClick:function(){a(Object(c.tileProviderToLayer)(t,n))}}),r)},W=n("./MapStore2/web/client/components/catalog/img/default.jpg"),V=n.n(W),H=n("./MapStore2/web/client/plugins/background/DefaultThumbs.js"),q=n.n(H);function Y(e){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Q(e){return function(e){if(Array.isArray(e))return K(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return K(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return K(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function X(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach((function(t){ie(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function J(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ee(e,t){return(ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function te(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=oe(e);if(t){var o=oe(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ne(this,n)}}function ne(e,t){return!t||"object"!==Y(t)&&"function"!=typeof t?re(e):t}function re(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oe(e){return(oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ae=P()(l.Button),se=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ee(e,t)}(a,e);var t,n,r,i=te(a);function a(){var e;J(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ie(re(e=i.call.apply(i,[this].concat(n))),"state",{visibleExpand:!1}),ie(re(e),"getTitle",(function(t){return Object(s.isObject)(t)?t[e.props.currentLocale]||t.default:t||""})),ie(re(e),"renderThumb",(function(t,n){var r=t||V.a;return o.a.createElement(l.Image,{className:"preview",src:r,alt:n&&e.getTitle(n.title)})})),ie(re(e),"renderButtons",(function(t,n){if(!t||!t.references)return null;var r=Object(c.extractOGCServicesReferences)(t),i=r.wms,a=r.wmts,s=r.tms,u=r.wfs,p=Object(c.extractEsriReferences)(t).esri,d=t&&t.background,f=t&&"tileprovider"===t.type&&t.provider,m=[];if(d&&m.push(n?o.a.createElement(h.a,{msgId:"catalog.backgroundAlreadyAdded"}):o.a.createElement(ae,{tooltipId:"catalog.addToMap",className:"square-button-md",bsStyle:"primary",bsSize:e.props.buttonSize,onClick:function(){var t=X(X({},d),{},{id:d.name,visibility:!1});e.props.onLayerAdd(t,{background:d})},key:"addlayer"},o.a.createElement(l.Glyphicon,{glyph:"plus"}))),i||a){var y=i?"wms":"wmts";m.push(o.a.createElement(ae,{tooltipId:"catalog.addToMap",className:"square-button-md",bsStyle:"primary",bsSize:e.props.buttonSize,onClick:function(){var n=e.makeLayer(y,i||a,t.format&&[t.format]||t.formats);n&&e.addLayer(n,{record:t})},key:"add".concat(y,"layer")},o.a.createElement(l.Glyphicon,{glyph:"plus"})))}if(p&&m.push(o.a.createElement(ae,{tooltipId:"catalog.addToMap",className:"square-button-md",bsStyle:"primary",bsSize:e.props.buttonSize,onClick:function(){e.addLayer(Object(c.esriToLayer)(e.props.record,e.props.layerBaseConfig))},key:"addesrilayer"},o.a.createElement(l.Glyphicon,{glyph:"plus"}))),s&&m.push(o.a.createElement(F,{service:e.props.service,key:"addTmsLayer",tooltipId:"catalog.addToMap",className:"square-button-md",bsStyle:"primary",bsSize:e.props.buttonSize,addLayer:e.addLayer,record:e.props.record},o.a.createElement(l.Glyphicon,{glyph:"plus"}))),u&&m.push(o.a.createElement(ae,{tooltipId:"catalog.addToMap",key:"addWFSLayer",className:"square-button-md",bsStyle:"primary",bsSize:e.props.buttonSize,onClick:function(){e.addLayer(Object(c.wfsToLayer)(e.props.record,e.props.layerBaseConfig))}},o.a.createElement(l.Glyphicon,{glyph:"plus"}))),f&&m.push(o.a.createElement(z,{key:"addTileProviderLayer",service:e.props.service,tooltipId:"catalog.addToMap",className:"square-button-md",bsStyle:"primary",bsSize:e.props.buttonSize,addLayer:e.addLayer,record:e.props.record},o.a.createElement(l.Glyphicon,{glyph:"plus"}))),e.props.showGetCapLinks){var b=Object(c.getRecordLinks)(t);b.length>0&&m.push(o.a.createElement(S.a,{key:"sharing-links",popoverContainer:re(e),links:b,onCopy:e.props.onCopy,buttonSize:e.props.buttonSize,addAuthentication:e.props.addAuthentication}))}return m})),ie(re(e),"renderDescription",(function(t){if(!t)return null;var n=b.a.getMessageById(e.context.messages,"catalog.notAvailable");return e.state.fullText&&t.metadataTemplate?o.a.createElement("div",{className:"catalog-metadata ql-editor"},o.a.createElement(f.a,{html:Object(m.parseCustomTemplate)(t.metadataTemplate,t.metadata,(function(e){return"".concat(Object(s.trim)(e.substring(2,e.length-1))," ").concat(n)}))})):t.metadataTemplate?"":Object(s.isArray)(t.description)?t.description.join(", "):t.description})),ie(re(e),"isLinkCopied",(function(t){return e.state[t]})),ie(re(e),"setLinkCopiedStatus",(function(t,n){e.setState(ie({},t,n))})),ie(re(e),"getLayerFormat",(function(t){return 0===t.length||t.filter((function(t){return t===e.props.defaultFormat})).length>0?e.props.defaultFormat:t[0]})),ie(re(e),"makeLayer",(function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[e.props.defaultFormat],o=Object(c.buildSRSMap)(n.SRS);if(n.SRS.length>0&&!p.a.isAllowedSRS(e.props.crs,o))return e.props.onError("catalog.srs_not_allowed"),null;var i=e.props.service&&e.props.service.localizedLayerStyles;return Object(c.recordToLayer)(e.props.record,t,X({removeParams:e.props.authkeyParamNames},"wms"===t?{catalogURL:"csw"===e.props.catalogType&&e.props.catalogURL?e.props.catalogURL+"?request=GetRecordById&service=CSW&version=2.0.2&elementSetName=full&id="+e.props.record.identifier:null,format:e.getLayerFormat(r.filter((function(e){return 0===e.indexOf("image/")})))}:{format:e.getLayerFormat(r.filter((function(e){return 0===e.indexOf("image/")})))}),e.props.layerBaseConfig,i)})),ie(re(e),"addLayer",(function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.background;if("backgroundSelector"===e.props.source)r?(e.props.onLayerAdd(X(X({},t),{},{group:"background"}),{source:e.props.source}),e.props.onAddBackground(t.id)):e.props.onAddBackgroundProperties({editing:!1,layer:t},!0);else{var o=e.props.zoomToLayer;e.props.onLayerAdd(t,{zoomToLayer:o})}})),ie(re(e),"displayExpand",(function(){return(e.descriptionRuler?e.descriptionRuler.clientWidth:0)>(e.sideCardDesc?e.sideCardDesc.clientWidth:0)})),e}return t=a,(n=[{key:"componentDidMount",value:function(){var e=b.a.getMessageById(this.context.messages,"catalog.notAvailable"),t=this.props.record;this.setState({visibleExpand:!this.props.hideExpand&&(this.displayExpand()||!!(this.props.showTemplate&&t&&t.metadataTemplate&&Object(m.parseCustomTemplate)(t.metadataTemplate,t.metadata,(function(t){return"".concat(Object(s.trim)(t.substring(2,t.length-1))," ").concat(e)}))))})}},{key:"UNSAFE_componentWillMount",value:function(){document.addEventListener("click",this.handleClick,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.handleClick,!1)}},{key:"render",value:function(){var e=this,t=this.props.record,n=Object(c.extractOGCServicesReferences)(t),r=n.wms,i=n.wmts,a=n.tms,l=n.wfs,u=Object(c.extractEsriReferences)(t).esri,p=t&&"tileprovider"===t.type&&t.provider,d=t&&t.background,f=d&&Object(s.head)((this.props.layers||[]).filter((function(e){return e.id===d.name||e.type===d.type&&e.source===d.source&&e.name===d.name})));return t?o.a.createElement("div",null,o.a.createElement(O.a,{style:{transform:"none",opacity:f?.4:1},fullText:this.state.fullText,preview:!this.props.hideThumbnail&&this.renderThumb(t&&t.thumbnail||d&&q.a[d.source][d.name],t),title:t&&this.getTitle(t.title),description:o.a.createElement("span",null,o.a.createElement("div",{className:!0,ref:function(t){e.sideCardDesc=t}},this.renderDescription(t))),caption:o.a.createElement("div",null,!this.props.hideIdentifier&&o.a.createElement("div",{className:"identifier"},t&&t.identifier),o.a.createElement("div",null,!r&&!i&&!u&&!d&&!a&&!p&&!l&&o.a.createElement("small",{className:"text-danger"},o.a.createElement(h.a,{msgId:"catalog.missingReference"}))),!this.props.hideExpand&&o.a.createElement("div",{className:"ms-ruler",style:{visibility:"hidden",height:0,whiteSpace:"nowrap",position:"absolute"},ref:function(t){e.descriptionRuler=t}},this.renderDescription(t))),tools:o.a.createElement(E.a,{btnDefaultProps:{className:"square-button-md",bsStyle:"primary"},btnGroupProps:{style:{margin:10}},buttons:[].concat(Q((t&&this.renderButtons(t,f)||[]).map((function(e){return{Element:function(){return e}}}))),[{glyph:this.state.fullText?"chevron-down":"chevron-left",visible:this.state.visibleExpand,tooltipId:this.state.fullText?"collapse":"expand",onClick:function(){return e.setState({fullText:!e.state.fullText})}}])})})):null}}])&&$(t.prototype,n),r&&$(t,r),a}(o.a.Component);ie(se,"propTypes",{addAuthentication:a.a.bool,authkeyParamNames:a.a.array,buttonSize:a.a.string,catalogURL:a.a.string,catalogType:a.a.string,crs:a.a.string,currentLocale:a.a.string,hideThumbnail:a.a.bool,hideExpand:a.a.bool,hideIdentifier:a.a.bool,layerBaseConfig:a.a.object,onCopy:a.a.func,onError:a.a.func,onLayerAdd:a.a.func,record:a.a.object,showGetCapLinks:a.a.bool,zoomToLayer:a.a.bool,onPropertiesChange:a.a.func,onLayerChange:a.a.func,layers:a.a.array,onAdd:a.a.func,source:a.a.string,onAddBackgroundProperties:a.a.func,deletedId:a.a.string,clearModal:a.a.func,service:a.a.service,showTemplate:a.a.bool,defaultFormat:a.a.string,formatOptions:a.a.array}),ie(se,"defaultProps",{buttonSize:"small",crs:"EPSG:3857",currentLocale:"en-US",onAddBackgroundProperties:function(){},hideThumbnail:!1,hideIdentifier:!1,hideExpand:!1,layerBaseConfig:{},onCopy:function(){},onError:function(){},onLayerAdd:function(){},onPropertiesChange:function(){},onLayerChange:function(){},clearModal:function(){},style:{},showGetCapLinks:!1,zoomToLayer:!0,layers:[],onAdd:function(){},source:"metadataExplorer",showTemplate:!1,changeLayerProperties:function(){},defaultFormat:"image/png"}),ie(se,"contextTypes",{messages:a.a.object});t.default=se},"./MapStore2/web/client/components/catalog/SharingLink.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=n("./node_modules/prop-types/index.js"),f=n("./node_modules/react/index.js"),m=n("./MapStore2/web/client/components/I18N/Message.jsx"),y=n("./node_modules/react-bootstrap/es/index.js"),b=y.FormControl,g=y.FormGroup,h=y.Button,v=y.Glyphicon,S=y.Tooltip,w=n("./MapStore2/web/client/components/misc/OverlayTrigger.jsx"),O=n("./node_modules/react-copy-to-clipboard/lib/index.js"),j=n("./MapStore2/web/client/utils/SecurityUtils.js"),E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(u,e);var t,n,r,l=s(u);function u(){var e;o(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return p(c(e=l.call.apply(l,[this].concat(n))),"state",{showCopiedToolTip:!1}),e}return t=u,(n=[{key:"render",value:function(){var e=this;if(!this.props.url)return null;var t=this.props.addAuthentication?j.addAuthenticationToUrl(this.props.url):this.props.url,n=this.state.showCopiedToolTip?"catalog.copied":"catalog.copyToClipboard",r=f.createElement(S,{id:"tooltip"},f.createElement(m,{msgId:n})),o=f.createElement(O,{text:t,onCopy:this.props.onCopy},f.createElement(w,{placement:"right",overlay:r,onExited:function(){return e.setState({showCopiedToolTip:!1})}},f.createElement(h,{bsSize:this.props.bsSize,bsStyle:"primary",className:"link-button",onClick:function(){return e.setState({showCopiedToolTip:!0})}},f.createElement(v,{glyph:"paperclip"}),"",this.props.labelId&&f.createElement(m,{msgId:this.props.labelId}))));return f.createElement("div",{className:"link-sharing"},f.createElement(g,{bsSize:this.props.bsSize},f.createElement(b,{className:"link-input",type:"text",value:t,onChange:function(){}}),o))}}])&&i(t.prototype,n),r&&i(t,r),u}(f.Component);p(E,"propTypes",{url:d.string.isRequired,labelId:d.string,onCopy:d.func,bsSize:d.string,addAuthentication:d.bool}),p(E,"defaultProps",{onCopy:function(){},bsSize:"small",addAuthentication:!1}),e.exports=E},"./MapStore2/web/client/components/catalog/SharingLinks.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function i(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d,f,m,y=n("./node_modules/react/index.js"),b=n("./node_modules/prop-types/index.js"),g=n("./MapStore2/web/client/components/catalog/SharingLink.jsx"),h=n("./MapStore2/web/client/components/I18N/Message.jsx"),v=n("./node_modules/react-bootstrap/es/index.js"),S=v.Popover,w=v.Button,O=v.Glyphicon,j=n("./MapStore2/web/client/components/misc/OverlayTrigger.jsx"),E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(p,e);var t,n,r,u=c(p);function p(){return a(this,p),u.apply(this,arguments)}return t=p,(n=[{key:"render",value:function(){if(!this.props.links||0===this.props.links.length)return null;var e=this.props,t=e.links,n=e.buttonSize,r=i(e,["links","buttonSize"]),a=t.map((function(e,t){return y.createElement(g,o({key:t,url:e.url,labelId:e.labelId},r))})),s=y.createElement(S,{className:"links-popover",id:"links-popover"},y.createElement("h5",null,y.createElement(h,{msgId:"catalog.share"})),a);return y.createElement(j,{container:this.props.popoverContainer,positionLeft:150,placement:"top",trigger:"click",overlay:s},y.createElement(w,{bsSize:n,className:"square-button-md",bsStyle:"primary"},y.createElement(O,{glyph:"link"})))}}])&&s(t.prototype,n),r&&s(t,r),p}(y.Component);d=E,f="propTypes",m={links:b.array,onCopy:b.func,messages:b.object,locale:b.string,buttonSize:b.string,popoverContainer:b.object,addAuthentication:b.bool},f in d?Object.defineProperty(d,f,{value:m,enumerable:!0,configurable:!0,writable:!0}):d[f]=m,e.exports=E},"./MapStore2/web/client/components/catalog/img/default.jpg":function(e,t,n){e.exports=n.p+"MapStore2/web/client/components/catalog/img/default.jpg"},"./MapStore2/web/client/components/charts/Bar.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function s(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m(e);if(t){var o=m(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d(this,n)}}function d(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=n("./node_modules/lodash/lodash.js"),g=b.castArray,h=b.isNil,v=b.isEqual,S=n("./node_modules/prop-types/index.js"),w=n("./node_modules/react/index.js"),O=n("./node_modules/recharts/es6/index.js"),j=O.BarChart,E=O.Bar,x=n("./MapStore2/web/client/components/charts/cartesian.jsx").default,P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(d,e);var t,n,r,o=p(d);function d(){var e;l(this,d);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return y(f(e=o.call.apply(o,[this].concat(n))),"state",{marginLeft:0,marginBottom:0}),e}return t=d,(n=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){v(e.xAxisAngle,this.props.xAxisAngle)||this.setState({marginLeft:0,marginBottom:0})}},{key:"render",value:function(){var e=this,t=this.props,n=t.autoColorOptions,r=t.colorGenerator,o=t.data,l=(t.isAnimationActive,t.height),c=t.margin,u=t.series,p=t.width,d=s(t,["autoColorOptions","colorGenerator","data","isAnimationActive","height","margin","series","width"]),f=g(u),m=r(f.length),y=h(d.xAxisAngle)?[]:["angle".concat(d.xAxisAngle)],b=d.yAxisLabel?[d.yAxisLabel]:[],v=d.yAxis,S=(m||["linechart"]).concat(b,v,y).join(""),O=this.state.marginLeft,P=this.state.marginBottom;return w.createElement(j,{key:S,autoColorOptions:n,width:p,height:l,data:o,margin:d.xAxisAngle?{top:20,right:30,left:O,bottom:P+20}:c},f.map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(e.color,s(e,["color"])),n=arguments.length>1?arguments[1]:void 0;return w.createElement(E,a({key:"bar-".concat(n),name:d.yAxisLabel?d.yAxisLabel:null,fill:m[n]},t))})),x(i(i({},d),{},{onUpdateLabelLength:function(t){var n=t.marginLeft,r=t.marginBottom;e.setState((function(e){return{marginBottom:e.marginBottom<r?r:e.marginBottom,marginLeft:e.marginLeft<n?n:e.marginLeft}}))}})),d.children)}}])&&c(t.prototype,n),r&&c(t,r),d}(w.Component);y(P,"propTypes",{autoColorOptions:S.object,colorGenerator:S.func,data:S.array,isAnimationActive:S.bool,height:S.number,margin:S.object,series:S.array,xAxisAngle:S.number,width:S.number}),y(P,"defaultProps",{height:300,series:[],width:600}),e.exports=P},"./MapStore2/web/client/components/charts/Gauge.jsx":function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var l=n("./node_modules/react/index.js"),c=n("./node_modules/recharts/es6/index.js"),u=c.Sector,p=c.Cell,d=c.PieChart,f=c.Pie,m=c.Tooltip,y=n("./MapStore2/web/client/components/charts/polar.jsx").convertToNameValue,b=function(e){var t=e.customCellHeight,n=e.height,r=e.rows;return t||(n-20)/r},g=function(e){return e.width/e.cols},h=function(e){var t=e.data,n=e.cols;return Math.ceil(t.length/n)},v=function(e){var t=e.width,n=e.height,r=e.data,o=void 0===r?[]:r,i=e.customCellHeight,a=Math.floor(Math.sqrt(o.length));a=Math.min(a,o.length,20);var s=g({width:t,cols:a}),l=h({data:o,cols:a});return function(e){var t=e.cols,n=e.rows,r=e.cellWidth,o=e.cellHeight,i=e.height,a=e.width,s=e.data,l=void 0===s?[]:s;if(2*o<r){var c=Math.min(l.length,Math.ceil(l.length/(i/r*2)));return{cols:c,rows:h({data:l,cols:c}),cellWidth:g({width:a,cols:c}),cellHeight:b({height:i,rows:h({data:l,cols:c})})}}return{cols:t,rows:n,cellWidth:r,cellHeight:o}}({data:o,height:n,width:t,cols:a,rows:l,cellWidth:s,cellHeight:b({customCellHeight:i,height:n,rows:l})})};e.exports=function(e){var t=e.data,n=e.xAxis,s=void 0===n?{}:n,c=e.colorGenerator,b=e.series,g=void 0===b?[]:b,h=e.width,S=void 0===h?500:h,w=e.height,O=void 0===w?500:w,j=e.useActive,E=void 0!==j&&j,x=e.customCellHeight,P=e.tooltip,C=e.legend,T=e.maxValue,M=e.isAnimationActive,_=Array.isArray(g)?g:[g],A=v({width:S,height:O,data:t,customCellHeight:x}),R=A.cols,I=A.rows,D=A.cellWidth,k=A.cellHeight,L=t.map((function(e,t){return{cx:(t%R+.5)*D,cy:Math.floor(t/R)*k+5}})),N=_[0]||{},F=isNaN(T)?y({name:s&&s.dataKey||N.name,value:N.dataKey||N.value},t).reduce((function(e,t){return Math.max(t.value,e)}),Number.NEGATIVE_INFINITY):T,U=c(2),G=[{value:F,color:U[0]}];return l.createElement(d,{width:D*R,height:k*I+20},P?l.createElement(m,{content:function(e){var t=e.payload,n=e.label;return l.createElement("div",{style:{backgroundColor:"#FFF",padding:5,border:"1px solid #CCCCCC"}},"".concat(n||t&&t[0]&&t[0].name||""," : ").concat(t&&t[0]&&(t[0].realValue||t[0].value)))}}):null,y({name:s&&s.dataKey||N.name,value:N.dataKey||N.value},t).map((function(e,t){var n=S/R,s=e.value,c=G.map((function(e,t,n){var r=a(n).splice(0,t+1).reduce((function(e,t){return{value:e.value+t.value}})).value;return s>r-e.value&&s<=r})).findIndex((function(e){return e})),d=G.map((function(e){return e.value})).reduce((function(e,t){return e+t})),m=[{value:s,realValue:s,name:e.name},{value:0,realValue:s,name:e.name},{value:d-s,realValue:s,name:e.name}],y={startAngle:180,endAngle:0,cx:L[t]&&L[t].cx||0,cy:L[t]&&L[t].cy+k||0},b={innerRadius:n/2*.5,outerRadius:n/2*.9};return[l.createElement(f,r({key:"pie-".concat(t),isAnimationActive:M,activeIndex:c,activeShape:E?function(e){var t=e.cx,n=e.cy,r=e.innerRadius,o=e.outerRadius,i=e.startAngle,a=e.endAngle,s=e.fill;return l.createElement("g",null,l.createElement(u,{cx:t,cy:n,innerRadius:r,outerRadius:1.2*o,startAngle:i,endAngle:a,fill:s}))}:void 0,data:G.map((function(t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({realValue:s,name:e.name},t)})),fill:"#8884d8"},b,y),G.map((function(e,t){return l.createElement(p,{key:"cell-".concat(t),fill:G[t].color})}))),l.createElement(f,r({isAnimationActive:M,stroke:"none",activeIndex:1,activeShape:function(t){var r=t.cx,o=t.cy,i=t.midAngle,a=t.outerRadius,s=Math.PI/180,c=Math.sin(-s*i),u=Math.cos(-s*i),p=r+(a+.1*n)*u,d=o+(a+.1*n)*c;return l.createElement("g",{width:n},l.createElement("circle",{cx:r,cy:o,r:.05*n,fill:U[1],stroke:"none"}),l.createElement("path",{d:"M".concat(r,",").concat(o,"L").concat(p,",").concat(d),strokeWidth:.06*n,stroke:"#999999",strokeLinecap:"round"}),l.createElement("path",{d:"M".concat(r,",").concat(o,"L").concat(p,",").concat(d),strokeWidth:.05*n,stroke:U[1],fill:U[1],strokeLinecap:"round"}),C?l.createElement("text",{textAnchor:"middle",width:n,x:r,y:o-1.5*a},e.value.toFixed(2)):null,C?l.createElement("text",{style:{fill:"#000000",stroke:"#000000",fontSize:.1*n},textAnchor:"middle",width:n,x:r,y:o},e.name):null)},data:m,outerRadius:b.innerRadius,fill:"none"},y,{legend:!0}))]})))}},"./MapStore2/web/client/components/charts/Line.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function s(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m(e);if(t){var o=m(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d(this,n)}}function d(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=n("./node_modules/lodash/lodash.js"),g=b.castArray,h=b.isNil,v=b.isEqual,S=n("./node_modules/prop-types/index.js"),w=n("./node_modules/react/index.js"),O=n("./node_modules/recharts/es6/index.js"),j=O.LineChart,E=O.Line,x=n("./MapStore2/web/client/components/charts/cartesian.jsx").default,P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(d,e);var t,n,r,o=p(d);function d(){var e;l(this,d);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return y(f(e=o.call.apply(o,[this].concat(n))),"state",{marginLeft:0,marginBottom:0}),e}return t=d,(n=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){v(e.xAxisAngle,this.props.xAxisAngle)||this.setState({marginLeft:0,marginBottom:0})}},{key:"render",value:function(){var e=this,t=this.props,n=t.autoColorOptions,r=t.colorGenerator,o=t.data,l=t.isAnimationActive,c=t.height,u=t.margin,p=t.series,d=t.width,f=s(t,["autoColorOptions","colorGenerator","data","isAnimationActive","height","margin","series","width"]),m=g(p),y=r(m.length,n),b=f.yAxisLabel?[f.yAxisLabel]:[],v=f.yAxis,S=h(f.xAxisAngle)?[]:["angle".concat(f.xAxisAngle)],O=(y||["linechart"]).concat(b,v,S).join(""),P=this.state.marginLeft,C=this.state.marginBottom;return w.createElement(j,{key:O,width:d,height:c,data:o,margin:f.xAxisAngle?{top:20,right:30,left:P+5,bottom:C+20}:u},m.map((function(e,t){e.color;var n=s(e,["color"]);return w.createElement(E,a({key:"line-".concat(t),name:f.yAxisLabel?f.yAxisLabel:null,isAnimationActive:l,stroke:y[t]},n))})),x(i(i({},f),{},{onUpdateLabelLength:function(t){var n=t.marginLeft,r=t.marginBottom;e.setState((function(e){return{marginBottom:e.marginBottom<r?r:e.marginBottom,marginLeft:e.marginLeft<n?n:e.marginLeft}}))}})),f.children)}}])&&c(t.prototype,n),r&&c(t,r),d}(w.Component);y(P,"propTypes",{autoColorOptions:S.object,colorGenerator:S.func,data:S.array,isAnimationActive:S.bool,height:S.number,margin:S.object,series:S.array,xAxisAngle:S.number,width:S.number}),y(P,"defaultProps",{height:300,series:[],width:600}),e.exports=P},"./MapStore2/web/client/components/charts/Pie.jsx":function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function o(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var i=n("./node_modules/react/index.js"),a=n("./node_modules/recompose/es/Recompose.js").pure,s=n("./node_modules/recharts/es6/index.js"),l=s.PieChart,c=s.Pie,u=s.Cell,p=n("./MapStore2/web/client/components/charts/polar.jsx").convertToNameValue;e.exports=a((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isAnimationActive,n=e.width,a=void 0===n?600:n,s=e.height,d=void 0===s?300:s,f=e.data,m=e.series,y=void 0===m?[]:m,b=e.xAxis,g=e.colorGenerator,h=e.maxCols,v=void 0===h?3:h,S=o(e,["isAnimationActive","width","height","data","series","xAxis","colorGenerator","maxCols"]),w=Array.isArray(y)?y:[y],O=Math.min(v,w.length),j=g(f.length),E=a/O,x=d/Math.floor((w.length||1)/O),P=w.map((function(e,t){return{cx:(t%O+.5)*E,cy:(Math.floor(t/O)+.5)*x}})),C=f.map((function(e,t){return i.createElement(u,{key:"cell-".concat(t),fill:j[t]})}));return i.createElement(l,{width:a,height:d,data:f},w.map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return i.createElement(c,r({key:"pie-".concat(n),isAnimationActive:t},P[n],{data:p({name:b&&b.dataKey||e.name,value:e.dataKey||e.value},f)},e,{outerRadius:Math.min(E/2,x/2)}),C)})),S.children)}))},"./MapStore2/web/client/components/charts/SimpleChart.jsx":function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function o(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var i=n("./node_modules/react/index.js"),a=n("./node_modules/recharts/es6/index.js"),s=a.Tooltip,l=a.Legend,c=n("./MapStore2/web/client/utils/ColorUtils.js").sameToneRangeColors,u={line:n("./MapStore2/web/client/components/charts/Line.jsx"),pie:n("./MapStore2/web/client/components/charts/Pie.jsx"),bar:n("./MapStore2/web/client/components/charts/Bar.jsx"),gauge:n("./MapStore2/web/client/components/charts/Gauge.jsx")},p={base:190,range:0,s:.95,v:.63};e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,n=void 0===t?"line":t,a=e.tooltip,d=void 0===a?{}:a,f=e.legend,m=void 0===f?{}:f,y=e.autoColorOptions,b=void 0===y?p:y,g=e.colorGenerator,h=o(e,["type","tooltip","legend","autoColorOptions","colorGenerator"]),v=u[n],S=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b,n=t.base,r=t.range,i=o(t,["base","range"]);return(c(n,r,e+1,i)||[0]).slice(1)},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.active,n=e.payload;if(t){var r=n[0].name,o=n[0].percent;return i.createElement("div",{className:"custom-tooltip"},i.createElement("p",{className:"label"},"".concat(r," : ").concat(n[0].value),i.createElement("span",{className:"desc"},"(",(100*o).toFixed(0),"%)")))}return null};return i.createElement(v,r({margin:{top:5,right:30,left:20,bottom:5},colorGenerator:g||S,autoColorOptions:b},h,{legend:m,tooltip:d}),!1!==d?"pie"===n?i.createElement(s,{content:w}):i.createElement(s,d):null,!1!==m?i.createElement(l,r({},m,{wrapperStyle:{bottom:0}})):null)}},"./MapStore2/web/client/components/charts/cartesian.jsx":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/react/index.js"),o=n.n(r),i=n("./node_modules/recharts/es6/index.js"),a=n("./node_modules/prop-types/index.js"),s=n.n(a);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m(e);if(t){var o=m(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f(this,n)}}function f(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(a,e);var t,n,r,i=d(a);function a(){return c(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"componentDidMount",value:function(){if(this.label){var e=Math.floor(this.label.getClientRects()[0].width*Math.cos(Math.PI/180*this.props.angle)),t=Math.ceil(this.label.getClientRects()[0].height*Math.sin(Math.PI/180*this.props.angle));this.props.onUpdateLabelLength({marginLeft:e,marginBottom:t})}}},{key:"render",value:function(){var e=this,t=this.props,n=t.x,r=t.y,i=t.payload,a=t.angle;return o.a.createElement("g",{transform:"translate(".concat(n-(a>=75?10:0),",").concat(r+5,")")},o.a.createElement("text",{ref:function(t){e.label=t},x:0,y:0,dy:16,textAnchor:"end",fill:"#666",transform:"rotate(-".concat(a,")")},i.value))}}])&&u(t.prototype,n),r&&u(t,r),a}(o.a.Component);y(b,"propTypes",{angle:s.a.number,onUpdateLabelLength:s.a.func,payload:s.a.object,x:s.a.number,y:s.a.number}),y(b,"defaultProps",{angle:0,payload:{}});var g=b,h=n("./MapStore2/web/client/utils/WidgetsUtils.js"),v=function(e){var t=e.x,n=void 0===t?0:t,r=e.y,i=void 0===r?0:r,a=e.threshold,s=e.payload,l=void 0===s?{}:s;return o.a.createElement("g",{transform:"translate(0,3)"},o.a.createElement("text",{style:{fill:"#666"},x:n-5,y:i,textAnchor:"end"},Object(h.shortenLabel)(l.value,a)))};function S(){return(S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.xAxis,n=e.yAxis,r=e.cartesian,a=e.xAxisAngle,s=void 0===a?0:a,l=e.shortenChartLabelThreshold,c=e.onUpdateLabelLength,u=void 0===c?function(){}:c;return[t&&!1!==t.show?o.a.createElement(i.XAxis,S({key:"xaxis"},t,{interval:s>0?0:void 0,tick:s>0?o.a.createElement(g,{angle:s,onUpdateLabelLength:u}):void 0})):null,n?o.a.createElement(i.YAxis,S({key:"yaxis",tick:o.a.createElement(v,{threshold:l}),domain:[0,"auto"]},n)):null,!1!==r?o.a.createElement(i.CartesianGrid,S({key:"cartesiangrid"},r)):null]}},"./MapStore2/web/client/components/charts/polar.jsx":function(e,t){e.exports={convertToNameValue:function(e){var t=e.name,n=e.value,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return r.map((function(e){return{name:e[t],value:e[n]}}))}}},"./MapStore2/web/client/components/data/featuregrid/AttributeSelector.jsx":function(e,t,n){var r=n("./node_modules/react/index.js"),o=n("./node_modules/react-bootstrap/es/index.js").Checkbox,i=n("./MapStore2/web/client/components/I18N/Message.jsx");e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.style,n=void 0===t?{}:t,a=e.titleMsg,s=void 0===a?"featuregrid.columns":a,l=e.onChange,c=void 0===l?function(){}:l,u=e.attributes,p=void 0===u?[]:u;return r.createElement("div",{className:"bg-body data-attribute-selector",style:n},r.createElement("h4",{className:"text-center"},r.createElement("strong",null,r.createElement(i,{msgId:s}))),r.createElement("div",null,p.map((function(e){return r.createElement(o,{key:e.attribute||e.name,checked:!e.hide,onChange:function(){return c(e.attribute,!e.hide)}},e.label||e.attribute)}))))}},"./MapStore2/web/client/components/data/featuregrid/AttributeTable.jsx":function(e,t,n){function r(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var i=n("./node_modules/react/index.js"),a=n("./node_modules/react-data-grid/index.js"),s=n("./MapStore2/web/client/components/I18N/Message.jsx");e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.style,n=void 0===t?{}:t,o=e.titleMsg,l=void 0===o?"featuregrid.columns":o,c=e.onChange,u=void 0===c?function(){}:c,p=e.attributes,d=void 0===p?[]:p;return i.createElement("div",{className:"bg-body data-attribute-selector",style:n},i.createElement("h4",{className:"text-center"},i.createElement("strong",null,i.createElement(s,{msgId:l}))),i.createElement(a,{rowKey:"id",columns:[{name:"",key:"attribute"}],rowGetter:function(e){return d[e]},rowsCount:d.length,rowSelection:{showCheckbox:!0,enableShiftSelect:!0,onRowsSelected:function(e){return u(e.map((function(e){return d[e.rowIdx].name})),!1)},onRowsDeselected:function(e){return u(e.map((function(e){return d[e.rowIdx].name})),!0)},selectBy:{indexes:d.reduce((function(e,t,n){return[].concat(r(e),r(t.hide?[]:[n]))}),[])}}}))}},"./MapStore2/web/client/components/data/featuregrid/EmptyRowsView.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u,p,d,f=n("./node_modules/react/index.js"),m=n("./node_modules/prop-types/index.js"),y=n("./MapStore2/web/client/components/I18N/Message.jsx"),b={width:"100%",height:"100%",textAlign:"center",verticalAlign:"center"},g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(c,e);var t,n,r,l=s(c);function c(){return o(this,c),l.apply(this,arguments)}return t=c,(n=[{key:"render",value:function(){return this.props.loading?f.createElement("div",{style:b},f.createElement(y,{msgId:"loading"})):f.createElement("div",{style:b},f.createElement(y,{msgId:"featuregrid.noFeaturesAvailable"}))}}])&&i(t.prototype,n),r&&i(t,r),c}(f.PureComponent);u=g,p="propTypes",d={loading:m.bool},p in u?Object.defineProperty(u,p,{value:d,enumerable:!0,configurable:!0,writable:!0}):u[p]=d,e.exports=g},"./MapStore2/web/client/components/data/featuregrid/FeatureGrid.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=n("./node_modules/react/index.js"),d=n("./node_modules/prop-types/index.js"),f=n("./MapStore2/web/client/components/misc/AdaptiveGrid.jsx"),m=n("./MapStore2/web/client/components/data/featuregrid/enhancers/editor.js").featuresToGrid,y=n("./MapStore2/web/client/components/data/featuregrid/renderers/RowRenderer.jsx"),b=n("./MapStore2/web/client/utils/FeatureGridUtils.js"),g=b.isValidValueForPropertyName,h=b.isProperty,v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(c,e);var t,n,r,l=s(c);function c(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),l.call(this,e)}return t=c,(n=[{key:"componentDidMount",value:function(){this.props.initPlugin({virtualScroll:this.props.virtualScroll,editingAllowedRoles:this.props.editingAllowedRoles,maxStoredPages:this.props.maxStoredPages})}},{key:"getChildContext",value:function(){var e=this;return{isModified:function(t,n){return e.props.changes.hasOwnProperty(t)&&e.props.changes[t].hasOwnProperty(n)},isProperty:function(t){return"geometry"===t||h(t,e.props.describeFeatureType)},isValid:function(t,n){return!e.props.describeFeatureType||g(t,n,e.props.describeFeatureType)}}}},{key:"render",value:function(){var e=this.props.gridComponent;return p.createElement(e,o({rowRenderer:y},this.props))}}])&&i(t.prototype,n),r&&i(t,r),c}(p.PureComponent);u(v,"propTypes",{autocompleteEnabled:d.bool,editingAllowedRoles:d.array,gridOpts:d.object,changes:d.object,selectBy:d.object,customEditorsOptions:d.object,features:d.array,showDragHandle:d.bool,gridComponent:d.func,describeFeatureType:d.object,columnSettings:d.object,gridOptions:d.object,actionOpts:d.object,initPlugin:d.func,tools:d.array,gridEvents:d.object,virtualScroll:d.bool,maxStoredPages:d.number}),u(v,"childContextTypes",{isModified:d.func,isValid:d.func,isProperty:d.func}),u(v,"defaultProps",{editingAllowedRoles:["ADMIN"],initPlugin:function(){},autocompleteEnabled:!1,gridComponent:f,changes:{},gridEvents:{},gridOpts:{},describeFeatureType:{},columnSettings:{},features:[],tools:[],showDragHandle:!1,virtualScroll:!1,maxStoredPages:5}),e.exports=m(v)},"./MapStore2/web/client/components/data/featuregrid/Footer.jsx":function(e,t,n){var r=n("./node_modules/react/index.js"),o=n("./MapStore2/web/client/components/I18N/Message.jsx"),i=n("./node_modules/react-bootstrap/es/index.js"),a=i.Button,s=i.Glyphicon,l=i.Grid,c=i.Row,u=i.Col,p=n("./node_modules/react-spinkit/dist/index.js"),d=n("./MapStore2/web/client/utils/FeatureGridUtils.js").toPage;e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loading:!1,onPageChange:function(){}},t=d(e),n=t.page,i=void 0===n?0:n,f=t.size,m=void 0===f?0:f,y=t.resultSize,b=void 0===y?0:y,g=t.maxPages,h=void 0===g?0:g,v=t.total,S=void 0===v?0:v;return r.createElement(l,{className:"bg-body data-grid-bottom-toolbar",fluid:!0,style:{width:"100%"}},r.createElement(c,{className:"featuregrid-toolbar-margin"},r.createElement(u,{md:3},r.createElement("span",null,r.createElement(o,{msgId:e.virtualScroll?"featuregrid.resultInfoVirtual":"featuregrid.resultInfo",msgParams:{start:i*m+1,end:i*m+b,total:S}}))),e.virtualScroll?null:r.createElement(u,{className:"text-center",md:6},r.createElement(a,{key:"first-page",onClick:function(){return e.onPageChange(0)},disabled:0===i,className:"no-border first-page"},r.createElement(s,{glyph:"step-backward"})),r.createElement(a,{key:"prev-page",onClick:function(){return e.onPageChange(i-1)},disabled:0===i,className:"no-border prev-page"},r.createElement(s,{glyph:"chevron-left"})),r.createElement("span",{key:"page-info"},r.createElement(o,{msgId:"featuregrid.pageInfo",msgParams:{page:i+1,totalPages:h+1}})),r.createElement(a,{key:"next-page",onClick:function(){return e.onPageChange(i+1)},className:"no-border next-page",disabled:i>=h},r.createElement(s,{glyph:"chevron-right"})),r.createElement(a,{key:"last-page",onClick:function(){return e.onPageChange(h)},className:"no-border last-page",disabled:i>=h},r.createElement(s,{glyph:"step-forward"})))," ",r.createElement(u,{md:3},e.loading?r.createElement("span",{style:{float:"right"}},r.createElement(o,{msgId:"loading"}),r.createElement(p,{spinnerName:"circle",style:{float:"right"},noFadeIn:!0})):null)))}},"./MapStore2/web/client/components/data/featuregrid/Header.jsx":function(e,t,n){var r=n("./node_modules/react/index.js"),o=n("./node_modules/react-bootstrap/es/index.js"),i=o.Button,a=o.Grid,s=o.Row,l=o.Col,c=o.Glyphicon;e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{onDownloadToggle:function(){}};return r.createElement(a,{className:"bg-body data-grid-top-toolbar",fluid:!0,style:{width:"100%"}},r.createElement(s,{className:"flex-center"},r.createElement(l,{xs:4},e.children),r.createElement(l,{xs:4},r.createElement("div",{className:"text-center text-primary"},r.createElement("strong",null,e.title))),r.createElement(l,{xs:4},r.createElement(i,{onClick:e.onClose,style:{float:"right"},className:"square-button no-border featuregrid-top-toolbar-margin"},r.createElement(c,{glyph:"1-close"})))))}},"./MapStore2/web/client/components/data/featuregrid/dialog/ConfirmClear.jsx":function(e,t,n){var r=n("./node_modules/react/index.js"),o=n("./MapStore2/web/client/components/misc/ConfirmDialog.jsx"),i=n("./MapStore2/web/client/components/misc/Portal.jsx"),a=n("./MapStore2/web/client/components/I18N/Message.jsx");e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onClose,n=void 0===t?function(){}:t,s=e.saving,l=void 0!==s&&s,c=e.onConfirm,u=void 0===c?function(){}:c;return r.createElement(i,null,r.createElement(o,{draggable:!1,show:!0,onClose:n,onConfirm:u,confirmButtonBSStyle:"default",closeGlyph:"1-close",confirmButtonContent:r.createElement(a,{msgId:"featuregrid.yesButton"}),confirmButtonDisabled:l,closeText:r.createElement(a,{msgId:"featuregrid.noButton"})},r.createElement(a,{msgId:"featuregrid.clear"})))}},"./MapStore2/web/client/components/data/featuregrid/dialog/ConfirmDelete.jsx":function(e,t,n){var r=n("./node_modules/react/index.js"),o=n("./MapStore2/web/client/components/misc/ConfirmDialog.jsx"),i=n("./MapStore2/web/client/components/misc/Portal.jsx"),a=n("./MapStore2/web/client/components/I18N/Message.jsx");e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onClose,n=void 0===t?function(){}:t,s=e.saving,l=void 0!==s&&s,c=e.count,u=e.onConfirm,p=void 0===u?function(){}:u;return r.createElement(i,null,r.createElement(o,{show:!0,onClose:n,onConfirm:p,confirmButtonBSStyle:"default",closeGlyph:"1-close",confirmButtonContent:r.createElement(a,{msgId:"featuregrid.deleteButton"}),confirmButtonDisabled:l},r.createElement(a,{msgId:"featuregrid.delete",msgParams:{count:c}})))}},"./MapStore2/web/client/components/data/featuregrid/dialog/ConfirmFeatureClose.jsx":function(e,t,n){var r=n("./node_modules/react/index.js"),o=n("./MapStore2/web/client/components/misc/ConfirmDialog.jsx"),i=n("./MapStore2/web/client/components/misc/Portal.jsx"),a=n("./MapStore2/web/client/components/I18N/Message.jsx");e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onClose,n=void 0===t?function(){}:t,s=e.saving,l=void 0!==s&&s,c=e.onConfirm,u=void 0===c?function(){}:c;return r.createElement(i,null,r.createElement(o,{show:!0,onClose:n,onConfirm:u,confirmButtonBSStyle:"default",closeGlyph:"1-close",confirmButtonContent:r.createElement(a,{msgId:"featuregrid.yesButton"}),confirmButtonDisabled:l,closeText:r.createElement(a,{msgId:"featuregrid.noButton"})},r.createElement(a,{msgId:"featuregrid.featureClose"})))}},"./MapStore2/web/client/components/data/featuregrid/editors/AttributeEditor.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=n("./node_modules/prop-types/index.js"),d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(c,e);var t,n,r,l=s(c);function c(){return o(this,c),l.apply(this,arguments)}return t=c,(n=[{key:"componentDidMount",value:function(){var e,t;null===(e=(t=this.props).onTemporaryChanges)||void 0===e||e.call(t,!0)}},{key:"componentWillUnmount",value:function(){var e,t;null===(e=(t=this.props).onTemporaryChanges)||void 0===e||e.call(t,!1)}}])&&i(t.prototype,n),r&&i(t,r),c}(n("./node_modules/react-data-grid/index.js").editors.SimpleTextEditor);u(d,"propTypes",{onTemporaryChanges:p.func}),u(d,"defaultProps",{onTemporaryChanges:function(){}}),e.exports=d},"./MapStore2/web/client/components/data/featuregrid/editors/AutocompleteEditor.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t,n){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=n("./node_modules/react/index.js"),m=n("./node_modules/prop-types/index.js"),y=n("./MapStore2/web/client/components/data/featuregrid/editors/AttributeEditor.jsx"),b=n("./MapStore2/web/client/components/misc/AutocompleteCombobox.jsx").AutocompleteCombobox,g=n("./MapStore2/web/client/utils/ConfigUtils.js").getParsedUrl,h=n("./MapStore2/web/client/observables/autocomplete.js").createPagedUniqueAutompleteStream,v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(d,e);var t,n,r,l=s(d);function d(e){var t,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),(n=l.call(this,e)).validate=function(e){try{return n.props.isValid(e[n.props.column&&n.props.column.key])}catch(e){return!1}},n.getValue=function(){return u((t=c(n),p(d.prototype)),"getValue",t).call(t)},n}return t=d,(n=[{key:"render",value:function(){return f.createElement(b,o({},this.props,{url:g(this.props.url,{outputFormat:"json"}),filter:"contains",autocompleteStreamFactory:h}))}}])&&i(t.prototype,n),r&&i(t,r),d}(y);d(v,"propTypes",{column:m.object,dataType:m.string,inputProps:m.object,isValid:m.func,onBlur:m.func,autocompleteStreamFactory:m.func,url:m.string,typeName:m.string,value:m.string}),d(v,"defaultProps",{isValid:function(){return!0},dataType:"string"}),e.exports=v},"./MapStore2/web/client/components/data/featuregrid/editors/DropDownEditor.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t,n){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=n("./node_modules/react/index.js"),y=n("./node_modules/prop-types/index.js"),b=n("./MapStore2/web/client/components/data/featuregrid/editors/AttributeEditor.jsx"),g=n("./MapStore2/web/client/components/misc/combobox/ControlledCombobox.jsx"),h=n("./MapStore2/web/client/utils/FeatureGridEditorUtils.js").forceSelection,v=n("./node_modules/lodash/lodash.js").head,S=n("./node_modules/object-assign/index.js"),w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(y,e);var t,n,r,c=l(y);function y(e){var t,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,y),(n=c.call(this,e)).validate=function(e){try{return n.props.isValid(e[n.props.column&&n.props.column.key])}catch(e){return!1}},n.getValue=function(){var e=p((t=u(n),d(y.prototype)),"getValue",t).call(t);return n.props.forceSelection?f({},n.props.column.key,h({oldValue:n.props.defaultOption,changedValue:e[n.props.column&&n.props.column.key],data:n.props.values,allowEmpty:n.props.allowEmpty})):n.props.allowEmpty?e:f({},n.props.column.key,h({oldValue:n.props.defaultOption,changedValue:e[n.props.column&&n.props.column.key],data:n.props.values,allowEmpty:n.props.allowEmpty}))},n}return t=y,(n=[{key:"render",value:function(){var e=this.props.values.map((function(e){return{label:e,value:e}})),t=S({},function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},this.props),{data:e,defaultOption:this.props.defaultOption||v(this.props.values)});return m.createElement(g,o({},t,{filter:this.props.filter}))}}])&&a(t.prototype,n),r&&a(t,r),y}(b);f(w,"propTypes",{column:y.object,dataType:y.string,defaultOption:y.string,forceSelection:y.bool,allowEmpty:y.bool,inputProps:y.object,isValid:y.func,onBlur:y.func,typeName:y.string,url:y.string,value:y.string,filter:y.string,values:y.array}),f(w,"defaultProps",{isValid:function(){return!0},dataType:"string",filter:"contains",values:[],forceSelection:!0,allowEmpty:!0}),e.exports=w},"./MapStore2/web/client/components/data/featuregrid/editors/FormatEditor.jsx":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return b}));var r=n("./node_modules/react/index.js"),o=n.n(r),i=n("./node_modules/prop-types/index.js"),a=n.n(i);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m(e);if(t){var o=m(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d(this,n)}}function d(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(a,e);var t,n,r,i=p(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),y(f(t=i.call(this,e)),"state",{inputText:""}),y(f(t),"validateValue",(function(e){return!t.props.formatRegex||new RegExp(t.props.formatRegex).test(e)})),t.state={inputText:e.value},t.inputRef=o.a.createRef(),t}return t=a,(n=[{key:"componentDidMount",value:function(){var e,t;null===(e=(t=this.props).onTemporaryChanges)||void 0===e||e.call(t,!0)}},{key:"componentWillUnmount",value:function(){var e,t;null===(e=(t=this.props).onTemporaryChanges)||void 0===e||e.call(t,!1)}},{key:"getValue",value:function(){return y({},this.props.column.key,this.validateValue(this.state.inputText)?this.state.inputText:this.props.value)}},{key:"getInputNode",value:function(){return this.inputRef.current}},{key:"render",value:function(){var e=this;return o.a.createElement("input",l({},this.props.inputProps,{style:!this.state.validated||this.state.isValid?{}:{borderColor:"red"},value:this.state.inputText,ref:this.inputRef,className:"form-control",defaultValue:this.props.value,onChange:function(t){e.setState({inputText:t.target.value,isValid:e.validateValue(t.target.value),validated:!0})}}))}}])&&c(t.prototype,n),r&&c(t,r),a}(o.a.Component);y(b,"propTypes",{value:a.a.string,inputProps:a.a.object,dataType:a.a.string,column:a.a.object,formatRegex:a.a.string,onTemporaryChanges:a.a.func}),y(b,"defaultProps",{dataType:"string",column:{}})},"./MapStore2/web/client/components/data/featuregrid/editors/NumberEditor.jsx":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return h}));var r=n("./node_modules/react/index.js"),o=n.n(r),i=n("./node_modules/prop-types/index.js"),a=n.n(i),s=n("./node_modules/lodash/lodash.js");function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f(this,n)}}function f(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?m(e):t}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g={int:function(e){return parseInt(e,10)},number:function(e){return parseFloat(e,10)}},h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(a,e);var t,n,r,i=d(a);function a(e){var t,n,r,l;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),b(m(l=i.call(this,e)),"state",{inputText:""}),b(m(l),"validateTextValue",(function(e){if(!g[l.props.dataType])return!1;try{var t=g[l.props.dataType](e);return l.validateNumberValue(t)}catch(e){return!1}})),b(m(l),"validateNumberValue",(function(e){return Object(s.isNumber)(e)&&!isNaN(e)&&(!Object(s.isNumber)(l.props.minValue)||l.props.minValue<=e)&&(!Object(s.isNumber)(l.props.maxValue)||l.props.maxValue>=e)})),l.state={inputText:null!==(t=null===(n=e.value)||void 0===n||null===(r=n.toString)||void 0===r?void 0:r.call(n))&&void 0!==t?t:""},l.inputRef=o.a.createRef(),l}return t=a,(n=[{key:"componentDidMount",value:function(){var e,t;null===(e=(t=this.props).onTemporaryChanges)||void 0===e||e.call(t,!0)}},{key:"componentWillUnmount",value:function(){var e,t;null===(e=(t=this.props).onTemporaryChanges)||void 0===e||e.call(t,!1)}},{key:"getValue",value:function(){try{var e=g[this.props.dataType](this.state.inputText);return b({},this.props.column.key,this.validateNumberValue(e)?e:this.props.value)}catch(e){return b({},this.props.column.key,this.props.value)}}},{key:"getInputNode",value:function(){return this.inputRef.current}},{key:"render",value:function(){var e=this;return o.a.createElement("input",c({},this.props.inputProps,{style:!this.state.validated||this.state.isValid?{}:{borderColor:"red"},value:this.state.inputText,ref:this.inputRef,type:"number",min:this.props.minValue,max:this.props.maxValue,className:"form-control",defaultValue:this.props.value,onChange:function(t){e.setState({inputText:t.target.value,isValid:e.validateTextValue(t.target.value),validated:!0})}}))}}])&&u(t.prototype,n),r&&u(t,r),a}(o.a.Component);b(h,"propTypes",{value:a.a.oneOfType([a.a.string,a.a.number]),inputProps:a.a.object,dataType:a.a.string,minValue:a.a.number,maxValue:a.a.number,column:a.a.object,onTemporaryChanges:a.a.func}),b(h,"defaultProps",{dataType:"number",column:{}})},"./MapStore2/web/client/components/data/featuregrid/editors/customEditors.jsx":function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var o=n("./node_modules/react/index.js"),i=n("./MapStore2/web/client/components/data/featuregrid/editors/DropDownEditor.jsx"),a=n("./MapStore2/web/client/components/data/featuregrid/editors/NumberEditor.jsx").default,s=n("./MapStore2/web/client/components/data/featuregrid/editors/FormatEditor.jsx").default,l={DropDownEditor:{string:function(e){return o.createElement(i,r({dataType:"string"},e))}},NumberEditor:{int:function(e){return o.createElement(a,r({dataType:"int"},e))},number:function(e){return o.createElement(a,r({dataType:"number"},e))}},FormatEditor:{string:function(e){return o.createElement(s,r({dataType:"string"},e))}}};e.exports=l},"./MapStore2/web/client/components/data/featuregrid/editors/index.jsx":function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var o=n("./node_modules/react/index.js"),i=n("./MapStore2/web/client/components/data/featuregrid/editors/AttributeEditor.jsx"),a=n("./MapStore2/web/client/components/data/featuregrid/editors/NumberEditor.jsx").default,s=n("./MapStore2/web/client/components/data/featuregrid/editors/AutocompleteEditor.jsx"),l=n("./MapStore2/web/client/components/data/featuregrid/editors/DropDownEditor.jsx"),c={defaultEditor:function(e){return o.createElement(i,e)},int:function(e){return o.createElement(a,r({dataType:"int",inputProps:{step:1,type:"number"}},e))},number:function(e){return o.createElement(a,r({dataType:"number",inputProps:{step:1,type:"number"}},e))},string:function(e){return e.autocompleteEnabled?o.createElement(s,r({dataType:"string"},e)):o.createElement(i,r({dataType:"string"},e))},boolean:function(e){return o.createElement(l,r({dataType:"string"},e,{value:e.value&&e.value.toString(),filter:!1,values:["true","false"]}))}};e.exports=function(e,t){return c[e]?c[e](t):c.defaultEditor(t)}},"./MapStore2/web/client/components/data/featuregrid/enhancers/editor.js":function(e,t,n){function r(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function o(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=n("./MapStore2/web/client/utils/FeatureGridUtils.js"),u=c.featureTypeToGridColumns,p=c.getToolColumns,d=c.getRow,f=c.getRowVirtual,m=c.getGridEvents,y=c.applyAllChanges,b=c.createNewAndEditingFilter,g=n("./MapStore2/web/client/utils/featuregrid/EditorRegistry.jsx"),h=n("./node_modules/recompose/es/Recompose.js"),v=h.compose,S=h.withPropsOnChange,w=h.withHandlers,O=h.defaultProps,j=h.createEventHandler,E=n("./node_modules/lodash/lodash.js").isNil,x=n("./MapStore2/web/client/components/data/featuregrid/filterRenderers/index.js").getFilterRenderer,P=n("./MapStore2/web/client/components/data/featuregrid/formatters/index.js").getFormatter,C=n("./MapStore2/web/client/components/data/featuregrid/enhancers/filterRenderers.js").manageFilterRendererState,T=n("./MapStore2/web/client/components/misc/enhancers/propsStreamFactory.jsx"),M=n("./MapStore2/web/client/components/data/featuregrid/editors/index.jsx"),_=n("./MapStore2/web/client/utils/FeatureGridUtils.js").getRowIdx,A=v(O({sortable:!0,autocompleteEnabled:!1,initPlugin:function(){},url:"",typeName:"",enableColumnFilters:!1,columns:[],features:[],newFeatures:[],select:[],changes:{},focusOnEdit:!0,editors:M,dataStreamFactory:function(e){var t=j(),n=t.handler,r=t.stream;return function(e){return e.distinctUntilChanged((function(e,t){var n=e.features,r=e.pages,o=e.isFocused,i=t.features,a=t.pages,s=t.isFocused;return n===i&&o===s&&r===a})).switchMap((function(e){var t=e.size,n=e.pageEvents,r=e.isFocused,o=e.pages,i=e.pagination,a=e.vsOverScan,s=void 0===a?20:a,l=e.scrollDebounce,c=void 0===l?50:l;return e.onGridScroll$.debounceTime(c).filter((function(){return!r})).map((function(e){for(var n=e.firstRowIdx,r=e.lastRowIdx,a=n-s<0?0:n-s,l=r+s>i.totalFeatures-1?i.totalFeatures-1:r+s,c=Math.floor(a/t),u=Math.floor(l/t),p=!1,d=c;d<=u&&!p;d++)-1===_(d*t,o,t)&&(p=!0);return p&&{startPage:c,endPage:u}})).filter((function(e){return e})).do((function(e){return n.moreFeatures(e)}))}))}(e.filter((function(e){return e.virtualScroll})).map((function(e){return s(s({},e),{},{onGridScroll$:r})}))).startWith({}).map((function(e){return s(s({},e),{},{onGridScroll:n})}))},virtualScroll:!0}),S("showDragHandle",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.showDragHandle,n=void 0!==t&&t;return{className:n?"feature-grid-drag-handle-show":"feature-grid-drag-handle-hide"}})),S(["enableColumnFilters"],(function(e){return{displayFilters:e.enableColumnFilters}})),S(["editingAllowedRoles","virtualScroll"],(function(e){return{editingAllowedRoles:e.editingAllowedRoles,initPlugin:e.initPlugin}})),S(["autocompleteEnabled"],(function(e){return{autocompleteEnabled:e.autocompleteEnabled}})),S(["url"],(function(e){return{url:e.url}})),S(["typeName"],(function(e){return{typeName:e.typeName}})),S(["features","newFeatures","changes"],(function(e){return{rows:(e.newFeatures?[].concat(o(e.newFeatures),o(e.features)):e.features).filter(e.focusOnEdit?b(e.changes&&Object.keys(e.changes).length>0,e.newFeatures,e.changes):function(){return!0}).map((function(t){return y(t,e.changes)})).map((function(e){return s(s({},e),{},{get:function(t){return"id"===t||"geometry"===t||"_new"===t?e[t]:e.properties&&e.properties[t]}})}))}})),S(["newFeatures","changes","focusOnEdit"],(function(e){return{isFocused:e.focusOnEdit&&(e.changes&&Object.keys(e.changes).length>0||e.newFeatures&&e.newFeatures.length>0)}})),S(["features","newFeatures","isFocused","virtualScroll"],(function(e){return{rowsCount:(e.isFocused||!e.virtualScroll)&&e.rows&&e.rows.length||e.pagination&&e.pagination.totalFeatures||0}})),w({rowGetter:function(e){return e.virtualScroll&&function(t){return f(t,e.rows,e.pages,e.size)}||function(t){return d(t,e.rows)}}}),S(["describeFeatureType","columnSettings","tools","actionOpts","mode","isFocused","sortable"],(function(e){var t=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.localType,r=void 0===n?"":n,o=arguments.length>1?arguments[1]:void 0;return e.filterRenderers&&e.filterRenderers[o]?e.filterRenderers[o]:C(x(r))};return{columns:p(e.tools,e.rowGetter,e.describeFeatureType,e.actionOpts,t).concat(u(e.describeFeatureType,e.columnSettings,{editable:"EDIT"===e.mode,sortable:e.sortable&&!e.isFocused,defaultSize:e.defaultSize},{getEditor:function(t){var n={onTemporaryChanges:e.gridEvents&&e.gridEvents.onTemporaryChanges,autocompleteEnabled:e.autocompleteEnabled,url:e.url,typeName:e.typeName},r={attribute:t.name,url:e.url,typeName:e.typeName},o=e.customEditorsOptions&&e.customEditorsOptions.rules||[],i={type:t.localType,generalProps:n,props:e},a=g.getCustomEditor(r,o,i);return E(a)?e.editors(t.localType,n):a},getFilterRenderer:t,getFormatter:function(e){return P(e)}}))}})),S(["gridOpts","describeFeatureType","actionOpts","mode","select","columns"],(function(e){var t=m(e.gridEvents,e.rowGetter,e.describeFeatureType,e.actionOpts,e.columns),n=t.onRowsSelected,o=void 0===n?function(){}:n,i=t.onRowsDeselected,a=void 0===i?function(){}:i,l=t.onRowsToggled,c=void 0===l?function(){}:l,u=r(t,["onRowsSelected","onRowsDeselected","onRowsToggled"]),p=e.gridOpts;return p=s(s({},p),{},{enableCellSelect:"EDIT"===e.mode,rowSelection:{showCheckbox:"EDIT"===e.mode,selectBy:{keys:{rowKey:"id",values:e.select.map((function(e){return e.id}))}},onRowsSelected:o,onRowsDeselected:a}}),u.onRowClick=function(e,t){e>=0&&c([{rowIdx:e,row:t}])},s(s({},u),p)})),T);e.exports={featuresToGrid:A}},"./MapStore2/web/client/components/data/featuregrid/enhancers/filterRenderers.js":function(e,t,n){var r=n("./node_modules/recompose/es/Recompose.js").withState;e.exports={manageFilterRendererState:r("value","onValueChange",(function(e){return e.value}))}},"./MapStore2/web/client/components/data/featuregrid/enhancers/withHint.js":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=n("./node_modules/recompose/es/Recompose.js"),l=s.compose,c=s.branch,u=s.withProps,p=n("./MapStore2/web/client/components/misc/enhancers/tooltip.jsx"),d=n("./MapStore2/web/client/components/data/featuregrid/enhancers/withPopover.js");e.exports=l(u((function(e){var t=e.renderPopover,n=e.popoverOptions,r=a(e,["renderPopover","popoverOptions"]);return o(t?{renderPopover:t,popoverOptions:n}:{},r)})),c((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.renderPopover,n=e.popoverOptions;return t&&!!n}),d,p))},"./MapStore2/web/client/components/data/featuregrid/enhancers/withTooltip.js":function(e,t,n){function r(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var o=n("./node_modules/react/index.js"),i=n("./MapStore2/web/client/components/misc/OverlayTrigger.jsx"),a=n("./node_modules/react-bootstrap/es/index.js").Tooltip;e.exports=function(e){return function(t){var n=t.tooltip,s=t.id,l=t.placement,c=r(t,["tooltip","id","placement"]);return o.createElement(i,{placement:l,overlay:o.createElement(a,{id:"fe-".concat(s)},n)},o.createElement(e,c))}}},"./MapStore2/web/client/components/data/featuregrid/filterRenderers/AttributeFilter.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=n("./node_modules/react/index.js"),f=n("./node_modules/prop-types/index.js"),m=n("./MapStore2/web/client/utils/LocaleUtils.js"),y=n("./node_modules/react-bootstrap/es/index.js").Tooltip,b=n("./MapStore2/web/client/components/misc/OverlayTrigger.jsx"),g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(u,e);var t,n,r,l=s(u);function u(){var e;o(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return p(c(e=l.call.apply(l,[this].concat(n))),"renderInput",(function(){if(!1===e.props.column.filterable)return d.createElement("span",null);var t=m.getMessageById(e.context.messages,e.props.placeholderMsgId)||"Search",n="header-filter-"+e.props.column.key;return d.createElement("input",{disabled:e.props.disabled,key:n,type:"text",className:"form-control input-sm",placeholder:t,value:e.props.value,onChange:e.handleChange})})),p(c(e),"renderTooltip",(function(t){return e.props.tooltipMsgId&&m.getMessageById(e.context.messages,e.props.tooltipMsgId)?d.createElement(b,{placement:"top",overlay:d.createElement(y,{id:"tooltip"},m.getMessageById(e.context.messages,e.props.tooltipMsgId))},t):t})),p(c(e),"handleChange",(function(t){var n=t.target.value;e.props.onChange({value:n,attribute:e.props.column&&e.props.column.name})})),e}return t=u,(n=[{key:"render",value:function(){var e="header-filter--"+this.props.column.key;return d.createElement("div",{key:e,className:"form-group".concat(this.props.valid?"":" has-error")},this.renderTooltip(this.renderInput()))}}])&&i(t.prototype,n),r&&i(t,r),u}(d.PureComponent);p(g,"propTypes",{valid:f.bool,disabled:f.bool,onChange:f.func.isRequired,value:f.any,column:f.object,placeholderMsgId:f.string,tooltipMsgId:f.string}),p(g,"contextTypes",{messages:f.object}),p(g,"defaultProps",{value:"",valid:!0,onChange:function(){},column:{},placeholderMsgId:"featuregrid.filter.placeholders.default"}),e.exports=g},"./MapStore2/web/client/components/data/featuregrid/filterRenderers/DateTimeFilter.jsx":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/recompose/es/Recompose.js"),o=n("./node_modules/react/index.js"),i=n.n(o),a=n("./node_modules/prop-types/index.js"),s=n.n(a),l=n("./node_modules/react-intl/lib/index.es.js"),c=n("./node_modules/moment/moment.js"),u=n.n(c),p=n("./node_modules/react-widgets/lib/index.js"),d=n("./node_modules/react-widgets/lib/localizers/moment.js"),f=n.n(d),m=n("./node_modules/react-bootstrap/es/index.js"),y=n("./node_modules/lodash/lodash.js"),b=n("./MapStore2/web/client/components/misc/OverlayTrigger.jsx"),g=n.n(b);function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=x(e);if(t){var o=x(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return j(this,n)}}function j(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?E(e):t}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var C=function(e){for(var t=u()().startOf("day"),n=u()().startOf("day").add(1,"d"),r=[],o=t.date();t.date()===o&&t.isBefore(n);)r.push({date:t.toDate(),label:t.format("LT")}),t=t.add(e||30,"m");return r},T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(a,e);var t,n,r,o=O(a);function a(){var e;v(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return P(E(e=o.call.apply(o,[this].concat(n))),"state",{focusedItemIndex:0,times:[]}),P(E(e),"handleKeyDown",(function(t){var n=t.key,r=e.state,o=r.focusedItemIndex,i=r.times;if("Enter"===n){var a=i[o];e.props.onSelect(a),t.preventDefault()}else if("ArrowDown"===n){t.preventDefault();var s=o+1;e.scrollDown(s),s<i.length&&e.setState({focusedItemIndex:s})}else if("ArrowUp"===n){t.preventDefault();var l=o-1;e.scrollUp(l),l>-1&&e.setState({focusedItemIndex:l})}})),P(E(e),"scrollDown",(function(t){var n=e.itemsRef[t];n&&n.offsetTop>e.listRef.offsetHeight&&(e.listRef.scrollTop=n.offsetTop-e.listRef.offsetTop)})),P(E(e),"scrollUp",(function(t){var n=e.itemsRef[t];if(n){var r=e.listRef.scrollTop,o=n.offsetTop;r&&o<r&&(e.listRef.scrollTop=n.offsetTop-e.listRef.offsetTop)}})),P(E(e),"attachListRef",(function(t){return e.listRef=t})),P(E(e),"itemsRef",{}),e}return t=a,(n=[{key:"componentDidMount",value:function(){this.setState({times:C()})}},{key:"render",value:function(){var e=this,t=this.state,n=t.focusedItemIndex,r=t.times;return i.a.createElement("ul",{id:"rw_1_time_listbox",style:{position:"relative"},ref:this.attachListRef,tabIndex:"0",className:"rw-list",role:"listbox","aria-labelledby":"rw_1_input","aria-live":"false","aria-hidden":"true","aria-activedescendant":"rw_1_time_listbox__option__11"},r.map((function(t,r){return i.a.createElement("li",{key:t.label,onMouseDown:e.props.onMouseDown,onClick:function(){return e.props.onSelect(t)},ref:function(t){e.itemsRef[r]=t},role:"option",tabIndex:"0","aria-selected":"false",className:"rw-list-option ".concat(n===r?"rw-state-focus":""),id:"rw_1_time_listbox__option__0"},t.label)})))}}])&&S(t.prototype,n),r&&S(t,r),a}(o.Component);P(T,"propTypes",{onSelect:s.a.func,onMouseDown:s.a.func}),P(T,"defaultProps",{onSelect:function(){},onMouseDown:function(){}});var M=T;function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function A(){return(A=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function R(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=F(e);if(t){var o=F(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return L(this,n)}}function L(e,t){return!t||"object"!==_(t)&&"function"!=typeof t?N(e):t}function N(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function F(e){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function U(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}f()(u.a);var G="function"==typeof u()().locale?"locale":"lang";function B(e,t,n){return e?u()(t,n)[G](e):u()(t,n)}var z=function(e,t){var n=u()(e);return n.hours(t.getHours()).minute(t.getMinutes()).seconds(t.getSeconds()).milliseconds(t.getMilliseconds()),n.toDate()},W="lll",V="L",H="LT",q=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(a,e);var t,n,r,o=k(a);function a(){var e;R(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return U(N(e=o.call.apply(o,[this].concat(n))),"state",{open:"",focused:!1,inputValue:"",operator:"",date:null}),U(N(e),"getFormat",(function(){var t=e.props,n=t.format,r=t.time,o=t.calendar;return n||(!r&&o?V:r&&!o?H:W)})),U(N(e),"renderInput",(function(t,n,r,o,a,s,l){return r?i.a.createElement(g.a,{placement:"top",overlay:i.a.createElement(m.Tooltip,{id:"tooltip"},r)},i.a.createElement("input",{type:"text",id:"rw_1_input",role:"combobox",onBlur:e.handleInputBlur,placeholder:o,"aria-expanded":s||l,"aria-haspopup":"true","aria-busy":"false","aria-owns":"rw_1_cal rw_1_time_listbox",tabIndex:a,autoComplete:"off",value:"".concat(n).concat(t),className:"rw-input",onChange:e.handleValueChange})):i.a.createElement("input",{type:"text",id:"rw_1_input",role:"combobox",onBlur:e.handleInputBlur,placeholder:o,"aria-expanded":s||l,"aria-haspopup":"true","aria-busy":"false","aria-owns":"rw_1_cal rw_1_time_listbox",tabIndex:a,autoComplete:"off",value:"".concat(n).concat(t),className:"rw-input",onChange:e.handleValueChange})})),U(N(e),"inputFlush",!1),U(N(e),"ignoreBlur",!1),U(N(e),"handleWidgetFocus",(function(){e.setState({focused:!0}),e.ignoreBlur=!1})),U(N(e),"handleWidgetBlur",(function(){e.ignoreBlur||e.setState({open:"",focused:!1})})),U(N(e),"handleMouseDown",(function(){e.ignoreBlur=!0})),U(N(e),"toggleCalendar",(function(){e.setState((function(e){return{open:"date"!==e.open?"date":""}}))})),U(N(e),"toggleTime",(function(){e.setState((function(e){return{open:"time"!==e.open?"time":""}}))})),U(N(e),"handleInputBlur",(function(){if(e.inputFlush){var t=e.parse(e.state.inputValue),n=e.format(t);e.setState({inputValue:n,date:t}),e.inputFlush=!1,e.props.onChange(t,"".concat(e.state.operator).concat(n))}})),U(N(e),"setDateFromValueProp",(function(t,n){if(Object(y.isDate)(t)){var r=e.format(t);e.setState((function(e){return{date:t,inputValue:r,operator:n||e.operator}}))}})),U(N(e),"parse",(function(t){var n=e.props.culture,r=e.getFormat();if(t){var o=B(n,t,r);if(o.isValid())return o.toDate()}return null})),U(N(e),"format",(function(t){if(!t)return"";var n=e.props.culture,r=e.getFormat(),o=B(n,t);return o.isValid()?o.format(r):""})),U(N(e),"close",(function(){e.setState({open:""})})),U(N(e),"open",(function(){var t=e.props,n=t.calendar,r=t.time;return!n&&r?e.setState({open:"time"}):n&&!r?e.setState({open:"date"}):""})),U(N(e),"handleKeyDown",(function(t){var n=e.state.open,r="time"===n,o="date"===n;if(!t.defaultPrevented)if("Escape"!==t.key){if(t.altKey&&"ArrowDown"===t.key)return t.preventDefault(),void e.open();if(t.altKey&&"ArrowUp"===t.key)return t.preventDefault(),void e.close();if(r&&e.timeRef.handleKeyDown(t),o&&e.calRef.refs.inner.handleKeyDown(t),!r&&!o&&"Enter"===t.key){var i=e.parse(e.state.inputValue),a=e.format(i);e.setState({inputValue:a,date:i}),e.inputFlush=!1,e.props.onChange(i,"".concat(e.state.operator).concat(a))}}else e.close()})),U(N(e),"handleValueChange",(function(t){var n=t.target.value,r=/\s*(!==|!=|<>|<=|>=|===|==|=|<|>)?(.*)/.exec(n);e.setState({inputValue:r[2],operator:r[1]||""}),e.inputFlush=!0})),U(N(e),"handleCalendarChange",(function(t){var n=z(t,new Date),r=e.format(n);e.setState({date:n,inputValue:r,open:""}),e.props.onChange(n,"".concat(e.state.operator).concat(r))})),U(N(e),"handleTimeSelect",(function(t){var n=e.state.date||new Date,r=z(n,t.date),o=e.format(r);e.setState({date:r,inputValue:o,open:""}),e.props.onChange(r,"".concat(e.state.operator).concat(o))})),U(N(e),"attachTimeRef",(function(t){return e.timeRef=t})),U(N(e),"attachCalRef",(function(t){return e.calRef=t})),e}return t=a,(n=[{key:"componentDidMount",value:function(){var e=this.props,t=e.value,n=e.operator;this.setDateFromValueProp(t,n)}},{key:"componentDidUpdate",value:function(e){if(e.value!==this.props.value||e.operator!==this.props.operator){var t=this.props,n=t.value,r=t.operator;this.setDateFromValueProp(n,r)}}},{key:"render",value:function(){var e=this,t=this.state,n=t.open,r=t.inputValue,o=t.operator,a=t.focused,s=this.props,l=s.calendar,c=s.time,u=s.toolTip,d=s.placeholder,f=s.tabIndex,m=Object.keys(this.props).reduce((function(t,n){return["placeholder","calendar","time","onChange","value"].includes(n)||(t[n]=e.props[n]),t}),{}),y="date"===n,b="time"===n;return i.a.createElement("div",{tabIndex:"-1",onKeyDown:this.handleKeyDown,onBlur:this.handleWidgetBlur,onFocus:this.handleWidgetFocus,className:"rw-datetimepicker rw-widget ".concat(l&&c?"rw-has-both":""," ").concat(l||c?"":"rw-has-neither"," ").concat(a?"rw-state-focus":"")},this.renderInput(r,o,u,d,f,y,b),l||c?i.a.createElement("span",{className:"rw-select"},l?i.a.createElement("button",{tabIndex:"-1",title:"Select Date",type:"button","aria-disabled":"false","aria-label":"Select Date",className:"rw-btn-calendar rw-btn",onClick:this.toggleCalendar},i.a.createElement("span",{"aria-hidden":"true",className:"rw-i rw-i-calendar"})):"",c?i.a.createElement("button",{tabIndex:"-1",title:"Select Time",type:"button","aria-disabled":"false","aria-label":"Select Time",className:"rw-btn-time rw-btn",onClick:this.toggleTime},i.a.createElement("span",{"aria-hidden":"true",className:"rw-i rw-i-clock-o"})):""):"",i.a.createElement("div",{className:"rw-popup-container rw-popup-animating",style:{display:b?"block":"none",overflow:b?"visible":"hidden",height:"216px"}},i.a.createElement("div",{className:"rw-popup rw-widget",style:{transform:b?"translateY(0)":"translateY(-100%)",position:b?"":"absolute"}},i.a.createElement(M,A({ref:this.attachTimeRef,onMouseDown:this.handleMouseDown},m,{onClose:this.close,onSelect:this.handleTimeSelect})))),i.a.createElement("div",{className:"rw-calendar-popup rw-popup-container ".concat(y?"":"rw-popup-animating"),style:{display:y?"block":"none",overflow:y?"visible":"hidden",height:"375px"}},i.a.createElement("div",{className:"rw-popup",style:{transform:y?"translateY(0)":"translateY(-100%)",padding:"0",borderRadius:"4px",position:y?"":"absolute"}},i.a.createElement(p.Calendar,A({tabIndex:"-1",ref:this.attachCalRef,onMouseDown:this.handleMouseDown,onChange:this.handleCalendarChange},m)))))}}])&&I(t.prototype,n),r&&I(t,r),a}(o.Component);U(q,"propTypes",{format:s.a.string,type:s.a.string,placeholder:s.a.string,onChange:s.a.func,calendar:s.a.bool,time:s.a.bool,value:s.a.any,operator:s.a.string,culture:s.a.string,toolTip:s.a.string,tabIndex:s.a.string}),U(q,"defaultProps",{placeholder:"Type date...",calendar:!0,time:!0,onChange:function(){},value:null});var Y=q,Q=n("./MapStore2/web/client/utils/LocaleUtils.js"),K=n.n(Q),Z=n("./MapStore2/web/client/utils/TimeUtils.js"),X=n("./MapStore2/web/client/components/data/featuregrid/filterRenderers/AttributeFilter.jsx"),J=n.n(X),$=n("./MapStore2/web/client/components/misc/enhancers/utcDateWrapper.js");n("./node_modules/react-widgets/lib/less/react-widgets.less");function ee(e){return(ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function te(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ne(e,t){return(ne=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function re(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ae(e);if(t){var o=ae(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return oe(this,n)}}function oe(e,t){return!t||"object"!==ee(t)&&"function"!=typeof t?ie(e):t}function ie(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ae(e){return(ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function se(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var le=Object($.default)({dateProp:"value",dateTypeProp:"type",setDateProp:"onChange"})(Y),ce=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ne(e,t)}(n,e);var t=re(n);function n(){var e;te(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return se(ie(e=t.call.apply(t,[this].concat(o))),"renderInput",(function(){if(!1===e.props.column.filterable)return i.a.createElement("span",null);var t,n=Object(Z.getDateTimeFormat)(e.context.locale,e.props.type),r=K.a.getMessageById(e.context.messages,e.props.placeholderMsgId)||"Insert date",o=e.props.intl&&e.props.intl.formatMessage({id:"".concat(e.props.tooltipMsgId)},{format:n})||"Insert date in ".concat(n," format"),a="header-filter-"+e.props.column.key;t=e.props.value&&null===e.props.value.startDate||!e.props.value?null:e.props.value&&e.props.value.startDate||e.props.value;var s=e.props.value?t:null,l=e.props.value&&e.props.value.operator;return i.a.createElement(le,{key:a,disabled:e.props.disabled,format:n,placeholder:r,value:s,toolTip:o,operator:l,type:e.props.type,time:"date-time"===e.props.type||"time"===e.props.type,calendar:"date-time"===e.props.type||"date"===e.props.type,onChange:function(t,n){return e.handleChange(t,n)}})})),se(ie(e),"handleChange",(function(t,n){e.props.onChange({value:t,stringValue:n,attribute:e.props.column&&e.props.column.name})})),e}return n}(J.a);se(ce,"propTypes",{type:s.a.string,disabled:s.a.boolean,onChange:s.a.func,intl:l.intlShape}),se(ce,"contextTypes",{messages:s.a.object,locale:s.a.string}),se(ce,"defaultProps",{value:null,type:"date-time",column:{},placeholderMsgId:"featuregrid.filter.placeholders.default"});var ue=Object(r.getContext)({intl:l.intlShape})(ce);t.default=Object(r.compose)(Object(r.defaultProps)({onValueChange:function(){},value:null}),Object(r.withHandlers)({onChange:function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.value,r=t.attribute,o=t.stringValue,i=/\s*(!==|!=|<>|<=|>=|===|==|=|<|>)?(.*)/.exec(o),a=i[1],s=i[1]||"=";"!=="===a|"!="===a?s="<>":"==="===a|"=="===a&&(s="="),e.onValueChange(n),e.onChange({value:{startDate:n,operator:a},operator:s,type:e.type,attribute:r})}}}),Object(r.defaultProps)({placeholderMsgId:"featuregrid.filter.placeholders.date",tooltipMsgId:"featuregrid.filter.tooltips.date"}))(ue)},"./MapStore2/web/client/components/data/featuregrid/filterRenderers/DefaultFilter.jsx":function(e,t,n){var r=n("./MapStore2/web/client/components/data/featuregrid/filterRenderers/AttributeFilter.jsx"),o=n("./node_modules/recompose/es/Recompose.js"),i=o.compose,a=o.withHandlers,s=o.defaultProps;e.exports=i(s({onValueChange:function(){}}),a({onChange:function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.value,r=t.attribute;e.onValueChange(n),e.onChange({value:n,operator:"=",type:e.type,attribute:r})}}}))(r)},"./MapStore2/web/client/components/data/featuregrid/filterRenderers/GeometryFilter.jsx":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/react/index.js"),o=n.n(r),i=n("./node_modules/react-bootstrap/es/index.js"),a=n("./MapStore2/web/client/components/misc/OverlayTrigger.jsx"),s=n.n(a),l=n("./MapStore2/web/client/components/I18N/Message.jsx"),c=n.n(l);t.default=function(e){var t=e.value,n=e.filterEnabled,r=void 0!==n&&n,a=e.filterDeactivated,l=void 0!==a&&a,u=e.column,p=void 0===u?{}:u,d=e.tooltipPlace,f=void 0===d?"top":d,m=e.tooltipDisabled,y=void 0===m?"featuregrid.filter.tooltips.geometry.disabled":m,b=e.tooltipEnabled,g=void 0===b?"featuregrid.filter.tooltips.geometry.enabled":b,h=e.tooltipApplied,v=void 0===h?"featuregrid.filter.tooltips.geometry.applied":h,S=e.onChange,w=void 0===S?function(){}:S,O=l?void 0:r&&t?v:r&&!t?g:y,j=o.a.createElement("div",{className:"featuregrid-geometry-filter".concat(r?" filter-enabled":"").concat(l?" filter-deactivated":""),onClick:l?function(){}:function(){w({enabled:!r,type:"geometry",attribute:p.geometryPropName})}},o.a.createElement(i.Glyphicon,{glyph:t?"remove-sign":"map-marker"}));return O?o.a.createElement(s.a,{placement:f,overlay:o.a.createElement(i.Tooltip,{id:"gofull-tooltip"},o.a.createElement(c.a,{msgId:O}))},j):j}},"./MapStore2/web/client/components/data/featuregrid/filterRenderers/NumberFilter.jsx":function(e,t,n){var r=n("./MapStore2/web/client/components/data/featuregrid/filterRenderers/AttributeFilter.jsx"),o=n("./node_modules/lodash/lodash.js").trim,i=n("./node_modules/recompose/es/Recompose.js"),a=i.compose,s=i.withHandlers,l=i.withState,c=i.defaultProps,u=/\s*(!==|!=|<>|<=|>=|===|==|=|<|>)?\s*(-?\d*\.?\d*)\s*/;e.exports=a(c({onValueChange:function(){}}),l("valid","setValid",!0),s({onChange:function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.value,r=t.attribute;e.onValueChange(n);var i,a="=",s=u.exec(n);s?("!=="===(a=s[1]||"=")|"!="===a?a="<>":"==="===a|"=="===a&&(a="="),i=parseFloat(s[2])):i=parseFloat(n,10),isNaN(i)&&""!==o(n)?e.setValid(!1):e.setValid(!0),e.onChange({value:isNaN(i)?void 0:i,rawValue:n,operator:a,type:"number",attribute:r})}}}),c({placeholderMsgId:"featuregrid.filter.placeholders.number",tooltipMsgId:"featuregrid.filter.tooltips.number"}))(r)},"./MapStore2/web/client/components/data/featuregrid/filterRenderers/StringFilter.jsx":function(e,t,n){var r=n("./MapStore2/web/client/components/data/featuregrid/filterRenderers/AttributeFilter.jsx"),o=n("./node_modules/recompose/es/Recompose.js"),i=o.compose,a=o.withHandlers,s=o.defaultProps,l=n("./node_modules/lodash/lodash.js").trim;e.exports=i(s({onValueChange:function(){},placeholderMsgId:"featuregrid.filter.placeholders.string"}),a({onChange:function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.value,r=t.attribute;e.onValueChange(n),e.onChange({rawValue:n,value:l(n)?l(n):void 0,operator:"ilike",type:"string",attribute:r})}}}))(r)},"./MapStore2/web/client/components/data/featuregrid/filterRenderers/index.js":function(e,t,n){var r=n("./node_modules/recompose/es/Recompose.js").withProps,o=n("./MapStore2/web/client/components/data/featuregrid/filterRenderers/DefaultFilter.jsx"),i=n("./MapStore2/web/client/components/data/featuregrid/filterRenderers/StringFilter.jsx"),a=n("./MapStore2/web/client/components/data/featuregrid/filterRenderers/NumberFilter.jsx"),s=n("./MapStore2/web/client/components/data/featuregrid/filterRenderers/DateTimeFilter.jsx").default,l=n("./MapStore2/web/client/components/data/featuregrid/filterRenderers/GeometryFilter.jsx").default,c={defaultFilter:function(e){return r((function(){return{type:e}}))(o)},string:function(){return i},number:function(){return a},int:function(){return a},date:function(){return r((function(){return{type:"date"}}))(s)},time:function(){return r((function(){return{type:"time"}}))(s)},"date-time":function(){return r((function(){return{type:"date-time"}}))(s)},geometry:function(){return l}};e.exports={getFilterRenderer:function(e,t){return c[e]?c[e](e,t):c.defaultFilter(e,t)},DefaultFilter:o,StringFilter:i,NumberFilter:a,DateTimeFilter:s,GeometryFilter:l}},"./MapStore2/web/client/components/data/featuregrid/formatters/index.js":function(e,t,n){var r=n("./node_modules/react/index.js"),o=n("./node_modules/lodash/lodash.js").isNil;e.exports={getFormatter:function(e){return"boolean"===e.localType?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.value;return o(t)?null:r.createElement("span",null,t.toString())}:null}}},"./MapStore2/web/client/components/data/featuregrid/renderers/CellRenderer.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=n("./node_modules/react/index.js"),d=n("./node_modules/prop-types/index.js"),f=n("./node_modules/react-data-grid/index.js").Cell,m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(c,e);var t,n,r,l=s(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=l.call(this,e)).setScrollLeft=function(e){return t.refs.cell.setScrollLeft(e)},t}return t=c,(n=[{key:"render",value:function(){var e=this.context.isProperty(this.props.column.key),t=this.props.rowData._new&&e||this.context.isModified(this.props.rowData.id,this.props.column.key),n=!e||this.context.isValid(this.props.rowData.get(this.props.column.key),this.props.column.key),r=(t?["modified"]:[]).concat(n?[]:["invalid"]).join(" ");return p.createElement(f,o({},this.props,{ref:"cell",className:r}))}}])&&i(t.prototype,n),r&&i(t,r),c}(p.Component);u(m,"propTypes",{value:d.any,rowData:d.object,column:d.object}),u(m,"contextTypes",{isModified:d.func,isProperty:d.func,isValid:d.func}),u(m,"defaultProps",{value:null,rowData:{},column:{}}),e.exports=m},"./MapStore2/web/client/components/data/featuregrid/renderers/RowRenderer.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=n("./node_modules/react/index.js"),d=n("./node_modules/prop-types/index.js"),f=n("./MapStore2/web/client/components/data/featuregrid/renderers/CellRenderer.jsx"),m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(c,e);var t,n,r,l=s(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=l.call(this,e)).setScrollLeft=function(e){return t.refs.row.setScrollLeft(e)},t}return t=c,(n=[{key:"render",value:function(){return this.props.renderBaseRow(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({extraClasses:"empty_row"===this.props.row.id?"empty-row":"",cellRenderer:f},this.props))}}])&&i(t.prototype,n),r&&i(t,r),c}(p.Component);u(m,"propTypes",{columns:d.array,row:d.object,renderBaseRow:d.func.isRequired}),e.exports=m},"./MapStore2/web/client/components/data/featuregrid/toolbars/TButton.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function i(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=n("./node_modules/react/index.js"),f=n("./node_modules/react-bootstrap/es/index.js"),m=f.Button,y=f.Glyphicon,b={width:0,padding:0,borderWidth:0},g={},h=function(e){return e?g:b};e.exports=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(p,e);var t,n,r,u=c(p);function p(){return a(this,p),u.apply(this,arguments)}return t=p,(n=[{key:"render",value:function(){var e=this.props,t=e.disabled,n=e.id,r=e.visible,a=e.onClick,s=e.glyph,l=e.active,c=e.className,u=void 0===c?"square-button":c,p=i(e,["disabled","id","visible","onClick","glyph","active","className"]);return d.createElement(m,o({},p,{bsStyle:l?"success":"primary",disabled:t,id:"fg-".concat(n),style:h(r),className:u,onClick:function(){return!t&&a()}}),d.createElement(y,{glyph:s}))}}])&&s(t.prototype,n),r&&s(t,r),p}(d.Component)},"./MapStore2/web/client/components/data/featuregrid/toolbars/Toolbar.jsx":function(e,t,n){var r=n("./node_modules/react/index.js"),o=n("./node_modules/react-bootstrap/es/index.js"),i=o.ButtonGroup,a=o.Glyphicon,s=o.Checkbox;n("./MapStore2/web/client/components/data/featuregrid/toolbars/toolbar.css");var l=n("./MapStore2/web/client/components/I18N/Message.jsx"),c=n("./MapStore2/web/client/components/data/featuregrid/enhancers/withHint.js")(n("./MapStore2/web/client/components/data/featuregrid/toolbars/TButton.jsx")),u=function(e,t){return e?"featuregrid.toolbar.stopDrawGeom":t?"featuregrid.toolbar.drawGeom":"featuregrid.toolbar.addGeom"},p=function(e){var t=e.saving,n=e.saved;return t||n?"featuregrid.toolbar.saving":"featuregrid.toolbar.saveChanges"};e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.disableToolbar,n=e.disableDownload,o=e.disableZoomAll,d=void 0!==o&&o,f=e.displayDownload,m=e.events,y=void 0===m?{}:m,b=e.hasChanges,g=e.hasGeometry,h=e.hasNewFeatures,v=e.hasSupportedGeometry,S=void 0===v||v,w=e.isColumnsOpen,O=e.isDrawing,j=void 0!==O&&O,E=e.isEditingAllowed,x=e.isFilterActive,P=void 0!==x&&x,C=e.isDownloadOpen,T=e.isSearchAllowed,M=e.isSimpleGeom,_=e.isSyncActive,A=void 0!==_&&_,R=e.saved,I=void 0!==R&&R,D=e.saving,k=void 0!==D&&D,L=e.selectedCount,N=e.showAdvancedFilterButton,F=void 0===N||N,U=e.showChartButton,G=void 0===U||U,B=e.showSyncOnMapButton,z=void 0===B||B,W=e.showTimeSyncButton,V=void 0!==W&&W,H=e.syncPopover,q=void 0===H?{showPopoverSync:!0,dockSize:"32.2%"}:H,Y=e.mode,Q=void 0===Y?"VIEW":Y,K=e.timeSync,Z=void 0!==K&&K;return r.createElement(i,{id:"featuregrid-toolbar",className:"featuregrid-toolbar featuregrid-toolbar-margin"},r.createElement(c,{id:"edit-mode",keyProp:"edit-mode",tooltipId:"featuregrid.toolbar.editMode",disabled:t,visible:"VIEW"===Q&&E,onClick:y.switchEditMode,glyph:"pencil"}),r.createElement(c,{id:"search",keyProp:"search",tooltipId:"featuregrid.toolbar.advancedFilter",active:P,disabled:t||!T,visible:"VIEW"===Q&&F,onClick:y.showQueryPanel,glyph:"filter"}),r.createElement(c,{id:"zoom-all",keyProp:"zoom-all",tooltipId:"featuregrid.toolbar.zoomAll",disabled:t||d,visible:"VIEW"===Q,onClick:y.zoomAll,glyph:"zoom-to"}),r.createElement(c,{id:"back-view",keyProp:"back-view",tooltipId:"featuregrid.toolbar.quitEditMode",disabled:t,visible:"EDIT"===Q&&!b&&!h,onClick:y.switchViewMode,glyph:"arrow-left"}),r.createElement(c,{id:"add-feature",keyProp:"add-feature",tooltipId:"featuregrid.toolbar.addNewFeatures",disabled:t,visible:"EDIT"===Q&&!h&&!b&&S,onClick:y.createFeature,glyph:"row-add"}),r.createElement(c,{id:"draw-feature",keyProp:"draw-feature",tooltipId:u(j,M),disabled:t,visible:"EDIT"===Q&&1===L&&(!g||g&&!M)&&S,onClick:y.startDrawingFeature,active:j,glyph:"pencil-add"}),r.createElement(c,{id:"remove-features",keyProp:"remove-features",tooltipId:"featuregrid.toolbar.deleteSelectedFeatures",disabled:t,visible:"EDIT"===Q&&L>0&&!b&&!h,onClick:y.deleteFeatures,glyph:"trash-square"}),r.createElement(c,{id:"save-feature",keyProp:"save-feature",tooltipId:p({saving:k,saved:I}),disabled:k||I||t,visible:"EDIT"===Q&&b||h,active:I,onClick:y.saveChanges,glyph:"floppy-disk"}),r.createElement(c,{id:"cancel-editing",keyProp:"cancel-editing",tooltipId:"featuregrid.toolbar.cancelChanges",disabled:t,visible:"EDIT"===Q&&b||h,onClick:y.clearFeatureEditing,glyph:"remove-square"}),r.createElement(c,{id:"delete-geometry",keyProp:"delete-geometry",tooltipId:"featuregrid.toolbar.deleteGeometry",disabled:t,visible:"EDIT"===Q&&g&&1===L&&S,onClick:y.deleteGeometry,glyph:"polygon-trash"}),r.createElement(c,{id:"download-grid",keyProp:"download-grid",tooltipId:"featuregrid.toolbar.downloadGridData",disabled:t||n,active:C,visible:f&&"VIEW"===Q,onClick:y.download,glyph:"features-grid-download"}),r.createElement(c,{id:"grid-settings",keyProp:"grid-settings",tooltipId:"featuregrid.toolbar.hideShowColumns",disabled:t,active:w,visible:L<=1&&"VIEW"===Q,onClick:y.settings,glyph:"features-grid-set"}),r.createElement(c,{id:"grid-map-chart",keyProp:"grid-map-chart",tooltipId:"featuregrid.toolbar.createNewChart",disabled:t,visible:"VIEW"===Q&&G,onClick:y.chart,glyph:"stats"}),r.createElement(c,{id:"grid-map-filter",keyProp:"grid-map-filter",tooltipId:"featuregrid.toolbar.syncOnMap",disabled:t,active:A,visible:"VIEW"===Q&&z,onClick:y.sync,glyph:"map-filter",renderPopover:q.showPopoverSync,popoverOptions:!t&&{placement:"top",content:r.createElement("span",null,r.createElement("p",null,r.createElement(l,{msgId:"featuregrid.toolbar.synchPopoverText"})),r.createElement("p",null,r.createElement(s,{checked:q.showAgain,onClick:y.toggleShowAgain},r.createElement(l,{msgId:"featuregrid.toolbar.notShowAgain"})))),props:{id:"sync-popover",title:r.createElement("div",null,r.createElement(l,{msgId:"featuregrid.toolbar.synchPopoverTitle"}),r.createElement("button",{onClick:function(){q.showAgain&&localStorage.setItem("showPopoverSync",!1),y.hideSyncPopover()},className:"close"},r.createElement(a,{className:"pull-right",glyph:"1-close"}))),style:{bottom:q.dockSize}}}}),r.createElement(c,{id:"timeSync-button",keyProp:"fg-timeSync-button",tooltipId:Z?"featuregrid.toolbar.disableTimeSync":"featuregrid.toolbar.enableTimeSync",visible:V,active:Z,onClick:function(){return y.setTimeSync&&y.setTimeSync(!Z)},glyph:"time"}))}},"./MapStore2/web/client/components/data/featuregrid/toolbars/toolbar.css":function(e,t,n){var r=n("./node_modules/css-loader/index.js!./node_modules/postcss-loader/src/index.js?!./MapStore2/web/client/components/data/featuregrid/toolbars/toolbar.css");"string"==typeof r&&(r=[[e.i,r,""]]);n("./node_modules/style-loader/addStyles.js")(r,{});r.locals&&(e.exports=r.locals)},"./MapStore2/web/client/components/data/grid/DataGrid.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=n("./node_modules/prop-types/index.js"),d=n("./node_modules/react-data-grid/index.js"),f=n("./node_modules/react-dom/index.js"),m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(c,e);var t,n,r,s=a(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),u(l(t=s.call(this,e)),"scrollListener",(function(){t.props.isFocused||(t.scroll=t.canvas.scrollTop);var e=Math.ceil(t.canvas.clientHeight/t.props.rowHeight),n=Math.floor(t.canvas.scrollTop/t.props.rowHeight),r=n+e;t.props.onGridScroll&&t.props.onGridScroll({firstRowIdx:n,lastRowIdx:r})})),u(l(t),"setCanvasListener",(function(){t.canvas=f.findDOMNode(l(t)).querySelector(".react-grid-Canvas"),t.canvas&&t.canvas.addEventListener("scroll",t.scrollListener)})),t}return t=c,(n=[{key:"componentDidMount",value:function(){this.setCanvasListener(),this.props.displayFilters&&this.onToggleFilter()}},{key:"componentWillUnmount",value:function(){this.canvas&&(this.canvas.removeEventListener("scroll",this.scrollListener),this.canvas=null),this.props.displayFilters&&this.onToggleFilter()}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.virtualScroll,r=t.displayFilters,o=t.scrollToTopCounter;e.displayFilters!==r&&this.onToggleFilter(),n&&(this.canvas&&this.canvas!==f.findDOMNode(this).querySelector(".react-grid-Canvas")&&(this.canvas.removeEventListener("scroll",this.scrollListener),this.setCanvasListener()),this.canvas||this.setCanvasListener(),this.canvas&&e.isFocused&&!this.props.isFocused?this.canvas.scrollTop=this.scroll:this.canvas&&this.props.minHeight!==e.minHeight&&this.scrollListener(),!this.props.isFocused&&this.canvas&&(this.scroll=this.canvas.scrollTop),o!==e.scrollToTopCounter&&this.canvas&&(this.canvas.scrollTop=0))}}])&&o(t.prototype,n),r&&o(t,r),c}(d);u(m,"propTypes",{displayFilters:p.bool}),e.exports=m},"./MapStore2/web/client/components/data/grid/forceScrollTop.js":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n("./node_modules/recompose/es/Recompose.js"),s=a.compose,l=a.branch,c=a.withHandlers,u=a.mapPropsStream,p=a.createEventHandler,d=n("./node_modules/rxjs/Rx.js");e.exports=l((function(e){return e.virtualScroll}),s(u((function(e){var t=p(),n=t.handler,r=t.stream;return e.combineLatest(r.throttle((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return d.Observable.timer(e)})).scan((function(e){return e+1}),0).map((function(e){return{scrollToTopCounter:e}})).startWith({}),(function(e,t){return o(o(o({},e),t),{},{scrollToTop:n})}))})),c({onGridSort:function(e){var t=e.onGridSort,n=void 0===t?function(){}:t,r=e.scrollToTop,o=void 0===r?function(){}:r;return function(){return o(0),n.apply(void 0,arguments)}},onAddFilter:function(e){var t=e.onAddFilter,n=void 0===t?function(){}:t,r=e.scrollToTop,o=void 0===r?function(){}:r;return function(){o(1e3),n.apply(void 0,arguments)}}})))},"./MapStore2/web/client/components/data/query/AutocompleteFieldHOC.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=n("./node_modules/prop-types/index.js"),f=n("./node_modules/react/index.js"),m=n("./node_modules/object-assign/index.js"),y=n("./MapStore2/web/client/components/data/query/AutocompleteListItem.jsx"),b=n("./MapStore2/web/client/components/misc/combobox/PagedCombobox.jsx"),g=n("./MapStore2/web/client/utils/FilterUtils.jsx").isLikeOrIlike,h=n("./MapStore2/web/client/components/I18N/HTML.jsx"),v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(u,e);var t,n,r,l=s(u);function u(){var e;o(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return p(c(e=l.call.apply(l,[this].concat(n))),"getOptions",(function(){return e.props.filterField&&e.props.filterField.options&&e.props.filterField.options[e.props.filterField.attribute]&&e.props.filterField.options[e.props.filterField.attribute].map((function(e){return{value:e,label:e}}))})),p(c(e),"getPagination",(function(t){if(!e.props.filterField.options)return{};var n=Math.ceil(e.props.filterField.fieldOptions.valuesCount/e.props.maxFeaturesWPS),r=1===e.props.filterField.fieldOptions.currentPage||!e.props.filterField.fieldOptions.currentPage,o=e.props.filterField.fieldOptions.currentPage===n||!e.props.filterField.fieldOptions.currentPage;return m({},e.props.pagination,{paginated:0!==t.length&&!(r&&1===t.length),firstPage:r,lastPage:o,loadPrevPage:function(){return e.props.onUpdateField(e.props.filterField.rowId,"value",e.props.filterField.value,"string",{currentPage:e.props.filterField.fieldOptions.currentPage-1,delayDebounce:0})},loadNextPage:function(){return e.props.onUpdateField(e.props.filterField.rowId,"value",e.props.filterField.value,"string",{currentPage:e.props.filterField.fieldOptions.currentPage+1,delayDebounce:0})}})})),p(c(e),"getTooltip",(function(){return m({},e.props.tooltip,{enabled:g(e.props.filterField.operator),id:e.props.filterField.rowId,message:f.createElement(h,{msgId:"queryform.attributefilter.tooltipTextField"}),overlayTriggerKey:e.props.filterField.rowId,placement:"top"})})),p(c(e),"renderField",(function(){var t;e.props.filterField&&e.props.filterField.value&&"*"!==e.props.filterField.value&&(t={value:e.props.filterField.value,label:e.props.filterField.value});var n=e.getOptions()?e.getOptions().slice(0):[];return f.createElement(b,{busy:e.props.filterField.loading,data:e.props.filterField.loading?[]:n,disabled:"isNull"===e.props.filterField.operator,itemComponent:e.props.itemComponent,open:e.props.filterField.openAutocompleteMenu,onChange:function(t){return e.handleChange(t)},onFocus:function(){return e.handleFocus(n)},onSelect:function(){return e.handleSelect()},onToggle:function(){return e.handleToggle(n)},pagination:e.getPagination(n),selectedValue:t&&t.value,tooltip:e.getTooltip()})})),p(c(e),"handleSelect",(function(){e.selected=!0})),p(c(e),"handleChange",(function(t){e.selected?(e.selected=!1,t&&""!==t.value&&e.props.onUpdateField(e.props.filterField.rowId,"value",t.value,"string",{currentPage:1,selected:"selected",delayDebounce:0})):e.props.onUpdateField(e.props.filterField.rowId,"value","string"==typeof t?t:t.value,"string",{currentPage:1,delayDebounce:1e3})})),p(c(e),"handleFocus",(function(t){e.loadWithoutfilter(t)})),p(c(e),"handleToggle",(function(){e.props.toggleMenu(e.props.filterField.rowId,!e.props.filterField.openAutocompleteMenu)})),p(c(e),"loadWithoutfilter",(function(t){0!==t.length||e.props.filterField.value||e.props.onUpdateField(e.props.filterField.rowId,"value","","string",{currentPage:1,delayDebounce:0})})),e}return t=u,(n=[{key:"render",value:function(){var e=this.props.label?f.createElement("label",null,this.props.label):f.createElement("span",null);return f.createElement("div",{className:"autocompleteField"},e,this.renderField())}}])&&i(t.prototype,n),r&&i(t,r),u}(f.Component);p(v,"propTypes",{disabled:d.bool,filterField:d.object,label:d.string,itemComponent:d.oneOfType([d.object,d.func]),maxFeaturesWPS:d.number,onUpdateField:d.func,pagination:d.object,textField:d.string,tooltip:d.object,toggleMenu:d.func,valueField:d.string}),p(v,"contextTypes",{messages:d.object}),p(v,"defaultProps",{label:null,onUpdateField:function(){},pagination:{paginated:!0,nextPageIcon:"chevron-right",prevPageIcon:"chevron-left"},itemComponent:y,toggleMenu:function(){},filterField:{fieldOptions:{}}}),e.exports=v},"./MapStore2/web/client/components/data/query/AutocompleteListItem.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u,p,d,f=n("./node_modules/react/index.js"),m=n("./node_modules/prop-types/index.js"),y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(c,e);var t,n,r,l=s(c);function c(){return o(this,c),l.apply(this,arguments)}return t=c,(n=[{key:"render",value:function(){var e=this.props.item;return e.pagination?f.createElement("span",null,e[this.props.textField]," ",e.pagination," "):f.createElement("span",null,e[this.props.textField])}}])&&i(t.prototype,n),r&&i(t,r),c}(f.Component);u=y,p="propTypes",d={item:m.object,textField:m.string,valueField:m.string},p in u?Object.defineProperty(u,p,{value:d,enumerable:!0,configurable:!0,writable:!0}):u[p]=d,e.exports=y},"./MapStore2/web/client/components/data/query/ComboField.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=n("./node_modules/prop-types/index.js"),f=n("./node_modules/react/index.js"),m=n("./node_modules/object-assign/index.js"),y=n("./MapStore2/web/client/utils/LocaleUtils.js"),b=n("./node_modules/react-bootstrap/es/index.js").Tooltip,g=n("./MapStore2/web/client/components/misc/OverlayTrigger.jsx"),h=n("./node_modules/react-widgets/lib/index.js"),v=h.DropdownList,S=h.Multiselect,w=n("./MapStore2/web/client/components/I18N/Message.jsx"),O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(u,e);var t,n,r,c=l(u);function u(){return i(this,u),c.apply(this,arguments)}return t=u,(n=[{key:"render",value:function(){var e=this,t=m({},{borderColor:"#dedede"},this.props.style);this.props.fieldException&&(t=m({},t,{borderColor:"#FF0000"}));var n=this.props.multivalue?S:v,r=null!==this.props.valueField&&null!==this.props.textField?f.createElement(n,o({},this.props.options,{busy:this.props.busy,disabled:this.props.disabled,itemComponent:this.props.itemComponent,valueField:this.props.valueField,textField:this.props.textField,data:this.props.fieldOptions,value:this.props.fieldValue,caseSensitive:!1,minLength:3,placeholder:this.props.placeholder,messages:{open:y.getMessageById(this.context.messages,"queryform.comboField.drop_down")},filter:this.props.comboFilter,style:t,groupBy:this.props.groupBy,onSelect:this.props.onSelect,onChange:function(t){return e.props.onUpdateField(e.props.fieldRowId,e.props.fieldName,e.props.multivalue?t:t[e.props.valueField],e.props.attType)},onToggle:this.props.onToggle,onSearch:this.props.onSearch})):f.createElement(n,o({},this.props.options,{busy:this.props.busy,disabled:this.props.disabled,itemComponent:this.props.itemComponent,data:this.props.fieldOptions,value:this.props.fieldValue,caseSensitive:!1,minLength:3,placeholder:this.props.placeholder,messages:{open:y.getMessageById(this.context.messages,"queryform.comboField.drop_down")},filter:this.props.comboFilter,style:t,groupBy:this.props.groupBy,onSelect:this.props.onSelect,onChange:function(t){return e.props.onUpdateField(e.props.fieldRowId,e.props.fieldName,t,e.props.attType)},onToggle:this.props.onToggle,onSearch:this.props.onSearch}));return this.props.fieldException?f.createElement(g,{placement:"bottom",overlay:f.createElement(b,{id:this.props.fieldRowId+"_tooltip"},f.createElement("strong",null,this.props.fieldException))},r):r}}])&&a(t.prototype,n),r&&a(t,r),u}(f.Component);p(O,"propTypes",{busy:d.bool,style:d.object,valueField:d.string,textField:d.string,placeholder:d.object,itemComponent:d.oneOfType([d.object,d.func]),fieldOptions:d.array,fieldName:d.string,fieldRowId:d.number,attType:d.string,fieldValue:d.oneOfType([d.number,d.string,d.array]),fieldException:d.oneOfType([d.object,d.string]),comboFilter:d.oneOfType([d.bool,d.string,d.func]),groupBy:d.oneOfType([d.string,d.func]),multivalue:d.bool,disabled:d.bool,options:d.object,onSelect:d.func,onToggle:d.func,onSearch:d.func,onUpdateField:d.func,onClick:d.func,onUpdateExceptionField:d.func}),p(O,"contextTypes",{messages:d.object}),p(O,"defaultProps",{options:{},busy:!1,style:{width:"100%"},placeholder:f.createElement(w,{msgId:"queryform.comboField.default_placeholder"}),multivalue:!1,disabled:!1,valueField:null,textField:null,fieldOptions:[],fieldName:null,itemComponent:null,fieldRowId:null,fieldValue:null,fieldException:null,comboFilter:!1,groupBy:function(){},onSelect:function(){},onToggle:function(){},onSearch:function(){},onUpdateField:function(){},onUpdateExceptionField:function(){}}),e.exports=O},"./MapStore2/web/client/components/data/query/ComboFieldListItem.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u,p,d,f=n("./node_modules/react/index.js"),m=n("./node_modules/prop-types/index.js"),y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(c,e);var t,n,r,l=s(c);function c(){return o(this,c),l.apply(this,arguments)}return t=c,(n=[{key:"render",value:function(){return f.createElement("span",{className:this.props.customItemClassName?this.props.customItemClassName:""},this.props.item)}}])&&i(t.prototype,n),r&&i(t,r),c}(f.Component);u=y,p="propTypes",d={item:m.string,textField:m.string,customItemClassName:m.string,valueField:m.string},p in u?Object.defineProperty(u,p,{value:d,enumerable:!0,configurable:!0,writable:!0}):u[p]=d,e.exports=y},"./MapStore2/web/client/components/data/query/CrossLayerFilter.jsx":function(e,t,n){function r(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var i=n("./node_modules/react/index.js"),a=n("./MapStore2/web/client/components/I18N/Message.jsx"),s=n("./MapStore2/web/client/components/misc/switch/SwitchPanel.jsx"),l=n("./node_modules/react-bootstrap/es/index.js"),c=l.Row,u=l.Col,p=n("./node_modules/react-select/dist/react-select.es.js").default,d=n("./MapStore2/web/client/components/data/query/GeometricOperationSelector.jsx"),f=n("./MapStore2/web/client/components/data/query/GroupField.jsx"),m=n("./MapStore2/web/client/utils/URLUtils.js").isSameUrl,y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.search,r=t.url;return m(e,r)||m(e,n&&n.url)},b=function(e){return(e||[]).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id;return"BBOX"!==t}))};e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.crossLayerExpanded,n=void 0===t||t,o=e.spatialOperations,l=e.expandCrossLayerFilterPanel,m=void 0===l?function(){}:l,g=e.layers,h=void 0===g?[]:g,v=e.errorObj,S=e.loadingAttributes,w=e.loadingCapabilities,O=e.searchUrl,j=e.queryCollection,E=void 0===j?{}:j,x=e.attributes,P=void 0===x?[]:x,C=e.operation,T=e.updateLogicCombo,M=void 0===T?function(){}:T,_=e.resetCrossLayerFilter,A=void 0===_?function(){}:_,R=e.setOperation,I=void 0===R?function(){}:R,D=e.setQueryCollectionParameter,k=void 0===D?function(){}:D,L=e.addCrossLayerFilterField,N=void 0===L?function(){}:L,F=e.updateCrossLayerFilterField,U=void 0===F?function(){}:F,G=e.removeCrossLayerFilterField,B=void 0===G?function(){}:G,z=E.typeName,W=E.geometryName,V=E.filterFields,H=E.groupFields,q=void 0===H?[{id:1,logic:"OR",index:0}]:H;return i.createElement(s,{loading:w,expanded:n&&!w&&!v,error:v,errorMsgId:"queryPanel",buttons:r(z?[{glyph:"clear-filter",tooltipId:"queryform.crossLayerFilter.clear",onClick:function(){return A()}}]:[]),onSwitch:m,title:i.createElement(a,{msgId:"queryform.crossLayerFilter.title"})},i.createElement(c,{className:"inline-form filter-field-fixed-row"},i.createElement(u,{xs:6},i.createElement("div",null,i.createElement(a,{msgId:"queryform.crossLayerFilter.targetLayer"}))),i.createElement(u,{xs:6},i.createElement(p,{clearable:!1,disabled:w||!!v,isLoading:S,options:h.filter((function(e){return y(O,e)})).map((function(e){return{label:e.title||e.name,value:e.name}})),placeholder:i.createElement(a,{msgId:"queryform.crossLayerFilter.placeholder"}),filter:"contains",value:z,onChange:function(e){k("typeName",e&&e.value)}}))),z&&W?i.createElement(c,{className:"inline-form filter-field-fixed-row"},i.createElement(u,{xs:6},i.createElement("div",null,i.createElement(a,{msgId:"queryform.crossLayerFilter.operation"}))),i.createElement(u,{xs:6},i.createElement(d,{value:C,onChange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id;return I(t)},spatialOperations:b(o)}))):null,z&&W&&C?i.createElement(c,{className:"filter-field-fixed-row"},i.createElement(u,{xs:12},i.createElement(f,{autocompleteEnabled:!1,withContainer:!1,attributes:P,groupLevels:-1,filterFields:V,actions:{onUpdateLogicCombo:M,onAddFilterField:N,onUpdateFilterField:U,onRemoveFilterField:B},groupFields:q,filterField:!0}))):null)}},"./MapStore2/web/client/components/data/query/DateField.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=n("./node_modules/react/index.js"),f=n("./node_modules/prop-types/index.js"),m=n("./node_modules/moment/moment.js");n("./node_modules/react-widgets/lib/localizers/moment.js")(m);var y=n("./MapStore2/web/client/components/misc/enhancers/utcDateWrapper.js").default,b=n("./MapStore2/web/client/components/I18N/Message.jsx"),g=n("./MapStore2/web/client/utils/TimeUtils.js").getDateTimeFormat,h=n("./node_modules/react-widgets/lib/index.js").DateTimePicker,v=y({dateProp:"value",dateTypeProp:"type",setDateProp:"onChange"})(h);n("./node_modules/react-widgets/lib/less/react-widgets.less");var S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(u,e);var t,n,r,l=s(u);function u(){var e;o(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return p(c(e=l.call.apply(l,[this].concat(n))),"updateValueState",(function(t){t.startDate&&t.endDate&&t.startDate>t.endDate?e.props.onUpdateExceptionField(e.props.fieldRowId,"queryform.attributefilter.datefield.wrong_date_range"):e.props.onUpdateExceptionField(e.props.fieldRowId,null),e.props.onUpdateField(e.props.fieldRowId,e.props.fieldName,t,e.props.attType)})),e}return t=u,(n=[{key:"render",value:function(){var e=this,t=this.props.fieldValue&&this.props.fieldValue.startDate||null,n=this.props.fieldValue&&this.props.fieldValue.endDate||null;return"><"===this.props.operator?d.createElement("div",{className:"query-field"},d.createElement("div",{className:"query-field-value"},this.props.showLabels&&d.createElement(b,{msgId:"queryform.from"}),d.createElement(v,{type:this.props.attType,defaultValue:t,value:t,calendar:this.props.dateEnabled,time:this.props.timeEnabled,format:g(this.context.locale,this.props.attType),onChange:function(t){return e.updateValueState({startDate:t,endDate:n})}})),d.createElement("div",{className:"query-field-value"},this.props.showLabels&&d.createElement(b,{msgId:"queryform.to"}),d.createElement(v,{type:this.props.attType,defaultValue:n,value:n,calendar:this.props.dateEnabled,time:this.props.timeEnabled,format:g(this.context.locale,this.props.attType),onChange:function(n){return e.updateValueState({startDate:t,endDate:n})}}))):d.createElement("div",null,this.props.showLabels&&d.createElement(b,{msgId:"queryform.date"}),d.createElement(v,{type:this.props.attType,defaultValue:t,value:t,time:this.props.timeEnabled,calendar:this.props.dateEnabled,format:g(this.context.locale,this.props.attType),onChange:function(t){e.updateValueState({startDate:t,endDate:null})}}))}}])&&i(t.prototype,n),r&&i(t,r),u}(d.Component);p(S,"propTypes",{attType:f.string,dateEnabled:f.bool,fieldName:f.string,fieldRowId:f.number,fieldValue:f.object,fieldException:f.string,operator:f.string,onUpdateField:f.func,onUpdateExceptionField:f.func,showLabels:f.bool,timeEnabled:f.bool}),p(S,"contextTypes",{locale:f.string}),p(S,"defaultProps",{timeEnabled:!1,dateEnabled:!0,operator:null,fieldName:null,fieldRowId:null,attType:null,fieldValue:null,fieldException:null,onUpdateField:function(){},onUpdateExceptionField:function(){},showLabels:!1}),e.exports=S},"./MapStore2/web/client/components/data/query/FilterField.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=n("./node_modules/react/index.js"),f=n("./node_modules/prop-types/index.js"),m=n("./MapStore2/web/client/components/data/query/ComboField.jsx"),y=n("./node_modules/object-assign/index.js"),b=n("./MapStore2/web/client/utils/LocaleUtils.js"),g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(u,e);var t,n,r,l=s(u);function u(){var e;o(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return p(c(e=l.call.apply(l,[this].concat(n))),"renderOperatorField",(function(){return d.createElement(m,{fieldOptions:e.props.operatorOptions,fieldName:"operator",fieldRowId:e.props.filterField.rowId,fieldValue:e.props.filterField.operator,onUpdateField:e.updateFieldElement})})),p(c(e),"renderValueField",(function(t){return d.cloneElement(d.Children.toArray(e.props.children).filter((function(e){return e.props.attType===t.type}))[0],y({fieldName:"value",fieldRowId:e.props.filterField.rowId,fieldValue:e.props.filterField.value,fieldException:e.props.filterField.exception,onUpdateField:e.updateFieldElement,toggleMenu:e.props.toggleMenu,maxFeaturesWPS:e.props.maxFeaturesWPS,onUpdateExceptionField:e.updateExceptionFieldElement},t.fieldOptions||{}))})),p(c(e),"updateExceptionFieldElement",(function(t,n){e.props.onUpdateExceptionField(t,n)})),p(c(e),"updateFieldElement",(function(t,n,r,o,i){var a;if("attribute"===n?(a=e.props.attributes.filter((function(e){return e.attribute===r}))[0],e.props.onUpdateField(t,n,r,a&&a.type||o,i)):e.props.onUpdateField(t,n,r,"boolean"===o?"string":o,i),"value"===n){var s=e.props.attributes.filter((function(t){return t.dependson&&t.dependson.field===e.props.filterField.attribute}));s.length>0&&e.props.onChangeCascadingValue(s)}})),e}return t=u,(n=[{key:"render",value:function(){var e=this,t=this.props.attributes.filter((function(t){return t.attribute===e.props.filterField.attribute}))[0];return d.createElement("div",{className:"filter-field-row"},d.createElement("div",{className:"filter-field-attribute"},d.createElement(m,{valueField:"id",textField:"name",fieldOptions:this.props.attributes.map((function(e){return{id:e.attribute,name:e.label}})),placeholder:b.getMessageById(this.context.messages,"queryform.attributefilter.combo_placeholder"),fieldValue:this.props.filterField.attribute,attType:t&&t.type,fieldName:"attribute",fieldRowId:this.props.filterField.rowId,onUpdateField:this.updateFieldElement,comboFilter:"contains"})),d.createElement("div",{className:"filter-field-operator"},t?this.renderOperatorField():null),d.createElement("div",{className:"filter-field-value"},t&&this.props.filterField.operator?this.renderValueField(t):null),this.props.deleteButton?d.createElement("div",{className:"filter-field-tools"},this.props.deleteButton):null)}}])&&i(t.prototype,n),r&&i(t,r),u}(d.Component);p(g,"propTypes",{attributes:f.array,filterField:f.object,operatorOptions:f.array,onUpdateField:f.func,maxFeaturesWPS:f.number,toggleMenu:f.func,deleteButton:f.node,onUpdateExceptionField:f.func,onChangeCascadingValue:f.func}),p(g,"contextTypes",{messages:f.object}),p(g,"defaultProps",{attributes:[],filterField:null,operatorOptions:["=",">","<",">=","<=","<>","><"],onUpdateField:function(){},toggleMenu:function(){},onUpdateExceptionField:function(){},onChangeCascadingValue:function(){}}),e.exports=g},"./MapStore2/web/client/components/data/query/GeometricOperationSelector.jsx":function(e,t,n){var r=n("./node_modules/react/index.js"),o=n("./MapStore2/web/client/components/I18N/Message.jsx"),i=n("./node_modules/react-widgets/lib/index.js").DropdownList,a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.item;return r.createElement("span",null,t&&t.name?r.createElement(o,{msgId:t.name}):null)};e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.spatialOperations,n=void 0===t?[]:t,o=e.onChange,s=void 0===o?function(){}:o,l=e.value;return r.createElement(i,{valueField:"id",className:"geometry-operation-selector",onChange:s,data:n,valueComponent:a,value:l,itemComponent:a})}},"./MapStore2/web/client/components/data/query/GeometryDetails.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=n("./node_modules/react/index.js"),f=n("./node_modules/prop-types/index.js"),m=n("./node_modules/react-bootstrap/es/index.js"),y=m.Row,b=m.Col,g=m.FormControl,h=n("./MapStore2/web/client/components/misc/switch/SwitchPanel.jsx"),v=n("./MapStore2/web/client/components/I18N/I18N.jsx"),S=n("./node_modules/object-assign/index.js"),w=n("./MapStore2/web/client/utils/CoordinatesUtils.js"),O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(u,e);var t,n,r,l=s(u);function u(){var e;o(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return p(c(e=l.call.apply(l,[this].concat(n))),"onUpdateBBOX",(function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"replace";"replace"===r&&(e.tempExtent[n]=!isNaN(parseFloat(t))&&parseFloat(t)||0);var o=[];for(var i in e.tempExtent)i&&o.push(e.tempExtent[i]);var a=w.reprojectBbox(o,"EPSG:4326",e.props.projection),s={type:e.props.geometry.type,coordinates:[[[a[0],a[1]],[a[0],a[3]],[a[2],a[3]],[a[2],a[1]],[a[0],a[1]]]],projection:e.props.geometry.projection};e.props.onChangeDrawingStatus(r,void 0,"queryform",[s])})),p(c(e),"onUpdateCircle",(function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"replace";"replace"===r&&(e.tempCircle[n]=parseFloat(t));var o=isNaN(parseFloat(e.tempCircle.x))||isNaN(parseFloat(e.tempCircle.y))?[e.tempCircle.x,e.tempCircle.y]:w.reproject([e.tempCircle.x,e.tempCircle.y],"EPSG:4326",e.props.projection);o=void 0===o.x?{x:o[0],y:o[1]}:o;var i={x:isNaN(o.x)?0:o.x,y:isNaN(o.y)?0:o.y},a={type:e.props.geometry.type,center:i,coordinates:[i.x,i.y],radius:isNaN(e.tempCircle.radius)?0:e.tempCircle.radius,projection:e.props.geometry.projection};e.props.onChangeDrawingStatus(r,void 0,"queryform",[a],{geodesic:e.props.enableGeodesic})})),p(c(e),"onModifyGeometry",(function(){"BBOX"===e.props.type?e.onUpdateBBOX(null,null,"endDrawing"):"Circle"===e.props.type&&e.onUpdateCircle(null,null,"endDrawing"),e.props.onShowPanel(!1)})),p(c(e),"onClosePanel",(function(){e.resetGeom(),e.props.onShowPanel(!1)})),p(c(e),"getStep",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return Math.min(1/Math.pow(10,Math.ceil(Math.min(e,21)/3)-2),1)})),p(c(e),"getStepCircle",(function(t,n){var r=e.getStep(t);return"radius"===n&&!e.isWGS84()&&1e4*r||r})),p(c(e),"getBBOXDimensions",(function(e){var t=w.reprojectBbox(e.extent,e.projection,"EPSG:4326");return{west:t[0],sud:t[1],est:t[2],north:t[3]}})),p(c(e),"getCircleDimensions",(function(t){var n=w.reproject(t.center,t.projection,"EPSG:4326"),r=w.reproject(t.center,t.projection,e.props.projection),o=w.reproject([t.center[0]+t.radius,t.center[1]],t.projection,e.props.projection),i=Math.sqrt((o.x-r.x)*(o.x-r.x)+(o.y-r.y)*(o.y-r.y));return{x:n.x,y:n.y,radius:i}})),p(c(e),"renderCoordinateField",(function(t,n){return d.createElement("div",null,d.createElement("div",{className:"detail-field-title"},n),d.createElement(g,{style:{minWidth:"105px",margin:"auto"},type:"number",id:"queryform_bbox_"+n,step:e.getStep(e.props.zoom),defaultValue:e.roundValue(t,1e6),onChange:function(t){return e.onUpdateBBOX(t.target.value,n)}}))})),p(c(e),"renderCircleField",(function(t,n){return d.createElement(g,{type:"number",id:"queryform_circle_"+n,defaultValue:e.roundValue(t,"radius"!==n||e.isWGS84()?1e6:100),step:e.getStepCircle(e.props.zoom,n),onChange:function(t){return e.onUpdateCircle(t.target.value,n)}})})),p(c(e),"renderDetailsContent",(function(){var t,n=e.props.geometry;if("BBOX"===e.props.type){var r=e.getBBOXDimensions(n);t=d.createElement("div",null,d.createElement("div",{className:"container-fluid"},d.createElement(y,null,d.createElement(b,{xs:4},d.createElement("span",null)),d.createElement(b,{xs:4},e.renderCoordinateField(r.north,"north")),d.createElement(b,{xs:4},d.createElement("span",null))),d.createElement(y,null,d.createElement(b,{xs:4},e.renderCoordinateField(r.west,"west")),d.createElement(b,{xs:4},d.createElement("span",null)),d.createElement(b,{xs:4},e.renderCoordinateField(r.est,"est"))),d.createElement(y,null,d.createElement(b,{xs:4},d.createElement("span",null)),d.createElement(b,{xs:4},e.renderCoordinateField(r.sud,"sud")),d.createElement(b,{xs:4},d.createElement("span",null)))),d.createElement("span",null,d.createElement("hr",{width:"90%"}),d.createElement("div",null,d.createElement("h5",null,d.createElement(v.Message,{msgId:"queryform.spatialfilter.details.details_bbox_label"})))))}else if("Circle"===e.props.type){var o=e.getCircleDimensions(n),i=w.getUnits(e.props.projection);t=d.createElement("div",null,d.createElement("div",{className:"container-fluid"},d.createElement(y,null,d.createElement(b,{xs:2},d.createElement("span",null)),d.createElement(b,{xs:2},d.createElement("span",{className:"details-circle-attribute-name"},"x:")),d.createElement(b,{xs:4},e.renderCircleField(o.x,"x")),d.createElement(b,{xs:4},d.createElement("span",null))),d.createElement(y,null,d.createElement(b,{xs:2},d.createElement("span",null)),d.createElement(b,{xs:2},d.createElement("span",{className:"details-circle-attribute-name"},"y:")),d.createElement(b,{xs:4},e.renderCircleField(o.y,"y")),d.createElement(b,{xs:4},d.createElement("span",null))),d.createElement(y,null,d.createElement(b,{xs:2},d.createElement("span",null)),d.createElement(b,{xs:2},d.createElement("span",{className:"details-circle-attribute-name"},d.createElement(v.Message,{msgId:"queryform.spatialfilter.details.radius",msgParams:{unit:"degrees"===i?"":i}}),":")),d.createElement(b,{xs:4},e.renderCircleField(o.radius,"radius")),d.createElement(b,{xs:4},d.createElement("span",null)))),d.createElement("span",null,d.createElement("hr",{width:"90%"}),d.createElement("div",null,d.createElement("h5",null,d.createElement(v.Message,{msgId:"queryform.spatialfilter.details.details_circle_label"})))))}return t})),p(c(e),"isWGS84",(function(){return"EPSG:4326"===e.props.projection})),p(c(e),"roundValue",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e6;return Math.round(e*t)/t})),p(c(e),"resetGeom",(function(){"BBOX"===e.props.type?e.resetBBOX():"Circle"===e.props.type&&e.resetCircle()})),p(c(e),"resetBBOX",(function(){for(var t in e.extent){if(t)document.getElementById("queryform_bbox_"+t).value=e.roundValue(e.extent[t],1e6),e.onUpdateBBOX(e.extent[t],t)}})),p(c(e),"resetCircle",(function(){document.getElementById("queryform_circle_radius").value=e.roundValue(e.circle.radius,100),e.onUpdateCircle(e.circle.radius,"radius"),document.getElementById("queryform_circle_x").value=e.roundValue(e.circle.x,e.isWGS84()?1e6:100),e.onUpdateCircle(e.circle.x,"x"),document.getElementById("queryform_circle_y").value=e.roundValue(e.circle.y,e.isWGS84()?1e6:100),e.onUpdateCircle(e.circle.y,"y")})),e}return t=u,(n=[{key:"componentDidMount",value:function(){var e=this.props.geometry;"BBOX"===this.props.type?(this.extent=this.getBBOXDimensions(e),this.tempExtent=S({},this.extent)):"Circle"===this.props.type&&(this.circle=this.getCircleDimensions(e),this.tempCircle=S({},this.circle))}},{key:"render",value:function(){var e=this;return d.createElement(h,{buttons:[{key:"confirm",glyph:"ok",tooltipId:"confirm",onClick:function(){return e.onModifyGeometry()}},{key:"reset",tooltipId:"queryform.reset",glyph:"clear-filter",onClick:function(){return e.resetGeom()}},{key:"close",glyph:"1-close",onClick:function(){return e.onClosePanel(!1)}}],title:d.createElement(v.Message,{msgId:"queryform.spatialfilter.details.details_header"}),locked:!0,expanded:!0,className:"details-panel",bsStyle:"primary"},this.renderDetailsContent())}}])&&i(t.prototype,n),r&&i(t,r),u}(d.Component);p(O,"propTypes",{useMapProjection:f.bool,geometry:f.object,type:f.string,onShowPanel:f.func,onChangeDrawingStatus:f.func,zoom:f.number,projection:f.string,enableGeodesic:f.bool}),p(O,"defaultProps",{useMapProjection:!0,geometry:null,type:null,onShowPanel:function(){},onChangeDrawingStatus:function(){}}),e.exports=O},"./MapStore2/web/client/components/data/query/GroupField.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=n("./node_modules/prop-types/index.js"),y=n("./node_modules/react/index.js"),b=n("./node_modules/react-bootstrap/es/index.js"),g=b.Button,h=b.Glyphicon,v=b.Tooltip,S=n("./MapStore2/web/client/components/misc/toolbar/Toolbar.jsx"),w=n("./MapStore2/web/client/components/misc/OverlayTrigger.jsx"),O=n("./MapStore2/web/client/components/data/query/FilterField.jsx"),j=n("./MapStore2/web/client/components/data/query/ComboField.jsx"),E=n("./MapStore2/web/client/components/data/query/DateField.jsx"),x=n("./MapStore2/web/client/components/data/query/NumberField.jsx"),P=n("./MapStore2/web/client/components/data/query/TextField.jsx"),C=n("./MapStore2/web/client/components/data/query/AutocompleteFieldHOC.jsx"),T=n("./MapStore2/web/client/components/misc/switch/SwitchPanel.jsx"),M=n("./MapStore2/web/client/components/misc/StringSelector.jsx"),_=n("./MapStore2/web/client/utils/LocaleUtils.js"),A=n("./MapStore2/web/client/components/I18N/I18N.jsx"),R=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(u,e);var t,n,r,i=c(u);function u(){var e;a(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return f(p(e=i.call.apply(i,[this].concat(n))),"getComboValues",(function(t,n){if(t&&t.dependson){var r=e.props.filterFields.filter((function(e){return e.attribute===t.dependson.field}))[0];if(r&&r.value){var o=n.filter((function(e){return e.attribute===r.attribute}))[0],i=o.values.filter((function(e){return e[o.valueId]===r.value}))[0][t.dependson.from],a=t.values.filter((function(e){return e[t.dependson.to]===i}));return t&&"list"===t.type?a.map((function(e){return{id:t.fidPrefix?t.fidPrefix+"."+e[t.valueId]:e[t.valueId],name:e[t.valueLabel]}})):null}}return t&&"list"===t.type?t.values.map((function(e){return{id:t.fidPrefix?t.fidPrefix+"."+e[t.valueId]:e[t.valueId],name:e[t.valueLabel]}})):null})),f(p(e),"getOperator",(function(t){switch(t&&t.type?t.type:""){case"list":return e.props.listOperators;case"string":return e.props.stringOperators;case"boolean":return e.props.booleanOperators;default:return e.props.defaultOperators}})),f(p(e),"renderFilterField",(function(t){var n=e.props.attributes.filter((function(e){return e.attribute===t.attribute}))[0],r=e.getComboValues(n,e.props.attributes),o=t.exception?y.createElement(w,{placement:"bottom",overlay:y.createElement(v,{id:t.rowId+"tooltip"},y.createElement("strong",null,y.createElement(A.Message,{msgId:t.exception||""})))},y.createElement(g,{id:"remove-filter-field",className:"filter-buttons no-border",style:{backgroundColor:"red"},onClick:function(){return e.props.actions.onRemoveFilterField(t.rowId)}},y.createElement(h,{style:{color:"white"},glyph:"glyphicon glyphicon-warning-sign"}))):y.createElement(w,{placement:"top",overlay:y.createElement(v,{id:t.rowId+"tooltip"},y.createElement("strong",null,y.createElement(A.Message,{msgId:"queryform.attributefilter.delete"})))},y.createElement(g,{id:"remove-filter-field",className:"filter-buttons no-border",onClick:function(){return e.props.actions.onRemoveFilterField(t.rowId)}},y.createElement(h,{glyph:e.props.removeButtonIcon})));return y.createElement(O,{key:t.rowId,deleteButton:o,attributes:e.props.attributes,filterField:t,operatorOptions:e.getOperator(n),onUpdateField:e.props.actions.onUpdateFilterField,toggleMenu:e.props.actions.toggleMenu,maxFeaturesWPS:e.props.maxFeaturesWPS,onUpdateExceptionField:e.props.actions.onUpdateExceptionField,onChangeCascadingValue:e.props.actions.onChangeCascadingValue},y.createElement(j,{attType:"list",valueField:"id",textField:"name",fieldOptions:r||[],comboFilter:"contains"}),y.createElement(E,{attType:"date",dateEnabled:!0,operator:t.operator}),y.createElement(E,{attType:"date-time",timeEnabled:!0,dateEnabled:!0,operator:t.operator}),y.createElement(E,{attType:"time",timeEnabled:!0,dateEnabled:!1,operator:t.operator}),y.createElement(x,{operator:t.operator,attType:"number"}),e.props.autocompleteEnabled?y.createElement(C,{filterField:t,attType:"string"}):y.createElement(P,{operator:t.operator,attType:"string"}),y.createElement(j,{fieldOptions:["true","false"],attType:"boolean",comboFilter:"contains"}))})),f(p(e),"renderGroupButtons",(function(t){var n=[];return t.index<=e.props.groupLevels&&n.push({key:"add-condition-group",id:"add-condition-group",className:"filter-buttons no-border",glyph:"list-alt",tooltipId:"queryform.attributefilter.add_group",onClick:function(){return e.props.actions.onAddGroupField(t.id,t.index)}}),n.push({key:"add-filter-field",id:"add-filter-field",className:"filter-buttons no-border",glyph:e.props.addButtonIcon,tooltipId:"queryform.attributefilter.add_condition",onClick:function(){return e.props.actions.onAddFilterField(t.id)}}),t.groupId&&n.push({key:"remove-group",className:"filter-buttons no-border",tooltipId:"queryform.attributefilter.delete",glyph:e.props.removeButtonIcon,onClick:function(){return e.props.actions.onRemoveGroupField(t.id)}}),y.createElement(S,{buttons:n,btnDefaultProps:{}})})),f(p(e),"renderGroupHeader",(function(t){return y.createElement("div",{className:"logicHeader filter-logic-header"},y.createElement("div",{key:"filter-logic-header",className:"filter-logic-header-text m-label"},y.createElement("span",{className:"group_label_a"},y.createElement(A.Message,{msgId:"queryform.attributefilter.group_label_a"})),"",y.createElement(M,{options:e.props.logicComboOptions,valueField:"logic",value:t.logic,onSelect:function(n){return e.props.actions.onUpdateLogicCombo(t.id,n)},labelRenderer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name;return y.createElement(A.Message,{msgId:t})}}),"",y.createElement("span",{className:"group_label_b"},y.createElement(A.Message,{msgId:"queryform.attributefilter.group_label_b"}))),e.renderGroupButtons(t))})),f(p(e),"renderGroupField",(function(t){var n=e.props.filterFields.filter((function(e){return e.groupId===t.id})),r=e.props.groupFields.filter((function(e){return e.groupId===t.id})),i=[].concat(o(n),o(r)).map((function(t){return void 0!==t.rowId?e.renderFilterField(t):e.renderGroupField(t)}));return y.createElement("div",{className:"mapstore-conditions-group",key:t.id},e.renderGroupHeader(t),y.createElement("div",{className:"query-content"},i))})),f(p(e),"renderHeader",(function(){return _.getMessageById(e.context.messages,"queryform.attributefilter.attribute_filter_header")})),f(p(e),"updateLogicCombo",(function(t,n,r){var o=e.props.logicComboOptions.filter((function(t){return r===_.getMessageById(e.context.messages,t.name)}))[0].logic;e.props.actions.onUpdateLogicCombo(t,o)})),e}return t=u,(n=[{key:"render",value:function(){var e=this;return this.props.withContainer?y.createElement(T,{id:"attributeFilterPanel",className:"query-filter-container",header:this.renderHeader(),collapsible:!0,expanded:this.props.attributePanelExpanded,onSwitch:function(t){return e.props.actions.onExpandAttributeFilterPanel(t)}},this.props.groupFields.filter((function(e){return!e.groupId})).map(this.renderGroupField)):y.createElement("div",{className:"query-filter-container"},this.props.groupFields.filter((function(e){return!e.groupId})).map(this.renderGroupField))}}])&&s(t.prototype,n),r&&s(t,r),u}(y.Component);f(R,"propTypes",{groupLevels:m.number,withContainer:m.bool,autocompleteEnabled:m.bool,maxFeaturesWPS:m.number,groupFields:m.array,filterFields:m.array,attributes:m.array,fieldWidth:m.string,removeButtonIcon:m.string,addButtonIcon:m.string,logicComboOptions:m.array,attributePanelExpanded:m.bool,actions:m.object,listOperators:m.array,stringOperators:m.array,booleanOperators:m.array,defaultOperators:m.array}),f(R,"contextTypes",{messages:m.object}),f(R,"defaultProps",{autocompleteEnabled:!0,withContainer:!0,groupLevels:1,groupFields:[],filterFields:[],attributes:[],removeButtonIcon:"trash",addButtonIcon:"glyphicon glyphicon-plus",attributePanelExpanded:!0,logicComboOptions:[{logic:"OR",name:"queryform.attributefilter.groupField.any"},{logic:"AND",name:"queryform.attributefilter.groupField.all"},{logic:"NOR",name:"queryform.attributefilter.groupField.none"}],actions:{onAddGroupField:function(){},onAddFilterField:function(){},onRemoveFilterField:function(){},onUpdateFilterField:function(){},onUpdateExceptionField:function(){},onUpdateLogicCombo:function(){},onRemoveGroupField:function(){},onChangeCascadingValue:function(){},onExpandAttributeFilterPanel:function(){},toggleMenu:function(){}},listOperators:["="],stringOperators:["=","like","ilike","isNull"],booleanOperators:["="],defaultOperators:["=",">","<",">=","<=","<>","><"]}),e.exports=R},"./MapStore2/web/client/components/data/query/NumberField.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?d(e):t}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=n("./node_modules/prop-types/index.js"),b=n("./node_modules/react/index.js"),g=n("./node_modules/react-bootstrap/es/index.js").Tooltip,h=n("./MapStore2/web/client/components/misc/OverlayTrigger.jsx"),v=n("./MapStore2/web/client/utils/LocaleUtils.js");n("./node_modules/react-widgets/lib/localizers/simple-number.js")();var S=n("./node_modules/react-widgets/lib/index.js").NumberPicker,w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(p,e);var t,n,r,o=u(p);function p(){var e;s(this,p);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return m(d(e=o.call.apply(o,[this].concat(n))),"renderPicker",(function(t){var n=e.props.label?b.createElement("label",null,e.props.label):null,r=e.props.lowLabel?b.createElement("label",null,e.props.lowLabel):null,o=e.props.upLabel?b.createElement("label",null,e.props.upLabel):null;return"><"===e.props.operator?b.createElement("div",{className:"query-field"},b.createElement("div",{className:"query-field-value"},r,b.createElement(S,a({style:t,value:e.props.fieldValue&&null!==e.props.fieldValue.lowBound&&void 0!==e.props.fieldValue.lowBound?e.props.fieldValue.lowBound:null,onChange:function(t){return!isNaN(t)&&e.changeNumber({lowBound:t,upBound:e.props.fieldValue&&null!==e.props.fieldValue.upBound&&void 0!==e.props.fieldValue.upBound?e.props.fieldValue.upBound:null})}},e.props.options))),b.createElement("div",{className:"query-field-value"},o,b.createElement(S,a({style:t,value:e.props.fieldValue&&null!==e.props.fieldValue.upBound&&void 0!==e.props.fieldValue.upBound?e.props.fieldValue.upBound:null,onChange:function(t){return!isNaN(t)&&e.changeNumber({upBound:t,lowBound:e.props.fieldValue&&null!==e.props.fieldValue.lowBound&&void 0!==e.props.fieldValue.lowBound?e.props.fieldValue.lowBound:null})}},e.props.options)))):b.createElement("div",null,n,b.createElement(S,a({style:t,value:e.props.fieldValue&&null!==e.props.fieldValue.lowBound&&void 0!==e.props.fieldValue.lowBound?e.props.fieldValue.lowBound:e.props.fieldValue,onChange:function(t){return!isNaN(t)&&e.changeNumber(t)}},e.props.options)))})),m(d(e),"changeNumber",(function(t){"><"===e.props.operator?null!==t.lowBound&&void 0!==t.lowBound&&null!==t.upBound&&void 0!==t.upBound&&t.lowBound>=t.upBound?e.props.onUpdateExceptionField(e.props.fieldRowId,v.getMessageById(e.context.messages,"queryform.attributefilter.numberfield.wrong_range")):e.props.fieldException&&e.props.onUpdateExceptionField(e.props.fieldRowId,null):e.props.isRequired&&null==t?e.props.onUpdateExceptionField(e.props.fieldRowId,v.getMessageById(e.context.messages,"queryform.attributefilter.numberfield.isRequired")):e.props.fieldException&&e.props.onUpdateExceptionField(e.props.fieldRowId,null),e.props.onUpdateField(e.props.fieldRowId,e.props.fieldName,t,e.props.attType)})),e}return t=p,(n=[{key:"render",value:function(){var e=this.props.style;return this.props.fieldException&&(e=i(i({},this.props.style),{},{borderColor:"#FF0000"})),b.createElement(h,{placement:"bottom",overlay:this.props.fieldException?b.createElement(g,{id:this.props.fieldRowId+"_tooltip"},b.createElement("strong",null,this.props.fieldException)):b.createElement("noscript",null)},this.renderPicker(e))}}])&&l(t.prototype,n),r&&l(t,r),p}(b.Component);m(w,"propTypes",{operator:y.string,fieldName:y.string,fieldRowId:y.number,attType:y.string,fieldValue:y.oneOfType([y.number,y.object]),fieldException:y.oneOfType([y.object,y.bool,y.string]),onUpdateField:y.func,onUpdateExceptionField:y.func,isRequired:y.bool,label:y.string,lowLabel:y.string,upLabel:y.string,options:y.shape({format:y.string,min:y.number,max:y.number,step:y.number,precision:y.number}),style:y.object}),m(w,"contextTypes",{messages:y.object}),m(w,"defaultProps",{style:{borderColor:"#dedede"},operator:"=",fieldName:null,fieldRowId:null,attType:"number",fieldValue:null,fieldException:null,isRequired:!1,label:null,lowLabel:null,upLabel:null,options:{},onUpdateField:function(){},onUpdateExceptionField:function(){}}),e.exports=w},"./MapStore2/web/client/components/data/query/QueryBuilder.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=n("./node_modules/prop-types/index.js"),f=n("./node_modules/react/index.js"),m=n("./MapStore2/web/client/components/data/query/GroupField.jsx"),y=n("./MapStore2/web/client/components/data/query/SpatialFilter.jsx"),b=n("./MapStore2/web/client/components/data/query/QueryToolbar.jsx"),g=n("./MapStore2/web/client/components/data/query/enhancers/crossLayerFilter.js")(n("./MapStore2/web/client/components/data/query/CrossLayerFilter.jsx")),h=n("./MapStore2/web/client/components/layout/BorderLayout.jsx"),v=n("./node_modules/react-spinkit/dist/index.js");n("./MapStore2/web/client/components/data/query/queryform.css");var S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(u,e);var t,n,r,c=l(u);function u(){return i(this,u),c.apply(this,arguments)}return t=u,(n=[{key:"render",value:function(){if(""!==this.props.featureTypeError)return f.createElement("div",{style:{margin:"0 auto","text-align":"center"}},this.props.featureTypeErrorText);var e=f.createElement("div",{className:"m-header"},this.props.header,f.createElement(b,{sendFilters:{attributeFilter:this.props.attributePanelExpanded,spatialFilter:this.props.spatialPanelExpanded,crossLayerFilter:this.props.crossLayerExpanded},params:this.props.params,filterFields:this.props.filterFields,groupFields:this.props.groupFields,spatialField:this.props.spatialField,toolbarEnabled:this.props.toolbarEnabled,searchUrl:this.props.searchUrl,showGeneratedFilter:this.props.showGeneratedFilter,featureTypeName:this.props.featureTypeName,ogcVersion:this.props.ogcVersion,filterType:this.props.filterType,actions:this.props.queryToolbarActions,resultTitle:this.props.resultTitle,pagination:this.props.pagination,sortOptions:this.props.sortOptions,crossLayerFilter:this.props.crossLayerFilterOptions.crossLayerFilter,hits:this.props.hits,allowEmptyFilter:this.props.allowEmptyFilter,emptyFilterWarning:this.props.emptyFilterWarning,appliedFilter:this.props.appliedFilter,storedFilter:this.props.storedFilter,advancedToolbar:this.props.advancedToolbar,loadingError:this.props.loadingError}));return this.props.attributes.length>0?f.createElement(h,{header:e,className:"mapstore-query-builder",id:"query-form-panel"},f.createElement(m,{autocompleteEnabled:this.props.autocompleteEnabled,maxFeaturesWPS:this.props.maxFeaturesWPS,attributes:this.props.attributes,groupLevels:this.props.groupLevels,filterFields:this.props.filterFields,groupFields:this.props.groupFields,removeButtonIcon:this.props.removeButtonIcon,addButtonIcon:this.props.addButtonIcon,attributePanelExpanded:this.props.attributePanelExpanded,actions:this.props.attributeFilterActions}),this.props.toolsOptions.hideSpatialFilter?null:f.createElement(y,{useMapProjection:this.props.useMapProjection,spatialField:this.props.spatialField,spatialOperations:this.props.spatialOperations,spatialMethodOptions:this.props.spatialMethodOptions,spatialPanelExpanded:this.props.spatialPanelExpanded,showDetailsPanel:this.props.showDetailsPanel,actions:this.props.spatialFilterActions,zoom:this.props.zoom,projection:this.props.projection}),this.props.toolsOptions.hideCrossLayer?null:f.createElement(g,o({spatialOperations:this.props.spatialOperations,crossLayerExpanded:this.props.crossLayerExpanded,searchUrl:this.props.searchUrl,featureTypeName:this.props.featureTypeName},this.props.crossLayerFilterOptions,this.props.crossLayerFilterActions))):f.createElement("div",{style:{margin:"0 auto",width:"60px"}},f.createElement(v,{spinnerName:"three-bounce",overrideSpinnerClassName:"spinner"}))}}])&&a(t.prototype,n),r&&a(t,r),u}(f.Component);p(S,"propTypes",{params:d.object,featureTypeConfigUrl:d.string,useMapProjection:d.bool,attributes:d.array,featureTypeError:d.string,featureTypeErrorText:d.node,groupLevels:d.number,maxFeaturesWPS:d.number,filterFields:d.array,groupFields:d.array,spatialField:d.object,removeButtonIcon:d.string,addButtonIcon:d.string,attributePanelExpanded:d.bool,spatialPanelExpanded:d.bool,crossLayerExpanded:d.bool,showDetailsPanel:d.bool,toolbarEnabled:d.bool,searchUrl:d.string,showGeneratedFilter:d.oneOfType([d.bool,d.string]),filterType:d.string,featureTypeName:d.string,ogcVersion:d.string,attributeFilterActions:d.object,spatialFilterActions:d.object,queryToolbarActions:d.object,resultTitle:d.string,pagination:d.object,sortOptions:d.object,spatialOperations:d.array,spatialMethodOptions:d.array,crossLayerFilterOptions:d.object,crossLayerFilterActions:d.object,hits:d.bool,maxHeight:d.number,allowEmptyFilter:d.bool,autocompleteEnabled:d.bool,emptyFilterWarning:d.bool,header:d.node,zoom:d.number,projection:d.string,toolsOptions:d.object,appliedFilter:d.object,storedFilter:d.object,advancedToolbar:d.bool,loadingError:d.bool}),p(S,"defaultProps",{params:{},featureTypeConfigUrl:null,useMapProjection:!0,groupLevels:1,groupFields:[],filterFields:[],attributes:[],spatialMethodOptions:[],spatialOperations:[],featureTypeError:"",spatialField:{},crossLayerFilter:null,removeButtonIcon:"trash",addButtonIcon:"glyphicon glyphicon-plus",attributePanelExpanded:!0,spatialPanelExpanded:!0,showDetailsPanel:!1,toolbarEnabled:!0,searchUrl:"",showGeneratedFilter:!1,featureTypeName:null,pagination:null,sortOptions:null,hits:!1,maxHeight:830,allowEmptyFilter:!1,autocompleteEnabled:!0,emptyFilterWarning:!1,advancedToolbar:!1,loadingError:!1,attributeFilterActions:{onAddGroupField:function(){},onAddFilterField:function(){},onRemoveFilterField:function(){},onUpdateFilterField:function(){},onUpdateExceptionField:function(){},onUpdateLogicCombo:function(){},onRemoveGroupField:function(){},onChangeCascadingValue:function(){},onExpandAttributeFilterPanel:function(){}},spatialFilterActions:{onExpandSpatialFilterPanel:function(){},onSelectSpatialMethod:function(){},onSelectSpatialOperation:function(){},onChangeDrawingStatus:function(){},onRemoveSpatialSelection:function(){},onShowSpatialSelectionDetails:function(){},onSelectViewportSpatialMethod:function(){},onChangeDwithinValue:function(){}},crossLayerFilterOptions:{},crossLayerFilterActions:{},queryToolbarActions:{onQuery:function(){},onReset:function(){},onChangeDrawingStatus:function(){},onSaveFilter:function(){},onRestoreFilter:function(){}},toolsOptions:{}}),e.exports=S},"./MapStore2/web/client/components/data/query/QueryPanelHeader.jsx":function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var o=n("./node_modules/react/index.js"),i=n("./MapStore2/web/client/components/I18N/Message.jsx"),a=n("./node_modules/react-bootstrap/es/index.js"),s=a.Button,l=a.Glyphicon,c=n("./MapStore2/web/client/components/misc/enhancers/popover.js")((function(e){return o.createElement("div",r({className:"square-button pull-right no-border",style:{display:"flex"}},e),o.createElement(l,{glyph:"exclamation-mark",className:"text-danger"}))}));e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.loadingError,n=e.onToggleQuery,r=void 0===n?function(){}:n;return o.createElement("div",{className:"mapstore-block-width"},o.createElement(s,{id:"toc-query-close-button",key:"menu-button",className:"square-button no-border",onClick:function(){return r()}},o.createElement(l,{glyph:"arrow-left"})),t&&o.createElement(c,{popover:{text:o.createElement(i,{msgId:"queryform.loadingError"})}})||o.createElement("div",{className:"square-button pull-right no-border",style:{display:"flex"}},o.createElement(l,{glyph:"filter",className:"text-primary"})))}},"./MapStore2/web/client/components/data/query/QueryToolbar.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=n("./node_modules/prop-types/index.js"),d=n("./node_modules/react/index.js"),f=n("./node_modules/react-bootstrap/es/index.js").Button,m=n("./node_modules/lodash/lodash.js").isEqual,y=n("./MapStore2/web/client/components/misc/Modal.jsx"),b=n("./MapStore2/web/client/utils/FilterUtils.jsx"),g=b.checkOperatorValidity,h=b.setupCrossLayerFilterDefaults,v=b.isCrossLayerFilterValid,S=b.isFilterEmpty,w=n("./MapStore2/web/client/components/misc/toolbar/Toolbar.jsx"),O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(c,e);var t,n,r,s=a(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),u(l(t=s.call(this,e)),"getCurrentFilter",(function(){return{featureTypeName:t.props.featureTypeName,groupFields:t.props.groupFields,filterFields:t.props.sendFilters&&t.props.sendFilters.attributeFilter&&t.props.filterFields.filter((function(e){return g(e.value,e.operator)}))||[],spatialField:t.props.sendFilters&&t.props.sendFilters.spatialFilter&&t.props.spatialField||{attribute:t.props.spatialField&&t.props.spatialField.attribute},pagination:t.props.pagination,filterType:t.props.filterType,ogcVersion:t.props.ogcVersion,sortOptions:t.props.sortOptions,crossLayerFilter:t.props.sendFilters&&t.props.sendFilters.crossLayerFilter&&h(t.props.crossLayerFilter)||null,hits:t.props.hits}})),u(l(t),"isCurrentFilterChanged",(function(){var e=t.getCurrentFilter(),n={groupFields:e.groupFields,filterFields:e.filterFields,spatialField:e.spatialField,crossLayerFilter:e.crossLayerFilter},r=t.props.appliedFilter||{},o={groupFields:r.groupFields,filterFields:r.attributePanelExpanded&&r.filterFields||[],spatialField:r.spatialPanelExpanded&&r.spatialField||{attribute:t.props.spatialField&&t.props.spatialField.attribute},crossLayerFilter:r.crossLayerExpanded&&r.crossLayerFilter&&r.crossLayerFilter.operation?h(r.crossLayerFilter):null};return!m(n,o)})),u(l(t),"search",(function(){var e=t.getCurrentFilter();t.props.actions.onQuery(t.props.searchUrl,e,t.props.params),t.props.advancedToolbar&&t.props.actions.storeAppliedFilter()})),u(l(t),"reset",(function(){if(t.props.actions.onChangeDrawingStatus("clean","","queryform",[]),t.props.actions.onReset(),t.props.advancedToolbar){var e={featureTypeName:t.props.featureTypeName,groupFields:[],filterFields:[],spatialField:{attribute:t.props.spatialField&&t.props.spatialField.attribute},pagination:t.props.pagination,filterType:t.props.filterType,ogcVersion:t.props.ogcVersion,sortOptions:t.props.sortOptions,crossLayerFilter:null,hits:t.props.hits};t.props.actions.onQuery(t.props.searchUrl,e,t.props.params),t.props.advancedToolbar&&t.props.actions.storeAppliedFilter()}})),u(l(t),"restorePersistedFilter",(function(){t.props.actions.onRestoreFilter()})),t}return t=c,(n=[{key:"render",value:function(){var e=this,t=this.props.filterFields.filter((function(e){return e.exception})).length>0,n=this.props.allowEmptyFilter&&!this.props.advancedToolbar,r=this.props.filterFields.filter((function(e){return e.value||0===e.value})).length>0,o=S(this.props),i=S(this.props.appliedFilter),a=this.isCurrentFilterChanged(),s=r||this.props.spatialField.geometry||v(this.props.crossLayerFilter),l=!m(this.props.appliedFilter,this.props.storedFilter),c=n||o&&this.props.appliedFilter&&!i,u=t||!this.props.toolbarEnabled||o&&!c||!o&&(!s||!a),p=this.props.emptyFilterWarning&&o&&a,b=this.props.advancedToolbar?"queryform.apply":this.props.queryBtnMsgId,g=[{tooltipId:p?"queryform.emptyfilter":b,disabled:u,noTooltipWhenDisabled:!0,glyph:this.props.advancedToolbar?"ok":this.props.queryBtnGlyph,className:p?"square-button-md showWarning":"square-button-md",id:"query-toolbar-query",onClick:this.search}];if(this.props.advancedToolbar){var h=!l||this.props.loadingError||a,O=!l||!this.props.storedFilter||!this.props.toolbarEnabled,j=!this.props.appliedFilter||this.props.appliedFilter&&i||!this.props.toolbarEnabled;g=g.concat([{tooltipId:"queryform.save",disabled:h,noTooltipWhenDisabled:!0,glyph:"floppy-disk",id:"query-toolbar-save",onClick:this.props.actions.onSaveFilter},{tooltipId:"queryform.discard",disabled:O,noTooltipWhenDisabled:!0,glyph:"undo",id:"query-toolbar-discard",onClick:this.restorePersistedFilter},{tooltipId:"queryform.reset",glyph:"clear-filter",noTooltipWhenDisabled:!0,id:"reset",disabled:j,onClick:this.reset}])}else g=[{tooltipId:"queryform.reset",glyph:"clear-filter",noTooltipWhenDisabled:!0,id:"reset",disabled:!this.props.toolbarEnabled,onClick:this.reset}].concat(g);return d.createElement("div",{className:"container-fluid query-toolbar"},d.createElement(w,{btnDefaultProps:{bsStyle:"primary",className:"square-button-md",tooltipPosition:"bottom"},className:"queryFormToolbar row-fluid pull-right",buttons:g}),d.createElement(y,{show:!!this.props.showGeneratedFilter,bsSize:"large"},d.createElement(y.Header,null,d.createElement(y.Title,null,this.props.resultTitle)),d.createElement(y.Body,null,d.createElement("textarea",{style:{width:"862px",maxWidth:"862px",height:"236px",maxHeight:"236px"}},this.props.showGeneratedFilter)),d.createElement(y.Footer,null,d.createElement(f,{style:{float:"right"},onClick:function(){return e.props.actions.onQuery(null,null)}},"Close"))))}}])&&o(t.prototype,n),r&&o(t,r),c}(d.Component);u(O,"propTypes",{filterType:p.string,params:p.object,filterFields:p.array,groupFields:p.array,spatialField:p.object,sendFilters:p.object,crossLayerFilter:p.object,toolbarEnabled:p.bool,searchUrl:p.string,showGeneratedFilter:p.oneOfType([p.bool,p.string]),featureTypeName:p.string,actions:p.object,ogcVersion:p.string,titleMsgId:p.string,queryBtnMsgId:p.string,resultTitle:p.string,queryBtnGlyph:p.string,pagination:p.object,sortOptions:p.object,hits:p.bool,allowEmptyFilter:p.bool,emptyFilterWarning:p.bool,appliedFilter:p.object,storedFilter:p.object,advancedToolbar:p.bool,loadingError:p.bool}),u(O,"defaultProps",{sendFilters:{attributeFilter:!0,spatialFilter:!0,crossLayerFilter:!0},filterType:"OGC",params:{},groupFields:[],filterFields:[],spatialField:{},toolbarEnabled:!0,searchUrl:null,showGeneratedFilter:!1,featureTypeName:null,titleMsgId:"queryform.title",queryBtnMsgId:"queryform.query",resultTitle:"Generated Filter",queryBtnGlyph:"search",pagination:null,sortOptions:null,hits:!1,allowEmptyFilter:!1,emptyFilterWarning:!1,advancedToolbar:!1,loadingError:!1,actions:{onQuery:function(){},onReset:function(){},onChangeDrawingStatus:function(){},onSaveFilter:function(){},onRestoreFilter:function(){},storeAppliedFilter:function(){}}}),e.exports=O},"./MapStore2/web/client/components/data/query/SpatialFilter.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=n("./node_modules/react/index.js"),m=n("./node_modules/lodash/lodash.js").find,y=n("./node_modules/prop-types/index.js"),b=n("./node_modules/react-bootstrap/es/index.js"),g=b.Row,h=b.Col,v=b.Panel,S=b.Glyphicon,w=b.FormControl,O=n("./MapStore2/web/client/components/data/query/ComboField.jsx"),j=n("./MapStore2/web/client/components/data/query/GeometryDetails.jsx"),E=n("./MapStore2/web/client/components/misc/AutocompleteWFSCombobox.jsx").AutocompleteWFSCombobox,x=n("./MapStore2/web/client/components/data/query/ComboFieldListItem.jsx"),P=n("./MapStore2/web/client/observables/autocomplete.js").createWFSFetchStream,C=n("./MapStore2/web/client/components/data/query/ZoneField.jsx"),T=n("./MapStore2/web/client/utils/LocaleUtils.js"),M=n("./MapStore2/web/client/components/misc/switch/SwitchPanel.jsx"),_=n("./MapStore2/web/client/components/I18N/I18N.jsx"),A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(p,e);var t,n,r,c=l(p);function p(){var e;i(this,p);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return d(u(e=c.call.apply(c,[this].concat(n))),"getMethodFromId",(function(t){return m(e.props.spatialMethodOptions,(function(e){return e&&e.id===t}))||null})),d(u(e),"renderHeader",(function(){var t=T.getMessageById(e.context.messages,"queryform.spatialfilter.spatial_filter_header");return f.createElement("span",null,f.createElement("span",{style:{cursor:"pointer"},onClick:e.props.actions.onExpandSpatialFilterPanel.bind(null,!e.props.spatialPanelExpanded)},t),f.createElement("button",{onClick:e.props.actions.onExpandSpatialFilterPanel.bind(null,!e.props.spatialPanelExpanded),className:"close"},e.props.spatialPanelExpanded?f.createElement(S,{glyph:"glyphicon glyphicon-collapse-down"}):f.createElement(S,{glyph:"glyphicon glyphicon-expand"})))})),d(u(e),"renderSpatialHeader",(function(){var t=e.getMethodFromId(e.props.spatialField.method);return f.createElement("div",null,f.createElement(g,{className:"logicHeader inline-form filter-field-row filter-field-fixed-row"},f.createElement(h,{xs:6},f.createElement("div",null,f.createElement(_.Message,{msgId:"queryform.spatialfilter.filterType"}))),f.createElement(h,{xs:6},f.createElement(O,{itemComponent:function(t){return f.createElement(x,o({customItemClassName:e.getMethodFromId(t.item)&&e.getMethodFromId(t.item).customItemClassName||""},t))},fieldOptions:e.props.spatialMethodOptions.map((function(t){return T.getMessageById(e.context.messages,t.name)||t.name})),placeholder:T.getMessageById(e.context.messages,"queryform.spatialfilter.combo_placeholder"),fieldName:"method",fieldRowId:(new Date).getTime(),fieldValue:T.getMessageById(e.context.messages,t?t.name:"")||t&&t.name||"",onUpdateField:e.updateSpatialMethod}))))})),d(u(e),"renderDwithin",(function(){return f.createElement(g,{className:"container-fluid filter-field-fixed-row"},f.createElement(h,{xs:6,className:"filter-text-desc"},f.createElement(_.Message,{msgId:"queryform.spatialfilter.dwithin_label"})),f.createElement(h,{xs:6},f.createElement(w,{type:"number",min:"0",defaultValue:"0",disabled:!e.props.spatialField.geometry,id:"queryform_dwithin_field",onChange:function(t){return e.props.actions.onChangeDwithinValue(t.target.value,name)}})))})),d(u(e),"renderZoneFields",(function(){return e.props.spatialField.method&&"ZONE"===e.props.spatialField.method&&e.props.spatialField.zoneFields&&e.props.spatialField.zoneFields.length>0?e.props.spatialField.zoneFields.map((function(t){return f.createElement(C,{key:t.id,open:t.open,zoneId:t.id,url:t.url,typeName:t.typeName,wfs:t.wfs,busy:t.busy,label:t.label,values:t.values,value:t.value,valueField:t.valueField,textField:t.textField,searchText:t.searchText,searchMethod:t.searchMethod,searchAttribute:t.searchAttribute,sort:t.sort,error:t.error,disabled:t.disabled,dependsOn:t.dependson,groupBy:t.groupBy,multivalue:t.multivalue,onSearch:e.props.actions.zoneSearch,onFilter:e.props.actions.zoneFilter,onChange:e.props.actions.zoneChange})})):null})),d(u(e),"renderRoiPanel",(function(){var t=e.getMethodFromId(e.props.spatialField.method),n=t&&t.filterProps&&t.filterProps.valueField&&e.props.spatialField&&e.props.spatialField.value&&e.props.spatialField.value[t.filterProps.valueField];return f.createElement(v,null,f.createElement("div",{className:"container-fluid"},f.createElement(g,{className:"filter-field-row filter-field-fixed-row"},f.createElement(h,{xs:6},f.createElement("span",null,t&&t.name||t.id)),f.createElement(h,{xs:6},f.createElement(E,{originalValue:n,key:e.props.spatialField.method,options:t,autocompleteStreamFactory:P,valueField:t&&t.filterProps&&t.filterProps.valueField,textField:t&&t.filterProps&&t.filterProps.valueField,url:t&&t.url,filter:"contains",onChangeSpatialFilterValue:e.props.actions.onChangeSpatialFilterValue,onChangeDrawingStatus:function(){var t;(t=e.props.actions).onChangeDrawingStatus.apply(t,arguments)},filterProps:t&&t.filterProps})))))})),d(u(e),"renderSpatialPanel",(function(t,n,r){return f.createElement(v,{className:"spatial-panel"},e.props.spatialMethodOptions.length>1?e.renderSpatialHeader():f.createElement("span",null),e.renderZoneFields(),e.props.spatialField.method&&e.getMethodFromId(e.props.spatialField.method)&&"wfsGeocoder"===e.getMethodFromId(e.props.spatialField.method).type?e.renderRoiPanel():null,e.props.spatialOperations.length>1?f.createElement(v,null,f.createElement("div",null,t),r&&"DWITHIN"===r.id?e.renderDwithin():null,f.createElement(g,null,f.createElement(h,{xs:12},n))):f.createElement("span",null))})),d(u(e),"renderButtons",(function(){var t=[],n=e.props.spatialField.geometry&&(e.props.spatialField.method&&"BBOX"===e.props.spatialField.method||"Circle"===e.props.spatialField.method),r=e.props.spatialField.geometry&&e.props.spatialField.geometry.coordinates;return n&&t.push({glyph:"pencil",onClick:function(){return e.props.actions.onShowSpatialSelectionDetails(!0)},tooltipId:"queryform.spatialfilter.details.detail_button_label"}),r&&t.push({glyph:"clear-filter",tooltipId:"queryform.spatialfilter.remove",onClick:function(){return e.resetSpatialFilter()}}),t})),d(u(e),"updateSpatialMethod",(function(t,n,r){e.props.actions.onShowSpatialSelectionDetails(!1);var o=e.props.spatialMethodOptions.filter((function(t){return r===(T.getMessageById(e.context.messages,t.name)||t.name)}))[0].id,i=e.getMethodFromId(o);if(e.props.actions.onSelectSpatialMethod(o,n),"wfsGeocoder"!==e.getMethodFromId(o).type)switch(o){case"ZONE":e.changeDrawingStatus("clean","","queryform",[]);break;case"Viewport":e.changeDrawingStatus("clean","","queryform",[]),e.props.actions.onSelectViewportSpatialMethod();break;default:e.changeDrawingStatus("start",o,"queryform",[],{geodesic:i&&i.geodesic,stopAfterDrawing:!0})}else e.changeDrawingStatus("clean","","queryform",[])})),d(u(e),"updateSpatialOperation",(function(t,n,r){var o=e.props.spatialOperations.filter((function(t){return r===T.getMessageById(e.context.messages,t.name)}))[0].id;e.props.actions.onSelectSpatialOperation(o,n)})),d(u(e),"resetSpatialFilter",(function(){e.changeDrawingStatus("clean","","queryform",[]),e.props.actions.onRemoveSpatialSelection(),e.props.actions.onShowSpatialSelectionDetails(!1)})),d(u(e),"changeDrawingStatus",(function(t,n,r,o,i){e.props.actions.onChangeDrawingStatus(t,void 0!==n?n:e.props.spatialField.method,r,o,i)})),e}return t=p,(n=[{key:"render",value:function(){var e=this,t=this.props.spatialOperations.filter((function(t){return e.props.spatialField.operation===t.id}))[0],n=f.createElement("span",null);"ZONE"!==this.props.spatialField.method&&"Viewport"!==this.props.spatialField.method&&this.getMethodFromId(this.props.spatialField.method)&&"wfsGeocoder"!==this.getMethodFromId(this.props.spatialField.method).type&&(n=this.props.spatialField.geometry?null:f.createElement("span",null,f.createElement("div",{className:"m-label m-caption text-center"},f.createElement(_.Message,{msgId:"queryform.spatialfilter.draw_start_label"}))));var r=this.getMethodFromId(this.props.spatialField.method),o=this.props.showDetailsPanel?f.createElement(j,{useMapProjection:this.props.useMapProjection,enableGeodesic:r&&r.geodesic,geometry:this.props.spatialField.geometry,type:this.props.spatialField.method,onShowPanel:this.props.actions.onShowSpatialSelectionDetails,onChangeDrawingStatus:this.changeDrawingStatus,zoom:this.props.zoom,projection:this.props.projection}):f.createElement("span",null),i=f.createElement(g,{className:"filter-field-row inline-form filter-field-fixed-row"},f.createElement(h,{xs:6},f.createElement(_.Message,{msgId:"queryform.spatialfilter.geometric_operation"})),f.createElement(h,{xs:6},f.createElement(O,{fieldOptions:this.props.spatialOperations.map((function(t){return T.getMessageById(e.context.messages,t.name)})),fieldName:"operation",fieldRowId:(new Date).getTime(),fieldValue:T.getMessageById(this.context.messages,t?t.name:""),onUpdateField:this.updateSpatialOperation})));return f.createElement("div",{className:"query-filter-container"},this.props.withContainer?f.createElement(M,{id:"spatialFilterPanel",header:this.renderHeader(),buttons:this.renderButtons(),collapsible:!0,expanded:this.props.spatialPanelExpanded,onSwitch:function(t){return e.props.actions.onExpandSpatialFilterPanel(t)}},this.renderSpatialPanel(i,n,t)):this.renderSpatialPanel(i,n,t),o)}}])&&a(t.prototype,n),r&&a(t,r),p}(f.Component);d(A,"propTypes",{useMapProjection:y.bool,spatialField:y.object,spatialOperations:y.array,spatialMethodOptions:y.array,spatialPanelExpanded:y.bool,showDetailsPanel:y.bool,withContainer:y.bool,actions:y.object,zoom:y.number,projection:y.string}),d(A,"contextTypes",{messages:y.object}),d(A,"defaultProps",{useMapProjection:!0,spatialField:{},spatialPanelExpanded:!0,showDetailsPanel:!1,withContainer:!0,spatialMethodOptions:[],spatialOperations:[],actions:{onExpandSpatialFilterPanel:function(){},onSelectSpatialMethod:function(){},onSelectSpatialOperation:function(){},onChangeSpatialFilterValue:function(){},onChangeDrawingStatus:function(){},onRemoveSpatialSelection:function(){},onShowSpatialSelectionDetails:function(){},onSelectViewportSpatialMethod:function(){},onChangeRegion:function(){},onChangeDwithinValue:function(){},zoneFilter:function(){},zoneSearch:function(){},zoneChange:function(){}}}),e.exports=A},"./MapStore2/web/client/components/data/query/TextField.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=n("./node_modules/react/index.js"),f=n("./node_modules/react-bootstrap/es/index.js"),m=f.FormControl,y=f.Tooltip,b=n("./MapStore2/web/client/utils/LocaleUtils.js"),g=n("./MapStore2/web/client/components/misc/OverlayTrigger.jsx"),h=n("./MapStore2/web/client/components/I18N/HTML.jsx"),v=n("./node_modules/prop-types/index.js"),S=n("./MapStore2/web/client/utils/FilterUtils.jsx").isLikeOrIlike,w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(u,e);var t,n,r,l=s(u);function u(){var e;o(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return p(c(e=l.call.apply(l,[this].concat(n))),"renderField",(function(){var t=b.getMessageById(e.context.messages,"queryform.attributefilter.text_placeholder"),n=d.createElement(y,{id:"textField-tooltip"+e.props.fieldRowId},d.createElement(h,{msgId:"queryform.attributefilter.tooltipTextField"})),r=d.createElement(m,{disabled:"isNull"===e.props.operator,placeholder:t,onChange:e.changeText,type:"text",value:e.props.fieldValue||""});return S(e.props.operator)?d.createElement(g,{key:"textField-overlay"+e.props.fieldRowId,placement:"top",overlay:n},r):r})),p(c(e),"changeText",(function(t){e.props.onUpdateField(e.props.fieldRowId,e.props.fieldName,t.target.value,e.props.attType)})),e}return t=u,(n=[{key:"componentDidMount",value:function(){"isNull"!==this.props.operator||this.props.fieldValue||this.props.onUpdateField(this.props.fieldRowId,this.props.fieldName," ",this.props.attType)}},{key:"componentDidUpdate",value:function(){"isNull"!==this.props.operator||this.props.fieldValue||this.props.onUpdateField(this.props.fieldRowId,this.props.fieldName," ",this.props.attType)}},{key:"render",value:function(){var e=this.props.label?d.createElement("label",null,this.props.label):d.createElement("span",null);return d.createElement("div",{className:"textField"},e,this.renderField())}}])&&i(t.prototype,n),r&&i(t,r),u}(d.Component);p(w,"propTypes",{operator:v.string,fieldName:v.string,fieldRowId:v.number,attType:v.string,fieldValue:v.string,label:v.string,fieldException:v.oneOfType([v.object,v.string]),onUpdateField:v.func,onUpdateExceptionField:v.func,style:v.object}),p(w,"contextTypes",{messages:v.object}),p(w,"defaultProps",{operator:"like",fieldName:null,fieldRowId:null,attType:"string",fieldValue:null,label:null,fieldException:null,onUpdateField:function(){},onUpdateExceptionField:function(){},style:{}}),e.exports=w},"./MapStore2/web/client/components/data/query/ZoneField.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=n("./node_modules/prop-types/index.js"),f=n("./node_modules/react/index.js"),m=n("./node_modules/lodash/lodash.js").isEqual,y=n("./MapStore2/web/client/components/data/query/ComboField.jsx"),b=n("./MapStore2/web/client/utils/FilterUtils.jsx"),g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(d,e);var t,n,l,u=s(d);function d(){var e;o(this,d);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return p(c(e=u.call.apply(u,[this].concat(n))),"state",{open:!1}),p(c(e),"getFilter",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"*",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"=",r={filterFields:[{attribute:e.props.searchAttribute,operator:n,value:t,type:"list"}]};e.props.dependsOn&&(r.groupFields=[{id:1,logic:"AND",index:0}],r.filterFields[0].groupId=1,e.props.multivalue?(r.groupFields.push({id:2,logic:"OR",groupId:1,index:1}),e.props.dependsOn.value instanceof Array?e.props.dependsOn.value.forEach((function(t){r.filterFields.push({attribute:e.props.dependsOn.field,operator:e.props.dependsOn.operator||"=",value:t,groupId:2,type:"list"})})):r.filterFields.push({attribute:e.props.dependsOn.field,operator:e.props.dependsOn.operator||"=",value:e.props.dependsOn.value,groupId:2,type:"list"})):r.filterFields.push({attribute:e.props.dependsOn.field,operator:e.props.dependsOn.operator||"=",value:e.props.dependsOn.value,groupId:1,type:"list"}));var o=b.toOGCFilter(e.props.typeName,r,e.props.wfs,e.props.sort||{sortBy:e.props.searchAttribute,sortOrder:"ASC"});return o})),p(c(e),"changeZoneValue",(function(t,n,r){var o;e.setState({open:!1}),o=e.props.multivalue?{value:r.map((function(e){return e.id})),feature:r.map((function(e){return e.feature}))}:{value:[r],feature:[e.values.filter((function(e){return e.id===r}))[0].feature]},e.props.onChange(e.props.zoneId,o)})),e}return t=d,(n=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.values&&!m(this.props.values,e.values)&&e.values.length>0&&this.setState({open:!0})}},{key:"render",value:function(){var e=this;this.values=[],this.props.values&&this.props.values.length>0&&(this.values=this.props.values.map((function(t){var n=t;e.props.valueField.split(".").forEach((function(e){n=n?n[e]:null}));var r=t;return e.props.textField.split(".").forEach((function(e){r=r?r[e]:null})),{id:n,name:r,feature:t}})));var t=this.props.label?f.createElement("label",null,this.props.label):f.createElement("span",null),n=this.props.error;return n&&(n="object"!==r(n)?n:n.status+" "+n.statusText+": "+n.data),f.createElement("div",{className:"zone-combo"},t,f.createElement(y,{key:(new Date).getTime(),busy:this.props.busy,disabled:this.props.disabled,fieldRowId:this.props.zoneId,valueField:"id",textField:"name",fieldOptions:this.values,fieldValue:this.props.value,fieldName:"zone",fieldException:n,options:{defaultOpen:this.state.open},groupBy:this.props.groupBy?function(t){return t.feature.properties[e.props.groupBy]}:function(){},multivalue:this.props.multivalue,comboFilter:this.props.comboFilter,onSelect:this.props.onSelect,onUpdateField:this.changeZoneValue,onToggle:function(t){if(t&&(!e.props.values||e.props.values.length<1)){var n=e.getFilter(e.props.searchText,e.props.searchMethod);e.props.onSearch(!0,e.props.zoneId),e.props.onFilter(e.props.url,n,e.props.zoneId)}}}))}}])&&i(t.prototype,n),l&&i(t,l),d}(f.Component);p(g,"propTypes",{zoneId:d.number,url:d.string,typeName:d.string,wfs:d.string,busy:d.bool,values:d.array,value:d.oneOfType([d.object,d.number,d.string,d.array]),label:d.string,searchText:d.string,searchMethod:d.string,searchAttribute:d.string,sort:d.object,error:d.oneOfType([d.object,d.string]),comboFilter:d.oneOfType([d.bool,d.string,d.func]),groupBy:d.oneOfType([d.string,d.func]),multivalue:d.bool,open:d.bool,disabled:d.bool,dependsOn:d.object,valueField:d.string,textField:d.string,onSearch:d.func,onFilter:d.func,onChange:d.func,onSelect:d.func}),p(g,"contextTypes",{messages:d.object}),p(g,"defaultProps",{open:!1,zoneId:null,url:null,typeName:null,wfs:"1.1.0",busy:!1,values:[],value:null,valueField:null,textField:null,label:null,disabled:!1,error:null,searchText:"*",searchMethod:"ilike",searchAttribute:null,comboFilter:"contains",multivalue:!0,groupBy:null,onSearch:function(){},onFilter:function(){},onChange:function(){},onSelect:function(){}}),e.exports=g},"./MapStore2/web/client/components/data/query/enhancers/crossLayerFilter.js":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n("./node_modules/lodash/lodash.js"),s=a.get,l=a.find,c=n("./node_modules/rxjs/Rx.js").Observable,u=n("./MapStore2/web/client/observables/wfs.js"),p=u.describeFeatureType,d=u.getLayerWFSCapabilities,f=n("./MapStore2/web/client/utils/ogc/WFS/base.js").findGeometryProperty,m=n("./MapStore2/web/client/utils/FeatureTypeUtils.js").describeFeatureTypeToAttributes,y=n("./node_modules/recompose/es/Recompose.js"),b=y.compose,g=y.withProps,h=y.withPropsOnChange,v=y.withHandlers,S=y.defaultProps,w=n("./MapStore2/web/client/components/misc/enhancers/propsStreamFactory.jsx"),O=function(e){return e.distinctUntilChanged((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.searchUrl,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.searchUrl;return t===r})).switchMap((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.crossLayerExpanded?c.of(t):e.filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.crossLayerExpanded;return t})).take(1)})).switchMap((function(e){var t=e.featureTypeName,n=e.searchUrl;return d({layer:{name:t,url:n,search:{type:"wfs",url:n}}}).do((function(e){if(t=s(e,"WFS_Capabilities.Filter_Capabilities.Scalar_Capabilities.ArithmeticOperators.Functions.FunctionNames.FunctionName"),!l(t,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e._;return"queryCollection"===t})))throw new Error("nocrosslayerfunctionalities");var t})).map((function(){return{loadingCapabilities:!1}})).catch((function(e){return c.of({errorObj:e,loadingAttributes:!1,loadingCapabilities:!1,featureTypeProperties:[]})})).startWith({loadingCapabilities:!0})})).startWith({})},j=function(e,t){return e.distinctUntilChanged((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layer,n=void 0===t?{}:t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=r.layer;return o&&n.name===(o&&o.name)})).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layer;return!!t})).switchMap((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.layer;return c.defer((function(){return p({layer:n})})).do((function(e){var n=s(f(e.data||{}),"name");n&&t("geometryName",n)})).map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data,n=void 0===t?{}:t;return m(n)})).map((function(e){return{attributes:e,loadingAttributes:!1}})).startWith({loadingAttributes:!0}).catch((function(e){return c.of({errorObj:e,loadingAttributes:!1,featureTypeProperties:[]})}))})).catch((function(e){return c.of({errorObj:e,loadingAttributes:!1,loadingCapabilities:!1,featureTypeProperties:[]})})).startWith({})};e.exports=b(h(["crossLayerFilter"],(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.crossLayerFilter,n=void 0===t?{}:t;return{queryCollection:s(n,"collectGeometries.queryCollection"),operation:s(n,"operation"),distance:s(n,"distance")}})),g((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layers,n=void 0===t?[]:t,r=e.queryCollection,o=void 0===r?{}:r;return{layer:l(n,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name;return t===o.typeName}))}})),v({setQueryCollectionParameter:function(e){var t=e.setCrossLayerFilterParameter,n=void 0===t?function(){}:t;return function(e,t){n("collectGeometries.queryCollection[".concat(e,"]"),t),"typeName"===e&&n("collectGeometries.queryCollection.filterFields",[])}},updateLogicCombo:function(e){var t=e.setCrossLayerFilterParameter,n=void 0===t?function(){}:t;return function(e,t){return n("collectGeometries.queryCollection.groupFields",[{id:e,logic:t,index:0}])}},setOperation:function(e){var t=e.setCrossLayerFilterParameter,n=void 0===t?function(){}:t;return function(e){return n("operation",e)}}}),S({dataStreamFactory:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.setQueryCollectionParameter,r=void 0===n?function(){}:n;return O(e).combineLatest(j(e,r),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o(o({},t),e)})).startWith({})}}),w)},"./MapStore2/web/client/components/data/query/queryform.css":function(e,t,n){var r=n("./node_modules/css-loader/index.js!./node_modules/postcss-loader/src/index.js?!./MapStore2/web/client/components/data/query/queryform.css");"string"==typeof r&&(r=[[e.i,r,""]]);n("./node_modules/style-loader/addStyles.js")(r,{});r.locals&&(e.exports=r.locals)},"./MapStore2/web/client/components/data/template/jsx/Template.jsx":function(module,exports,__webpack_require__){function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,r=_getPrototypeOf(e);if(t){var o=_getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var PropTypes=__webpack_require__("./node_modules/prop-types/index.js"),React=__webpack_require__("./node_modules/react/index.js"),_require=__webpack_require__("./node_modules/lodash/lodash.js"),isEqual=_require.isEqual,TemplateUtils=__webpack_require__("./MapStore2/web/client/utils/TemplateUtils.js"),Template=function(_React$Component){_inherits(Template,_React$Component);var _super=_createSuper(Template);function Template(){var _this;_classCallCheck(this,Template);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),_defineProperty(_assertThisInitialized(_this),"renderContent",(function(){var model=_this.props.model,props=_this.props;return eval(_this.comp)})),_defineProperty(_assertThisInitialized(_this),"parseTemplate",(function(e){TemplateUtils.parseTemplate(e,(function(e,t){t?_this.props.onError(t.message):(_this.comp=e,_this.forceUpdate())}))})),_this}return _createClass(Template,[{key:"UNSAFE_componentWillMount",value:function(){this.parseTemplate(this.props.template)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.template!==this.props.template&&this.parseTemplate(e.template)}},{key:"shouldComponentUpdate",value:function(e){return!isEqual(e,this.props)}},{key:"render",value:function(){if(this.comp){var e=this.props.renderContent?this.props.renderContent(this.comp,this.props):this.renderContent();return React.isValidElement(e)?e:null}return null}}]),Template}(React.Component);_defineProperty(Template,"propTypes",{template:PropTypes.oneOfType([PropTypes.string,PropTypes.func]),model:PropTypes.object,renderContent:PropTypes.func,onError:PropTypes.func}),_defineProperty(Template,"defaultProps",{template:"",model:{},onError:function(){}}),module.exports=Template},"./MapStore2/web/client/components/geostory/layouts/sections/patterns/dots.png":function(e,t,n){e.exports=n.p+"MapStore2/web/client/components/geostory/layouts/sections/patterns/dots.png"},"./MapStore2/web/client/components/geostory/layouts/sections/patterns/grid.svg":function(e,t,n){e.exports=n.p+"grid.svg"},"./MapStore2/web/client/components/geostory/layouts/sections/patterns/world.svg":function(e,t,n){e.exports=n.p+"world.svg"},"./MapStore2/web/client/components/layout/enhancers/gridLayout.jsx":function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var o=n("./node_modules/react/index.js"),i=n("./MapStore2/web/client/components/misc/enhancers/withResizeSpy.js"),a=n("./node_modules/recompose/es/Recompose.js"),s=a.compose,l=a.defaultProps,c=a.withStateHandlers,u=n("./node_modules/react-container-dimensions/lib/index.js").default;e.exports={widthProvider:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.overrideWidthProvider;return s(l({useDefaultWidthProvider:!t}),(function(e){return function(t){return o.createElement(u,null,(function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.width;return o.createElement(e,r({width:i},t))}))}}))},heightProvider:function(e){return s(c((function(){return{}}),{onResize:function(){return function(e){return{height:e.height}}}}),i(e))}}},"./MapStore2/web/client/components/manager/rulesmanager/AttributeAccessSelect.jsx":function(e,t,n){var r=n("./node_modules/react/index.js"),o=n("./node_modules/react-select/dist/react-select.es.js").default,i=[{value:"NONE",label:"NONE"},{value:"READONLY",label:"READ ONLY"},{value:"READWRITE",label:"READ WRITE"}];e.exports=function(e){var t=e.options,n=void 0===t?i:t,a=e.attribute,s=e.value,l=e.onChange,c=void 0===l?function(){}:l;return r.createElement(o,{name:"sel-".concat(a.name),clearable:!1,searchable:!1,onChange:function(e){var t=e.value;return c({name:a.name,access:t})},value:s,options:n})}},"./MapStore2/web/client/components/manager/rulesmanager/AvailableStyles.jsx":function(e,t,n){var r=n("./node_modules/react/index.js"),o=n("./MapStore2/web/client/components/manager/rulesmanager/StylesList.jsx"),i=n("./MapStore2/web/client/components/I18N/Message.jsx"),a=n("./MapStore2/web/client/components/misc/Filter.jsx"),s=n("./MapStore2/web/client/components/misc/Portal.jsx"),l=n("./node_modules/react-bootstrap/es/index.js"),c=l.Col,u=l.Button,p=l.ButtonGroup,d=n("./MapStore2/web/client/components/misc/ResizableModal.jsx"),f=n("./MapStore2/web/client/components/layout/BorderLayout.jsx");e.exports=function(e){var t=e.styles,n=void 0===t?[]:t,l=e.selectedStyles,m=void 0===l?[]:l,y=e.onSelectionChange,b=void 0===y?function(){}:y,g=e.show,h=void 0!==g&&g,v=e.stylesFilter,S=void 0===v?"":v,w=e.filterPlaceholder,O=void 0===w?"Filter styles...":w,j=e.clearAll,E=void 0===j?function(){}:j,x=e.selectAll,P=void 0===x?function(){}:x,C=e.onFilter,T=void 0===C?function(){}:C,M=e.onClose,_=void 0===M?function(){}:M,A=S&&S.length>0&&n.filter((function(e){return e.title.toLowerCase().match(S&&S.toLowerCase())}))||n;return r.createElement(s,null,r.createElement("div",{className:"rules-manager-modal"},r.createElement(d,{title:r.createElement(i,{msgId:"rulesmanager.avstyle"}),show:h,onClose:_},r.createElement("span",{className:"ms-style-modal"},r.createElement(f,{header:r.createElement("span",null,r.createElement(a,{filterPlaceholder:O,filterText:S||"",onFilter:T}),r.createElement(c,{className:"text-center"},r.createElement(p,null,r.createElement(u,{bsStyle:"primary",bsSize:"sm",onClick:E},r.createElement(i,{msgId:"rulesmanager.clearbtn"})),r.createElement(u,{bsStyle:"primary",bsSize:"sm",onClick:P},r.createElement(i,{msgId:"rulesmanager.selectbtn"})))))},r.createElement(o,{styles:A,selectedStyles:m,onSelectionChange:b}))))))}},"./MapStore2/web/client/components/manager/rulesmanager/DefaultStyle.jsx":function(e,t,n){var r=n("./node_modules/react/index.js"),o=n("./MapStore2/web/client/components/manager/rulesmanager/StylesList.jsx"),i=n("./MapStore2/web/client/components/I18N/Message.jsx"),a=n("./MapStore2/web/client/components/misc/Filter.jsx"),s=n("./MapStore2/web/client/components/misc/Portal.jsx"),l=n("./MapStore2/web/client/components/misc/ResizableModal.jsx"),c=n("./MapStore2/web/client/components/layout/BorderLayout.jsx");e.exports=function(e){var t=e.styles,n=void 0===t?[]:t,u=e.selectedStyles,p=void 0===u?[]:u,d=e.onSelectionChange,f=void 0===d?function(){}:d,m=e.show,y=void 0!==m&&m,b=e.stylesFilter,g=void 0===b?"":b,h=e.filterPlaceholder,v=void 0===h?"":h,S=e.onFilter,w=void 0===S?function(){}:S,O=e.onClose,j=void 0===O?function(){}:O,E=g&&g.length>0&&n.filter((function(e){return e.title.toLowerCase().match(g&&g.toLowerCase())}))||n;return r.createElement(s,null,r.createElement("div",{className:"rules-manager-modal"},r.createElement(l,{title:r.createElement(i,{msgId:"rulesmanager.defstyle"}),show:y,onClose:j},r.createElement("span",{className:"ms-style-modal"},r.createElement(c,{header:r.createElement("span",null,r.createElement(a,{filterPlaceholder:v,filterText:g,onFilter:w}))},r.createElement(o,{styles:E,selectedStyles:p,onSelectionChange:f}))))))}},"./MapStore2/web/client/components/manager/rulesmanager/MapModal.jsx":function(e,t,n){var r=n("./node_modules/react/index.js"),o=n("./MapStore2/web/client/components/manager/rulesmanager/enhancers/Map.js"),i=n("./MapStore2/web/client/components/map/enhancers/autoMapType.js"),a=n("./MapStore2/web/client/components/map/enhancers/mapType.js"),s=n("./MapStore2/web/client/components/map/enhancers/autoResize.js"),l=n("./MapStore2/web/client/components/map/enhancers/onMapViewChanges.js"),c=n("./MapStore2/web/client/components/map/enhancers/withDraw.js"),u=(0,n("./node_modules/recompose/es/Recompose.js").compose)(o,l,s(0),i,a,c())(n("./MapStore2/web/client/components/map/BaseMap.jsx")),p=n("./node_modules/react-overlays/es/index.js").Portal;e.exports=function(e){var t=e.layer,n=e.onMapReady,o=void 0===n?function(){}:n;return r.createElement(p,{container:document.querySelector(".rules-data-gird")},r.createElement("div",{className:"rules-manager-map-modal",style:{position:"absolute",zIndex:15,top:0,bottom:0,width:"100%"}},r.createElement(u,{onMapReady:o,options:{style:{margin:10,height:"calc(100% - 20px)"}},layer:t,tools:["draw"]})))}},"./MapStore2/web/client/components/manager/rulesmanager/ModalDialog.jsx":function(e,t,n){var r=n("./node_modules/react/index.js"),o=n("./MapStore2/web/client/components/I18N/Message.jsx"),i=n("./MapStore2/web/client/components/misc/Portal.jsx"),a=n("./MapStore2/web/client/components/misc/ResizableModal.jsx");e.exports=function(e){var t=e.title,n=void 0===t?"":t,s=e.showDialog,l=void 0!==s&&s,c=e.buttons,u=void 0===c?[]:c,p=e.closeAction,d=void 0===p?function(){}:p,f=e.msg,m=void 0===f?"Missing message":f;return r.createElement(i,null,r.createElement(a,{title:r.createElement(o,{msgId:n}),size:"xs",show:l,onClose:d,buttons:u},r.createElement("div",{className:"ms-alert"},r.createElement("div",{className:"ms-alert-center rm-alert-padded"},r.createElement(o,{msgId:m})))))}},"./MapStore2/web/client/components/manager/rulesmanager/RoiCql.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=n("./node_modules/react/index.js"),d=n("./node_modules/prop-types/index.js"),f=n("./MapStore2/web/client/components/misc/toolbar/ToolbarButton.jsx"),m=n("./node_modules/react-container-dimensions/lib/index.js").default,y=n("./node_modules/react-codemirror2/index.js").Controlled;n("./node_modules/codemirror/lib/codemirror.css"),n("./node_modules/codemirror/mode/sql/sql.js");var b=n("./MapStore2/web/client/utils/LocaleUtils.js"),g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(c,e);var t,n,r,s=a(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),u(l(t=s.call(this,e)),"onChange",(function(e,n,r){t.setState((function(){return{cql:r}}))})),u(l(t),"apply",(function(){t.props.onChangeFilter&&t.props.onChangeFilter(t.state.cql)})),t.state={cql:e.wkt},t}return t=c,(n=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.wkt;t!==this.props.wkt&&this.setState({cql:t})}},{key:"render",value:function(){var e=this;return p.createElement(m,null,(function(t){var n=t.width;return p.createElement("div",{style:{width:n,display:"flex",flexDirection:"column"}},p.createElement(y,{value:e.state.cql,onBeforeChange:e.onChange,options:{mode:{name:"sql"},lineNumbers:!0,lineWrapping:!0}}),p.createElement(f,{disabled:e.props.wkt===e.state.cql,text:b.getMessageById(e.context.messages,"rulesmanager.apply"),onClick:e.apply}))}))}}])&&o(t.prototype,n),r&&o(t,r),c}(p.Component);u(g,"propTypes",{wkt:d.string,onChangeFilter:d.func}),u(g,"contextTypes",{messages:d.object}),e.exports=g},"./MapStore2/web/client/components/manager/rulesmanager/SimpleSpatialFilter.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=n("./node_modules/react/index.js"),m=n("./node_modules/lodash/lodash.js").find,y=n("./node_modules/prop-types/index.js"),b=n("./node_modules/react-bootstrap/es/index.js"),g=b.Row,h=b.Col,v=b.Panel,S=b.Glyphicon,w=n("./node_modules/wellknown/index.js"),O=n("./MapStore2/web/client/components/data/query/ComboField.jsx"),j=n("./MapStore2/web/client/components/data/query/ComboFieldListItem.jsx"),E=n("./MapStore2/web/client/components/manager/rulesmanager/RoiCql.jsx"),x=n("./MapStore2/web/client/utils/LocaleUtils.js"),P=n("./MapStore2/web/client/components/misc/switch/SwitchPanel.jsx"),C=n("./MapStore2/web/client/components/I18N/I18N.jsx"),T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(p,e);var t,n,r,c=l(p);function p(){var e;i(this,p);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return d(u(e=c.call.apply(c,[this].concat(n))),"getMethodFromId",(function(t){return m(e.props.spatialMethodOptions,(function(e){return e&&e.id===t}))||null})),d(u(e),"renderHeader",(function(){var t=x.getMessageById(e.context.messages,"queryform.spatialfilter.spatial_filter_header");return f.createElement("span",null,f.createElement("span",{style:{cursor:"pointer"},onClick:e.props.actions.onExpandSpatialFilterPanel.bind(null,!e.props.spatialPanelExpanded)},t),f.createElement("button",{onClick:e.props.actions.onExpandSpatialFilterPanel.bind(null,!e.props.spatialPanelExpanded),className:"close"},e.props.spatialPanelExpanded?f.createElement(S,{glyph:"glyphicon glyphicon-collapse-down"}):f.createElement(S,{glyph:"glyphicon glyphicon-expand"})))})),d(u(e),"renderSpatialHeader",(function(){var t=e.getMethodFromId(e.props.spatialField.method);return f.createElement("div",{className:"container-fluid"},f.createElement(g,{className:"logicHeader filter-field-row filter-field-fixed-row"},f.createElement(h,{xs:6},f.createElement("div",null,f.createElement(C.Message,{msgId:"queryform.spatialfilter.filterType"}))),f.createElement(h,{xs:6},f.createElement(O,{itemComponent:function(t){return f.createElement(j,o({customItemClassName:e.getMethodFromId(t.item)&&e.getMethodFromId(t.item).customItemClassName||""},t))},fieldOptions:e.props.spatialMethodOptions.map((function(t){return x.getMessageById(e.context.messages,t.name)||t.name})),placeholder:x.getMessageById(e.context.messages,"queryform.spatialfilter.combo_placeholder"),fieldName:"method",fieldRowId:(new Date).getTime(),fieldValue:x.getMessageById(e.context.messages,t?t.name:"")||t&&t.name||"",onUpdateField:e.updateSpatialMethod}))))})),d(u(e),"renderSpatialPanel",(function(){var t=e.getMethodFromId(e.props.spatialField.method)&&"CQL"!==e.props.spatialField.method&&!e.props.spatialField.geometry;return f.createElement(v,{className:"spatial-panel"},e.props.spatialMethodOptions.length>1?e.renderSpatialHeader():f.createElement("span",null),"CQL"===e.props.spatialField.method&&f.createElement(E,{wkt:e.props.wkt,onChangeFilter:e.cqlChanged}),f.createElement(g,null,f.createElement(h,{xs:12},t&&f.createElement("span",null,f.createElement("div",{className:"m-label m-caption text-center"},f.createElement(C.Message,{msgId:"queryform.spatialfilter.draw_start_label"}))))))})),d(u(e),"renderButtons",(function(){var t=[];return e.props.spatialField.geometry&&e.props.spatialField.geometry.coordinates&&t.push({glyph:"clear-filter",tooltipId:"rulesmanager.remove",onClick:function(){return e.resetSpatialFilter()}}),t})),d(u(e),"updateSpatialMethod",(function(t,n,r){var o=e.props.spatialMethodOptions.filter((function(t){return r===(x.getMessageById(e.context.messages,t.name)||t.name)}))[0].id;switch(e.props.actions.onSelectSpatialMethod(o,n),o){case"CQL":break;default:e.changeDrawingStatus("start",o,{stopAfterDrawing:!0})}})),d(u(e),"resetSpatialFilter",(function(){e.changeDrawingStatus("clean",null)})),d(u(e),"changeDrawingStatus",(function(t,n,r){e.props.actions.onChangeDrawingStatus(t,void 0!==n?n:e.props.spatialField.method,e.props.owner,e.props.features,r)})),d(u(e),"cqlChanged",(function(t){if(0!==t.length)try{var n=w.parse(t);if(!n)throw new Error;e.props.actions.onChangeDrawingStatus("replace","",e.props.owner,[n],{})}catch(t){e.props.actions.onError({title:"rulesmanager.errorTitle",message:"rulesmanager.errorCQL"})}else e.props.actions.onChangeDrawingStatus("clean","",e.props.owner,[],{})})),e}return t=p,(n=[{key:"render",value:function(){var e=this;return f.createElement("div",{className:"query-filter-container"},f.createElement(P,{id:"spatialFilterPanel",header:this.renderHeader(),buttons:this.renderButtons(),collapsible:!0,expanded:this.props.spatialPanelExpanded,onSwitch:function(t){return e.props.actions.onExpandSpatialFilterPanel(t)}},this.renderSpatialPanel()))}}])&&a(t.prototype,n),r&&a(t,r),p}(f.Component);d(T,"propTypes",{useMapProjection:y.bool,spatialField:y.object,spatialMethodOptions:y.array,spatialPanelExpanded:y.bool,actions:y.object,zoom:y.number,owner:y.string,features:y.array,wkt:y.string,onError:y.func}),d(T,"contextTypes",{messages:y.object}),d(T,"defaultProps",{useMapProjection:!0,spatialField:{},spatialPanelExpanded:!0,spatialOperations:[],owner:"queryform",features:[],actions:{onExpandSpatialFilterPanel:function(){},onSelectSpatialMethod:function(){},onChangeSpatialFilterValue:function(){},onChangeDrawingStatus:function(){},onRemoveSpatialSelection:function(){}}}),e.exports=T},"./MapStore2/web/client/components/manager/rulesmanager/StylesList.jsx":function(e,t,n){var r=n("./node_modules/react/index.js"),o=n("./node_modules/react-bootstrap/es/index.js").Glyphicon,i=n("./MapStore2/web/client/components/misc/cardgrids/SideCard.jsx");e.exports=function(e){var t=e.styles,n=void 0===t?[]:t,a=e.selectedStyles,s=void 0===a?[]:a,l=e.onSelectionChange,c=void 0===l?function(){}:l,u=e.className,p=void 0===u?"":u;return r.createElement("span",null,n.map((function(e,t){var n=s.filter((function(t){return t===e.name})).length>0;return r.createElement("div",{key:t},r.createElement(i,{preview:r.createElement(o,{glyph:e.preview||"geoserver"}),className:"ms-sm ".concat(n?"ms-selected":""," ").concat(p),title:e.title,description:"",caption:e._abstract||"",onClick:function(){var t=n&&s.filter((function(t){return t!==e.name}))||s.concat(e.name);c(t)}}))})))}},"./MapStore2/web/client/components/manager/rulesmanager/enhancers/Map.js":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=n("./node_modules/recompose/es/Recompose.js"),l=s.compose,c=s.withStateHandlers,u=s.defaultProps,p=s.withPropsOnChange,d=s.withProps,f=n("./MapStore2/web/client/utils/MapUtils.js"),m=n("./MapStore2/web/client/utils/CoordinatesUtils.js"),y=n("./node_modules/lodash/lodash.js").isEmpty;e.exports=l(u({onMapReady:function(){},baseLayer:{group:"background",id:"mapnik__0",loading:!1,loadingError:!1,name:"mapnik",source:"osm",title:"Open Street Map",type:"osm",visibility:!0}}),p("baseLayer",(function(e){return{layers:[e.baseLayer]}})),c((function(){return{map:{projection:"EPSG:4326"},initialized:!1}}),{onMapViewChanges:function(){return function(e){return{map:e}}},onLayerLoad:function(e,t){var n=e.map,r=e.initialized,o=t.onMapReady,i=t.baseLayer;return function(e){return r||e!==i.id?{}:(o(n),{initialized:!0})}},centerLayer:function(e,t){var n=t.layer;return function(e){if(y(n))return{};var t=f.getCenterForExtent(n.bbox.extent,n.bbox.crs),r=n.bbox.crs!==(e.projection||"EPSG:3857")?m.reprojectBbox(n.bbox.extent,n.bbox.crs,e.projection||"EPSG:3857"):n.bbox.extent,i=1;e.size&&(i=f.getZoomForExtent(r,e.size,0,21));e.bbox;return{map:o(o({},a(e,["bbox"])),{},{zoom:i,center:t,extent:r,mapStateSource:"mapModal"})}}}}),p("layer",(function(e){return{layers:e.layers.concat(e.layer||[])}})),p((function(e,t){var n=e.map,r=void 0===n?{}:n,o=t.map;return!r.size&&o.size}),(function(e){var t=e.centerLayer,n=e.map;return n.size&&t(n),{}})),d((function(e){return{eventHandlers:{onLayerLoad:e.onLayerLoad}}})))},"./MapStore2/web/client/components/manager/rulesmanager/enhancers/autoComplete.js":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n("./node_modules/rxjs/Rx.js"),s=n("./node_modules/recompose/es/Recompose.js"),l=s.compose,c=s.withStateHandlers,u=s.defaultProps,p=s.createEventHandler,d=s.withProps,f=n("./MapStore2/web/client/components/misc/enhancers/propsStreamFactory.jsx"),m=n("./node_modules/lodash/lodash.js").isObject,y=function(e){return e.filter((function(){return!1}))};e.exports=l(u({clearable:!0,emptySearch:"%",stopPropagation:!0,paginated:!0,size:5,loadData:function(){return a.Observable.of({data:[],count:0})},parentsFilter:{},filter:!1,dataStreamFactory:function(e){var t=p(),n=t.handler,r=t.stream,i=p(),s=i.handler,l=i.stream,c=a.Observable.from(r),u=a.Observable.from(l),d=a.Observable.merge(c.mapTo(1),u.mapTo(-1)).withLatestFrom(e.map((function(e){var t=e.onError;return{loadData:e.loadData,onError:t,page:e.page,parentsFilter:e.parentsFilter,count:e.count,val:e.val,size:e.size,pagination:e.pagination,setData:e.setData,loadingErrorMsg:e.loadingErrorMsg}})),(function(e,t){return o({pageStep:e},t)})),f=e.map((function(e){return o(o({},e),{},{nextPage:n,prevPage:s,nextPage$:c,prevPage$:u})}));return function(e){return e.distinctUntilChanged((function(e,t){return n=t,e.val===n.val;var n})).debounceTime(300).filter((function(e){var t=e.val;return t&&t.length>0})).switchMap((function(e){var t=e.loadingErrorMsg,n=e.nextPage,r=e.prevPage,i=e.onError,s=e.parentsFilter,l=void 0===s?{}:s,c=e.val,u=void 0===c?"":c,p=e.size,d=void 0===p?10:p,f=e.pagination,m=e.loadData,b=e.setData,g=void 0===b?function(){}:b;return m(u,0,d,l,!0).do((function(e){var t=e.count,i=e.data;g({pagination:o(o({},f),{},{loadNextPage:n,loadPrevPage:r,firstPage:!0,lastPage:Math.ceil(t/d)<=1}),data:i,page:0,count:t})})).let(y).startWith({busy:!0}).catch((function(e){return a.Observable.of(e).do((function(){i(t)})).mapTo({busy:!1})})).concat(a.Observable.of({busy:!1}))}))}(f).merge(function(e){return e.distinctUntilChanged((function(e,t){return n=t,e.emptyReq===n.emptyReq;var n})).skip(1).debounceTime(300).switchMap((function(e){var t=e.emptySearch,n=e.loadingErrorMsg,r=e.nextPage,i=e.prevPage,s=e.onError,l=e.parentsFilter,c=void 0===l?{}:l,u=e.size,p=void 0===u?10:u,d=e.pagination,f=e.loadData,m=e.setData,b=void 0===m?function(){}:m;return f(t,0,p,c,!0).do((function(e){var t=e.count,n=e.data;b({pagination:o(o({},d),{},{loadNextPage:r,loadPrevPage:i,firstPage:!0,lastPage:Math.ceil(t/p)<=1}),data:n,page:0,count:t})})).let(y).startWith({busy:!0}).catch((function(e){return a.Observable.of(e).do((function(){s(n)})).mapTo({busy:!1})})).concat(a.Observable.of({busy:!1}))}))}(f),function(e){return e.switchMap((function(e){var t=e.pageStep,n=e.page,r=e.parentsFilter,i=e.count,s=e.val,l=e.size,c=e.pagination,u=e.setData,p=e.loadData,d=e.onError,f=e.loadingErrorMsg,m=n+t;return p(s,m,l,r).do((function(e){var t=e.data;u({pagination:o(o({},c),{},{firstPage:0===m,lastPage:Math.ceil(i/l)<=m+1}),data:t,page:m})})).let(y).startWith({busy:!0}).catch((function(e){return a.Observable.of(e).do((function(){d(f)})).mapTo({busy:!1})})).concat(a.Observable.of({busy:!1}))}))}(d),function(e){return e.distinctUntilChanged((function(e,t){return n=t,e.parentsFilter===n.parentsFilter;var n})).skip(1).do((function(e){return(0,e.resetCombo)()})).let(y)}(f)).startWith({busy:!1})},onValueSelected:function(){},onError:function(){},loadingErrorMsg:{title:"",message:""}}),c((function(e){var t=e.paginated,n=e.selected,r=e.initialData;return{val:n,typing:!1,page:0,stopChange:!1,data:void 0===r?[]:r,emptyReq:0,pagination:{paginated:t,firstPage:!1,lastPage:!1,loadPrevPage:function(){},loadNextPage:function(){}}}}),{resetCombo:function(e,t){var n=t.initialData,r=void 0===n?[]:n;return function(){return{data:r,page:0,val:void 0}}},setData:function(e){var t=e.count;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.pagination,r=e.data,o=e.page,i=void 0===o?0:o,a=e.count,s=void 0===a?t:a;return{pagination:n,data:r,page:i,count:s}}},onReset:function(e,t){var n=e.typing,r=t.onValueSelected,o=t.selected;return function(){return o&&r(),n?{typing:!1}:{}}},onChange:function(e,t){var n=e.stopChange,r=e.val,o=e.emptyReq,i=t.initialData,a=void 0===i?[]:i,s=t.valueField;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(n)return{stopChange:!1};var t=m(e)&&e[s]||e,i=r&&r.length>0&&0===t.length?o+1:o;return 0===t.length&&{typing:!0,val:t,data:a,emptyReq:i}||{typing:!0,val:t}}},onToggle:function(e,t){var n=e.val,r=void 0===n?"":n,o=e.data,i=e.emptyReq,a=t.clearable,s=t.selected,l=t.onValueSelected,c=t.initialData,u=void 0===c?[]:c;return function(e){return a||e||""!==r||!s?e||r===s?e?e&&0===r.length&&0===o.length?{emptyReq:i+1}:{}:{typing:!1}:{val:s,data:u,typing:!1}:(l(),{typing:!1})}},onSelect:function(e,t){var n=t.onValueSelected,r=t.selected,o=t.valueField;return function(e){var t=m(e)&&e[o]||e;return t!==r&&n(t),{stopChange:!0}}}}),f,d((function(e){var t=e.val,n=void 0===t?"":t,r=e.selected,o=void 0===r?"":r;return{selectedValue:e.typing?n:o}})))},"./MapStore2/web/client/components/manager/rulesmanager/enhancers/filterstyles.js":function(e,t,n){var r=n("./node_modules/recompose/es/Recompose.js"),o=r.compose,i=r.withStateHandlers,a=r.defaultProps,s=n("./MapStore2/web/client/components/misc/enhancers/localizedProps.js");e.exports=o(a({filterPlaceholder:"rulesmanager.placeholders.filter"}),i((function(e){return function(e){if(null==e)throw new TypeError("Cannot destructure undefined")}(e),{}}),{onFilter:function(){return function(e){return{stylesFilter:e}}}}),s("filterPlaceholder"))},"./MapStore2/web/client/components/manager/rulesmanager/enhancers/fixedOptions.js":function(e,t,n){var r=n("./node_modules/recompose/es/Recompose.js"),o=r.compose,i=r.withStateHandlers,a=r.defaultProps,s=r.withProps,l=n("./MapStore2/web/client/components/misc/enhancers/propsStreamFactory.jsx"),c=n("./node_modules/lodash/lodash.js").isObject,u=function(e){return e.filter((function(){return!1}))};e.exports=o(a({clearable:!0,stopPropagation:!0,emitOnReset:!1,paginated:!1,parentsFilter:{},filter:"startsWith",textField:"label",valueField:"value",dataStreamFactory:function(e){return function(e){return e.distinctUntilChanged((function(e,t){return n=t,e.parentsFilter===n.parentsFilter;var n})).skip(1).do((function(e){return(0,e.resetCombo)()})).let(u)}(e).startWith({busy:!1})},onValueSelected:function(){},onError:function(){},loadingErrorMsg:"",data:[]}),i((function(e){var t=e.paginated;return{val:e.selected,typing:!1,stopChange:!1,pagination:{paginated:t,firstPage:!1,lastPage:!1,loadPrevPage:function(){},loadNextPage:function(){}}}}),{resetCombo:function(){return function(){return{val:void 0}}},onReset:function(e,t){var n=e.typing,r=t.onValueSelected,o=t.selected;return function(){return o&&r(),n?{typing:!1}:{}}},onChange:function(e,t){var n=e.stopChange,r=t.valueField;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(n)return{stopChange:!1};var t=c(e)&&e[r]||e;return{val:t,typing:!0}}},onToggle:function(e,t){var n=e.val,r=void 0===n?"":n,o=t.clearable,i=t.selected,a=t.onValueSelected;return function(e){return o||e||""!==r||!i?e||r===i?{}:{val:i,typing:!1}:(a(),{typing:!1})}},onSelect:function(e,t){var n=t.onValueSelected,r=t.selected,o=t.valueField;return function(e){var t=c(e)&&e[o]||e;return t!==r&&n(t),{stopChange:!0}}}}),l,s((function(e){var t=e.val,n=void 0===t?"":t,r=e.selected,o=void 0===r?"":r;return{selectedValue:e.typing?n:o}})))},"./MapStore2/web/client/components/manager/rulesmanager/ruleseditor/AttributesEditor.jsx":function(e,t,n){var r=n("./node_modules/react/index.js"),o=n("./node_modules/react-bootstrap/es/index.js"),i=o.Grid,a=o.Row,s=o.Col,l=n("./MapStore2/web/client/components/I18N/Message.jsx"),c=n("./MapStore2/web/client/components/manager/rulesmanager/AttributeAccessSelect.jsx"),u=n("./node_modules/lodash/lodash.js").castArray,p=function(e,t){return(function(e,t){var n=t.attributes;return u((void 0===n?{}:n).attribute||[]).filter((function(t){return t.name===e}))[0]}(e,t)||{}).access||"READWRITE"};e.exports=function(e){var t=e.attributes,n=void 0===t?[]:t,o=e.constraints,u=void 0===o?{}:o,d=e.setOption,f=void 0===d?function(){}:d,m=e.active,y=void 0!==m&&m,b=function(e){var t=u.attributes,n=(t&&t.attribute||[]).filter((function(t){return t.name!==e.name})).concat(e);f({key:"attributes",value:{attribute:n}})};return r.createElement(i,{className:"ms-rule-editor",fluid:!0,style:{width:"100%",display:y?"block":"none"}},r.createElement(a,null,r.createElement(s,{sm:4},r.createElement("strong",null,r.createElement(l,{msgId:"layerProperties.name"}))),r.createElement(s,{sm:4},r.createElement("strong",null,r.createElement(l,{msgId:"uploader.type"}))),r.createElement(s,{sm:4},r.createElement("strong",null,r.createElement(l,{msgId:"rulesmanager.rule"})))),r.createElement("hr",null),n.map((function(e){return r.createElement(a,{key:e.name},r.createElement(s,{sm:4},e.name),r.createElement(s,{sm:4},r.createElement("pre",null,e.localType)),r.createElement(s,{sm:4},r.createElement(c,{attribute:e,onChange:b,value:p(e.name,u)})))})))}},"./MapStore2/web/client/components/manager/rulesmanager/ruleseditor/EditMain.jsx":function(e,t,n){var r=n("./node_modules/react/index.js"),o=n("./node_modules/react-bootstrap/es/index.js"),i=o.Grid,a=o.Row,s=o.Col,l=o.Glyphicon,c=n("./MapStore2/web/client/components/manager/rulesmanager/ruleseditor/attributeselectors/index.js"),u=n("./MapStore2/web/client/components/I18N/Message.jsx");e.exports=function(e){var t=e.rule,n=void 0===t?{}:t,o=e.setOption,p=void 0===o?function(){}:o,d=e.active,f=void 0===d||d,m=n.grant,y=n.layer,b=n.workspace,g="DENY"!==m&&y&&!b;return r.createElement(i,{className:"ms-rule-editor",fluid:!0,style:{width:"100%",display:f?"block":"none"}},!!n.id&&r.createElement(c.Priority,{key:"priority",selected:n.priority,setOption:p}),r.createElement(c.Role,{key:"rolename",selected:n.rolename,setOption:p}),r.createElement(c.User,{key:"username",selected:n.username,setOption:p}),r.createElement(c.Ip,{key:"ip-address",selected:n.ipaddress,setOption:p}),r.createElement(c.Service,{key:"service",selected:n.service,setOption:p}),r.createElement(c.Request,{key:"request",selected:n.request,service:n.service,setOption:p}),r.createElement(c.Workspace,{key:"workspace",selected:n.workspace,setOption:p}),r.createElement(c.Layer,{key:"layer",selected:n.layer,workspace:n.workspace,setOption:p}),r.createElement(c.Access,{key:"access",selected:n.grant,workspace:n.workspace,setOption:p}),g&&r.createElement(a,null,r.createElement(s,{xs:12},r.createElement("span",null,r.createElement("div",{className:"m-label m-caption text-center"},r.createElement(l,{glyph:"info-sign"}),r.createElement(u,{msgId:"rulesmanager.selectworkspace"}))))))}},"./MapStore2/web/client/components/manager/rulesmanager/ruleseditor/FiltersEditor.jsx":function(e,t,n){var r=n("./node_modules/react/index.js"),o=n("./node_modules/react-bootstrap/es/index.js").Grid,i=n("./node_modules/react-container-dimensions/lib/index.js").default,a=n("./node_modules/react-codemirror2/index.js").Controlled;n("./node_modules/codemirror/lib/codemirror.css"),n("./node_modules/codemirror/mode/sql/sql.js");var s=n("./MapStore2/web/client/components/manager/rulesmanager/ruleseditor/enhancers/switch.js"),l=n("./MapStore2/web/client/components/manager/rulesmanager/ruleseditor/enhancers/filters.js"),c=n("./MapStore2/web/client/components/manager/rulesmanager/MapModal.jsx"),u=s(n("./MapStore2/web/client/components/misc/switch/SwitchPanel.jsx")),p=n("./MapStore2/web/client/components/I18N/Message.jsx"),d=n("./MapStore2/web/client/components/manager/rulesmanager/SimpleSpatialFilter.jsx"),f=n("./node_modules/lodash/lodash.js").isEmpty,m=[{id:"BBOX",name:"queryform.spatialfilter.methods.box"},{id:"Circle",name:"queryform.spatialfilter.methods.circle"},{id:"Polygon",name:"queryform.spatialfilter.methods.poly"},{id:"CQL",name:"queryform.spatialfilter.methods.cql"}];e.exports=l((function(e){var t=e.onMapReady,n=e.geometryState,s=void 0===n?{}:n,l=e.spatialField,y=void 0===l?{}:l,b=e.layer,g=void 0===b?{}:b,h=e.constraints,v=void 0===h?{}:h,S=e.active,w=void 0!==S&&S,O=e.setOption,j=void 0===O?function(){}:O,E=e.mapActive,x=void 0!==E&&E,P=e.actions,C=void 0===P?{}:P;return!f(g)&&r.createElement(o,{className:"ms-rule-editor",fluid:!0,style:{width:"100%",display:w?"block":"none"}},r.createElement(u,{reset:function(){return j({key:"cqlFilterRead",value:""})},title:r.createElement(p,{msgId:"rulesmanager.cqlRead"}),initExpanded:!!v.cqlFilterRead},r.createElement("div",{style:{width:"100%"}},r.createElement(i,null,(function(e){var t=e.width;return r.createElement("div",{style:{width:t}},r.createElement(a,{value:v.cqlFilterRead,onBeforeChange:function(e,t,n){return j({key:"cqlFilterRead",value:n})},options:{mode:{name:"sql"},lineNumbers:!0,lineWrapping:!0}}))})))),r.createElement(u,{reset:function(){return j({key:"cqlFilterWrite",value:""})},title:r.createElement(p,{msgId:"rulesmanager.cqlWrite"}),initExpanded:!!v.cqlFilterWrite},r.createElement("div",{style:{width:"100%"}},r.createElement(i,null,(function(e){var t=e.width;return r.createElement("div",{style:{width:t}},r.createElement(a,{value:v.cqlFilterWrite,onBeforeChange:function(e,t,n){return j({key:"cqlFilterWrite",value:n})},options:{mode:{name:"sql"},lineNumbers:!0,lineWrapping:!0}}))})))),r.createElement(d,{wkt:v.restrictedAreaWkt,owner:"rulesmanager",geometryState:s,spatialField:y,actions:C,spatialPanelExpanded:x,spatialMethodOptions:m}),x&&r.createElement(c,{onMapReady:t,layer:g}))}))},"./MapStore2/web/client/components/manager/rulesmanager/ruleseditor/Header.jsx":function(e,t,n){var r=n("./node_modules/react/index.js"),o=n("./MapStore2/web/client/components/misc/toolbar/Toolbar.jsx"),i=n("./node_modules/react-bootstrap/es/index.js"),a=i.NavItem,s=i.Nav,l=n("./MapStore2/web/client/components/I18N/Message.jsx"),c=n("./MapStore2/web/client/utils/RulesEditor.js").areDetailsActive;e.exports=function(e){var t=e.layer,n=e.rule,i=void 0===n?{}:n,u=e.onNavChange,p=void 0===u?function(){}:u,d=e.onExit,f=void 0===d?function(){}:d,m=e.disableSave,y=void 0===m||m,b=e.disableDetails,g=void 0!==b&&b,h=e.onSave,v=void 0===h?function(){}:h,S=e.activeTab,w=void 0===S?"1":S,O=e.loading,j=void 0!==O&&O,E=e.type,x=void 0===E?"":E,P=[{glyph:"1-close",tooltipId:"rulesmanager.tooltip.close",onClick:f,disabled:j},{glyph:"floppy-disk",tooltipId:"rulesmanager.tooltip.save",onClick:v,disabled:y||j}],C=!g&&c(t,i);return r.createElement("div",{className:"ms-panel-header-container"},r.createElement("div",{className:"ms-toolbar-container"},r.createElement(o,{btnDefaultProps:{className:"square-button-md",bsStyle:"primary",tooltipPosition:"bottom"},buttons:P})),r.createElement("div",{className:"loading-header ".concat(j?"ms-circle-loader-md":"")}),r.createElement(s,{bsStyle:"tabs",activeKey:w,justified:!0,onSelect:p},r.createElement(a,{eventKey:"1"},r.createElement(l,{msgId:"rulesmanager.navItems.main"})),r.createElement(a,{eventKey:"2",disabled:!C},r.createElement(l,{msgId:"rulesmanager.navItems.style"})),r.createElement(a,{eventKey:"3",disabled:!C},r.createElement(l,{msgId:"rulesmanager.navItems.filter"})),r.createElement(a,{eventKey:"4",disabled:!C||"RASTER"===x},r.createElement(l,{msgId:"rulesmanager.navItems.attribute"}))))}},"./MapStore2/web/client/components/manager/rulesmanager/ruleseditor/StylesEditor.jsx":function(e,t,n){var r=n("./node_modules/react/index.js"),o=n("./node_modules/react-bootstrap/es/index.js"),i=o.Grid,a=o.Row,s=o.Col,l=o.Button,c=o.Glyphicon,u=n("./MapStore2/web/client/components/manager/rulesmanager/enhancers/filterstyles.js"),p=u(n("./MapStore2/web/client/components/manager/rulesmanager/DefaultStyle.jsx")),d=u(n("./MapStore2/web/client/components/manager/rulesmanager/AvailableStyles.jsx")),f=n("./MapStore2/web/client/components/manager/rulesmanager/StylesList.jsx"),m=n("./MapStore2/web/client/components/I18N/Message.jsx"),y=n("./MapStore2/web/client/components/manager/rulesmanager/ruleseditor/enhancers/style.js"),b=function(e,t){var n=t.allowedStyles,r=(void 0===n?{}:n).style||[];return e.filter((function(e){return-1!==r.indexOf(e.name)}))};e.exports=y((function(e){var t=e.styles,n=void 0===t?[]:t,o=e.constraints,u=void 0===o?{}:o,y=e.setOption,g=void 0===y?function(){}:y,h=e.active,v=void 0!==h&&h,S=e.toggleModal,w=void 0===S?function(){}:S,O=e.modal;return r.createElement("div",{style:{position:"relative"}},r.createElement(i,{className:"ms-rule-editor",fluid:!0,style:{top:0,bottom:60,position:"absolute",width:"100%",display:v?"block":"none"}},r.createElement(a,{className:"ms-add-style"},r.createElement(s,null,r.createElement(m,{msgId:"rulesmanager.defstyle"})),r.createElement(s,null,r.createElement(l,{className:"square-button-md no-border",onClick:function(){w("default")}},r.createElement(c,{glyph:"pencil"})))),r.createElement(f,{className:"ms-no-select",styles:n.filter((function(e){return e.name===u.defaultStyle}))}),r.createElement(a,{className:"ms-add-style"},r.createElement(s,null,r.createElement(m,{msgId:"rulesmanager.avstyle"})),r.createElement(s,null,r.createElement(l,{className:"square-button-md no-border",onClick:function(){w("availables")}},r.createElement(c,{glyph:"pencil"})))),r.createElement("div",{className:"available-style-list"},r.createElement(f,{className:"ms-no-select",styles:b(n,u)})),r.createElement(p,{show:"default"===O,selectedStyles:[].concat(u.defaultStyle||[]),styles:n,onClose:w,onSelectionChange:function(e){return g({key:"defaultStyle",value:e[e.length-1]})}}),r.createElement(d,{show:"availables"===O,styles:n,selectedStyles:u&&u.allowedStyles&&u.allowedStyles.style||[],onClose:w,onSelectionChange:function(e){return g({key:"allowedStyles",value:{style:e}})},clearAll:function(){return g({key:"allowedStyles",value:{style:[]}})},selectAll:function(){return g({key:"allowedStyles",value:{style:n.map((function(e){return e.name}))}})}})))}))},"./MapStore2/web/client/components/manager/rulesmanager/ruleseditor/attributeselectors/Access.jsx":function(e,t,n){var r=n("./node_modules/react/index.js"),o=n("./MapStore2/web/client/components/misc/combobox/PagedCombobox.jsx"),i=n("./node_modules/react-bootstrap/es/index.js"),a=i.Row,s=i.Col,l=n("./MapStore2/web/client/components/manager/rulesmanager/enhancers/fixedOptions.js"),c=n("./MapStore2/web/client/components/misc/enhancers/localizedProps.js"),u=n("./node_modules/recompose/es/Recompose.js"),p=u.compose,d=u.defaultProps,f=u.withHandlers,m=u.withPropsOnChange,y=n("./MapStore2/web/client/components/I18N/Message.jsx");e.exports=p(d({size:5,textField:"label",valueField:"value",parentsFilter:{},filter:"startsWith",placeholder:"rulesmanager.placeholders.access",data:[{value:"ALLOW",label:"ALLOW"},{value:"DENY",label:"DENY"}]}),m(["services"],(function(e){var t=e.services,n=e.data;return{data:t||n}})),f({onValueSelected:function(e){var t=e.setOption,n=void 0===t?function(){}:t;return function(e){n({key:"grant",value:e})}}}),c(["placeholder"]),l)((function(e){return r.createElement(a,{className:e.disabled?"ms-disabled":""},r.createElement(s,{xs:12,sm:6},r.createElement(y,{msgId:"rulesmanager.access"})),r.createElement(s,{xs:12,sm:6},r.createElement(o,e)))}))},"./MapStore2/web/client/components/manager/rulesmanager/ruleseditor/attributeselectors/IpAddress.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=n("./node_modules/react/index.js"),f=n("./node_modules/prop-types/index.js"),m=n("./node_modules/react-bootstrap/es/index.js"),y=m.FormControl,b=m.FormGroup,g=m.Row,h=m.Col,v=n("./MapStore2/web/client/components/I18N/Message.jsx"),S=n("./MapStore2/web/client/utils/RulesEditor.js").checkIp,w=n("./MapStore2/web/client/components/misc/enhancers/localizedProps.js"),O=n("./node_modules/recompose/es/Recompose.js"),j=O.compose,E=O.defaultProps,x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(u,e);var t,n,r,l=s(u);function u(){var e;o(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return p(c(e=l.call.apply(l,[this].concat(n))),"handleChange",(function(t){e.props.setOption({key:"ipaddress",value:t.target.value})})),e}return t=u,(n=[{key:"getValidationState",value:function(){return this.props.selected&&this.props.selected.length>0?this.props.selected.match(S)?"success":"error":null}},{key:"render",value:function(){var e=this.props,t=e.disabled,n=e.selected,r=e.placeholder;return d.createElement(g,{className:t?"ms-disabled":""},d.createElement(h,{xs:12,sm:6},d.createElement(v,{msgId:"rulesmanager.ip"})),d.createElement(h,{xs:12,sm:6},d.createElement(b,{validationState:this.getValidationState()},d.createElement(y,{type:"text",value:n,placeholder:r,onChange:this.handleChange}))))}}])&&i(t.prototype,n),r&&i(t,r),u}(d.Component);p(x,"propTypes",{selected:f.string,setOption:f.func,placeholder:f.string,disabled:f.bool}),p(x,"defaultProps",{setOption:function(){},disabled:!1}),e.exports=j(E({placeholder:"rulesmanager.placeholders.ip"}),w(["placeholder"]))(x)},"./MapStore2/web/client/components/manager/rulesmanager/ruleseditor/attributeselectors/Layer.jsx":function(e,t,n){var r=n("./node_modules/react/index.js"),o=n("./node_modules/react-bootstrap/es/index.js"),i=o.Row,a=o.Col,s=n("./MapStore2/web/client/components/misc/combobox/PagedCombobox.jsx"),l=n("./MapStore2/web/client/components/manager/rulesmanager/enhancers/autoComplete.js"),c=n("./node_modules/recompose/es/Recompose.js"),u=c.compose,p=c.defaultProps,d=c.withHandlers,f=c.withPropsOnChange,m=n("./MapStore2/web/client/actions/notifications.js").error,y=n("./MapStore2/web/client/components/misc/enhancers/localizedProps.js"),b=n("./MapStore2/web/client/observables/rulesmanager.js").loadLayers,g=n("./node_modules/react-redux/es/index.js").connect,h=n("./MapStore2/web/client/components/I18N/Message.jsx");e.exports=u(g((function(){return{}}),{onError:m}),p({paginated:!0,size:5,textField:"name",valueField:"name",loadData:b,parentsFilter:{},filter:!1,placeholder:"rulesmanager.placeholders.layer",loadingErrorMsg:{title:"rulesmanager.errorTitle",message:"rulesmanager.errorLoadingLayers"}}),f(["workspace"],(function(e){return{parentsFilter:{workspace:e.workspace}}})),d({onValueSelected:function(e){var t=e.setOption,n=void 0===t?function(){}:t;return function(e){n({key:"layer",value:e})}}}),y(["placeholder"]),l)((function(e){return r.createElement(i,{className:e.disabled?"ms-disabled":""},r.createElement(a,{xs:12,sm:6},r.createElement(h,{msgId:"rulesmanager.layer"})),r.createElement(a,{xs:12,sm:6},r.createElement(s,e)))}))},"./MapStore2/web/client/components/manager/rulesmanager/ruleseditor/attributeselectors/Priority.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=n("./node_modules/react/index.js"),f=n("./node_modules/prop-types/index.js"),m=n("./node_modules/react-bootstrap/es/index.js"),y=m.FormControl,b=m.FormGroup,g=m.Row,h=m.Col,v=n("./MapStore2/web/client/components/I18N/Message.jsx"),S=n("./node_modules/lodash/lodash.js"),w=S.toNumber,O=S.isNumber,j=n("./MapStore2/web/client/components/misc/enhancers/localizedProps.js"),E=n("./node_modules/recompose/es/Recompose.js"),x=E.compose,P=E.defaultProps,C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(u,e);var t,n,r,l=s(u);function u(){var e;o(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return p(c(e=l.call.apply(l,[this].concat(n))),"handleChange",(function(t){e.props.setOption({key:"priority",value:t.target.value})})),e}return t=u,(n=[{key:"getValidationState",value:function(){return this.props.selected&&this.props.selected.length>0?O(w(this.props.selected))?"success":"error":null}},{key:"render",value:function(){var e=this.props,t=e.disabled,n=e.selected,r=e.placeholder;return d.createElement(g,{className:t?"ms-disabled":""},d.createElement(h,{xs:12,sm:6},d.createElement(v,{msgId:"rulesmanager.priority"})),d.createElement(h,{xs:12,sm:6},d.createElement(b,{validationState:this.getValidationState()},d.createElement(y,{min:"0",type:"number",value:n,placeholder:r,onChange:this.handleChange}))))}}])&&i(t.prototype,n),r&&i(t,r),u}(d.Component);p(C,"propTypes",{selected:f.string,setOption:f.func,placeholder:f.string,disabled:f.bool}),p(C,"defaultProps",{setOption:function(){},disabled:!1}),e.exports=x(P({placeholder:"rulesmanager.placeholders.priority"}),j(["placeholder"]))(C)},"./MapStore2/web/client/components/manager/rulesmanager/ruleseditor/attributeselectors/Request.jsx":function(e,t,n){var r=n("./node_modules/react/index.js"),o=n("./MapStore2/web/client/components/misc/combobox/PagedCombobox.jsx"),i=n("./node_modules/react-bootstrap/es/index.js"),a=i.Row,s=i.Col,l=n("./MapStore2/web/client/components/manager/rulesmanager/enhancers/fixedOptions.js"),c=n("./MapStore2/web/client/components/misc/enhancers/localizedProps.js"),u=n("./node_modules/recompose/es/Recompose.js"),p=u.compose,d=u.defaultProps,f=u.withHandlers,m=u.withPropsOnChange,y=n("./MapStore2/web/client/components/I18N/Message.jsx"),b=n("./node_modules/react-redux/es/index.js").connect,g=(0,n("./node_modules/reselect/es/index.js").createSelector)(n("./MapStore2/web/client/selectors/rulesmanager.js").servicesConfigSel,(function(e){return{services:e}}));e.exports=p(b(g),d({size:5,emitOnReset:!0,textField:"label",valueField:"value",parentsFilter:{},filter:"startsWith",placeholder:"rulesmanager.placeholders.request",services:{WFS:["DescribeFeatureType","GetCapabilities","GetFeature","GetFeatureWithLock","LockFeature","Transaction"],WMS:["DescribeLayer","GetCapabilities","GetFeatureInfo","GetLegendGraphic","GetMap","GetStyles"]}}),m(["service","services"],(function(e){var t=e.services,n=void 0===t?{}:t,r=e.service;return{data:r&&(n[r]||[]).map((function(e){return{label:e,value:e.toUpperCase()}})),parentsFilter:{service:r},disabled:!r}})),f({onValueSelected:function(e){var t=e.setOption,n=void 0===t?function(){}:t;return function(e){n({key:"request",value:e})}}}),c(["placeholder"]),l)((function(e){return r.createElement(a,{className:e.disabled?"ms-disabled":""},r.createElement(s,{xs:12,sm:6},r.createElement(y,{msgId:"rulesmanager.request"})),r.createElement(s,{xs:12,sm:6},r.createElement(o,e)))}))},"./MapStore2/web/client/components/manager/rulesmanager/ruleseditor/attributeselectors/Role.jsx":function(e,t,n){var r=n("./node_modules/react/index.js"),o=n("./node_modules/react-bootstrap/es/index.js"),i=o.Row,a=o.Col,s=n("./MapStore2/web/client/components/misc/combobox/PagedCombobox.jsx"),l=n("./MapStore2/web/client/components/manager/rulesmanager/enhancers/autoComplete.js"),c=n("./node_modules/recompose/es/Recompose.js"),u=c.compose,p=c.defaultProps,d=c.withHandlers,f=n("./MapStore2/web/client/components/misc/enhancers/localizedProps.js"),m=n("./MapStore2/web/client/observables/rulesmanager.js").getRoles,y=n("./node_modules/react-redux/es/index.js").connect,b=n("./MapStore2/web/client/actions/notifications.js").error,g=n("./MapStore2/web/client/components/I18N/Message.jsx");e.exports=u(y((function(){return{}}),{onError:b}),p({size:5,textField:"name",valueField:"name",loadData:m,parentsFilter:{},filter:!1,placeholder:"rulesmanager.placeholders.role",loadingErrorMsg:{title:"rulesmanager.errorTitle",message:"rulesmanager.errorLoadingRoles"}}),d({onValueSelected:function(e){var t=e.setOption,n=void 0===t?function(){}:t;return function(e){n({key:"rolename",value:e})}}}),f(["placeholder","loadingErroMsg"]),l)((function(e){return r.createElement(i,{className:e.disabled?"ms-disabled":""},r.createElement(a,{xs:12,sm:6},r.createElement(g,{msgId:"rulesmanager.role"})),r.createElement(a,{xs:12,sm:6},r.createElement(s,e)))}))},"./MapStore2/web/client/components/manager/rulesmanager/ruleseditor/attributeselectors/Service.jsx":function(e,t,n){var r=n("./node_modules/react/index.js"),o=n("./MapStore2/web/client/components/misc/combobox/PagedCombobox.jsx"),i=n("./node_modules/react-bootstrap/es/index.js"),a=i.Row,s=i.Col,l=n("./MapStore2/web/client/components/manager/rulesmanager/enhancers/fixedOptions.js"),c=n("./MapStore2/web/client/components/misc/enhancers/localizedProps.js"),u=n("./node_modules/recompose/es/Recompose.js"),p=u.compose,d=u.defaultProps,f=u.withHandlers,m=u.withPropsOnChange,y=n("./MapStore2/web/client/components/I18N/Message.jsx"),b=n("./node_modules/react-redux/es/index.js").connect,g=(0,n("./node_modules/reselect/es/index.js").createSelector)(n("./MapStore2/web/client/selectors/rulesmanager.js").servicesSelector,(function(e){return{services:e}}));e.exports=p(b(g),d({size:5,textField:"label",valueField:"value",parentsFilter:{},filter:"startsWith",placeholder:"rulesmanager.placeholders.service",data:[{value:"WMS",label:"WMS"},{value:"WFS",label:"WFS"},{value:"WCS",label:"WCS"}]}),m(["services"],(function(e){var t=e.services,n=e.data;return{data:t||n}})),f({onValueSelected:function(e){var t=e.setOption,n=void 0===t?function(){}:t;return function(e){n({key:"service",value:e})}}}),c(["placeholder"]),l)((function(e){return r.createElement(a,{className:e.disabled?"ms-disabled":""},r.createElement(s,{xs:12,sm:6},r.createElement(y,{msgId:"rulesmanager.service"})),r.createElement(s,{xs:12,sm:6},r.createElement(o,e)))}))},"./MapStore2/web/client/components/manager/rulesmanager/ruleseditor/attributeselectors/User.jsx":function(e,t,n){var r=n("./node_modules/react/index.js"),o=n("./node_modules/react-bootstrap/es/index.js"),i=o.Row,a=o.Col,s=n("./MapStore2/web/client/components/misc/combobox/PagedCombobox.jsx"),l=n("./MapStore2/web/client/components/manager/rulesmanager/enhancers/autoComplete.js"),c=n("./node_modules/recompose/es/Recompose.js"),u=c.compose,p=c.defaultProps,d=c.withHandlers,f=n("./MapStore2/web/client/components/misc/enhancers/localizedProps.js"),m=n("./MapStore2/web/client/observables/rulesmanager.js").getUsers,y=n("./node_modules/react-redux/es/index.js").connect,b=n("./MapStore2/web/client/actions/notifications.js").error,g=n("./MapStore2/web/client/components/I18N/Message.jsx");e.exports=u(y((function(){return{}}),{onError:b}),p({size:5,textField:"userName",valueField:"userName",loadData:m,parentsFilter:{},filter:!1,placeholder:"rulesmanager.placeholders.user",loadingErrorMsg:{title:"rulesmanager.errorTitle",message:"rulesmanager.errorLoadingRoles"}}),d({onValueSelected:function(e){var t=e.setOption,n=void 0===t?function(){}:t;return function(e){n({key:"username",value:e})}}}),f(["placeholder","loadingErroMsg"]),l)((function(e){return r.createElement(i,{className:e.disabled?"ms-disabled":""},r.createElement(a,{xs:12,sm:6},r.createElement(g,{msgId:"rulesmanager.user"})),r.createElement(a,{xs:12,sm:6},r.createElement(s,e)))}))},"./MapStore2/web/client/components/manager/rulesmanager/ruleseditor/attributeselectors/Workspace.jsx":function(e,t,n){var r=n("./node_modules/react/index.js"),o=n("./node_modules/react-bootstrap/es/index.js"),i=o.Row,a=o.Col,s=n("./MapStore2/web/client/components/misc/combobox/PagedCombobox.jsx"),l=n("./MapStore2/web/client/components/manager/rulesmanager/enhancers/autoComplete.js"),c=n("./node_modules/recompose/es/Recompose.js"),u=c.compose,p=c.defaultProps,d=c.withHandlers,f=n("./MapStore2/web/client/actions/notifications.js").error,m=n("./MapStore2/web/client/components/misc/enhancers/localizedProps.js"),y=n("./MapStore2/web/client/observables/rulesmanager.js").getWorkspaces,b=n("./node_modules/react-redux/es/index.js").connect,g=n("./MapStore2/web/client/components/I18N/Message.jsx");e.exports=u(b((function(){return{}}),{onError:f}),p({paginated:!1,size:5,textField:"name",valueField:"name",loadData:y,parentsFilter:{},filter:"startsWith",placeholder:"rulesmanager.placeholders.workspace",loadingErrorMsg:{title:"rulesmanager.errorTitle",message:"rulesmanager.errorLoadingWorkspaces"}}),d({onValueSelected:function(e){var t=e.setOption,n=void 0===t?function(){}:t;return function(e){n({key:"workspace",value:e})}}}),m(["placeholder"]),l)((function(e){return r.createElement(i,{className:e.disabled?"ms-disabled":""},r.createElement(a,{xs:12,sm:6},r.createElement(g,{msgId:"rulesmanager.workspace"})),r.createElement(a,{xs:12,sm:6},r.createElement(s,e)))}))},"./MapStore2/web/client/components/manager/rulesmanager/ruleseditor/attributeselectors/index.js":function(e,t,n){e.exports={Role:n("./MapStore2/web/client/components/manager/rulesmanager/ruleseditor/attributeselectors/Role.jsx"),User:n("./MapStore2/web/client/components/manager/rulesmanager/ruleseditor/attributeselectors/User.jsx"),Service:n("./MapStore2/web/client/components/manager/rulesmanager/ruleseditor/attributeselectors/Service.jsx"),Request:n("./MapStore2/web/client/components/manager/rulesmanager/ruleseditor/attributeselectors/Request.jsx"),Workspace:n("./MapStore2/web/client/components/manager/rulesmanager/ruleseditor/attributeselectors/Workspace.jsx"),Layer:n("./MapStore2/web/client/components/manager/rulesmanager/ruleseditor/attributeselectors/Layer.jsx"),Access:n("./MapStore2/web/client/components/manager/rulesmanager/ruleseditor/attributeselectors/Access.jsx"),Ip:n("./MapStore2/web/client/components/manager/rulesmanager/ruleseditor/attributeselectors/IpAddress.jsx"),Priority:n("./MapStore2/web/client/components/manager/rulesmanager/ruleseditor/attributeselectors/Priority.jsx")}},"./MapStore2/web/client/components/manager/rulesmanager/ruleseditor/enhancers/filters.js":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n("./node_modules/recompose/es/Recompose.js"),s=a.compose,l=a.withStateHandlers,c=a.withPropsOnChange,u=n("./node_modules/react-redux/es/index.js").connect,p=n("./MapStore2/web/client/actions/draw.js").changeDrawingStatus,d=n("./MapStore2/web/client/selectors/rulesmanager.js").geometryStateSel,f=n("./MapStore2/web/client/actions/notifications.js").error;e.exports=s(u((function(e){return{geometryState:d(e)}}),{onChangeDrawingStatus:p,onError:f}),l((function(e){var t=e.constraints,n=(void 0===t?{}:t).restrictedAreaWkt;return{mapActive:n&&n.length>0,spatialField:{}}}),{toggleMap:function(e,t){var n=t.onChangeDrawingStatus;return function(e){return e?{mapActive:e}:(n("clean","","rulesmanager",[],{}),{mapActive:e,spatialField:{}})}},onSelectSpatialMethod:function(e){var t=e.spatialField;return function(e,n){return{spatialField:o(o({},t),{},i({},n,e))}}},onMapReady:function(e,t){var n=t.geometryState,r=void 0===n?{}:n,i=t.spatialField,a=void 0===i?{}:i,s=t.onChangeDrawingStatus;return function(){return r.geometry&&r.geometry.coordinates?(s("create","MultiPolygons","rulesmanager",[r.geometry],{}),{spatialField:o(o({},a),{},{method:"Polygon"})}):{}}}}),c("toggleMap",(function(e){var t=e.toggleMap,n=e.onSelectSpatialMethod,r=e.onError;return{actions:{onChangeDrawingStatus:e.onChangeDrawingStatus,onExpandSpatialFilterPanel:t,onSelectSpatialMethod:n,onError:r}}})),c(["spatialField","geometryState","constraints"],(function(e){var t=e.spatialField,n=void 0===t?{}:t,r=e.geometryState,i=void 0===r?{}:r,a=e.constraints,s=(void 0===a?{}:a).restrictedAreaWkt;return{spatialField:o(o(o({},i),n),{},{wkt:s})}})))},"./MapStore2/web/client/components/manager/rulesmanager/ruleseditor/enhancers/style.js":function(e,t,n){var r=n("./node_modules/recompose/es/Recompose.js"),o=r.compose,i=r.withStateHandlers;e.exports=o(i((function(){return{}}),{toggleModal:function(){return function(e){return{modal:e}}}}))},"./MapStore2/web/client/components/manager/rulesmanager/ruleseditor/enhancers/switch.js":function(e,t,n){var r=n("./node_modules/recompose/es/Recompose.js"),o=r.compose,i=r.withStateHandlers;e.exports=o(i((function(e){return{expanded:!!e.initExpanded}}),{onSwitch:function(e,t){var n=t.reset;return function(e){return e||n(),{expanded:e}}}}))},"./MapStore2/web/client/components/map sync recursive ^\\.\\/.*\\/SnapshotSupport$":function(e,t,n){var r={"./cesium/SnapshotSupport":"./MapStore2/web/client/components/map/cesium/SnapshotSupport.jsx","./leaflet/SnapshotSupport":"./MapStore2/web/client/components/map/leaflet/SnapshotSupport.jsx","./openlayers/SnapshotSupport":"./MapStore2/web/client/components/map/openlayers/SnapshotSupport.jsx"};function o(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=i,e.exports=o,o.id="./MapStore2/web/client/components/map sync recursive ^\\.\\/.*\\/SnapshotSupport$"},"./MapStore2/web/client/components/map/BaseMap.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function i(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m(e);if(t){var o=m(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d(this,n)}}function d(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=n("./node_modules/react/index.js"),g=n("./node_modules/prop-types/index.js"),h=n("./node_modules/lodash/lodash.js").isString,v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(d,e);var t,n,r,a=p(d);function d(){var e;l(this,d);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return y(f(e=a.call.apply(a,[this].concat(n))),"getTool",(function(t){var n=e.props.plugins;return h(t)?{name:t,impl:n.tools[t]}:s({name:t.name,impl:n.tools[t.name]},t)})),y(f(e),"renderLayers",(function(){var t=e.props.map&&e.props.map.projection||"EPSG:3857",n=e.props.plugins.Layer;return e.props.layers.map((function(r,o){return b.createElement(n,{type:r.type,srs:t,position:o,key:r.id||r.name,options:r,env:r.localizedLayerStyles?e.props.env:[]},e.renderLayerContent(r,t))}))})),y(f(e),"renderLayerContent",(function(t,n){if(t.features&&"vector"===t.type){var r=e.props.plugins.Feature;return t.features.map((function(e){return b.createElement(r,{key:e.id,msId:e.id,type:e.type,crs:n,geometry:e.geometry,features:e.features,featuresCrs:t.featuresCrs||"EPSG:4326",layerStyle:t.style,style:e.style||t.style||null,properties:e.properties})}))}return null})),y(f(e),"renderTools",(function(){return e.props.tools.map((function(t){var n=e.getTool(t),r=n.impl,a=n.name,s=i(n,["impl","name"]);return b.createElement(r,o({key:a},s))}))})),e}return t=d,(n=[{key:"render",value:function(){var e=this.props.plugins.Map,t=this.props.map&&this.props.map.projection||"EPSG:3857";return this.props.map?b.createElement(e,o({projectionDefs:this.props.projectionDefs,style:this.props.styleMap,id:this.props.id,zoomControl:!1,center:{x:0,y:0},zoom:1,hookRegister:this.props.hookRegister,mapStateSource:this.props.mapStateSource||this.props.id},this.props.options,this.props.map,{projection:t},this.props.eventHandlers),this.renderLayers(),this.renderTools()):null}}])&&c(t.prototype,n),r&&c(t,r),d}(b.Component);y(v,"propTypes",{id:g.string,options:g.object,map:g.object,mapStateSource:g.string,eventHandlers:g.object,styleMap:g.object,layers:g.array,hookRegister:g.object,projectionDefs:g.array,plugins:g.any,tools:g.array,getLayerProps:g.func,env:g.array}),y(v,"defaultProps",{id:"__base_map__",options:{},map:{},styleMap:{},tools:[],projectionDefs:[],eventHandlers:{onMapViewChanges:function(){},onClick:function(){},onMouseMove:function(){},onLayerLoading:function(){},onLayerError:function(){}},env:[]}),e.exports=v},"./MapStore2/web/client/components/map/cesium/SnapshotSupport.jsx":function(e,t){e.exports={GrabMap:null,Preview:null}},"./MapStore2/web/client/components/map/enhancers/autoMapType.js":function(e,t,n){var r=n("./node_modules/react-redux/es/index.js").connect,o=n("./node_modules/reselect/es/index.js").createSelector,i=n("./MapStore2/web/client/selectors/maptype.js").mapTypeSelector;e.exports=r(o(i,(function(e){return{mapType:e}})))},"./MapStore2/web/client/components/map/enhancers/autoResize.js":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n("./node_modules/recompose/es/Recompose.js"),s=a.withStateHandlers,l=a.withProps,c=a.compose,u=n("./MapStore2/web/client/components/misc/enhancers/withResizeSpy.js");e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return c(s((function(){return{resize:0}}),{onResize:function(e){var t=e.resize,n=void 0===t?0:t;return function(){return{resize:n+1}}}}),u({debounceTime:e}),l((function(e){var t=e.options,n=e.resize;return{options:o(o({},t),{},{resize:n})}})))}},"./MapStore2/web/client/components/map/enhancers/getProjectionDefs.js":function(e,t,n){"use strict";n.r(t),n.d(t,"getProjectionDefs",(function(){return s}));var r=n("./node_modules/recompose/es/Recompose.js"),o=n("./MapStore2/web/client/utils/ConfigUtils.js"),i=n.n(o),a=n("./node_modules/lodash/lodash.js"),s=Object(r.withProps)((function(e){var t=e.projectionDefs;return{projectionDefs:Object(a.isArray)(t)&&t.length?t:i.a.getConfigProp("projectionDefs")||[]}}));t.default=s},"./MapStore2/web/client/components/map/enhancers/handlingUnsupportedProjection.js":function(e,t,n){"use strict";n.r(t),n.d(t,"fetchingProjection",(function(){return d})),n.d(t,"handlingUnsupportedProjection",(function(){return f}));var r=n("./node_modules/recompose/es/Recompose.js"),o=n("./MapStore2/web/client/components/misc/enhancers/emptyState.jsx"),i=n.n(o),a=n("./MapStore2/web/client/components/I18N/Message.jsx"),s=n.n(a),l=n("./node_modules/react/index.js"),c=n.n(l),u=n("./MapStore2/web/client/utils/ConfigUtils.js"),p=n.n(u),d=Object(r.withProps)((function(e){var t=e.map;return{projection:e.projection||(t.data&&t.data.map?t.data.map.projection:t&&t.projection)}})),f=Object(r.compose)(d,i()((function(e){var t=e.projectionDefs,n=void 0===t?p.a.getConfigProp("projectionDefs")||[]:t,r=e.projection;return r&&0===n.concat([{code:"EPSG:4326"},{code:"EPSG:3857"},{code:"EPSG:900913"}]).filter((function(e){return e.code===r})).length}),(function(e){var t=e.projection;return{glyph:"1-map",style:{width:"100%",height:"100%",display:"flex"},title:c.a.createElement(s.a,{msgId:"map.errors.loading.title"}),mainViewStyle:{margin:"auto"},imageStyle:{height:120,width:120,margin:"auto"},description:c.a.createElement(s.a,{msgId:"map.errors.loading.projectionError",msgParams:{projection:t}})}})))},"./MapStore2/web/client/components/map/enhancers/mapType.js":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n("./node_modules/recompose/es/Recompose.js").withPropsOnChange;e.exports=a(["mapType","plugins"],(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mapType,r=e.plugins;return{plugins:o(o({},n("./MapStore2/web/client/components/map/plugins sync recursive ^\\.\\/.*\\.js$")("./"+t+".js")()),r)}}))},"./MapStore2/web/client/components/map/enhancers/onMapViewChanges.js":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n("./node_modules/recompose/es/Recompose.js"),s=a.compose,l=a.withHandlers,c=a.withPropsOnChange;e.exports=s(l({onMapViewChanges:function(e){var t=e.map,n=void 0===t?{}:t,r=e.onMapViewChanges,i=void 0===r?function(){}:r;return function(e,t,r,a,s,l){i(o(o({},n),{},{center:e,bbox:o(o({},n.bbox),r),zoom:t,size:a,mapStateSource:s,projection:l}))}}}),c(["onMapViewChanges","eventHandlers"],(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onMapViewChanges,n=void 0===t?function(){}:t,r=e.eventHandlers,i=void 0===r?{}:r;return{eventHandlers:o(o({},i),{},{onMapViewChanges:n})}})))},"./MapStore2/web/client/components/map/enhancers/withDraw.js":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=n("./node_modules/recompose/es/Recompose.js").withPropsOnChange,l=n("./node_modules/react-redux/es/index.js").connect,c=n("./MapStore2/web/client/actions/draw.js"),u=c.changeDrawingStatus,p=c.endDrawing,d=c.setCurrentStyle,f=l((function(e){return e.draw||{}}),{onChangeDrawingStatus:u,onEndDrawing:p,onGeometryChanged:c.geometryChanged,onDrawStopped:c.drawStopped,setCurrentStyle:d});e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f;return s(["plugins"],(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.plugins,r=n.DrawSupport,i=n.tools,s=void 0===i?{}:i,l=a(n,["DrawSupport","tools"]);if(!r)return{};var c=e(r);return{plugins:o(o({},l),{},{tools:o(o({},s),{},{draw:c})})}}))}},"./MapStore2/web/client/components/map/leaflet/SnapshotSupport.jsx":function(e,t,n){e.exports={GrabMap:n("./MapStore2/web/client/components/map/leaflet/snapshot/GrabMap.jsx"),Preview:n("./MapStore2/web/client/components/map/leaflet/snapshot/Preview.jsx")}},"./MapStore2/web/client/components/map/leaflet/snapshot/GrabMap.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=n("./node_modules/prop-types/index.js"),y=n("./node_modules/react/index.js"),b=n("./MapStore2/web/client/utils/ConfigUtils.js"),g=n("./MapStore2/web/client/utils/ProxyUtils.js"),h=n("./node_modules/lodash/lodash.js").isEqual,v=n("./node_modules/html2canvas/dist/html2canvas.js"),S=n("./node_modules/canvg-browser/index.js"),w=n("./node_modules/es6-promise/dist/es6-promise.js").Promise;n("./MapStore2/web/client/components/map/leaflet/snapshot/snapshotMapStyle.css");var O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(d,e);var t,n,i,u=c(d);function d(){var e;a(this,d);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return f(p(e=u.call.apply(u,[this].concat(n))),"getCanvas",(function(){return e.refs.canvas})),f(p(e),"mapChanged",(function(t){return!h(t.layers,e.props.layers)||t.active!==e.props.active||t.config!==e.props.config})),f(p(e),"mapIsLoading",(function(e){return e.some((function(e){return e.visibility&&e.loading}))})),f(p(e),"triggerShooting",(function(t){e.previousTimeout&&clearTimeout(e.previousTimeout),e.previousTimeout=setTimeout((function(){e.doSnapshot(e.props)}),t)})),f(p(e),"doSnapshot",(function(t){var n=window.getComputedStyle(e.mapDiv).getPropertyValue("left");n="auto"===n?0:n;var r,i,a,s,l,c=e.mapDiv.getElementsByClassName("leaflet-map-pane"),u=c&&c[0],d=u&&u.getElementsByClassName("leaflet-objects-pane"),f=d&&d[0],m=f&&f.getElementsByTagName("svg"),y=m&&m[0]&&m[0].cloneNode(!0);if(y){var b=y.style&&y.style.transform?y.style.transform.replace(/\(|\)|translate3d|translate/g,"").split("px, "):["0","0"];b=[Number.parseFloat(b[0].replace("px","")),Number.parseFloat(b[1].replace("px",""))],b=y.style.transform&&"translate3d"===y.style.transform.substr(0,11)?[0,0]:b,r=m[0]?m[0].getBoundingClientRect().left-b[0]:0,i=m[0]?m[0].getBoundingClientRect().top-b[1]:0,l=m[0].outerHTML?m[0].outerHTML:e.outerHTML(m[0]),s=y.getAttribute("width"),a=y.getAttribute("height"),y.setAttribute("style","")}var g=0;n&&(g=parseInt(n.replace("px",""),10));var h=e.mapDiv.getElementsByClassName("leaflet-map-pane"),O=h&&h[0]&&h[0].style&&h[0].style.transform?h[0].style.transform.replace(/\(|\)|translate3d|translate/g,"").split("px, "):["0","0"];O=[Number.parseFloat(O[0].replace("px","")),Number.parseFloat(O[1].replace("px",""))];var j=e.mapDiv.getElementsByClassName("leaflet-tile-pane"),E=j&&j[0].cloneNode(!0);if(E.style.zIndex=-9999,document.body.appendChild(E),E.style.overflow="hidden",E){var x=[].slice.call(E.getElementsByClassName("leaflet-layer"),0);x.sort((function(e,t){return Number.parseFloat(e.style.zIndex)-Number.parseFloat(t.style.zIndex)}));var P=e.getCanvas(),C=P&&P.getContext("2d");if(!C)return;C.clearRect(0,0,P.width,P.height);var T=x.map((function(n){var r=e.refs.canvas.cloneNode();return r.width=r.width+g,function(e){for(var t=0;t<e.children.length;t++)if(e.children[t])for(var n=0;n<e.children[t].children.length;n++)e.children[t].children[n]&&"IMG"===e.children[t].children[n].tagName&&(e.children[t].children[n].style.position="absolute",e.children[t].children[n].style.left=e.children[t].children[n].getBoundingClientRect().left+g+O[0]+"px",e.children[t].children[n].style.top=e.children[t].children[n].getBoundingClientRect().top+O[1]+"px",e.children[t].children[n].style.transform="none")}(n),v(n,{canvas:r,logging:!1,proxy:e.proxy,allowTaint:t&&t.allowTaint,useCORS:t&&t.allowTaint})}),p(e));T=[e.refs.canvas].concat(o(T)),w.all(T).then((function(n){var o=n.reduce((function(e,t,n){var r=x[n-1];if(void 0===r)return e;var o=e.getContext("2d");return r.style&&!isNaN(Number.parseFloat(r.style.opacity))?o.globalAlpha=Number.parseFloat(r.style.opacity):o.globalAlpha=1,o.drawImage(t,-1*g,0),e})),c=function(){document.body.removeChild(E);var n=e.mapDiv.getElementsByClassName("leaflet-marker-pane");if(n&&n.length>0){var r=e.refs.canvas.cloneNode();r.width=r.width+g,v(n,{canvas:r,logging:!1,proxy:e.proxy,allowTaint:t&&t.allowTaint,useCORS:t&&t.allowTaint}).then((function(t){var n=o.getContext("2d");n.globalAlpha=1,n.drawImage(t,-1*g,0),e.props.onStatusChange("READY",e.isTainted(o)),e.props.onSnapshotReady(P,null,null,null,e.isTainted(o))}))}else e.props.onStatusChange("READY",e.isTainted(o)),e.props.onSnapshotReady(P,null,null,null,e.isTainted(o))};if(y){var u=document.createElement("canvas");r=r||0,i=i||0,u.setAttribute("width",Number.parseFloat(s)+g),u.setAttribute("height",a),S(u,l,{ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:r,offsetY:i,renderCallback:function(){o.getContext("2d").drawImage(u,-1*g,0),c()}})}else c()}))}})),f(p(e),"isTainted",(function(t){var n=(t||e.refs.canvas).getContext("2d");try{return n.getImageData(0,0,1,1),!1}catch(e){return 18===e.code}})),f(p(e),"exportImage",(function(){return e.refs.canvas.toDataURL()})),f(p(e),"outerHTML",(function(e){var t=document.createElement("div");return t.appendChild(e.cloneNode(!0)),t.innerHTML})),e}return t=d,(n=[{key:"componentDidMount",value:function(){this.mapDiv=document.getElementById(this.props.mapId),this.proxy=null;var e=g.getProxyUrl();e&&("object"===r(e)&&(e=e.url),this.proxy=-1!==e.indexOf("?url=")?e.replace("?url=",""):e),!this.mapIsLoading(this.props.layers)&&this.props.active&&(this.props.onStatusChange("SHOTING"),this.triggerShooting(this.props.timeout))}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.mapIsLoading(e.layers),n=this.mapChanged(e);this.previousTimeout&&clearTimeout(this.previousTimeout),e.active&&!t&&n?this.props.onStatusChange("SHOTING"):e.active||(this.props.onStatusChange("DISABLED"),this.props.snapstate.error&&this.props.onSnapshotError(null))}},{key:"shouldComponentUpdate",value:function(e){return this.mapChanged(e)||this.props.snapstate!==e.snapstate}},{key:"componentDidUpdate",value:function(e){var t=this.mapIsLoading(this.props.layers),n=this.mapChanged(e);!this.props.active||t||!n&&"SHOTING"!==this.props.snapstate.state||this.triggerShooting(this.props.timeout)}},{key:"componentWillUnmount",value:function(){this.previousTimeout&&clearTimeout(this.previousTimeout)}},{key:"render",value:function(){return y.createElement("canvas",{width:this.props.config&&this.props.config.size?this.props.config.size.width:"100%",height:this.props.config&&this.props.config.size?this.props.config.size.height:"100%",style:{maxWidth:"400px",maxHeight:"400px"},ref:"canvas"})}}])&&s(t.prototype,n),i&&s(t,i),d}(y.Component);f(O,"propTypes",{config:b.PropTypes.config,layers:m.array,snapstate:m.object,active:m.bool,onSnapshotReady:m.func,onStatusChange:m.func,onSnapshotError:m.func,allowTaint:m.bool,browser:m.object,canvas:m.node,timeout:m.number,drawCanvas:m.bool,mapId:m.string}),f(O,"defaultProps",{config:null,layers:[],snapstate:{state:"DISABLED"},active:!1,onSnapshotReady:function(){},onStatusChange:function(){},onSnapshotError:function(){},browser:{},canvas:y.createElement("canvas",null),drawCanvas:!0,mapId:"map",timeout:2e3}),e.exports=O},"./MapStore2/web/client/components/map/leaflet/snapshot/Preview.jsx":function(e,t,n){var r=n("./MapStore2/web/client/components/map/leaflet/snapshot/GrabMap.jsx");e.exports=r},"./MapStore2/web/client/components/map/leaflet/snapshot/snapshotMapStyle.css":function(e,t,n){var r=n("./node_modules/css-loader/index.js!./node_modules/postcss-loader/src/index.js?!./MapStore2/web/client/components/map/leaflet/snapshot/snapshotMapStyle.css");"string"==typeof r&&(r=[[e.i,r,""]]);n("./node_modules/style-loader/addStyles.js")(r,{});r.locals&&(e.exports=r.locals)},"./MapStore2/web/client/components/map/openlayers/SnapshotSupport.jsx":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/prop-types/index.js"),o=n.n(r),i=n("./node_modules/react/index.js"),a=n.n(i),s=n("./MapStore2/web/client/components/map/openlayers/index.js"),l=n("./node_modules/object-assign/index.js"),c=n.n(l),u=n("./MapStore2/web/client/utils/ConfigUtils.js"),p=n.n(u);n("./MapStore2/web/client/components/map/openlayers/snapshot/snapshotMapStyle.css"),n("./MapStore2/web/client/components/map/openlayers/plugins/index.js");function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var o=v(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g(this,n)}}function g(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(i,e);var t,n,r,o=b(i);function i(){var e;f(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return S(h(e=o.call.apply(o,[this].concat(n))),"renderLayers",(function(t){if(t){var n=e.props.config.projection||"EPSG:3857",r=h(e);return t.map((function(t,o){var i=c()({},t,{srs:n},"wms"===t.type?{forceProxy:!e.props.allowTaint}:{});return a.a.createElement(s.LLayer,{type:t.type,position:o,key:t.id||t.name,options:i},r.renderLayerContent(t))}))}return null})),S(h(e),"renderLayerContent",(function(e){return e.features&&"vector"===e.type?e.features.map((function(e){return a.a.createElement(s.Feature,{key:e.id,type:e.type,geometry:e.geometry})})):null})),S(h(e),"layerLoad",(function(){if(e.toLoad--,0===e.toLoad){var t=e.refs.snapMap?e.refs.snapMap.map:null;t&&t.once("postrender",(function(t){return setTimeout((function(){var n=t.map&&t.map.getTargetElement()&&t.map.getTargetElement().getElementsByTagName("canvas")[0];n&&e.createSnapshot(n)}),500)}))}})),S(h(e),"layerLoading",(function(){"SHOTING"!==e.props.snapstate.state&&e.props.onStatusChange("SHOTING"),e.toLoad=e.toLoad?e.toLoad:0,e.toLoad++})),S(h(e),"createSnapshot",(function(t){e.props.onSnapshotReady(t,null,null,null,e.isTainted(t))})),S(h(e),"isTainted",(function(e){if(e){var t=e.getContext("2d");try{return t.getImageData(0,0,1,1),!1}catch(e){return 18===e.code}}return!1})),e}return t=i,(n=[{key:"shouldComponentUpdate",value:function(e){return e.active||e.active!==this.props.active}},{key:"componentDidUpdate",value:function(){this.props.active||(this.props.onStatusChange("DISABLED"),this.props.snapstate.error&&this.props.onSnapshotError(null))}},{key:"render",value:function(){return this.props.active?a.a.createElement(s.LMap,{id:"snapshot_hidden_map-"+this.props.id,className:"snapshot_hidden_map",style:{width:this.props.config&&this.props.config.size?this.props.config.size.width:"100%",height:this.props.config&&this.props.config.size?this.props.config.size.height:"100%"},center:this.props.config.center,zoom:this.props.config.zoom,mapStateSource:this.props.config.mapStateSource,projection:this.props.config.projection||"EPSG:3857",zoomControl:!1,onLayerLoading:this.layerLoading,onLayerLoad:this.layerLoad,ref:"snapMap"},this.renderLayers(this.props.layers)):null}}])&&m(t.prototype,n),r&&m(t,r),i}(a.a.Component);S(w,"propTypes",{id:o.a.node,config:p.a.PropTypes.config,layers:o.a.array,snapstate:o.a.object,active:o.a.bool,onSnapshotReady:o.a.func,onStatusChange:o.a.func,onSnapshotError:o.a.func,allowTaint:o.a.bool}),S(w,"defaultProps",{config:null,layers:[],snapstate:{state:"DISABLED"},active:!1,onSnapshotReady:function(){},onStatusChange:function(){},onSnapshotError:function(){}});var O=n("./MapStore2/web/client/utils/ProxyUtils.js"),j=n.n(O),E=n("./node_modules/lodash/isEqual.js"),x=n.n(E);function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function M(e,t){return(M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I(e);if(t){var o=I(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return A(this,n)}}function A(e,t){return!t||"object"!==P(t)&&"function"!=typeof t?R(e):t}function R(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function D(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M(e,t)}(i,e);var t,n,r,o=_(i);function i(){var e;C(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return D(R(e=o.call.apply(o,[this].concat(n))),"getCanvas",(function(){return e.refs.canvas})),D(R(e),"mapChanged",(function(t){return!x()(t.layers,e.props.layers)||t.active!==e.props.active||t.config!==e.props.config})),D(R(e),"mapIsLoading",(function(e){return e.some((function(e){return e.visibility&&e.loading}))})),D(R(e),"triggerShooting",(function(t){e.previousTimeout&&clearTimeout(e.previousTimeout),e.previousTimeout=setTimeout((function(){e.doSnapshot()}),t)})),D(R(e),"doSnapshot",(function(){var t=document.getElementById(e.props.mapId),n=t&&t.getElementsByTagName("canvas")[0];if(n&&e.getCanvas()){var r=e.getCanvas(),o=r.getContext("2d");o.clearRect(0,0,r.width,r.height),o.drawImage(n,0,0),e.props.onSnapshotReady(n),e.props.onStatusChange("READY",e.isTainted(n))}})),D(R(e),"isTainted",(function(t){var n=(t||e.refs.canvas).getContext("2d");try{return n.getImageData(0,0,1,1),!1}catch(e){return 18===e.code}})),D(R(e),"exportImage",(function(){return e.refs.canvas.toDataURL()})),e}return t=i,(n=[{key:"componentDidMount",value:function(){this.proxy=null;var e=j.a.getProxyUrl();e&&("object"===P(e)&&(e=e.url),this.proxy=-1!==e.indexOf("?url=")?e.replace("?url=",""):e),!this.mapIsLoading(this.props.layers)&&this.props.active&&(this.props.onStatusChange("SHOTING"),this.triggerShooting(this.props.timeout))}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.previousTimeout&&clearTimeout(this.previousTimeout),e.active||(this.props.onStatusChange("DISABLED"),this.props.snapstate.error&&this.props.onSnapshotError(null))}},{key:"shouldComponentUpdate",value:function(e){return this.mapChanged(e)||this.props.snapstate!==e.snapstate}},{key:"componentDidUpdate",value:function(e){var t=this.mapIsLoading(this.props.layers),n=this.mapChanged(e);t||!this.props.active||!n&&"SHOTING"!==this.props.snapstate.state||("SHOTING"!==this.props.snapstate.state&&this.props.onStatusChange("SHOTING"),this.triggerShooting(this.props.timeout))}},{key:"componentWillUnmount",value:function(){this.previousTimeout&&clearTimeout(this.previousTimeout)}},{key:"render",value:function(){return a.a.createElement("canvas",{width:this.props.config&&this.props.config.size?this.props.config.size.width:"100%",height:this.props.config&&this.props.config.size?this.props.config.size.height:"100%",style:{maxWidth:"400px",maxHeight:"400px",visibility:this.props.active?"block":"none"},ref:"canvas"})}}])&&T(t.prototype,n),r&&T(t,r),i}(a.a.Component);D(k,"propTypes",{config:p.a.PropTypes.config,layers:o.a.array,snapstate:o.a.object,active:o.a.bool,onSnapshotReady:o.a.func,onStatusChange:o.a.func,onSnapshotError:o.a.func,allowTaint:o.a.bool,browser:o.a.object,canvas:o.a.node,timeout:o.a.number,drawCanvas:o.a.bool,mapId:o.a.string}),D(k,"defaultProps",{config:null,layers:[],snapstate:{state:"DISABLED"},active:!1,onSnapshotReady:function(){},onStatusChange:function(){},onSnapshotError:function(){},browser:{},canvas:a.a.createElement("canvas",null),drawCanvas:!0,mapId:"map",timeout:0});t.default={GrabMap:w,Preview:k}},"./MapStore2/web/client/components/map/openlayers/index.js":function(e,t,n){e.exports={LLayer:n("./MapStore2/web/client/components/map/openlayers/Layer.jsx").default,Locate:n("./MapStore2/web/client/components/map/openlayers/Locate.jsx").default,LMap:n("./MapStore2/web/client/components/map/openlayers/Map.jsx").default,MeasurementSupport:n("./MapStore2/web/client/components/map/openlayers/MeasurementSupport.jsx").default,Overview:n("./MapStore2/web/client/components/map/openlayers/Overview.jsx").default,ScaleBar:n("./MapStore2/web/client/components/map/openlayers/ScaleBar.jsx").default,Feature:n("./MapStore2/web/client/components/map/openlayers/Feature.jsx").default}},"./MapStore2/web/client/components/map/openlayers/snapshot/snapshotMapStyle.css":function(e,t,n){var r=n("./node_modules/css-loader/index.js!./node_modules/postcss-loader/src/index.js?!./MapStore2/web/client/components/map/openlayers/snapshot/snapshotMapStyle.css");"string"==typeof r&&(r=[[e.i,r,""]]);n("./node_modules/style-loader/addStyles.js")(r,{});r.locals&&(e.exports=r.locals)},"./MapStore2/web/client/components/map/plugins sync recursive ^\\.\\/.*\\.js$":function(e,t,n){var r={"./cesium.js":"./MapStore2/web/client/components/map/plugins/cesium.js","./leaflet.js":"./MapStore2/web/client/components/map/plugins/leaflet.js","./openlayers.js":"./MapStore2/web/client/components/map/plugins/openlayers.js","./sink.js":"./MapStore2/web/client/components/map/plugins/sink.js"};function o(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=i,e.exports=o,o.id="./MapStore2/web/client/components/map/plugins sync recursive ^\\.\\/.*\\.js$"},"./MapStore2/web/client/components/map/plugins/cesium.js":function(e,t,n){var r=n("./node_modules/recompose/es/Recompose.js").createSink;e.exports=function(){return n("./MapStore2/web/client/components/map/cesium/plugins/index.js"),{Map:n("./MapStore2/web/client/components/map/cesium/Map.jsx"),Layer:n("./MapStore2/web/client/components/map/cesium/Layer.jsx"),Feature:r((function(){}))}}},"./MapStore2/web/client/components/map/plugins/leaflet.js":function(e,t,n){e.exports=function(){return n("./MapStore2/web/client/components/map/leaflet/plugins/index.js"),{Map:n("./MapStore2/web/client/components/map/leaflet/Map.jsx"),Layer:n("./MapStore2/web/client/components/map/leaflet/Layer.jsx"),Feature:n("./MapStore2/web/client/components/map/leaflet/Feature.jsx"),Locate:n("./MapStore2/web/client/components/map/leaflet/Locate.jsx"),MeasurementSupport:n("./MapStore2/web/client/components/map/leaflet/MeasurementSupport.jsx"),Overview:n("./MapStore2/web/client/components/map/leaflet/Overview.jsx"),ScaleBar:n("./MapStore2/web/client/components/map/leaflet/ScaleBar.jsx"),DrawSupport:n("./MapStore2/web/client/components/map/leaflet/DrawSupport.jsx"),PopupSupport:n("./MapStore2/web/client/components/map/leaflet/PopupSupport.jsx").default}}},"./MapStore2/web/client/components/map/plugins/openlayers.js":function(e,t,n){e.exports=function(){return n("./MapStore2/web/client/components/map/openlayers/plugins/index.js"),{Map:n("./MapStore2/web/client/components/map/openlayers/Map.jsx").default,Layer:n("./MapStore2/web/client/components/map/openlayers/Layer.jsx").default,Feature:n("./MapStore2/web/client/components/map/openlayers/Feature.jsx").default,Locate:n("./MapStore2/web/client/components/map/openlayers/Locate.jsx").default,MeasurementSupport:n("./MapStore2/web/client/components/map/openlayers/MeasurementSupport.jsx").default,Overview:n("./MapStore2/web/client/components/map/openlayers/Overview.jsx").default,ScaleBar:n("./MapStore2/web/client/components/map/openlayers/ScaleBar.jsx").default,DrawSupport:n("./MapStore2/web/client/components/map/openlayers/DrawSupport.jsx").default,PopupSupport:n("./MapStore2/web/client/components/map/openlayers/PopupSupport.jsx").default}}},"./MapStore2/web/client/components/map/plugins/sink.js":function(e,t,n){var r=n("./node_modules/recompose/es/Recompose.js").createSink;e.exports=function(){return{Map:r((function(){})),Layer:r((function(){})),Feature:r((function(){}))}}},"./MapStore2/web/client/components/mapcontrols/Snapshot/SnapshotPanel.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=n("./node_modules/prop-types/index.js"),f=n("./node_modules/react/index.js"),m=n("./node_modules/react-bootstrap/es/index.js"),y=m.Button,b=m.Col,g=m.Grid,h=m.Row,v=m.Image,S=m.Glyphicon,w=m.Table,O=m.Panel,j=m.Alert,E=n("./MapStore2/web/client/components/I18N/I18N.jsx").DateFormat;n("./MapStore2/web/client/components/mapcontrols/Snapshot/css/snapshot.css");var x,P=n("./MapStore2/web/client/utils/ConfigUtils.js"),C=n("./MapStore2/web/client/components/mapcontrols/Snapshot/shoting.gif"),T=n("./MapStore2/web/client/components/mapcontrols/Snapshot/not-available.png"),M=n("./node_modules/lodash/lodash.js").isEqual,_=n("./MapStore2/web/client/components/misc/spinners/BasicSpinner/BasicSpinner.jsx"),A=n("./MapStore2/web/client/components/misc/Dialog.jsx"),R=n("./MapStore2/web/client/components/I18N/Message.jsx"),I=n("./MapStore2/web/client/components/misc/Portal.jsx"),D=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(d,e);var t,r,l,u=s(d);function d(){var e;o(this,d);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return p(c(e=u.call.apply(u,[this].concat(n))),"renderLayers",(function(){return e.props.layers.map((function(e,t){return e.visibility?f.createElement("li",{key:t},e.title):null}))})),p(c(e),"renderButton",(function(t){return f.createElement(y,{bsStyle:e.props.buttonStyle,bsSize:"xs",disabled:!t,onClick:e.onClick},f.createElement(S,{glyph:"floppy-save",disabled:{}}),"",f.createElement(R,{msgId:e.props.saveBtnText}))})),p(c(e),"renderError",(function(){return e.props.snapshot.error?f.createElement(h,{className:"text-center",style:{marginTop:"5px"}},f.createElement("h4",null,f.createElement("span",{className:"label label-danger"}," ",e.props.snapshot.error))):e.isBingOrGoogle()?f.createElement(h,{className:"text-center",style:{marginTop:"5px"}},f.createElement("h4",null,f.createElement("span",{className:"label label-danger"},e.getgoogleBingError()))):null})),p(c(e),"mapIsLoading",(function(e){return e.some((function(e){return e.loading}))})),p(c(e),"renderPreview",(function(){if(!x.Preview)return f.createElement("div",{className:"snapshot-notsupported"},f.createElement(R,{msgId:"snapshot.notsupported"}));var t,n=e.isBingOrGoogle(),r=e.isSnapshotReady();return t=n?T:C,[f.createElement("div",{style:{display:r&&!n?"block":"none"},key:"snapshotPreviewContainer"},n?null:f.createElement(x.Preview,{ref:"snapshotPreview",timeout:e.props.timeout,config:e.props.map,layers:e.props.layers.filter((function(e){return e.visibility})),snapstate:e.props.snapshot,onStatusChange:e.props.onStatusChange,active:e.props.active&&!n,allowTaint:!0,drawCanvas:r&&!n,browser:e.props.browser})),f.createElement(v,{key:"snapshotLoader",src:t,style:{margin:"0 auto",display:r&&!n?"none":"block"},responsive:!0})]})),p(c(e),"renderSize",(function(){var t=e.props.map&&e.props.map.size||{width:100,height:100};return t.width+" X "+t.height})),p(c(e),"renderSnapshotQueue",(function(){return e.props.snapshot.queue&&e.props.snapshot.queue.length>0?f.createElement("div",{key:"counter",style:{margin:"20px"}},e.renderDownloadMessage(),f.createElement(_,{value:e.props.snapshot.queue.length})," "):null})),p(c(e),"renderDownloadMessage",(function(){return f.createElement(R,{msgId:e.props.downloadingMsg})})),p(c(e),"wrap",(function(t){return e.props.wrap?e.props.wrapWithPanel?f.createElement(O,{id:e.props.id,header:f.createElement("span",null,f.createElement("span",{className:"snapshot-panel-title"},f.createElement(R,{msgId:"snapshot.title"})),f.createElement("span",{className:"settings-panel-close panel-close",onClick:e.props.toggleControl})),style:e.props.panelStyle,className:e.props.panelClassName},t):f.createElement(I,null,f.createElement(A,{id:"mapstore-snapshot-panel",style:e.props.panelStyle,bounds:e.props.bounds},f.createElement("span",{role:"header"},f.createElement("span",{className:"snapshot-panel-title"},f.createElement(R,{msgId:"snapshot.title"})),f.createElement("button",{onClick:e.props.toggleControl,className:"print-panel-close close"},e.props.closeGlyph?f.createElement(S,{glyph:e.props.closeGlyph}):f.createElement("span",null,""))),t)):t})),p(c(e),"renderTaintedMessage",(function(){return e.props.snapshot&&e.props.snapshot&&e.props.snapshot.tainted?f.createElement(j,{bsStyle:"warning"},f.createElement(R,{msgId:"snapshot.taintedMessage"})):null})),p(c(e),"onClick",(function(){if(e.refs.snapshotPreview.isTainted())e.createSnapshot();else{var t=e.refs.snapshotPreview.exportImage();e.props.downloadImg(t)}})),p(c(e),"createSnapshot",(function(){e.props.onCreateSnapshot({key:(new Date).getTime(),config:e.props.map,layers:e.props.layers.filter((function(e){return e.visibility})),snapstate:e.props.snapshot,active:e.props.active,allowTaint:!1,drawCanvas:!0,browser:e.props.browser})})),p(c(e),"isBingOrGoogle",(function(){return e.props.layers.some((function(e){return"google"===e.type&&e.visibility||"bing"===e.type&&e.visibility}))})),p(c(e),"getgoogleBingError",(function(){return f.createElement(R,{msgId:e.props.googleBingErrorMsg})})),p(c(e),"isSnapshotReady",(function(){return"READY"===e.props.snapshot.state&&!e.mapIsLoading(e.props.layers)&&e.props.map&&e.props.map.size})),e}return t=d,(r=[{key:"UNSAFE_componentWillMount",value:function(){x=n("./MapStore2/web/client/components/mapcontrols/Snapshot/SnapshotSupport.jsx")(this.props.mapType)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.mapType!==this.props.mapType&&(x=n("./MapStore2/web/client/components/mapcontrols/Snapshot/SnapshotSupport.jsx")(e.mapType))}},{key:"shouldComponentUpdate",value:function(e){return!M(e.layers,this.props.layers)||e.active!==this.props.active||e.map!==this.props.map||this.props.snapshot!==e.snapshot}},{key:"render",value:function(){var e=this.isBingOrGoogle(),t=this.isSnapshotReady();return this.props.active?this.wrap(f.createElement(g,{role:"body",className:"snapshot-panel",fluid:!0},f.createElement(h,{key:"main"},f.createElement(b,{key:"previewCol",xs:7,sm:7,md:7},this.renderPreview()),f.createElement(b,{key:"dataCol",xs:5,sm:5,md:5},f.createElement(w,{responsive:!0},f.createElement("tbody",null,f.createElement("tr",null,f.createElement("td",null,f.createElement(R,{msgId:"snapshot.date"})),f.createElement("td",null," ",f.createElement(E,{dateParams:this.props.dateFormat}))),f.createElement("tr",null,f.createElement("td",null,f.createElement(R,{msgId:"snapshot.layers"})),f.createElement("td",null,f.createElement("ul",null,this.renderLayers()))),f.createElement("tr",null,f.createElement("td",null,f.createElement(R,{msgId:"snapshot.size"})),f.createElement("td",null,this.renderSize())))))),this.renderError(),f.createElement(h,{key:"buttons",htopclassName:"pull-right",style:{marginTop:"5px"}},this.renderButton(!e&&t),this.renderTaintedMessage(),this.renderSnapshotQueue()))):null}}])&&i(t.prototype,r),l&&i(t,l),d}(f.Component);p(D,"propTypes",{id:d.string,name:d.oneOfType([d.string,d.element]),saveBtnText:d.oneOfType([d.string,d.element]),map:P.PropTypes.config,layers:d.array,img:d.object,snapshot:d.object,active:d.bool,status:d.string,browser:d.object,onStatusChange:d.func,onCreateSnapshot:d.func,downloadImg:d.func,serviceBoxUrl:d.string,dateFormat:d.object,googleBingErrorMsg:d.node,downloadingMsg:d.node,timeout:d.number,mapType:d.string,wrap:d.bool,wrapWithPanel:d.bool,panelStyle:d.object,panelClassName:d.string,toggleControl:d.func,style:d.object,closeGlyph:d.string,buttonStyle:d.string}),p(D,"defaultProps",{id:"snapshot_panel",layers:[],snapshot:{state:"DISABLED",img:{}},browser:{},icon:f.createElement(S,{glyph:"camera"}),onStatusChange:function(){},onCreateSnapshot:function(){},toggleControl:function(){},downloadImg:function(){},saveBtnText:"snapshot.save",serviceBoxUrl:null,dateFormat:{day:"numeric",month:"long",year:"numeric"},googleBingErrorMsg:"snapshot.googleBingError",downloadingMsg:"snapshot.downloadingSnapshots",timeout:1e3,mapType:"leaflet",wrap:!1,wrapWithPanel:!1,panelStyle:{minWidth:"720px",zIndex:100,position:"absolute",overflow:"auto",top:"60px",right:"100px"},panelClassName:"snapshot-panel",closeGlyph:"1-close",buttonStyle:"primary",bounds:"#container"}),e.exports=D},"./MapStore2/web/client/components/mapcontrols/Snapshot/SnapshotQueue.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f,m=n("./node_modules/prop-types/index.js"),y=n("./node_modules/react/index.js");n("./MapStore2/web/client/components/mapcontrols/Snapshot/css/snapshot.css");var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(m,e);var t,r,c,p=l(m);function m(){var e;i(this,m);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return d(u(e=p.call.apply(p,[this].concat(n))),"renderGrabMaps",(function(t){return t.map((function(t){return y.createElement(f.GrabMap,o({id:t.key,active:!0,snapstate:"SHOOTING",timeout:0,onSnapshotReady:function(n){e.saveImage(n,t)}},t))}))})),d(u(e),"saveImage",(function(t,n){try{e.props.onSnapshotError();var r=t.toDataURL();e.props.onRemoveSnapshot(n),setTimeout((function(){e.props.downloadImg(r)}),0)}catch(t){e.props.onSnapshotError("Error saving snapshot"),e.props.onRemoveSnapshot(n)}})),e}return t=m,(r=[{key:"UNSAFE_componentWillMount",value:function(){f=n("./MapStore2/web/client/components/mapcontrols/Snapshot/SnapshotSupport.jsx")(this.props.mapType)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.mapType!==this.props.mapType&&(f=n("./MapStore2/web/client/components/mapcontrols/Snapshot/SnapshotSupport.jsx")(e.mapType))}},{key:"render",value:function(){return void 0!==this.props.queue&&this.props.queue.length>0?y.createElement("div",{className:"snapshot_hidden_map"},y.createElement("div",{key:"hiddenGrabMaps",style:{zIndex:-9999}},this.renderGrabMaps(this.props.queue))):y.createElement("noscript",null)}}])&&a(t.prototype,r),c&&a(t,c),m}(y.Component);d(b,"propTypes",{queue:m.array,browser:m.string,onRemoveSnapshot:m.func,onSnapshotError:m.func,downloadImg:m.func,mapType:m.string}),d(b,"contextTypes",{messages:m.object}),d(b,"defaultProps",{onRemoveSnapshot:function(){},onSnapshotError:function(){},mapType:"leaflet"}),e.exports=b},"./MapStore2/web/client/components/mapcontrols/Snapshot/SnapshotSupport.jsx":function(e,t,n){e.exports=function(e){var t=n("./MapStore2/web/client/components/map sync recursive ^\\.\\/.*\\/SnapshotSupport$")("./"+e+"/SnapshotSupport");return t.default||t}},"./MapStore2/web/client/components/mapcontrols/Snapshot/css/snapshot.css":function(e,t,n){var r=n("./node_modules/css-loader/index.js!./node_modules/postcss-loader/src/index.js?!./MapStore2/web/client/components/mapcontrols/Snapshot/css/snapshot.css");"string"==typeof r&&(r=[[e.i,r,""]]);n("./node_modules/style-loader/addStyles.js")(r,{});r.locals&&(e.exports=r.locals)},"./MapStore2/web/client/components/mapcontrols/Snapshot/not-available.png":function(e,t,n){e.exports=n.p+"MapStore2/web/client/components/mapcontrols/Snapshot/not-available.png"},"./MapStore2/web/client/components/mapcontrols/Snapshot/shoting.gif":function(e,t,n){e.exports=n.p+"MapStore2/web/client/components/mapcontrols/Snapshot/shoting.gif"},"./MapStore2/web/client/components/mapcontrols/annotations/CoordinatesEditor.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f(this,n)}}function f(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?m(e):t}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=n("./node_modules/react/index.js"),h=n("./node_modules/prop-types/index.js"),v=n("./node_modules/react-bootstrap/es/index.js"),S=v.Grid,w=v.Row,O=v.Col,j=v.FormGroup,E=v.ControlLabel,x=v.FormControl,P=v.MenuItem,C=v.DropdownButton,T=v.Glyphicon,M=n("./node_modules/react-select/dist/react-select.es.js").default,_=n("./MapStore2/web/client/components/misc/enhancers/tooltip.jsx"),A=_(T),R=_(C),I=n("./node_modules/lodash/lodash.js"),D=I.head,k=I.isNaN,L=I.get,N=n("./MapStore2/web/client/utils/LocaleUtils.js"),F=n("./MapStore2/web/client/components/misc/toolbar/Toolbar.jsx"),U=n("./MapStore2/web/client/components/misc/enhancers/draggableContainer.jsx"),G=n("./MapStore2/web/client/components/I18N/Message.jsx"),B=n("./MapStore2/web/client/utils/AnnotationsUtils.js"),z=B.validateCoords,W=B.coordToArray,V=n("./MapStore2/web/client/components/misc/coordinateeditors/CoordinatesRow.jsx"),H=n("./MapStore2/web/client/components/mapcontrols/annotations/MeasureEditor.jsx"),q=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(s,e);var t,n,r,o=d(s);function s(){var e;c(this,s);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return b(m(e=o.call.apply(o,[this].concat(n))),"getValidationStateText",(function(e){return e?null:"error"})),b(m(e),"getValidationStateRadius",(function(e){var t=parseFloat(e);return k(t)?"error":null})),b(m(e),"validateCoordinates",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.props.components,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2?arguments[2]:void 0;if(t&&t.length){var o=t.filter(z);return n?o.length>e.props.componentsValidation[e.props.type].min||o.length>=e.props.componentsValidation[e.props.type].min&&!z(t[r]):o.length>=e.props.componentsValidation[e.props.type].min}return!1})),b(m(e),"validateCircle",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.props.components,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.props.properties.radius;if(t&&t.length){var r=D(t);return!k(parseFloat(n))&&z(r)}return!1})),b(m(e),"validateText",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.props.components,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.props.properties.valueText;if(t&&t.length){var r=D(t);return!!n&&z(r)}return!1})),b(m(e),"isValid",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.props.components,n=arguments.length>1?arguments[1]:void 0;return e[e.props.componentsValidation[e.props.type].validation](t,!1,n)})),b(m(e),"addCoordPolygon",(function(t){if("Polygon"===e.props.type){var n=t.filter(z);return t.concat([n.length?n[0]:{lat:"",lon:""}])}return t})),b(m(e),"change",(function(t,n){var r=e.props.components,o=k(parseFloat(n.lat))?"":parseFloat(n.lat),i=k(parseFloat(n.lon))?"":parseFloat(n.lon);r[t]={lat:o,lon:i};var a=e.addCoordPolygon(r);e.props.onChange(a,e.props.properties.radius,e.props.properties.valueText,e.props.mapProjection),e.isValid(r)?(e.props.isMouseEnterEnabled||"LineString"===e.props.type||"Polygon"===e.props.type)&&e.props.onHighlightPoint(r[t]):((e.props.isMouseLeaveEnabled||"LineString"===e.props.type||"Polygon"===e.props.type)&&e.props.onHighlightPoint(null),e.props.onSetInvalidSelected("coords",r.map(W)))})),e}return t=s,(n=[{key:"renderCircle",value:function(){var e=this;return g.createElement(w,{style:{flex:1,overflowY:"auto"}},g.createElement(O,{xs:12},g.createElement(j,{validationState:this.getValidationStateRadius(this.props.properties.radius)},g.createElement(E,null,g.createElement(G,{msgId:"annotations.editor.radius"})),g.createElement(H,l({placeholder:"radius"},this.props.measureOptions,{value:this.props.properties.radius,projection:this.props.mapProjection,name:"radius",onChange:function(t,n){e.isValid(e.props.components,t)?e.props.onChangeRadius(parseFloat(t),e.props.components.map(W),n):""!==t?e.props.onChangeRadius(parseFloat(t),[],n):(e.props.onChangeRadius(null,e.props.components.map(W),n),e.props.onSetInvalidSelected("radius",e.props.components.map(W)))},step:1,type:"number"})))))}},{key:"renderText",value:function(){var e=this;return g.createElement(w,{style:{flex:1,overflowY:"auto"}},g.createElement(O,{xs:12},g.createElement(j,{validationState:this.getValidationStateText(this.props.properties.valueText)},g.createElement(E,null,g.createElement(G,{msgId:"annotations.editor.text"})),g.createElement(x,{value:this.props.properties.valueText,name:"text",placeholder:"text value",onChange:function(t){var n=t.target.value;e.isValid(e.props.components,n)||""!==n?e.props.onChangeText(n,e.props.components.map(W)):(e.props.onChangeText("",e.props.components.map(W)),e.props.onSetInvalidSelected("text",e.props.components.map(W)))},type:"text"}))))}},{key:"render",value:function(){var e=this,t=this.props,n=t.componentsValidation,r=t.type,o=a(this.props.components),s=o.filter(z).length===o.length,l=this[n[r].validation]()&&s,c=[{value:"decimal",text:g.createElement(G,{msgId:"annotations.editor.decimal"})},{value:"aeronautical",text:g.createElement(G,{msgId:"annotations.editor.aeronautical"})}],u=[{glyph:l?"ok-sign text-success":"exclamation-mark text-danger",tooltipId:l?"annotations.editor.valid":n[r].notValid,visible:!0},{Element:function(){return g.createElement(R,{noCaret:!0,title:g.createElement(A,{glyph:"cog"}),pullRight:!0,className:"square-button-md no-border",tooltip:"Format"},c.map((function(t){var n=t.text,r=t.value;return g.createElement(P,{active:e.props.format===r,key:r,onClick:function(){return e.props.onChangeFormat(r)}},n)})))}},{glyph:"plus",tooltipId:"annotations.editor.add",visible:!n[r].add||!n[r].max||this.props.components.length!==n[r].max,onClick:function(){var t=a(e.props.components);t=t.concat([{lat:"",lon:""}]),e.props.onChange(t,e.props.properties.radius,e.props.properties.valueText,e.props.mapProjection)}}],p=!!u.filter((function(e){return e.visible})).length;return g.createElement(S,{fluid:!0,style:{display:"flex",flexDirection:"column",flex:1}},g.createElement(w,{style:{display:"flex",alignItems:"center",marginBottom:8}},g.createElement(O,{xs:p?6:12},g.createElement("h5",null,g.createElement(G,{msgId:"annotations.editor.title."+this.props.type})),this.props.showFeatureSelector?g.createElement(M,{value:this.props.currentFeature,options:[].concat(a(this.props.features.map((function(t,n){var r=L(t,"properties.values",[]),o="bearing"===(r[0]||{}).type?"Bearing":t.geometry.type;if(o!==e.props.type)return null;var i="LineString"===o?"Length":"Bearing"===o?"Bearing":"Area",a=r.length>0?"".concat(i," ").concat(r[0].formattedValue):"",s=r.length>1&&"Polygon"===o?", Perimeter: ".concat(r[1].formattedValue):"";return{label:"".concat(o," (").concat(a).concat(s,")"),value:n}}))),[{label:N.getMessageById(this.context.messages,"annotations.editor.newFeature"),value:this.props.features.length}]).filter((function(e){return!!e})),onChange:function(t){return e.props.onChangeCurrentFeature(null==t?void 0:t.value)}}):null),g.createElement(O,{xs:6},g.createElement(F,{btnGroupProps:{className:"pull-right"},btnDefaultProps:{className:"square-button-md no-border"},buttons:u}))),"Circle"===this.props.type&&this.renderCircle(),"Text"===this.props.type&&this.renderText(),"Circle"===this.props.type&&g.createElement(w,{style:{flex:1,overflowY:"auto"}},g.createElement(O,{xs:12},g.createElement(E,null,g.createElement(G,{msgId:"annotations.editor.center"})))),!(!this.props.components||0===this.props.components.length)&&g.createElement(w,{style:{flex:1,overflowY:"auto"}},g.createElement(O,{xs:5,xsOffset:1},g.createElement(G,{msgId:"annotations.editor.lat"})),g.createElement(O,{xs:5},g.createElement(G,{msgId:"annotations.editor.lon"})),g.createElement(O,{xs:1})),g.createElement(w,{style:{flex:1,flexBasis:"auto",overflowY:"auto",overflowX:"hidden"}},this.props.components.map((function(t,o){return g.createElement(V,{format:e.props.format,aeronauticalOptions:e.props.aeronauticalOptions,sortId:o,key:o+" key",isDraggable:e.props.isDraggable,isDraggableEnabled:e.props.isDraggable&&e[n[r].validation](),showDraggable:e.props.isDraggable&&!("Point"===e.props.type||"Text"===e.props.type||"Circle"===e.props.type),formatVisible:!1,removeVisible:n[r].remove,removeEnabled:e[n[r].validation](e.props.components,n[r].remove,o),onSubmit:e.change,onMouseEnter:function(t){(e.props.isMouseEnterEnabled||"LineString"===e.props.type||"Polygon"===e.props.type||"MultiPoint"===e.props.type)&&e.props.onHighlightPoint(t)},onMouseLeave:function(){(e.props.isMouseLeaveEnabled||"LineString"===e.props.type||"Polygon"===e.props.type||"MultiPoint"===e.props.type)&&e.props.onHighlightPoint(null)},onSort:function(t,n){var r=e.props.components.reduce((function(r,o,s){return t===s?[].concat(a(r),t>n?[i({},o),D(e.props.components.filter((function(e,t){return t===n})))]:[D(e.props.components.filter((function(e,t){return t===n}))),i({},o)]):n===s?a(r):[].concat(a(r),[i({},o)])}),[]).filter((function(e){return e}));e.isValid(r)?e.props.onChange(r):e.props.properties.isValidFeature&&e.props.onSetInvalidSelected("coords",e.props.components.map(W))},idx:o,component:t,onRemove:function(){var t=e.props.components.filter((function(e,t){return t!==o}));e.isValid(t)?(e.props.isMouseEnterEnabled||"LineString"===e.props.type&&o!==t.length||"Polygon"===e.props.type?e.props.onHighlightPoint(t[o]):e.props.onHighlightPoint(null),e.props.onChange(t)):e.props.properties.isValidFeature&&e.props.onSetInvalidSelected("coords",e.props.components.map(W))}})}))),(!this.props.components||0===this.props.components.length)&&g.createElement(w,null,g.createElement(O,{xs:12,className:"text-center",style:{padding:15,paddingBottom:30}},g.createElement("i",null,g.createElement(G,{msgId:"annotations.editor.addByClick"})))))}}])&&u(t.prototype,n),r&&u(t,r),s}(g.Component);b(q,"propTypes",{components:h.array,measureOptions:h.object,onSetInvalidSelected:h.func,onChange:h.func,onChangeRadius:h.func,onHighlightPoint:h.func,onChangeText:h.func,onChangeFormat:h.func,onChangeCurrentFeature:h.func,format:h.string,aeronauticalOptions:h.object,componentsValidation:h.object,transitionProps:h.object,properties:h.object,mapProjection:h.string,features:h.array,currentFeature:h.number,showFeatureSelector:h.bool,type:h.string,isDraggable:h.bool,isMouseEnterEnabled:h.bool,isMouseLeaveEnabled:h.bool}),b(q,"contextTypes",{messages:h.object}),b(q,"defaultProps",{components:[],measureOptions:{},onChange:function(){},onChangeRadius:function(){},onHighlightPoint:function(){},onChangeFormat:function(){},onChangeText:function(){},onChangeCurrentFeature:function(){},onSetInvalidSelected:function(){},componentsValidation:{Bearing:{min:2,max:2,add:!0,remove:!0,validation:"validateCoordinates",notValid:"annotations.editor.notValidPolyline"},Polygon:{min:3,add:!0,remove:!0,validation:"validateCoordinates",notValid:"annotations.editor.notValidPolyline"},LineString:{min:2,add:!0,remove:!0,validation:"validateCoordinates",notValid:"annotations.editor.notValidPolyline"},MultiPoint:{min:2,add:!0,remove:!0,validation:"validateCoordinates",notValid:"annotations.editor.notValidPolyline"},Point:{min:1,max:1,add:!0,remove:!1,validation:"validateCoordinates",notValid:"annotations.editor.notValidMarker"},Circle:{min:1,max:1,add:!0,remove:!1,validation:"validateCircle",notValid:"annotations.editor.notValidCircle"},Text:{min:1,max:1,add:!0,remove:!1,validation:"validateText",notValid:"annotations.editor.notValidText"}},transitionProps:{transitionName:"switch-panel-transition",transitionEnterTimeout:300,transitionLeaveTimeout:300},features:[],isDraggable:!0,isMouseEnterEnabled:!1,isMouseLeaveEnabled:!1,properties:{},type:"Point"}),e.exports=U(q)},"./MapStore2/web/client/components/mapcontrols/annotations/MeasureEditor.jsx":function(e,t,n){var r=n("./node_modules/react/index.js"),o=n("./node_modules/react-bootstrap/es/index.js"),i=o.FormControl,a=o.FormGroup,s=n("./node_modules/lodash/lodash.js").isNumber,l=n("./MapStore2/web/client/utils/MeasureUtils.js").convertUom,c=n("./MapStore2/web/client/utils/CoordinatesUtils.js").getUnits,u=function(e,t,n){return s(parseFloat(e))&&!isNaN(parseFloat(e))?l(parseFloat(e),t,n):e},p=function(e,t,n){return s(parseFloat(e))&&!isNaN(parseFloat(e))?parseFloat(l(e,n,t).toFixed(4)):e},d=n("./node_modules/recompose/es/Recompose.js"),f=d.compose,m=d.withHandlers,y=d.withPropsOnChange,b=d.withState,g=d.withStateHandlers,h=d.defaultProps;e.exports=f(h({valueUom:"m",displayUom:"m",units:[{value:"degrees",label:"deg",originUom:"degrees"},{value:"ft",label:"ft",originUom:"m"},{value:"m",label:"m",originUom:"m"},{value:"km",label:"km",originUom:"m"},{value:"mi",label:"mi",originUom:"m"},{value:"nm",label:"nm",originUom:"m"}]}),g((function(e){var t=e.displayUom;return{uom:void 0===t?"nm":t}}),{setUom:function(){return function(e){return{uom:e}}}}),b("localValue","setLocalValue"),y(["value","localValue","uom","valueUom"],(function(e){var t=e.value,n=e.localValue,r=e.uom,o=e.valueUom;return{value:t===u(n,r,o)?n:p(t,r,o)}})),m({onChange:function(e){var t=e.uom,n=e.projection,r=e.valueUom,o=e.onChange,i=void 0===o?function(){}:o,a=e.setLocalValue,s=void 0===a?function(){}:a;return function(e){s(e),i(u(e,t,r),n)}}}))((function(e){var t=e.value,n=e.units,o=void 0===n?[]:n,s=e.uom,l=e.projection,u=void 0===l?"EPSG:3857":l,p=e.style,d=void 0===p?{display:"inline-flex",width:"100%"}:p,f=e.setUom,m=void 0===f?function(){}:f,y=e.onChange,b=void 0===y?function(){}:y,g=c(u);return r.createElement(a,{style:d},r.createElement(i,{value:t,placeholder:"radius",name:"radius",onChange:function(e){return b(e.target.value,s)},step:1,type:"number"}),r.createElement(i,{componentClass:"select",placeholder:"select",value:s,onChange:function(e){return m(e.target.value)},style:{width:85}},o.filter((function(e){var t=e.originUom;return g===t})).map((function(e){return r.createElement("option",{key:e.value,value:e.value},e.label)}))))}))},"./MapStore2/web/client/components/mapcontrols/locate/LocateBtn.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=n("./node_modules/prop-types/index.js"),m=n("./node_modules/react/index.js"),y=n("./node_modules/react-bootstrap/es/index.js"),b=y.Button,g=y.Glyphicon,h=y.Tooltip,v=n("./MapStore2/web/client/components/misc/OverlayTrigger.jsx"),S=n("./MapStore2/web/client/components/misc/spinners/InlineSpinner/img/spinner.gif"),w=n("./MapStore2/web/client/components/I18N/Message.jsx");n("./MapStore2/web/client/components/mapcontrols/locate/css/locate.css");var O=!1,j=!1,E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(p,e);var t,n,r,c=l(p);function p(){var e;i(this,p);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return d(u(e=c.call.apply(c,[this].concat(n))),"onClick",(function(t){var n;switch(console.log(t),e.props.locate){case"FOLLOWING":n="DISABLED";break;case"ENABLED":n="FOLLOWING";break;case"DISABLED":n="ENABLED";break;case"LOCATING":case"PERMISSION_DENIED":n="DISABLED"}e.props.onClick(n)})),d(u(e),"renderButton",(function(){var t="PERMISSION_DENIED"===e.props.locate;return m.createElement(b,o({id:e.props.id,disabled:t},e.props.btnConfig,{onClick:e.onClick,bsStyle:e.getBtnStyle(),style:e.props.style}),m.createElement(g,{glyph:e.props.glyph}),e.props.text,e.props.help)})),d(u(e),"renderLoadingButton",(function(){var t=m.createElement("img",{src:S,style:{display:"inline-block",margin:"0px",padding:0,background:"transparent",border:0},alt:"..."});return m.createElement(b,o({id:e.props.id,onClick:e.onClick},e.props.btnConfig,{bsStyle:e.getBtnStyle(),style:e.props.style}),t)})),d(u(e),"addTooltip",(function(t){var n=m.createElement(h,{id:"locate-tooltip"},m.createElement(w,{msgId:e.props.tooltip}));return m.createElement(v,{placement:e.props.tooltipPlace,key:"{overlay-trigger.".concat(e.props.id,"-").concat(e.props.tooltip,"}"),overlay:n},t)})),d(u(e),"getBtnStyle",(function(){var t=e.props,n=t.locate,r=t.bsStyle;return"FOLLOWING"!==n&&"ENABLED"!==n||(r="success active"),r})),e}return t=p,(n=[{key:"UNSAFE_componentWillMount",value:function(){var e=this;"PERMISSION_DENIED"===this.props.locate||O||j||(O=!0,navigator.geolocation.getCurrentPosition((function(){O=!0,j=!0}),(function(t){O=!1,1===t.code&&e.props.onClick("PERMISSION_DENIED")})))}},{key:"render",value:function(){var e="LOCATING"===this.props.locate?this.renderLoadingButton():this.renderButton();return this.props.tooltip?this.addTooltip(e):e}}])&&a(t.prototype,n),r&&a(t,r),p}(m.Component);d(E,"propTypes",{id:f.string,hide:f.bool,btnConfig:f.object,text:f.oneOfType([f.string,f.element]),help:f.oneOfType([f.string,f.element]),locate:f.string,onClick:f.func,tooltip:f.element,tooltipPlace:f.string,style:f.object,bsStyle:f.string,glyph:f.string}),d(E,"defaultProps",{id:"locate-btn",onClick:function(){},locate:"DISABLED",tooltipPlace:"left",bsStyle:"default",glyph:"1-position-1",btnConfig:{className:"square-button"}}),e.exports=E},"./MapStore2/web/client/components/mapcontrols/locate/css/locate.css":function(e,t,n){var r=n("./node_modules/css-loader/index.js!./node_modules/postcss-loader/src/index.js?!./MapStore2/web/client/components/mapcontrols/locate/css/locate.css");"string"==typeof r&&(r=[[e.i,r,""]]);n("./node_modules/style-loader/addStyles.js")(r,{});r.locals&&(e.exports=r.locals)},"./MapStore2/web/client/components/mapcontrols/measure/MeasureComponent.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=n("./node_modules/prop-types/index.js"),f=n("./node_modules/react/index.js"),m=n("./node_modules/react-widgets/lib/index.js").DropdownList,y=n("./node_modules/react-bootstrap/es/index.js"),b=y.ButtonToolbar,g=y.Tooltip,h=y.Glyphicon,v=y.Grid,S=y.Row,w=y.Col,O=y.FormGroup,j=n("./node_modules/lodash/lodash.js"),E=j.isEqual,x=j.round,P=j.get,C=j.dropRight,T=n("./node_modules/uuid/v1.js"),M=n("./MapStore2/web/client/utils/FileUtils.js").download,_=n("./MapStore2/web/client/components/I18N/Number.jsx"),A=n("./MapStore2/web/client/components/I18N/Message.jsx"),R=n("./MapStore2/web/client/utils/MeasureUtils.js"),I=R.convertUom,D=R.getFormattedBearingValue,k=n("./MapStore2/web/client/utils/MeasurementUtils.js").convertMeasuresToGeoJSON,L=n("./MapStore2/web/client/utils/LocaleUtils.js"),N=n("./MapStore2/web/client/components/misc/toolbar/Toolbar.jsx"),F=n("./MapStore2/web/client/components/layout/BorderLayout.jsx"),U=n("./MapStore2/web/client/components/mapcontrols/annotations/CoordinatesEditor.jsx");n("./MapStore2/web/client/components/mapcontrols/measure/measure.css");var G=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(u,e);var t,n,r,l=s(u);function u(){var e;o(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return p(c(e=l.call.apply(l,[this].concat(n))),"onLineClick",(function(){e.props.toggleMeasure({geomType:"LineString"})})),p(c(e),"onAreaClick",(function(){e.props.toggleMeasure({geomType:"Polygon"})})),p(c(e),"onBearingClick",(function(){e.props.toggleMeasure({geomType:"Bearing"})})),p(c(e),"onResetClick",(function(){e.props.toggleMeasure({geomType:null})})),p(c(e),"getToolTips",(function(){return{lineToolTip:f.createElement(g,{id:"tooltip-button.line"},e.props.lengthLabel),areaToolTip:f.createElement(g,{id:"tooltip-button.area"},e.props.areaLabel),bearingToolTip:f.createElement(g,{id:"tooltip-button.bearing"},e.isTrueBearing()?e.props.trueBearingLabel:e.props.bearingLabel)}})),p(c(e),"renderMeasurements",(function(){var t={style:"decimal",minimumIntegerDigits:1,maximumFractionDigits:2,minimumFractionDigits:2};return f.createElement(v,{fluid:!0,style:{maxHeight:400}},e.props.lineMeasureEnabled&&f.createElement(S,null,f.createElement(O,{style:{display:"flex",alignItems:"center"}},e.props.lineMeasureValueEnabled&&f.createElement(w,{xs:6},f.createElement("span",null,e.props.lengthLabel,": "),f.createElement("span",{id:"measure-len-res",className:"measure-value"},f.createElement("h3",null,f.createElement("strong",null,f.createElement(_,{key:"len",numberParams:t,value:e.props.formatLength(e.props.uom.length.unit,e.props.measurement.len)})," ",e.props.uom.length.label)))),f.createElement(w,{xs:6},f.createElement(m,{value:e.props.uom.length.label,onChange:function(t){e.props.onChangeUom("length",t,e.props.uom)},data:e.props.uomLengthValues,textField:"label",valueField:"value"})))),e.props.areaMeasureEnabled&&f.createElement(S,null,f.createElement(O,{style:{display:"flex",alignItems:"center"}},e.props.areaMeasureValueEnabled&&f.createElement(w,{xs:6},f.createElement("span",null,e.props.areaLabel,": "),f.createElement("span",{id:"measure-area-res",className:"measure-value"},f.createElement("h3",null,f.createElement("strong",null,f.createElement(_,{key:"area",numberParams:t,value:e.props.formatArea(e.props.uom.area.unit,e.props.measurement.area)})," ",e.props.uom.area.label)))),f.createElement(w,{xs:6},f.createElement(m,{value:e.props.uom.area.label,onChange:function(t){e.props.onChangeUom("area",t,e.props.uom)},data:e.props.uomAreaValues,textField:"label",valueField:"value"})))),e.props.bearingMeasureEnabled&&e.props.bearingMeasureValueEnabled&&f.createElement(S,null,f.createElement(O,{style:{display:"flex",alignItems:"center",minHeight:34}},f.createElement(w,{xs:6},f.createElement("span",null,e.isTrueBearing()?e.props.trueBearingLabel:e.props.bearingLabel,": "),f.createElement("span",{id:"measure-bearing-res",className:"measure-value"},f.createElement("h3",null,f.createElement("strong",null,e.props.formatBearing(e.props.measurement.bearing||0,e.isTrueBearing()&&e.props.measurement.trueBearing))))))))})),p(c(e),"renderPanel",(function(){return e.props.showResults?e.renderMeasurements():null})),p(c(e),"renderLabel",(function(t){return e.props.showButtonsLabels?f.createElement("span",{className:"option-text"},L.getMessageById(e.context.messages,t)):null})),p(c(e),"renderText",(function(t,n){return t?f.createElement("span",null,f.createElement("span",{className:"option-icon"},f.createElement(h,{glyph:t})),e.renderLabel(n)):e.renderLabel(n)})),p(c(e),"isTrueBearing",(function(){return e.props.measurement&&e.props.measurement.trueBearing&&e.props.measurement.trueBearing.measureTrueBearing})),e}return t=u,(n=[{key:"shouldComponentUpdate",value:function(e){return!E(e,this.props)}},{key:"render",value:function(){var e,t,n=this,r=P(this.props.measurement,"features",[])[this.props.measurement.currentFeature||0];return this.props.useSingleFeature?(e=(P(this.props.measurement,"feature.geometry.type")||"").toLowerCase(),t=(P(this.props.measurement,-1!==e.indexOf("polygon")?"feature.geometry.coordinates[0]":"feature.geometry.coordinates")||[]).map((function(e){return{lon:e[0],lat:e[1]}}))):(e=P(r,"geometry.type","").toLowerCase(),t=(P(r,-1!==e.indexOf("polygon")?"geometry.coordinates[0]":"geometry.coordinates")||[]).map((function(e){return{lon:e[0],lat:e[1]}}))),f.createElement(F,{id:this.props.id,style:{overflow:"visible"},header:f.createElement("div",null,f.createElement(b,{style:{width:"100%",marginBottom:15,marginTop:8,display:"flex",justifyContent:"center"}},f.createElement(N,{btnDefaultProps:{className:"square-button-md",bsStyle:"primary"},buttons:[{glyph:this.props.lineGlyph,active:!!this.props.lineMeasureEnabled,bsStyle:this.props.lineMeasureEnabled?"success":"primary",tooltip:this.renderText(this.props.inlineGlyph&&this.props.lineGlyph,"measureComponent.MeasureLength"),onClick:function(){return n.onLineClick()}},{active:!!this.props.areaMeasureEnabled,bsStyle:this.props.areaMeasureEnabled?"success":"primary",glyph:this.props.areaGlyph,tooltip:this.renderText(this.props.inlineGlyph&&this.props.areaGlyph,"measureComponent.MeasureArea"),onClick:function(){return n.onAreaClick()}},{visible:!this.props.disableBearing,active:!!this.props.bearingMeasureEnabled,bsStyle:this.props.bearingMeasureEnabled?"success":"primary",glyph:this.props.bearingGlyph,tooltip:this.renderText(this.props.inlineGlyph&&this.props.bearingGlyph,this.isTrueBearing()?"measureComponent.MeasureTrueBearing":"measureComponent.MeasureBearing"),onClick:function(){return n.onBearingClick()}}]}),f.createElement(N,{btnDefaultProps:{className:"square-button-md",bsStyle:"primary"},buttons:[{glyph:"remove",visible:!!this.props.withReset,tooltip:f.createElement(A,{msgId:"measureComponent.resetTooltip"}),onClick:function(){return n.onResetClick()}}]}),f.createElement(N,{btnDefaultProps:{className:"square-button-md",bsStyle:"primary"},buttons:[{glyph:"ext-json",disabled:0===(this.props.measurement.features||[]).length,visible:!!(this.props.bearingMeasureEnabled||this.props.areaMeasureEnabled||this.props.lineMeasureEnabled)&&this.props.showExportToGeoJSON,tooltip:f.createElement(A,{msgId:"measureComponent.exportToGeoJSON"}),onClick:function(){M(JSON.stringify(k(n.props.measurement.features,n.props.measurement.textLabels,n.props.uom,T(),"MapStore Measurements")),"measurements.json","application/geo+json")}},{glyph:"1-layer",visible:!!(this.props.bearingMeasureEnabled||this.props.areaMeasureEnabled||this.props.lineMeasureEnabled)&&this.props.showAddAsLayer,disabled:0===(this.props.measurement.features||[]).length,tooltip:f.createElement(A,{msgId:"measureComponent.addAsLayer"}),onClick:function(){return n.props.onAddAsLayer(n.props.measurement.features,n.props.measurement.textLabels,n.props.uom)}},{glyph:"comment",tooltip:f.createElement(A,{msgId:"measureComponent.addAsAnnotation"}),onClick:function(){return n.props.onAddAnnotation(n.props.measurement.features,n.props.measurement.textLabels,n.props.uom)},disabled:0===(this.props.measurement.features||[]).length,visible:!!(this.props.bearingMeasureEnabled||this.props.areaMeasureEnabled||this.props.lineMeasureEnabled)&&this.props.showAddAsAnnotation}]})),this.renderPanel())},this.props.showCoordinateEditor&&f.createElement(v,{fluid:!0,style:{maxHeight:400,borderTop:"1px solid #ddd"}},this.props.bearingMeasureEnabled||this.props.areaMeasureEnabled||this.props.lineMeasureEnabled?f.createElement(S,{style:this.props.isCoordinateEditorEnabled?{}:{pointerEvents:"none",opacity:.5}},f.createElement(U,{key:"measureEditor",isMouseEnterEnabled:!0,isMouseLeaveEnabled:!0,format:this.props.format,currentFeature:this.props.measurement.currentFeature,features:this.props.measurement.features,mapProjection:this.props.mapProjection,onChangeFormat:this.props.onChangeFormat,onHighlightPoint:this.props.onHighlightPoint,onChange:this.props.onChangeCoordinates,onChangeCurrentFeature:this.props.onChangeCurrentFeature,showFeatureSelector:this.props.showFeatureSelector,items:[],isDraggable:!0,type:this.props.geomType,components:this.props.useSingleFeature||-1===e.indexOf("polygon")?t:C(t)})):f.createElement(S,null,f.createElement(w,{xs:12,className:"text-center",style:{padding:15}},f.createElement("i",null,f.createElement(A,{msgId:"measureComponent.selectTool"}))))))}}])&&i(t.prototype,n),r&&i(t,r),u}(f.Component);p(G,"propTypes",{id:d.string,name:d.string,columnProperties:d.object,propertiesChangeHandler:d.func,lengthButtonText:d.oneOfType([d.string,d.element]),areaButtonText:d.oneOfType([d.string,d.element]),resetButtonText:d.oneOfType([d.string,d.element]),lengthLabel:d.oneOfType([d.string,d.element]),areaLabel:d.oneOfType([d.string,d.element]),bearingLabel:d.oneOfType([d.string,d.element]),trueBearingLabel:d.oneOfType([d.string,d.element]),uom:d.shape({length:d.shape({unit:d.string.isRequired,label:d.string.isRequired}),area:d.shape({unit:d.string.isRequired,label:d.string.isRequired})}),toggleMeasure:d.func,measurement:d.object,lineMeasureEnabled:d.bool,lineMeasureValueEnabled:d.bool,areaMeasureEnabled:d.bool,areaMeasureValueEnabled:d.bool,bearingMeasureEnabled:d.bool,bearingMeasureValueEnabled:d.bool,showButtons:d.bool,showResults:d.bool,mapProjection:d.string,lineGlyph:d.string,areaGlyph:d.string,bearingGlyph:d.string,withReset:d.bool,showButtonsLabels:d.bool,inlineGlyph:d.bool,formatLength:d.func,formatArea:d.func,formatBearing:d.func,onChangeUom:d.func,uomLengthValues:d.array,uomAreaValues:d.array,format:d.string,onChangeFormat:d.func,onChangeCoordinates:d.func,onChangeCurrentFeature:d.func,onAddAsLayer:d.func,onHighlightPoint:d.func,geomType:d.string,defaultOptions:d.object,onAddAnnotation:d.func,showAddAsAnnotation:d.bool,showAddAsLayer:d.bool,showFeatureSelector:d.bool,useSingleFeature:d.bool,showExportToGeoJSON:d.bool,disableBearing:d.bool,trueBearing:d.object,onMount:d.func,onUpdateOptions:d.func,showCoordinateEditor:d.bool,isCoordinateEditorEnabled:d.bool}),p(G,"contextTypes",{messages:d.object}),p(G,"defaultProps",{mapProjection:"EPSG:3857",columnProperties:{xs:4,sm:4,md:4},uomLengthValues:[{value:"ft",label:"ft"},{value:"m",label:"m"},{value:"km",label:"km"},{value:"mi",label:"mi"},{value:"nm",label:"nm"}],uomAreaValues:[{value:"sqft",label:"ft"},{value:"sqm",label:"m"},{value:"sqkm",label:"km"},{value:"sqmi",label:"mi"},{value:"sqnm",label:"nm"}],id:"measure-result-panel",uom:{length:{unit:"m",label:"m"},area:{unit:"sqm",label:"m"}},geomType:"LineString",defaultOptions:{geomType:"LineString"},showResults:!0,showAddAsAnnotation:!1,showAddAsLayer:!0,showExportToGeoJSON:!0,showCoordinateEditor:!1,isCoordinateEditorEnabled:!0,withReset:!0,lineGlyph:"1-measure-lenght",areaGlyph:"1-measure-area",bearingGlyph:"1-bearing",showButtonsLabels:!0,lengthLabel:f.createElement(A,{msgId:"measureComponent.lengthLabel"}),areaLabel:f.createElement(A,{msgId:"measureComponent.areaLabel"}),bearingLabel:f.createElement(A,{msgId:"measureComponent.bearingLabel"}),trueBearingLabel:f.createElement(A,{msgId:"measureComponent.trueBearingLabel"}),formatLength:function(e,t){return I(t,"m",e)},formatArea:function(e,t){return I(t,"sqm",e)},formatBearing:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return D(x(e||0,6),t)},onChangeUom:function(){},onChangeFormat:function(){},onMount:function(){},onUpdateOptions:function(){},onAddAsLayer:function(){}}),e.exports=G},"./MapStore2/web/client/components/mapcontrols/measure/MeasureDialog.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function i(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=n("./node_modules/prop-types/index.js"),y=n("./node_modules/react/index.js"),b=n("./node_modules/lodash/lodash.js").isEqual,g=n("./MapStore2/web/client/components/mapcontrols/measure/MeasureComponent.jsx"),h=n("./MapStore2/web/client/components/misc/panels/DockablePanel.jsx"),v=n("./MapStore2/web/client/components/I18N/Message.jsx"),S=n("./MapStore2/web/client/components/misc/Dialog.jsx"),w=n("./node_modules/react-bootstrap/es/index.js").Glyphicon,O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(d,e);var t,n,r,u=c(d);function d(){var e;a(this,d);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return f(p(e=u.call.apply(u,[this].concat(n))),"onClose",(function(){e.props.onClose(!1)})),e}return t=d,(n=[{key:"UNSAFE_componentWillMount",value:function(){var e=this.props.defaultOptions,t=e.showCoordinateEditor,n=i(e,["showCoordinateEditor"]);this.props.onMount(t||this.props.showCoordinateEditor),this.props.toggleMeasure({geomType:n.geomType||"LineString"}),this.props.onInit(n)}},{key:"componentDidUpdate",value:function(e){b(e.defaultOptions,this.props.defaultOptions)||this.props.onInit(this.props.defaultOptions)}},{key:"render",value:function(){return this.props.show?this.props.showCoordinateEditor?y.createElement(h,{dock:!0,bsStyle:"primary",position:"right",title:y.createElement(v,{key:"title",msgId:"measureComponent.Measure"}),glyph:"1-ruler",size:660,open:this.props.show,onClose:this.onClose,style:this.props.style},y.createElement(g,o({id:"measure-panel"},this.props))):y.createElement(S,{id:"measure-dialog"},y.createElement("div",{key:"header",role:"header"},y.createElement(w,{glyph:"1-ruler"}),"",y.createElement(v,{key:"title",msgId:"measureComponent.Measure"}),y.createElement("button",{key:"close",onClick:this.onClose,className:"close"},this.props.closeGlyph?y.createElement(w,{glyph:this.props.closeGlyph}):y.createElement("span",null,""))),y.createElement("div",{key:"body",role:"body"},y.createElement(g,o({id:"measure-panel",style:{minWidth:"500px"}},this.props)))):null}}])&&s(t.prototype,n),r&&s(t,r),d}(y.Component);f(O,"propTypes",{show:m.bool,closeGlyph:m.string,onClose:m.func,onMount:m.func,onInit:m.func,showCoordinateEditor:m.bool,defaultOptions:m.object,style:m.object}),f(O,"contextTypes",{messages:m.object}),f(O,"defaultProps",{show:!1,defaultOptions:{},onMount:function(){},onInit:function(){},toggleMeasure:function(){},showCoordinateEditor:!1,showAddAsAnnotation:!1,closeGlyph:"1-close",style:{height:"calc(100% - 30px)"}}),e.exports=O},"./MapStore2/web/client/components/mapcontrols/measure/measure.css":function(e,t,n){var r=n("./node_modules/css-loader/index.js!./node_modules/postcss-loader/src/index.js?!./MapStore2/web/client/components/mapcontrols/measure/measure.css");"string"==typeof r&&(r=[[e.i,r,""]]);n("./node_modules/style-loader/addStyles.js")(r,{});r.locals&&(e.exports=r.locals)},"./MapStore2/web/client/components/mapcontrols/mouseposition sync recursive ^\\.\\/.*$":function(e,t,n){var r={"./CRSSelector":"./MapStore2/web/client/components/mapcontrols/mouseposition/CRSSelector.jsx","./CRSSelector.jsx":"./MapStore2/web/client/components/mapcontrols/mouseposition/CRSSelector.jsx","./MousePosition":"./MapStore2/web/client/components/mapcontrols/mouseposition/MousePosition.jsx","./MousePosition.jsx":"./MapStore2/web/client/components/mapcontrols/mouseposition/MousePosition.jsx","./MousePositionLabelDD":"./MapStore2/web/client/components/mapcontrols/mouseposition/MousePositionLabelDD.jsx","./MousePositionLabelDD.jsx":"./MapStore2/web/client/components/mapcontrols/mouseposition/MousePositionLabelDD.jsx","./MousePositionLabelDM":"./MapStore2/web/client/components/mapcontrols/mouseposition/MousePositionLabelDM.jsx","./MousePositionLabelDM.jsx":"./MapStore2/web/client/components/mapcontrols/mouseposition/MousePositionLabelDM.jsx","./MousePositionLabelDMS":"./MapStore2/web/client/components/mapcontrols/mouseposition/MousePositionLabelDMS.jsx","./MousePositionLabelDMS.jsx":"./MapStore2/web/client/components/mapcontrols/mouseposition/MousePositionLabelDMS.jsx","./MousePositionLabelDMSNW":"./MapStore2/web/client/components/mapcontrols/mouseposition/MousePositionLabelDMSNW.jsx","./MousePositionLabelDMSNW.jsx":"./MapStore2/web/client/components/mapcontrols/mouseposition/MousePositionLabelDMSNW.jsx","./MousePositionLabelYX":"./MapStore2/web/client/components/mapcontrols/mouseposition/MousePositionLabelYX.jsx","./MousePositionLabelYX.jsx":"./MapStore2/web/client/components/mapcontrols/mouseposition/MousePositionLabelYX.jsx","./__tests__/CRSSelector-test":"./MapStore2/web/client/components/mapcontrols/mouseposition/__tests__/CRSSelector-test.js","./__tests__/CRSSelector-test.js":"./MapStore2/web/client/components/mapcontrols/mouseposition/__tests__/CRSSelector-test.js","./__tests__/MousePosition-test":"./MapStore2/web/client/components/mapcontrols/mouseposition/__tests__/MousePosition-test.js","./__tests__/MousePosition-test.js":"./MapStore2/web/client/components/mapcontrols/mouseposition/__tests__/MousePosition-test.js","./__tests__/MousePositionLabelDM-test":"./MapStore2/web/client/components/mapcontrols/mouseposition/__tests__/MousePositionLabelDM-test.js","./__tests__/MousePositionLabelDM-test.js":"./MapStore2/web/client/components/mapcontrols/mouseposition/__tests__/MousePositionLabelDM-test.js","./__tests__/MousePositionLabelDMS-test":"./MapStore2/web/client/components/mapcontrols/mouseposition/__tests__/MousePositionLabelDMS-test.js","./__tests__/MousePositionLabelDMS-test.js":"./MapStore2/web/client/components/mapcontrols/mouseposition/__tests__/MousePositionLabelDMS-test.js","./__tests__/MousePositionLabelDMSNW-test":"./MapStore2/web/client/components/mapcontrols/mouseposition/__tests__/MousePositionLabelDMSNW-test.js","./__tests__/MousePositionLabelDMSNW-test.js":"./MapStore2/web/client/components/mapcontrols/mouseposition/__tests__/MousePositionLabelDMSNW-test.js","./mousePosition.css":"./MapStore2/web/client/components/mapcontrols/mouseposition/mousePosition.css"};function o(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=i,e.exports=o,o.id="./MapStore2/web/client/components/mapcontrols/mouseposition sync recursive ^\\.\\/.*$"},"./MapStore2/web/client/components/mapcontrols/mouseposition/CRSSelector.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=n("./node_modules/react/index.js"),f=n("./node_modules/react-dom/index.js"),m=n("./node_modules/prop-types/index.js"),y=n("./node_modules/react-bootstrap/es/index.js"),b=y.FormControl,g=y.FormGroup,h=y.ControlLabel,v=n("./MapStore2/web/client/utils/CoordinatesUtils.js"),S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(u,e);var t,n,r,l=s(u);function u(){var e;o(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return p(c(e=l.call.apply(l,[this].concat(n))),"launchNewCRSAction",(function(t){if(e.props.useRawInput)e.props.onCRSChange(t.target.value);else{var n=f.findDOMNode(c(e)).getElementsByTagName("select").item(0);e.props.onCRSChange(n.value)}})),e}return t=u,(n=[{key:"render",value:function(){var e,t,n=[],r={};for(var o in Object.keys(this.props.availableCRS).length&&(r=v.filterCRSList(this.props.availableCRS,this.props.filterAllowedCRS,this.props.additionalCRS,this.props.projectionDefs)),r)r.hasOwnProperty(o)&&(e=o,t=r[o].label,n.push(d.createElement("option",{value:e,key:e},t)));return this.props.enabled&&this.props.useRawInput?d.createElement("select",{id:this.props.id,value:this.props.crs,onChange:this.launchNewCRSAction,bsSize:"small"},n):this.props.enabled&&!this.props.useRawInput?d.createElement(g,null,d.createElement(h,null,this.props.label),d.createElement(b,{componentClass:"select",id:this.props.id,value:this.props.crs,onChange:this.launchNewCRSAction,bsSize:"small"},n)):null}}])&&i(t.prototype,n),r&&i(t,r),u}(d.Component);p(S,"propTypes",{id:m.string,label:m.oneOfType([m.func,m.string,m.object]),availableCRS:m.object,filterAllowedCRS:m.array,projectionDefs:m.array,additionalCRS:m.object,crs:m.string,enabled:m.bool,onCRSChange:m.func,useRawInput:m.bool}),p(S,"defaultProps",{id:"mapstore-crsselector",availableCRS:v.getAvailableCRS(),crs:null,onCRSChange:function(){},enabled:!1,useRawInput:!1}),e.exports=S},"./MapStore2/web/client/components/mapcontrols/mouseposition/MousePosition.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=n("./node_modules/prop-types/index.js"),f=n("./node_modules/react/index.js"),m=n("./MapStore2/web/client/libs/proj4.js").default,y=n("./node_modules/react-bootstrap/es/index.js"),b=y.Glyphicon,g=y.Button,h=y.Label,v=n("./node_modules/react-copy-to-clipboard/lib/index.js"),S=n("./MapStore2/web/client/utils/CoordinatesUtils.js"),w=n("./MapStore2/web/client/components/mapcontrols/mouseposition/MousePositionLabelDMS.jsx"),O=n("./MapStore2/web/client/components/mapcontrols/mouseposition/MousePositionLabelYX.jsx"),j=n("./MapStore2/web/client/components/mapcontrols/mouseposition/CRSSelector.jsx"),E=n("./MapStore2/web/client/components/I18N/Message.jsx"),x=n("./node_modules/lodash/lodash.js").isNumber;n("./MapStore2/web/client/components/mapcontrols/mouseposition/mousePosition.css");var P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(u,e);var t,n,r,l=s(u);function u(){var e;o(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return p(c(e=l.call.apply(l,[this].concat(n))),"getPosition",(function(){var t=e.props.mousePosition?e.props.mousePosition:[null,null],n=t.x,r=t.y,o=t.z;if(n||r){if(m.defs(e.props.mousePosition.crs)!==m.defs(e.props.crs)){var i=S.reproject([n,r],e.props.mousePosition.crs,e.props.crs);n=i.x,r=i.y}}else{var a={x:0,y:0,z:o};n=a.x,r=a.y}return"degrees"===S.getUnits(e.props.crs)?{lat:r,lng:n,z:o}:{x:n,y:r,z:o}})),p(c(e),"getTemplateComponent",(function(){return"degrees"===S.getUnits(e.props.crs)?e.props.degreesTemplate:e.props.projectedTemplate})),e}return t=u,(n=[{key:"render",value:function(){var e=this.props.mousePosition?this.getTemplateComponent():null;if(this.props.enabled){var t=this.getPosition();return f.createElement("div",{id:this.props.id,style:this.props.style},f.createElement("span",{className:"mapstore-mouse-coordinates"},this.props.showLabels?f.createElement("label",null,f.createElement(E,{msgId:"mouseCoordinates"})):null,e?f.createElement(e,{position:t}):f.createElement("h5",null,f.createElement(h,{bsSize:"lg",bsStyle:"info"},"...",f.createElement("span",null)))),this.props.copyToClipboardEnabled&&f.createElement(v,{text:JSON.stringify(t),onCopy:this.props.onCopy},f.createElement(g,{bsSize:this.props.btnSize},f.createElement(b,{glyph:this.props.glyphicon}))),this.props.showElevation?f.createElement("span",{className:"mapstore-mouse-elevation"},this.props.showLabels?f.createElement("label",null,f.createElement(E,{msgId:"mousePositionElevation"})):null,f.createElement("h5",null,this.props.elevationTemplate(t.z))):null,this.props.showCRS?this.props.crsTemplate(this.props.crs):null,this.props.editCRS?f.createElement(j,{projectionDefs:this.props.projectionDefs,filterAllowedCRS:this.props.filterAllowedCRS,additionalCRS:this.props.additionalCRS,label:this.props.showLabels?f.createElement("label",null,f.createElement(E,{msgId:"mousePositionCRS"})):null,crs:this.props.crs,enabled:!0,onCRSChange:this.props.onCRSChange}):null,this.props.showToggle?this.props.toggle:null)}return this.props.showToggle?f.createElement("div",{id:this.props.id,style:this.props.style},this.props.toggle):null}}])&&i(t.prototype,n),r&&i(t,r),u}(f.Component);p(P,"propTypes",{id:d.string,mousePosition:d.object,crs:d.string,enabled:d.bool,showCRS:d.bool,editCRS:d.bool,filterAllowedCRS:d.array,projectionDefs:d.array,additionalCRS:d.object,degreesTemplate:d.oneOfType([d.object,d.func]),projectedTemplate:d.oneOfType([d.object,d.func]),crsTemplate:d.oneOfType([d.object,d.func]),elevationTemplate:d.oneOfType([d.object,d.func]),style:d.object,copyToClipboardEnabled:d.bool,glyphicon:d.string,btnSize:d.oneOf(["large","medium","small","xsmall"]),onCopy:d.func,onCRSChange:d.func,toggle:d.object,showLabels:d.bool,showToggle:d.bool,showElevation:d.bool}),p(P,"defaultProps",{id:"mapstore-mouseposition",mousePosition:null,crs:"EPSG:4326",enabled:!0,showCRS:!1,editCRS:!1,degreesTemplate:w,projectedTemplate:O,crsTemplate:function(e){return f.createElement("span",{className:"mouseposition-crs"},e)},elevationTemplate:function(e){return x(e)?f.createElement("span",{className:"mouseposition-elevation"},e," m"):f.createElement(E,{msgId:"mousePositionNoElevation"})},style:{},copyToClipboardEnabled:!1,glyphicon:"paste",btnSize:"xsmall",onCopy:function(){},onCRSChange:function(){},toggle:f.createElement("div",null),showLabels:!1,showToggle:!1,showElevation:!1}),e.exports=P},"./MapStore2/web/client/components/mapcontrols/mouseposition/MousePositionLabelDD.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u,p,d,f=n("./node_modules/prop-types/index.js"),m=n("./node_modules/react/index.js"),y=n("./node_modules/react-bootstrap/es/index.js").Label,b=n("./MapStore2/web/client/components/I18N/Number.jsx"),g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(c,e);var t,n,r,l=s(c);function c(){return o(this,c),l.apply(this,arguments)}return t=c,(n=[{key:"render",value:function(){return m.createElement("h5",null,m.createElement(y,{bsSize:"lg",bsStyle:"info"},m.createElement("span",null,"Lat: "),m.createElement(b,{key:"latD",numberParams:{style:"decimal",minimumIntegerDigits:2,maximumFractionDigits:6,minimumFractionDigits:6},value:this.props.position.lat}),m.createElement("span",null," Lng: "),m.createElement(b,{key:"lngD",numberParams:{style:"decimal",minimumIntegerDigits:3,maximumFractionDigits:6,minimumFractionDigits:6},value:this.props.position.lng}),m.createElement("span",null," ")))}}])&&i(t.prototype,n),r&&i(t,r),c}(m.Component);u=g,p="propTypes",d={position:f.shape({lng:f.number,lat:f.number})},p in u?Object.defineProperty(u,p,{value:d,enumerable:!0,configurable:!0,writable:!0}):u[p]=d,e.exports=g},"./MapStore2/web/client/components/mapcontrols/mouseposition/MousePositionLabelDM.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=n("./node_modules/react/index.js"),f=n("./node_modules/prop-types/index.js"),m=n("./node_modules/react-bootstrap/es/index.js").Label,y=n("./MapStore2/web/client/components/I18N/Number.jsx"),b=n("./node_modules/lodash/lodash.js").isNil,g=n("./MapStore2/web/client/utils/CoordinatesUtils.js").roundCoord,h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(u,e);var t,n,r,l=s(u);function u(){var e;o(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return p(c(e=l.call.apply(l,[this].concat(n))),"getPositionValues",(function(e){var t=e||[null,null],n=t.lng,r=t.lat,o=r%1*60,i=n%1*60;return{lat:r,latM:Math.abs(o),lng:n,lngM:Math.abs(i)}})),e}return t=u,(n=[{key:"render",value:function(){var e=this.getPositionValues(this.props.position),t={style:"decimal",minimumIntegerDigits:2,maximumFractionDigits:0},n={style:"decimal",minimumIntegerDigits:2,maximumFractionDigits:3,minimumFractionDigits:3},r={style:"decimal",minimumIntegerDigits:3,maximumFractionDigits:0};return d.createElement("h5",null,d.createElement(m,{bsSize:"lg",bsStyle:"info"},d.createElement("span",null,"Lat: "),d.createElement(y,{key:"latD",numberParams:t,value:b(e.lat)?e.lat:g({roundingBehaviour:"floor",value:e.lat,maximumFractionDigits:t.maximumFractionDigits})}),d.createElement("span",null," "),d.createElement(y,{key:"latM",numberParams:n,value:e.latM}),d.createElement("span",null,"' "),d.createElement("span",null,"Lng: "),d.createElement(y,{key:"lngD",numberParams:r,value:b(e.lng)?e.lng:g({roundingBehaviour:"floor",value:e.lng,maximumFractionDigits:r.maximumFractionDigits})}),d.createElement("span",null," "),d.createElement(y,{key:"lngM",numberParams:n,value:e.lngM}),d.createElement("span",null,"' ")))}}])&&i(t.prototype,n),r&&i(t,r),u}(d.Component);p(h,"propTypes",{position:f.shape({lng:f.number,lat:f.number})}),e.exports=h},"./MapStore2/web/client/components/mapcontrols/mouseposition/MousePositionLabelDMS.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=n("./node_modules/react/index.js"),f=n("./node_modules/prop-types/index.js"),m=n("./node_modules/react-bootstrap/es/index.js").Label,y=n("./MapStore2/web/client/components/I18N/Number.jsx"),b=n("./MapStore2/web/client/utils/CoordinatesUtils.js").roundCoord,g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(u,e);var t,n,r,l=s(u);function u(){var e;o(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return p(c(e=l.call.apply(l,[this].concat(n))),"getPositionValues",(function(e){var t=e||[null,null],n=t.lng,r=t.lat,o=r%1*60,i=n%1*60,a=o%1*60,s=i%1*60;return{lat:Math.trunc(r),latM:Math.abs(o),latS:Math.abs(a),lng:Math.trunc(n),lngM:Math.abs(i),lngS:Math.abs(s)}})),e}return t=u,(n=[{key:"render",value:function(){var e=this.props.position||{},t=e.lng,n=e.lat,r=this.getPositionValues(this.props.position),o=t<0?"-":"",i=n<0?"-":"",a={style:"decimal",minimumIntegerDigits:2,maximumFractionDigits:0},s={style:"decimal",minimumIntegerDigits:2,maximumFractionDigits:2,minimumFractionDigits:2};return d.createElement("h5",null,d.createElement(m,{bsSize:"lg",bsStyle:"info"},d.createElement("span",null,"Lat: ",i),d.createElement(y,{key:"latD",numberParams:a,value:Math.abs(r.lat)}),d.createElement("span",null," "),d.createElement(y,{key:"latM",numberParams:a,value:b({roundingBehaviour:"floor",value:r.latM,maximumFractionDigits:a.maximumFractionDigits})}),d.createElement("span",null,"' "),d.createElement(y,{key:"latS",numberParams:s,value:r.latS}),d.createElement("span",null,"''"),d.createElement("span",{className:"mouseposition-separator"}),d.createElement("span",null," Lng: ",o),d.createElement(y,{key:"lngD",numberParams:{style:"decimal",minimumIntegerDigits:3,maximumFractionDigits:0},value:Math.abs(r.lng)}),d.createElement("span",null," "),d.createElement(y,{key:"lngM",numberParams:a,value:b({roundingBehaviour:"floor",value:r.lngM,maximumFractionDigits:a.maximumFractionDigits})}),d.createElement("span",null,"' "),d.createElement(y,{key:"lngS",numberParams:s,value:r.lngS}),d.createElement("span",null,"''")))}}])&&i(t.prototype,n),r&&i(t,r),u}(d.Component);p(g,"propTypes",{position:f.shape({lng:f.number,lat:f.number})}),e.exports=g},"./MapStore2/web/client/components/mapcontrols/mouseposition/MousePositionLabelDMSNW.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=n("./node_modules/react/index.js"),f=n("./node_modules/prop-types/index.js"),m=n("./node_modules/react-bootstrap/es/index.js").Label,y=n("./MapStore2/web/client/components/I18N/Number.jsx"),b=n("./MapStore2/web/client/utils/CoordinatesUtils.js").roundCoord,g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(u,e);var t,n,r,l=s(u);function u(){var e;o(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return p(c(e=l.call.apply(l,[this].concat(n))),"getPositionValues",(function(e){var t=e||[null,null],n=t.lng,r=t.lat,o=r%1*60,i=n%1*60,a=o%1*60,s=i%1*60;return{lat:r,latM:Math.abs(o),latS:Math.abs(a),lng:n,lngM:Math.abs(i),lngS:Math.abs(s)}})),e}return t=u,(n=[{key:"render",value:function(){var e=this.getPositionValues(this.props.position),t={style:"decimal",minimumIntegerDigits:2,maximumFractionDigits:0},n={style:"decimal",minimumIntegerDigits:2,maximumFractionDigits:2,minimumFractionDigits:2},r={style:"decimal",minimumIntegerDigits:3,maximumFractionDigits:0};return d.createElement("h5",null,d.createElement(m,{bsSize:"lg",bsStyle:"info"},d.createElement(y,{key:"latD",numberParams:t,value:b({roundingBehaviour:"floor",value:Math.abs(e.lat),maximumFractionDigits:t.maximumFractionDigits})}),d.createElement("span",null," "),d.createElement(y,{key:"latM",numberParams:t,value:b({roundingBehaviour:"floor",value:e.latM,maximumFractionDigits:t.maximumFractionDigits})}),d.createElement("span",null,"' "),d.createElement(y,{key:"latS",numberParams:n,value:e.latS}),d.createElement("span",null,"'' ",e.lat>0?"N":"S"," "),d.createElement(y,{key:"lngD",numberParams:r,value:b({roundingBehaviour:"floor",value:Math.abs(e.lng),maximumFractionDigits:r.maximumFractionDigits})}),d.createElement("span",null," "),d.createElement(y,{key:"lngM",numberParams:t,value:b({roundingBehaviour:"floor",value:e.lngM,maximumFractionDigits:t.maximumFractionDigits})}),d.createElement("span",null,"' "),d.createElement(y,{key:"lngS",numberParams:n,value:e.lngS}),d.createElement("span",null,"'' ",e.lng>0?"E":"W")))}}])&&i(t.prototype,n),r&&i(t,r),u}(d.Component);p(g,"propTypes",{position:f.shape({lng:f.number,lat:f.number})}),e.exports=g},"./MapStore2/web/client/components/mapcontrols/mouseposition/MousePositionLabelYX.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u,p,d,f=n("./node_modules/prop-types/index.js"),m=n("./node_modules/react/index.js"),y=n("./node_modules/react-bootstrap/es/index.js").Label,b=n("./MapStore2/web/client/components/I18N/Number.jsx"),g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(c,e);var t,n,r,l=s(c);function c(){return o(this,c),l.apply(this,arguments)}return t=c,(n=[{key:"render",value:function(){var e={style:"decimal",minimumIntegerDigits:2,maximumFractionDigits:2,minimumFractionDigits:2};return m.createElement("h5",null,m.createElement(y,{bsSize:"lg",bsStyle:"info"},m.createElement("span",null,"X: "),m.createElement(b,{key:"x",numberParams:e,value:this.props.position.x}),m.createElement("span",{className:"mouseposition-separator"}),m.createElement("span",null," Y: "),m.createElement(b,{key:"y",numberParams:e,value:this.props.position.y})))}}])&&i(t.prototype,n),r&&i(t,r),c}(m.Component);u=g,p="propTypes",d={position:f.shape({x:f.number,y:f.number})},p in u?Object.defineProperty(u,p,{value:d,enumerable:!0,configurable:!0,writable:!0}):u[p]=d,e.exports=g},"./MapStore2/web/client/components/mapcontrols/mouseposition/__tests__/CRSSelector-test.js":function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var o=n("./node_modules/expect/lib/index.js"),i=n("./node_modules/react/index.js"),a=n("./node_modules/react-dom/index.js"),s=n("./MapStore2/web/client/components/mapcontrols/mouseposition/CRSSelector.jsx"),l=n("./node_modules/react-dom/test-utils.js"),c={availableCRS:{"EPSG:4326":{label:"EPSG:4326"}},filterAllowedCRS:["EPSG:4326"],additionalCRS:{},projectionDefs:[]};describe("CRSSelector",(function(){beforeEach((function(e){document.body.innerHTML='<div id="container"></div>',setTimeout(e)})),afterEach((function(e){a.unmountComponentAtNode(document.getElementById("container")),document.body.innerHTML="",setTimeout(e)})),it("checks default",(function(){var e=a.render(i.createElement(s,r({enabled:!0},c)),document.getElementById("container"));o(e).toExist();var t=a.findDOMNode(e);o(t).toExist();var n=t.getElementsByTagName("select").item(0).childNodes;o(n.length).toBe(1)})),it("checks if a change of the combo fires the proper action",(function(){var e,t=a.render(i.createElement(s,r({enabled:!0},c,{onCRSChange:function(t){e=t}})),document.getElementById("container")),n=a.findDOMNode(t).getElementsByTagName("select").item(0);n.value="EPSG:4326",l.Simulate.change(n,{target:{value:"EPSG:4326"}}),o(e).toBe("EPSG:4326")}))}))},"./MapStore2/web/client/components/mapcontrols/mouseposition/__tests__/MousePosition-test.js":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u=n("./node_modules/expect/lib/index.js"),p=n("./node_modules/prop-types/index.js"),d=n("./node_modules/react/index.js"),f=n("./node_modules/react-dom/index.js"),m=n("./MapStore2/web/client/components/mapcontrols/mouseposition/MousePosition.jsx");describe("MousePosition",(function(){beforeEach((function(e){document.body.innerHTML='<div id="container"></div>',setTimeout(e)})),afterEach((function(e){f.unmountComponentAtNode(document.getElementById("container")),document.body.innerHTML="",setTimeout(e)})),it("checks enabled",(function(){var e=f.render(d.createElement(m,{enabled:!0,mousePosition:{x:1,y:1,crs:"EPSG:4326"}}),document.getElementById("container"));u(e).toExist();var t=f.findDOMNode(e);u(t).toExist(),u(t.id).toExist();var n=t.getElementsByTagName("button");u(n).toExist(),u(n.length).toBe(0)})),it("checks disabled",(function(){var e=f.render(d.createElement(m,{enabled:!1,mousePosition:{x:1,y:1,crs:"EPSG:4326"}}),document.getElementById("container"));u(e).toExist();var t=f.findDOMNode(e);u(t).toNotExist()})),it("checks no position",(function(){var e=f.render(d.createElement(m,{enabled:!0}),document.getElementById("container"));u(e).toExist();var t=f.findDOMNode(e);u(t).toExist(),u(-1!==t.innerText.indexOf("...")).toBe(!0)})),it("checks no elevation",(function(){var e=f.render(d.createElement(m,{enabled:!0}),document.getElementById("container"));u(e).toExist();var t=f.findDOMNode(e);u(t).toExist(),u(t.getElementsByClassName("mapstore-mouse-elevation").length).toBe(0)})),it("checks elevation enabled",(function(){var e=f.render(d.createElement(m,{enabled:!0,showElevation:!0,mousePosition:{x:11,y:12,z:13,crs:"EPSG:4326"}}),document.getElementById("container"));u(e).toExist();var t=f.findDOMNode(e);u(t).toExist(),u(t.getElementsByClassName("mapstore-mouse-elevation").length).toBe(1),u(t.innerHTML).toContain("13")})),it("checks default templates degrees",(function(){var e=f.render(d.createElement(m,{enabled:!0,mousePosition:{x:1,y:1,crs:"EPSG:4326"}}),document.getElementById("container"));u(e).toExist();var t=f.findDOMNode(e);u(t).toExist(),u(t.innerHTML).toContain("Lat:"),u(t.innerHTML).toContain("Lng:")})),it("checks default templates meters",(function(){var e=f.render(d.createElement(m,{enabled:!0,crs:"EPSG:3857",mousePosition:{x:1,y:1,crs:"EPSG:4326"}}),document.getElementById("container"));u(e).toExist();var t=f.findDOMNode(e);u(t).toExist(),u(t.innerHTML).toContain("Y:"),u(t.innerHTML).toContain("X:")})),it("checks custom template",(function(){var e,t,n,r=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(c,e);var t,n,r,l=s(c);function c(){return o(this,c),l.apply(this,arguments)}return t=c,(n=[{key:"render",value:function(){return d.createElement("div",null,this.props.position.lng,",",this.props.position.lat)}}])&&i(t.prototype,n),r&&i(t,r),c}(d.Component);e=r,t="propTypes",n={position:p.object},t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;var l=f.render(d.createElement(m,{degreesTemplate:r,enabled:!0,mousePosition:{x:11,y:12,crs:"EPSG:4326"}}),document.getElementById("container"));u(l).toExist();var c=f.findDOMNode(l);u(c).toExist(),u(c.innerHTML).toContain("11"),u(c.innerHTML).toContain("12")})),it("checks custom elevation template",(function(){var e=f.render(d.createElement(m,{elevationTemplate:function(e){return d.createElement("div",null,"Z: ",e)},showElevation:!0,enabled:!0,mousePosition:{x:11,y:12,z:13,crs:"EPSG:4326"}}),document.getElementById("container"));u(e).toExist();var t=f.findDOMNode(e);u(t).toExist(),u(t.innerHTML).toContain("Z:"),u(t.innerHTML).toContain("13")})),it("checks copy to clipboard enabled",(function(){var e=f.render(d.createElement(m,{enabled:!0,mousePosition:{x:1,y:1,crs:"EPSG:4326"},copyToClipboardEnabled:!0}),document.getElementById("container"));u(e).toExist();var t=f.findDOMNode(e);u(t).toExist(),u(t.id).toExist();var n=t.getElementsByTagName("button");u(n).toExist(),u(n.length).toBe(1)})),it("checks copy to clipboard action",(function(){var e={onCopy:function(){}},t=u.spyOn(e,"onCopy"),n=f.render(d.createElement(m,{enabled:!0,mousePosition:{x:1,y:1,crs:"EPSG:4326"},copyToClipboardEnabled:!0,onCopy:e.onCopy}),document.getElementById("container")),r=f.findDOMNode(n).getElementsByTagName("button")[0];u.spyOn(window,"prompt").andReturn(!0),r.click(),u(t.calls.length).toBe(1)})),it("checks lat ang lag value",(function(){var e={onCopy:function(){}},t=u.spyOn(e,"onCopy"),n=f.render(d.createElement(m,{enabled:!0,mousePosition:{x:Math.floor(1.1),y:Math.floor(1.2),crs:"EPSG:4326"},copyToClipboardEnabled:!0,onCopy:e.onCopy}),document.getElementById("container")),r=f.findDOMNode(n).getElementsByTagName("button")[0];u.spyOn(window,"prompt").andReturn(!0),r.click(),u(t.calls.length).toBe(1)}))}))},"./MapStore2/web/client/components/mapcontrols/mouseposition/__tests__/MousePositionLabelDM-test.js":function(e,t,n){var r=n("./node_modules/expect/lib/index.js"),o=n("./node_modules/react/index.js"),i=n("./node_modules/react-dom/index.js"),a=n("./MapStore2/web/client/components/mapcontrols/mouseposition/MousePositionLabelDM.jsx"),s=n("./node_modules/react-dom/test-utils.js"),l=n("./node_modules/react-intl/lib/index.es.js").IntlProvider;describe("MousePositionLabelDM",(function(){beforeEach((function(e){document.body.innerHTML='<div id="container"></div>',setTimeout(e)})),afterEach((function(e){i.unmountComponentAtNode(document.getElementById("container")),document.body.innerHTML="",setTimeout(e)})),it("checks default",(function(){var e=i.render(o.createElement(a,null),document.getElementById("container"));r(e).toExist();var t=i.findDOMNode(e);r(t).toExist(),r(t.textContent).toBe("Lat:  ' Lng:  ' ");var n=s.scryRenderedDOMComponentsWithTag(e,"span");r(n.length).toBe(11),r(n[1].textContent).toBe("Lat: "),r(n[2].textContent).toBe(""),r(n[3].textContent).toBe(" "),r(n[4].textContent).toBe(""),r(n[5].textContent).toBe("' "),r(n[6].textContent).toBe("Lng: "),r(n[7].textContent).toBe(""),r(n[8].textContent).toBe(" "),r(n[9].textContent).toBe(""),r(n[10].textContent).toBe("' ")})),it("a position with defaults",(function(){var e=i.render(o.createElement(l,null,o.createElement(a,{position:{lng:28.3,lat:13.5333333}})),document.getElementById("container"));r(e).toExist();var t=i.findDOMNode(e);r(t).toExist(),r(t.textContent).toBe("Lat: 13 32.000' Lng: 028 18.000' ")})),it("position with no rounding but flooring of latD and lngD",(function(){var e=i.render(o.createElement(l,null,o.createElement(a,{position:{lng:10.475013256072998,lat:43.70726776739903}})),document.getElementById("container"));r(e).toExist();var t=i.findDOMNode(e);r(t).toExist(),r(t.textContent).toBe("Lat: 43 42.436' Lng: 010 28.501' ")}))}))},"./MapStore2/web/client/components/mapcontrols/mouseposition/__tests__/MousePositionLabelDMS-test.js":function(e,t,n){var r=n("./node_modules/expect/lib/index.js"),o=n("./node_modules/react/index.js"),i=n("./node_modules/react-dom/index.js"),a=n("./MapStore2/web/client/components/mapcontrols/mouseposition/MousePositionLabelDMS.jsx"),s=n("./node_modules/react-dom/test-utils.js"),l=n("./node_modules/react-intl/lib/index.es.js").IntlProvider;describe("MousePositionLabelDMS",(function(){beforeEach((function(e){document.body.innerHTML='<div id="container"></div>',setTimeout(e)})),afterEach((function(e){i.unmountComponentAtNode(document.getElementById("container")),document.body.innerHTML="",setTimeout(e)})),it("checks default",(function(){var e=i.render(o.createElement(a,null),document.getElementById("container"));r(e).toExist();var t=i.findDOMNode(e);r(t).toExist(),r(t.textContent).toBe("Lat:  ' '' Lng:  ' ''");var n=s.scryRenderedDOMComponentsWithTag(e,"span");r(n.length).toBe(16),r(n[1].textContent).toBe("Lat: "),r(n[2].textContent).toBe(""),r(n[3].textContent).toBe(" "),r(n[4].textContent).toBe(""),r(n[5].textContent).toBe("' "),r(n[6].textContent).toBe(""),r(n[7].textContent).toBe("''"),r(n[8].className).toBe("mouseposition-separator"),r(n[9].textContent).toBe(" Lng: "),r(n[10].textContent).toBe(""),r(n[11].textContent).toBe(" "),r(n[12].textContent).toBe(""),r(n[13].textContent).toBe("' "),r(n[14].textContent).toBe(""),r(n[15].textContent).toBe("''")})),it("a position with defaults",(function(){var e=i.render(o.createElement(l,null,o.createElement(a,{position:{lng:28.3,lat:13.5333333}})),document.getElementById("container"));r(e).toExist();var t=i.findDOMNode(e);r(t).toExist(),r(t.textContent).toBe("Lat: 13 31' 60.00'' Lng: 028 18' 00.00''")})),it("position with no rounding but trunc of latD and lngD",(function(){var e=i.render(o.createElement(l,null,o.createElement(a,{position:{lng:10.475013256072998,lat:43.70726776739903}})),document.getElementById("container"));r(e).toExist();var t=i.findDOMNode(e);r(t).toExist(),r(t.textContent).toBe("Lat: 43 42' 26.16'' Lng: 010 28' 30.05''")})),it("position with negative lat and lng correctly truncated ladD e lngD",(function(){var e=i.render(o.createElement(l,null,o.createElement(a,{position:{lng:-.006,lat:-.006}})),document.getElementById("container"));r(e).toExist();var t=i.findDOMNode(e);r(t).toExist(),r(t.textContent).toBe("Lat: -00 00' 21.60'' Lng: -000 00' 21.60''")})),it("test sign changes when crossing greenwich meridian and equator parallel and latD lngD are 0",(function(){var e=i.render(o.createElement(l,null,o.createElement(a,{position:{lng:-.006,lat:-.006}})),document.getElementById("container"));r(e).toExist();var t=i.findDOMNode(e);r(t).toExist(),r(t.textContent).toBe("Lat: -00 00' 21.60'' Lng: -000 00' 21.60''");var n=i.render(o.createElement(l,null,o.createElement(a,{position:{lng:.006,lat:.006}})),document.getElementById("container"));r(n).toExist();var s=i.findDOMNode(n);r(s).toExist(),r(s.textContent).toBe("Lat: 00 00' 21.60'' Lng: 000 00' 21.60''")}))}))},"./MapStore2/web/client/components/mapcontrols/mouseposition/__tests__/MousePositionLabelDMSNW-test.js":function(e,t,n){var r=n("./node_modules/expect/lib/index.js"),o=n("./node_modules/react/index.js"),i=n("./node_modules/react-dom/index.js"),a=n("./MapStore2/web/client/components/mapcontrols/mouseposition/MousePositionLabelDMSNW.jsx"),s=n("./node_modules/react-dom/test-utils.js"),l=n("./node_modules/react-intl/lib/index.es.js").IntlProvider;describe("MousePositionLabelDMSNW",(function(){beforeEach((function(e){document.body.innerHTML='<div id="container"></div>',setTimeout(e)})),afterEach((function(e){i.unmountComponentAtNode(document.getElementById("container")),document.body.innerHTML="",setTimeout(e)})),it("checks default",(function(){var e=i.render(o.createElement(a,null),document.getElementById("container"));r(e).toExist();var t=i.findDOMNode(e);r(t).toExist(),r(t.textContent).toBe(" ' '' S  ' '' W");var n=s.scryRenderedDOMComponentsWithTag(e,"span");r(n.length).toBe(13),r(n[1].innerText).toBe(""),r(n[2].innerText).toBe(" "),r(n[3].innerText).toBe(""),r(n[4].innerText).toBe("' "),r(n[5].innerText).toBe(""),r(n[6].innerText).toBe("'' S "),r(n[7].innerText).toBe(""),r(n[8].innerText).toBe(" "),r(n[9].innerText).toBe(""),r(n[10].innerText).toBe("' "),r(n[11].innerText).toBe(""),r(n[12].innerText).toBe("'' W")})),it("a position with defaults",(function(){var e=i.render(o.createElement(l,null,o.createElement(a,{position:{lng:28.3,lat:13.5333333}})),document.getElementById("container"));r(e).toExist();var t=i.findDOMNode(e);r(t).toExist(),r(t.textContent).toBe("13 31' 60.00'' N 028 18' 00.00'' E")})),it("position with no rounding but flooring of latD and lngD",(function(){var e=i.render(o.createElement(l,null,o.createElement(a,{position:{lng:10.475013256072998,lat:43.70726776739903}})),document.getElementById("container"));r(e).toExist();var t=i.findDOMNode(e);r(t).toExist(),r(t.textContent).toBe("43 42' 26.16'' N 010 28' 30.05'' E")}))}))},"./MapStore2/web/client/components/mapcontrols/mouseposition/mousePosition.css":function(e,t,n){var r=n("./node_modules/css-loader/index.js!./node_modules/postcss-loader/src/index.js?!./MapStore2/web/client/components/mapcontrols/mouseposition/mousePosition.css");"string"==typeof r&&(r=[[e.i,r,""]]);n("./node_modules/style-loader/addStyles.js")(r,{});r.locals&&(e.exports=r.locals)},"./MapStore2/web/client/components/mapcontrols/navigationhistory/HistoryBar.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=n("./node_modules/prop-types/index.js"),m=n("./node_modules/react/index.js"),y=n("./node_modules/react-bootstrap/es/index.js"),b=y.ButtonGroup,g=y.Button,h=y.Glyphicon,v=y.Tooltip,S=n("./MapStore2/web/client/components/misc/OverlayTrigger.jsx"),w=n("./MapStore2/web/client/components/buttons/ImageButton.jsx"),O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(p,e);var t,n,r,c=l(p);function p(){var e;i(this,p);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return d(u(e=c.call.apply(c,[this].concat(n))),"getNormalButtons",(function(){var t=m.createElement(v,{id:"undo-btn"},e.props.undoBtnProps.label),n=m.createElement(v,{id:"redo-btn"},e.props.redoBtnProps.label);return m.createElement(b,{id:e.props.id,bsSize:"small"},m.createElement(S,{placement:"left",key:"overlay-undo-btn",overlay:t},m.createElement(g,o({bsStyle:"default"},e.props.undoBtnProps,{id:"undo-btn",key:"undo-btn"}),m.createElement(h,{glyph:"step-backward"}))),m.createElement(S,{key:"overlay-redo-btn",overlay:n},m.createElement(g,o({bsStyle:"default"},e.props.redoBtnProps,{id:"redo-btn",key:"redo-btn"}),m.createElement(h,{glyph:"step-forward"}))))})),d(u(e),"getImageButtons",(function(){return m.createElement("span",{id:e.props.id,style:{margin:0,pading:0}},m.createElement(w,e.props.undoBtnProps),m.createElement(w,e.props.redoBtnProps))})),e}return t=p,(n=[{key:"render",value:function(){return"normal"===this.props.btnType?this.getNormalButtons():this.getImageButtons()}}])&&a(t.prototype,n),r&&a(t,r),p}(m.Component);d(O,"propTypes",{id:f.string,undoBtnProps:f.object,redoBtnProps:f.object,btnType:f.oneOf(["normal","image"])}),d(O,"defaultProps",{id:"mapstore-historybar",undoBtnProps:{onClick:function(){}},redoBtnProps:{onClick:function(){},label:""},btnType:"normal"}),e.exports=O},"./MapStore2/web/client/components/mapcontrols/navigationhistory/RedoButton.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=n("./node_modules/prop-types/index.js"),m=n("./node_modules/react/index.js"),y=n("./node_modules/react-bootstrap/es/index.js"),b=y.Button,g=y.Glyphicon,h=y.Tooltip,v=n("./MapStore2/web/client/components/misc/OverlayTrigger.jsx"),S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(p,e);var t,n,r,c=l(p);function p(){var e;i(this,p);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return d(u(e=c.call.apply(c,[this].concat(n))),"onClick",(function(){e.props.onClick()})),d(u(e),"renderButton",(function(){return m.createElement(b,o({id:e.props.id,disabled:e.props.disabled},e.props.btnConfig,{onClick:e.onClick,bsStyle:e.props.buttonStyle,style:e.props.style}),m.createElement(g,{glyph:e.props.glyph}),e.props.text,e.props.help)})),d(u(e),"addTooltip",(function(t){var n=m.createElement(h,{id:"redo-btn-tooltip"},e.props.tooltip);return m.createElement(v,{placement:e.props.tooltipPlace,key:"overlay-trigger."+e.props.id,overlay:n},t)})),e}return t=p,(n=[{key:"shouldComponentUpdate",value:function(e){return this.props.disabled!==e.disabled}},{key:"UNSAFE_componentWillMount",value:function(){}},{key:"render",value:function(){var e=this.renderButton();return this.props.tooltip?this.addTooltip(e):e}}])&&a(t.prototype,n),r&&a(t,r),p}(m.Component);d(S,"propTypes",{id:f.string,btnConfig:f.object,text:f.oneOfType([f.string,f.element]),help:f.oneOfType([f.string,f.element]),onClick:f.func,tooltip:f.element,tooltipPlace:f.string,style:f.object,glyph:f.string,buttonStyle:f.string,disabled:f.bool}),d(S,"defaultProps",{id:"redo-btn",onClick:function(){},tooltipPlace:"left",glyph:"1-screen-forward",buttonStyle:"primary",btnConfig:{className:"square-button"}}),e.exports=S},"./MapStore2/web/client/components/mapcontrols/navigationhistory/UndoButton.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=n("./node_modules/prop-types/index.js"),m=n("./node_modules/react/index.js"),y=n("./node_modules/react-bootstrap/es/index.js"),b=y.Button,g=y.Glyphicon,h=y.Tooltip,v=n("./MapStore2/web/client/components/misc/OverlayTrigger.jsx"),S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(p,e);var t,n,r,c=l(p);function p(){var e;i(this,p);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return d(u(e=c.call.apply(c,[this].concat(n))),"onClick",(function(){e.props.onClick()})),d(u(e),"renderButton",(function(){return m.createElement(b,o({id:e.props.id,disabled:e.props.disabled},e.props.btnConfig,{onClick:e.onClick,bsStyle:e.props.buttonStyle,style:e.props.style}),m.createElement(g,{glyph:e.props.glyph}),e.props.text,e.props.help)})),d(u(e),"addTooltip",(function(t){var n=m.createElement(h,{id:"undo-btn-tooltip"},e.props.tooltip);return m.createElement(v,{placement:e.props.tooltipPlace,key:"overlay-trigger."+e.props.id,overlay:n},t)})),e}return t=p,(n=[{key:"shouldComponentUpdate",value:function(e){return this.props.disabled!==e.disabled}},{key:"UNSAFE_componentWillMount",value:function(){}},{key:"render",value:function(){var e=this.renderButton();return this.props.tooltip?this.addTooltip(e):e}}])&&a(t.prototype,n),r&&a(t,r),p}(m.Component);d(S,"propTypes",{id:f.string,btnConfig:f.object,text:f.oneOfType([f.string,f.element]),help:f.oneOfType([f.string,f.element]),onClick:f.func,tooltip:f.element,tooltipPlace:f.string,style:f.object,glyph:f.string,buttonStyle:f.string,disabled:f.bool}),d(S,"defaultProps",{id:"undo-btn",onClick:function(){},tooltipPlace:"left",glyph:"1-screen-backward",buttonStyle:"primary",btnConfig:{className:"square-button"}}),e.exports=S},"./MapStore2/web/client/components/mapcontrols/search/SearchBar.jsx":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/react/index.js"),o=n.n(r),i=n("./node_modules/react-bootstrap/es/index.js"),a=n("./node_modules/lodash/lodash.js"),s=n("./MapStore2/web/client/components/misc/coordinateeditors/CoordinateEntry.jsx"),l=n.n(s),c=n("./MapStore2/web/client/components/I18N/Message.jsx"),u=n.n(c),p=n("./MapStore2/web/client/components/misc/toolbar/DropdownToolbarOptions.jsx"),d=n.n(p),f=function(e){var t=e.className,n=e.style,r=e.children;return o.a.createElement("div",{id:"map-search-bar",style:n,className:"MapSearchBar"+(t?" "+t:"")},r)},m=n("./node_modules/prop-types/index.js"),y=n.n(m),b=n("./MapStore2/web/client/utils/LocaleUtils.js"),g=n.n(b);function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var S=function(e,t){var n=e.show,r=e.autoFocusOnSelect,a=void 0===r||r,s=e.selectedItems,l=void 0===s?[]:s,c=e.className,u=e.style,p=void 0===u?{textOverflow:"ellipsis"}:u,d=e.placeholder,f=e.placeholderMsgId,m=e.hideOnBlur,y=void 0===m||m,b=e.searchText,v=void 0===b?"":b,S=e.typeAhead,w=void 0===S||S,O=e.delay,j=void 0===O?1e3:O,E=e.blurResetDelay,x=void 0===E?300:E,P=e.onSearch,C=void 0===P?function(){}:P,T=e.onSearchTextChange,M=void 0===T?function(){}:T,_=e.onCancelSelectedItem,A=void 0===_?function(){}:_,R=e.onPurgeResults,I=void 0===R?function(){}:R,D=o.a.useRef(),k=o.a.useRef(),L=o.a.useRef(),N=o.a.useRef(),F=h(o.a.useState(),2),U=F[0],G=F[1],B=h(o.a.useState(),2),z=B[0],W=B[1],V=h(o.a.useState(),2),H=V[0],q=V[1],Y=h(o.a.useState(),2),Q=Y[0],K=Y[1];o.a.useEffect((function(){var e=k.current;if(a&&l&&(e<l.length||!e&&1===l.length)){var t=D.current;t&&t.focus instanceof Function&&setTimeout((function(){return t.focus()}),200)}k.current=l&&l.length})),o.a.useEffect((function(){L&&(z&&(I(),L.current=0,W(!1)),U&&(L.current&&clearTimeout(L.current),L.current=setTimeout((function(){W(!0)}),x),G(!1)))})),o.a.useEffect((function(){N&&(Q&&(C(),N.current=0,K(!1)),H&&(N.current&&clearTimeout(N.current),N.current=setTimeout((function(){K(!0)}),j),q(!1)))}));var Z="search.addressSearch";if(!d&&t.messages){var X=g.a.getMessageById(t.messages,f||Z);X&&(Z=X)}else Z=d;return n&&o.a.createElement(i.FormControl,{className:"searchInput".concat(c?" ".concat(c):""),key:"search-input",placeholder:Z,type:"text",inputRef:function(e){D.current=e},style:p,value:v,onKeyDown:function(e){switch(e.keyCode){case 13:C();break;case 8:!v&&l&&l.length>0&&A(l[l.length-1])}},onBlur:function(){y&&G(!0)},onFocus:function(){w&&v&&C()},onChange:function(e){var t=e.target.value;M(t),w&&q(!0)}})};S.contextTypes={messages:y.a.object};var w=S,O=n("./node_modules/object-assign/index.js"),j=n.n(O),E=n("./node_modules/react-spinkit/dist/index.js"),x=n.n(E),P=n("./MapStore2/web/client/components/misc/toolbar/Toolbar.jsx"),C=n.n(P);function T(){return(T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){A(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var R=function(e){var t=e.loading,n=(e.splitTools,e.toolbarProps),r=void 0===n?{}:n,i=e.toolbarButtons,a=void 0===i?[]:i,s=e.children;return o.a.createElement("span",{className:"search-toolbar-options"},t&&o.a.createElement(x.a,{style:j()({},{position:"absolute"},_({},{right:"69px",zIndex:1,top:"13px"})),spinnerName:"pulse",noFadeIn:!0}),o.a.createElement(C.a,T({btnGroupProps:{className:"btn-group-menu-options"},transitionProps:null,btnDefaultProps:{className:"square-button-md",bsStyle:"primary"}},r,{buttons:a})),s)},I=n("./node_modules/react-select/dist/react-select.es.js"),D=n("./MapStore2/web/client/components/misc/enhancers/localizedProps.js");function k(){return(k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function L(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return N(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return N(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var F=n.n(D)()(["placeholder","clearValueText","noResultsText"])(I.default),U=function(e){var t=e.bookmarkConfig,n=e.onPropertyChange,i=L(Object(r.useState)([]),2),s=i[0],l=i[1],c=t||{},u=c.selected,p=void 0===u?{}:u,d=c.bookmarkSearchConfig,f=(void 0===d?{}:d).bookmarks,m=void 0===f?[]:f;Object(r.useEffect)((function(){Object(a.isEmpty)(m)||l(m.map((function(e){return e.title})))}),[m]);return o.a.createElement("div",{className:"search-select"},o.a.createElement("div",{style:{flex:"1 1 0%",padding:"0px 4px"}},o.a.createElement(F,k({},{clearable:!0,isSearchable:!0,isClearable:!0},{onChange:function(e){var t=e&&e.value||"",r=L(m.filter((function(n,r){return n.title===t&&r===e.idx})),1)[0];n("selected",r)},value:(null==p?void 0:p.title)||"",options:s.map((function(e,t){return{label:e,value:e,idx:t}})),placeholder:"search.b_placeholder",clearValueText:"search.b_clearvalue",noResultsText:"search.b_noresult"}))))};U.propTypes={bookmarkConfig:y.a.object.isRequired,onPropertyChange:y.a.func.isRequired};var G=U;function B(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return z(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach((function(t){H(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function H(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function q(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}t.default=function(e){var t,n=e.activeSearchTool,r=void 0===n?"addressSearch":n,s=e.removeIcon,c=void 0===s?"1-close":s,p=e.searchIcon,m=void 0===p?"search":p,y=e.isSearchClickable,b=void 0===y||y,g=e.splitTools,h=e.searchText,v=void 0===h?"":h,S=e.maxResults,O=void 0===S?15:S,j=e.searchOptions,E=e.aeronauticalOptions,x=void 0===E?{seconds:{decimals:4,step:1e-4}}:E,P=e.constraintsCoordEditor,C=void 0===P?{decimal:{lat:{min:-90,max:90},lon:{min:-180,max:180}}}:P,T=e.loading,M=e.delay,_=e.blurResetDelay,A=e.typeAhead,I=e.coordinate,D=void 0===I?{}:I,k=e.selectedItems,L=void 0===k?[]:k,N=e.defaultZoomLevel,F=void 0===N?12:N,U=e.enabledSearchServicesConfig,z=void 0!==U&&U,W=e.enabledSearchBookmarkConfig,H=void 0!==W&&W,Y=e.error,Q=e.format,K=void 0===Q?"decimal":Q,Z=e.placeholder,X=e.placeholderMsgId,J=void 0===X?"search.addressSearch":X,$=e.showOptions,ee=void 0===$||$,te=e.showAddressSearchOption,ne=void 0===te||te,re=e.showCoordinatesSearchOption,oe=void 0===re||re,ie=e.showBookMarkSearchOption,ae=void 0===ie||ie,se=e.onSearch,le=e.onSearchReset,ce=e.onSearchTextChange,ue=e.onCancelSelectedItem,pe=e.onChangeCoord,de=void 0===pe?function(){}:pe,fe=e.onChangeActiveSearchTool,me=void 0===fe?function(){}:fe,ye=e.onClearCoordinatesSearch,be=void 0===ye?function(){}:ye,ge=e.onChangeFormat,he=void 0===ge?function(){}:ge,ve=e.onToggleControl,Se=void 0===ve?function(){}:ve,we=e.onZoomToPoint,Oe=void 0===we?function(){}:we,je=e.onPurgeResults,Ee=e.items,xe=void 0===Ee?[]:Ee,Pe=q(e,["activeSearchTool","removeIcon","searchIcon","isSearchClickable","splitTools","searchText","maxResults","searchOptions","aeronauticalOptions","constraintsCoordEditor","loading","delay","blurResetDelay","typeAhead","coordinate","selectedItems","defaultZoomLevel","enabledSearchServicesConfig","enabledSearchBookmarkConfig","error","format","placeholder","placeholderMsgId","showOptions","showAddressSearchOption","showCoordinatesSearchOption","showBookMarkSearchOption","onSearch","onSearchReset","onSearchTextChange","onCancelSelectedItem","onChangeCoord","onChangeActiveSearchTool","onClearCoordinatesSearch","onChangeFormat","onToggleControl","onZoomToPoint","onPurgeResults","items"]),Ce=function(e){var t=e.searchText,n=e.selectedItems,r=e.searchOptions,o=e.maxResults,i=e.onSearch,a=void 0===i?function(){}:i,s=e.onSearchReset,l=void 0===s?function(){}:s;return function(){var e=t;void 0!==e&&""!==e||n&&0!==n.length?void 0!==e&&""!==e&&a(e,r,o):l()}}({searchText:v,selectedItems:L,searchOptions:j,maxResults:O,onSearch:se,onSearchReset:le}),Te=function(){le()},Me=function(){Oe({x:parseFloat(D.lon),y:parseFloat(D.lat)},F,"EPSG:4326")},_e=function(){return Object(a.isNumber)(D.lon)&&Object(a.isNumber)(D.lat)},Ae=function(e,t){var n=isNaN(parseFloat(t))?"":parseFloat(t);de(e,n),_e()||be({owner:"search"})},Re=[];if(ne&&Re.push({active:"addressSearch"===r,onClick:function(){be({owner:"search"}),me("addressSearch")},glyph:m,text:o.a.createElement(u.a,{msgId:"search.addressSearch"})}),oe&&Re.push({active:"coordinatesSearch"===r,onClick:function(){void 0!==v&&""!==v&&Te(),me("coordinatesSearch")},glyph:"search-coords",text:o.a.createElement(u.a,{msgId:"search.coordinatesSearch"})}),ae&&!Object(a.isEmpty)(xe)){var Ie=B(xe,1)[0];Object(a.some)(xe,"menuItem")&&Re.push(Ie.menuItem(me,r)),Object(a.some)(xe,"bookmarkConfig")&&(t=Ie.bookmarkConfig(Se,H,r))}var De,ke={onClick:function(){z||Se("searchservicesconfig")},glyph:"cog",className:"square-button-md no-border ",tooltip:o.a.createElement(u.a,{msgId:"search.searchservicesbutton"}),tooltipPosition:"bottom",bsStyle:"default",pullRight:!0,visible:ee&&"addressSearch"===r},Le={buttonConfig:{title:o.a.createElement(i.Glyphicon,{glyph:"cog"}),tooltipId:"search.changeSearchInputField",tooltipPosition:"bottom",className:"square-button-md no-border",pullRight:!0},menuOptions:[{active:"decimal"===K,onClick:function(){return he("decimal")},text:o.a.createElement(u.a,{msgId:"search.decimal"})},{active:"aeronautical"===K,onClick:function(){return he("aeronautical")},text:o.a.createElement(u.a,{msgId:"search.aeronautical"})}],visible:ee&&"coordinatesSearch"===r,Element:d.a};return o.a.createElement(f,null,o.a.createElement(i.FormGroup,null,o.a.createElement("div",{className:"input-group",style:{display:"flex"}},L&&L.map((function(e,t){return o.a.createElement("span",{key:"selected-item"+t,className:"input-group-addon"},o.a.createElement("div",{className:"selectedItem-text"},e.text))})),o.a.createElement(w,{show:"addressSearch"===r,delay:M,typeAhead:A,blurResetDelay:_,placeholder:Z,placeholderMsgId:J,searchText:v,selectedItems:L,onSearch:Ce,onSearchTextChange:ce,onCancelSelectedItem:ue,onPurgeResults:je}),"coordinatesSearch"===r&&oe&&o.a.createElement("div",{className:"coordinateEditor",style:{flexWrap:"decimal"===K?"nowrap":"wrap"}},o.a.createElement(i.Row,{className:"entryRow"},o.a.createElement(i.FormGroup,null,o.a.createElement(i.InputGroup,null,o.a.createElement(i.InputGroup.Addon,{style:{minWidth:45}},o.a.createElement(u.a,{msgId:"search.latitude"})),o.a.createElement(l.a,{format:K,aeronauticalOptions:x,coordinate:"lat",idx:1,value:D.lat,constraints:C,onChange:function(e){return Ae("lat",e)},onKeyDown:function(e){_e()&&13===e.keyCode&&Me()}})))),o.a.createElement(i.Row,{className:"entryRow"},o.a.createElement(i.FormGroup,null,o.a.createElement(i.InputGroup,null,o.a.createElement(i.InputGroup.Addon,{style:{minWidth:45}},o.a.createElement(u.a,{msgId:"search.longitude"})),o.a.createElement(l.a,{format:K,aeronauticalOptions:x,coordinate:"lon",idx:2,value:D.lon,constraints:C,onChange:function(e){return Ae("lon",e)},onKeyDown:function(e){_e()&&13===e.keyCode&&Me()}}))))),"bookmarkSearch"===r&&ae&&o.a.createElement(G,{bookmarkConfig:Pe.bookmarkConfig,onPropertyChange:Pe.onPropertyChange}),o.a.createElement(R,{splitTools:!1,toolbarButtons:[V({},"addressSearch"===r?ke:ee&&"coordinatesSearch"===r?Le:ee&&"bookmarkSearch"===r?t:{}),{glyph:c,className:"square-button-md no-border",bsStyle:"default",pullRight:!0,loading:!Object(a.isUndefined)(T)&&T,visible:"addressSearch"===r&&(""!==v||L&&L.length>0)||"coordinatesSearch"===r&&(Object(a.isNumber)(D.lon)||Object(a.isNumber)(D.lat)),onClick:function(){"addressSearch"===r?Te():(be({owner:"search"}),de("lat",""),de("lon",""))}},{glyph:m,className:"square-button-md no-border "+(b||"addressSearch"!==r?"magnifying-glass clickable":"magnifying-glass"),bsStyle:"default",pullRight:!0,tooltipId:"bookmarkSearch"===r?"search.zoomToBookmark":"",tooltipPosition:"bottom",visible:"addressSearch"===r&&(!(""!==v||L&&L.length>0)||!g)||"coordinatesSearch"===r||"bookmarkSearch"===r,disabled:"bookmarkSearch"===r&&Pe.bookmarkConfig&&!Pe.bookmarkConfig.selected,onClick:function(){var e,t,n,o,i,s,l,c;"coordinatesSearch"===r&&_e()&&Me(),b&&Ce(),"bookmarkSearch"===r&&(e=Pe.bookmarkConfig,t=Pe.onLayerVisibilityLoad,n=Pe.mapInitial,o=Pe.onZoomToExtent,i=e&&e.selected,s=i.options,l=void 0===s?{}:s,void 0!==(c=i.layerVisibilityReload)&&c?t(V(V({},n),{},{map:V(V({},n.map),{},{bookmark_search_config:e&&e.bookmarkSearchConfig})}),null,[l.west,l.south,l.east,l.north]):l&&!Object(a.isEmpty)(l)&&o([l.west,l.south,l.east,l.north],"EPSG:4326"))}},{tooltip:(De=Y,De?o.a.createElement(u.a,{msgId:De.msgId||"search.generic_error",msgParams:{message:De.message,serviceType:De.serviceType}}):null),tooltipPosition:"bottom",className:"square-button-md no-border",glyph:"warning-sign",bsStyle:"danger",glyphClassName:"searcherror",visible:!!Y,onClick:Te},{buttonConfig:{title:o.a.createElement(i.Glyphicon,{glyph:"menu-hamburger"}),tooltipId:"search.changeSearchInputField",tooltipPosition:"bottom",className:"square-button-md no-border",pullRight:!0},menuOptions:[].concat(Re),visible:ee,Element:d.a}]}))))}},"./MapStore2/web/client/components/mapcontrols/search/SearchResult.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=n("./node_modules/react/index.js"),f=n("./node_modules/prop-types/index.js"),m=n("./node_modules/lodash/lodash.js").get,y=n("./MapStore2/web/client/components/misc/toolbar/Toolbar.jsx"),b=n("./MapStore2/web/client/utils/TemplateUtils.js").generateTemplateString,g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(u,e);var t,n,r,l=s(u);function u(){var e;o(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return p(c(e=l.call.apply(l,[this].concat(n))),"onClick",(function(){var t=e.props.item;e.props.onItemClick(t)})),e}return t=u,(n=[{key:"render",value:function(){if(void 0===this.props.item)return null;var e=this.props.item;return d.createElement("div",{key:e.osm_id,className:"search-result",style:e.resultCssStyle,onClick:this.onClick},d.createElement("div",{className:"search-result-left-container"},d.createElement("div",{className:"icon"}," ",d.createElement("img",{src:e.icon})),d.createElement("div",{className:"text-result-title"},m(e,this.props.displayName)||b(this.props.displayName||"")(e)),d.createElement("small",{className:"text-info"},this.props.subTitle&&m(e,this.props.subTitle)||b(this.props.subTitle||"")(e))),d.createElement("div",{className:"search-result-right-container"},d.createElement("div",{className:"search-result-tools"},d.createElement(y,{btnDefaultProps:{className:"square-button-md",bsStyle:"primary"},buttons:this.props.tools}))))}}])&&i(t.prototype,n),r&&i(t,r),u}(d.Component);p(g,"propTypes",{subTitle:f.string,item:f.object,displayName:f.string,idField:f.string,icon:f.string,onItemClick:f.func,tools:f.array}),p(g,"defaultProps",{displayName:"properties.display_name",idField:"id",icon:"properties.icon",tools:[]}),e.exports=g},"./MapStore2/web/client/components/mapcontrols/search/SearchResultList.jsx":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return E}));var r=n("./node_modules/react/index.js"),o=n.n(r),i=n("./node_modules/prop-types/index.js"),a=n.n(i),s=n("./node_modules/lodash/lodash.js"),l=n("./node_modules/object-assign/index.js"),c=n.n(l),u=n("./MapStore2/web/client/components/mapcontrols/search/SearchResult.jsx"),p=n.n(u),d=n("./MapStore2/web/client/components/I18N/I18N.jsx"),f=n.n(d),m=n("./MapStore2/web/client/utils/SearchUtils.js");function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O(e);if(t){var o=O(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return S(this,n)}}function S(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?w(e):t}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(a,e);var t,n,r,i=v(a);function a(){var e;b(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return j(w(e=i.call.apply(i,[this].concat(n))),"onItemClick",(function(t){e.props.onItemClick(t,e.props.mapConfig)})),j(w(e),"renderResults",(function(){return e.props.results.map((function(t,n){var r,i=e.findService(t)||{};return o.a.createElement(p.a,{subTitle:i.subTitle,idField:i.idField,displayName:i.displayName,key:t.osm_id||"res_"+n,item:t,onItemClick:e.onItemClick,tools:[{id:"open-gfi",visible:Object(m.showGFIForService)(Object(s.find)(e.props.layers,{name:null===(r=i.options)||void 0===r?void 0:r.typeName}),i),glyph:"info-sign",tooltipId:"search.showGFI",onClick:function(n){n.stopPropagation(),e.props.showGFI(t)}}]})}))})),j(w(e),"findService",(function(t){var n=e.props.searchOptions&&e.props.searchOptions.services;if(null!==t.__SERVICE__)if(n&&"string"==typeof t.__SERVICE__){for(var r=0;r<n.length;r++)if(n[r]&&n[r].id===t.__SERVICE__)return n[r];for(var o=0;o<n.length;o++)if(n[o]&&n[o].type===t.__SERVICE__)return n[o]}else if("object"===y(t.__SERVICE__))return t.__SERVICE__;return null})),e}return t=a,(n=[{key:"render",value:function(){var e=this.props.notFoundMessage;e||(e=o.a.createElement(f.a.Message,{msgId:"noresultfound"}));var t=this.props.containerStyle,n=this.props.mapConfig&&this.props.mapConfig.size;if(this.props.fitToMapSize&&n){var r=n.width-this.props.sizeAdjustment.width,i=n.height-this.props.sizeAdjustment.height;t=c()({},this.props.containerStyle,{maxWidth:r,maxHeight:i})}return this.props.results?0===this.props.results.length?o.a.createElement("div",{className:"search-result-list",style:c()({padding:"10px",textAlign:"center"},t)},e):o.a.createElement("div",{className:"search-result-list",style:t},this.renderResults()):null}}])&&g(t.prototype,n),r&&g(t,r),a}(o.a.Component);j(E,"propTypes",{results:a.a.array,layers:a.a.array,searchOptions:a.a.object,mapConfig:a.a.object,fitToMapSize:a.a.bool,containerStyle:a.a.object,sizeAdjustment:a.a.object,onItemClick:a.a.func,addMarker:a.a.func,afterItemClick:a.a.func,showGFI:a.a.func,notFoundMessage:a.a.oneOfType([a.a.object,a.a.string])}),j(E,"defaultProps",{layers:[],sizeAdjustment:{width:0,height:110},containerStyle:{zIndex:1e3},onItemClick:function(){},addMarker:function(){},afterItemClick:function(){},showGFI:function(){}})},"./MapStore2/web/client/components/mapcontrols/searchservicesconfig/ResultsProps.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?d(e):t}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=n("./node_modules/react/index.js"),b=n("./node_modules/lodash/lodash.js").get,g=n("./node_modules/react-bootstrap/es/index.js"),h=g.FormGroup,v=g.ControlLabel,S=g.FormControl,w=g.Label,O=g.Checkbox,j=n("./node_modules/react-nouislider/dist/react-nouislider.common.js"),E=n("./node_modules/object-assign/index.js"),x=n("./node_modules/prop-types/index.js"),P=n("./node_modules/react-select/dist/react-select.es.js").default,C=n("./MapStore2/web/client/components/I18N/Message.jsx"),T=n("./MapStore2/web/client/utils/LocaleUtils.js");var M=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(p,e);var t,n,r,i=u(p);function p(){var e;s(this,p);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return m(d(e=i.call.apply(i,[this].concat(n))),"updateProp",(function(t,n,r){var o=b(r,n||"target.value");e.props.onPropertyChange("service",E({},e.props.service,m({},t,o)))})),m(d(e),"updatePriority",(function(t){e.props.onPropertyChange("service",E({},e.props.service,{priority:parseFloat(t[0],10)}))})),m(d(e),"updateLaunchInfoPanel",(function(t){var n=t&&t.value?t.value:"";"no_info"===n&&(n=void 0),e.props.onPropertyChange("service",a(a({},e.props.service),{},{launchInfoPanel:n,openFeatureInfoButtonEnabled:!1,forceSearchLayerVisibility:!1}))})),e}return t=p,(n=[{key:"render",value:function(){var e,t,n=this.props.service,r=this.props.launchInfoPanelOptions||[{label:T.getMessageById(this.context.messages,"search.s_launch_info_panel.no_info"),value:"no_info"},{label:T.getMessageById(this.context.messages,"search.s_launch_info_panel.all_layers"),value:"all_layers"},{label:T.getMessageById(this.context.messages,"search.s_launch_info_panel.single_layer"),value:"single_layer"}],i=(null==n?void 0:n.launchInfoPanel)||this.props.launchInfoPanelDefault;return y.createElement("form",null,y.createElement("span",{className:"wfs-required-props-title"},y.createElement(C,{msgId:"search.s_result_props_label"})),y.createElement(h,null,y.createElement(v,null,y.createElement(C,{msgId:"search.s_title"})),y.createElement(S,{value:n.displayName,key:"displayName",type:"text",placeholder:'e.g. "${properties.name}"',onChange:this.updateProp.bind(null,"displayName",null)})),y.createElement(h,null,y.createElement(v,null,y.createElement(C,{msgId:"search.s_description"})),y.createElement(S,{value:n.subTitle,key:"subTitle",type:"text",onChange:this.updateProp.bind(null,"subTitle",null)})),y.createElement(h,null,y.createElement(v,null,y.createElement(C,{msgId:"search.s_priority"}),y.createElement(w,{key:"priority-label",className:"slider-label"},parseInt(n.priority||1,10))),y.createElement(j,{key:"priority",start:[n.priority||1],step:1,range:{min:1,max:10},onSlide:this.updatePriority}),y.createElement("span",{className:"priority-info"},y.createElement(C,{msgId:"search.s_priority_info"}))),y.createElement(h,null,y.createElement(v,null,y.createElement(C,{msgId:"search.s_launch_info_panel.label"})),y.createElement(P,o({options:r,clearable:!1,value:i,onChange:this.updateLaunchInfoPanel},this.props.launchInfoPanelSelectOptions)),"single_layer"===i?y.createElement(h,null,y.createElement(O,{checked:null!==(e=null==n?void 0:n.openFeatureInfoButtonEnabled)&&void 0!==e&&e,onChange:this.updateProp.bind(null,"openFeatureInfoButtonEnabled","target.checked")},y.createElement(C,{msgId:"search.s_launch_info_panel.openFeatureInfoButtonCheckbox"})),y.createElement(O,{checked:null!==(t=null==n?void 0:n.forceSearchLayerVisibility)&&void 0!==t&&t,onChange:this.updateProp.bind(null,"forceSearchLayerVisibility","target.checked")},y.createElement(C,{msgId:"search.s_launch_info_panel.forceSearchLayerVisibility"}))):null,y.createElement("span",{className:"priority-info with-top-margin"},y.createElement(C,{msgId:"search.s_launch_info_panel.".concat(i,"_description")}))))}}])&&l(t.prototype,n),r&&l(t,r),p}(y.Component);m(M,"propTypes",{service:x.object,launchInfoPanelOptions:x.array,launchInfoPanelDefault:x.string,launchInfoPanelSelectOptions:x.object,onPropertyChange:x.func}),m(M,"contextTypes",{messages:x.object}),m(M,"defaultProps",{service:{},launchInfoPanelDefault:"no_info",launchInfoPanelSelectOptions:{},onPropertyChange:function(){}}),e.exports={Element:M,validate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.displayName&&e.displayName.length>0}}},"./MapStore2/web/client/components/mapcontrols/searchservicesconfig/ServicesList.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=n("./node_modules/react/index.js"),f=n("./node_modules/react-bootstrap/es/index.js"),m=f.FormGroup,y=f.Checkbox,b=f.ControlLabel,g=f.Glyphicon,h=n("./MapStore2/web/client/components/I18N/Message.jsx"),v=n("./MapStore2/web/client/components/buttons/ConfirmButton.jsx"),S=n("./node_modules/prop-types/index.js");var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(u,e);var t,n,r,l=s(u);function u(){var e;o(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return p(c(e=l.call.apply(l,[this].concat(n))),"getOptions",(function(){return 0===e.props.services.length?d.createElement("div",{className:"search-service-name"},d.createElement(h,{msgId:"search.serviceslistempty"})):e.props.services.map((function(t,n){return d.createElement("div",{className:"search-service-item",key:n},d.createElement("span",{className:"search-service-name"},t.name),d.createElement(v,{className:"list-remove-btn",onConfirm:function(){return e.remove(n)},text:d.createElement(g,{glyph:"remove-circle"}),confirming:{className:"text-warning list-remove-btn",text:d.createElement(h,{msgId:"search.confirmremove"})}}),d.createElement(g,{onClick:function(){return e.edit(t,n)},glyph:"pencil"}))}))})),p(c(e),"edit",(function(t,n){e.props.onPropertyChange("init_service_values",t),e.props.onPropertyChange("service",t),e.props.onPropertyChange("editIdx",n),e.props.onPropertyChange("page",1)})),p(c(e),"toggleOverride",(function(){var t=e.props,n=t.services,r=t.override;e.props.onPropertyChange("textSearchConfig",{services:n,override:!r})})),p(c(e),"remove",(function(t){var n=e.props,r=n.services,o=n.override,i=r.filter((function(e,n){return n!==t}));e.props.onPropertyChange("textSearchConfig",{services:i,override:o})})),e}return t=u,(n=[{key:"render",value:function(){var e=this.props.override;return d.createElement("form",null,d.createElement(m,null,d.createElement(b,null,d.createElement(h,{msgId:"search.serviceslistlabel"})),d.createElement("div",{className:"services-list"},this.getOptions())),d.createElement(y,{checked:e,onChange:this.toggleOverride},d.createElement(h,{msgId:"search.overriedservice"})))}}])&&i(t.prototype,n),r&&i(t,r),u}(d.Component);p(w,"propTypes",{services:S.array,override:S.bool,service:S.object,onPropertyChange:S.func}),p(w,"contextTypes",{messages:S.object}),p(w,"defaultProps",{services:[],override:!1,onPropertyChange:function(){}}),e.exports={Element:w,validate:function(){return!0}}},"./MapStore2/web/client/components/mapcontrols/searchservicesconfig/WFSOptionalProps.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=n("./node_modules/react/index.js"),y=n("./node_modules/react-bootstrap/es/index.js"),b=y.FormGroup,g=y.ControlLabel,h=y.FormControl,v=y.Label,S=n("./MapStore2/web/client/components/I18N/Message.jsx"),w=n("./node_modules/react-nouislider/dist/react-nouislider.common.js"),O=n("./node_modules/object-assign/index.js"),j=n("./node_modules/prop-types/index.js");var E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(u,e);var t,n,r,o=c(u);function u(){var e;a(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return f(p(e=o.call.apply(o,[this].concat(n))),"updateProp",(function(t,n){var r=n.target.value,o=O({},e.props.service.options,f({},t,r));e.props.onPropertyChange("service",O({},e.props.service,{options:o}))})),f(p(e),"updateSliderProps",(function(t,n){var r=i(i({},e.props.service.options),{},f({},t,parseInt(n[0],10)));e.props.onPropertyChange("service",i(i({},e.props.service),{},{options:r}))})),e}return t=u,(n=[{key:"render",value:function(){var e=this.props.service.options,t=void 0===e?{}:e;return m.createElement("form",null,m.createElement("span",{className:"wfs-required-props-title"},m.createElement(S,{msgId:"search.s_wfs_opt_props_label"})),m.createElement(b,null,m.createElement(g,null,m.createElement(S,{msgId:"search.s_sort"})),m.createElement(h,{value:t.sortBy,key:"sortBy",type:"text",onChange:this.updateProp.bind(null,"sortBy")})),m.createElement(b,null,m.createElement(g,null,m.createElement(S,{msgId:"search.s_max_features"})),m.createElement(w,{key:"maxFeatures",start:[t.maxFeatures||1],range:{min:1,max:50},onSlide:this.updateSliderProps.bind(null,"maxFeatures")}),m.createElement(v,{key:"maxFeatures-label",className:"slider-label"},t.maxFeatures||1)),m.createElement(b,null,m.createElement(g,null,m.createElement(S,{msgId:"search.s_max_zoom"})),m.createElement(w,{key:"maxZoomLevel",start:[t.maxZoomLevel||21],range:{min:1,max:35},onSlide:this.updateSliderProps.bind(null,"maxZoomLevel")}),m.createElement(v,{key:"maxZoomLevel-label",className:"slider-label"},t.maxZoomLevel||21)))}}])&&s(t.prototype,n),r&&s(t,r),u}(m.Component);f(E,"propTypes",{service:j.object,onPropertyChange:j.func}),f(E,"defaultProps",{service:{},onPropertyChange:function(){}}),e.exports={Element:E,validate:function(){return!0}}},"./MapStore2/web/client/components/mapcontrols/searchservicesconfig/WFSServiceProps.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=n("./node_modules/react/index.js"),f=n("./node_modules/react-bootstrap/es/index.js"),m=f.FormGroup,y=f.ControlLabel,b=f.FormControl,g=n("./MapStore2/web/client/components/I18N/Message.jsx"),h=n("./node_modules/object-assign/index.js"),v=n("./node_modules/prop-types/index.js");var S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(u,e);var t,n,r,l=s(u);function u(){var e;o(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return p(c(e=l.call.apply(l,[this].concat(n))),"updateProp",(function(t,n){var r=n.target.value;"queriableAttributes"===t&&(r=r.split(","));var o=h({},e.props.service.options,p({},t,r));e.props.onPropertyChange("service",h({},e.props.service,{options:o}))})),p(c(e),"updateName",(function(t){var n=t.target.value;e.props.onPropertyChange("service",h({},e.props.service,{name:n}))})),p(c(e),"updateMaxFeatures",(function(t){var n=h({},e.props.service.options,{maxFeatures:parseFloat(t[0],10)});e.props.onPropertyChange("service",h({},e.props.service,{options:n}))})),e}return t=u,(n=[{key:"render",value:function(){var e=this.props.service,t=e.options,n=void 0===t?{}:t;return d.createElement("form",null,d.createElement("span",{className:"wfs-required-props-title"},d.createElement(g,{msgId:"search.s_wfs_props_label"})),d.createElement(m,null,d.createElement(y,null,d.createElement(g,{msgId:"search.s_name"})),d.createElement(b,{value:e.name,key:"name",type:"text",onChange:this.updateName})),d.createElement(m,null,d.createElement(y,null,d.createElement(g,{msgId:"search.s_url"})),d.createElement(b,{value:n.url,key:"url",type:"text",onChange:this.updateProp.bind(null,"url")})),d.createElement(m,null,d.createElement(y,null,d.createElement(g,{msgId:"search.s_layer"})),d.createElement(b,{value:n.typeName,key:"typeName",type:"text",onChange:this.updateProp.bind(null,"typeName")})),d.createElement(m,null,d.createElement(y,null,d.createElement(g,{msgId:"search.s_attributes"})),d.createElement(b,{value:([n.queriableAttributes]||!1).join(","),key:"queriableAttributes",type:"text",onChange:this.updateProp.bind(null,"queriableAttributes")})))}}])&&i(t.prototype,n),r&&i(t,r),u}(d.Component);p(S,"propTypes",{service:v.object,onPropertyChange:v.func}),p(S,"defaultProps",{service:{},onPropertyChange:function(){}}),e.exports={Element:S,validate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=e.name,o=void 0===r?"":r,i=n.url,a=void 0===i?"":i,s=n.typeName,l=void 0===s?"":s,c=n.queriableAttributes,u=void 0===c?"":c;return o.length>0&&a.length>0&&l.length>0&&u.length>0}}},"./MapStore2/web/client/components/maps/MapCatalog.jsx":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n("./node_modules/react/index.js"),s=n("./node_modules/recompose/es/Recompose.js").compose,l=n("./node_modules/lodash/lodash.js").isNil,c=n("./MapStore2/web/client/components/I18N/Message.jsx"),u=n("./MapStore2/web/client/components/maps/MapCatalogForm.jsx"),p=n("./MapStore2/web/client/components/layout/BorderLayout.jsx"),d=n("./MapStore2/web/client/components/misc/LoadingSpinner.jsx"),f=n("./MapStore2/web/client/components/misc/enhancers/loadingState.jsx"),m=n("./MapStore2/web/client/components/misc/enhancers/emptyState.jsx"),y=s(f((function(e){var t=e.loading,n=e.items;return 0===(void 0===n?[]:n).length&&t})),m((function(e){var t=e.loading,n=e.items;return 0===(void 0===n?[]:n).length&&!t}),{title:a.createElement(c,{msgId:"catalog.noRecordsMatched"}),style:{transform:"translateY(50%)"}}))(n("./MapStore2/web/client/components/misc/cardgrids/SideGrid.jsx"));e.exports=function(e){var t=e.setSearchText,n=void 0===t?function(){}:t,r=e.selected,i=e.skip,s=void 0===i?0:i,f=e.onSelected,m=e.loading,b=e.searchText,g=e.items,h=void 0===g?[]:g,v=e.loaderProps,S=void 0===v?{}:v,w=e.total,O=e.header,j=e.title,E=void 0===j?a.createElement(c,{msgId:"maps.title"}):j;return a.createElement(p,{className:"map-catalog",header:O||a.createElement(u,{title:E,searchText:b,onSearchTextChange:n}),footer:a.createElement("div",{className:"catalog-footer"},a.createElement("span",null,m&&h.length>0?a.createElement(d,null):null),l(w)?null:a.createElement("span",{className:"res-info"},a.createElement(c,{msgId:"catalog.pageInfoInfinite",msgParams:{loaded:h.length-s,total:w}})))},a.createElement(y,{loaderProps:S,items:h.map((function(e){return e===r||r&&e&&e.map&&r.id===e.map.id?o(o({},e),{},{selected:!0}):e})),loading:m,onItemClick:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.map;return f(t)}}))}},"./MapStore2/web/client/components/maps/MapCatalogForm.jsx":function(e,t,n){var r=n("./node_modules/react/index.js"),o=n("./node_modules/react-bootstrap/es/index.js"),i=o.Col,a=o.FormGroup,s=o.FormControl,l=o.Grid,c=o.Row,u=n("./MapStore2/web/client/components/misc/enhancers/localizedProps.js")("placeholder")(s);e.exports=function(e){var t=e.onSearchTextChange,n=void 0===t?function(){}:t,o=e.searchText,s=e.title;return r.createElement(l,{className:"catalog-form",fluid:!0},r.createElement(c,null,r.createElement(i,{xs:12},s&&r.createElement("h4",{className:"text-center"},s),r.createElement(a,{controlId:"catalog-form"},r.createElement(u,{type:"text",placeholder:"catalog.textSearchPlaceholder",value:o,onChange:function(e){return n(e.currentTarget.value)}})))))}},"./MapStore2/web/client/components/maps/enhancers/enhancers.js":function(e,t,n){function r(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c,u,p,d,f=n("./node_modules/react/index.js"),m=n("./node_modules/rxjs/Rx.js"),y=n("./node_modules/recompose/es/Recompose.js"),b=y.compose,g=y.withProps,h=y.mapPropsStream,v=n("./node_modules/lodash/lodash.js").castArray,S=n("./MapStore2/web/client/components/I18N/Message.jsx"),w=n("./MapStore2/web/client/api/persistence/index.js").getResources,O=n("./MapStore2/web/client/components/misc/FitIcon.jsx"),j=n("./MapStore2/web/client/components/misc/enhancers/withControllableState.js"),E=n("./MapStore2/web/client/components/misc/enhancers/infiniteScroll/withInfiniteScroll.js"),x=f.createElement(O,{glyph:"geoserver",padding:20}),P=function(e){var t=e.results,n=e.totalCount;return{items:(""!==t&&v(t)||[]).map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{id:e.id,title:e.name,description:e.description,preview:e.thumbnail?f.createElement("img",{src:decodeURIComponent(e.thumbnail)}):x,map:e}})),total:n}},C=function(e){var t=e.text,n=void 0===t?"*":t,r=e.options,o=void 0===r?{}:r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return w({category:"MAP",query:n,options:s({params:{start:10*i,limit:10}},o)}).map(P).catch((function(e){return m.Observable.of({error:e,items:[],total:0})}))},T={querySelector:".ms2-border-layout-body",pageSize:10},M=b(E((p=(c={loadPage:C,scrollSpyOptions:T,hasMore:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.total,n=e.items,r=void 0===n?[]:n;return t>r.length}}).loadPage,d=c.scrollSpyOptions,s(s({},i(c,["loadPage","scrollSpyOptions"])),{},{scrollSpyOptions:s({skip:1},d),loadPage:(u=p,function(e,t){return 0===t&&e&&!e.text?u(e,t).map((function(e){var t=e.items,n=e.total;return s(s({},i(e,["items","total"])),{},{total:n,items:[{id:"EMPTY_MAP",title:f.createElement(S,{msgId:"widgets.selectMap.emptyMap.title"}),description:f.createElement(S,{msgId:"widgets.selectMap.emptyMap.description"}),preview:x,map:{id:"new.json"}}].concat(r(t))})})):u(e,t)}),hasMore:function(e){var t=e.total,n=e.items;return n&&n.length>=1&&"EMPTY_MAP"===n[0].id?t>n.length+1:t>n.length}}))),g((function(e){var t=e.items;return{skip:t&&t[0]&&"EMPTY_MAP"===t[0].id?1:0}})));e.exports={withSearchTextState:j("searchText","setSearchText",""),withVirtualScroll:E({loadPage:C,scrollSpyOptions:T,hasMore:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.total,n=e.items,r=void 0===n?[]:n;return t>r.length}}),withEmptyMapVirtualScroll:M,searchOnTextChange:h((function(e){return e.merge(e.take(1).switchMap((function(t){var n=t.loadFirst,r=void 0===n?function(){}:n;return e.debounceTime(500).startWith({searchText:""}).distinctUntilKeyChanged("searchText",(function(e,t){return e===t})).do((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.searchText,n=e.options;return r({text:t,options:n})})).ignoreElements()})))}))}},"./MapStore2/web/client/components/maps/enhancers/mapCatalogWithEmptyMap.js":function(e,t,n){var r=n("./node_modules/recompose/es/Recompose.js").compose,o=n("./MapStore2/web/client/components/maps/enhancers/enhancers.js"),i=o.withSearchTextState,a=o.withEmptyMapVirtualScroll,s=o.searchOnTextChange;e.exports=r(i,a,s)},"./MapStore2/web/client/components/maps/modals/ConfirmModal.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=n("./node_modules/prop-types/index.js"),m=n("./node_modules/react/index.js"),y=n("./node_modules/react-bootstrap/es/index.js").Button,b=n("./MapStore2/web/client/components/misc/Modal.jsx"),g=n("./node_modules/react-spinkit/dist/index.js"),h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(p,e);var t,n,r,c=l(p);function p(){var e;i(this,p);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return d(u(e=c.call.apply(c,[this].concat(n))),"onConfirm",(function(){e.props.onConfirm()})),e}return t=p,(n=[{key:"render",value:function(){var e=this,t=m.createElement("span",{role:"footer"},m.createElement("div",{style:{float:"left"}}),m.createElement(y,{ref:"confirmButton",disabled:this.props.running,className:this.props.className,key:"confirmButton",bsStyle:"primary",bsSize:this.props.buttonSize,onClick:function(){e.onConfirm()}},this.props.running?m.createElement(g,{spinnerName:"circle",overrideSpinnerClassName:"spinner",noFadeIn:!0}):null,this.props.confirmText),this.props.includeCloseButton?m.createElement(y,{key:"cancelButton",ref:"cancelButton",bsSize:this.props.buttonSize,onClick:this.props.onClose},this.props.cancelText):m.createElement("span",null)),n=this.props.body;return m.createElement(b,o({},this.props.options,{show:this.props.show,onHide:this.props.onClose}),m.createElement(b.Header,{key:"dialogHeader",closeButton:!0},m.createElement(b.Title,null,this.props.titleText)),m.createElement(b.Body,null,n),m.createElement(b.Footer,null,t))}}])&&a(t.prototype,n),r&&a(t,r),p}(m.Component);d(h,"propTypes",{className:f.string,show:f.bool,options:f.object,onConfirm:f.func,onClose:f.func,closeGlyph:f.string,style:f.object,buttonSize:f.string,includeCloseButton:f.bool,body:f.oneOfType([f.string,f.element]),titleText:f.oneOfType([f.string,f.element]),confirmText:f.oneOfType([f.string,f.element]),cancelText:f.oneOfType([f.string,f.element]),running:f.bool}),d(h,"defaultProps",{onConfirm:function(){},onClose:function(){},options:{animation:!1},className:"",closeGlyph:"",style:{},includeCloseButton:!0,body:"",titleText:"Confirm Delete",confirmText:"Delete",cancelText:"Cancel"}),e.exports=h},"./MapStore2/web/client/components/misc/AdaptiveGrid.jsx":function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var o=n("./node_modules/react/index.js"),i=n("./MapStore2/web/client/components/data/grid/forceScrollTop.js")(n("./MapStore2/web/client/components/data/grid/DataGrid.jsx")),a=n("./node_modules/react-container-dimensions/lib/index.js").default;e.exports=function(e){return o.createElement(a,null,(function(t){var n=t.width,a=t.height;return o.createElement("div",{className:e.className},o.createElement(i,r({},e,{minHeight:a,minWidth:n,enableCellAutoFocus:!1})))}))}},"./MapStore2/web/client/components/misc/AutocompleteCombobox.jsx":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n("./node_modules/react/index.js"),s=n("./node_modules/lodash/lodash.js").isArray,l=n("./MapStore2/web/client/components/misc/combobox/PagedCombobox.jsx"),c=n("./node_modules/recompose/es/Recompose.js"),u=c.setObservableConfig,p=c.mapPropsStreamWithConfig,d=c.compose,f=c.withStateHandlers,m=n("./node_modules/recompose/rxjsObservableConfig.js").default;u(m);var y=p(m)((function(e){return e.take(1).switchMap((function(t){return t.autocompleteStreamFactory(e)})).combineLatest(e,(function(e,t){return{data:s(e&&e.fetchedData&&e.fetchedData.values)?e.fetchedData.values.map((function(e){return{label:e,value:e}})):[],valuesCount:e&&e.fetchedData&&e.fetchedData.size,currentPage:t&&t.currentPage,maxFeatures:t&&t.maxFeatures,select:t&&t.select,focus:t&&t.focus,loadNextPage:t&&t.loadNextPage,loadPrevPage:t&&t.loadPrevPage,toggle:t&&t.toggle,change:t.change,open:t.open,selected:t&&t.selected,value:t.value,busy:e.busy}}))}))((function(e){var t=e.open,n=e.toggle,r=e.select,o=e.focus,i=e.change,s=e.value,c=e.valuesCount,u=e.loadNextPage,p=e.loadPrevPage,d=e.maxFeatures,f=e.currentPage,m=e.busy,y=e.data,b=e.loading,g=void 0!==b&&b,h=Math.ceil(c/d);return a.createElement(l,{pagination:{firstPage:1===f,lastPage:f===h,paginated:!0,loadPrevPage:p,loadNextPage:u},busy:m,dropUp:!1,data:y,open:t,onFocus:o,onToggle:n,onChange:i,onSelect:r,selectedValue:s,loading:g})})),b=d(f((function(e){return{delayDebounce:0,performFetch:!1,open:!1,currentPage:1,maxFeatures:5,url:e.url,typeName:e.typeName,value:e.value,attribute:e.column&&e.column.key,autocompleteStreamFactory:e.autocompleteStreamFactory}}),{select:function(e){return function(){return o(o({},e),{},{selected:!0})}},change:function(e){return function(t){if(e.selected&&e.changingPage)return o(o({},e),{},{delayDebounce:e.selected?0:500,selected:!1,changingPage:!1,performFetch:!(e.selected&&!e.changingPage),value:e.value,currentPage:e.changingPage?e.currentPage:1});var n="string"==typeof t?t:t.value;return o(o({},e),{},{delayDebounce:e.selected?0:500,selected:!1,changingPage:!1,performFetch:!(e.selected&&!e.changingPage),value:n,currentPage:e.changingPage?e.currentPage:1})}},focus:function(e){return function(t){return t&&0===t.length&&""===e.value?o(o({},e),{},{delayDebounce:0,currentPage:1,performFetch:!0,isToggled:!1,open:!0}):e}},toggle:function(e){return function(){return o(o({},e),{},{open:!!e.changingPage||!e.open})}},loadNextPage:function(e){return function(){return o(o({},e),{},{currentPage:e.currentPage+1,performFetch:!0,changingPage:!0,delayDebounce:0,value:e.value})}},loadPrevPage:function(e){return function(){return o(o({},e),{},{currentPage:e.currentPage-1,performFetch:!0,changingPage:!0,delayDebounce:0,value:e.value})}}}))(y);e.exports={AutocompleteCombobox:b}},"./MapStore2/web/client/components/misc/AutocompleteWFSCombobox.jsx":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n("./node_modules/react/index.js"),s=n("./node_modules/lodash/lodash.js").isArray,l=n("./MapStore2/web/client/components/misc/combobox/PagedComboboxWithFeatures.jsx"),c=n("./MapStore2/web/client/utils/TemplateUtils.js").generateTemplateString,u=n("./node_modules/recompose/es/Recompose.js"),p=u.setObservableConfig,d=u.mapPropsStreamWithConfig,f=u.compose,m=u.withStateHandlers,y=u.withPropsOnChange,b=u.withHandlers,g=n("./node_modules/recompose/rxjsObservableConfig.js").default,h=n("./MapStore2/web/client/utils/FilterUtils.jsx").escapeCQLStrings;p(g);var v=d(g)((function(e){return e.take(1).switchMap((function(t){return t.autocompleteStreamFactory(e)})).combineLatest(e,(function(e,t){return o(o({},t),{},{data:s(e&&e.fetchedData&&e.fetchedData.values)?e.fetchedData.values:[],features:s(e&&e.fetchedData&&e.fetchedData.features)?e.fetchedData.features:[],valuesCount:e&&e.fetchedData&&e.fetchedData.size,srsName:e&&e.fetchedData&&e.fetchedData.crs,busy:e.busy})}))}))((function(e){var t=e.open,n=e.toggle,r=e.select,o=e.focus,i=e.change,s=e.changed,c=e.originalValue,u=e.value,p=e.valuesCount,d=e.onChangeDrawingStatus,f=e.loadNextPage,m=e.loadPrevPage,y=e.maxFeatures,b=e.currentPage,g=e.itemComponent,h=e.features,v=e.busy,S=e.data,w=e.loading,O=void 0!==w&&w,j=e.valueField,E=e.textField,x=e.filter,P=e.srsName,C=e.style,T=Math.ceil(p/y);return a.createElement(l,{pagination:{firstPage:1===b,lastPage:T<=b,paginated:!0,loadPrevPage:m,loadNextPage:f,currentPage:b},srsName:P,busy:v,dropUp:!1,data:S,open:t,onChangeDrawingStatus:d,valueField:j,textField:E,itemComponent:g,filter:x,onFocus:o,onToggle:n,onChange:i,onSelect:r,features:h,style:C,selectedValue:s?u:c||u,loading:O})})),S=f(y(["valueField"],(function(){return{value:void 0}})),m((function(e){return{delayDebounce:0,performFetch:!1,open:!1,currentPage:1,maxFeatures:5,changed:e.value,value:e.value,onChangeDrawingStatus:e.onChangeDrawingStatus,itemComponent:e.itemComponent}}),{select:function(){return function(e){return{selected:e}}},change:function(e){return function(t,n){return e.selected||e.open||e.onChangeDrawingStatus("clean","","queryform",[],{}),{delayDebounce:500,selected:!1,changingPage:!1,changed:!0,performFetch:!(e.selected&&!e.changingPage),value:e.selected&&e.changingPage&&e.value||("string"==typeof t?t:t[n]),currentPage:e.changingPage?e.currentPage:1}}},focus:function(e){return function(t){return t&&0===t.length&&""===e.value?{delayDebounce:0,currentPage:1,performFetch:!0,isToggled:!1,open:!0}:e}},toggle:function(e){return function(){return{open:!!e.changingPage||!e.open}}},loadNextPage:function(e){return function(){return{currentPage:e.currentPage+1,performFetch:!0,changingPage:!0,delayDebounce:0}}},loadPrevPage:function(e){return function(){return{currentPage:e.currentPage-1,performFetch:!0,changingPage:!0,delayDebounce:0}}}}),b({select:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=e.onChangeSpatialFilterValue,r=void 0===n?function(){}:n,o=e.select,i=void 0===o?function(){}:o;return function(e,n,o,a){n&&r({geometry:n.geometry,value:e,feature:n,srsName:o,style:a,options:t,collectGeometries:t&&t.crossLayer?{queryCollection:{typeName:t.crossLayer.typeName,geometryName:t.crossLayer.geometryName,cqlFilter:c(t.crossLayer.cqlTemplate||"",h)(n)}}:void 0}),i(!0)}}}))(v);e.exports={AutocompleteWFSCombobox:S}},"./MapStore2/web/client/components/misc/EmptyView.jsx":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n("./node_modules/react/index.js"),s=n("./MapStore2/web/client/components/misc/FitIcon.jsx");e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.style,n=void 0===t?{}:t,r=e.mainViewStyle,i=void 0===r?{}:r,l=e.contentStyle,c=void 0===l?{}:l,u=e.imageStyle,p=void 0===u?{}:u,d=e.glyph,f=void 0===d?"info-sign":d,m=e.iconFit,y=e.title,b=e.tooltip,g=e.tooltipId,h=e.description,v=e.content;return a.createElement("div",{className:"empty-state-container",style:o({height:m?"100%":void 0},n)},a.createElement("div",{key:"main-view",className:"empty-state-main-view",style:o({height:m?"100%":void 0},i)},f?a.createElement("div",{key:"glyph",className:"empty-state-image",style:o({height:m?"100%":void 0},p)},a.createElement(s,{iconFit:m,tooltip:b,tooltipId:g,glyph:f})):null,y?a.createElement("h1",{key:"title"},y):null,h?a.createElement("p",{key:"description",className:"empty-state-description"},h):null),a.createElement("div",{key:"content",className:"empty-state-content",style:c},v))}},"./MapStore2/web/client/components/misc/Filter.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=n("./node_modules/react/index.js"),f=n("./node_modules/prop-types/index.js"),m=n("./node_modules/react-bootstrap/es/index.js"),y=m.FormGroup,b=m.FormControl,g=m.Glyphicon,h=m.InputGroup,v=m.OverlayTrigger,S=m.Tooltip;n("./MapStore2/web/client/components/misc/style/filter.css");var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(u,e);var t,n,r,l=s(u);function u(){var e;o(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return p(c(e=l.call.apply(l,[this].concat(n))),"onFilter",(function(t){e.props.onFilter(t.target.value)})),p(c(e),"onClear",(function(){e.props.onFilter("")})),e}return t=u,(n=[{key:"render",value:function(){var e=this.props.filterText?d.createElement(v,{placement:"bottom",overlay:d.createElement(S,{id:"mapstore-toc-filter"},this.props.tooltipClear)},d.createElement(g,{glyph:"1-close",className:"text-primary close-filter",onClick:this.onClear})):d.createElement(g,{className:"text-primary",glyph:"filter"});return d.createElement(y,{className:"mapstore-filter"},d.createElement(h,null,d.createElement(b,{value:this.props.filterText,placeholder:this.props.filterPlaceholder,onChange:this.onFilter,onFocus:this.props.onFocus,type:"text"}),d.createElement(h.Addon,{className:"square-button-md"},this.props.loading?d.createElement("div",{className:"toc-inline-loader"}):e)))}}])&&i(t.prototype,n),r&&i(t,r),u}(d.Component);p(w,"propTypes",{loading:f.bool,filterText:f.string,filterPlaceholder:f.oneOfType([f.object,f.string]),onFilter:f.func,onFocus:f.func,tooltipClear:f.oneOfType([f.object,f.string])}),p(w,"defaultProps",{loading:!1,filterText:"",filterPlaceholder:"",onFilter:function(){},onFocus:function(){},tooltipClear:"Clear"}),e.exports=w},"./MapStore2/web/client/components/misc/FitIcon.jsx":function(e,t,n){var r=n("./node_modules/react/index.js"),o=n("./node_modules/react-bootstrap/es/index.js").Glyphicon,i=n("./node_modules/react-container-dimensions/lib/index.js").default,a=n("./MapStore2/web/client/components/misc/enhancers/tooltip.jsx")(o);e.exports=function(e){var t=e.glyph,n=void 0===t?"info-sign":t,o=e.tooltip,s=e.tooltipId,l=e.iconFit,c=e.padding,u=void 0===c?0:c,p=e.margin,d=void 0===p?0:p;return r.createElement(i,null,(function(e){var t=e.width,i=e.height;return r.createElement(a,{glyph:n,tooltip:o,tooltipId:s,style:{display:"inline-block",padding:u+"px",margin:d+"px",textAlign:"center",fontSize:l?Math.min(t,i)-2*u-2*d:t-2*u-2*d}})}))}},"./MapStore2/web/client/components/misc/Modal.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u=n("./MapStore2/web/client/components/misc/WithContainer.jsx"),p=n("./node_modules/react-bootstrap/es/index.js").Modal,d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(c,e);var t,n,r,l=s(c);function c(){return o(this,c),l.apply(this,arguments)}return t=c,(n=[{key:"handleDialogClick",value:function(e){e.target===e.currentTarget&&this.props.onHide(e)}}])&&i(t.prototype,n),r&&i(t,r),c}(p),f=n("./node_modules/object-assign/index.js");e.exports=f(u(d),{Body:p.Body,Dialog:p.Dialog,Footer:p.Footer,Header:p.Header,Title:p.Title})},"./MapStore2/web/client/components/misc/Slider.jsx":function(e,t,n){var r=n("./node_modules/lodash/lodash.js").isEqual,o=n("./node_modules/recompose/es/Recompose.js").shouldUpdate;e.exports=o((function(e,t){return!r(e.start,t.start)||e.disabled!==t.disabled}))(n("./node_modules/react-nouislider/dist/react-nouislider.common.js"))},"./MapStore2/web/client/components/misc/StandardDialog.jsx":function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=n("./node_modules/react/index.js"),c=n("./MapStore2/web/client/components/misc/Dialog.jsx"),u=n("./node_modules/react-bootstrap/es/index.js").Glyphicon;e.exports=function(e){var t=e.show,n=e.style,o=void 0===n?{}:n,a=e.modal,p=e.draggable,d=void 0!==p&&p,f=e.closeGlyph,m=void 0===f?"1-close":f,y=e.closable,b=void 0===y||y,g=e.onClose,h=void 0===g?function(){}:g,v=e.title,S=e.header,w=e.footer,O=e.children,j=s(e,["show","style","modal","draggable","closeGlyph","closable","onClose","title","header","footer","children"]);return t?l.createElement(c,r({modal:a,onClickOut:b&&a?function(){return h()}:null,style:i(i({},o),{},{display:t?"block":"none"}),draggable:d},j),l.createElement("span",{role:"header"},v||(S||l.createElement("span",null,"")),b?l.createElement("button",{onClick:function(){return h()},className:"settings-panel-close close"},l.createElement(u,{glyph:m})):null),l.createElement("span",{role:"body"},O),w?l.createElement("span",{role:"footer"},w):null):null}},"./MapStore2/web/client/components/misc/StringSelector.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=n("./node_modules/react/index.js"),f=n("./node_modules/lodash/lodash.js").find,m=n("./node_modules/prop-types/index.js"),y=n("./node_modules/react-bootstrap/es/index.js").Glyphicon,b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(u,e);var t,n,r,l=s(u);function u(){var e;o(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return p(c(e=l.call.apply(l,[this].concat(n))),"state",{open:!1}),p(c(e),"getSelected",(function(){return f(e.props.options,e.getFindFunciton())})),p(c(e),"getValue",(function(t){return e.props.valueField&&t&&t[e.props.valueField]?t[e.props.valueField]:t})),p(c(e),"getLabel",(function(t){return e.props.labelField&&t&&t[e.props.labelField]?t[e.props.labelField]:e.getValue(t)})),p(c(e),"getFindFunciton",(function(){return e.props.valueField?p({},e.props.valueField,e.props.value):e.props.value})),p(c(e),"renderLabel",(function(t){return e.props.labelRenderer?e.props.labelRenderer(t):e.getLabel(t)})),p(c(e),"handleOutsideClick",(function(t){e.node&&e.node.contains&&!e.node.contains(t.target)&&e.state.open?e.handleClick():document&&!e.node&&e.handleOutsideClick&&document.removeEventListener("click",e.handleOutsideClick,!1)})),p(c(e),"handleClick",(function(){document&&!e.state.open?document.addEventListener("click",e.handleOutsideClick,!1):document.removeEventListener("click",e.handleOutsideClick,!1);var t=!e.state.open;e.setState({open:t})})),e}return t=u,(n=[{key:"render",value:function(){var e=this;return d.createElement("span",{ref:function(t){e.node=t},className:"mapstore-string-select"},d.createElement("span",{onClick:this.handleClick},d.createElement("strong",null,this.renderLabel(this.getSelected())),d.createElement(y,{glyph:"chevron-down"})),this.state.open&&d.createElement("div",{className:"m-options"},d.createElement("ul",null,this.props.options.map((function(t,n){return d.createElement("li",{key:n,onClick:function(){e.setState({open:!1}),e.props.onSelect(e.getValue(t),t)}},e.renderLabel(t))})))))}}])&&i(t.prototype,n),r&&i(t,r),u}(d.Component);p(b,"propTypes",{options:m.array,value:m.any,onSelect:m.func,valueField:m.string,labelField:m.string,labelRenderer:m.any}),p(b,"defaultProps",{onSelect:function(){},options:[]}),e.exports=b},"./MapStore2/web/client/components/misc/cardgrids/SideCard.jsx":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=n("./node_modules/react/index.js"),l=n("./node_modules/lodash/lodash.js").isObject,c=n("./MapStore2/web/client/components/misc/Loader.jsx");e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.body,n=e.caption,r=e.infoExtra,i=e.className,u=void 0===i?"":i,p=e.description,d=e.fullText,f=e.onClick,m=void 0===f?function(){}:f,y=e.onMouseEnter,b=void 0===y?function(){}:y,g=e.onMouseLeave,h=void 0===g?function(){}:g,v=e.preview,S=e.selected,w=e.size,O=e.style,j=void 0===O?{}:O,E=e.stylePreview,x=void 0===E?{}:E,P=e.styleTools,C=void 0===P?{}:P,T=e.title,M=e.loading,_=e.dragSymbol,A=void 0===_?"+":_,R=e.tools,I=a(e,["body","caption","infoExtra","className","description","fullText","onClick","onMouseEnter","onMouseLeave","preview","selected","size","style","stylePreview","styleTools","title","loading","dragSymbol","tools"]);return s.createElement("div",{className:"mapstore-side-card".concat(S?" selected":"").concat(w?" ms-"+w:"").concat(u?" ".concat(u):"").concat(d?" full-text":""),onClick:function(e){return m(o({title:T,preview:v,description:p,caption:n,tools:R},I),e)},onMouseEnter:b,onMouseLeave:h,style:j},s.createElement("div",{className:"ms-head"},I.isDraggable&&I.connectDragSource&&I.connectDragSource(s.createElement("div",{className:"mapstore-side-card-tool text-center"},s.createElement("div",{style:{width:10,overflow:"hidden"}},A))),v&&s.createElement("div",{className:"mapstore-side-preview",style:x},v),s.createElement("div",{className:"mapstore-side-card-container"},s.createElement("div",{className:"mapstore-side-card-inner"},s.createElement("div",{className:"mapstore-side-card-left-container"},s.createElement("div",{className:"mapstore-side-card-info"},T&&s.createElement("div",{className:"mapstore-side-card-title"},s.createElement("span",null,T)),p&&s.createElement("div",{className:"mapstore-side-card-desc"},l(p)?p:s.createElement("span",null,p)),n&&s.createElement("div",{className:"mapstore-side-card-caption"},s.createElement("span",null,n))),r),s.createElement("div",{className:"mapstore-side-card-right-container"},s.createElement("div",{className:"mapstore-side-card-tool text-center",style:C},R),"sm"!==w&&s.createElement("div",{className:"mapstore-side-card-loading"},s.createElement(c,{className:"mapstore-side-card-loader",size:12,hidden:!M})))))),t&&s.createElement("div",{className:"ms-body"},t))}},"./MapStore2/web/client/components/misc/cardgrids/SideGrid.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=n("./node_modules/react/index.js"),f=n("./MapStore2/web/client/components/misc/cardgrids/SideCard.jsx"),m=n("./node_modules/prop-types/index.js"),y=n("./node_modules/react-bootstrap/es/index.js"),b=y.Row,g=y.Col,h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(u,e);var t,n,r,c=l(u);function u(){return i(this,u),c.apply(this,arguments)}return t=u,(n=[{key:"render",value:function(){var e=this.props,t=e.cardComponent,n=e.items,r=e.colProps,i=e.onItemClick,a=e.size,s=t||f;return d.createElement("div",{className:"msSideGrid"+(this.props.className?" "+this.props.className:"")},d.createElement(b,{className:"items-list"},n.map((function(e,t){return d.createElement(g,o({key:e.id||t},r),d.createElement(s,o({onClick:function(){return i(e)},size:a},e)))}))))}}])&&a(t.prototype,n),r&&a(t,r),u}(d.Component);p(h,"propTypes",{size:m.string,onItemClick:m.func,colProps:m.object,items:m.array,cardComponent:m.oneOfType([m.string,m.func]),className:m.string}),p(h,"defaultProps",{size:"",onItemClick:function(){},colProps:{xs:12},className:"",items:[]}),e.exports=h},"./MapStore2/web/client/components/misc/cardgrids/SquareCard.jsx":function(e,t,n){var r=n("./node_modules/react/index.js");e.exports=function(e){var t=e.disabled,n=e.selected,o=e.title,i=e.preview,a=e.previewSrc,s=e.onClick,l=void 0===s?function(){}:s;return r.createElement("div",{className:"ms-square-card".concat(n?" ms-selected":"").concat(t?" ms-disabled":""),onClick:t?null:function(){return l()}},(i||a)&&r.createElement("div",{className:"ms-preview"},i||a&&r.createElement("img",{src:a})),r.createElement("small",null,o))}},"./MapStore2/web/client/components/misc/combobox/ControlledCombobox.jsx":function(e,t,n){var r=n("./node_modules/react/index.js"),o=n("./MapStore2/web/client/components/misc/combobox/PagedCombobox.jsx"),i=n("./MapStore2/web/client/components/misc/combobox/addState.js")((function(e){var t=e.toggle,n=e.select,i=e.focus,a=e.change,s=e.value,l=e.busy,c=e.data,u=e.loading,p=void 0!==u&&u,d=e.filter,f=e.open;return r.createElement(o,{pagination:{paginated:!1},onFocus:i,onToggle:t,onChange:a,onSelect:n,selectedValue:s,dropUp:!1,busy:l,data:c,open:f,loading:p,filter:d})}));e.exports=i},"./MapStore2/web/client/components/misc/combobox/PagedCombobox.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=n("./node_modules/prop-types/index.js"),m=n("./node_modules/react/index.js"),y=n("./node_modules/react-widgets/lib/index.js").Combobox,b=n("./node_modules/react-bootstrap/es/index.js"),g=b.Glyphicon,h=b.Tooltip,v=n("./MapStore2/web/client/utils/LocaleUtils.js"),S=n("./MapStore2/web/client/components/misc/OverlayTrigger.jsx"),w=n("./MapStore2/web/client/components/data/query/AutocompleteListItem.jsx"),O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(p,e);var t,n,r,c=l(p);function p(){var e;i(this,p);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return d(u(e=c.call.apply(c,[this].concat(n))),"renderWithTooltip",(function(t){if(e.props.tooltip.customizedTooltip){var n=e.props.tooltip.customizedTooltip;return m.createElement(n,null,t)}var r=m.createElement(h,{id:e.props.tooltip.id},e.props.tooltip.message);return m.createElement(S,{key:e.props.tooltip.overlayTriggerKey,placement:e.props.tooltip.placement,overlay:r},t)})),d(u(e),"renderPagination",(function(){var t=e.props.pagination.firstPage,n=e.props.pagination.lastPage;return m.createElement("div",{className:"autocomplete-toolbar"},!t&&m.createElement(g,{className:e.props.prevPageIcon,glyph:e.props.prevPageIcon,onClick:function(t){e.props.stopPropagation&&t.stopPropagation(),e.props.pagination.loadPrevPage()}}),!n&&m.createElement(g,{className:e.props.nextPageIcon,glyph:e.props.nextPageIcon,onClick:function(t){e.props.stopPropagation&&t.stopPropagation(),e.props.pagination.loadNextPage()}}))})),d(u(e),"renderField",(function(){var t,n={emptyList:v.getMessageById(e.context.messages,"queryform.attributefilter.autocomplete.emptyList"),open:v.getMessageById(e.context.messages,"queryform.attributefilter.autocomplete.open"),emptyFilter:v.getMessageById(e.context.messages,"queryform.attributefilter.autocomplete.emptyFilter")},r=[];(e.props.data&&e.props.data.length>0&&(r=e.props.data.map((function(e){return e}))),e.props.pagination&&e.props.pagination.paginated&&r.length>0)&&r.push((d(t={},e.props.textField,""),d(t,e.props.valueField,""),d(t,"disabled",!0),d(t,"pagination",e.renderPagination()),t));var i=e.props.loading?[]:r,a=e.props.itemComponent,s=m.createElement(y,{placeholder:e.props.placeholder,dropUp:e.props.dropUp,busy:e.props.busy,data:i,disabled:e.props.disabled,itemComponent:function(t){return m.createElement(a,o({textField:e.props.textField,valueField:e.props.valueField},t))},messages:e.props.messages||n,open:e.props.open,filter:e.props.filter,onChange:function(t){return e.props.onChange(t)},onFocus:function(){return e.props.onFocus(e.props.data)},onSelect:function(t){return e.props.onSelect(t)},onToggle:function(t){return e.props.onToggle(t)},textField:e.props.textField,valueField:e.props.valueField,value:e.props.selectedValue});return e.props.tooltip&&e.props.tooltip.enabled?e.renderWithTooltip(s):s})),e}return t=p,(n=[{key:"render",value:function(){var e=this.props,t=e.selectedValue,n=e.disabled,r=e.onReset,o=e.label,i=e.clearable,a=o?m.createElement("label",null,o):m.createElement("span",null);return m.createElement("div",{className:"autocompleteField"},a,i?m.createElement("div",{className:"rw-combo-clearable ".concat(n?"disabled":"")},this.renderField(),m.createElement("span",{className:"rw-combo-clear ".concat(t?"":"hidden"),onClick:r},"x")):this.renderField())}}])&&a(t.prototype,n),r&&a(t,r),p}(m.Component);d(O,"propTypes",{busy:f.bool,data:f.array,disabled:f.bool,dropUp:f.bool,itemComponent:f.oneOfType([f.object,f.func]),label:f.string,loading:f.bool,filter:f.oneOfType([f.string,f.bool]),messages:f.object,onChange:f.func,onFocus:f.func,onSelect:f.func,onToggle:f.func,open:f.bool,pagination:f.object,nextPageIcon:f.string,prevPageIcon:f.string,selectedValue:f.string,textField:f.string,tooltip:f.object,valueField:f.string,placeholder:f.string,stopPropagation:f.bool,clearable:f.bool,onReset:f.func}),d(O,"contextTypes",{messages:f.object}),d(O,"defaultProps",{stopPropagation:!1,dropUp:!1,itemComponent:w,loading:!1,label:null,filter:"",pagination:{paginated:!0,firstPage:!1,lastPage:!1,loadPrevPage:function(){},loadNextPage:function(){}},nextPageIcon:"chevron-right",prevPageIcon:"chevron-left",onFocus:function(){},onToggle:function(){},onChange:function(){},onSelect:function(){},onReset:function(){},textField:"label",tooltip:{customizedTooltip:void 0,enabled:!1,id:"",message:void 0,overlayTriggerKey:"",placement:"top"},valueField:"value",clearable:!1}),e.exports=O},"./MapStore2/web/client/components/misc/combobox/PagedComboboxWithFeatures.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=n("./node_modules/prop-types/index.js"),m=n("./node_modules/react/index.js"),y=n("./node_modules/lodash/lodash.js").head,b=n("./node_modules/react-widgets/lib/index.js").Combobox,g=n("./node_modules/react-bootstrap/es/index.js"),h=g.Glyphicon,v=g.Tooltip,S=n("./MapStore2/web/client/utils/LocaleUtils.js"),w=n("./MapStore2/web/client/components/misc/OverlayTrigger.jsx"),O=n("./MapStore2/web/client/components/data/query/AutocompleteListItem.jsx"),j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(p,e);var t,n,r,c=l(p);function p(){var e;i(this,p);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return d(u(e=c.call.apply(c,[this].concat(n))),"state",{}),d(u(e),"renderWithTooltip",(function(t){if(e.props.tooltip.customizedTooltip){var n=e.props.tooltip.customizedTooltip;return m.createElement(n,null,t)}var r=m.createElement(v,{id:e.props.tooltip.id},"this.props.tooltip.message");return m.createElement(w,{key:e.props.tooltip.overlayTriggerKey,placement:e.props.tooltip.placement,overlay:r},t)})),d(u(e),"renderPagination",(function(){var t=e.props.pagination.firstPage,n=e.props.pagination.lastPage;return m.createElement("div",{className:"autocomplete-toolbar"},!t&&m.createElement(h,{className:e.props.prevPageIcon,glyph:e.props.prevPageIcon,onClick:function(){return e.props.pagination.loadPrevPage()}}),!n&&m.createElement(h,{className:e.props.nextPageIcon,glyph:e.props.nextPageIcon,onClick:function(){return e.props.pagination.loadNextPage()}}))})),d(u(e),"renderField",(function(){var t,n={emptyList:function(){return e.props.busy?"Loading...":S.getMessageById(e.context.messages,"queryform.attributefilter.autocomplete.emptyList")},open:S.getMessageById(e.context.messages,"queryform.attributefilter.autocomplete.open"),emptyFilter:S.getMessageById(e.context.messages,"queryform.attributefilter.autocomplete.emptyFilter")},r=[];(e.props.data&&e.props.data.length>0&&(r=e.props.data.map((function(e){return e}))),e.props.pagination&&e.props.pagination.paginated&&r.length>0)&&r.push((d(t={},e.props.textField,""),d(t,e.props.valueField,""),d(t,"disabled",!0),d(t,"pagination",e.renderPagination()),t));var i=!1,a=e.props.loading?[]:r,s=e.props.itemComponent,l=m.createElement(b,{dropUp:e.props.dropUp,busy:e.props.busy,data:a,disabled:e.props.disabled,itemComponent:function(t){return m.createElement(s,o({textField:e.props.textField,valueField:e.props.valueField},t))},messages:e.props.messages||n,open:e.props.open,filter:!1,onChange:function(t){e.props.onChange(t,e.props.valueField),i=!0},onFocus:function(){return e.props.onFocus(e.props.data)},onSelect:function(t){var n=y(e.props.features.filter((function(n){return n.properties[e.props.valueField].toLowerCase()===t[e.props.valueField].toLowerCase()})));e.props.onSelect(t,n,e.props.srsName,e.props.style)},onToggle:function(t){var n=y(e.props.features.filter((function(t){return t.properties[e.props.valueField].toLowerCase()===e.props.selectedValue.toLowerCase()})));!t||e.props.selectedValue||e.props.selectedValue||i||e.props.onChange("",e.props.valueField),e.props.onToggle(t,n,e.props.pagination.currentPage),n&&!t&&e.props.onSelect(e.props.selectedValue,n,e.props.srsName,e.props.style),i=!1},textField:e.props.textField,valueField:e.props.valueField,value:e.props.selectedValue});return e.props.tooltip&&e.props.tooltip.enabled?e.renderWithTooltip(l):l})),e}return t=p,(n=[{key:"render",value:function(){var e=this.props.label?m.createElement("label",null,this.props.label):m.createElement("span",null);return m.createElement("div",{className:"autocompleteField"},e,this.renderField())}}])&&a(t.prototype,n),r&&a(t,r),p}(m.Component);d(j,"propTypes",{busy:f.bool,data:f.array,disabled:f.bool,dropUp:f.bool,features:f.array,filter:f.string,itemComponent:f.oneOfType([f.object,f.func]),label:f.string,loading:f.bool,messages:f.object,onChange:f.func,onFocus:f.func,onSelect:f.func,onToggle:f.func,onChangeDrawingStatus:f.func,style:f.style,open:f.bool,pagination:f.object,nextPageIcon:f.string,prevPageIcon:f.string,selectedValue:f.string,srsName:f.string,textField:f.string,tooltip:f.object,valueField:f.string}),d(j,"contextTypes",{messages:f.object}),d(j,"defaultProps",{dropUp:!1,features:[],filter:"",itemComponent:O,loading:!1,label:null,pagination:{paginated:!0,firstPage:!1,lastPage:!1,loadPrevPage:function(){},loadNextPage:function(){}},nextPageIcon:"chevron-right",prevPageIcon:"chevron-left",onFocus:function(){},onToggle:function(){},onChange:function(){},onChangeDrawingStatus:function(){},onSelect:function(){},srsName:"EPSG:4326",textField:"label",tooltip:{customizedTooltip:void 0,enabled:!1,id:"",message:void 0,overlayTriggerKey:"",placement:"top"},valueField:"value"}),e.exports=j},"./MapStore2/web/client/components/misc/combobox/addState.js":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n("./node_modules/recompose/es/Recompose.js"),s=(0,a.compose)((0,a.withStateHandlers)((function(e){return{open:!1,currentPage:1,value:e.value,data:e.data,textValue:e.textValue,textLabel:e.textLabel}}),{select:function(e){return function(){return o(o({},e),{},{selected:!0})}},change:function(e){return function(t){if(e.selected&&e.changingPage)return o(o({},e),{},{selected:!1,changingPage:!1,value:e.value,currentPage:e.changingPage?e.currentPage:1});var n="string"==typeof t?t:t.value;return o(o({},e),{},{selected:!1,changingPage:!1,value:n,currentPage:e.changingPage?e.currentPage:1})}},focus:function(e){return function(t){return t&&0===t.length&&""===e.value?o(o({},e),{},{currentPage:1,isToggled:!1,open:!0}):e}},toggle:function(e){return function(){return o(o({},e),{},{open:!!e.changingPage||!e.open})}}}));e.exports=s},"./MapStore2/web/client/components/misc/enhancers/draggableContainer.jsx":function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=n("./node_modules/react/index.js"),c=n("./node_modules/recompose/es/Recompose.js"),u=c.compose,p=c.branch;e.exports=u(p((function(e){var t=e.isDraggable;return void 0===t||t}),(function(e){return function(t){var n=t.onSort,o=t.isDraggable,a=t.items,c=void 0===a?[]:a,u=t.containerId,p=s(t,["onSort","isDraggable","items","containerId"]),d=c.map((function(e,t){return i(i({},e),{},{onSort:n,isDraggable:o,sortId:t,key:e.id||t,containerId:u})}));return l.createElement(e,r({},i(i({},p),{},{isDraggable:o}),{items:d}))}})))},"./MapStore2/web/client/components/misc/enhancers/emptyState.jsx":function(e,t,n){var r=n("./node_modules/react/index.js"),o=n("./node_modules/lodash/lodash.js").isFunction,i=n("./node_modules/recompose/es/Recompose.js").branch,a=n("./MapStore2/web/client/components/misc/EmptyView.jsx");e.exports=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a;return i(e,(function(){return function(e){return r.createElement(n,t&&o(t)?t(e):t)}}))}},"./MapStore2/web/client/components/misc/enhancers/infiniteScroll/loadMore.js":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function u(e){var t=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===r(t)?t:String(t)}var p=n("./node_modules/recompose/es/Recompose.js"),d=p.mapPropsStream,f=p.createEventHandler,m=n("./node_modules/rxjs/Rx.js"),y=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=r.dataProp,a=void 0===i?"items":i,p=r.initialStreamDebounce,d=void 0===p?0:p,f=r.throttleTime,y=void 0===f?500:f;return e.take(1).concat(e.debounceTime(d)).switchMap((function(e){return n(e,0).startWith({loading:!0}).concat(m.Observable.of({loading:!1})).concat(t.throttleTime(y).distinct().exhaustMap((function(t){return n(e,t).startWith({loading:!0}).concat(m.Observable.of({loading:!1}))}))).scan((function(e,t){var n=e[a],r=c(e,[a].map(u)),i=t[a],p=c(t,[a].map(u));return s(s(l({},a,i?[].concat(o(n||[]),o(i)):n||[]),r),p)})).map((function(e){return s({},e)}))})).catch((function(e){return m.Observable.of({loading:!1,error:e})}))};e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return m.Observable.empty()},t=arguments.length>1?arguments[1]:void 0;return d((function(n){var r=f(),o=r.handler,i=r.stream,a=f(),l=a.handler,c=a.stream;return n.combineLatest(y(c,i,e,t).startWith({}),(function(e,t){return s(s(s({},e),t),{},{onLoadMore:o,loadFirst:l})}))}))}},"./MapStore2/web/client/components/misc/enhancers/infiniteScroll/withInfiniteScroll.js":function(e,t,n){var r=n("./MapStore2/web/client/components/misc/enhancers/infiniteScroll/loadMore.js"),o=n("./node_modules/recompose/es/Recompose.js"),i=o.compose,a=o.defaultProps,s=n("./MapStore2/web/client/components/misc/enhancers/infiniteScroll/withScrollSpy.js");e.exports=function(e){var t=e.loadPage,n=e.scrollSpyOptions,o=e.loadStreamOptions,l=e.loadMoreStreamOptions,c=e.hasMore,u=e.isScrolled;return i(r(t,l),a({hasMore:c,isScrolled:u}),s(n,o))}},"./MapStore2/web/client/components/misc/enhancers/infiniteScroll/withScrollSpy.js":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=n("./node_modules/react/index.js"),y=n("./node_modules/prop-types/index.js"),b=n("./node_modules/react-dom/index.js");n("./node_modules/rxjs/Rx.js"),e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dataProp,n=void 0===t?"items":t,r=e.querySelector,i=e.closest,l=void 0!==i&&i,u=e.loadingProp,d=void 0===u?"loading":u,g=e.skip,h=void 0===g?0:g,v=e.pageSize,S=void 0===v?10:v,w=e.offsetSize,O=void 0===w?200:w;return function(e){var t,i;return i=t=function(t){s(u,t);var i=c(u);function u(){var e;o(this,u);for(var t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];return f(p(e=i.call.apply(i,[this].concat(a))),"findScrollDomNode",(function(){if(!e.isMounded)return null;var t=b.findDOMNode(p(e));return t&&l&&r?t.closest(r||"*"):t&&(r?t.querySelector(r):t)})),f(p(e),"onScroll",(function(){var t=e.findScrollDomNode();t&&e.props.isScrolled({div:t,offset:O})&&(!n||e.props[n]&&e.props[n].length)&&(!d||!e.props[d])&&e.props.hasMore(e.props)&&e.props.onLoadMore(n?Math.ceil((e.props[n].length-h)/S):null)})),e}return a(u,[{key:"componentDidMount",value:function(){this.isMounded=!0;var e=this.findScrollDomNode();e&&(this.listenerAdded=!0,e.addEventListener("scroll",this.onScroll,!1),this.onScroll())}},{key:"componentDidUpdate",value:function(e){var t=this,r=this.findScrollDomNode();r&&!this.listenerAdded&&(r.addEventListener("scroll",this.onScroll,!1),this.listenerAdded=!0),!r||n&&this.props[n]&&this.props[n]===e[n]||setTimeout((function(){return t.onScroll()}),300)}},{key:"componentWillUnmount",value:function(){this.isMounded=!1,this.listenerAdded=!1;var e=this.findScrollDomNode();e&&e.removeEventListener("scroll",this.onScroll,!1)}},{key:"render",value:function(){return m.createElement(e,this.props)}}]),u}(m.Component),f(t,"propTypes",{hasMore:y.func,onLoadMore:y.func,isScrolled:y.func}),f(t,"defaultProps",{onLoadMore:function(){},hasMore:function(){return!0},isScrolled:function(e){var t=e.div,n=e.offset;return t.scrollTop+t.clientHeight>=t.scrollHeight-n}}),i}}},"./MapStore2/web/client/components/misc/enhancers/localizeStringMap.js":function(e,t,n){function r(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=n("./node_modules/prop-types/index.js"),l=n("./node_modules/lodash/lodash.js").castArray,c=n("./node_modules/recompose/es/Recompose.js"),u=c.getContext,p=c.mapProps,d=c.compose,f=n("./MapStore2/web/client/utils/LocaleUtils.js").getLocalizedProp;e.exports=function(e){return d(u({locale:s.string}),p((function(t){var n=t.locale,o=r(t,["locale"]);return i(i({},o),l(e).reduce(function(e,t){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;return i(i({},n),{},a({},r,e[r]&&f(t,e[r])))}}(o,n),{}))})))}},"./MapStore2/web/client/components/misc/enhancers/localizedProps.js":function(e,t,n){function r(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=n("./MapStore2/web/client/utils/LocaleUtils.js").getMessageById,l=n("./node_modules/prop-types/index.js"),c=n("./node_modules/lodash/lodash.js"),u=c.castArray,p=c.isArray,d=c.isNil,f=c.isString,m=n("./node_modules/recompose/es/Recompose.js"),y=m.getContext,b=m.mapProps,g=m.compose,h=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"label";if(p(t))return t.map((function(r){var o=s(e,r[n]||f(r)&&r||"");return i(i({},r),{},a({},n,d(o)?t:o))}));var r=s(e,t);return d(r)?t:r},v=function(e,t,n){return function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;return i(i({},r),{},a({},o,e[o]&&h(t,e[o],n)))}};e.exports=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"label";return g(y({messages:l.object}),b((function(n){var o=n.messages,a=r(n,["messages"]);return i(i({},a),u(e).reduce(v(a,o,t),{}))})))}},"./MapStore2/web/client/components/misc/enhancers/propsStreamFactory.jsx":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n("./node_modules/recompose/es/Recompose.js"),s=a.compose,l=a.mapPropsStreamWithConfig,c=a.defaultProps,u=n("./node_modules/recompose/rxjsObservableConfig.js").default,p=n("./node_modules/rxjs/Rx.js"),d=l(u);e.exports=s(c({dataStreamFactory:function(){return p.Observable.of({})}}),d((function(e){return e.take(1).switchMap((function(t){return t.dataStreamFactory(e.startWith(t),t)})).combineLatest(e,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o(o({},t),e)}))})))},"./MapStore2/web/client/components/misc/enhancers/security/accessRuleParser.jsx":function(e,t,n){function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=n("./node_modules/recompose/es/Recompose.js").withPropsOnChange,i=n("./node_modules/lodash/lodash.js"),a=i.get,s=i.castArray,l=i.mapValues,c=i.isString,u=i.isArray,p=function e(t){var n=t.accessInfo,r=t.postProcessValue,o=t.reduceFun;return function(t){var i=s(t),l=o;return i.length>1&&"__OR__"===i[0]&&(l=function(e,t){return e||t},i=i.slice(1)),i.map((function(t){var i=t;if(u(i))return e({accessInfo:n,postProcessValue:r,reduceFun:o})(i);var s=!1;i&&c(i)&&i.startsWith("!")&&(s=!0,i=i.substr(1));var l=function(e){return s?!e:e},p=c(i)&&i.split(":");if(p&&p[0]){var d=p[0].split(/\!\=\=?/),f=p[0].split(/\=\=?\=?/);return d.length>1?l(r(a(n,d[0]),i)!==d[1]):f.length>1?l(r(a(n,f[0]),i)===f[1]):l(r(a(n,p[0]),i))}return i})).reduce(l||function(e,t){return e&&t})}};e.exports=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.asObject,i=void 0!==n&&n,a=t.postProcessValue,s=void 0===a?function(e){return e}:a,c=t.reduceFun,u=t.accessInfo,d=void 0===u?"accessInfo":u;return o([e,d],(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r({},e,i?l(t[e],p({accessInfo:t[d],postProcessValue:s,reduceFun:c})):p({accessInfo:t[d],postProcessValue:s,reduceFun:c})(t[e]))}))}},"./MapStore2/web/client/components/misc/enhancers/utcDateWrapper.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/recompose/es/Recompose.js"),o=n("./node_modules/lodash/lodash.js"),i=n("./node_modules/moment/moment.js"),a=n.n(i),s=n("./MapStore2/web/client/utils/TimeUtils.js");function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dateTypeProp,n=void 0===t?"type":t,i=e.dateProp,c=void 0===i?"date":i,u=e.setDateProp,p=void 0===u?"onSetDate":u;return Object(r.compose)(Object(r.withPropsOnChange)([c],(function(e){var t,r=e[c],i=e[n],u=e.useUTCOffset,p=void 0===u||u,d=r,f="1970-01-01",m="00:00:00";!Object(o.isDate)(r)&&Object(o.isString)(r)&&("time"===i&&(d=new Date("".concat(f,"T").concat(r))),"date"===i&&(-1!==r.indexOf("Z")&&(d=r.substr(0,r.length-1)),d=new Date("".concat(d,"T").concat(m,"Z"))),"date-time"===i&&(d=new Date(r)));var y=d;if(d){switch(i){case"time":m=Object(s.getUTCTimePart)(d);break;case"date":f=Object(s.getUTCDatePart)(d);break;default:m=Object(s.getUTCTimePart)(d),f=Object(s.getUTCDatePart)(d)}(y=new Date("".concat(f,"T").concat(m,"Z"))).setUTCMilliseconds(d.getUTCMilliseconds());var b=p?Object(s.getTimezoneOffsetMillis)(y):0;y=new Date(y.getTime()+b)}return l(t={},c,y),l(t,"defaultCurrentDate","date-time"===i?a()().startOf("day").toDate():void 0),t})),Object(r.withHandlers)(l({},p,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e[p],r=e[n],o=e.useUTCOffset,i=void 0===o||o;return function(e,n){if(e){var o=new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds())),a=i?Object(s.getTimezoneOffsetMillis)(e):0,l=new Date(o.getTime()-a);switch(r){case"time":l="".concat(Object(s.getUTCTimePart)(l),"Z");break;case"date":l="".concat(Object(s.getUTCDatePart)(l),"Z")}t(l,n)}else t(null)}}))))}},"./MapStore2/web/client/components/misc/enhancers/withControllableState.js":function(e,t,n){var r=n("./node_modules/recompose/es/Recompose.js"),o=r.branch,i=r.withState;e.exports=function(e,t,n){return o((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return!e[t]}),i(e,t,n))}},"./MapStore2/web/client/components/misc/panels/Accordion.jsx":function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var o=n("./node_modules/react/index.js"),i=n("./node_modules/react-bootstrap/es/index.js"),a=i.Panel,s=i.Accordion,l=n("./MapStore2/web/client/components/misc/cardgrids/SideCard.jsx");e.exports=function(e){var t=e.activePanel,n=e.fillContainer,i=e.className,c=e.onSelect,u=e.panels,p=void 0===u?[]:u,d=n?"ms-fill-container ":"";return o.createElement(s,{activeKey:t,className:"ms-accordion "+d+i},p.map((function(e,n){return o.createElement(a,{key:n,eventKey:e.id,className:t===e.id?"ms-selected":"",header:e.head&&o.createElement("a",{role:"tab"},o.createElement(l,r({},e.head,{selected:t===e.id,onClick:function(){c(e.id)}})))||null,collapsible:!0},e.body)})))}},"./MapStore2/web/client/components/misc/quillmodules/ResizeModule.js":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?d(e):t}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=n("./node_modules/lodash/lodash.js"),g=b.defaultsDeep,h=b.isObject,v=b.isString,S='<span class="glyphicon glyphicon-align-left" style="display: inline-block; margin-top: 4px;"></span>',w='<span class="glyphicon glyphicon-align-center" style="display: inline-block; margin-top: 4px;"></span>',O='<span class="glyphicon glyphicon-align-right" style="display: inline-block; margin-top: 4px;"></span>',j='<span class="glyphicon glyphicon-remove" style="display: inline-block; margin-top: 4px;"></span>';n("./MapStore2/web/client/components/misc/quillmodules/assets/css/resizemodule.css"),e.exports=function(e){var t=e.import("blots/embed"),n=e.import("formats/link"),r=e.imports.parchment,o=new r.Attributor.Style("float","float"),c=new r.Attributor.Style("margin","margin"),p=new r.Attributor.Style("display","display"),b=new r.Attributor.Style("width","width"),E={iframeIcon:!0,modules:["DisplaySize","Toolbar","Resize"],overlayStyles:{position:"absolute",boxSizing:"border-box",border:"1px dashed #444"},handleStyles:{position:"absolute",height:"12px",width:"12px",backgroundColor:"white",border:"1px solid #777",boxSizing:"border-box",opacity:"0.80"},displayStyles:{position:"absolute",font:"12px/1.0 Arial, Helvetica, sans-serif",padding:"4px 8px",textAlign:"center",backgroundColor:"white",color:"#333",border:"1px solid #777",boxSizing:"border-box",opacity:"0.80",cursor:"default"},toolbarStyles:{position:"absolute",top:"-12px",right:"0",left:"0",height:"0",minWidth:"100px",font:"12px/1.0 Arial, Helvetica, sans-serif",textAlign:"center",color:"#333",boxSizing:"border-box",cursor:"default"},toolbarButtonStyles:{display:"inline-block",width:"24px",height:"24px",background:"white",border:"1px solid #999",verticalAlign:"middle"},toolbarButtonSvgStyles:{fill:"#444",stroke:"#444",strokeWidth:"2"}},x=function e(t){m(this,e),y(this,"onCreate",(function(){})),y(this,"onDestroy",(function(){})),y(this,"onUpdate",(function(){})),this.overlay=t.overlay,this.domNode=t.domNode,this.options=t.options,this.requestUpdate=t.onUpdate},P=function(e){l(n,e);var t=u(n);function n(){var e;m(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return y(d(e=t.call.apply(t,[this].concat(o))),"onCreate",(function(){e.display=document.createElement("div"),Object.assign(e.display.style,e.options.displayStyles),e.overlay.appendChild(e.display)})),y(d(e),"onDestroy",(function(){})),y(d(e),"onUpdate",(function(){if(e.display&&e.domNode){var t=e.getCurrentSize();if(e.display.innerHTML=t.join(" &times; "),t[0]>120&&t[1]>30)Object.assign(e.display.style,{right:"4px",bottom:"4px",left:"auto"});else if("right"===e.domNode.style.float){var n=e.display.getBoundingClientRect();Object.assign(e.display.style,{right:"auto",bottom:"-".concat(n.height+4,"px"),left:"-".concat(n.width+4,"px")})}else{var r=e.display.getBoundingClientRect();Object.assign(e.display.style,{right:"-".concat(r.width+4,"px"),bottom:"-".concat(r.height+4,"px"),left:"auto"})}}})),y(d(e),"getCurrentSize",(function(){return"IMG"===e.domNode.tagName.toUpperCase()?[e.domNode.width,Math.round(e.domNode.width/e.domNode.naturalWidth*e.domNode.naturalHeight)]:[e.domNode.clientWidth,e.domNode.clientHeight]})),e}return n}(x),C=function(e){l(n,e);var t=u(n);function n(){var e;m(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return y(d(e=t.call.apply(t,[this].concat(o))),"onCreate",(function(){e.boxes=[],e.addBox("nwse-resize"),e.addBox("nesw-resize"),e.addBox("nwse-resize"),e.addBox("nesw-resize"),e.positionBoxes()})),y(d(e),"onDestroy",(function(){e.setCursor("")})),y(d(e),"positionBoxes",(function(){var t="".concat(-parseFloat(e.options.handleStyles.width)/2,"px"),n="".concat(-parseFloat(e.options.handleStyles.height)/2,"px");[{left:t,top:n},{right:t,top:n},{right:t,bottom:n},{left:t,bottom:n}].forEach((function(t,n){Object.assign(e.boxes[n].style,t)}))})),y(d(e),"addBox",(function(t){var n=document.createElement("div");Object.assign(n.style,e.options.handleStyles),n.style.cursor=t,n.style.width="".concat(e.options.handleStyles.width,"px"),n.style.height="".concat(e.options.handleStyles.height,"px"),n.addEventListener("mousedown",e.handleMousedown,!1),e.overlay.appendChild(n),e.boxes.push(n)})),y(d(e),"handleMousedown",(function(t){e.dragBox=t.target,e.dragStartX=t.clientX,e.dragStartY=t.clientY,e.preDragWidth=e.domNode.width||e.domNode.naturalWidth||e.domNode.clientWidth,e.preDragHeight=e.domNode.height||e.domNode.naturalHeight||e.domNode.clientHeight,e.setCursor(e.dragBox.style.cursor),document.addEventListener("mousemove",e.handleDrag,!1),document.addEventListener("mouseup",e.handleMouseup,!1)})),y(d(e),"handleMouseup",(function(){e.setCursor(""),document.removeEventListener("mousemove",e.handleDrag),document.removeEventListener("mouseup",e.handleMouseup)})),y(d(e),"handleDrag",(function(t){if(e.domNode){var n=t.clientX-e.dragStartX,r=t.clientY-e.dragStartY;if(e.dragBox===e.boxes[0]||e.dragBox===e.boxes[3]){if("IMG"===e.domNode.tagName.toUpperCase())e.domNode.width=Math.round(e.preDragWidth-n);else if("ms-quill-iframe"===e.domNode.getAttribute("class")){var o=e.domNode.parentNode&&e.domNode.parentNode.children&&e.domNode.parentNode.children[0]||null;o&&(e.domNode.parentNode.parentNode.style.width=Math.round(e.preDragWidth-n)+"px",o.setAttribute("width",e.domNode.parentNode.parentNode.clientWidth),e.domNode.style.width=e.domNode.parentNode.parentNode.clientWidth+"px")}}else if("IMG"===e.domNode.tagName.toUpperCase())e.domNode.width=Math.round(e.preDragWidth+n);else if("ms-quill-iframe"===e.domNode.getAttribute("class")){var i=e.domNode.parentNode&&e.domNode.parentNode.children&&e.domNode.parentNode.children[0]||null;i&&(e.domNode.parentNode.parentNode.style.width=Math.round(e.preDragWidth+n)+"px",i.setAttribute("width",e.domNode.parentNode.parentNode.clientWidth),e.domNode.style.width=e.domNode.parentNode.parentNode.clientWidth+"px")}if("ms-quill-iframe"===e.domNode.getAttribute("class")){var a=e.domNode.parentNode&&e.domNode.parentNode.children&&e.domNode.parentNode.children[0]||null;a&&(e.domNode.parentNode.parentNode.style.height=Math.round(e.preDragHeight+r)+"px",a.setAttribute("height",e.domNode.parentNode.parentNode.clientHeight),e.domNode.style.height=e.domNode.parentNode.parentNode.clientHeight+"px")}e.requestUpdate()}})),y(d(e),"setCursor",(function(t){[document.body,"IMG"===e.domNode.tagName.toUpperCase()?e.domNode:e.domNode.parentNode.parentNode].forEach((function(e){e.style.cursor=t}))})),e}return n}(x),T=function(e){l(n,e);var t=u(n);function n(){var e;m(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return y(d(e=t.call.apply(t,[this].concat(i))),"onCreate",(function(){e.toolbar=document.createElement("div"),Object.assign(e.toolbar.style,e.options.toolbarStyles),e.overlay.appendChild(e.toolbar),e._defineAlignments(),e._addToolbarButtons()})),y(d(e),"onDestroy",(function(){})),y(d(e),"onUpdate",(function(){})),y(d(e),"_defineAlignments",(function(){var t="IMG"===e.domNode.tagName.toUpperCase()?e.domNode:e.domNode.parentNode.parentNode;e.alignments=[{icon:S,apply:function(){p.add(t,"inline"),o.add(t,"left"),c.add(t,"0 1em 1em 0")},isApplied:function(){return"left"===o.value(t)}},{icon:w,apply:function(){p.add(t,"block"),o.remove(t),c.add(t,"auto")},isApplied:function(){return"auto"===c.value(t)}},{icon:O,apply:function(){p.add(t,"inline"),o.add(t,"right"),c.add(t,"0 0 1em 1em")},isApplied:function(){return"right"===o.value(t)}},{icon:j,apply:function(){if(p.add(t,"block"),o.add(t,"none"),c.add(t,"0"),b.add(t,"100%"),"ql-video"===t.getAttribute("class")){var e=t.querySelector("IFRAME")||null,n=t.querySelector(".ms-quill-iframe")||null;e&&n&&(t.style.width="100%",e.setAttribute("width","100%"),n.style.width="100%",t.style.height="200px",e.setAttribute("height",200),n.style.height="200px")}},isApplied:function(){return!1}}]})),y(d(e),"_addToolbarButtons",(function(){var t=[];e.alignments.forEach((function(n,r){var i=document.createElement("span");t.push(i),i.innerHTML=n.icon,i.addEventListener("click",(function(){t.forEach((function(e){e.style.filter=""})),n.isApplied()?(o.remove(e.domNode),c.remove(e.domNode),p.remove(e.domNode)):(e._selectButton(i),n.apply()),e.requestUpdate()})),Object.assign(i.style,e.options.toolbarButtonStyles),r>0&&(i.style.borderLeftWidth="0"),Object.assign(i.style,e.options.toolbarButtonSvgStyles),n.isApplied()&&e._selectButton(i),e.toolbar.appendChild(i)}))})),y(d(e),"_selectButton",(function(e){e.style.filter="invert(20%)"})),e}return n}(x),M={DisplaySize:P,Toolbar:T,Resize:C},_=["height","width"],A=function(e){l(p,e);var t,r,o,c=u(p);function p(){return m(this,p),c.apply(this,arguments)}return t=p,o=[{key:"create",value:function(e){var t="",n="100%",r=200;h(e)?(t=e.src||t,n=e.width||n,r=e.height||r):t=e||t;var o=s(f(p),"create",this).call(this,e);o.style.position="relative",e.domNodeStyle&&Object.assign(o.style,e.domNodeStyle),o.style.width=v(n)&&-1!==n.indexOf("%")?n:n+"px",o.style.height=v(r)&&-1!==r.indexOf("%")?r:r+"px";var i=document.createElement("IFRAME");i.setAttribute("frameborder","0"),i.setAttribute("allowfullscreen",!0),i.setAttribute("src",this.sanitize(t)),i.setAttribute("width",n),i.setAttribute("height",r);var a=document.createElement("DIV");return a.setAttribute("class","ms-quill-iframe"),a.style.overflow="hidden",a.style.position="absolute",a.style.left="0",a.style.top="0",a.style.width=v(n)&&-1!==n.indexOf("%")?n:n+"px",a.style.height=v(r)&&-1!==r.indexOf("%")?r:r+"px",a.style.border="1px solid #ddd",o.appendChild(i),o.appendChild(a),o}},{key:"formats",value:function(e){return _.reduce((function(t,n){return e.hasAttribute(n)&&(t[n]=e.getAttribute(n)),t}),{})}},{key:"sanitize",value:function(e){return n.sanitize(e)}},{key:"value",value:function(e){var t=e.children&&e.children[0]&&e.children[0].children&&e.children[0].children[0];return t?{src:t.getAttribute("src"),width:t.getAttribute("width"),height:t.getAttribute("height"),domNodeStyle:i({},e.style)}:""}}],(r=[{key:"format",value:function(e,t){_.indexOf(e)>-1?t?this.domNode.setAttribute(e,t):this.domNode.removeAttribute(e):s(f(p.prototype),"format",this).call(this,e,t)}}])&&a(t.prototype,r),o&&a(t,o),p}(t);A.blotName="video",A.className="ql-video",A.tagName="DIV";return{ResizeModule:function t(n){var r=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};m(this,t),y(this,"initializeModules",(function(){r.removeModules(),r.modules=r.moduleClasses.map((function(e){return new(M[e]||e)(r)})),r.modules.forEach((function(e){e.onCreate()})),r.onUpdate()})),y(this,"onUpdate",(function(){r.repositionElements(),r.modules.forEach((function(e){e.onUpdate()}))})),y(this,"removeModules",(function(){r.modules.forEach((function(e){e.onDestroy()})),r.modules=[]})),y(this,"handleClick",(function(e){if(e.target&&e.target.tagName&&"IMG"===e.target.tagName.toUpperCase()||e.target&&e.target.tagName&&"DIV"===e.target.tagName.toUpperCase()&&"ms-quill-iframe"===e.target.getAttribute("class")){if(r.domNode===e.target)return;r.domNode&&r.hide(),r.show(e.target)}else r.domNode&&r.hide()})),y(this,"show",(function(e){r.domNode=e,r.showOverlay(),r.initializeModules()})),y(this,"showOverlay",(function(){r.overlay&&r.hideOverlay(),r.quill.setSelection(null),r.setUserSelect("none"),document.addEventListener("keyup",r.checkImage,!0),r.quill.root.addEventListener("input",r.checkImage,!0);var e=r.quill.root.parentNode.querySelector(".ql-editor");if(e&&(e.style.overflow="hidden"),r.overlay=document.createElement("div"),Object.assign(r.overlay.style,r.options.overlayStyles),r.domNode&&"ms-quill-iframe"===r.domNode.getAttribute("class")){r.input=document.createElement("input"),r.input.style.position="absolute",r.input.style.left="8px",r.input.style.top="16px",r.input.style.width="calc(100% - 16px)";var t=r.domNode.parentNode&&r.domNode.parentNode.children&&r.domNode.parentNode.children[0]&&r.domNode.parentNode.children[0].getAttribute("src")||"";r.input.setAttribute("value",t),r.overlay.appendChild(r.input),r.overlay.style.backgroundColor="rgba(0, 0, 0, 0.2)"}r.quill.root.parentNode.appendChild(r.overlay),r.repositionElements()})),y(this,"hideOverlay",(function(){if(r.overlay){r.input&&(r.domNode.parentNode&&r.domNode.parentNode.children&&r.domNode.parentNode.children[0]&&r.domNode.parentNode.children[0]&&r.domNode.parentNode.children[0].setAttribute("src",r.input.value),r.overlay.removeChild(r.input),r.input=void 0);var e=r.quill.root.parentNode.querySelector(".ql-editor");e&&(e.style.overflow="auto"),r.quill.root.parentNode.removeChild(r.overlay),r.overlay=void 0,document.removeEventListener("keyup",r.checkImage),r.quill.root.removeEventListener("input",r.checkImage),r.setUserSelect("")}})),y(this,"repositionElements",(function(){if(r.overlay&&r.domNode){var e=r.quill.root.parentNode,t="IMG"===r.domNode.tagName.toUpperCase()?r.domNode.getBoundingClientRect():r.domNode.parentNode.parentNode.getBoundingClientRect(),n=e.getBoundingClientRect();Object.assign(r.overlay.style,{left:"".concat(t.left-n.left-1+e.scrollLeft,"px"),top:"".concat(t.top-n.top+e.scrollTop,"px"),width:"".concat(t.width,"px"),height:"".concat(t.height,"px")})}})),y(this,"hide",(function(){r.hideOverlay(),r.removeModules(),r.domNode=void 0})),y(this,"setUserSelect",(function(e){["userSelect","mozUserSelect","webkitUserSelect","msUserSelect"].forEach((function(t){r.quill.root.style[t]=e,document.documentElement.style[t]=e}))})),y(this,"checkImage",(function(t){r.domNode&&r.input!==t.target&&(46!==t.keyCode&&8!==t.keyCode||"IMG"!==r.domNode.tagName.toUpperCase()||e.find(r.domNode).deleteAt(0),r.hide())})),this.quill=n;var i=!1;if(o.modules&&(i=o.modules.slice()),this.options=g({},o,E),!1!==i&&(this.options.modules=i),this.quill.theme&&this.quill.theme.modules&&this.quill.theme.modules.toolbar&&this.quill.theme.modules.toolbar.container&&this.options.iframeIcon){var a=this.quill.theme.modules.toolbar.container.querySelector(".ql-video");a&&(a.innerHTML='<svg viewbox="0 1022 18 18"><g transform="translate(0,0) scale(3.5)"><path d="m 0.20913578,292.52935 -0.0448461,0.0228 c -0.0522035,0.0266 -0.10514577,0.0764 -0.12730166,0.11985 -0.03898753,0.0764 -0.03689917898,-0.0334 -0.036985428654,1.94049 -5.91591201e-5,1.35972 0.00218847865,1.849 0.00864824865,1.87539 0.02503373,0.10227 0.09520806,0.17792 0.19668092,0.21203 0.0202072,0.007 0.54764317,0.009 2.18732434,0.008 l 2.1606966,-0.001 0.044846,-0.0228 c 0.079823,-0.0406 0.1345603,-0.10935 0.1556385,-0.19546 0.00646,-0.0264 0.00872,-0.51567 0.00866,-1.87539 -7.44e-5,-1.97386 0.002,-1.86407 -0.036985,-1.94049 -0.022155,-0.0434 -0.075113,-0.0933 -0.1273161,-0.11985 l -0.044846,-0.0228 H 2.381244 Z m 0.0798849,0.757 H 2.381244 4.4734673 v 1.57107 1.57107 H 2.381244 0.28902068 v -1.57107 z m 2.34957572,0.33607 c -0.028878,0 -0.055626,0.007 -0.080256,0.0204 -0.024631,0.0136 -0.045009,0.0323 -0.061147,0.056 -0.016138,0.0238 -0.025064,0.0501 -0.026762,0.079 -0.032275,0.14948 -0.1758133,0.82556 -0.4306147,2.02822 -0.00679,0.017 -0.010194,0.0348 -0.010194,0.0535 0,0.0306 0.00764,0.0586 0.022928,0.0841 0.015288,0.0255 0.035682,0.0459 0.061162,0.0612 0.025481,0.0153 0.053499,0.0229 0.084076,0.0229 0.022083,0 0.043319,-0.004 0.063703,-0.0127 0.020385,-0.008 0.038221,-0.0204 0.053509,-0.0357 0.015288,-0.0153 0.027184,-0.0331 0.035678,-0.0535 0.00849,-0.0204 0.013592,-0.0416 0.01529,-0.0637 l 0.4255178,-2.00274 c 0.00849,-0.0221 0.013592,-0.045 0.015291,-0.0688 0,-0.0459 -0.016566,-0.0854 -0.04969,-0.11847 -0.033125,-0.0331 -0.072626,-0.0497 -0.1184901,-0.0497 z m -0.1025608,0.30066 c 0.00234,0.002 0.00489,0.003 0.00701,0.005 0.00425,0.003 0.00892,0.006 0.014013,0.008 -0.0051,-0.002 -0.010194,-0.004 -0.01529,-0.008 -0.0017,-0.002 -0.00361,-0.003 -0.00574,-0.005 z m -0.7892346,0.20894 c -0.022083,0 -0.048417,0.008 -0.078993,0.0255 l -0.050968,0.0382 c -0.3295431,0.2599 -0.5461142,0.43063 -0.64973332,0.51217 -0.0441656,0.0187 -0.0764407,0.0514 -0.0968248,0.0981 -0.0203841,0.0467 -0.0246402,0.0947 -0.0127495,0.14398 0.0118908,0.0493 0.038225,0.0858 0.0789933,0.10956 0.057755,0.0408 0.13887122,0.10235 0.24333972,0.18473 0.1044687,0.0824 0.1643489,0.13037 0.179637,0.14396 0.022083,0.017 0.053501,0.0412 0.094269,0.0726 0.040768,0.0314 0.077299,0.0603 0.1095742,0.0866 0.032275,0.0263 0.06285,0.0514 0.091728,0.0752 0.047563,0.034 0.1006454,0.0412 0.1592497,0.0217 0.058604,-0.0195 0.097249,-0.0565 0.1159341,-0.11084 0.016987,-0.0442 0.015701,-0.0896 -0.00383,-0.13632 -0.018887,-0.0452 -0.049313,-0.0772 -0.091223,-0.0962 l -0.03489,-0.0274 c -0.018685,-0.0136 -0.029739,-0.0221 -0.033137,-0.0255 -0.056056,-0.0408 -0.1375864,-0.10108 -0.2446029,-0.18091 -0.1070166,-0.0798 -0.1843053,-0.13759 -0.2318683,-0.17327 0.030576,-0.0221 0.1108352,-0.082 0.240784,-0.17963 0.1299487,-0.0977 0.2297443,-0.17284 0.29939,-0.2255 0.057755,-0.0238 0.093001,-0.0697 0.1057405,-0.1376 0.01274,-0.0679 -0.00467,-0.12314 -0.052231,-0.16561 -0.035672,-0.0357 -0.078129,-0.0527 -0.1273908,-0.051 -0.0034,-0.002 -0.0068,-0.003 -0.010194,-0.003 z m 1.2689006,0 c -0.0034,0 -0.0068,8.5e-4 -0.010194,0.003 -0.049262,-0.002 -0.091718,0.0153 -0.1273909,0.051 -0.047563,0.0425 -0.064971,0.0977 -0.052231,0.16561 0.01274,0.0679 0.047986,0.11382 0.1057406,0.1376 0.069646,0.0527 0.1694416,0.12782 0.29939,0.2255 0.1299488,0.0977 0.210208,0.15755 0.2407841,0.17963 -0.047563,0.0357 -0.1248516,0.0934 -0.2318683,0.17327 -0.1070167,0.0798 -0.1885466,0.14014 -0.2446028,0.18091 l -0.033137,0.0255 c -0.015288,0.0102 -0.024628,0.017 -0.028025,0.0204 -0.00522,0.004 -0.00795,0.007 -0.00826,0.008 -0.041191,0.019 -0.071164,0.0509 -0.089841,0.0955 -0.019535,0.0467 -0.020806,0.0922 -0.00382,0.13632 0.018685,0.0544 0.05733,0.0913 0.1159342,0.11084 0.058604,0.0195 0.1116868,0.0123 0.1592499,-0.0217 0.028877,-0.0238 0.059453,-0.0488 0.091728,-0.0752 0.032275,-0.0263 0.068806,-0.0552 0.1095742,-0.0866 0.040768,-0.0314 0.072186,-0.0556 0.094269,-0.0726 0.032275,-0.0272 0.076018,-0.0629 0.1312245,-0.10702 0.055207,-0.0442 0.10659,-0.0845 0.1541529,-0.12103 0.047563,-0.0365 0.093434,-0.0701 0.1375999,-0.10064 0.040768,-0.0238 0.067102,-0.0603 0.078993,-0.10956 0.011891,-0.0493 0.00763,-0.0973 -0.012749,-0.14398 -0.020384,-0.0467 -0.052659,-0.0794 -0.096824,-0.0981 -0.07814,-0.0612 -0.2947259,-0.23189 -0.6497489,-0.51217 -0.045864,-0.0408 -0.089179,-0.062 -0.1299468,-0.0637 z m -1.4396219,0.15034 c -0.0017,0.008 -0.00256,0.0178 -0.00256,0.028 v -0.0102 -0.0102 z m 1.6103431,0 0.00254,0.008 v 0.0102 0.0102 c 0,-0.0102 -8.416e-4,-0.0195 -0.00254,-0.028 z m -1.6128989,0.051 0.00256,0.0178 0.00254,0.0179 0.00765,0.0178 0.00764,0.0153 h -0.00254 c -0.0017,-0.003 -0.0034,-0.008 -0.0051,-0.0153 l -0.00256,-0.003 -0.0051,-0.0153 c -0.0017,-0.008 -0.00254,-0.0145 -0.00254,-0.0179 -0.0017,-0.007 -0.00256,-0.0127 -0.00256,-0.0178 z m 1.6154252,2.3e-4 c -2.25e-5,0.005 -8.494e-4,0.0109 -0.00252,0.0176 0,0.003 -8.416e-4,0.009 -0.00254,0.0179 l -0.0051,0.0153 -0.00256,0.003 c -0.0017,0.007 -0.0034,0.0119 -0.0051,0.0153 h -0.00254 l 0.00764,-0.0153 0.00765,-0.0178 0.00254,-0.0179 z m -1.50331,0.1552 c 0.00849,0.003 0.01869,0.007 0.030581,0.0102 -0.00679,-0.002 -0.011036,-0.003 -0.012735,-0.003 -0.0051,-0.002 -0.011052,-0.004 -0.017846,-0.008 z m 1.3912246,0 c -0.00679,0.003 -0.01275,0.006 -0.017846,0.008 -0.0017,0 -0.00594,8.6e-4 -0.012735,0.003 0.011891,-0.003 0.022087,-0.007 0.030581,-0.0102 z m -0.7975265,1.2256 c 0.0051,0.002 0.00934,0.004 0.012734,0.008 -0.0051,-0.003 -0.00934,-0.006 -0.012734,-0.008 z"/></g></svg>')}this.quill.theme&&this.quill.theme.tooltip&&this.quill.theme.tooltip.root&&this.quill.theme.tooltip.root.classList&&this.quill.theme.tooltip.root.classList.add&&this.options.iframeIcon&&this.quill.theme.tooltip.root.classList.add("ms-ql-iframe-tooltip"),document.execCommand("enableObjectResizing",!1,"false"),this.quill.root.addEventListener("click",this.handleClick,!1),this.quill.root.parentNode.style.position=this.quill.root.parentNode.style.position||"relative",this.moduleClasses=this.options.modules,this.modules=[]},IFrame:A,toolbarConfig:{container:[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"],["video"]]},BaseModule:x,Toolbar:T,DisplaySize:P,Resize:C}}},"./MapStore2/web/client/components/misc/quillmodules/assets/css/resizemodule.css":function(e,t,n){var r=n("./node_modules/css-loader/index.js!./node_modules/postcss-loader/src/index.js?!./MapStore2/web/client/components/misc/quillmodules/assets/css/resizemodule.css");"string"==typeof r&&(r=[[e.i,r,""]]);n("./node_modules/style-loader/addStyles.js")(r,{});r.locals&&(e.exports=r.locals)},"./MapStore2/web/client/components/misc/spinners/BasicSpinner/BasicSpinner.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=n("./node_modules/prop-types/index.js"),d=n("./node_modules/react/index.js");n("./MapStore2/web/client/components/misc/spinners/BasicSpinner/basicSpinner.css");var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(c,e);var t,n,r,l=s(c);function c(){return o(this,c),l.apply(this,arguments)}return t=c,(n=[{key:"render",value:function(){return d.createElement("div",{className:"spinner"},d.createElement("div",{className:"spinner-card "+this.props.sSize},d.createElement("div",{className:"spinner-bg spinner-loader"},"Loading.."),d.createElement("div",{className:"spinner-fg"},this.props.value)))}}])&&i(t.prototype,n),r&&i(t,r),c}(d.Component);u(f,"propTypes",{id:p.string,value:p.number,sSize:p.string}),u(f,"defaultProps",{id:"mapstore-basicspinner",value:null,sSize:null}),e.exports=f},"./MapStore2/web/client/components/misc/spinners/BasicSpinner/basicSpinner.css":function(e,t,n){var r=n("./node_modules/css-loader/index.js!./node_modules/postcss-loader/src/index.js?!./MapStore2/web/client/components/misc/spinners/BasicSpinner/basicSpinner.css");"string"==typeof r&&(r=[[e.i,r,""]]);n("./node_modules/style-loader/addStyles.js")(r,{});r.locals&&(e.exports=r.locals)},"./MapStore2/web/client/components/misc/spinners/InlineSpinner/img/spinner.gif":function(e,t){e.exports="data:image/gif;base64,R0lGODlhEAALAPQAAP///zMzM+Hh4dnZ2e7u7jc3NzMzM1dXV5qamn9/f8fHx05OTm5ubqGhoYKCgsrKylFRUTY2NnFxcerq6t/f3/b29l9fX+Li4vT09MTExLKystTU1PHx8QAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCwAAACwAAAAAEAALAAAFLSAgjmRpnqSgCuLKAq5AEIM4zDVw03ve27ifDgfkEYe04kDIDC5zrtYKRa2WQgAh+QQJCwAAACwAAAAAEAALAAAFJGBhGAVgnqhpHIeRvsDawqns0qeN5+y967tYLyicBYE7EYkYAgAh+QQJCwAAACwAAAAAEAALAAAFNiAgjothLOOIJAkiGgxjpGKiKMkbz7SN6zIawJcDwIK9W/HISxGBzdHTuBNOmcJVCyoUlk7CEAAh+QQJCwAAACwAAAAAEAALAAAFNSAgjqQIRRFUAo3jNGIkSdHqPI8Tz3V55zuaDacDyIQ+YrBH+hWPzJFzOQQaeavWi7oqnVIhACH5BAkLAAAALAAAAAAQAAsAAAUyICCOZGme1rJY5kRRk7hI0mJSVUXJtF3iOl7tltsBZsNfUegjAY3I5sgFY55KqdX1GgIAIfkECQsAAAAsAAAAABAACwAABTcgII5kaZ4kcV2EqLJipmnZhWGXaOOitm2aXQ4g7P2Ct2ER4AMul00kj5g0Al8tADY2y6C+4FIIACH5BAkLAAAALAAAAAAQAAsAAAUvICCOZGme5ERRk6iy7qpyHCVStA3gNa/7txxwlwv2isSacYUc+l4tADQGQ1mvpBAAIfkECQsAAAAsAAAAABAACwAABS8gII5kaZ7kRFGTqLLuqnIcJVK0DeA1r/u3HHCXC/aKxJpxhRz6Xi0ANAZDWa+kEAA7AAAAAAAAAAAA"},"./MapStore2/web/client/components/misc/style/filter.css":function(e,t,n){var r=n("./node_modules/css-loader/index.js!./node_modules/postcss-loader/src/index.js?!./MapStore2/web/client/components/misc/style/filter.css");"string"==typeof r&&(r=[[e.i,r,""]]);n("./node_modules/style-loader/addStyles.js")(r,{});r.locals&&(e.exports=r.locals)},"./MapStore2/web/client/components/misc/wizard/StepHeader.jsx":function(e,t,n){var r=n("./node_modules/react/index.js"),o=n("./node_modules/react-bootstrap/es/index.js"),i=o.Row,a=o.Col;e.exports=function(e){var t=e.title,n=e.description;return r.createElement(i,null,r.createElement(a,{xs:12,className:"text-center"},r.createElement("div",{className:"mapstore-step-title"},t),r.createElement("div",{className:"mapstore-step-description"},n)))}},"./MapStore2/web/client/components/misc/wizard/WizardContainer.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=n("./node_modules/react/index.js"),f=n("./node_modules/prop-types/index.js"),m=n("./node_modules/react-bootstrap/es/index.js"),y=m.Button,b=m.Row,g=n("./MapStore2/web/client/components/I18N/Message.jsx"),h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(u,e);var t,n,r,l=s(u);function u(){var e;o(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return p(c(e=l.call.apply(l,[this].concat(n))),"renderButtons",(function(){var t=[],n=e.props,r=n.isStepValid,o=n.children,i=void 0===o?[]:o,a=i.length>=0?i.length:1;return e.props.hideButtons?null:(e.props.step>0&&t.push(d.createElement(y,{key:"prev",className:"ms-wizard-prev",onClick:function(){return e.props.onPrevPage()}},d.createElement(g,{msgId:"wizard.prev"}))),e.props.step>=a-1?t.push(d.createElement(y,{key:"finish",className:"ms-wizard-finish",onClick:function(){return e.props.onFinish()}},d.createElement(g,{msgId:"wizard.finish"}))):e.props.step<a-1&&a>1&&t.push(d.createElement(y,{key:"next",className:"ms-wizard-next",disabled:!r(e.props.step),onClick:function(){return e.props.onNextPage()}},d.createElement(g,{msgId:"wizard.next"}))),t)})),e}return t=u,(n=[{key:"render",value:function(){var e=this,t=this.props.children||[],n=t.length>=0?t.length:1;return d.createElement("div",{key:"wizard-pages",className:"ms-wizard"},d.Children.map(t,(function(t,r){return r===e.props.step?d.cloneElement(t,{key:"wizard-component-".concat(r),onNextPage:e.props.step===n-1?e.props.onFinish:e.props.onNextPage,onPrevPage:e.props.onPrevPage}):null})),d.createElement(b,{key:"wizard-buttons",className:"ms-wizard-buttons"},this.renderButtons()))}}])&&i(t.prototype,n),r&&i(t,r),u}(d.Component);p(h,"propTypes",{step:f.number,hideButtons:f.bool,onNextPage:f.func,onPrevPage:f.func,buttonType:f.node,onFinish:f.func,isStepValid:f.func}),p(h,"defaultProps",{step:0,isStepValid:function(){return!0},hideButtons:!1,onNextPage:function(){},onPrevPage:function(){},onFinish:function(){}}),e.exports=h},"./MapStore2/web/client/components/misc/wizard/enhancers.js":function(e,t,n){var r=n("./node_modules/recompose/es/Recompose.js"),o=r.compose,i=r.withState,a=r.withPropsOnChange,s=r.withHandlers,l=o(a(["step"],(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.skipButtonsOnSteps,n=void 0===t?[]:t,r=e.step,o=e.hideButtons;return n&&n.indexOf(r)>=0?{hideButtons:!0}:{hideButtons:o}})),s({onNextPage:function(e){var t=e.step,n=e.setPage,r=void 0===n?function(){}:n;return function(){r(t+1)}},onPrevPage:function(e){var t=e.step,n=e.setPage,r=void 0===n?function(){}:n;return function(){r(Math.max(t-1,0))}}}));e.exports={controlledWizard:o(i("step","setPage",0),l),wizardHandlers:l}},"./MapStore2/web/client/components/notifications/NotificationContainer.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function i(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m(e);if(t){var o=m(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d(this,n)}}function d(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=n("./node_modules/react/index.js"),g=n("./node_modules/react-notification-system/dist/NotificationSystem.js"),h=n("./node_modules/prop-types/index.js"),v=n("./node_modules/react-intl/lib/index.es.js"),S=v.injectIntl,w=v.intlShape,O=v.defineMessages,j=n("./MapStore2/web/client/utils/LocaleUtils.js"),E=n("./MapStore2/web/client/components/misc/Portal.jsx"),x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(d,e);var t,n,r,a=p(d);function d(){var e;l(this,d);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return y(f(e=a.call.apply(a,[this].concat(n))),"system",(function(){return e.refs.notify})),y(f(e),"updateNotifications",(function(t){var n=t.map((function(e){return e.uid})),r=e.system().state.notifications||[];r.forEach((function(t){n.indexOf(t.uid)<0&&e.system().removeNotification(t.uid)})),t.forEach((function(t){if(r.indexOf(t.uid)<0){var n,o=t.message,i=j.getMessageById(e.context.messages,o);if(t.values)n=(0,e.props.intl.formatMessage)(n=O({id:o,defaultMessage:i}),t.values);else n=i||o;e.system().addNotification(s(s({},t),{},{title:j.getMessageById(e.context.messages,t.title)||t.title,message:n,action:t.action&&{label:j.getMessageById(e.context.messages,t.action.label)||t.action.label,callback:t.action.dispatch?function(){e.props.onDispatch(t.action.dispatch)}:t.action.callback},onRemove:function(){e.props.onRemove(t.uid),t.onRemove&&t.onRemove()}}))}}))})),e}return t=d,(n=[{key:"componentDidMount",value:function(){this.updateNotifications(this.props.notifications)}},{key:"componentDidUpdate",value:function(){var e=(this.props||[]).notifications;this.updateNotifications(e)}},{key:"render",value:function(){var e=this.props,t=(e.notifications,e.onRemove,i(e,["notifications","onRemove"]));return b.createElement(E,null,b.createElement(g,o({ref:"notify"},t)))}}])&&c(t.prototype,n),r&&c(t,r),d}(b.Component);y(x,"propTypes",{notifications:h.array,intl:w.isRequired,onRemove:h.func,onDispatch:h.func}),y(x,"contextTypes",{messages:h.object}),y(x,"defaultProps",{notifications:[],onRemove:function(){},onDispatch:function(){}}),e.exports=S(x)},"./MapStore2/web/client/components/resources/forms/FileDrop.jsx":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/react/index.js"),o=n.n(r),i=n("./node_modules/react-dropzone/dist/index.js"),a=n.n(i),s=n("./node_modules/react-bootstrap/es/index.js"),l=n("./MapStore2/web/client/components/I18N/Message.jsx"),c=n.n(l);t.default=function(e){var t=e.acceptedFileName,n=e.label,r=e.status,i=void 0===r?"clear":r,l=e.errorMessage,u=e.clearMessage,p=e.onDrop,d=void 0===p?function(){}:p,f=e.onClear,m=void 0===f?function(){}:f,y=e.onError,b=void 0===y?function(){}:y;return o.a.createElement("div",{className:"dropzone-filedrop-container"},o.a.createElement("label",{className:"control-label"},o.a.createElement(c.a,{msgId:n})),o.a.createElement(a.a,{multiple:!1,className:"dropzone alert alert-info".concat("accepted"===i?" filedrop-accepted":""),rejectClassName:"alert-danger",onDrop:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return d.apply(void 0,[b].concat(t))}},"accepted"===i&&o.a.createElement("div",{className:"dropzone-filedrop-remove",onClick:function(e){e.stopPropagation(),m()}},o.a.createElement(s.Glyphicon,{glyph:"remove"})),o.a.createElement("div",{className:"dropzone-content"},o.a.createElement(s.Glyphicon,{glyph:"clear"===i?"upload":"accepted"===i?"ok-circle":"remove-circle"}),"accepted"===i?o.a.createElement("span",null,t):null,"rejected"===i?l:null,"clear"===i?u:null)))}},"./MapStore2/web/client/components/resources/forms/Metadata.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=n("./node_modules/react/index.js"),f=n("./node_modules/prop-types/index.js"),m=n("./node_modules/moment/moment.js"),y=n("./node_modules/react-bootstrap/es/index.js"),b=y.FormControl,g=y.FormGroup,h=y.ControlLabel,v=n("./MapStore2/web/client/utils/ConfigUtils.js"),S=n("./MapStore2/web/client/components/misc/enhancers/localizedProps.js")("placeholder")(b),w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(u,e);var t,n,r,l=s(u);function u(){var e;o(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return p(c(e=l.call.apply(l,[this].concat(n))),"renderDate",(function(t){if(!t)return"";var n=v.getConfigProp("forceDateFormat"),r=v.getConfigProp("forceTimeFormat"),o=n?m(t).format(n):e.context.intl?e.context.intl.formatDate(t):"",i=r?m(t).format(r):e.context.intl?e.context.intl.formatTime(t):"";return"".concat(o," ").concat(i)||""})),p(c(e),"changeName",(function(t){e.props.onChange("metadata.name",e.props.nameFieldFilter(t.target.value)||t.target.value)})),p(c(e),"changeDescription",(function(t){e.props.onChange("metadata.description",t.target.value)})),e}return t=u,(n=[{key:"render",value:function(){return d.createElement("form",{ref:"metadataForm",onSubmit:this.handleSubmit},d.createElement(g,null,d.createElement(h,null,this.props.nameFieldText),d.createElement(S,{key:"mapName",type:"text",onChange:this.changeName,disabled:this.props.resource.saving,placeholder:this.props.namePlaceholderText,defaultValue:this.props.resource?this.props.resource.name:"",value:this.props.resource&&this.props.resource.metadata&&this.props.resource.metadata.name||""})),d.createElement(g,null,d.createElement(h,null,this.props.descriptionFieldText),d.createElement(S,{key:"mapDescription",type:"text",onChange:this.changeDescription,disabled:this.props.resource.saving,placeholder:this.props.descriptionPlaceholderText,defaultValue:this.props.resource?this.props.resource.description:"",value:this.props.resource&&this.props.resource.metadata&&this.props.resource.metadata.description||""})),this.props.resource&&this.props.resource.createdAt&&d.createElement(g,null,d.createElement(h,null,this.props.createdAtFieldText),d.createElement(h,null,this.props.resource&&this.renderDate(this.props.resource.createdAt)||"")),this.props.resource&&this.props.resource.createdAt&&d.createElement(g,null,d.createElement(h,null,this.props.modifiedAtFieldText),d.createElement(h,null,this.props.resource&&this.renderDate(this.props.resource.modifiedAt||this.props.resource.createdAt)||"")))}}])&&i(t.prototype,n),r&&i(t,r),u}(d.Component);p(w,"propTypes",{resource:f.object,onChange:f.func,nameFieldText:f.node,descriptionFieldText:f.node,nameFieldFilter:f.func,namePlaceholderText:f.string,descriptionPlaceholderText:f.string,createdAtFieldText:f.string,modifiedAtFieldText:f.string}),p(w,"contextTypes",{intl:f.object}),p(w,"defaultProps",{onChange:function(){},resource:{},nameFieldText:"Name",descriptionFieldText:"Description",nameFieldFilter:function(){},namePlaceholderText:"Map Name",descriptionPlaceholderText:"Map Description"}),e.exports=w},"./MapStore2/web/client/components/resources/forms/Thumbnail.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=n("./node_modules/react/index.js"),f=n("./node_modules/prop-types/index.js"),m=n("./MapStore2/web/client/components/I18N/Message.jsx"),y=n("./MapStore2/web/client/components/misc/Thumbnail.jsx").default,b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(u,e);var t,n,r,l=s(u);function u(){var e;o(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return p(c(e=l.call.apply(l,[this].concat(n))),"state",{}),p(c(e),"getThumbnailUrl",(function(){return e.props.thumbnail&&"NODATA"!==e.props.thumbnail?decodeURIComponent(e.props.thumbnail):null})),p(c(e),"getDataUri",(function(e,t){var n=e;if(n&&n.length>0){var r=n[0],o=new FileReader;return o.onload=function(e){return t(e.target.result)},o.readAsDataURL(r)}return t(null)})),p(c(e),"getThumbnailDataUri",(function(t){e.getDataUri(e.files,t)})),e}return t=u,(n=[{key:"render",value:function(){var e=this;return d.createElement(y,{thumbnail:this.getThumbnailUrl(),className:null,dropZoneProps:{className:"dropzone alert alert-info",rejectClassName:"alert-danger"},loading:this.props.loading,message:d.createElement(d.Fragment,null,this.props.message,d.createElement("br",null),this.props.suggestion),maxFileSize:this.props.maxFileSize,style:{pointerEvents:this.props.resource.saving?"none":"auto"},label:d.createElement("label",{className:"control-label"},d.createElement(m,{msgId:"map.thumbnail"})),onUpdate:function(t,n){var r;e.props.onError([],e.props.resource.id),e.files=n,e.props.onUpdate(t,null==n||null===(r=n[0])||void 0===r?void 0:r.preview)},onError:function(t,n){e.props.onError(t,e.props.resource.id),e.files=n,e.props.onUpdate(null,null)},onRemove:function(){e.files=null,e.props.onUpdate(null,null),e.props.onRemove(),e.props.onError([],e.props.resource.id)}})}}])&&i(t.prototype,n),r&&i(t,r),u}(d.Component);p(b,"propTypes",{glyphiconRemove:f.string,style:f.object,loading:f.bool,resource:f.object,thumbnail:f.string,onError:f.func,onUpdate:f.func,onRemove:f.func,maxFileSize:f.number,message:f.oneOfType([f.string,f.element]),suggestion:f.oneOfType([f.string,f.element])}),p(b,"contextTypes",{messages:f.object}),p(b,"defaultProps",{loading:!1,glyphiconRemove:"trash",resource:{},onError:function(){},onUpdate:function(){},onSaveAll:function(){},onRemove:function(){},message:d.createElement(m,{msgId:"map.message"}),suggestion:d.createElement(m,{msgId:"map.suggestion"}),maxFileSize:5e5}),e.exports=b},"./MapStore2/web/client/components/resources/modals/ConfirmModal.jsx":function(e,t,n){var r=n("./node_modules/react/index.js"),o=n("./MapStore2/web/client/components/misc/Modal.jsx"),i=n("./MapStore2/web/client/components/I18N/Message.jsx"),a=n("./node_modules/react-bootstrap/es/index.js").Button;e.exports=function(e){var t=e.title,n=void 0===t?r.createElement(i,{msgId:"warning"}):t,s=e.cancelText,l=void 0===s?r.createElement(i,{msgId:"no"}):s,c=e.confirmText,u=void 0===c?r.createElement(i,{msgId:"yes"}):c,p=e.onClose,d=void 0===p?function(){}:p,f=e.onConfirm,m=void 0===f?function(){}:f,y=e.show,b=e.children,g=e.className,h=void 0===g?"":g,v=e.buttonSize,S=e.running,w=void 0!==S&&S,O=r.createElement("span",{role:"footer"},r.createElement("div",{style:{float:"left"}}),r.createElement(a,{disabled:w,className:h,key:"confirmButton",bsStyle:"primary",bsSize:v,onClick:function(){m()}},u),r.createElement(a,{key:"cancelButton",bsSize:v,disabled:w,onClick:d},l));return r.createElement(o,{show:y,onHide:d},r.createElement(o.Header,{key:"dialogHeader",closeButton:!0},r.createElement(o.Title,null,n)),r.createElement(o.Body,null,b),r.createElement(o.Footer,null,O))}},"./MapStore2/web/client/components/resources/modals/Save.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=n("./node_modules/prop-types/index.js"),y=n("./node_modules/react/index.js"),b=n("./node_modules/lodash/lodash.js").get,g=n("./MapStore2/web/client/components/misc/Portal.jsx"),h=n("./MapStore2/web/client/components/misc/ResizableModal.jsx"),v=n("./node_modules/react-bootstrap/es/index.js").Grid,S=n("./MapStore2/web/client/components/I18N/Message.jsx"),w=n("./MapStore2/web/client/components/resources/modals/fragments/ErrorBox.jsx"),O=n("./MapStore2/web/client/components/resources/modals/fragments/MainForm.jsx"),j=n("./MapStore2/web/client/components/resources/modals/enhancers/ruleEditor.js")(n("./MapStore2/web/client/components/resources/modals/fragments/PermissionEditor.jsx")),E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(u,e);var t,n,r,o=c(u);function u(){var e;a(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return f(p(e=o.call.apply(o,[this].concat(n))),"onCloseMapPropertiesModal",(function(){e.props.onClose()})),f(p(e),"onSave",(function(){e.props.onSave(i(i({},e.props.resource),{},{permission:e.props.rules}))})),f(p(e),"isValidForm",(function(){return b(e.props.resource,"metadata.name")&&(!e.props.enableFileDrop||"accepted"===e.props.fileDropStatus)})),e}return t=u,(n=[{key:"render",value:function(){var e=this,t=!this.props.disablePermission&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(!e)return!1;var n=e.role,r=e.name;if("ADMIN"===n)return!0;var o=t&&t.attributes&&t.attributes.owner;return!o||o===r}(this.props.user,this.props.resource);return y.createElement(g,{key:"saveDialog"},y.createElement(h,{loading:this.props.loading,title:y.createElement(S,{msgId:this.props.title}),show:this.props.show,clickOutEnabled:this.props.clickOutEnabled,bodyClassName:"ms-flex modal-properties-container",fitContent:this.props.disablePermission,dialogClassName:this.props.dialogClassName,buttons:[{text:y.createElement(S,{msgId:"close"}),onClick:this.onCloseMapPropertiesModal,disabled:this.props.resource.loading},{text:y.createElement("span",null,y.createElement(S,{msgId:this.props.saveButtonLabel})),onClick:function(){e.onSave()},disabled:!this.isValidForm()||this.props.loading||!this.props.canSave}],showClose:!this.props.resource.loading,onClose:this.onCloseMapPropertiesModal},y.createElement(v,{fluid:!0},y.createElement("div",{className:"ms-map-properties"},y.createElement(w,{errors:this.props.errors}),y.createElement(O,{resource:this.props.resource,onUpdateLinkedResource:this.props.onUpdateLinkedResource,linkedResources:this.props.linkedResources,enableFileDrop:this.props.enableFileDrop,acceptedDropFileName:this.props.acceptedDropFileName,fileDropLabel:this.props.fileDropLabel,fileDropStatus:this.props.fileDropStatus,fileDropErrorMessage:this.props.fileDropErrorMessage,fileDropClearMessage:this.props.fileDropClearMessage,onMetadataChanged:this.props.metadataChanged,onFileDrop:this.props.onFileDrop,onFileDropClear:this.props.onFileDropClear,onError:this.props.onError,nameFieldFilter:this.props.nameFieldFilter,onUpdate:this.props.onUpdate}),!!t&&y.createElement(j,{rules:this.props.rules,onUpdateRules:this.props.onUpdateRules,availableGroups:this.props.availableGroups})))))}}])&&s(t.prototype,n),r&&s(t,r),u}(y.Component);f(E,"propTypes",{show:m.bool,loading:m.bool,title:m.string,clickOutEnabled:m.bool,canSave:m.bool,errors:m.array,rules:m.array,enableFileDrop:m.bool,saveButtonLabel:m.string,onSave:m.func,acceptedDropFileName:m.string,fileDropLabel:m.string,fileDropStatus:m.string,fileDropErrorMessage:m.element,fileDropClearMessage:m.element,onUpdateRules:m.func,nameFieldFilter:m.func,resource:m.object,linkedResources:m.object,style:m.object,modalSize:m.string,onError:m.func,onUpdate:m.func,onUpdateLinkedResource:m.func,onClose:m.func,onFileDrop:m.func,onFileDropClear:m.func,metadataChanged:m.func,disablePermission:m.bool,availablePermissions:m.arrayOf(m.string),availableGroups:m.arrayOf(m.object),user:m.object,dialogClassName:m.string}),f(E,"contextTypes",{messages:m.object}),f(E,"defaultProps",{id:"MetadataModal",title:"saveDialog.title",saveButtonLabel:"save",modalSize:"",resource:{},linkedResources:{},onUpdateRules:function(){},nameFieldFilter:function(){},metadataChanged:function(){},metadata:{name:"",description:""},options:{},style:{},onClose:function(){},onError:function(){},onUpdate:function(){},onUpdateLinkedResource:function(){},onSave:function(){},disablePermission:!1,availablePermissions:["canRead","canWrite"],availableGroups:[],canSave:!0,user:{},dialogClassName:""}),e.exports=E},"./MapStore2/web/client/components/resources/modals/enhancers/handleErrors.jsx":function(e,t,n){function r(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var i=n("./node_modules/recompose/es/Recompose.js"),a=i.withStateHandlers,s=i.withProps,l=i.compose;e.exports=l(a((function(){return{}}),{onError:function(){return function(e){return{formErrors:e}}}}),s((function(e){var t=e.errors,n=void 0===t?[]:t,o=e.formErrors,i=void 0===o?[]:o;return{errors:[].concat(r(n),r(i))}})))},"./MapStore2/web/client/components/resources/modals/enhancers/handlePermission.jsx":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n("./node_modules/rxjs/Rx.js"),s=n("./node_modules/recompose/es/Recompose.js"),l=s.mapPropsStream,c=s.compose,u=s.branch,p=s.withStateHandlers,d=n("./MapStore2/web/client/api/GeoStoreDAO.js"),f=function(e){return l((function(t){return t.combineLatest(t.take(1).switchMap((function(t){var n=t.user;return a.Observable.defer((function(){return e.getAvailableGroups(n)})).map((function(e){return{availableGroups:e}})).startWith({loading:!0})})).startWith({}).catch((function(){return a.Observable.of({})})),(function(e,t){return o(o({},e),t)}))}))},m=function(e){return l((function(t){return t.combineLatest(t.distinctUntilKeyChanged("resource").pluck("resource").filter((function(e){return e.id})).pluck("id").distinctUntilChanged().switchMap((function(t){return a.Observable.defer((function(){return e.getResourcePermissions(t)})).map((function(e){return{rules:e}})).startWith({loading:!0})})).startWith({}).catch((function(){return a.Observable.of({})})),(function(e,t){return o(o({},e),t)}))}))},y=p((function(){return{}}),{onUpdateRules:function(){return function(e){return{rules:e}}}});e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d;return u((function(e){return!e.disablePermission}),c(f(e),m(e),y))}},"./MapStore2/web/client/components/resources/modals/enhancers/handleResourceData.jsx":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n("./node_modules/react/index.js"),s=n("./node_modules/recompose/es/Recompose.js"),l=s.compose,c=s.withStateHandlers,u=s.withState,p=s.branch,d=s.withHandlers,f=s.renderComponent,m=n("./MapStore2/web/client/utils/ImmutableUtils.js").set,y=n("./MapStore2/web/client/components/I18N/Message.jsx"),b=n("./MapStore2/web/client/components/resources/modals/ConfirmModal.jsx");e.exports=l(c((function(e){var t=e.resource,n=void 0===t?{}:t;return{originalData:n,metadata:{name:n.name,description:n.description},attributes:o(o({},n.attributes),{},{context:n.context||n.attributes&&n.attributes.context}),resource:{id:n.id,attributes:o(o({},n.attributes),{},{context:n.context||n.attributes&&n.attributes.context}),metadata:{name:n.name,description:n.description},createdAt:n.creation,modifiedAt:n.lastUpdate}}}),{onUpdate:function(e){var t=e.resource;return function(e,n){return{hasChanges:!0,resource:m(e,n,t)}}},onUpdateLinkedResource:function(e){var t=e.linkedResources,n=void 0===t?{}:t;return function(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return{linkedResources:m(e,o({category:r,data:t},i),n)}}}}),u("confirmClose","onCloseConfirm",!1),p((function(e){return e.confirmClose}),f((function(e){var t=e.onCloseConfirm,n=e.onClose;return a.createElement(b,{show:!0,confirmText:a.createElement(y,{msgId:"saveDialog.close"}),cancelText:a.createElement(y,{msgId:"saveDialog.cancel"}),onConfirm:function(){return n()},onClose:function(){return t(!1)}},a.createElement(y,{msgId:"map.details.fieldsChanged"}),a.createElement("br",null),a.createElement(y,{msgId:"map.details.sureToClose"}))}))),d({onClose:function(e){var t=e.hasChanges,n=e.onClose,r=void 0===n?function(){}:n,o=e.onCloseConfirm,i=void 0===o?function(){}:o;return function(){return t?i(!0):r()}}}),d({onSave:function(e){var t=e.onSave,n=void 0===t?function(){}:t,r=e.category,i=void 0===r?"DASHBOARD":r,a=e.data,s=e.additionalAttributes,l=void 0===s?{}:s,c=e.linkedResources;return function(e){return n(o(o({category:i,linkedResources:c,data:a},e),{},{attributes:o(o({},e.attributes),l)}))}}}))},"./MapStore2/web/client/components/resources/modals/enhancers/handleSaveModal.js":function(e,t,n){var r=n("./MapStore2/web/client/components/resources/modals/enhancers/handleResourceData.jsx"),o=n("./MapStore2/web/client/components/resources/modals/enhancers/handlePermission.jsx"),i=n("./MapStore2/web/client/components/resources/modals/enhancers/handleErrors.jsx"),a=n("./node_modules/recompose/es/Recompose.js"),s=a.compose,l=a.branch,c=a.renderNothing;e.exports=s(l((function(e){return!e.show}),c),r,o(),i)},"./MapStore2/web/client/components/resources/modals/enhancers/ruleEditor.js":function(e,t,n){var r=n("./node_modules/recompose/es/Recompose.js"),o=r.compose,i=r.withState;e.exports=o(i("newGroup","onNewGroupChoose"),i("newPermission","onNewPermissionChoose"))},"./MapStore2/web/client/components/resources/modals/fragments/ErrorBox.jsx":function(e,t,n){var r=n("./node_modules/react/index.js"),o={FORMAT:"map.errorFormat",SIZE:"map.errorSize",409:"dashboard.errors.resourceAlreadyExists",403:"dashboard.errors.forbidden",405:"dashboard.errors.forbidden405"},i=n("./MapStore2/web/client/components/I18N/Message.jsx"),a=n("./node_modules/react-bootstrap/es/index.js").Row,s=function(e){return"string"==typeof e?e:e.statusText},l=function(e){return"string"==typeof e?void 0:e};e.exports=function(e){var t=e.errors,n=void 0===t?[]:t;return r.createElement(a,null,n.length>0?r.createElement("div",{className:"dropzone-errorBox alert-danger"},n.map((function(e){return r.createElement("div",{key:"error"+s(e),className:"error"+s(e)},function(e){var t,n="string"==typeof(t=e)?t:t.status;return r.createElement(i,{msgId:o[n]||s(e),msgParams:l(e)})}(e))}))):null)}},"./MapStore2/web/client/components/resources/modals/fragments/MainForm.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u=n("./node_modules/react/index.js"),p=n("./MapStore2/web/client/components/I18N/Message.jsx"),d=n("./node_modules/react-bootstrap/es/index.js"),f=d.Row,m=d.Col,y=n("./MapStore2/web/client/components/resources/forms/Metadata.jsx"),b=n("./MapStore2/web/client/components/resources/forms/Thumbnail.jsx"),g=n("./MapStore2/web/client/components/resources/forms/FileDrop.jsx").default,h=n("./node_modules/uuid/v1.js");e.exports=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(c,e);var t,n,r,l=s(c);function c(){return o(this,c),l.apply(this,arguments)}return t=c,(n=[{key:"render",value:function(){var e=this.props,t=e.resource,n=e.linkedResources,r=void 0===n?{}:n,o=e.enableFileDrop,i=void 0!==o&&o,a=e.acceptedDropFileName,s=e.fileDropLabel,l=e.fileDropStatus,c=e.fileDropErrorMessage,d=e.fileDropClearMessage,v=e.onFileDrop,S=void 0===v?function(){}:v,w=e.onFileDropClear,O=void 0===w?function(){}:w,j=e.onError,E=void 0===j?function(){}:j,x=e.onUpdate,P=void 0===x?function(){}:x,C=e.nameFieldFilter,T=void 0===C?function(){}:C,M=e.onUpdateLinkedResource,_=void 0===M?function(){}:M;return u.createElement(f,null,i&&u.createElement(m,{xs:12},u.createElement(g,{acceptedFileName:a,label:s,status:l,errorMessage:c,clearMessage:d,onDrop:S,onClear:O,onError:E})),u.createElement(m,{xs:12},u.createElement(b,{resource:t,thumbnail:r&&r.thumbnail&&r.thumbnail.data||t&&t.attributes&&t.attributes.thumbnail,onError:E,onRemove:function(){return _("thumbnail","NODATA","THUMBNAIL",{tail:"/raw?decode=datauri&v=".concat(h())})},onUpdate:function(e){return _("thumbnail",e,"THUMBNAIL",{tail:"/raw?decode=datauri&v=".concat(h())})}})),u.createElement(m,{xs:12},u.createElement(y,{role:"body",ref:"mapMetadataForm",onChange:P,resource:t,nameFieldText:u.createElement(p,{msgId:"saveDialog.name"}),descriptionFieldText:u.createElement(p,{msgId:"saveDialog.description"}),nameFieldFilter:T,createdAtFieldText:u.createElement(p,{msgId:"saveDialog.createdAt"}),modifiedAtFieldText:u.createElement(p,{msgId:"saveDialog.modifiedAt"}),namePlaceholderText:"saveDialog.namePlaceholder",descriptionPlaceholderText:"saveDialog.descriptionPlaceholder"})))}}])&&i(t.prototype,n),r&&i(t,r),c}(u.Component)},"./MapStore2/web/client/components/resources/modals/fragments/PermissionEditor.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=n("./node_modules/react/index.js"),f=n("./node_modules/prop-types/index.js"),m=n("./node_modules/object-assign/index.js"),y=n("./node_modules/lodash/lodash.js"),b=n("./node_modules/react-select/dist/react-select.es.js").default,g=n("./node_modules/react-spinkit/dist/index.js"),h=n("./node_modules/react-bootstrap/es/index.js"),v=h.Table,S=h.Button,w=h.Glyphicon,O=n("./MapStore2/web/client/components/I18N/Message.jsx"),j=n("./MapStore2/web/client/utils/LocaleUtils.js"),E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(u,e);var t,n,r,l=s(u);function u(){var e;o(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return p(c(e=l.call.apply(l,[this].concat(n))),"onGroupChange",(function(t){e.props.onNewGroupChoose(y.find(e.props.availableGroups,(function(e){return e.id===t.value})))})),p(c(e),"onAddPermission",(function(){e.isPermissionPresent(e.props.newGroup.groupName)?e.props.onUpdateRules(e.props.rules.map((function(t){return t.group&&t.group.groupName===e.props.newGroup.groupName?"canWrite"===e.props.newPermission?m({},t,{canRead:!0,canWrite:!0}):m({},t,{canRead:!0,canWrite:!1}):t}),c(e)).filter((function(e){return e.canRead||e.canWrite}))):e.props.onUpdateRules(e.props.rules.concat([{canRead:!0,canWrite:"canWrite"===e.props.newPermission,group:e.props.newGroup}]))})),p(c(e),"onChangePermission",(function(t,n){e.props.onUpdateRules(e.props.rules.filter((function(e){return!("delete"===n&&e.group&&e.group.groupName===t)})).map((function(e){return e.group&&e.group.groupName===t?m({},e,"canWrite"===n?{canRead:!0,canWrite:!0}:"canRead"===n?{canRead:!0,canWrite:!1}:{canRead:!1,canWrite:!1}):e})).filter((function(e){return e.canRead||e.canWrite})))})),p(c(e),"getSelectableGroups",(function(){return e.props.availableGroups&&e.props.availableGroups.filter((function(t){return!e.isPermissionPresent(t.groupName)})).map((function(e){return{label:e.groupName,value:e.id}}))})),p(c(e),"getPermissionLabel",(function(t){switch(t){case"canRead":return j.getMessageById(e.context.messages,"map.permissions.canView");case"canWrite":return j.getMessageById(e.context.messages,"map.permissions.canWrite");default:return t}})),p(c(e),"getAvailablePermissions",(function(){return e.props.availablePermissions.map((function(t){return{value:t,label:e.getPermissionLabel(t)}}))})),p(c(e),"renderPermissionRows",(function(){var t=e.props.rules.filter((function(e){return e.group}));return 0===t.length?d.createElement("tr",null,d.createElement("td",{colSpan:"3"},d.createElement(O,{msgId:"map.permissions.noRules"}))):t.map((function(t,n){var r=t.canWrite,o=t.group;return d.createElement("tr",{key:n,className:n/2==0?"even":"odd"},d.createElement("td",null,o.groupName),d.createElement("td",{style:{width:"150px"}},d.createElement(b,{ref:"permChoice"+n,onChange:function(t){e.onChangePermission.call(c(e),o.groupName,t.value)},clearable:!1,options:e.getAvailablePermissions(),value:r?"canWrite":"canRead"})),d.createElement("td",{style:{width:"50px"}},d.createElement(S,{key:"deleteButton"+n,ref:"deleteButton",bsStyle:"danger",disabled:e.props.disabled,onClick:e.onChangePermission.bind(c(e),o.groupName,"delete")},d.createElement(w,{glyph:"1-close"}))))}))})),p(c(e),"isPermissionPresent",(function(t){return e.props.rules&&y.findIndex(e.props.rules,(function(e){return e.group&&e.group.groupName===t}))>=0})),e}return t=u,(n=[{key:"render",value:function(){var e=this;return d.createElement("div",null,d.createElement(v,{className:"permissions-table",stripped:!0,condensed:!0,hover:!0},d.createElement("thead",null,d.createElement("tr",null,d.createElement("th",{colSpan:"3"},d.createElement(O,{msgId:"map.permissions.title"})))),d.createElement("tbody",null,this.props.loading?d.createElement("tr",null,d.createElement("td",{colSpan:"3"},d.createElement("div",null,d.createElement(g,{noFadeIn:!0,overrideSpinnerClassName:"spinner",spinnerName:"circle"})))):this.renderPermissionRows(),d.createElement("tr",null,d.createElement("th",{colSpan:"3"},d.createElement(O,{msgId:"map.permissions.addRule"}))),d.createElement("tr",{key:"addRowKey"},d.createElement("td",null,d.createElement(b,{noResultsText:j.getMessageById(this.context.messages,"map.permissions.noResult"),ref:"newGroup",isLoading:!this.getSelectableGroups(),clearable:!1,placeholder:j.getMessageById(this.context.messages,"map.permissions.selectGroup"),options:this.getSelectableGroups(),value:this.props.newGroup&&this.props.newGroup.id,onChange:this.onGroupChange})),d.createElement("td",{style:{width:"150px"}},d.createElement(b,{ref:"newChoice",clearable:!1,options:this.getAvailablePermissions(),value:this.props.newPermission||y.head(this.props.availablePermissions),onChange:function(t){e.props.onNewPermissionChoose(t&&t.value)}})),d.createElement("td",{style:{width:"50px"}},d.createElement(S,{ref:"buttonAdd",disabled:this.props.disabled||!this.props.newGroup||this.isPermissionPresent(this.props.newGroup&&this.props.newGroup.groupName),bsSize:"small",bsStyle:"success",onClick:this.onAddPermission},d.createElement(w,{style:{fontSize:"22px"},glyph:"plus"})))))))}},{key:"disablePermission",value:function(e,t){return e||!t}}])&&i(t.prototype,n),r&&i(t,r),u}(d.Component);p(E,"propTypes",{id:f.string,user:f.object,loading:f.bool,onUpdateRules:f.func,buttonSize:f.string,disabled:f.bool,style:f.object,fluid:f.bool,onErrorCurrentMap:f.func,onUpdateCurrentMap:f.func,onNewGroupChoose:f.func,onNewPermissionChoose:f.func,availablePermissions:f.arrayOf(f.string),availableGroups:f.arrayOf(f.object),updatePermissions:f.func,rules:f.arrayOf(f.object),newGroup:f.object,newPermission:f.string}),p(E,"contextTypes",{messages:f.object}),p(E,"defaultProps",{disabled:!1,id:"PermissionEditor",onUpdateRules:function(){},onNewGroupChoose:function(){},onNewPermissionChoose:function(){},user:{name:"Guest"},style:{},buttonSize:"small",onErrorCurrentMap:function(){},onUpdateCurrentMap:function(){},availablePermissions:["canRead","canWrite"],availableGroups:[],updatePermissions:function(){},rules:[]}),e.exports=E},"./MapStore2/web/client/components/style/BandSelector.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=n("./node_modules/prop-types/index.js"),f=n("./node_modules/react/index.js"),m=n("./node_modules/react-bootstrap/es/index.js"),y=m.Grid,b=m.Row,g=m.Col,h=n("./node_modules/react-widgets/lib/index.js").Combobox;n("./node_modules/react-widgets/lib/localizers/simple-number.js")();var v=n("./node_modules/react-widgets/lib/index.js").NumberPicker;n("./node_modules/react-widgets/lib/less/react-widgets.less");var S=n("./MapStore2/web/client/components/I18N/Message.jsx"),w=n("./MapStore2/web/client/utils/LocaleUtils.js"),O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(u,e);var t,n,r,c=l(u);function u(){return i(this,u),c.apply(this,arguments)}return t=u,(n=[{key:"render",value:function(){var e=this;return f.createElement(y,{fluid:!0},f.createElement(b,null,f.createElement(g,{xs:4},f.createElement("label",null,f.createElement(S,{msgId:"bandselector.band"}))," "),f.createElement(g,{xs:4},f.createElement("label",null,f.createElement(S,{msgId:"bandselector.enhancement"}))),"GammaValue"===this.props.contrast?f.createElement(g,{xs:4}," ",f.createElement("label",null,f.createElement(S,{msgId:"bandselector.value"}))," "):null,"Normalize"===this.props.contrast?f.createElement(g,{xs:4},f.createElement("label",null,f.createElement(S,{msgId:"bandselector.algorithmTitle"}))):null),f.createElement(b,null,f.createElement(g,{xs:4},f.createElement(h,o({data:this.props.bands,value:this.props.band,onChange:function(t){return e.props.onChange("band",t)}},this.props.bandsComboOptions))),f.createElement(g,{xs:4},f.createElement(h,{data:[{value:"none",name:w.getMessageById(this.context.messages,"bandselector.enha.none")},{value:"Normalize",name:w.getMessageById(this.context.messages,"bandselector.enha.Normalize")},{value:"Histogram",name:w.getMessageById(this.context.messages,"bandselector.enha.Histogram")},{value:"GammaValue",name:w.getMessageById(this.context.messages,"bandselector.enha.GammaValue")}],valueField:"value",textField:"name",value:this.props.contrast,onChange:function(t){return e.props.onChange("contrast",t.value)}})),"GammaValue"===this.props.contrast?f.createElement(g,{xs:4},f.createElement(v,{format:"-#,###.##",precision:3,step:.1,min:0,value:this.props.gammaValue,onChange:function(t){return e.props.onChange("gammaValue",t)}})):null,"Normalize"===this.props.contrast?f.createElement(g,{xs:4},f.createElement(h,{data:[{value:"none",name:w.getMessageById(this.context.messages,"bandselector.algorithm.none")},{value:"StretchToMinimumMaximum",name:w.getMessageById(this.context.messages,"bandselector.algorithm.StretchToMinimumMaximum")},{value:"ClipToMinimumMaximum",name:w.getMessageById(this.context.messages,"bandselector.algorithm.ClipToMinimumMaximum")},{value:"ClipToZero",name:w.getMessageById(this.context.messages,"bandselector.algorithm.ClipToZero")}],valueField:"value",textField:"name",value:this.props.algorithm,onChange:function(t){return e.props.onChange("algorithm",t.value)}})):null),"Normalize"===this.props.contrast&&"none"!==this.props.algorithm?f.createElement(b,null,f.createElement(g,{xsOffset:2,xs:4},f.createElement("label",null,f.createElement(S,{msgId:"bandselector.min"}))),f.createElement(g,{xs:4},f.createElement("label",null,f.createElement(S,{msgId:"bandselector.max"})))):null,"Normalize"===this.props.contrast&&"none"!==this.props.algorithm?f.createElement(b,null,f.createElement(g,{xsOffset:2,xs:4},f.createElement(v,{format:"-#,###.##",precision:3,max:this.props.max-1,value:this.props.min,onChange:function(t){return e.props.onChange("min",t)}})),f.createElement(g,{xs:4},f.createElement(v,{format:"-#,###.##",precision:3,min:this.props.min+1,value:this.props.max,onChange:function(t){return e.props.onChange("max",t)}}))):null)}}])&&a(t.prototype,n),r&&a(t,r),u}(f.Component);p(O,"propTypes",{band:d.oneOfType([d.number,d.string]),bands:d.array,min:d.number,max:d.number,contrast:d.oneOf(["none","Normalize","Histogram","GammaValue"]),algorithm:d.oneOf(["none","StretchToMinimumMaximum","ClipToMinimumMaximum","ClipToZero"]),gammaValue:d.number,onChange:d.func,bandsComboOptions:d.object}),p(O,"contextTypes",{messages:d.object}),p(O,"defaultProps",{band:"1",contrast:"none",algorithm:"none",gammaValue:1,min:0,max:255,bandsComboOptions:{},onChange:function(){},bands:["1","2","3"]}),e.exports=O},"./MapStore2/web/client/components/style/ColorMapGrid.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=n("./node_modules/prop-types/index.js"),f=n("./node_modules/react/index.js"),m=n("./node_modules/lodash/lodash.js").isEqual,y=n("./node_modules/ag-grid-react/main.js").AgGridReact,b=n("./MapStore2/web/client/components/style/ColorMapGridComponents/ReactCellRendererFactoryParams.jsx"),g=n("./MapStore2/web/client/components/style/ColorMapGridComponents/ColorPickerRenderer.jsx"),h=n("./node_modules/object-assign/index.js"),v=n("./MapStore2/web/client/components/style/ColorMapGridComponents/NumberRenderer.jsx"),S=n("./MapStore2/web/client/utils/LocaleUtils.js");n("./node_modules/ag-grid-community/dist/styles/ag-grid.css"),n("./node_modules/ag-grid-community/dist/styles/ag-theme-blue.css");var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(u,e);var t,n,r,l=s(u);function u(){var e;o(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return p(c(e=l.call.apply(l,[this].concat(n))),"onGridReady",(function(t){e.api=t.api,e.api.sizeColumnsToFit(),e.columnApi=t.columnApi})),p(c(e),"selectEntry",(function(t){t&&e.props.selectEntry(t.node.childIndex)})),p(c(e),"valueChanged",(function(){var t=[];e.api.getModel().forEachNode((function(e){t.push(e.data)})),e.props.valueChanged(t)})),p(c(e),"changeColor",(function(t,n){var r=[];e.api.getModel().forEachNode((function(e,o){var i=o===t.childIndex?h({},e.data,n):e.data;r.push(i)})),e.props.valueChanged(r)})),p(c(e),"changeQuantity",(function(t,n){var r=[];e.api.getModel().forEachNode((function(e,o){var i=o===t.childIndex?h({},e.data,{quantity:n}):e.data;r.push(i)})),e.props.valueChanged(r)})),e}return t=u,(n=[{key:"shouldComponentUpdate",value:function(e){return!m(e.entries,this.props.entries)}},{key:"componentDidUpdate",value:function(){this.api.sizeColumnsToFit()}},{key:"render",value:function(){return f.createElement("div",{fluid:!0,style:this.props.style,className:"ag-blue"},f.createElement(y,{columnDefs:[{width:50,suppressSizeToFit:!0,headerName:S.getMessageById(this.context.messages,"colormapgrid.color"),field:"color",cellRenderer:b(g,{onChangeColor:this.changeColor})},{width:135,headerName:S.getMessageById(this.context.messages,"colormapgrid.quantity"),field:"quantity",cellRenderer:b(v,{onChangeValue:this.changeQuantity,errorMessage:S.getMessageById(this.context.messages,"colormapgrid.minmaxerror")})},{width:160,headerName:S.getMessageById(this.context.messages,"colormapgrid.label"),field:"label",editable:!0}],rowHeight:32,rowData:this.props.entries.slice(),rowSelection:"single",onRowSelected:this.selectEntry,onCellValueChanged:this.valueChanged,enableColResize:!0,showToolPanel:!1,rowDeselection:!0,onGridReady:this.onGridReady,suppressCellSelection:!0}))}}])&&i(t.prototype,n),r&&i(t,r),u}(f.Component);p(w,"propTypes",{entries:d.array,style:d.object,selectEntry:d.func,valueChanged:d.func}),p(w,"contextTypes",{messages:d.object}),p(w,"defaultProps",{entries:[],style:{height:"200px"},selectEntry:function(){},valueChanged:function(){}}),e.exports=w},"./MapStore2/web/client/components/style/ColorMapGridComponents/ColorPickerRenderer.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=n("./node_modules/prop-types/index.js"),f=n("./node_modules/react/index.js"),m=n("./node_modules/react-color/lib/index.js").SketchPicker;n("./MapStore2/web/client/components/style/ColorMapGridComponents/colorenderer.css");var y=n("./MapStore2/web/client/utils/AgentUtils.js").getWindowSize,b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(u,e);var t,n,r,l=s(u);function u(){var e;o(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return p(c(e=l.call.apply(l,[this].concat(n))),"state",{displayColorPicker:!1}),p(c(e),"onChangeColor",(function(){if(e.state.color){var t=1!==e.state.color.rgb.a?e.state.color.rgb.a:void 0,n=0===e.state.color.hex.indexOf("#")?e.state.color.hex:"#"+e.state.color.hex;e.props.onChangeColor(e.props.params.node,{color:n,opacity:t})}})),p(c(e),"getBackgroundColor",(function(t){var n="blue";if(t&&t.color){var r=e.hexToRgb(t.color),o=void 0!==t.opacity?t.opacity:1;n=r?"rgba(".concat(r.r,", ").concat(r.g,", ").concat(r.b,", ").concat(o,")"):"blue"}return n})),p(c(e),"calculateTop",(function(e){var t=y().maxHeight;return(e+300>t?t-305:e)-300})),p(c(e),"hexToRgb",(function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null})),e}return t=u,(n=[{key:"render",value:function(){var e=this,t=this.props.params.data,n=t&&t.color?this.hexToRgb(t.color):{r:0,g:0,b:255};n.a=void 0!==t.opacity?t.opacity:1;var r=this.getBackgroundColor(t);return f.createElement("div",null,f.createElement("div",{className:"cpr-color",style:{backgroundColor:r},onClick:function(t){e.props.disabled||e.setState({displayColorPicker:!e.state.displayColorPicker,y:t.pageY})}}),this.state.displayColorPicker?f.createElement("div",{className:"cpe-popover",style:{top:this.calculateTop(this.state.y)}},f.createElement("div",{className:"cpe-cover",onClick:function(){e.setState({displayColorPicker:!1}),e.onChangeColor()}}),f.createElement(m,{color:this.state.color?this.state.color.rgb:n,onChangeComplete:function(t){e.setState({color:t})}})):null)}}])&&i(t.prototype,n),r&&i(t,r),u}(f.Component);p(b,"propTypes",{params:d.object,onChangeColor:d.func,disabled:d.bool}),p(b,"defaultProps",{disabled:!1,onChangeColor:function(){}}),e.exports=b},"./MapStore2/web/client/components/style/ColorMapGridComponents/NumberRenderer.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=n("./node_modules/prop-types/index.js"),f=n("./node_modules/react/index.js"),m=n("./node_modules/react-dom/index.js").findDOMNode,y=n("./node_modules/react-bootstrap/es/index.js"),b=y.Popover,g=y.Label,h=y.Overlay;n("./node_modules/react-widgets/lib/localizers/simple-number.js")();var v=n("./node_modules/react-widgets/lib/index.js").NumberPicker;n("./MapStore2/web/client/components/style/ColorMapGridComponents/numberpicker.css");var S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(u,e);var t,n,r,l=s(u);function u(){var e;o(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return p(c(e=l.call.apply(l,[this].concat(n))),"state",{displayNumberPicker:!1,showError:!1}),p(c(e),"getRange",(function(){var t=[];e.props.params.api.forEachNode((function(e){t.push(e.data)}));var n=e.props.params.node.childIndex;return{min:t[n-1]?t[n-1].quantity+.01:-1/0,max:t[n+1]?t[n+1].quantity-.01:1/0}})),p(c(e),"cellClicked",(function(t){e.props.params.value!==t.value&&e.state.displayNumberPicker&&e.stopEditing()})),p(c(e),"stopEditing",(function(){var t=e.getRange(),n=void 0===e.state.value?e.props.params.value:e.state.value;t.min<n&&n<t.max?(e.setState({displayNumberPicker:!1,showError:!1}),n!==e.props.params.value&&e.props.onChangeValue(e.props.params.node,n)):e.setState({showError:!0})})),p(c(e),"changeNumber",(function(t){e.setState({value:t,showError:!1})})),e}return t=u,(n=[{key:"componentDidMount",value:function(){this.props.params.api.addEventListener("cellClicked",this.cellClicked)}},{key:"componentWillUnmount",value:function(){this.props.params.api.removeEventListener("cellClicked",this.cellClicked)}},{key:"render",value:function(){var e=this;return f.createElement("div",{onClick:function(){e.state.displayNumberPicker||e.setState({displayNumberPicker:!e.state.displayNumberPicker})}},this.state.displayNumberPicker?f.createElement("div",null,f.createElement("div",{style:{position:"fixed",top:0,right:0,bottom:0,left:0},onClick:this.stopEditing}),f.createElement("div",{className:"numberpicker",onClickCapture:function(e){e.stopPropagation()}},f.createElement(v,{ref:"colorMapNumberPicker",format:"-#,###.##",precision:3,value:void 0===this.state.value?this.props.params.value:this.state.value,onChange:this.changeNumber}),f.createElement(h,{target:function(){return m(e.refs.colorMapNumberPicker)},show:this.state.showError,placement:"top"},f.createElement(b,{id:"quantitypickererror",style:{maxWidht:400}},f.createElement(g,{bsStyle:"danger"},this.props.errorMessage))))):f.createElement("span",null,this.props.params.value.toFixed?this.props.params.value.toFixed(2):this.props.params.value))}}])&&i(t.prototype,n),r&&i(t,r),u}(f.Component);p(S,"propTypes",{params:d.object,onChangeValue:d.func,errorMessage:d.string}),p(S,"defaultProps",{onChangeValue:function(){},errorMessage:"Value not valid"}),e.exports=S},"./MapStore2/web/client/components/style/ColorMapGridComponents/ReactCellRendererFactoryParams.jsx":function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var o=n("./node_modules/react/index.js"),i=n("./node_modules/react-dom/index.js");e.exports=function(e,t){return function(n){return n.eParentOfValue.addElementAttachedListener&&n.eParentOfValue.addElementAttachedListener((function(a){i.render(o.createElement(e,r({params:n},t)),a),n.api.addVirtualRowListener("virtualRowRemoved",n.rowIndex,(function(){i.unmountComponentAtNode(a)}))})),null}}},"./MapStore2/web/client/components/style/ColorMapGridComponents/colorenderer.css":function(e,t,n){var r=n("./node_modules/css-loader/index.js!./node_modules/postcss-loader/src/index.js?!./MapStore2/web/client/components/style/ColorMapGridComponents/colorenderer.css");"string"==typeof r&&(r=[[e.i,r,""]]);n("./node_modules/style-loader/addStyles.js")(r,{});r.locals&&(e.exports=r.locals)},"./MapStore2/web/client/components/style/ColorMapGridComponents/numberpicker.css":function(e,t,n){var r=n("./node_modules/css-loader/index.js!./node_modules/postcss-loader/src/index.js?!./MapStore2/web/client/components/style/ColorMapGridComponents/numberpicker.css");"string"==typeof r&&(r=[[e.i,r,""]]);n("./node_modules/style-loader/addStyles.js")(r,{});r.locals&&(e.exports=r.locals)},"./MapStore2/web/client/components/style/ColorPicker.jsx":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/react/index.js"),o=n.n(r),i=n("./node_modules/prop-types/index.js"),a=n.n(i),s=n("./node_modules/lodash/isFunction.js"),l=n.n(s),c=n("./node_modules/react-color/lib/index.js"),u=n("./node_modules/tinycolor2/tinycolor.js"),p=n.n(u),d=n("./node_modules/react-dom/index.js"),f=n("./MapStore2/web/client/utils/ConfigUtils.js");function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function S(e){var t=e.value,n=e.format,i=e.onChangeColor,a=e.text,s=e.line,u=e.disabled,f=e.pickerProps,y=e.containerNode,g=e.onOpen,v=e.placement,S={picker:{opacity:0},arrow:{opacity:0},overlay:{}},w=h(Object(r.useState)(),2),O=w[0],j=w[1],E=h(Object(r.useState)(S),2),x=E[0],P=E[1],C=h(Object(r.useState)(),2),T=C[0],M=C[1],_=p()(t).toString(),A=l()(y)?y():y;Object(r.useEffect)((function(){var e=O&&p()(O).toString();e&&_&&_!==e&&j(t)}),[_]),Object(r.useEffect)((function(){g(T),T||P(S)}),[T]);var R=Object(r.useRef)(),I=Object(r.useRef)();function D(){var e,t,n,r,o,i,a;if("center"===v)return{picker:{},overlay:{backgroundColor:"rgba(0, 0, 0, 0.4)"},arrow:{opacity:0}};var s=null==R||null===(e=R.current)||void 0===e||null===(t=e.getBoundingClientRect)||void 0===t?void 0:t.call(e),l=null==I||null===(n=I.current)||void 0===n||null===(r=n.getBoundingClientRect)||void 0===r?void 0:r.call(n),c=null==I||null===(o=I.current)||void 0===o||null===(i=o.querySelector)||void 0===i?void 0:i.call(o,".ms-sketch-picker"),u=null==c||null===(a=c.getBoundingClientRect)||void 0===a?void 0:a.call(c);if(s&&l&&u){var p,d,f,m,y=u.width,b=u.height,g=l.top,h=l.left,S=l.width,w=l.height,O=s.top,j=s.left,E=s.width,x=s.height,P=[j+E/2,O+x/2],C=P[0]-h>y/2+10&&h+S-P[0]>y/2+10,T=P[1]-g>b/2+10&&g+w-P[1]>b/2+10,M={top:{filter:function(){return C&&O-g>b+10},styles:function(){return{picker:{position:"absolute",top:O-b-10-g,left:j+E/2-y/2-h},overlay:{},arrow:{top:O+2,left:j+E/2,transform:"translate(-50%, -50%) rotateZ(270deg) translateX(50%)"}}}},right:{filter:function(){return T&&h+S-(j+E)>y+10},styles:function(){return{picker:{position:"absolute",top:O-b/2-g,left:j+E+10-h},overlay:{},arrow:{top:O+x/2,left:j+E-2,transform:"translate(-50%, -50%) rotateZ(0deg) translateX(50%)"}}}},bottom:{filter:function(){return C&&g+w-(O+x)>b+10},styles:function(){return{picker:{position:"absolute",top:O+x+10-g,left:j+E/2-y/2-h},overlay:{},arrow:{top:O+x-2,left:j+E/2,transform:"translate(-50%, -50%) rotateZ(90deg) translateX(50%)"}}}},left:{filter:function(){return T&&j-h>y+10},styles:function(){return{picker:{position:"absolute",top:O-b/2-g,left:j-y-10-h},overlay:{},arrow:{top:O+x/2,left:j+2,transform:"translate(-50%, -50%) rotateZ(180deg) translateX(50%)"}}}}};if(null==M||null===(p=M[v])||void 0===p||null===(d=p.filter)||void 0===d?void 0:d.call(p))return null==M||null===(f=M[v])||void 0===f||null===(m=f.styles)||void 0===m?void 0:m.call(f);if("top"!==v&&M.top.filter())return M.top.styles();if("right"!==v&&M.right.filter())return M.right.styles();if("bottom"!==v&&M.bottom.filter())return M.bottom.styles();if("left"!==v&&M.left.filter())return M.left.styles()}return{picker:{},overlay:{backgroundColor:"rgba(0, 0, 0, 0.4)"},arrow:{opacity:0}}}Object(r.useEffect)((function(){var e=function(){return P(D())};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),Object(r.useEffect)((function(){T&&P(D())}),[T]);var k,L,N=u?" ms-disabled":"",F=o.a.createElement("div",{ref:I,className:"ms-color-picker-overlay",style:b({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",top:0,left:0},null==x?void 0:x.overlay)},o.a.createElement("div",{className:"ms-color-picker-cover",style:{position:"absolute",width:"100%",height:"100%",top:0,left:0},onClick:function(){M(!1),O&&i(n?p()(O).toString(n):O)}}),o.a.createElement(c.SketchPicker,m({},f,{className:"ms-sketch-picker",styles:{picker:b({width:200,padding:"10px 10px 0",boxSizing:"initial"},null==x?void 0:x.picker)},color:p()(O||t).toRgb(),onChange:function(e){return j(e.rgb)}})),o.a.createElement("div",{className:"ms-sketch-picker-arrow",style:b({position:"absolute",borderWidth:12},null==x?void 0:x.arrow)})),U=A?Object(d.createPortal)(F,A):F;return o.a.createElement("div",{className:"ms-color-picker".concat(N)},o.a.createElement("div",{className:"ms-color-picker-swatch",ref:R,style:(k=O||t||"transparent",L=p()(k).toRgbString(),s?{boxSizing:"border-box",border:"4px solid ".concat(L),backgroundColor:"transparent"}:{color:"transparent"===k?"#000000":p.a.mostReadable(L,["#000000"],{includeFallbackColors:!0}).toHexString(),backgroundColor:L}),onClick:function(){u||(M(!T),O&&i(n?p()(O).toString(n):O))}},a),T?U:null)}S.propTypes={value:a.a.oneOfType([a.a.string,a.a.shape({r:a.a.number,g:a.a.number,b:a.a.number,a:a.a.number})]),format:a.a.string,onChangeColor:a.a.func,text:a.a.string,line:a.a.bool,disabled:a.a.bool,pickerProps:a.a.object,containerNode:a.a.oneOfType([a.a.node,a.a.func]),onOpen:a.a.function,placement:a.a.string},S.defaultProps={disabled:!1,line:!1,onChangeColor:function(){},pickerProps:{},onOpen:function(){},containerNode:function(){return document.querySelector("."+(Object(f.getConfigProp)("themePrefix")||"ms2")+" > div")||document.body}},t.default=S},"./MapStore2/web/client/components/style/ColorSelector.jsx":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/react/index.js"),o=n.n(r),i=n("./node_modules/prop-types/index.js"),a=n.n(i),s=n("./node_modules/react-bootstrap/es/index.js"),l=n("./MapStore2/web/client/components/style/ColorPicker.jsx");function c(e){var t=e.color,n=e.format,r=e.line,i=e.onChangeColor,a=e.disableAlpha,c=e.containerNode,u=e.onOpen,p=e.presetColors,d=e.placement;return o.a.createElement("div",{className:"ms-color-selector"},o.a.createElement(l.default,{text:o.a.createElement(s.Glyphicon,{glyph:"dropper"}),format:n,line:r,value:t,onChangeColor:i,pickerProps:{disableAlpha:a,presetColors:p},containerNode:c,onOpen:u,placement:d}))}c.propTypes={color:a.a.oneOfType([a.a.string,a.a.shape({r:a.a.number,g:a.a.number,b:a.a.number,a:a.a.number})]),format:a.a.string,line:a.a.bool,onChangeColor:a.a.func,disableAlpha:a.a.bool,containerNode:a.a.node,onOpen:a.a.func,presetColors:a.a.array,placement:a.a.string},c.defaultProps={line:!1,onChangeColor:function(){},onOpen:function(){}},t.default=c},"./MapStore2/web/client/components/style/EqualInterval.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=n("./node_modules/prop-types/index.js"),f=n("./node_modules/react/index.js"),m=n("./node_modules/react-dom/index.js").findDOMNode,y=n("./node_modules/react-bootstrap/es/index.js"),b=y.Grid,g=y.Row,h=y.Col,v=y.Button,S=y.Popover,w=y.Label,O=y.Overlay,j=n("./node_modules/react-widgets/lib/index.js").Combobox;n("./node_modules/react-widgets/lib/localizers/simple-number.js")();var E=n("./node_modules/react-widgets/lib/index.js").NumberPicker,x=n("./MapStore2/web/client/components/style/EqualIntervalComponents/ColorRampItem.jsx"),P=n("./MapStore2/web/client/components/style/EqualIntervalComponents/ColorRamp.js"),C=n("./MapStore2/web/client/components/style/EqualIntervalComponents/ExtendColorBrewer.js"),T=n("./MapStore2/web/client/components/I18N/Message.jsx"),M=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(u,e);var t,n,r,l=s(u);function u(){var e;o(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return p(c(e=l.call.apply(l,[this].concat(n))),"getColorsSchema",(function(){return e.props.classes?P.filter((function(t){return t.max>=e.props.classes}),c(e)):P})),p(c(e),"getRampValue",(function(){var t=e.props.ramp;return C[e.props.ramp][e.props.classes]||(t=P.filter((function(t){return t.max>=e.props.classes}),c(e))[0].name),t})),p(c(e),"renderErrorPopOver",(function(){return f.createElement(O,{target:function(){return m(e.refs[e.props.error.type])},show:!0,placement:"top"},f.createElement(S,null,f.createElement(w,{bsStyle:"danger"}," ",f.createElement(T,{msgId:e.props.error.msg}))))})),p(c(e),"classifyDisabled",(function(){return!(!e.props.error||!e.props.error.type)})),p(c(e),"generateEqualIntervalRamp",(function(){var t=C[e.getRampValue()][e.props.classes],n=e.props.min,r=(e.props.max-n)/e.props.classes,o=t.map((function(e,t){return{color:e,quantity:n+t*r}}));e.props.onClassify("colorRamp",o)})),p(c(e),"changeMin",(function(t){t<e.props.max?(e.props.error&&e.props.onChange("error",{}),e.props.onChange("min",t)):e.props.onChange("error",{type:"min",msg:"equalinterval.minerror"})})),p(c(e),"changeMax",(function(t){t>e.props.min?(e.props.error&&e.props.onChange("error",{}),e.props.onChange("max",t)):e.props.onChange("error",{type:"max",msg:"equalinterval.maxerror"})})),e}return t=u,(n=[{key:"shouldComponentUpdate",value:function(){return!0}},{key:"render",value:function(){var e=this;return f.createElement(b,{fluid:!0},f.createElement(g,null,f.createElement(h,{xs:4},f.createElement(g,null,f.createElement(h,{xs:12},f.createElement("label",null,f.createElement(T,{msgId:"equalinterval.min"})))),f.createElement(g,null,f.createElement(h,{xs:12},f.createElement(E,{ref:"min",onChange:this.changeMin,value:this.props.min,format:"-#,###.##",precision:3}),this.props.error&&"min"===this.props.error.type?this.renderErrorPopOver():null))),f.createElement(h,{xs:4},f.createElement(g,null,f.createElement(h,{xs:12},f.createElement("label",null,f.createElement(T,{msgId:"equalinterval.max"})))),f.createElement(g,null,f.createElement(h,{xs:12},f.createElement(E,{ref:"max",onChange:this.changeMax,value:this.props.max,format:"-#,###.##",precision:3}),this.props.error&&"max"===this.props.error.type?this.renderErrorPopOver():null))),f.createElement(h,{xs:4},f.createElement(g,null,f.createElement(h,{xs:12},f.createElement("label",null,f.createElement(T,{msgId:"equalinterval.classes"})))),f.createElement(g,null,f.createElement(h,{xs:12},f.createElement(E,{onChange:function(t){return e.props.onChange("classes",t)},precision:0,min:3,max:12,step:1,value:this.props.classes}))))),f.createElement(g,null,f.createElement(h,{xs:6},f.createElement(g,null,f.createElement(h,{xs:12},f.createElement("label",null,f.createElement(T,{msgId:"equalinterval.ramp"})))),f.createElement(g,null,f.createElement(h,{xs:12},f.createElement(j,{data:this.getColorsSchema(),groupBy:"schema",onChange:function(t){return e.props.onChange("ramp",t.name)},textField:"name",itemComponent:x,value:this.getRampValue()})))),f.createElement(h,{xs:6},f.createElement(g,{style:{paddingTop:"25px"}},f.createElement(h,{xs:12},f.createElement(v,{disabled:this.classifyDisabled(),onClick:this.generateEqualIntervalRamp,style:{float:"right"}},f.createElement(T,{msgId:"equalinterval.classify"})))))))}}])&&i(t.prototype,n),r&&i(t,r),u}(f.Component);p(M,"propTypes",{min:d.number,max:d.number,classes:d.number,onChange:d.func,onClassify:d.func,ramp:d.string,error:d.object}),p(M,"contextTypes",{messages:d.object}),p(M,"defaultProps",{min:0,max:100,classes:5,ramp:"Blues",onChange:function(){},onClassify:function(){},error:null}),e.exports=M},"./MapStore2/web/client/components/style/EqualIntervalComponents/ColorRamp.js":function(e,t){e.exports=[{name:"BuGn",schema:"Sequential",max:9},{name:"BuPu",schema:"Sequential",max:9},{name:"GnBu",schema:"Sequential",max:9},{name:"OrRd",schema:"Sequential",max:9},{name:"PuBu",schema:"Sequential",max:9},{name:"PuBuGn",schema:"Sequential",max:9},{name:"PuRd",schema:"Sequential",max:9},{name:"RdPu",schema:"Sequential",max:9},{name:"YlGn",schema:"Sequential",max:9},{name:"YlGnBu",schema:"Sequential",max:9},{name:"YlOrBr",schema:"Sequential",max:9},{name:"YlOrRd",schema:"Sequential",max:9},{name:"Blues",schema:"Singlehue",max:9},{name:"Greens",schema:"Singlehue",max:9},{name:"Greys",schema:"Singlehue",max:9},{name:"Oranges",schema:"Singlehue",max:9},{name:"Purples",schema:"Singlehue",max:9},{name:"Reds",schema:"Singlehue",max:9},{name:"BrBG",schema:"Diverging",max:11},{name:"PiYG",schema:"Diverging",max:11},{name:"PRGn",schema:"Diverging",max:11},{name:"PuOr",schema:"Diverging",max:11},{name:"RdBu",schema:"Diverging",max:11},{name:"RdGy",schema:"Diverging",max:11},{name:"RdYlBu",schema:"Diverging",max:11},{name:"RdYlGn",schema:"Diverging",max:11},{name:"Spectral",schema:"Diverging",max:11},{name:"Accent",schema:"Qualitative",max:8},{name:"Dark2",schema:"Qualitative",max:8},{name:"Paired",schema:"Qualitative",max:12},{name:"Pastel1",schema:"Qualitative",max:9},{name:"Pastel2",schema:"Qualitative",max:8},{name:"Set1",schema:"Qualitative",max:9},{name:"Set2",schema:"Qualitative",max:8},{name:"Set3",schema:"Qualitative",max:12},{name:"Earth",schema:"Dem",max:12},{name:"Land",schema:"Dem",max:12},{name:"Water",schema:"Dem",max:12},{name:"CDA",schema:"Dem",max:12},{name:"Simple",schema:"Dem",max:7}]},"./MapStore2/web/client/components/style/EqualIntervalComponents/ColorRampItem.jsx":function(e,t,n){var r=n("./node_modules/react/index.js"),o=n("./node_modules/prop-types/index.js"),i=n("./MapStore2/web/client/components/style/EqualIntervalComponents/ExtendColorBrewer.js"),a=n("./MapStore2/web/client/components/I18N/Message.jsx"),s=function(e){var t=e.item,n=t&&(t.ramp||i[t.name]&&i[t.name][5])||[];return r.createElement("div",{className:"color-ramp-item"},n.map((function(e){return r.createElement("div",{className:"color-cell",key:t&&t.name+"-"+e,style:{backgroundColor:e}})})),r.createElement("div",{className:"colorname-cell"},t&&(t.label||t.name)?r.createElement(a,{msgId:t.label||t.name,msgParams:{number:n.length}}):t))};s.propTypes={item:o.oneOfType([o.string,o.object])},e.exports=s},"./MapStore2/web/client/components/style/EqualIntervalComponents/ExtendColorBrewer.js":function(e,t,n){var r=n("./node_modules/object-assign/index.js");e.exports=r({},n("./node_modules/colorbrewer/index.js"),{Earth:{3:["#3e2f8d","#d3e1b2","#f1e8dd"],4:["#3e2f8d","#a4cef4","#676c52","#f1e8dd"],5:["#3e2f8d","#87b2f1","#d3e1b2","#615742","#f1e8dd"],6:["#3e2f8d","#739cd3","#cbe1da","#8e9f79","#7e6d4f","#f1e8dd"],7:["#3e2f8d","#6a8dc7","#a4cef4","#d3e1b2","#676c52","#89795d","#f1e8dd"],8:["#3e2f8d","#6783c7","#94c0fb","#e1e9ca","#a3b990","#524d3d","#908169","#f1e8dd"],9:["#3e2f8d","#657bc7","#87b2f1","#b9dae8","#d3e1b2","#7b8965","#615742","#948671","#f1e8dd"],10:["#3e2f8d","#6375c7","#7ca6e0","#a4cef4","#eceec1","#afc79c","#676c52","#716349","#988b78","#f1e8dd"],11:["#3e2f8d","#6271c7","#739cd3","#99c4f9","#cbe1da","#d3e1b2","#8e9f79","#585743","#7e6d4f","#9b8f7e","#f1e8dd"],12:["#3e2f8d","#616dc7","#6c93c7","#8fbcfe","#aed6f1","#f1f0be","#bbd5a9","#788562","#504a3b","#847252","#9b8f7e","#f1e8dd"]},Land:{3:["#c3e2df","#2f412c","#e7e9dd"],4:["#c3e2df","#5d7a65","#3f3633","#e7e9dd"],5:["#c3e2df","#868f65","#2f412c","#5c4e4b","#e7e9dd"],6:["#c3e2df","#979f72","#446553","#302f26","#6e5d56","#e7e9dd"],7:["#c3e2df","#a5ac7d","#5d7a65","#2f412c","#3f3633","#7b695a","#e7e9dd"],8:["#c3e2df","#b0b788","#768562","#3c5a46","#2d3123","#4f4342","#84715c","#e7e9dd"],9:["#c3e2df","#b8c091","#868f65","#4b6e5f","#2f412c","#322d28","#5c4e4b","#8c775d","#e7e9dd"],10:["#c3e2df","#bfc697","#8f986c","#5d7a65","#37553e","#2b3221","#3f3633","#665651","#917c5e","#e7e9dd"],11:["#c3e2df","#c4cc9d","#979f72","#6f8263","#446553","#2f412c","#302f26","#4a3f3d","#6e5d56","#96805f","#e7e9dd"],12:["#c3e2df","#c8d0a1","#9ea576","#7d8861","#4e7265","#35513a","#2a3320","#352e2a","#534745","#756359","#9d896a","#e7e9dd"]},Water:{3:["#1f373d","#4cc1b2","#dee2b6"],4:["#1f373d","#309590","#85dfce","#dee2b6"],5:["#1f373d","#2a8180","#4cc1b2","#a1f3dc","#dee2b6"],6:["#1f373d","#2f6f79","#30a8a2","#76d1c6","#c1fdf6","#dee2b6"],7:["#1f373d","#306573","#309590","#4cc1b2","#85dfce","#c8f3dc","#dee2b6"],8:["#1f373d","#305f6b","#2a8b86","#2fb2aa","#6eccbd","#8deccd","#c8e6bb","#dee2b6"],9:["#1f373d","#2f5b66","#2a8180","#32a09a","#4cc1b2","#7dd5ce","#a1f3dc","#c8dda3","#dee2b6"],10:["#1f373d","#2f5862","#2d777c","#309590","#2eb8af","#69cab8","#85dfce","#b3f8eb","#c8d690","#dee2b6"],11:["#1f373d","#2f555f","#2f6f79","#2c8e89","#30a8a2","#4cc1b2","#76d1c6","#8ae8cd","#c1fdf6","#c8d181","#dee2b6"],12:["#1f373d","#2f535c","#306977","#298883","#329c97","#30bab1","#66c8b4","#80d7cf","#92efd0","#c8faf0","#cad285","#dee2b6"]},CDA:{3:["#18c6ca","#fed873","#ffffff"],4:["#18c6ca","#fffbc3","#e3ce9b","#ffffff"],5:["#18c6ca","#e9feb4","#fed873","#d0c6b0","#ffffff"],6:["#18c6ca","#cffea9","#fef5af","#efd28b","#c8c2b6","#ffffff"],7:["#18c6ca","#bafea1","#fffbc3","#fed873","#e3ce9b","#ccc8c1","#ffffff"],8:["#18c6ca","#affe9d","#f0feb8","#fef3a8","#f3d486","#d8c9a8","#d3d0ca","#ffffff"],9:["#18c6ca","#affe9d","#e9feb4","#fef7b5","#fed873","#e7cf96","#d0c6b0","#dad8d2","#ffffff"],10:["#18c6ca","#a3fe9a","#d8feac","#fffbc3","#feee9b","#f7d580","#e3ce9b","#ccc4b3","#dad8d2","#ffffff"],11:["#18c6ca","#97fe96","#cffea9","#f7febb","#fef5af","#fed873","#efd28b","#dccaa4","#c8c2b6","#e1dfdb","#ffffff"],12:["#18c6ca","#97fe96","#c5fea5","#f0feb8","#fef9bc","#feee9b","#f7d580","#e7cf96","#d8c9a8","#c4c1b9","#e1dfdb","#ffffff"]},Simple:{3:["#000000","#7fff00","#bf7f3f"],4:["#000000","#38ff38","#ffd400","#bf7f3f"],5:["#000000","#7fff7f","#7fff00","#ff9f00","#bf7f3f"],6:["#000000","#aaffaa","#00ff00","#ffff00","#ff7f00","#bf7f3f"],7:["#000000","#8dd48d","#38ff38","#7fff00","#ffd400","#f47f0a","#bf7f3f"]}})},"./MapStore2/web/client/components/style/MarkNameSelector.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=n("./node_modules/prop-types/index.js"),d=n("./node_modules/react/index.js"),f=n("./node_modules/react-widgets/lib/index.js").DropdownList,m=n("./MapStore2/web/client/utils/LocaleUtils.js"),y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(c,e);var t,n,r,l=s(c);function c(){return o(this,c),l.apply(this,arguments)}return t=c,(n=[{key:"render",value:function(){var e=this;return d.createElement(f,{data:[{value:"circle",name:m.getMessageById(this.context.messages,"markNameSelector.circle")||"Circle"},{value:"square",name:m.getMessageById(this.context.messages,"markNameSelector.square")||"Square"},{value:"triangle",name:m.getMessageById(this.context.messages,"markNameSelector.triangle")||"Triangle"},{value:"star",name:m.getMessageById(this.context.messages,"markNameSelector.star")||"Star"},{value:"cross",name:m.getMessageById(this.context.messages,"markNameSelector.cross")||"Cross"},{value:"x",name:m.getMessageById(this.context.messages,"markNameSelector.x")||"X"}],valueField:"value",textField:"name",value:this.props.markName,onChange:function(t){return e.props.onChange("markName",t.value)}})}}])&&i(t.prototype,n),r&&i(t,r),c}(d.Component);u(y,"propTypes",{markName:p.string,onChange:p.func}),u(y,"contextTypes",{messages:p.object}),u(y,"defaultProps",{markName:"circle",onChange:function(){}}),e.exports=y},"./MapStore2/web/client/components/style/OpacityPicker.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=n("./node_modules/prop-types/index.js"),d=n("./node_modules/react/index.js"),f=n("./node_modules/react-nouislider/dist/react-nouislider.common.js");n("./node_modules/react-nouislider/example/nouislider.css"),n("./MapStore2/web/client/components/style/opacitypicker.css");var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(c,e);var t,n,r,l=s(c);function c(){return o(this,c),l.apply(this,arguments)}return t=c,(n=[{key:"render",value:function(){var e=this;return d.createElement("div",{className:"opacity-picker"},d.createElement(f,{disabled:this.props.disabled,start:[100*this.props.opacity],range:{min:0,max:100},onChange:function(t){return e.props.onChange("opacity",(t/100).toFixed(2))},connect:"lower",tooltips:[{to:function(e){return Math.round(e)+"%"}}]}))}}])&&i(t.prototype,n),r&&i(t,r),c}(d.Component);u(m,"propTypes",{opacity:p.oneOfType([p.number,p.string]),onChange:p.func,disabled:p.bool}),u(m,"defaultProps",{opacity:"1",onChange:function(){},disabled:!1}),e.exports=m},"./MapStore2/web/client/components/style/PseudoColorSettings.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=n("./node_modules/prop-types/index.js"),f=n("./node_modules/react/index.js"),m=n("./node_modules/react-bootstrap/es/index.js"),y=m.Grid,b=m.Row,g=m.Col,h=m.Button,v=n("./node_modules/react-widgets/lib/index.js").Combobox,S=n("./MapStore2/web/client/components/style/ColorMapGrid.jsx"),w=n("./MapStore2/web/client/components/I18N/Message.jsx"),O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(u,e);var t,n,r,l=s(u);function u(){var e;o(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return p(c(e=l.call.apply(l,[this].concat(n))),"addEntry",(function(){var t=e.props.colorMapEntry?e.props.colorMapEntry.slice():[],n=t.length>0?t[t.length-1].quantity+.01:0,r=n.toFixed?n.toFixed(2):n;t.push({color:"#AA34FF",quantity:n,label:r}),e.props.onChange("colorMapEntry",t)})),p(c(e),"removeEntry",(function(){var t=e.props.colorMapEntry.filter((function(t,n){return n!==e.props.selected}));e.props.onChange("selected",null),e.props.onChange("colorMapEntry",t)})),p(c(e),"selectEntry",(function(t){t!==e.props.selected&&e.props.onChange("selected",t)})),e}return t=u,(n=[{key:"render",value:function(){var e=this;return f.createElement(y,{fluid:!0},f.createElement(b,null,f.createElement(g,{xs:3},f.createElement(b,null,f.createElement("label",null,f.createElement(w,{msgId:"pseudocolorsettings.type"}))),f.createElement(b,null,f.createElement(v,{data:["ramp","intervals","values"],value:this.props.type,onChange:function(t){return e.props.onChange("type",t)}})),f.createElement(b,{style:{paddingTop:8}},f.createElement("label",null,f.createElement(w,{msgId:"pseudocolorsettings.extended"})),"",f.createElement("input",{type:"checkbox",onChange:function(t){return e.props.onChange("extended",t.target.checked)},checked:this.props.extended}))),f.createElement(g,{xsOffset:1,xs:8},f.createElement(b,null," ",f.createElement("label",null,f.createElement(w,{msgId:"pseudocolorsettings.colormap"}))),f.createElement(b,{style:{marginBottom:"10px"}},f.createElement(S,{selectEntry:this.selectEntry,valueChanged:function(t){return e.props.onChange("colorMapEntry",t)},entries:this.props.colorMapEntry})))),f.createElement(b,null,f.createElement(g,{xs:4,xsOffset:4,style:{padding:"0px"}},f.createElement(h,{onClick:this.addEntry},f.createElement(w,{msgId:"pseudocolorsettings.add"}))),f.createElement(g,{xs:4,style:{padding:"0px"}},f.createElement(h,{disabled:null===this.props.selected,onClick:this.removeEntry,style:{float:"right"}},f.createElement(w,{msgId:"pseudocolorsettings.remove"})))))}}])&&i(t.prototype,n),r&&i(t,r),u}(f.Component);p(O,"propTypes",{type:d.oneOf(["ramp","intervals","values"]),opacity:d.oneOfType([d.number,d.string]),selected:d.number,colorMapEntry:d.array,onChange:d.func,extended:d.bool}),p(O,"contextTypes",{messages:d.object}),p(O,"defaultProps",{type:"ramp",opacity:"1",selected:null,colorMapEntry:[],onChange:function(){},extended:!1}),e.exports=O},"./MapStore2/web/client/components/style/RasterStyleTypePicker.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=n("./node_modules/prop-types/index.js"),d=n("./node_modules/react/index.js"),f=n("./node_modules/react-widgets/lib/index.js").Combobox,m=n("./MapStore2/web/client/utils/LocaleUtils.js"),y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(c,e);var t,n,r,l=s(c);function c(){return o(this,c),l.apply(this,arguments)}return t=c,(n=[{key:"render",value:function(){var e=this;return d.createElement(f,{data:[{value:"rgb",name:m.getMessageById(this.context.messages,"rasterstyletype.rgb"),type:m.getMessageById(this.context.messages,"rasterstyletype.multi")},{value:"gray",name:m.getMessageById(this.context.messages,"rasterstyletype.gray"),type:m.getMessageById(this.context.messages,"rasterstyletype.single")},{value:"pseudo",name:m.getMessageById(this.context.messages,"rasterstyletype.pseudo"),type:m.getMessageById(this.context.messages,"rasterstyletype.single")}],textField:"name",valueField:"value",groupBy:"type",onChange:function(t){return e.props.onChange("styletype",t.value)},value:this.props.styletype})}}])&&i(t.prototype,n),r&&i(t,r),c}(d.Component);u(y,"propTypes",{styletype:p.oneOf(["rgb","gray","pseudo"]),onChange:p.func}),u(y,"contextTypes",{messages:p.object}),e.exports=y},"./MapStore2/web/client/components/style/ScaleDenominator.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=n("./node_modules/prop-types/index.js"),y=n("./node_modules/react/index.js"),b=n("./MapStore2/web/client/utils/MapUtils.js"),g=n("./node_modules/react-dom/index.js").findDOMNode,h=n("./node_modules/react-widgets/lib/index.js").DropdownList,v=n("./node_modules/react-bootstrap/es/index.js"),S=v.Row,w=v.Col,O=v.Overlay,j=v.Popover,E=v.Label,x=n("./MapStore2/web/client/utils/LocaleUtils.js"),P=n("./MapStore2/web/client/components/I18N/Message.jsx"),C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(u,e);var t,n,r,i=c(u);function u(){var e;a(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return f(p(e=i.call.apply(i,[this].concat(n))),"state",{error:!1}),f(p(e),"onChange",(function(t,n){var r=n.value;"minDenominator"===t&&e.props.maxValue&&r>=e.props.maxValue?e.setState({error:{type:t,msg:"scaledenominator.minerror"}}):"maxDenominator"===t&&e.props.minValue&&r<=e.props.minValue?e.setState({error:{type:t,msg:"scaledenominator.maxerror"}}):(e.state.error&&e.setState({error:!1}),e.props.onChange(t,r))})),f(p(e),"renderErrorPopOver",(function(){return y.createElement(O,{target:function(){return g(e.refs[e.state.error.type])},show:!0,placement:"top"},y.createElement(j,{id:"".concat(e.state.error.type,"_id")},y.createElement(E,{bsStyle:"danger"}," ",y.createElement(P,{msgId:e.state.error.msg}))))})),e}return t=u,(n=[{key:"UNSAFE_componentWillMount",value:function(){var e=b.getGoogleMercatorScales(0,21);this.scales=[{value:null,text:x.getMessageById(this.context.messages,"scaledenominator.none")||"None"}].concat(o(e.map((function(e){return{value:e,text:"".concat(e.toFixed(0))}}))))}},{key:"render",value:function(){var e=this;return y.createElement(S,null,y.createElement(w,{xs:6},y.createElement("label",null,y.createElement(P,{msgId:"scaledenominator.minlabel"})),y.createElement(h,{ref:"minDenominator",data:this.scales,value:this.props.minValue,valueField:"value",textField:"text",onChange:function(t){return e.onChange("minDenominator",t)}})),y.createElement(w,{xs:6},y.createElement("label",null,y.createElement(P,{msgId:"scaledenominator.maxlabel"})),y.createElement(h,{ref:"maxDenominator",data:this.scales,value:this.props.maxValue,valueField:"value",textField:"text",onChange:function(t){return e.onChange("maxDenominator",t)}})),this.state.error?this.renderErrorPopOver():null)}}])&&s(t.prototype,n),r&&s(t,r),u}(y.Component);f(C,"propTypes",{minValue:m.number,maxValue:m.number,onChange:m.func.isRequired}),f(C,"contextTypes",{messages:m.object}),f(C,"defaultProps",{minValue:null,maxValue:null,onChange:function(){return null}}),e.exports=C},"./MapStore2/web/client/components/style/StyleCanvas.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=n("./node_modules/react/index.js"),f=n("./node_modules/prop-types/index.js"),m=n("./node_modules/lodash/lodash.js").isString,y=n("./MapStore2/web/client/components/map/openlayers/img/marker-icon.png"),b=n("./MapStore2/web/client/utils/VectorStyleUtils.js"),g=b.createSvgUrl,h=b.isSymbolStyle,v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(f,e);var t,r,l,u=s(f);function f(){var e;o(this,f);for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return p(c(e=u.call.apply(u,[this].concat(r))),"paint",(function(t){t.save(),t.beginPath();var n=e.props.shapeStyle,r=n.color,o=n.fill;switch(t.fillStyle=o?m(o)?o:"rgba(".concat(o.r,", ").concat(o.g,", ").concat(o.b,", ").concat(o.a,")"):null,t.strokeStyle=r?m(r)?r:"rgba(".concat(r.r,", ").concat(r.g,", ").concat(r.b,", ").concat(r.a,")"):null,t.lineWidth=e.props.shapeStyle.width||e.props.shapeStyle.weight,e.props.shapeStyle.dashArray&&e.props.shapeStyle.dashArray.length&&t.setLineDash(e.props.shapeStyle.dashArray),e.props.geomType){case"Polygon":e.paintPolygon(t);break;case"Polyline":e.paintPolyline(t);break;case"Point":e.paintPoint(t,e.props.shapeStyle.markName);break;case"Circle":e.paintPoint(t,"circle");break;case"Marker":e.paintMarker(t);break;case"Text":e.paintText(t);break;case"Symbol":e.paintSymbol(t);break;default:return}t.restore()})),p(c(e),"drawSymbol",(function(t,r){r.clearRect(0,0,600,600);var o=new Image,i=new Image;i.src=n("./MapStore2/web/client/components/style/vector/iconNotFound.png"),o.src=t||e.props.shapeStyle.symbolUrl,o.onload=function(){try{r.drawImage(o,e.props.width/2-o.width/2,e.props.height/2-o.height/2)}catch(e){return}},o.onerror=function(){i.onload=function(){try{r.drawImage(i,e.props.width/2-i.width/2,e.props.height/2-i.height/2)}catch(e){return}}}})),p(c(e),"paintSymbol",(function(t){h(e.props.originalStyle)?e.props.originalStyle.symbolUrlCustomized&&e.props.originalStyle.symbolUrl?e.drawSymbol(e.props.originalStyle.symbolUrlCustomized,t):g(e.props.originalStyle,e.props.originalStyle.symbolUrlCustomized||e.props.originalStyle.symbolUrl).then((function(n){return e.drawSymbol(n,t)})):e.drawSymbol(null,t)})),p(c(e),"paintText",(function(t){var n=e.props,r=n.width,o=n.height,i=e.props.shapeStyle,a=i.textAlign,s=void 0===a?"center":a,l=i.label,c=i.font,u=void 0===c?"14px Arial":c;return t.textAlign=s,t.font=u,"start"===s?(t.strokeText(l||"New",r/2.5,o/2),void t.fillText(l||"New",r/2.5,o/2)):"end"===s?(t.strokeText(l||"New",r/1.5,o/2),void t.fillText(l||"New",r/1.5,o/2)):(t.strokeText(l||"New",r/2,o/2),void t.fillText(l||"New",r/2,o/2))})),p(c(e),"paintPolygon",(function(e){e.transform(1,0,0,1,-27.5,0),e.moveTo(55,8),e.lineTo(100,8),e.lineTo(117.5,40),e.lineTo(100,72),e.lineTo(55,72),e.lineTo(37.5,40),e.closePath(),e.fill(),e.stroke()})),p(c(e),"paintPolyline",(function(e){e.transform(1,0,0,1,0,0),e.moveTo(10,20),e.bezierCurveTo(40,40,70,0,90,20),e.stroke()})),p(c(e),"paintPoint",(function(t,n){var r=e.props.shapeStyle.radius,o=r/2;switch(n){case"square":t.rect(50-o,48.5-o,r,r);break;case"circle":t.arc(50,48.5,o,0,2*Math.PI);break;case"triangle":var i=Math.sqrt(3)*r/2/3;t.moveTo(50,48.5-2*i),t.lineTo(50+o,48.5+i),t.lineTo(50-o,48.5+i),t.closePath();break;case"star":e.paintStar(t,50,48.5,5,o,o/2);break;case"cross":e.paintCross(t,50,48.5,r,.23);break;case"x":t.translate(50,48.5),t.rotate(45*Math.PI/180),t.translate(-50,-48.5),e.paintCross(t,50,48.5,r,.23);break;default:t.arc(50,48.5,r,0,2*Math.PI)}t.fill(),t.stroke()})),p(c(e),"paintMarker",(function(e){var t=new Image;t.src=y;try{e.drawImage(t,42.5,24)}catch(e){return}})),p(c(e),"paintStar",(function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,o=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0,a=Math.PI/2*3,s=t,l=n,c=Math.PI/r;e.moveTo(t,n-o);for(var u=0;u<r;u++)s=t+Math.cos(a)*o,l=n+Math.sin(a)*o,e.lineTo(s,l),a+=c,s=t+Math.cos(a)*i,l=n+Math.sin(a)*i,e.lineTo(s,l),a+=c;e.lineTo(t,n-o),e.closePath()})),p(c(e),"paintCross",(function(e,t,n,r,o){var i=r*o/2,a=r/2;e.moveTo(t-i,n-a),e.lineTo(t+i,n-a),e.lineTo(t+i,n-i),e.lineTo(t+a,n-i),e.lineTo(t+a,n+i),e.lineTo(t+i,n+i),e.lineTo(t+i,n+a),e.lineTo(t-i,n+a),e.lineTo(t-i,n+i),e.lineTo(t-a,n+i),e.lineTo(t-a,n-i),e.lineTo(t-i,n-i),e.closePath()})),e}return t=f,(r=[{key:"componentDidMount",value:function(){var e=this.refs.styleCanvas.getContext("2d");e.clearRect(0,0,this.props.width||500,this.props.height||500),this.paint(e)}},{key:"componentDidUpdate",value:function(){var e=this.refs.styleCanvas.getContext("2d");e.clearRect(0,0,this.props.width||500,this.props.height||500),this.paint(e)}},{key:"render",value:function(){return d.createElement("canvas",{ref:"styleCanvas",style:this.props.style,width:this.props.width,height:this.props.height})}}])&&i(t.prototype,r),l&&i(t,l),f}(d.Component);p(v,"propTypes",{originalStyle:f.object,style:f.object,shapeStyle:f.object,geomType:f.oneOf(["Polygon","Polyline","Point","Marker","Text","Symbol","Circle",void 0]),width:f.number,height:f.number}),p(v,"defaultProps",{originalStyle:{},style:{},shapeStyle:{},geomType:"Polygon",width:100,height:80}),e.exports=v},"./MapStore2/web/client/components/style/StylePoint.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=n("./node_modules/prop-types/index.js"),d=n("./node_modules/react/index.js"),f=n("./node_modules/react-bootstrap/es/index.js"),m=f.Grid,y=f.Row,b=f.Col,g=n("./MapStore2/web/client/components/style/ColorPicker.jsx").default,h=n("./MapStore2/web/client/components/style/StyleCanvas.jsx"),v=n("./MapStore2/web/client/components/style/MarkNameSelector.jsx");n("./node_modules/react-widgets/lib/localizers/simple-number.js")();var S=n("./node_modules/react-widgets/lib/index.js").NumberPicker;n("./node_modules/react-widgets/lib/less/react-widgets.less");var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(c,e);var t,n,r,l=s(c);function c(){return o(this,c),l.apply(this,arguments)}return t=c,(n=[{key:"render",value:function(){var e=this;return d.createElement(m,{fluid:!0},d.createElement(y,null,d.createElement(b,{xs:4,style:{padding:0}},d.createElement(h,{style:{padding:0,margin:"auto",display:"block"},height:97,shapeStyle:this.props.shapeStyle,geomType:this.props.shapeStyle.marker?"Marker":"Point"})),d.createElement(b,{xs:7},this.props.showMarker?d.createElement(y,null,d.createElement(b,{xs:1},d.createElement("input",{"aria-label":"...",type:"checkbox",defaultChecked:this.props.shapeStyle.marker,onChange:function(t){e.props.setStyleParameter("marker",t.target.checked)}})),d.createElement(b,{style:{paddingLeft:0,paddingTop:1},xs:4},d.createElement("label",null,"Marker"))):null,this.props.showMarkSelector?d.createElement(y,{style:{marginBottom:4}},d.createElement(b,{style:{paddingTop:7},xs:4},d.createElement("label",null,"Mark")),d.createElement(b,{xs:8,style:{paddingRight:0,paddingLeft:30}},d.createElement(v,{onChange:this.props.setStyleParameter,markName:this.props.shapeStyle.markName}))):null,d.createElement(y,null,d.createElement(b,{xs:4},d.createElement(g,{disabled:this.props.shapeStyle.marker,value:this.props.shapeStyle.color,line:!1,text:"Stroke",onChangeColor:function(t){t&&e.props.setStyleParameter("color",t)}})),d.createElement(b,{xs:8,style:{paddingRight:0,paddingLeft:30}},d.createElement(S,{disabled:this.props.shapeStyle.marker,min:1,max:15,step:1,value:this.props.shapeStyle.width,onChange:function(t){e.props.shapeStyle.width!==t&&e.props.setStyleParameter("width",t)}}))),d.createElement(y,{style:{marginTop:4}},d.createElement(b,{xs:4},d.createElement(g,{disabled:this.props.shapeStyle.marker,value:this.props.shapeStyle.fill,line:!1,text:"Fill",onChangeColor:function(t){t&&e.props.setStyleParameter("fill",t)}})),d.createElement(b,{xs:8,style:{paddingRight:0,paddingLeft:30}},d.createElement(S,{disabled:this.props.shapeStyle.marker,min:1,max:50,step:1,value:this.props.shapeStyle.radius,onChange:function(t){e.props.shapeStyle.radius!==t&&e.props.setStyleParameter("radius",t)}}))))))}}])&&i(t.prototype,n),r&&i(t,r),c}(d.Component);u(w,"propTypes",{shapeStyle:p.object,setStyleParameter:p.func,showMarker:p.bool,showMarkSelector:p.bool}),u(w,"defaultProps",{shapeStyle:{},showMarker:!0,showMarkSelector:!1,setStyleParameter:function(){}}),e.exports=w},"./MapStore2/web/client/components/style/StylePolygon.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=n("./node_modules/prop-types/index.js"),d=n("./node_modules/react/index.js"),f=n("./node_modules/react-bootstrap/es/index.js"),m=f.Grid,y=f.Row,b=f.Col,g=n("./MapStore2/web/client/components/style/ColorPicker.jsx").default,h=n("./MapStore2/web/client/components/style/StyleCanvas.jsx");n("./node_modules/react-widgets/lib/localizers/simple-number.js")();var v=n("./node_modules/react-widgets/lib/index.js").NumberPicker;n("./node_modules/react-widgets/lib/less/react-widgets.less");var S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(c,e);var t,n,r,l=s(c);function c(){return o(this,c),l.apply(this,arguments)}return t=c,(n=[{key:"render",value:function(){var e=this;return d.createElement(m,{fluid:!0},d.createElement(y,null,d.createElement(b,{xs:4,style:{padding:0}},d.createElement(h,{style:{padding:0,margin:"auto",display:"block"},shapeStyle:this.props.shapeStyle,geomType:"Polygon"})),d.createElement(b,{xs:7},d.createElement(y,{style:{marginTop:7}},d.createElement(b,{xs:4},d.createElement(g,{value:this.props.shapeStyle.color,line:!1,text:"Stroke",onChangeColor:function(t){t&&e.props.setStyleParameter("color",t)}})),d.createElement(b,{xs:8,style:{paddingRight:0,paddingLeft:30}},d.createElement(v,{min:1,max:15,step:1,value:this.props.shapeStyle.width,onChange:function(t){t!==e.props.shapeStyle.width&&e.props.setStyleParameter("width",t)}}))),d.createElement(y,{style:{marginTop:4}},d.createElement(b,{xs:6},d.createElement(g,{value:this.props.shapeStyle.fill,line:!1,text:"Fill",onChangeColor:function(t){t&&e.props.setStyleParameter("fill",t)}}))))))}}])&&i(t.prototype,n),r&&i(t,r),c}(d.Component);u(S,"propTypes",{shapeStyle:p.object,setStyleParameter:p.func}),u(S,"defaultProps",{shapeStyle:{},setStyleParameter:function(){}}),e.exports=S},"./MapStore2/web/client/components/style/StylePolyline.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=n("./node_modules/prop-types/index.js"),d=n("./node_modules/react/index.js"),f=n("./node_modules/react-bootstrap/es/index.js"),m=f.Grid,y=f.Row,b=f.Col,g=n("./MapStore2/web/client/components/style/ColorPicker.jsx").default,h=n("./MapStore2/web/client/components/style/StyleCanvas.jsx");n("./node_modules/react-widgets/lib/localizers/simple-number.js")();var v=n("./node_modules/react-widgets/lib/index.js").NumberPicker;n("./node_modules/react-widgets/lib/less/react-widgets.less");var S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(c,e);var t,n,r,l=s(c);function c(){return o(this,c),l.apply(this,arguments)}return t=c,(n=[{key:"render",value:function(){var e=this;return d.createElement(m,{fluid:!0},d.createElement(y,null,d.createElement(b,{xs:4,style:{padding:0}},d.createElement(h,{style:{padding:0,margin:"auto",display:"block"},shapeStyle:this.props.shapeStyle,geomType:"Polyline",height:40})),d.createElement(b,{xs:7},d.createElement(y,{style:{marginTop:7}},d.createElement(b,{xs:4},d.createElement(g,{value:this.props.shapeStyle.color,line:!1,text:"Stroke",onChangeColor:function(t){t&&e.props.setStyleParameter("color",t)}})),d.createElement(b,{xs:8,style:{paddingRight:0,paddingLeft:30}},d.createElement(v,{onChange:function(t){e.props.setStyleParameter("width",t)},min:1,max:15,step:1,value:this.props.shapeStyle.width}))))))}}])&&i(t.prototype,n),r&&i(t,r),c}(d.Component);u(S,"propTypes",{shapeStyle:p.object,setStyleParameter:p.func}),u(S,"defaultProps",{shapeStyle:{},setStyleParameter:function(){}}),e.exports=S},"./MapStore2/web/client/components/style/ThemaClassesEditor.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=n("./node_modules/react/index.js"),f=n("./node_modules/prop-types/index.js"),m=n("./node_modules/react-bootstrap/es/index.js").FormGroup,y=n("./MapStore2/web/client/components/style/ColorSelector.jsx").default;n("./node_modules/react-widgets/lib/localizers/simple-number.js")();var b=n("./node_modules/react-widgets/lib/index.js").NumberPicker,g=n("./node_modules/object-assign/index.js"),h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(u,e);var t,n,r,l=s(u);function u(){var e;o(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return p(c(e=l.call.apply(l,[this].concat(n))),"renderClasses",(function(){return e.props.classification.map((function(t,n){return d.createElement(m,{key:n},d.createElement(y,{key:t.color,color:t.color,disableAlpha:!0,format:"hex",onChangeColor:function(t){return e.updateColor(n,t)}}),d.createElement(b,{format:"- ###.###",value:t.min,onChange:function(t){return e.updateMin(n,t)}}),d.createElement(b,{format:"- ###.###",value:t.max,precision:3,onChange:function(t){return e.updateMax(n,t)}}))}))})),p(c(e),"updateColor",(function(t,n){if(n){var r=e.props.classification.map((function(e,r){return r===t?g({},e,{color:n}):e}));e.props.onUpdateClasses(r,"color")}})),p(c(e),"updateMin",(function(t,n){if(!isNaN(n)){var r=e.props.classification.map((function(e,r){return r===t?g({},e,{min:n}):r===t-1?g({},e,{max:n}):e}));e.props.onUpdateClasses(r,"interval")}})),p(c(e),"updateMax",(function(t,n){if(!isNaN(n)){var r=e.props.classification.map((function(e,r){return r===t?g({},e,{max:n}):r===t+1?g({},e,{min:n}):e}));e.props.onUpdateClasses(r,"interval")}})),e}return t=u,(n=[{key:"render",value:function(){return d.createElement("div",{className:"thema-classes-editor "+this.props.className},this.renderClasses())}}])&&i(t.prototype,n),r&&i(t,r),u}(d.Component);p(h,"propTypes",{classification:f.array,onUpdateClasses:f.func,className:f.string}),p(h,"defaultProps",{classification:[],onUpdateClasses:function(){},className:""}),e.exports=h},"./MapStore2/web/client/components/style/opacitypicker.css":function(e,t,n){var r=n("./node_modules/css-loader/index.js!./node_modules/postcss-loader/src/index.js?!./MapStore2/web/client/components/style/opacitypicker.css");"string"==typeof r&&(r=[[e.i,r,""]]);n("./node_modules/style-loader/addStyles.js")(r,{});r.locals&&(e.exports=r.locals)},"./MapStore2/web/client/components/style/vector/DashArray.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=n("./node_modules/prop-types/index.js"),y=n("./node_modules/react/index.js"),b=n("./node_modules/react-select/dist/react-select.es.js").default,g=n("./node_modules/lodash/lodash.js").join,h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(u,e);var t,n,r,i=c(u);function u(){var e;a(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return f(p(e=i.call.apply(i,[this].concat(n))),"styleRenderer",(function(t,n,r){var o=e.props.styleRendererPattern||y.createElement("svg",{style:{height:33,width:"100%"},viewBox:"0 0 300 25"},y.createElement("path",{stroke:"#333333",strokeWidth:e.props.defaultStrokeWidth,strokeDasharray:r||t.value,d:"M0 12.5, 300 12.5"}));return y.createElement("div",{style:{display:"flex",alignItems:"center",width:"100%",paddingRight:25}},o)})),e}return t=u,(n=[{key:"render",value:function(){var e=this,t=g(this.props.dashArray||"1 0"," "),n=this.props.options.find((function(e){return e.value===t}))?this.props.options:[{value:t}].concat(o(this.props.options)),r=this.props.creatable?b.Creatable:b;return y.createElement(r,{options:n,disabled:this.props.disabled,menuPlacement:this.props.menuPlacement,clearable:this.props.clearable,optionRenderer:this.props.optionRenderer||this.styleRenderer,valueRenderer:this.props.valueRenderer||this.styleRenderer,value:t,isValidNewOption:this.props.isValidNewOption,onChange:function(t){if(t){var n=t.value.split(" ");e.props.onChange(n)}}})}}])&&s(t.prototype,n),r&&s(t,r),u}(y.Component);f(h,"propTypes",{dashArray:m.array,menuPlacement:m.string,clearable:m.bool,value:m.string,optionRenderer:m.func,styleRendererPattern:m.node,valueRenderer:m.func,disabled:m.bool,onChange:m.func,options:m.array,creatable:m.bool,isValidNewOption:m.func,defaultStrokeWidth:m.number}),f(h,"defaultProps",{dashArray:["1","0"],menuPlacement:"top",clearable:!1,onChange:function(){},options:[{value:"1 0"},{value:"10 50 30"},{value:"6 6"},{value:"20 20"},{value:"30 30"}],defaultStrokeWidth:4}),e.exports=h},"./MapStore2/web/client/components/style/vector/iconNotFound.png":function(e,t,n){e.exports=n.p+"MapStore2/web/client/components/style/vector/iconNotFound.png"},"./MapStore2/web/client/components/styleeditor/ColorRamp.jsx":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/react/index.js"),o=n.n(r),i=n("./node_modules/prop-types/index.js"),a=n.n(i),s=n("./MapStore2/web/client/utils/ColorUtils.js"),l=n.n(s),c=n("./node_modules/react-select/dist/react-select.es.js"),u=n("./node_modules/lodash/find.js"),p=n.n(u),d=n("./MapStore2/web/client/components/I18N/Message.jsx"),f=n.n(d);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var h=function(e){var t=e.ramp,n=e.name,r=e.label,i=1/t.length,a=(t||[]).reduce((function(e,n,r){return"".concat(e,", ").concat(n," ").concat(r/t.length*100,"%, ").concat(n," ").concat(100*(r/t.length+i),"%")}),"linear-gradient(to right");return o.a.createElement("div",{style:{backgroundImage:"".concat(a,")"),width:"100%",display:"inline-block",verticalAlign:"middle",padding:"0 2px"}},o.a.createElement("span",{style:{color:"#000000",backgroundColor:"rgba(255, 255, 255, 0.75)",padding:"0 4px"}},o.a.createElement(f.a,{msgId:r||n,msgParams:{number:t.length}})))};function v(e){var t=e.value,n=e.samples,r=e.onChange,i=e.items,a=e.rampFunction,s=e.disabled,u=i.map((function(e){var t=e.options,r=void 0===t?{}:t,o=g(e,["options"]);return y(y({},o),{},{options:r,ramp:a?a(o,r):(l.a.sameToneRangeColors(r.base,r.range,n+1,r.options)||["#AAA"]).splice(1)})})),d=p()(u,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e===t||e.name===(t&&t.name)}));return o.a.createElement(c.default,{valueKey:"name",className:"color-ramp-selector",clearable:!1,value:d,options:u,disabled:s,valueRenderer:h,optionRenderer:h,onChange:function(e){e&&r(e)}})}v.propTypes={value:a.a.oneOfType([a.a.string,a.a.object]),samples:a.a.number,onChange:a.a.func,items:a.a.array,rampFunction:a.a.func,disabled:a.a.bool},v.defaultProps={samples:5,onChange:function(){},items:[{name:"global.colors.blue",schema:"sequencial",options:{base:190,range:20}},{name:"global.colors.red",schema:"sequencial",options:{base:10,range:4}},{name:"global.colors.green",schema:"sequencial",options:{base:120,range:4}},{name:"global.colors.brown",schema:"sequencial",options:{base:30,range:4,s:1,v:.5}},{name:"global.colors.purple",schema:"sequencial",options:{base:300,range:4}},{name:"global.colors.random",schema:"qualitative",options:{base:190,range:340,options:{base:10,range:360,s:.67,v:.67}}}],disabled:!1},t.default=v},"./MapStore2/web/client/components/styleeditor/Editor.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m(e);if(t){var o=m(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d(this,n)}}function d(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=n("./node_modules/react/index.js"),g=n("./node_modules/prop-types/index.js"),h=n("./node_modules/react-codemirror2/index.js").Controlled,v=n("./node_modules/lodash/lodash.js"),S=v.debounce,w=v.isEqual,O=v.endsWith,j=v.isFunction,E=n("./node_modules/codemirror/lib/codemirror.js"),x=n("./MapStore2/web/client/components/layout/BorderLayout.jsx"),P=n("./MapStore2/web/client/components/misc/Loader.jsx"),C=n("./MapStore2/web/client/components/widgets/widget/InfoPopover.jsx"),T=n("./MapStore2/web/client/components/I18N/Message.jsx"),M=n("./node_modules/object-assign/index.js");n("./node_modules/codemirror/lib/codemirror.css"),n("./node_modules/codemirror/addon/search/searchcursor.js"),n("./node_modules/codemirror/addon/selection/mark-selection.js"),n("./node_modules/codemirror/addon/hint/show-hint.css"),n("./node_modules/codemirror/addon/hint/show-hint.js"),n("./node_modules/codemirror/mode/xml/xml.js"),n("./MapStore2/web/client/components/styleeditor/mode/geocss.js")(E),n("./MapStore2/web/client/components/styleeditor/hint/geocss.js")(E);var _=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(s,e);var t,n,r,o=p(s);function s(){var e;l(this,s);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return y(f(e=o.call.apply(o,[this].concat(n))),"state",{}),y(f(e),"onRenderToken",(function(t){var n=t.lineCount();e.inlineWidgets&&e.inlineWidgets.forEach((function(e){e&&e.parentNode&&e.parentNode.removeChild&&e.parentNode.removeChild(e)})),e.inlineWidgets=[],t.doc.iter(0,n,(function(n){var r=n.lineNo();t.getLineTokens(r).forEach((function(n){e.inlineWidgets=e.props.inlineWidgets.reduce((function(o,i){var s=i.type,l=i.style,c=void 0===l?{}:l,u=i.active,p=void 0===u?function(){return!1}:u,d=i.className,f=void 0===d?"":d;if(p(n)){var m=e.getInlineWidget({className:f,token:n,onClick:function(){return e.setState({inlineWidgetType:s,token:n,lineNo:r})},style:j(c)&&c(n)||c});return t.addWidget({line:r,ch:n.start-1},m,!1),[].concat(a(o),[m])}return a(o)}),a(e.inlineWidgets))}))}))})),y(f(e),"onAutocomplete",(function(t){if(!(t&&t.state&&t.state.completionActive)){var n=t.getCursor(),r=t.getTokenAt(n);if(r.string&&(O(r.string,"-")||r.string.match(/^[.`\w@]\w*$/))&&r.string.length>0){var o=e.editor&&e.editor.getWrapperElement&&e.editor.getWrapperElement()||null;E.commands.autocomplete(t,null,{completeSingle:!1,container:o})}}})),y(f(e),"onUpdate",(function(){e.update.cancel(),e.update()})),y(f(e),"getInlineWidget",(function(e){var t=e.onClick,n=void 0===t?function(){}:t,r=e.token,o=void 0===r?{}:r,a=e.className,s=void 0===a?"":a,l=e.style,c=void 0===l?{}:l,u=document.createElement("div");return u.setAttribute("class","".concat(s," ms-style-editor-inline-widget")),M(u.style,c),u.onclick=function(){return n(i({},o))},u})),e}return t=s,(n=[{key:"UNSAFE_componentWillMount",value:function(){this.setState({code:this.props.code})}},{key:"UNSAFE_componentWillUpdate",value:function(e){if(!w(this.props.error,e.error)&&(this.marker&&(this.marker.clear(),this.marker=null),e.error)){var t=this.editor.lineCount(),n={line:e.error.line-1||0,ch:0},r=e.error.line?{line:t,ch:0}:this.editor.getCursor();this.marker=this.editor.markText(n,r,{className:"ms-style-editor-error"})}}},{key:"render",value:function(){var e=this;return b.createElement(x,{className:"ms-style-editor",style:this.props.style,header:b.createElement("div",{className:"ms-style-editor-head"},this.props.loading&&b.createElement(P,{className:"ms-style-editor-loader",size:20}),this.props.error&&b.createElement(C,{glyph:"exclamation-mark",bsStyle:"danger",placement:"right",title:b.createElement(T,{msgId:"styleeditor.validationErrorTitle"}),text:this.props.error.line?this.props.error.message:b.createElement(T,{msgId:"styleeditor.genericValidationError"})}))},b.createElement(h,{key:"style-editor",value:this.state.code,editorDidMount:function(t){e.onRenderToken(t),e.editor=t,t.on("inputRead",e.onAutocomplete),e.update=S((function(){e.props.onChange(e.state.code)}),e.props.waitTime),E.extendMode(e.props.mode,{hintProperties:e.props.hintProperties})},editorWillUnmount:function(t){return t.off("inputRead",e.onAutocomplete)},onBeforeChange:function(t,n,r){return e.setState({code:r})},onChange:function(t){e.onRenderToken(t),e.onUpdate()},options:{theme:this.props.theme,mode:this.props.mode,lineNumbers:!0,styleSelectedText:!0,indentUnit:2,tabSize:2}}),this.state.token&&b.createElement("div",{className:"ms-inline-widget-container"},b.createElement("div",null,b.createElement("button",{className:"btn close square-button",onClick:function(){e.state.value&&e.editor.replaceRange(e.state.value,{line:e.state.lineNo,ch:e.state.token.start},{line:e.state.lineNo,ch:e.state.token.end}),e.setState({token:null,inlineWidgetType:null,lineNo:null,value:null})}})),b.createElement("div",null,this.props.inlineWidgets.filter((function(t){return t.type===e.state.inlineWidgetType})).map((function(t){var n=t.Widget;return b.createElement(n,{value:e.state.value,token:e.state.token,onChange:function(t){return e.setState({value:t})}})})))))}}])&&c(t.prototype,n),r&&c(t,r),s}(b.Component);y(_,"propTypes",{mode:g.string,theme:g.string,style:g.object,code:g.string,onChange:g.func,waitTime:g.number,hintProperties:g.object,error:g.object,inlineWidgets:g.array,loading:g.bool}),y(_,"defaultProps",{mode:"geocss",theme:"lesser-dark",style:{},code:"",onChange:function(){},waitTime:1e3,hintProperties:{},inlineWidgets:[]}),e.exports=_},"./MapStore2/web/client/components/styleeditor/SVGPreview.jsx":function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function o(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var i=n("./node_modules/react/index.js");e.exports=function(e){var t=e.type,n=e.patterns,a=e.paths,s=e.texts,l=e.backgroundColor,c=void 0===l?"#ffffff":l;return i.createElement("svg",{viewBox:"0 0 200 200"},i.createElement("defs",null,n&&n.filter((function(e){return e.icon})).map((function(e){return i.createElement("pattern",{id:e.id,viewBox:"0 0 1 1",width:"15%",height:"15%"},e.icon&&i.createElement("path",e.icon))})),n&&n.filter((function(e){return e.image})).map((function(e){return i.createElement("pattern",{id:e.id,width:"100%",height:"100%"},e.image&&i.createElement("image",e.image))}))),i.createElement("path",{fill:c,d:"M0 0 L200 0 L200 200 L0 200Z"}),a&&a.map((function(e){var n=e.type,a=o(e,["type"]);return"polygon"===(n||t)&&i.createElement("path",r({},a,{d:"M20 20 L180 20 L180 180 L20 180Z"}))||"linestring"===(n||t)&&i.createElement("path",r({},a,{fill:"none",d:"M30 160 L100 40 L170 160"}))||"point"===(n||t)&&i.createElement("path",a)})),s&&s.map((function(e){var t=e.text,n=o(e,["text"]);return i.createElement("text",r({x:"100",y:"100",textAnchor:"middle",alignmentBaseline:"middle"},n),t)})))}},"./MapStore2/web/client/components/styleeditor/StyleList.jsx":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n("./node_modules/react/index.js"),s=n("./node_modules/react-bootstrap/es/index.js").Glyphicon,l=n("./MapStore2/web/client/components/layout/BorderLayout.jsx"),c=n("./MapStore2/web/client/components/misc/enhancers/emptyState.jsx"),u=n("./MapStore2/web/client/components/misc/enhancers/localizedProps.js")("filterPlaceholder")(n("./MapStore2/web/client/components/misc/Filter.jsx")),p=n("./MapStore2/web/client/components/styleeditor/SVGPreview.jsx"),d=n("./MapStore2/web/client/components/I18N/Message.jsx"),f=n("./MapStore2/web/client/components/misc/enhancers/tooltip.jsx")(s),m=c((function(e){return 0===e.items.length}),{title:a.createElement(d,{msgId:"styleeditor.filterMatchNotFound"}),glyph:"1-stilo"})(n("./MapStore2/web/client/components/misc/cardgrids/SideGrid.jsx"));e.exports=function(e){var t=e.showDefaultStyleIcon,n=e.enabledStyle,r=e.defaultStyle,i=e.availableStyles,s=void 0===i?[]:i,c=e.onSelect,d=e.formatColors,y=void 0===d?{sld:"#33ffaa",css:"#ffaa33"}:d,b=e.filterText,g=e.onFilter,h=void 0===g?function(){}:g;return a.createElement(l,{className:"ms-style-editor-list",header:a.createElement(u,{filterPlaceholder:"styleeditor.styleListfilterPlaceholder",filterText:b,onFilter:h})},a.createElement(m,{size:"sm",onItemClick:function(e){var t=e.name;return c({style:r===t?"":t},!0)},items:s.filter((function(e){var t,n,r=e.name,o=void 0===r?"":r,i=e.title,a=void 0===i?"":i,s=e._abstract,l=void 0===s?"":s,c=e.metadata,u=void 0===c?{}:c;return!b||b&&(-1!==o.indexOf(b)||-1!==(null==u||null===(t=u.title)||void 0===t?void 0:t.indexOf(b))||-1!==(null==u||null===(n=u.description)||void 0===n?void 0:n.indexOf(b))||-1!==a.indexOf(b)||-1!==l.indexOf(b))})).map((function(e){var i,s,l;return o(o({},e),{},{title:(null==e||null===(i=e.metadata)||void 0===i?void 0:i.title)||e.label||e.title||e.name,description:(null==e||null===(s=e.metadata)||void 0===s?void 0:s.description)||e._abstract,selected:n===e.name,preview:e.format&&a.createElement(p,{backgroundColor:"#333333",texts:[{text:(l=e.format,{sld:"SLD",css:"CSS",mbstyle:"MBS"}[l]||l||"").toUpperCase(),fill:y[e.format]||"#f2f2f2",style:{fontSize:70,fontWeight:"bold"}}]})||a.createElement(f,{glyph:"geoserver"}),tools:t&&r===e.name?a.createElement(f,{glyph:"star",tooltipId:"styleeditor.defaultStyle"}):null})}))}))}},"./MapStore2/web/client/components/styleeditor/StyleTemplates.jsx":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n("./node_modules/react/index.js"),s=n("./node_modules/lodash/lodash.js").head,l=n("./node_modules/react-bootstrap/es/index.js"),c=l.Form,u=l.FormGroup,p=l.FormControl,d=l.ControlLabel,f=l.Alert,m=n("./MapStore2/web/client/components/layout/BorderLayout.jsx"),y=n("./MapStore2/web/client/components/misc/enhancers/emptyState.jsx"),b=n("./MapStore2/web/client/components/misc/Loader.jsx"),g=n("./MapStore2/web/client/components/misc/cardgrids/SquareCard.jsx"),h=n("./MapStore2/web/client/components/misc/enhancers/localizedProps.js"),v=h("filterPlaceholder")(n("./MapStore2/web/client/components/misc/Filter.jsx")),S=h("placeholder")(p),w=n("./MapStore2/web/client/components/misc/ResizableModal.jsx"),O=n("./MapStore2/web/client/components/misc/Portal.jsx"),j=n("./MapStore2/web/client/components/I18N/Message.jsx"),E=n("./MapStore2/web/client/components/I18N/HTML.jsx"),x=n("./MapStore2/web/client/components/styleeditor/SVGPreview.jsx"),P=y((function(e){return 0===e.items.length}),{title:a.createElement(j,{msgId:"styleeditor.filterMatchNotFound"}),glyph:"1-stilo"})(n("./MapStore2/web/client/components/misc/cardgrids/SideGrid.jsx")),C=function(e){var t=e.title,n=e._abstract,r=/^[a-zA-Z0-9\s]*$/,o=t&&null!==t.match(r);return o&&!n||o&&n&&null!==n.match(r)};e.exports=function(e){var t=e.selectedStyle,n=e.add,r=e.styleSettings,l=void 0===r?{}:r,p=e.geometryType,y=void 0===p?"":p,h=e.templates,T=void 0===h?[]:h,M=e.filterText,_=e.availableFormats,A=void 0===_?["sld","css"]:_,R=e.formFields,I=void 0===R?[{key:"title",placeholder:"styleeditor.titleSettingsplaceholder",title:a.createElement(j,{msgId:"styleeditor.titleSettings"})},{key:"_abstract",placeholder:"styleeditor.abstractSettingsplaceholder",title:a.createElement(j,{msgId:"styleeditor.abstractSettings"})}]:R,D=e.onFilter,k=void 0===D?function(){}:D,L=e.onSelect,N=void 0===L?function(){}:L,F=e.onClose,U=void 0===F?function(){}:F,G=e.onSave,B=void 0===G?function(){}:G,z=e.onUpdate,W=void 0===z?function(){}:z,V=e.loading;return a.createElement(m,{header:a.createElement("div",null,a.createElement(v,{filterPlaceholder:"styleeditor.templateFilterPlaceholder",filterText:M,onFilter:k}),a.createElement("div",{className:"text-center"},a.createElement("small",null,V?a.createElement(b,{size:15,style:{display:"inline-block"}}):a.createElement(j,{msgId:"styleeditor.createStyleFromTemplate"}))))},a.createElement(P,{colProps:{},cardComponent:g,onItemClick:function(e){var t=e.code,n=e.styleId,r=e.format;N({code:t,templateId:n,format:r||"css"}),W(o(o({},l),{},{title:s(T.filter((function(e){return e.styleId===n})).map((function(e){return e.title})))}))},items:T.filter((function(e){var t=e.title;return!M||M&&-1!==t.indexOf(M)})).filter((function(e){var t=e.types,n=e.format;return!t||s(t.filter((function(e){return e===y})))&&-1!==A.indexOf(n)})).map((function(e){var n;return o(o({},e),{},{preview:(null==e||null===(n=e.preview)||void 0===n?void 0:n.config)?a.createElement(x,e.preview.config):null==e?void 0:e.preview,selected:e.styleId===t,disabled:V})}))}),a.createElement(O,null,a.createElement(w,{show:!!n,fitContent:!0,title:a.createElement(j,{msgId:"styleeditor.createStyleModalTitle"}),onClose:function(){return U()},buttons:[{text:a.createElement(j,{msgId:"save"}),bsStyle:"primary",disabled:!C(l),onClick:function(){return B(l)}}]},a.createElement(c,null,a.createElement(u,{controlId:"styleTitle",validationState:!C(l)&&"error"},I.map((function(e){var t=e.title,n=e.placeholder,r=e.key;return a.createElement("span",{key:r},a.createElement(d,null,t),a.createElement(S,{type:"text",defaultValue:l[r],placeholder:n,onChange:function(e){return W(o(o({},l),{},i({},r,e.target.value)))}}))}))),!C(l)&&a.createElement(f,{style:{margin:0},bsStyle:"danger"},a.createElement(E,{msgId:"styleeditor.titleRequired"}))))))}},"./MapStore2/web/client/components/styleeditor/StyleToolbar.jsx":function(e,t,n){function r(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var i=n("./node_modules/react/index.js"),a=n("./MapStore2/web/client/components/misc/toolbar/Toolbar.jsx"),s=n("./MapStore2/web/client/components/misc/ResizableModal.jsx"),l=n("./MapStore2/web/client/components/misc/Portal.jsx"),c=n("./MapStore2/web/client/components/I18N/Message.jsx"),u=n("./node_modules/react-bootstrap/es/index.js").Alert;e.exports=function(e){var t=e.status,n=e.buttons,o=void 0===n?[]:n,p=e.templateId,d=e.error,f=e.isCodeChanged,m=e.showModal,y=e.onShowModal,b=e.loading,g=e.selectedStyle,h=e.layerDefaultStyleName,v=e.editEnabled,S=e.enableSetDefaultStyle,w=e.defaultStyles,O=void 0===w?["generic","point","line","polygon","raster"]:w,j=e.onBack,E=void 0===j?function(){}:j,x=e.onAdd,P=void 0===x?function(){}:x,C=e.onReset,T=void 0===C?function(){}:C,M=e.onDelete,_=void 0===M?function(){}:M,A=e.onSelectStyle,R=void 0===A?function(){}:A,I=e.onEditStyle,D=void 0===I?function(){}:I,k=e.onUpdate,L=void 0===k?function(){}:k,N=e.onSetDefault,F=void 0===N?function(){}:N,U=e.disableCodeEditing;return i.createElement("div",null,i.createElement(a,{btnDefaultProps:{className:"square-button-md",bsStyle:"primary"},buttons:[{glyph:"arrow-left",visible:!!t,tooltipId:"styleeditor.backToList",disabled:!!b,onClick:function(){"edit"===t&&f?y({title:i.createElement(c,{msgId:"styleeditor.closeWithoutSaveAlertTitle"}),message:i.createElement(u,{bsStyle:"warning",style:{margin:0}},i.createElement(c,{msgId:"styleeditor.closeWithoutSaveAlert"})),buttons:[{text:i.createElement(c,{msgId:"close"}),bsStyle:"primary",onClick:function(){y(null),E(),T()}}]}):(E(),T())}},{glyph:"1-stilo",tooltipId:"styleeditor.createNewStyle",visible:!(t||!v),disabled:!!b,onClick:function(){return R()}},{glyph:"code",tooltipId:"styleeditor.editSelectedStyle",visible:!(t||!v),disabled:!!b||-1!==O.indexOf(g)||!g&&-1!==O.indexOf(h)||U,onClick:function(){return D()}},{glyph:"ok",tooltipId:"styleeditor.saveCurrentStyle",disabled:!!(d&&d.edit&&d.edit.status)||!!b||-1!==O.indexOf(g),visible:!("edit"!==t||!v),onClick:function(){return L()}},{glyph:"plus",tooltipId:"styleeditor.addSelectedTemplate",visible:!("template"!==t||!p||!v),disabled:!!b,onClick:function(){return P()}},{glyph:"trash",tooltipId:"styleeditor.deleteSelectedStyle",disabled:!!b||-1!==O.indexOf(g)||!g,visible:!(t||!v),onClick:function(){y({title:i.createElement(c,{msgId:"styleeditor.deleteStyleAlertTitle"}),message:i.createElement(u,{bsStyle:"warning",style:{margin:0}},i.createElement(c,{msgId:"styleeditor.deleteStyleAlert"})),buttons:[{text:i.createElement(c,{msgId:"styleeditor.delete"}),bsStyle:"primary",onClick:function(){y(null),_(g)}}]})}},{glyph:"star",tooltipId:"styleeditor.setDefaultStyle",disabled:!!b||-1!==O.indexOf(g)||!g,visible:!(!S||t||!v),onClick:function(){return F()}}].concat(r(t?[]:o))}),i.createElement(l,null,i.createElement(s,{show:m,fitContent:!0,title:m&&m.title,onClose:function(){return y(null)},buttons:m&&m.buttons},m&&m.message)))}},"./MapStore2/web/client/components/styleeditor/hint/geocss.js":function(e,t,n){function r(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=n("./node_modules/lodash/lodash.js").head,c={short:"number",float:"number",double:"number",long:"number",decimal:"number",int:"number"};e.exports=function(e){var t=e.Pos;e.registerHelper("hint","geocss",(function(n){var o=n.getCursor(),i=n.getTokenAt(o),s=n.getLineTokens(o.line),u=s&&l(s.filter((function(e){var t=e.type,n=e.start;return"property"===t&&n<i.start})).map((function(e){return e.string}))),p=e.innerMode(n.getMode(),i.state);if("geocss"!==p.mode.name)return null;var d=i.start,f=o.ch,m=i.string.slice(0,f-d);/[^\w$_-]/.test(m)&&(m="",d=f=o.ch);var y=e.resolveMode("text/geocss")||{},b=y.propertyKeywords,g=y.pseudoProperties,h=y.envKeywords,v=(e.getMode({},"text/geocss")||{}).hintProperties,S={},w=!1,O=p.state.state;"pseudo"===O||"variable-3"===i.type?S=a({},g):"prop"===O?(w=!0,S=b&&b[u]&&b[u].values&&a({},b[u].values)||{}):"variable-2"===i.type?S=a({},h):"filter"===i.type?(w=!0,S=a({},v)):"block"!==O&&"maybeprop"!==O||(S=a({},b));var j=Object.keys(S).reduce((function(e,t){var n=!m||0===t.lastIndexOf(m,0);return[].concat(r(e),r(n&&[t]||[]))}),[]);return(j=0===j.length&&w?Object.keys(S).reduce((function(e,t){return[].concat(r(e),[t])}),[]):r(j)).length>0?{list:j.map((function(e){return{text:e,displayText:e,render:function(e,t,n){var r,o,i=document.createElement("span"),a=(r=S[n.displayText]||{},o=r.localPart,("gml"===r.prefix?"geometry":c[o])||o||"");i.innerHTML=a&&'{<span class="cm-desc">'.concat(a,"</span>} ")||"";var s=document.createElement("span");s.innerText=n.displayText,e.appendChild(i),e.appendChild(s)}}})),from:t(o.line,d),to:t(o.line,f)}:null}))}},"./MapStore2/web/client/components/styleeditor/mode/geocss.js":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var s=n("./node_modules/lodash/lodash.js"),l=s.startsWith,c=s.trim;e.exports=function(e){e.defineMode("geocss",(function(t){var n,r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.indentUnit,s=o.propertyKeywords&&o||e.resolveMode("text/geocss"),u=s.propertyKeywords,p=void 0===u?{}:u,d=s.colorKeywords,f=void 0===d?{}:d,m=s.valueKeywords,y=void 0===m?{}:m,b=s.logicKeywords,g=void 0===b?{}:b,h=s.allowNested,v={},S=function(e,t){return n=t,e},w=function(e){return function(t,n){for(var r=!1,o=t.next();o;){if(o===e&&!r){")"===e&&t.backUp(1);break}r=!r&&"\\"===o,o=t.next()}return(o===e||!r&&")"!==e)&&(n.tokenize=null),S("string","string")}},O=function(e,t){for(var n=!1,r=e.next();r;){if(n&&"/"===r){t.tokenize=null;break}n="*"===r,r=e.next()}return["comment","comment"]},j=function(e,t){var n=e.next();if("@"===n)return e.eat("{")?[null,"interpolation"]:e.match(/^(sd|scale)\b/)?["filter",null]:(e.eatWhile(/[\w\\\-]/),e.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"]);if("/"===n)return e.eat("*")?(t.tokenize=O,O(e,t)):["operator","operator"];if('"'===n||"'"===n)return t.tokenize=w(n),t.tokenize(e,t);if("#"===n)return e.eatWhile(/[\w\\\-]/),S("atom","hash");if(/\d/.test(n)||"."===n&&e.eat(/\d/))return e.eatWhile(/[\w.%]/),S("number","unit");if("-"===n){if(/[\d.]/.test(e.peek()))return e.eatWhile(/[\w.%]/),S("number","unit");if(e.match(/^-[\w\\\-]+/))return e.eatWhile(/[\w\\\-]/),e.match(/^\s*:/,!1)?S("variable-2","variable-definition"):S("variable-2","variable");if(e.match(/^\w+-/))return S("meta","meta")}else{if(/[,+>*\/]/.test(n))return S(null,"select-op");if("."===n&&e.match(/^-?[_a-z][_a-z0-9-]*/i))return S("qualifier","qualifier");if(/[:;{}\[\]\(\)]/.test(n))return S(null,n);if(/[\w\\\-]/.test(n))return e.eatWhile(/[\w\\\-]/),S("property","word")}return S(null,null)};function E(e,t,n){this.type=e,this.indent=t,this.prev=n}var x=function(e,t,n,r){return e.context=new E(n,t.indentation()+(!1===r?0:i),e.context),n},P=function(e){return e.context.prev&&(e.context=e.context.prev),e.context.type},C=function(e,t,n){return v[n.context.type](e,t,n)},T=function(e,t,n,r){for(var o=r||1;o>0;o--)n.context=n.context.prev;return C(e,t,n)},M=function(e){var t=e.current().toLowerCase();r=y.hasOwnProperty(t)?"atom":f.hasOwnProperty(t)?"keyword":"variable"};return v.top=function(e,t,n){if("{"===e)return x(n,t,"block");if("}"===e&&n.context.prev)return P(n);if("hash"===e)r="builtin";else if("word"===e)r="tag";else{if("variable-definition"===e)return"maybeprop";if("interpolation"===e)return x(n,t,"interpolation");if(":"===e)return"pseudo";if(h&&"("===e)return x(n,t,"parens")}return n.context.type},v.block=function(e,t,n){if("word"===e){var o=t.current().toLowerCase();return p.hasOwnProperty(o)?(r="property","maybeprop"):g.hasOwnProperty(c(o))?(r="logic","maybeprop"):l(c(t.string),"[")?(r="filter","maybeprop"):(r+=" error","maybeprop")}return"meta"===e?"block":h||"hash"!==e&&"qualifier"!==e?v.top(e,t,n):(r="error","block")},v.maybeprop=function(e,t,n){return":"===e?x(n,t,"prop"):C(e,t,n)},v.prop=function(e,t,n){if(";"===e)return P(n);if("{"===e&&h)return x(n,t,"propBlock");if("}"===e||"{"===e)return T(e,t,n);if("("===e)return x(n,t,"parens");if("hash"!==e||/^#([0-9a-fA-f]{3,4}|[0-9a-fA-f]{6}|[0-9a-fA-f]{8})$/.test(t.current())){if("word"===e)M(t);else if("interpolation"===e)return x(n,t,"interpolation")}else r+=" error";return"prop"},v.propBlock=function(e,t,n){return"}"===e?P(n):"word"===e?(r="property","maybeprop"):n.context.type},v.parens=function(e,t,n){return"{"===e||"}"===e?T(e,t,n):")"===e?P(n):"("===e?x(n,t,"parens"):"interpolation"===e?x(n,t,"interpolation"):("word"===e&&M(t),"parens")},v.pseudo=function(e,t,o){return"word"===e?(r="variable-3",o.context.type):C(n,t,o)},v.at=function(e,t,n){return";"===e?P(n):"{"===e||"}"===e?T(e,t,n):("word"===e?r="tag":"hash"===e&&(r="builtin"),"at")},v.interpolation=function(e,t,n){return"}"===e?P(n):"{"===e||";"===e?T(e,t,n):("word"===e?r="variable":"variable"!==e&&"("!==e&&")"!==e&&(r="error"),"interpolation")},{startState:function(e){return{tokenize:null,state:"top",stateArg:null,context:new E("block",e||0,null)}},token:function(e,t){if(!t.tokenize&&e.eatSpace())return null;var o=(t.tokenize||j)(e,t);return o&&"object"===a(o)&&(n=o[1],o=o[0]),r=o,t.state=v[t.state](n,e,t),r},indent:function(e,t){var n=e.context,r=t&&t.charAt(0),o=n.indent;return"prop"!==n.type||"}"!==r&&")"!==r||(n=n.prev),n.prev&&("}"!==r||"block"!==n.type&&"top"!==n.type&&"interpolation"!==n.type?(")"===r&&"parens"===n.type||"{"===r&&("at"===n.type||"atBlock"===n.type))&&(o=Math.max(0,n.indent-i),n=n.prev):o=(n=n.prev).indent),o},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",fold:"brace"}}));var t={colorKeywords:["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],valueKeywords:["round"],pseudoProperties:["mark","shield","stroke","fill","symbol","nth-mark","nth-shield","nth-stroke","nth-fill","nth-symbol"],logicKeywords:["and","or"]};e.defineMIME("text/geocss",o(o({},Object.keys(t).reduce((function(e,n){return o(o({},e),{},i({},n,t[n].reduce((function(e,t){return o(o({},e),{},i({},t,!0))}),{})))}),{})),{},{propertyKeywords:{mark:{values:{"symbol(circle)":!0}},"mark-composite":!0,"mark-mime":!0,"mark-geometry":!0,"mark-size":!0,"mark-rotation":!0,"mark-label-obstacle":!0,"mark-anchor":!0,"mark-offset":!0,"z-index":!0,stroke:!0,"stroke-composite":!0,"stroke-geometry":!0,"stroke-offset":!0,"stroke-mime":!0,"stroke-opacity":!0,"stroke-width":!0,"stroke-size":!0,"stroke-rotation":!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-dasharray":!0,"stroke-dashoffset":!0,"stroke-repeat":!0,"stroke-label-obstacle":!0,fill:!0,"fill-composite":!0,"fill-geometry":!0,"fill-mime":!0,"fill-opacity":!0,"fill-size":!0,"fill-rotation":!0,"fill-label-obstacle":!0,"graphic-margin":!0,random:!0,"random-seed":!0,"random-rotation":!0,"random-symbol-count":!0,"random-tile-size":!0,"fill-random":!0,"fill-random-seed":!0,"fill-random-rotation":!0,"fill-random-symbol-count":!0,"fill-random-tile-size":!0,label:!0,"label-geometry":!0,"label-anchor":!0,"label-offset":!0,"label-rotation":!0,"label-z-index":!0,shield:!0,"shield-mime":!0,"font-family":!0,"font-fill":!0,"font-style":!0,"font-weight":!0,"font-size":!0,"halo-radius":!0,"halo-color":!0,"halo-opacity":!0,"label-padding":!0,"label-group":!0,"label-max-displacement":!0,"label-min-group-distance":!0,"label-repeat":!0,"label-all-group":!0,"label-remove-overlaps":!0,"label-allow-overruns":!0,"label-follow-line":!0,"label-max-angle-delta":!0,"label-auto-wrap":!0,"label-force-ltr":!0,"label-conflict-resolution":!0,"label-fit-goodness":!0,"label-priority":!0,"shield-resize":!0,"shield-margin":!0,"label-underline-text":!0,"label-strikethrough-text":!0,"label-char-spacing":!0,"label-word-spacing":!0,"raster-channels":!0,"raster-composite":!0,"raster-geometry":!0,"raster-opacity":!0,"raster-contrast-enhancement":!0,"raster-contrast-enhancement-algorithm":!0,"raster-contrast-enhancement-min":!0,"raster-contrast-enhancement-max":!0,"raster-gamma":!0,"raster-z-index":!0,"raster-color-map":!0,"raster-color-map-type":!0,composite:!0,"composite-base":!0,geometry:!0,"sort-by":!0,"sort-by-group":!0,transform:!0,size:!0,rotation:!0},envKeywords:{sd:{localPart:"env"},scale:{localPart:"env"}},allowNested:!0,name:"geocss"}))}},"./MapStore2/web/client/components/tutorial/Tutorial.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=n("./node_modules/prop-types/index.js"),f=n("./node_modules/react/index.js"),m=n("./node_modules/@geosolutions/react-joyride/lib/index.js").default,y=n("./MapStore2/web/client/components/I18N/I18N.jsx"),b=n("./node_modules/object-assign/index.js"),g=n("./node_modules/lodash/lodash.js").head,h=n("./MapStore2/web/client/components/misc/Portal.jsx");n("./node_modules/@geosolutions/react-joyride/lib/react-joyride-compiled.css"),n("./MapStore2/web/client/components/tutorial/style/tutorial.css");var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(u,e);var t,n,r,l=s(u);function u(){var e;o(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return p(c(e=l.call.apply(l,[this].concat(n))),"state",{checkAction:{}}),p(c(e),"onTour",(function(t){if(e.props.steps.length>0&&t&&t.type){var n,r;null===(n=document.querySelector(null==t||null===(r=t.step)||void 0===r?void 0:r.selector))||void 0===n||n.scrollIntoView(e.props.scrollIntoViewOptions);var o=t.type.split(":");("tooltip"!==o[0]&&"before"===o[1]||"start"===t.action||"target_not_found"===o[1]||"finished"===t.type)&&e.props.actions.onUpdate(t,e.props.steps)}})),e}return t=u,(n=[{key:"componentDidMount",value:function(){var e=this.props.presetList[this.props.preset]||[],t=this.props.showCheckbox?f.createElement("div",{id:"tutorial-intro-checkbox-container"},f.createElement("input",{type:"checkbox",id:"tutorial-intro-checkbox",className:"tutorial-tooltip-intro-checkbox",onChange:this.props.actions.onDisable}),f.createElement("span",null,f.createElement(y.Message,{msgId:"tutorial.checkbox"}))):f.createElement("div",{id:"tutorial-intro-checkbox-container"});this.props.actions.onSetup("default",e,this.props.introStyle,t,this.props.defaultStep,b({},this.props.presetList,{default_tutorial:e}))}},{key:"UNSAFE_componentWillUpdate",value:function(e,t){if(this.props.steps.length>0){if(!this.props.toggle&&e.toggle)this.props.actions.onStart(),this.setState({checkAction:{}});else if(!this.state.checkAction[e.stepIndex]&&("run"===this.props.status&&"error"===e.status||"error"===this.props.status&&"error"===e.status)){var n=e.steps&&g(e.steps.filter((function(t,n){return n===e.stepIndex}))),r=(n&&n.action&&!this.state.checkAction[e.stepIndex]?e.stepIndex:null)||this.checkFirstValidStep(e.stepIndex,e.tourAction);this.restartTour(r,p({},r,!0))}else"run"===this.props.status&&"close"===e.status&&(this.closeTour(),this.setState({checkAction:{}}));if(this.state.checkAction&&t.checkAction&&!this.state.checkAction[e.stepIndex]&&t.checkAction[e.stepIndex]){var o=g(e.steps.filter((function(t,n){return n===e.stepIndex})));if(!(o&&o.selector&&document.querySelector(o.selector))){var i=this.checkFirstValidStep(e.stepIndex,e.tourAction);this.restartTour(i,{})}}}}},{key:"componentWillUnmount",value:function(){this.props.actions.onClose(),this.props.actions.onReset()}},{key:"render",value:function(){var e,t=this;return e=this.props.steps.length>0?f.createElement(m,{ref:function(e){return t.joyride=e},steps:this.props.steps,stepIndex:this.props.stepIndex,run:this.props.run,autoStart:this.props.autoStart,keyboardNavigation:this.props.keyboardNavigation,locale:{back:f.createElement(y.Message,{msgId:"tutorial.back"}),close:f.createElement(y.Message,{msgId:"tutorial.close"}),last:f.createElement(y.Message,{msgId:"tutorial.last"}),next:f.createElement(y.Message,{msgId:"tutorial.next"}),skip:f.createElement(y.Message,{msgId:"tutorial.skip"})},resizeDebounce:this.props.resizeDebounce,resizeDebounceDelay:this.props.resizeDebounceDelay,holePadding:this.props.holePadding,scrollOffset:this.props.scrollOffset,scrollToSteps:this.props.scrollToSteps,scrollToFirstStep:this.props.scrollToFirstStep,showBackButton:this.props.showBackButton,showOverlay:this.props.showOverlay,allowClicksThruHole:this.props.allowClicksThruHole,showSkipButton:this.props.showSkipButton,showStepsProgress:this.props.showStepsProgress,tooltipOffset:this.props.tooltipOffset,disableOverlay:this.props.disableOverlay,type:"continuous",debug:!1,callback:this.onTour}):f.createElement("div",{className:"tutorial-joyride-placeholder"}),f.createElement(h,null,f.createElement("div",null,e,f.createElement("div",{id:"intro-tutorial",className:"tutorial-presentation-position",style:{top:this.props.introPosition}})))}},{key:"checkFirstValidStep",value:function(e,t){var n=[].concat(this.props.steps);return"back"===t?(n=n.slice(0,e)).sort((function(e,t){return t.index-e.index})):(n=n.slice(e+1,this.props.steps.length)).sort((function(e,t){return e.index-t.index})),(n=n.filter((function(e){return document.querySelector(e.selector)})).map((function(e){return e.index})))&&n.length>0?n[0]:-1}},{key:"closeTour",value:function(){var e=document.querySelector(this.props.steps[0].selector)?0:this.checkFirstValidStep(0,"next");-1===e?this.props.actions.onReset():this.joyride.setState({index:e,shouldRedraw:!0}),this.props.actions.onClose()}},{key:"restartTour",value:function(e,t){-1===e?this.closeTour():(this.joyride.setState({index:e,isRunning:!0,shouldRedraw:!0,shouldRenderTooltip:!0}),this.props.actions.onStart(),this.setState({checkAction:t}))}}])&&i(t.prototype,n),r&&i(t,r),u}(f.Component);p(v,"propTypes",{actions:d.object,allowClicksThruHole:d.bool,autoStart:d.bool,defaultStep:d.object,disableOverlay:d.bool,holePadding:d.number,intro:d.bool,introPosition:d.number,introStyle:d.object,keyboardNavigation:d.bool,preset:d.string,presetList:d.object,run:d.bool,resizeDebounce:d.bool,resizeDebounceDelay:d.number,scrollIntoViewOptions:d.bool,scrollOffset:d.number,scrollToFirstStep:d.bool,scrollToSteps:d.bool,showBackButton:d.bool,showCheckbox:d.bool,showOverlay:d.bool,showSkipButton:d.bool,showStepsProgress:d.bool,status:d.string,steps:d.array,stepIndex:d.number,toggle:d.bool,tooltipOffset:d.number,tourAction:d.string}),p(v,"defaultProps",{toggle:!1,status:"run",preset:"default_tutorial",presetList:{},introPosition:(window.innerHeight-348)/2,showCheckbox:!0,defaultStep:{title:"",text:"",position:"bottom",type:"click"},introStyle:{backgroundColor:"transparent",color:"#fff",mainColor:"#fff",textAlign:"center",header:{padding:5,fontFamily:"Georgia, serif",fontSize:"2.8em"},main:{fontSize:"1.0em",padding:5},footer:{padding:10},button:{color:"#fff"},close:{display:"none"},skip:{color:"#fff"}},tourAction:"next",stepIndex:0,steps:[],run:!0,autoStart:!0,keyboardNavigation:!0,resizeDebounce:!1,resizeDebounceDelay:200,holePadding:0,scrollOffset:20,scrollToSteps:!0,scrollToFirstStep:!0,showBackButton:!0,showOverlay:!0,allowClicksThruHole:!0,showSkipButton:!0,showStepsProgress:!1,tooltipOffset:10,disableOverlay:!1,actions:{onSetup:function(){},onStart:function(){},onUpdate:function(){},onDisable:function(){},onReset:function(){},onClose:function(){}},scrollIntoViewOptions:{block:"end"}}),e.exports=v},"./MapStore2/web/client/components/tutorial/steps/CesiumTooltip.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=n("./node_modules/react/index.js"),d=n("./MapStore2/web/client/components/I18N/I18N.jsx"),f=n("./MapStore2/web/client/components/tutorial/steps/assets/img/MouseLeft.svg"),m=n("./MapStore2/web/client/components/tutorial/steps/assets/img/MouseRight.svg"),y=n("./MapStore2/web/client/components/tutorial/steps/assets/img/MouseMiddle.svg"),b=n("./MapStore2/web/client/components/tutorial/steps/assets/img/TouchDrag.svg"),g=n("./MapStore2/web/client/components/tutorial/steps/assets/img/TouchZoom.svg"),h=n("./MapStore2/web/client/components/tutorial/steps/assets/img/TouchTilt.svg"),v=n("./MapStore2/web/client/components/tutorial/steps/assets/img/TouchRotate.svg"),S=n("./node_modules/prop-types/index.js"),w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(c,e);var t,n,r,l=s(c);function c(){return o(this,c),l.apply(this,arguments)}return t=c,(n=[{key:"render",value:function(){return this.props.touch?p.createElement("div",null,p.createElement("table",null,p.createElement("tbody",null,p.createElement("tr",null,p.createElement("td",null,p.createElement("img",{src:b,width:"70",height:"48"})),p.createElement("td",null,p.createElement("div",{style:{color:"#66ccff"}},p.createElement(d.Message,{msgId:"tutorial.cesium.pan"})),p.createElement("div",null,p.createElement(d.Message,{msgId:"tutorial.cesium.oneDrag"})))),p.createElement("tr",{style:{height:10}}),p.createElement("tr",null,p.createElement("td",null,p.createElement("img",{src:g,width:"70",height:"48"})),p.createElement("td",null,p.createElement("div",{style:{color:"#65fd00"}},p.createElement(d.Message,{msgId:"tutorial.cesium.zoom"})),p.createElement("div",null,p.createElement(d.Message,{msgId:"tutorial.cesium.twoPinch"})))),p.createElement("tr",{style:{height:10}}),p.createElement("tr",null,p.createElement("td",null,p.createElement("img",{src:h,width:"70",height:"48"})),p.createElement("td",null,p.createElement("div",{style:{color:"#ffd800"}},p.createElement(d.Message,{msgId:"tutorial.cesium.tilt"})),p.createElement("div",null,p.createElement(d.Message,{msgId:"tutorial.cesium.twoDragSame"})))),p.createElement("tr",{style:{height:10}}),p.createElement("tr",null,p.createElement("td",null,p.createElement("img",{src:v,width:"70",height:"48"})),p.createElement("td",null,p.createElement("div",{style:{color:"#d800d8"}},p.createElement(d.Message,{msgId:"tutorial.cesium.rotate"})),p.createElement("div",null,p.createElement(d.Message,{msgId:"tutorial.cesium.twoDragOpposite"}))))))):p.createElement("div",null,p.createElement("table",null,p.createElement("tbody",null,p.createElement("tr",null,p.createElement("td",null,p.createElement("img",{src:f,width:"48",height:"48"})),p.createElement("td",null,p.createElement("div",{style:{color:"#66ccff"}},p.createElement(d.Message,{msgId:"tutorial.cesium.pan"})),p.createElement("div",null,p.createElement(d.Message,{msgId:"tutorial.cesium.leftClick"})))),p.createElement("tr",{style:{height:10}}),p.createElement("tr",null,p.createElement("td",null,p.createElement("img",{src:m,width:"48",height:"48"})),p.createElement("td",null,p.createElement("div",{style:{color:"#65fd00"}},p.createElement(d.Message,{msgId:"tutorial.cesium.zoom"})),p.createElement("div",null,p.createElement(d.Message,{msgId:"tutorial.cesium.rightClick"})))),p.createElement("tr",{style:{height:10}}),p.createElement("tr",null,p.createElement("td",null,p.createElement("img",{src:y,width:"48",height:"48"})),p.createElement("td",null,p.createElement("div",{style:{color:"#ffd800"}},p.createElement(d.Message,{msgId:"tutorial.cesium.rotate"})),p.createElement("div",null,p.createElement(d.Message,{msgId:"tutorial.cesium.middleClick"})))))))}}])&&i(t.prototype,n),r&&i(t,r),c}(p.Component);u(w,"propTypes",{touch:S.bool}),u(w,"defaultProps",{touch:!1}),e.exports=w},"./MapStore2/web/client/components/tutorial/steps/assets/img/MouseLeft.svg":function(e,t,n){e.exports=n.p+"MouseLeft.svg"},"./MapStore2/web/client/components/tutorial/steps/assets/img/MouseMiddle.svg":function(e,t,n){e.exports=n.p+"MouseMiddle.svg"},"./MapStore2/web/client/components/tutorial/steps/assets/img/MouseRight.svg":function(e,t,n){e.exports=n.p+"MouseRight.svg"},"./MapStore2/web/client/components/tutorial/steps/assets/img/TouchDrag.svg":function(e,t,n){e.exports=n.p+"TouchDrag.svg"},"./MapStore2/web/client/components/tutorial/steps/assets/img/TouchRotate.svg":function(e,t,n){e.exports=n.p+"TouchRotate.svg"},"./MapStore2/web/client/components/tutorial/steps/assets/img/TouchTilt.svg":function(e,t,n){e.exports=n.p+"TouchTilt.svg"},"./MapStore2/web/client/components/tutorial/steps/assets/img/TouchZoom.svg":function(e,t,n){e.exports=n.p+"TouchZoom.svg"},"./MapStore2/web/client/components/tutorial/style/tutorial.css":function(e,t,n){var r=n("./node_modules/css-loader/index.js!./node_modules/postcss-loader/src/index.js?!./MapStore2/web/client/components/tutorial/style/tutorial.css");"string"==typeof r&&(r=[[e.i,r,""]]);n("./node_modules/style-loader/addStyles.js")(r,{});r.locals&&(e.exports=r.locals)},"./MapStore2/web/client/components/widgets/builder/BuilderHeader.jsx":function(e,t,n){var r=n("./node_modules/react/index.js"),o=n("./node_modules/react-bootstrap/es/index.js"),i=o.Button,a=o.Row,s=o.Col,l=o.Glyphicon,c=n("./MapStore2/web/client/components/I18N/Message.jsx");e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onClose,n=void 0===t?function(){}:t,o=e.children;return r.createElement("div",{className:"mapstore-flex-container"},r.createElement("div",{className:"m-header bg-body widgets-builder-header"},r.createElement(a,null,r.createElement(s,{md:12,className:"text-center",style:{overflow:"hidden",lineHeight:"52px"}},r.createElement(i,{onClick:function(){return n()},className:"pull-left on-close-btn square-button no-border "},r.createElement(l,{glyph:"1-close"})),r.createElement("span",{style:{padding:"50px 0 0 0",fontSize:16}},r.createElement(c,{msgId:"widgets.builder.header.title"})),r.createElement("div",{style:{display:"flex"},className:"square-button pull-right no-border"},r.createElement(l,{glyph:"stats",className:"text-primary"})))),r.createElement(a,{className:"text-center"},r.createElement("div",{className:"m-padding-md"},o))))}},"./MapStore2/web/client/components/widgets/builder/WidgetTypeSelector.jsx":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n("./node_modules/react/index.js"),s=n("./MapStore2/web/client/components/I18N/Message.jsx"),l=n("./MapStore2/web/client/components/misc/cardgrids/SideGrid.jsx"),c=n("./MapStore2/web/client/components/misc/FitIcon.jsx"),u=[{title:a.createElement(s,{msgId:"widgets.types.chart.title"}),type:"chart",caption:a.createElement(s,{msgId:"widgets.types.chart.caption"}),glyph:"stats",className:"ms-widget-selector-chart"},{title:a.createElement(s,{msgId:"widgets.types.text.title"}),type:"text",glyph:"sheet",caption:a.createElement(s,{msgId:"widgets.types.text.caption"}),className:"ms-widget-selector-text"},{title:a.createElement(s,{msgId:"widgets.types.table.title"}),type:"table",glyph:"features-grid",caption:a.createElement(s,{msgId:"widgets.types.table.caption"}),className:"ms-widget-selector-table"},{title:a.createElement(s,{msgId:"widgets.types.counter.title"}),type:"counter",glyph:"counter",caption:a.createElement(s,{msgId:"widgets.types.counter.caption"}),className:"ms-widget-selector-counter"},{title:a.createElement(s,{msgId:"widgets.types.map.title"}),type:"map",glyph:"1-map",caption:a.createElement(s,{msgId:"widgets.types.map.caption"}),className:"ms-widget-selector-map"},{title:a.createElement(s,{msgId:"widgets.types.legend.title"}),type:"legend",glyph:"list",caption:a.createElement(s,{msgId:"widgets.types.legend.caption"}),className:"ms-widget-selector-legend"}];e.exports=function(e){var t=e.widgetTypes,n=void 0===t?u:t,r=e.typeFilter,i=void 0===r?function(){return!0}:r,s=e.onSelect,p=void 0===s?function(){}:s;return a.createElement(l,{key:"content",onItemClick:function(e){p(e.type)},items:n&&n.filter(i).map((function(e){return o(o({},e),{},{preview:a.createElement(c,{glyph:e.glyph,padding:20})})}))})}},"./MapStore2/web/client/components/widgets/builder/wizard/ChartWizard.jsx":function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var o=n("./node_modules/react/index.js"),i=n("./MapStore2/web/client/components/misc/wizard/enhancers.js").wizardHandlers,a=n("./MapStore2/web/client/components/misc/enhancers/loadingState.jsx")((function(e){var t=e.loading,n=e.data;return t||!n}),{width:500,height:200}),s=n("./MapStore2/web/client/components/widgets/builder/wizard/common/noAttributesEmptyView.js")((function(e){var t=e.featureTypeProperties;return 0===(void 0===t?[]:t).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,n=void 0===t?"":t;return 0!==n.indexOf("gml:")})).length}))(n("./MapStore2/web/client/components/widgets/builder/wizard/chart/ChartType.jsx")),l=n("./MapStore2/web/client/components/widgets/builder/wizard/common/wfsChartOptions.js")(n("./MapStore2/web/client/components/widgets/builder/wizard/common/WPSWidgetOptions.jsx")),c=n("./MapStore2/web/client/components/widgets/builder/wizard/common/WidgetOptions.jsx"),u=n("./MapStore2/web/client/components/widgets/enhancers/sampleChartData.js"),p=n("./MapStore2/web/client/components/widgets/enhancers/wpsChart.js"),d=n("./MapStore2/web/client/components/widgets/enhancers/dependenciesToWidget.js"),f=n("./MapStore2/web/client/components/widgets/enhancers/dependenciesToFilter.js"),m=n("./MapStore2/web/client/components/widgets/enhancers/dependenciesToOptions.js"),y=n("./MapStore2/web/client/components/widgets/enhancers/emptyChartState.js"),b=n("./MapStore2/web/client/components/widgets/enhancers/errorChartState.js"),g=n("./node_modules/recompose/es/Recompose.js"),h=g.compose,v=g.lifecycle,S=h(d,f,m,p,a,b,y)(n("./MapStore2/web/client/components/charts/SimpleChart.jsx")),w=u(n("./MapStore2/web/client/components/charts/SimpleChart.jsx")),O={width:430,height:200},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.aggregateFunction&&e.aggregationAttribute&&e.groupByAttributes},E=i(n("./MapStore2/web/client/components/misc/wizard/WizardContainer.jsx")),x=function(e){var t=e.data,n=void 0===t?{}:t,i=e.layer,a=e.dependencies,s=void 0===a?{}:a,l=e.setValid,c=void 0===l?function(){}:l,u=e.shortenChartLabelThreshold;return j(n.options)?o.createElement(S,r({key:"preview-chart",onLoad:function(){return c(!0)},onLoadError:function(){return c(!1)},isAnimationActive:!1,dependencies:s,dependenciesMap:n.dependenciesMap},O,{type:n.type,legend:n.legend,cartesian:n.cartesian,layer:n.layer||i,filter:n.filter,geomProp:n.geomProp,mapSync:n.mapSync,autoColorOptions:n.autoColorOptions,options:n.options,yAxis:n.yAxis,xAxisAngle:n.xAxisAngle,yAxisLabel:n.yAxisLabel,shortenChartLabelThreshold:u})):o.createElement(w,r({key:"sample-chart",isAnimationActive:!1},O,{type:n.type,autoColorOptions:n.autoColorOptions,legend:n.legend,cartesian:n.cartesian,yAxis:n.yAxis,shortenChartLabelThreshold:u}))},P=h(v({UNSAFE_componentWillReceiveProps:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data,n=void 0===t?{}:t,r=e.valid,o=e.setValid,i=void 0===o?function(){}:o;r&&!j(n.options)&&i(!1)}}));e.exports=P((function(e){var t=e.onChange,n=void 0===t?function(){}:t,r=e.onFinish,i=void 0===r?function(){}:r,a=e.setPage,u=void 0===a?function(){}:a,p=e.setValid,d=void 0===p?function(){}:p,f=e.data,m=void 0===f?{}:f,y=e.layer,b=void 0===y?{}:y,g=e.step,h=void 0===g?0:g,v=e.types,S=e.featureTypeProperties,w=e.dependencies,O=e.shortenChartLabelThreshold;return o.createElement(E,{step:h,setPage:u,onFinish:i,isStepValid:function(e){return 0===e?m.chartType:1!==e||j(m.options)},hideButtons:!0},o.createElement(s,{key:"type",featureTypeProperties:S,type:m.type,onSelect:function(e){n("type",e)}}),o.createElement(l,{dependencies:w,key:"chart-options",featureTypeProperties:S,types:v,data:m,onChange:n,layer:m.layer||b,sampleChart:x({data:m,layer:m.layer||b,dependencies:w,setValid:function(e){return d(e&&j(m.options))},shortenChartLabelThreshold:O})}),o.createElement(c,{key:"widget-options",data:m,onChange:n,layer:m.layer||b,sampleChart:x({data:m,layer:m.layer||b,dependencies:w,setValid:function(e){return d(e&&j(m.options))},shortenChartLabelThreshold:O})}))}))},"./MapStore2/web/client/components/widgets/builder/wizard/CounterWizard.jsx":function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var o=n("./node_modules/react/index.js"),i=n("./node_modules/lodash/lodash.js").isNil,a=n("./node_modules/recompose/es/Recompose.js"),s=a.compose,l=a.lifecycle,c=n("./MapStore2/web/client/components/misc/wizard/enhancers.js").wizardHandlers,u=n("./MapStore2/web/client/components/misc/enhancers/loadingState.jsx")((function(e){var t=e.loading,n=e.data;return t||!n}),{width:500,height:200}),p=n("./MapStore2/web/client/components/widgets/builder/wizard/common/wfsChartOptions.js")(n("./MapStore2/web/client/components/widgets/builder/wizard/common/noAttributesEmptyView.js")((function(e){var t=e.options;return 0===(void 0===t?[]:t).length}))(n("./MapStore2/web/client/components/widgets/builder/wizard/common/WPSWidgetOptions.jsx"))),d=n("./MapStore2/web/client/components/widgets/builder/wizard/common/WidgetOptions.jsx"),f=n("./MapStore2/web/client/components/widgets/enhancers/wpsCounter.js"),m=n("./MapStore2/web/client/components/widgets/enhancers/dependenciesToFilter.js"),y=n("./MapStore2/web/client/components/widgets/enhancers/dependenciesToOptions.js"),b=n("./MapStore2/web/client/components/widgets/enhancers/dependenciesToWidget.js"),g=n("./MapStore2/web/client/components/widgets/enhancers/emptyChartState.js"),h=n("./MapStore2/web/client/components/widgets/enhancers/errorChartState.js"),v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.aggregateFunction&&e.aggregationAttribute},S=s(l({UNSAFE_componentWillReceiveProps:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.valid,n=e.data,r=void 0===n?[]:n,o=e.options,a=void 0===o?{}:o,s=e.setValid,l=void 0===s?function(){}:s,c=e.error,u=!i(r[0])&&!c;!!t!=!!u&&v(a)&&l(u)}})),w=s(b,m,y,f,S,u,h,g),O={style:{width:450,height:100}},j=c(n("./MapStore2/web/client/components/misc/wizard/WizardContainer.jsx")),E=n("./MapStore2/web/client/components/widgets/widget/CounterView.jsx"),x=w(E),P=function(e){var t=e.data,n=void 0===t?{}:t,i=e.layer,a=e.dependencies,s=void 0===a?{}:a,l=e.valid,c=e.setValid,u=void 0===c?function(){}:c;return v(n.options)?o.createElement(x,r({},O,{valid:l,dependenciesMap:n.dependenciesMap,dependencies:s,setValid:u,type:n.type,legend:n.legend,layer:n.layer||i,filter:n.filter,geomProp:n.geomProp,mapSync:n.mapSync,options:n.options})):o.createElement(E,r({},O,{data:[{data:42}],options:n.options,series:[{dataKey:"data"}]}))},C=s(l({UNSAFE_componentWillReceiveProps:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data,n=void 0===t?{}:t,r=e.valid,o=e.setValid,i=void 0===o?function(){}:o;r&&!v(n.options)&&i(!1)}}));e.exports=C((function(e){var t=e.onChange,n=void 0===t?function(){}:t,r=e.onFinish,i=void 0===r?function(){}:r,a=e.setPage,s=void 0===a?function(){}:a,l=e.setValid,c=void 0===l?function(){}:l,u=e.valid,f=e.formOptions,m=e.data,y=void 0===m?{}:m,b=e.layer,g=void 0===b?{}:b,h=e.step,S=void 0===h?0:h,w=e.types,O=e.featureTypeProperties,E=e.dependencies;return o.createElement(j,{step:S,setPage:s,onFinish:i,isStepValid:function(e){return 1!==e||v(y.options)},hideButtons:!0},o.createElement(p,{dependencies:E,key:"chart-options",formOptions:f,featureTypeProperties:O,types:w,data:y,onChange:n,layer:y.layer||g,sampleChart:o.createElement(P,{data:y,valid:u,layer:y.layer||g,dependencies:E,setValid:function(e){return c(e&&v(y.options))}})}),o.createElement(d,{key:"widget-options",data:y,onChange:n,layer:y.layer||g,sampleChart:o.createElement(P,{data:y,valid:u,layer:y.layer||g,dependencies:E,setValid:function(e){return c(e&&v(y.options))}})}))}))},"./MapStore2/web/client/components/widgets/builder/wizard/LegendWizard.jsx":function(e,t,n){var r=n("./node_modules/react/index.js"),o=n("./node_modules/recompose/es/Recompose.js").compose,i=n("./MapStore2/web/client/components/misc/enhancers/emptyState.jsx"),a=n("./MapStore2/web/client/components/misc/wizard/enhancers.js").wizardHandlers,s=n("./node_modules/react-bootstrap/es/index.js"),l=s.Row,c=s.Col,u=n("./MapStore2/web/client/components/widgets/enhancers/legendWidget.js"),p=n("./MapStore2/web/client/components/widgets/builder/wizard/common/WidgetOptions.jsx"),d=a(n("./MapStore2/web/client/components/misc/wizard/WizardContainer.jsx")),f=n("./MapStore2/web/client/components/misc/wizard/StepHeader.jsx"),m=n("./MapStore2/web/client/components/I18N/Message.jsx"),y=n("./MapStore2/web/client/components/widgets/enhancers/emptyLegendState.js"),b=o(u,i((function(e){return!e.valid}),{title:r.createElement(m,{msgId:"widgets.builder.errors.noMapAvailableForLegend"}),description:r.createElement(m,{msgId:"widgets.builder.errors.noMapAvailableForLegendDescription"})}),y(!1))(n("./MapStore2/web/client/components/widgets/widget/LegendView.jsx"));e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onChange,n=void 0===t?function(){}:t,o=e.onFinish,i=void 0===o?function(){}:o,a=e.setPage,s=void 0===a?function(){}:a,u=e.step,y=void 0===u?0:u,g=e.dependencies,h=e.valid,v=e.data,S=void 0===v?{}:v,w=e.currentLocale,O=e.language;return r.createElement(d,{step:y,setPage:s,onFinish:i,hideButtons:!0},r.createElement(l,null,r.createElement(f,{title:r.createElement(m,{msgId:"widgets.builder.wizard.preview"})}),r.createElement(c,{xs:12},r.createElement("div",{style:{marginBottom:"30px"}},r.createElement(b,{valid:h,dependencies:g,dependenciesMap:S.dependenciesMap,key:"widget-options",onChange:n,currentLocale:w,language:O})))),r.createElement(p,{key:"widget-options",onChange:n}))}},"./MapStore2/web/client/components/widgets/builder/wizard/MapWizard.jsx":function(e,t,n){var r=n("./node_modules/react/index.js"),o=n("./MapStore2/web/client/components/widgets/builder/wizard/common/WidgetOptions.jsx"),i=(0,n("./MapStore2/web/client/components/misc/wizard/enhancers.js").wizardHandlers)(n("./MapStore2/web/client/components/misc/wizard/WizardContainer.jsx")),a=n("./MapStore2/web/client/components/widgets/builder/wizard/map/MapOptions.jsx"),s=n("./MapStore2/web/client/components/widgets/builder/wizard/map/PreviewMap.jsx");e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onChange,n=void 0===t?function(){}:t,l=e.onFinish,c=void 0===l?function(){}:l,u=e.setPage,p=void 0===u?function(){}:u,d=e.step,f=void 0===d?0:d,m=e.selectedNodes,y=void 0===m?[]:m,b=e.onNodeSelect,g=void 0===b?function(){}:b,h=e.editorData,v=void 0===h?{}:h,S=e.editNode,w=e.setEditNode,O=void 0===w?function(){}:w,j=e.closeNodeEditor,E=void 0===j?function(){}:j,x=e.isLocalizedLayerStylesEnabled,P=e.env;return r.createElement(i,{step:f,setPage:p,onFinish:c,hideButtons:!0},r.createElement(a,{editNode:S,setEditNode:O,closeNodeEditor:E,onNodeSelect:g,selectedNodes:y,onChange:n,isLocalizedLayerStylesEnabled:x,preview:r.createElement(s,{onChange:n,layers:v.map&&v.map.layers,map:v.map,env:P,options:{style:{margin:10,height:"calc(100% - 20px)"}}}),map:v.map}),r.createElement(o,{key:"widget-options",data:v,onChange:n}))}},"./MapStore2/web/client/components/widgets/builder/wizard/TableWizard.jsx":function(e,t,n){var r=n("./node_modules/react/index.js"),o=n("./MapStore2/web/client/components/misc/wizard/enhancers.js").wizardHandlers,i=n("./MapStore2/web/client/components/widgets/builder/wizard/table/TableOptions.jsx"),a=n("./MapStore2/web/client/components/widgets/builder/wizard/common/WidgetOptions.jsx"),s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.aggregateFunction&&e.aggregationAttribute&&e.groupByAttributes},l=o(n("./MapStore2/web/client/components/misc/wizard/WizardContainer.jsx")),c=n("./node_modules/recompose/es/Recompose.js"),u=(0,c.compose)((0,c.lifecycle)({UNSAFE_componentWillReceiveProps:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data,n=void 0===t?{}:t,r=e.valid,o=e.setValid,i=void 0===o?function(){}:o;r&&!s(n.options)&&i(!1)}}));e.exports=u((function(e){var t=e.onChange,n=void 0===t?function(){}:t,o=e.onFinish,c=void 0===o?function(){}:o,u=e.setPage,p=void 0===u?function(){}:u,d=e.data,f=void 0===d?{}:d,m=e.layer,y=void 0===m?{}:m,b=e.step,g=void 0===b?0:b,h=e.types,v=e.featureTypeProperties,S=e.dependencies;return r.createElement(l,{step:g,setPage:p,onFinish:c,isStepValid:function(e){return 1!==e||s(f.options)},hideButtons:!0},r.createElement(i,{dependencies:S,key:"chart-options",featureTypeProperties:v,types:h,data:f,onChange:n,layer:f.layer||y}),r.createElement(a,{key:"widget-options",data:f,onChange:n,layer:f.layer||y}))}))},"./MapStore2/web/client/components/widgets/builder/wizard/TextWizard.jsx":function(e,t,n){var r=n("./node_modules/react/index.js"),o=n("./MapStore2/web/client/components/misc/wizard/enhancers.js").wizardHandlers,i=n("./MapStore2/web/client/components/widgets/builder/wizard/text/TextOptions.jsx"),a=o(n("./MapStore2/web/client/components/misc/wizard/WizardContainer.jsx"));e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onChange,n=void 0===t?function(){}:t,o=e.onFinish,s=void 0===o?function(){}:o,l=e.setPage,c=void 0===l?function(){}:l,u=e.step,p=void 0===u?0:u,d=e.editorData,f=void 0===d?{}:d;return r.createElement(a,{step:p,setPage:c,onFinish:s,hideButtons:!0},r.createElement(i,{key:"widget-options",data:f,onChange:n}))}},"./MapStore2/web/client/components/widgets/builder/wizard/chart/ChartType.jsx":function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=n("./node_modules/react/index.js"),l=n("./node_modules/recompose/es/Recompose.js").shouldUpdate,c=n("./MapStore2/web/client/components/misc/cardgrids/SideGrid.jsx"),u=n("./MapStore2/web/client/components/I18N/Message.jsx"),p=n("./MapStore2/web/client/components/widgets/enhancers/sampleChartData.js")(n("./MapStore2/web/client/components/charts/SimpleChart.jsx")),d=n("./node_modules/react-bootstrap/es/index.js").Row,f={legend:!1,tooltip:!1,cartesian:!1,width:100,height:100,popup:!1},m=n("./MapStore2/web/client/components/misc/wizard/StepHeader.jsx"),y=[{type:"bar"},{type:"pie"},{type:"line"}].map((function(e){var t=e.type;return{type:t,title:s.createElement(u,{msgId:"widgets.chartType.".concat(t,".title")}),description:s.createElement(u,{msgId:"widgets.chartType.".concat(t,".description")}),caption:s.createElement(u,{msgId:"widgets.chartType.".concat(t,".caption")})}}));e.exports=l((function(e,t){var n=e.types,r=e.type,o=t.types;return r!==t.type&&n!==o}))((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onSelect,n=void 0===t?function(){}:t,o=e.onNextPage,a=void 0===o?function(){}:o,l=e.types,b=void 0===l?y:l,g=e.type;return s.createElement(d,null,s.createElement(m,{key:"title",title:s.createElement(u,{msgId:"widgets.selectChartType.title"})}),s.createElement(c,{key:"content",onItemClick:function(e){n(e.type),a()},items:b&&y.map((function(e){return i(i({},e),{},{selected:e.type===g,preview:s.createElement(p,r({},f,{type:e.type,autoColorOptions:e.type===g?{base:0,s:0,v:0}:void 0}))})}))}))}))},"./MapStore2/web/client/components/widgets/builder/wizard/chart/Toolbar.jsx":function(e,t,n){function r(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var i=n("./node_modules/react/index.js"),a=n("./MapStore2/web/client/components/misc/toolbar/Toolbar.jsx"),s=function(e){switch(e){case 1:return"widgets.builder.wizard.backToTypeSelection";case 2:return"widgets.builder.wizard.backToChartOptions";default:return"back"}},l=function(e){switch(e){case 0:return"widgets.builder.wizard.configureChartOptions";case 1:return"widgets.builder.wizard.configureWidgetOptions";default:return"next"}},c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.id;return n?"widgets.builder.wizard.updateWidget":"widgets.builder.wizard.addTheWidget"};e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.step,n=void 0===t?0:t,o=e.editorData,u=void 0===o?{}:o,p=e.valid,d=e.setPage,f=void 0===d?function(){}:d,m=e.onFinish,y=void 0===m?function(){}:m,b=e.stepButtons,g=void 0===b?[]:b,h=e.openFilterEditor,v=void 0===h?function(){}:h;return i.createElement(a,{btnDefaultProps:{bsStyle:"primary",bsSize:"sm"},buttons:[{onClick:function(){return f(Math.max(0,n-1))},visible:n>0,glyph:"arrow-left",tooltipId:s(n)}].concat(r(g),[{visible:n>0,onClick:v,glyph:"filter",tooltipId:"widgets.builder.setupFilter"},{onClick:function(){return f(Math.min(n+1,2))},visible:!(1!==n),disabled:1===n&&!p,glyph:"arrow-right",tooltipId:l(n)},{onClick:function(){return y(Math.min(n+1,1))},visible:2===n,glyph:"floppy-disk",tooltipId:c(n,u)}])})}},"./MapStore2/web/client/components/widgets/builder/wizard/common/WPSWidgetOptions.jsx":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n("./node_modules/react/index.js"),s=n("./node_modules/lodash/lodash.js"),l=s.head,c=s.get,u=s.isNil,p=n("./node_modules/react-bootstrap/es/index.js"),d=p.Row,f=p.Col,m=p.Form,y=p.FormGroup,b=p.FormControl,g=p.ControlLabel,h=p.Glyphicon,v=n("./MapStore2/web/client/components/I18N/Message.jsx"),S=n("./node_modules/react-select/dist/react-select.es.js").default,w=n("./node_modules/react-nouislider/dist/react-nouislider.common.js"),O=n("./MapStore2/web/client/components/styleeditor/ColorRamp.jsx").default,j=n("./MapStore2/web/client/components/misc/wizard/StepHeader.jsx"),E=n("./MapStore2/web/client/components/misc/switch/SwitchPanel.jsx"),x=n("./MapStore2/web/client/components/misc/switch/SwitchButton.jsx"),P=[{name:"global.colors.random",schema:"qualitative",options:{base:190,range:360,options:{}}},{name:"global.colors.blue",schema:"sequencial",options:{base:190,range:20}},{name:"global.colors.red",schema:"sequencial",options:{base:10,range:4}},{name:"global.colors.green",schema:"sequencial",options:{base:120,range:4}},{name:"global.colors.brown",schema:"sequencial",options:{base:30,range:4}},{name:"global.colors.purple",schema:"sequencial",options:{base:300,range:4}}],C=function(e){return"pie"!==e?P.filter((function(e){return"qualitative"!==e.schema})):P},T=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"widgets.".concat(e,".").concat(t.type||t.widgetType||"default")},M=a.createElement(v,{msgId:T("placeHolder")}),_=function(e){var t=a.createElement(v,{msgId:T("advancedOptions",e)});return a.createElement("span",null,a.createElement("span",{style:{cursor:"pointer"}},t),a.createElement("button",{className:"close"},e.panel?a.createElement(h,{glyph:"glyphicon glyphicon-collapse-down"}):a.createElement(h,{glyph:"glyphicon glyphicon-expand"})))};e.exports=function(e){var t=e.data,n=void 0===t?{options:{}}:t,r=e.onChange,i=void 0===r?function(){}:r,s=e.options,p=void 0===s?[]:s,h=e.formOptions,P=void 0===h?{showGroupBy:!0,showUom:!1,showColorRampSelector:!0,showLegend:!0,advancedOptions:!0}:h,A=e.aggregationOptions,R=void 0===A?[]:A,I=e.sampleChart;return a.createElement(d,null,a.createElement(j,{title:a.createElement(v,{msgId:"widgets.chartOptionsTitle"})}),a.createElement(f,{xs:12},a.createElement("div",{style:{marginBottom:"30px"}},I)),a.createElement(f,{xs:12},a.createElement(m,{className:"chart-options-form",horizontal:!0},P.showGroupBy?a.createElement(y,{controlId:"groupByAttributes",className:"mapstore-block-width"},a.createElement(f,{componentClass:g,sm:6},a.createElement(v,{msgId:T("groupByAttributes",n)})),a.createElement(f,{sm:6},a.createElement(S,{value:n.options&&n.options.groupByAttributes,options:p,placeholder:M,onChange:function(e){i("options.groupByAttributes",e&&e.value)}}))):null,a.createElement(y,{controlId:"aggregationAttribute",className:"mapstore-block-width"},a.createElement(f,{componentClass:g,sm:6},a.createElement(v,{msgId:T("aggregationAttribute",n)})),a.createElement(f,{sm:6},a.createElement(S,{value:n.options&&n.options.aggregationAttribute,options:p,placeholder:M,onChange:function(e){i("options.aggregationAttribute",e&&e.value)}}))),a.createElement(y,{controlId:"aggregateFunction",className:"mapstore-block-width"},a.createElement(f,{componentClass:g,sm:6},a.createElement(v,{msgId:T("aggregateFunction",n)})),a.createElement(f,{sm:6},a.createElement(S,{value:n.options&&n.options.aggregateFunction,options:R,placeholder:M,onChange:function(e){i("options.aggregateFunction",e&&e.value)}}))),P.showUom?a.createElement(y,{controlId:"uom"},a.createElement(f,{componentClass:g,sm:6},a.createElement(v,{msgId:T("uom",n)})),a.createElement(f,{sm:6},a.createElement(b,{value:c(n,"options.seriesOptions[0].uom"),type:"text",onChange:function(e){return i("options.seriesOptions.[0].uom",e.target.value)}}))):null,P.showColorRampSelector?a.createElement(y,{controlId:"colorRamp",className:"mapstore-block-width"},a.createElement(f,{componentClass:g,sm:6},a.createElement(v,{msgId:T("colorRamp",n)})),a.createElement(f,{sm:6},a.createElement(O,{items:C(n.type),value:l(C(n.type).filter((function(e){return n.autoColorOptions&&e.name===n.autoColorOptions.name}))),samples:"pie"===n.type?5:1,onChange:function(e){i("autoColorOptions",o(o({},e.options),{},{name:e.name}))}}))):null,P.showLegend?a.createElement(y,{controlId:"displayLegend"},a.createElement(f,{componentClass:g,sm:6},a.createElement(v,{msgId:T("displayLegend",n)})),a.createElement(f,{sm:6},a.createElement(x,{checked:n.legend,onChange:function(e){i("legend",e)}}))):null,P.advancedOptions&&"bar"===n.type||"line"===n.type?a.createElement(E,{id:"displayCartesian",header:_(n),collapsible:!0,expanded:n.panel,onSwitch:function(e){i("panel",e)}},a.createElement(y,{controlId:"AdvancedOptions"},a.createElement(f,{componentClass:g,sm:6},a.createElement(v,{msgId:T("displayCartesian",n)})),a.createElement(f,{sm:6},a.createElement(x,{checked:!(!n.cartesian&&!1!==n.cartesian)&&!n.cartesian,onChange:function(e){i("cartesian",!e)}})),a.createElement(f,{componentClass:g,sm:6},a.createElement(v,{msgId:T("yAxis",n)})),a.createElement(f,{sm:6},a.createElement(x,{checked:!n.yAxis&&!1!==n.yAxis||!n.yAxis,onChange:function(e){i("yAxis",!e)}})),a.createElement(f,{componentClass:g,sm:6},a.createElement(v,{msgId:T("xAxisAngle",n)})),a.createElement(f,{sm:6},a.createElement("div",{className:"mapstore-slider with-tooltip",onClick:function(e){e.stopPropagation()}},a.createElement(w,{key:"priority",format:{to:function(e){return parseInt(e,10)},from:function(e){return Number(e)}},onSlide:function(e){i("xAxisAngle",parseInt(e[0],10))},range:{min:0,max:90},start:[u(n.xAxisAngle)?0:n.xAxisAngle],step:15,tooltips:[!0]})))),a.createElement(y,{controlId:"yAxisLabel"},a.createElement(f,{componentClass:g,sm:6},a.createElement(v,{msgId:T("yAxisLabel",n)})),a.createElement(f,{sm:6},a.createElement(b,{value:n.yAxisLabel,type:"text",onChange:function(e){return i("yAxisLabel",e.target.value)}})))):null)))}},"./MapStore2/web/client/components/widgets/builder/wizard/common/WidgetOptions.jsx":function(e,t,n){var r=n("./node_modules/react/index.js"),o=n("./node_modules/react-bootstrap/es/index.js"),i=o.Row,a=o.Col,s=o.Form,l=o.FormGroup,c=o.ControlLabel,u=o.FormControl,p=n("./MapStore2/web/client/components/I18N/Message.jsx"),d=n("./MapStore2/web/client/components/misc/wizard/StepHeader.jsx");e.exports=function(e){var t=e.data,n=void 0===t?{}:t,o=e.onChange,f=void 0===o?function(){}:o,m=e.sampleChart;return r.createElement(i,null,r.createElement(d,{title:r.createElement(p,{msgId:"widgets.widgetOptionsTitle"})}),r.createElement(a,{key:"sample",xs:12},r.createElement("div",{style:{marginBottom:"30px"}},m)),r.createElement(a,{key:"form",xs:12},r.createElement(s,{className:"widget-options-form",horizontal:!0},r.createElement(l,{controlId:"groupByAttributes"},r.createElement(a,{componentClass:c,sm:6},r.createElement(p,{msgId:"widgets.title"})),r.createElement(a,{sm:6},r.createElement(u,{value:n.title,type:"text",onChange:function(e){return f("title",e.target.value)}}))),r.createElement(l,{controlId:"aggregationAttribute"},r.createElement(a,{componentClass:c,sm:6},r.createElement(p,{msgId:"widgets.description"})),r.createElement(a,{sm:6},r.createElement(u,{value:n.description,type:"text",onChange:function(e){return f("description",e.target.value)}}))))))}},"./MapStore2/web/client/components/widgets/builder/wizard/common/layerselector/Toolbar.jsx":function(e,t,n){function r(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var i=n("./node_modules/react/index.js"),a=n("./MapStore2/web/client/components/misc/toolbar/Toolbar.jsx");e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.canProceed,n=e.selected,o=e.stepButtons,s=void 0===o?[]:o,l=e.onProceed,c=void 0===l?function(){}:l;return i.createElement(a,{btnDefaultProps:{className:"square-button-md",bsStyle:"primary",bsSize:"sm"},buttons:[].concat(r(s),[{onClick:c,disabled:!t,tooltipId:"widgets.builder.wizard.useTheSelectedLayer",visible:n,glyph:"arrow-right"}])})}},"./MapStore2/web/client/components/widgets/builder/wizard/common/noAttributesEmptyView.js":function(e,t,n){var r=n("./node_modules/react/index.js"),o=n("./MapStore2/web/client/components/misc/enhancers/emptyState.jsx"),i=n("./MapStore2/web/client/components/I18N/Message.jsx");e.exports=function(e){return o(e,{title:r.createElement(i,{msgId:"widgets.builder.errors.noAttributesTitle"}),description:r.createElement(i,{msgId:"widgets.builder.errors.noAttributesDescription"}),glyph:"warning-sign"})}},"./MapStore2/web/client/components/widgets/builder/wizard/common/wfsChartOptions.js":function(e,t,n){var r=n("./node_modules/recompose/es/Recompose.js"),o=r.compose,i=r.withProps,a=n("./node_modules/lodash/lodash.js").find,s=function(e){return e.filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type;return 0!==t.indexOf("gml:")})).map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name;return{label:t,value:t}}))},l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=a(t,{name:e});return!n||"number"!==n.localType&&"int"!==n.localType?[{value:"Count",label:"COUNT"}]:[{value:"Count",label:"COUNT"},{value:"Sum",label:"SUM"},{value:"Average",label:"AVG"},{value:"StdDev",label:"STDDEV"},{value:"Min",label:"MIN"},{value:"Max",label:"MAX"}]};e.exports=o(i((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.featureTypeProperties,n=void 0===t?[]:t,r=e.data,o=void 0===r?{}:r;return{options:s(n),aggregationOptions:l(o.options&&o.options.aggregationAttribute,n)}})))},"./MapStore2/web/client/components/widgets/builder/wizard/counter/Toolbar.jsx":function(e,t,n){function r(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var i=n("./node_modules/react/index.js"),a=n("./MapStore2/web/client/components/misc/toolbar/Toolbar.jsx"),s=function(e){switch(e){case 0:return"widgets.builder.wizard.backToTypeSelection";case 1:return"widgets.builder.wizard.backToChartOptions";default:return"back"}},l=function(e){switch(e){case 0:return"widgets.builder.wizard.configureWidgetOptions";default:return"next"}},c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.id;return n?"widgets.builder.wizard.updateWidget":"widgets.builder.wizard.addTheWidget"};e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.openFilterEditor,n=void 0===t?function(){}:t,o=e.step,u=void 0===o?0:o,p=e.stepButtons,d=void 0===p?[]:p,f=e.editorData,m=void 0===f?{}:f,y=e.valid,b=e.setPage,g=void 0===b?function(){}:b,h=e.onFinish,v=void 0===h?function(){}:h;return i.createElement(a,{btnDefaultProps:{bsStyle:"primary",bsSize:"sm"},buttons:[{onClick:function(){return g(Math.max(0,u-1))},visible:u>0,glyph:"arrow-left",tooltipId:s(u)}].concat(r(d),[{visible:0===u,onClick:n,disabled:!y,glyph:"filter",tooltipId:"widgets.builder.setupFilter"},{onClick:function(){return g(Math.min(u+1,2))},visible:0===u,disabled:0===u&&!y,glyph:"arrow-right",tooltipId:l(u)},{onClick:function(){return v(Math.min(u+1,1))},visible:1===u,glyph:"floppy-disk",tooltipId:c(u,m)}])})}},"./MapStore2/web/client/components/widgets/builder/wizard/legend/Toolbar.jsx":function(e,t,n){function r(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var i=n("./node_modules/react/index.js"),a=n("./MapStore2/web/client/components/misc/toolbar/Toolbar.jsx"),s=function(e){switch(e){case 1:return"widgets.builder.wizard.backToPreview";case 2:return"widgets.builder.wizard.backToChartOptions";default:return"back"}},l=function(e,t){return t?"widgets.builder.wizard.configureWidgetOptions":void 0},c=function(e){return e.mapSync},u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.id;return n?"widgets.builder.wizard.updateWidget":"widgets.builder.wizard.addTheWidget"};e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.step,n=void 0===t?0:t,o=e.editorData,p=void 0===o?{}:o,d=e.valid,f=e.stepButtons,m=void 0===f?[]:f,y=e.onFinish,b=void 0===y?function(){}:y,g=e.setPage,h=void 0===g?function(){}:g;return i.createElement(a,{btnDefaultProps:{bsStyle:"primary",bsSize:"sm"},buttons:[{onClick:function(){return h(Math.max(0,n-1))},visible:n>0,glyph:"arrow-left",tooltipId:s(n)}].concat(r(m),[{onClick:function(){return h(Math.min(n+1,1))},visible:0===n,disabled:0===n&&!c(p)||!d,glyph:"arrow-right",tooltipId:l(0,d)},{onClick:function(){return b(Math.min(n+1,1))},visible:1===n,glyph:"floppy-disk",tooltipId:u(n,p)}])})}},"./MapStore2/web/client/components/widgets/builder/wizard/map/MapOptions.jsx":function(e,t,n){var r=n("./node_modules/react/index.js"),o=n("./node_modules/recompose/es/Recompose.js"),i=o.compose,a=o.withProps,s=n("./MapStore2/web/client/components/misc/wizard/StepHeader.jsx"),l=n("./MapStore2/web/client/components/misc/enhancers/emptyState.jsx"),c=n("./MapStore2/web/client/components/misc/enhancers/localizeStringMap.js"),u=n("./MapStore2/web/client/components/I18N/Message.jsx"),p=l((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.map,n=void 0===t?{}:t;return!n.layers||0===(n.layers||[]).filter((function(e){return"background"!==e.group})).length}),(function(){return{glyph:"1-layer",title:r.createElement(u,{msgId:"widgets.selectMap.TOC.noLayerTitle"}),description:r.createElement(u,{msgId:"widgets.selectMap.TOC.noLayerDescription"})}}))(n("./MapStore2/web/client/components/widgets/builder/wizard/map/TOC.jsx")),d=n("./MapStore2/web/client/components/widgets/builder/wizard/map/enhancers/nodeEditor.js"),f=d(n("./MapStore2/web/client/components/widgets/builder/wizard/map/NodeEditor.jsx")),m=i(d,a((function(e){var t=e.selectedNode;return{title:t&&t.title}})),c("title"))(s);e.exports=function(e){var t=e.preview,n=e.map,o=void 0===n?{}:n,i=e.onChange,a=void 0===i?function(){}:i,l=e.selectedNodes,c=void 0===l?[]:l,d=e.onNodeSelect,y=void 0===d?function(){}:d,b=e.editNode,g=e.closeNodeEditor,h=void 0===g?function(){}:g,v=e.isLocalizedLayerStylesEnabled;return r.createElement("div",null,r.createElement(s,{title:r.createElement(u,{msgId:"widgets.builder.wizard.configureMapOptions"})}),r.createElement("div",{key:"sample",style:{marginTop:10}},r.createElement(s,{title:r.createElement(u,{msgId:"widgets.builder.wizard.preview"})}),r.createElement("div",{style:{width:"100%",height:"200px"}},t)),b?[r.createElement(m,{map:o,editNode:b}),r.createElement(f,{closeNodeEditor:h,editNode:b,map:o,onChange:a,isLocalizedLayerStylesEnabled:v})]:[r.createElement(s,{title:r.createElement(u,{msgId:"layers"})}),r.createElement(p,{selectedNodes:c,onSelect:y,onChange:a,map:o})])}},"./MapStore2/web/client/components/widgets/builder/wizard/map/MapSelector.jsx":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/react/index.js"),o=n.n(r),i=n("./MapStore2/web/client/components/layout/BorderLayout.jsx"),a=n.n(i),s=n("./MapStore2/web/client/components/misc/toolbar/Toolbar.jsx"),l=n.n(s),c=n("./MapStore2/web/client/components/widgets/builder/BuilderHeader.jsx"),u=n.n(c),p=n("./MapStore2/web/client/components/maps/enhancers/mapCatalogWithEmptyMap.js"),d=n.n(p),f=n("./MapStore2/web/client/components/I18N/Message.jsx"),m=n.n(f),y=n("./MapStore2/web/client/components/maps/MapCatalog.jsx"),b=n.n(y),g=n("./node_modules/recompose/es/Recompose.js"),h=n("./MapStore2/web/client/api/GeoStoreDAO.js"),v=n.n(h),S=n("./MapStore2/web/client/libs/ajax.js"),w=n.n(S),O=n("./MapStore2/web/client/utils/ConfigUtils.js"),j=n.n(O),E=n("./MapStore2/web/client/utils/LayersUtils.js");n("./MapStore2/web/client/libs/bindings/rxjsRecompose.js");function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){C(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var T=Object(g.compose)(Object(g.withState)("selected","setSelected",null),Object(g.withHandlers)({onMapChoice:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onMapSelected,n=void 0===t?function(){}:t,r=e.selectedSource,o=void 0===r?{}:r,i=e.includeMapId,a=void 0!==i&&i;return function(e){return("string"==typeof e.id?w.a.get(e.id).then((function(e){return e.data})):v.a.getData(e.id,{baseURL:o.baseURL})).then((function(t){var n=t.version||"string"==typeof e.id?j.a.normalizeConfig(t.map):j.a.convertFromLegacy(t);return P(P(P({},n&&n.map||{}),a?{id:e.id}:{}),{},{groups:n&&n.groups||[],layers:Object(E.excludeGoogleBackground)(n.layers.map((function(e){return"background"!==e.group||"ol"!==e.type&&"OpenLayers.Layer"!==e.type||(e.type="empty"),e})))})})).then((function(e){return e.layers=e.sources?e.layers.map((function(t){var n=Object(E.extractTileMatrixFromSources)(e.sources,t);return P(P({},t),n)})):e.layers,n({map:e})}))}}}),Object(g.mapPropsStream)((function(e){return e.distinctUntilKeyChanged("selected").filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.selected;return t})).startWith({}).combineLatest(e,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.canProceed,n=arguments.length>1?arguments[1]:void 0;return P({canProceed:t},n)}))})));function M(e){return function(e){if(Array.isArray(e))return _(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var A=d()(b.a);t.default=T((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onClose,n=void 0===t?function(){}:t,r=e.setSelected,i=void 0===r?function(){}:r,s=e.onMapChoice,c=void 0===s?function(){}:s,p=e.stepButtons,d=void 0===p?[]:p,f=e.selected;return o.a.createElement(a.a,{className:"bg-body layer-selector",header:o.a.createElement(u.a,{onClose:n},o.a.createElement(l.a,{btnDefaultProps:{bsStyle:"primary",bsSize:"sm"},buttons:[].concat(M(d),[{tooltipId:"widgets.builder.wizard.useThisMap",onClick:function(){return c(f)},visible:!0,disabled:!f,glyph:"arrow-right"}])}))},o.a.createElement(A,{title:o.a.createElement(m.a,{msgId:"widgets.builder.wizard.selectAMap"}),selected:f,onSelected:function(e){return i(e)}}))}))},"./MapStore2/web/client/components/widgets/builder/wizard/map/NodeEditor.jsx":function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var a=n("./node_modules/react/index.js"),s=n("./MapStore2/web/client/components/I18N/Message.jsx"),l=n("./MapStore2/web/client/components/misc/enhancers/tooltip.jsx"),c=n("./node_modules/lodash/lodash.js").isObject,u=n("./node_modules/react-bootstrap/es/index.js"),p=u.Row,d=u.Col,f=u.Nav,m=u.NavItem,y=u.Glyphicon,b=l(m);e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.settings,n=e.element,l=void 0===n?{}:n,u=e.tabs,m=void 0===u?[]:u,g=e.activeTab,h=e.width,v=e.groups,S=e.isLocalizedLayerStylesEnabled,w=e.setActiveTab,O=void 0===w?function(){}:w,j=e.onUpdateParams,E=void 0===j?function(){}:j,x=e.onRetrieveLayerData,P=void 0===x?function(){}:x,C=e.realtimeUpdate,T=i(e,["settings","element","tabs","activeTab","width","groups","isLocalizedLayerStylesEnabled","setActiveTab","onUpdateParams","onRetrieveLayerData","realtimeUpdate"]);return a.createElement(p,{key:"ms-toc-settings-navbar",className:"ms-row-tab"},a.createElement(d,{xs:12},a.createElement(f,{bsStyle:"tabs",activeKey:g,justified:!0},m.map((function(e){return a.createElement(b,{key:"ms-tab-settings-"+e.id,tooltip:a.createElement(s,{msgId:e.tooltipId}),eventKey:e.id,onClick:function(){return O(e.id)}},a.createElement(y,{glyph:e.glyph}))})))),a.createElement(d,{xs:12},m.filter((function(e){return e.id&&e.id===g})).filter((function(e){return e.Component})).map((function(e){return a.createElement(e.Component,r({},T,{key:"ms-tab-settings-body-"+e.id,containerWidth:h,element:l,groups:v,nodeType:t.nodeType,settings:t,retrieveLayerData:P,isLocalizedLayerStylesEnabled:S,onChange:function(e,t){return c(e)?E(e,C):E(o({},e,t),C)}}))}))))}},"./MapStore2/web/client/components/widgets/builder/wizard/map/PreviewMap.jsx":function(e,t,n){var r=n("./MapStore2/web/client/components/widgets/builder/wizard/map/enhancers/previewMap.js");e.exports=r(n("./MapStore2/web/client/components/widgets/widget/MapView.jsx"))},"./MapStore2/web/client/components/widgets/builder/wizard/map/TOC.jsx":function(e,t,n){var r=n("./node_modules/react/index.js"),o=n("./node_modules/recompose/es/Recompose.js").compose,i=n("./MapStore2/web/client/components/TOC/TOC.jsx"),a=n("./MapStore2/web/client/components/TOC/DefaultLayerOrGroup.jsx"),s=n("./MapStore2/web/client/components/TOC/DefaultGroup.jsx"),l=n("./MapStore2/web/client/components/TOC/DefaultLayer.jsx"),c=n("./MapStore2/web/client/components/widgets/builder/wizard/map/enhancers/handleNodePropertyChanges.js"),u=n("./MapStore2/web/client/components/widgets/builder/wizard/map/enhancers/handleNodeFiltering.js"),p=o(n("./MapStore2/web/client/components/widgets/builder/wizard/map/enhancers/mapToNodes.js"),u,c);e.exports=p((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.changeLayerPropertyByGroup,n=void 0===t?function(){}:t,o=e.changeLayerProperty,c=void 0===o?function(){}:o,u=e.changeGroupProperty,p=void 0===u?function(){}:u,d=e.onSort,f=e.onSelect,m=e.selectedNodes,y=e.nodes,b=void 0===y?[]:y;return r.createElement(i,{onSort:d,selectedNodes:m,onSelect:f,nodes:b},r.createElement(a,{groupElement:r.createElement(s,{onSort:d,selectedNodes:m,onSelect:f,propertiesChangeHandler:function(e,t){return Object.keys(t).map((function(r){return n(e,r,t[r])}))},onToggle:function(e,t){return p(e,"expanded",!t)},groupVisibilityCheckbox:!0}),layerElement:r.createElement(l,{selectedNodes:m,onSelect:f,propertiesChangeHandler:function(e,t){return Object.keys(t).map((function(n){return c(e,n,t[n])}))},onUpdateNode:function(e,t,n){return Object.keys(n).map((function(t){return c(e,t,n[t])}))},onToggle:function(e,t){return c(e,"expanded",!t)}})}))}))},"./MapStore2/web/client/components/widgets/builder/wizard/map/Toolbar.jsx":function(e,t,n){function r(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var i=n("./node_modules/react/index.js"),a=n("./MapStore2/web/client/components/misc/toolbar/Toolbar.jsx"),s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.id;return n?"widgets.builder.wizard.updateWidget":"widgets.builder.wizard.addTheWidget"};e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.step,n=void 0===t?0:t,o=e.buttons,l=e.tocButtons,c=void 0===l?[]:l,u=e.stepButtons,p=void 0===u?[]:u,d=e.editorData,f=void 0===d?{}:d,m=e.setPage,y=void 0===m?function(){}:m,b=e.onFinish,g=void 0===b?function(){}:b,h=e.toggleLayerSelector,v=void 0===h?function(){}:h;return i.createElement(a,{btnDefaultProps:{bsStyle:"primary",bsSize:"sm"},buttons:o||[].concat(r(0===n?c:[]),[{onClick:function(){return y(Math.max(n-1,0))},visible:1===n,glyph:"arrow-left",tooltipId:"widgets.builder.wizard.configureMapOptions"}],r(p),[{onClick:function(){return v(!0)},visible:0===n,glyph:"plus",tooltipId:"widgets.builder.wizard.addLayer"},{onClick:function(){return y(Math.min(n+1,2))},visible:0===n,glyph:"arrow-right",tooltipId:"widgets.builder.wizard.configureWidgetOptions"},{onClick:function(){return g(Math.min(n+1,1))},visible:1===n,glyph:"floppy-disk",tooltipId:s(n,f)}])})}},"./MapStore2/web/client/components/widgets/builder/wizard/map/enhancers/handleNodeFiltering.js":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n("./node_modules/lodash/lodash.js").head,s=n("./node_modules/recompose/es/Recompose.js").withProps,l=function(e){var t=e.nodes,n=e.filterText;e.currentLocale;return function e(t,n){return t.reduce((function(t,r){var i=o({},r);return i.nodes&&(i=o(o({},i),{},{nodes:e(i.nodes,n)})),n.forEach((function(e){i.nodes&&e.func(i)?i=o(o({},i),e.options):i.nodes&&(i=o({},i))})),t.push(i),t}),[])}(t,[{options:{showComponent:!0},func:function(){return!n}},{options:{loadingError:!0},func:function(e){return a(e.nodes.filter((function(e){return e.loadingError&&"Warning"!==e.loadingError})))}},{options:{expanded:!0,showComponent:!0},func:function(e){return n&&a(e.nodes.filter((function(e){return!0})))}}])};e.exports=s((function(e){return{nodes:l(e)}}))},"./MapStore2/web/client/components/widgets/builder/wizard/map/enhancers/handleNodePropertyChanges.js":function(e,t,n){var r=n("./node_modules/recompose/es/Recompose.js").withHandlers,o=n("./MapStore2/web/client/utils/LayersUtils.js").belongsToGroup,i=n("./node_modules/lodash/lodash.js"),a=i.findIndex,s=i.castArray;e.exports=r({changeLayerProperty:function(e){var t=e.onChange,n=void 0===t?function(){}:t,r=e.map,o=void 0===r?{}:r;return function(e,t,r){var i=a(o.layers||[],{id:e});n("map.layers[".concat(i,"].").concat(t),r)}},changeLayerPropertyByGroup:function(e){var t=e.onChange,n=void 0===t?function(){}:t,r=e.map,i=void 0===r?{}:r;return function(e,t,r){return i.layers.filter(o(e)).map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id;return a(i.layers||[],{id:t})})).filter((function(e){return e>=0})).map((function(e){return n("map.layers[".concat(e,"].").concat(t),r)}))}},changeGroupProperty:function(e){var t=e.onChange,n=void 0===t?function(){}:t,r=e.map,o=void 0===r?[]:r;return function(e,t,r){var i,l=o.groups?s(o.groups):[],c=a(l,(function(t){return e===t.id})),u=-1===c?l.length:c;"expanded"!==t||(null==l||null===(i=l[u])||void 0===i?void 0:i.id)||n("map.groups[".concat(u,"].id"),e),n("map.groups[".concat(u,"].").concat(t),r)}},updateMapEntries:function(e){var t=e.onChange,n=void 0===t?function(){}:t;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).map((function(t){return n("map[".concat(t,"]"),e[t])}))}}})},"./MapStore2/web/client/components/widgets/builder/wizard/map/enhancers/handleNodeSelection.js":function(e,t,n){function r(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var i=n("./node_modules/recompose/es/Recompose.js"),a=i.withProps,s=i.compose,l=i.withStateHandlers,c=n("./node_modules/lodash/lodash.js").findIndex,u=function(e,t){return(t.layers||[]).filter((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.group,r=void 0===n?"Default":n;return r===e})).map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id;return t}))};e.exports=s(l((function(){return{selectedLayers:[],selectedGroups:[]}}),{onNodeSelect:function(e,t){var n=e.selectedLayers,o=void 0===n?[]:n,i=e.selectedGroups,a=void 0===i?[]:i,s=t.map,l=void 0===s?{}:s;return function(e,t,n){return{selectedLayers:"group"===t?c(a,(function(t){return t===e}))>=0?o.filter((function(t){return c(u(e,l),(function(e){return e===t}))<0})):n?[].concat(r(o),r(u(e,l))):r(u(e,l)):c(o,(function(t){return t===e}))>=0?o.filter((function(t){return t!==e})):n?[].concat(r(o),[e]):[e],selectedGroups:"group"===t?c(a,(function(t){return t===e}))>=0?a.filter((function(t){return t!==e})):n?[].concat(r(a),[e]):[e]:n?a:[]}}}}),a((function(e){var t=e.selectedLayers,n=e.selectedGroups;return{selectedNodes:[].concat(r(t),r(n))}})))},"./MapStore2/web/client/components/widgets/builder/wizard/map/enhancers/mapToNodes.js":function(e,t,n){var r=n("./MapStore2/web/client/utils/LayersUtils.js"),o=n("./node_modules/recompose/es/Recompose.js").withProps;e.exports=o((function(e){var t,n,o,i=e.map;return{nodes:(t=r.splitMapAndLayers(i),n=t.layers,o=void 0===n?{}:n,r.denormalizeGroups(o.flat||[],o.groups||[]).groups)}}))},"./MapStore2/web/client/components/widgets/builder/wizard/map/enhancers/nodeEditor.js":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n("./node_modules/recompose/es/Recompose.js"),s=a.compose,l=a.withProps,c=a.withState,u=a.withHandlers,p=n("./node_modules/lodash/lodash.js").get,d=n("./MapStore2/web/client/components/misc/enhancers/withControllableState.js"),f=n("./MapStore2/web/client/utils/LayersUtils.js").splitMapAndLayers,m=n("./MapStore2/web/client/components/widgets/builder/wizard/map/enhancers/mapToNodes.js"),y=n("./MapStore2/web/client/components/widgets/builder/wizard/map/enhancers/withSelectedNode.js"),b=n("./MapStore2/web/client/components/widgets/builder/wizard/map/enhancers/withCapabilitiesRetrieval.js"),g=n("./MapStore2/web/client/components/TOC/fragments/settings/General.jsx"),h=n("./MapStore2/web/client/components/TOC/fragments/settings/Display.jsx"),v=b(n("./MapStore2/web/client/components/TOC/fragments/settings/WMSStyle.jsx")),S=n("./MapStore2/web/client/components/widgets/builder/wizard/map/enhancers/handleNodePropertyChanges.js"),w=n("./MapStore2/web/client/components/TOC/enhancers/tocItemsSettings.js").settingsLifecycle,O=l((function(e){return{tabs:e.tabs||[{id:"general",titleId:"layerProperties.general",tooltipId:"layerProperties.general",glyph:"wrench",visible:!0,Component:g},{id:"display",titleId:"layerProperties.display",tooltipId:"layerProperties.display",glyph:"eye-open",visible:e.settings&&"layers"===e.settings.nodeType,Component:h},{id:"style",titleId:"layerProperties.style",tooltipId:"layerProperties.style",glyph:"dropper",visible:e.settings&&"layers"===e.settings.nodeType&&e.element&&"wms"===e.element.type,Component:v}]}}));e.exports=s(m,y,c("settings","onUpdateSettings",{}),l((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.map,n=void 0===t?{}:t,r=e.selectedNode,i=e.settings,a=void 0===i?{}:i;return{element:r,settings:o(o({},a),{},{nodeType:r&&r.nodes?"groups":"layers",options:{opacity:a.opacity>=0?a.opacity:r.opacity>=0?r.opacity:1}}),groups:p(f(n),"layers.groups")}})),s(S,u({onUpdateNode:function(e){var t=e.changeLayerProperty,n=void 0===t?function(){}:t,r=e.changeGroupProperty,o=void 0===r?function(){}:r,i=e.editNode;return function(e,t,r){"layers"===t&&Object.keys(r).map((function(e){return n(i,e,r[e])})),"groups"===t&&Object.keys(r).map((function(e){return o(i,e,r[e])}))}}}),u({onUpdateParams:function(e){var t=e.settings,n=void 0===t?{}:t,r=e.onUpdateNode,i=void 0===r?function(){}:r;return function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t&&i(n.node,n.nodeType,o(o({},n.props),e))}}})),w,d("activeTab","setActiveTab","general"),O)},"./MapStore2/web/client/components/widgets/builder/wizard/map/enhancers/previewMap.js":function(e,t,n){var r=n("./node_modules/recompose/es/Recompose.js"),o=r.compose,i=r.withHandlers;e.exports=o(i({onMapViewChanges:function(e){var t=e.onChange,n=void 0===t?function(){}:t;return function(e){n("map",e),n("mapStateSource",e.mapStateSource)}}}))},"./MapStore2/web/client/components/widgets/builder/wizard/map/enhancers/withCapabilitiesRetrieval.js":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n("./node_modules/recompose/es/Recompose.js"),s=a.createEventHandler,l=a.mapPropsStream,c=n("./MapStore2/web/client/observables/wms.js").getLayerCapabilities,u=n("./node_modules/rxjs/Rx.js");e.exports=l((function(e){var t=s(),n=t.stream,r=t.handler;return e.pluck("element").distinctUntilChanged((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.id===t.id})).switchMap((function(){return n.switchMap((function(e){return c(e).map((function(e){return{capabilities:e,capabilitiesLoading:null,description:e._abstract,boundingBox:e.latLonBoundingBox,availableStyles:e.style&&(Array.isArray(e.style)?e.style:[e.style])}})).startWith({capabilitiesLoading:!0})})).catch((function(e){return u.Observable.of({capabilitiesLoading:null,capabilities:{error:"error getting capabilities",details:e},description:null})}))})).startWith({}).combineLatest(e,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o(o({},t),{},{retrieveLayerData:r,element:o(o({},t.element),e)})}))}))},"./MapStore2/web/client/components/widgets/builder/wizard/map/enhancers/withSelectedNode.js":function(e,t,n){var r=this;function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=n("./node_modules/lodash/lodash.js").isMatch,a=n("./node_modules/recompose/es/Recompose.js").withProps;e.exports=a((function(e){var t=e.nodes,n=void 0===t?{}:t,a=e.editNode,s={};return a&&function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0;for(var s in t)null!==t[s]&&"object"===o(t[s])&&(i(t[s],n)&&a.apply(r,[t[s]]),e(t[s],n,a))}(n,{id:a},(function(e){s=e})),{selectedNode:s}}))},"./MapStore2/web/client/components/widgets/builder/wizard/table/TableOptions.jsx":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var l=n("./node_modules/react/index.js"),c=n("./MapStore2/web/client/utils/ogc/WFS/base.js").isGeometryType,u=n("./node_modules/lodash/lodash.js"),p=u.uniq,d=u.castArray,f=u.includes,m=n("./node_modules/react-bootstrap/es/index.js"),y=m.Row,b=m.Col,g=m.Form,h=m.Button,v=n("./MapStore2/web/client/components/I18N/Message.jsx"),S=n("./MapStore2/web/client/components/misc/wizard/StepHeader.jsx"),w=n("./MapStore2/web/client/components/widgets/builder/wizard/common/noAttributesEmptyView.js"),O=n("./node_modules/recompose/es/Recompose.js"),j=O.withProps,E=O.withHandlers,x=O.compose,P=x(j((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.attributes,n=void 0===t?[]:t,r=e.options,i=void 0===r?{}:r;return{attributes:n.filter((function(e){return!c(e)})).map((function(e){return o(o({},e),{},{label:e.name,attribute:e.name,hide:i.propertyName&&i.propertyName.indexOf(e.name)<0})}))}})),w((function(e){var t=e.attributes;return 0===(void 0===t?[]:t).length})),E({onChange:function(e){var t=e.onChange,n=void 0===t?function(){}:t,r=e.options,o=void 0===r?{}:r;return function(e,t){return n("options.propertyName",function(e,t,n){var r=d(t);return n?e.filter((function(e){return!f(r,e)})):p([].concat(a(e),a(r)))}(o&&o.propertyName||[],e,t))}}}))(n("./MapStore2/web/client/components/data/featuregrid/AttributeTable.jsx"));e.exports=function(e){var t=e.data,n=void 0===t?{options:{}}:t,r=e.onChange,o=void 0===r?function(){}:r,i=e.featureTypeProperties,a=e.sampleChart;return l.createElement(y,null,l.createElement(S,{title:l.createElement(v,{msgId:"widgets.builder.wizard.configureTableOptions"})}),l.createElement(b,{xs:12},l.createElement("div",null,a)),l.createElement(b,{xs:12},l.createElement(g,{className:"chart-options-form",horizontal:!0},l.createElement(P,{options:n.options,onChange:o,attributes:i}),n.options&&n.options.columnSettings?l.createElement(h,{style:{float:"right"},onClick:function(){return o("options.columnSettings",void 0)}},l.createElement(v,{msgId:"widgets.builder.wizard.resetColumnsSizes"})):null)))}},"./MapStore2/web/client/components/widgets/builder/wizard/table/Toolbar.jsx":function(e,t,n){function r(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var i=n("./node_modules/react/index.js"),a=n("./MapStore2/web/client/components/misc/toolbar/Toolbar.jsx"),s=function(e){return e&&e.options&&e.options.propertyName&&0!==e.options.propertyName.length},l=function(e){switch(e){case 1:return"widgets.builder.wizard.backToTableOptions";case 2:return"widgets.builder.wizard.backToChartOptions";default:return"back"}},c=function(e,t){return t?"widgets.builder.wizard.configureWidgetOptions":"widgets.builder.errors.checkAtLeastOneAttribute"},u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.id;return n?"widgets.builder.wizard.updateWidget":"widgets.builder.wizard.addTheWidget"};e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.openFilterEditor,n=void 0===t?function(){}:t,o=e.step,p=void 0===o?0:o,d=e.stepButtons,f=void 0===d?[]:d,m=e.editorData,y=void 0===m?{}:m,b=e.setPage,g=void 0===b?function(){}:b,h=e.onFinish,v=void 0===h?function(){}:h;return i.createElement(a,{btnDefaultProps:{bsStyle:"primary",bsSize:"sm"},buttons:[{onClick:function(){return g(Math.max(0,p-1))},visible:p>0,glyph:"arrow-left",tooltipId:l(p)}].concat(r(f),[{visible:p>=0,onClick:n,disabled:!s(y),glyph:"filter",tooltipId:"widgets.builder.setupFilter"},{onClick:function(){return g(Math.min(p+1,2))},visible:0===p,disabled:0===p&&!s(y),glyph:"arrow-right",tooltipId:c(0,s(y))},{onClick:function(){return v(Math.min(p+1,1))},visible:1===p,glyph:"floppy-disk",tooltipId:u(p,y)}])})}},"./MapStore2/web/client/components/widgets/builder/wizard/text/TextOptions.jsx":function(e,t,n){var r=n("./node_modules/react/index.js"),o=n("./node_modules/react-bootstrap/es/index.js"),i=o.Col,a=o.Form,s=o.FormGroup,l=o.FormControl,c=n("./MapStore2/web/client/components/misc/enhancers/localizedProps.js"),u=c("placeholder")(l),p=n("./node_modules/react-quill/lib/index.js"),d=c("placeholder")(p);e.exports=function(e){var t=e.data,n=void 0===t?{}:t,o=e.onChange,l=void 0===o?function(){}:o;return r.createElement("div",null,r.createElement(i,{key:"form",xs:12},r.createElement(a,null,r.createElement(s,{controlId:"title"},r.createElement(i,{sm:12},r.createElement(u,{style:{marginBottom:10},placeholder:"widgets.builder.wizard.titlePlaceholder",value:n.title,type:"text",onChange:function(e){return l("title",e.target.value)}}))))),r.createElement(d,{modules:{toolbar:[[{size:["small",!1,"large","huge"]},"bold","italic","underline","blockquote"],[{list:"bullet"},{align:[]}],[{color:[]},{background:[]},"clean"],["image","link"]]},placeholder:"widgets.builder.wizard.textPlaceholder",value:n&&n.text||"",onChange:function(e){return l("text",e)}}))}},"./MapStore2/web/client/components/widgets/builder/wizard/text/Toolbar.jsx":function(e,t,n){function r(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var i=n("./node_modules/react/index.js"),a=n("./MapStore2/web/client/components/misc/toolbar/Toolbar.jsx"),s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.id;return n?"widgets.builder.wizard.updateWidget":"widgets.builder.wizard.addTheWidget"};e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.step,n=void 0===t?0:t,o=e.editorData,l=void 0===o?{}:o,c=e.stepButtons,u=void 0===c?[]:c,p=e.onFinish,d=void 0===p?function(){}:p;return i.createElement(a,{btnDefaultProps:{bsStyle:"primary",bsSize:"sm"},buttons:[].concat(r(u),[{onClick:function(){return d(Math.min(n+1,1))},visible:0===n,glyph:"floppy-disk",tooltipId:s(n,l)}])})}},"./MapStore2/web/client/components/widgets/enhancers/builderConfiguration.jsx":function(e,t,n){function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var i=n("./node_modules/react/index.js"),a=n("./MapStore2/web/client/components/misc/enhancers/loadingState.jsx"),s=n("./MapStore2/web/client/components/misc/enhancers/emptyState.jsx"),l=n("./MapStore2/web/client/components/misc/enhancers/propsStreamFactory.jsx"),c=n("./node_modules/recompose/es/Recompose.js"),u=c.compose,p=c.defaultProps,d=n("./node_modules/lodash/lodash.js").get,f=n("./node_modules/rxjs/Rx.js").Observable,m=n("./MapStore2/web/client/observables/wfs.js").describeFeatureType,y=n("./MapStore2/web/client/observables/wps/describe.js").describeProcess,b=n("./MapStore2/web/client/components/I18N/I18N.jsx"),g=b.Message,h=b.HTML,v=n("./MapStore2/web/client/utils/ogc/WFS/base.js").findGeometryProperty;e.exports=u(p({dataStreamFactory:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.onEditorChange,o=void 0===n?function(){}:n,i=t.onConfigurationError,a=void 0===i?function(){}:i;return e.distinctUntilChanged((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layer,n=void 0===t?{}:t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=r.layer;return n.name===o.name})).switchMap((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layer;return f.forkJoin(m({layer:t}),y(t.url,"gs:Aggregate")).do((function(e){var t=r(e,1)[0],n=d(v(t.data||{}),"name");n&&o("geomProp",n)})).map((function(e){var t=r(e,1)[0];return d(t,"data.featureTypes[0].properties")||[]})).map((function(e){return{loading:!1,types:"ALL",featureTypeProperties:e}}))})).catch((function(e){return a(e),f.of({errorObj:e,loading:!1,featureTypeProperties:[]})})).startWith({loading:!0})}}),l,a(),s((function(e){var t=e.featureTypeProperties,n=void 0===t?[]:t,r=e.types,o=void 0===r?[]:r;return 0===n.length||0===o.length}),(function(){return{title:i.createElement(g,{msgId:"widgets.builder.errors.noWidgetsAvailableTitle"}),description:i.createElement(h,{msgId:"widgets.builder.errors.noWidgetsAvailableDescription"})}})))},"./MapStore2/web/client/components/widgets/enhancers/chartWidget.js":function(e,t,n){function r(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var i=n("./node_modules/recompose/es/Recompose.js"),a=i.compose,s=i.branch,l=i.withState,c=i.withProps,u=i.withHandlers,p=n("./MapStore2/web/client/components/widgets/enhancers/deleteWidget.js"),d=n("./MapStore2/web/client/components/widgets/enhancers/tools/index.js"),f=d.editableWidget,m=d.exportableWidget,y=d.defaultIcons,b=d.withHeaderTools;e.exports=a(p,a(l("showTable","setShowTable",!1),u({toggleTableView:function(e){var t=e.setShowTable,n=e.showTable;return function(){return t(!n)}}}),c((function(e){var t=e.widgetTools,n=void 0===t?[]:t,o=e.toggleTableView,i=void 0===o?function(){}:o;return{widgetTools:[].concat(r(n),[{glyph:"features-grid",target:"menu",textId:"widgets.widget.menu.showChartData",onClick:function(){return i()}}])}}))),f(),m(),y(),s((function(e){return!e.showTable}),b()))},"./MapStore2/web/client/components/widgets/enhancers/counterWidget.js":function(e,t,n){var r=n("./node_modules/recompose/es/Recompose.js").compose,o=n("./MapStore2/web/client/components/widgets/enhancers/tools/index.js"),i=o.editableWidget,a=o.defaultIcons,s=o.withHeaderTools;e.exports=r(n("./MapStore2/web/client/components/widgets/enhancers/deleteWidget.js"),i(),a(),s())},"./MapStore2/web/client/components/widgets/enhancers/deleteWidget.js":function(e,t,n){var r=n("./node_modules/recompose/es/Recompose.js").withState;e.exports=r("confirmDelete","toggleDeleteConfirm",!1)},"./MapStore2/web/client/components/widgets/enhancers/dependenciesToExtent.js":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n("./node_modules/xml2js/lib/xml2js.js"),s=n("./node_modules/rxjs/Rx.js").Observable,l=n("./node_modules/recompose/es/Recompose.js"),c=l.mapPropsStream,u=l.compose,p=l.branch,d=l.withPropsOnChange,f=n("./node_modules/lodash/lodash.js"),m=f.isEmpty,y=f.isEqual,b=n("./MapStore2/web/client/components/widgets/enhancers/utils.js").composeFilterObject,g=n("./MapStore2/web/client/observables/wps/bounds.js"),h=n("./MapStore2/web/client/utils/FilterUtils.jsx"),v=n("./MapStore2/web/client/utils/LayersUtils.js").getWpsUrl,S=n("./MapStore2/web/client/utils/ImmutableUtils.js").set,w=n("./MapStore2/web/client/utils/MapUtils.js");e.exports=u(p((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mapSync,n=e.dependencies;return t&&(!m(n.quickFilters)||!m(n.filter))}),u(d(["id"],(function(e){var t=e.hookRegister;return{hookRegister:(void 0===t?null:t)||w.createRegisterHooks()}})),c((function(e){return e.distinctUntilChanged((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return y(e.dependencies.quickFilters,t.dependencies.quickFilters)&&y(e.dependencies.filter,t.dependencies.filter)&&y(e.dependencies.layer,t.dependencies.layer)})).debounceTime(500).switchMap((function(e){var t=e.mapSync,n=e.dependencies,r=void 0===n?{}:n,i=e.filter,l=e.hookRegister;if(!t||m(r.layer))return s.of({loading:!1});var c={};r.quickFilters&&(c=o(o({},c),b(i,r.quickFilters,r.options))),r.filter&&(c=o(o({},c),h.composeAttributeFilters([c,r.filter])));var u=r&&r.layer&&r.layer.name;if(!m(c)){c=o(o({},c),{},{options:o(o({},c.options||{}),{},{noSchemaLocation:!0})});var p=h.toOGCFilter(u,c,"1.1.0");return g(v(r.layer),{wfsGetFeature:p}).switchMap((function(e){var t,n,r;if(a.parseString(e.data,{explicitArray:!1},(function(e,o){t=o["ows:BoundingBox"],n=t["ows:LowerCorner"].split(" "),r=t["ows:UpperCorner"].split(" ")})),"0.0 0.0"===t["ows:LowerCorner"]&&"-1.0 -1.0"===t["ows:UpperCorner"])return s.of({loading:!1});var o={minx:parseFloat(n[0]),miny:parseFloat(n[1]),maxx:parseFloat(r[0]),maxy:parseFloat(r[1])},i=l.getHook(w.ZOOM_TO_EXTENT_HOOK);return i&&i(o,{crs:"EPSG:4326",maxZoom:21}),s.of({loading:!1})})).startWith({loading:!0}).catch((function(e){return s.of({error:"error getting bounds from filter",details:e})}))}return s.of({loading:!1})})).combineLatest(e,(function(e){var t=e.loading,n=void 0!==t&&t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return S("loading",n,r)}))})))))},"./MapStore2/web/client/components/widgets/enhancers/dependenciesToFilter.js":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var l=n("./node_modules/recompose/es/Recompose.js"),c=l.compose,u=l.withPropsOnChange,p=n("./node_modules/lodash/lodash.js"),d=p.find,f=p.isEmpty,m=n("./MapStore2/web/client/utils/CoordinatesUtils.js"),y=n("./MapStore2/web/client/utils/FilterUtils.jsx"),b=n("./MapStore2/web/client/utils/ogc/Filter/FilterBuilder.js"),g=n("./MapStore2/web/client/utils/ogc/Filter/fromObject.js"),h=n("./MapStore2/web/client/components/widgets/enhancers/utils.js"),v=h.getDependencyLayerParams,S=h.composeFilterObject,w=n("./MapStore2/web/client/utils/FilterUtils.jsx").composeAttributeFilters,O=function(e,t){var n=v(e,t),r=d(Object.keys(n||{}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"cql_filter"===e.toLowerCase()}));return n&&r&&n[r]},j=n("./MapStore2/web/client/utils/ogc/Filter/CQL/parser.js").read,E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layerFilter;return t};e.exports=c(u((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mapSync,n=e.geomProp,r=e.dependencies,o=void 0===r?{}:r,i=e.layer,a=e.quickFilters,s=e.options,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=arguments.length>2?arguments[2]:void 0;return t!==l.mapSync||o.viewport!==(l.dependencies&&l.dependencies.viewport)||o.quickFilters!==(l.dependencies&&l.dependencies.quickFilters)||o.options!==(l.dependencies&&l.dependencies.options)||n!==l.geomProp||c!==l.filter||s!==l.options||a!==l.quickFilters||O(i,o)!==O(l.layer,l.dependencies)||E(i)!==E(l.layer)}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mapSync,n=e.geomProp,r=void 0===n?"the_geom":n,s=e.dependencies,l=void 0===s?{}:s,c=e.filter,u=e.layer,p=e.quickFilters,d=e.options,h=l.viewport,v=b({gmlVersion:"3.1.1"}),E=g(v),x=v.filter,P=v.property,C=v.and,T=u||{},M=T.layerFilter,_={},A={},R=S(c,p,d);if(!t)return{filter:!f(R)||M?x(C.apply(void 0,a(M?y.toOGCFilterParts(M,"1.1.0","ogc"):[]).concat(a(R?y.toOGCFilterParts(R,"1.1.0","ogc"):[])))):void 0};if(u&&l&&l.quickFilters&&l.layer&&u.name===l.layer.name&&(R=o(o({},R),S(R,l.quickFilters,l.options))),u&&l&&l.filter&&l.layer&&u.name===l.layer.name&&(R=o(o({},R),w([R,l.filter]))),l.viewport){var I=Object.keys(h.bounds).reduce((function(e,t){return o(o({},e),{},i({},t,parseFloat(h.bounds[t])))}),{});_=m.getViewportGeometry(I,h.crs);var D=O(u,l);return A=D?[E(j(D))]:[],{filter:x(C.apply(void 0,a(A).concat(a(M?y.toOGCFilterParts(M,"1.1.0","ogc"):[]),a(R?y.toOGCFilterParts(R,"1.1.0","ogc"):[]),[P(r).intersects(_)])))}}return{filter:x(C.apply(void 0,a(M?y.toOGCFilterParts(M,"1.1.0","ogc"):[]).concat(a(R?y.toOGCFilterParts(R,"1.1.0","ogc"):[]))))}})))},"./MapStore2/web/client/components/widgets/enhancers/dependenciesToLayers.js":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n("./node_modules/recompose/es/Recompose.js"),s=a.compose,l=a.withPropsOnChange,c=n("./node_modules/lodash/lodash.js"),u=c.find,p=c.isEmpty,d=c.isEqual,f=n("./MapStore2/web/client/utils/FilterUtils.jsx"),m=n("./MapStore2/web/client/utils/VendorParamsUtils.js").optionsToVendorParams,y=n("./MapStore2/web/client/utils/ImmutableUtils.js").arrayUpdate,b=n("./MapStore2/web/client/components/widgets/enhancers/utils.js").composeFilterObject;e.exports=s(l((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mapSync,n=e.dependencies,r=void 0===n?{}:n,o=e.map,i=void 0===o?{}:o,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2?arguments[2]:void 0;return t!==a.mapSync||!d(r,a.dependencies)||!d(i,a.map)||s!==a.filter}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mapSync,n=e.dependencies,r=void 0===n?{}:n,i=e.filter,a=void 0===i?{}:i,s=e.map,l=void 0===s?{layers:[]}:s,c=r&&r.layer&&r.layer.name,d=u(l.layers,{name:c})||{},g={},h={},v=void 0;return t&&!p(d)&&(r.quickFilters&&(g=o(o({},g),b(a,r.quickFilters,r.options))),r.filter&&(g=o(o({},g),f.composeAttributeFilters([g,r.filter]))),!p(g)&&f.toCQLFilter(g))?(v=f.toCQLFilter(g),h=y(!1,o(o({},d),{},{params:m({params:{CQL_FILTER:v}},d&&d.params&&d.params.CQL_FILTER)}),{name:c},l.layers),{map:o(o({},l),{},{layers:h})}):(h=l.layers.map((function(e){return o(o({},e),{},{params:o(o({},e.params),{},{CQL_FILTER:void 0})})})),{map:o(o({},l),{},{layers:h})})})))},"./MapStore2/web/client/components/widgets/enhancers/dependenciesToMapProp.js":function(e,t,n){var r=n("./MapStore2/web/client/utils/ImmutableUtils.js").set,o=n("./node_modules/recompose/es/Recompose.js"),i=o.shallowEqual,a=o.branch,s=o.withPropsOnChange;e.exports=function(e){return a((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mapSync;return t}),s((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.mapSync,r=t.dependencies,o=void 0===r?{}:r,a=arguments.length>1?arguments[1]:void 0,s=a.mapSync,l=a.dependencies;return l&&i(o[e],l[e])||n===s}),(function(t){var n=t.map,o=t.mapSync,i=t.dependencies,a=void 0===i?{}:i;return{mapStateSource:"__dependency_system__",map:a[e]&&o?r(e,a[e],n):n}})))}},"./MapStore2/web/client/components/widgets/enhancers/dependenciesToOptions.js":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n("./node_modules/recompose/es/Recompose.js"),s=a.compose,l=a.withPropsOnChange,c=n("./MapStore2/web/client/components/widgets/enhancers/utils.js").getDependencyLayerParams,u=n("./node_modules/lodash/lodash.js").find;e.exports=s(l(["dependencies","options"],(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dependencies,n=void 0===t?{}:t,r=e.options,i=e.layer,a=void 0===i?{}:i,s=c(a,n),l=u(Object.keys(s||{}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"viewparams"===e.toLowerCase()})),p=s&&l&&s[l];return{options:p?o(o({},r),{},{viewParams:p}):r}})))},"./MapStore2/web/client/components/widgets/enhancers/dependenciesToWidget.js":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n("./node_modules/recompose/es/Recompose.js").withProps,s=n("./node_modules/lodash/lodash.js").pick,l=function e(t,n,r){return t?Object.keys(t).reduce((function(a,l){return"dependenciesMap"===l&&n[t[l]]&&n[t.mapSync]&&n[t[l]][l]&&-1===n[t[l]][l].indexOf(r)?o(o({},a),s(e(n[t[l]],n,r),["options","layer","quickFilters","filter","dependenciesMap"])):o(o({},a),{},i({},l,n[t[l]]))}),{}):n};e.exports=a((function(e){var t=e.dependenciesMap,n=e.dependencies,r=e.id;return{dependencies:t?l(t,n,r):n,dependenciesMap:t}}))},"./MapStore2/web/client/components/widgets/enhancers/emptyChartState.js":function(e,t,n){var r=n("./node_modules/react/index.js"),o=n("./MapStore2/web/client/components/I18N/Message.jsx"),i=n("./MapStore2/web/client/components/misc/enhancers/emptyState.jsx");e.exports=i((function(e){var t=e.data,n=void 0===t?[]:t;return!n||0===n.length}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mapSync,n=e.iconFit;return{iconFit:n,tooltip:t?r.createElement(o,{msgId:"widgets.errors.nodatainviewport"}):r.createElement(o,{msgId:"widgets.errors.nodata"})}}))},"./MapStore2/web/client/components/widgets/enhancers/emptyLegendState.js":function(e,t,n){function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=n("./node_modules/react/index.js"),i=n("./MapStore2/web/client/components/misc/enhancers/emptyState.jsx"),a=n("./MapStore2/web/client/components/I18N/Message.jsx");e.exports=function(){var e,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return i((function(e){var t=e.layers;return 0===(void 0===t?[]:t).length}),(r(e={},t?"tooltip":"title",o.createElement(a,{msgId:"widgets.errors.noLegend"})),r(e,"description",!t&&o.createElement(a,{msgId:"widgets.errors.noLegendDescription"})),e))}},"./MapStore2/web/client/components/widgets/enhancers/emptyTextState.js":function(e,t,n){var r=n("./node_modules/react/index.js"),o=n("./MapStore2/web/client/components/I18N/Message.jsx"),i=n("./MapStore2/web/client/components/misc/enhancers/emptyState.jsx");e.exports=i((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.text;return!t}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.iconFit;return{iconFit:t,tooltip:r.createElement(o,{msgId:"widgets.errors.notext"})}}))},"./MapStore2/web/client/components/widgets/enhancers/errorChartState.js":function(e,t,n){var r=n("./node_modules/react/index.js"),o=n("./MapStore2/web/client/components/I18N/Message.jsx"),i=n("./MapStore2/web/client/components/misc/enhancers/emptyState.jsx"),a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"ECONNABORTED"===e.code?r.createElement(o,{msgId:"widgets.errors.timeoutExpired"}):r.createElement(o,{msgId:"widgets.errors.genericError"})};e.exports=i((function(e){return e.error}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.error,n=e.iconFit;return{glyph:"warning-sign",iconFit:n,tooltip:a(t)}}))},"./MapStore2/web/client/components/widgets/enhancers/legendWidget.js":function(e,t,n){var r=n("./node_modules/recompose/es/Recompose.js"),o=r.compose,i=r.withProps,a=n("./node_modules/lodash/lodash.js").get,s=n("./MapStore2/web/client/components/widgets/enhancers/deleteWidget.js"),l=n("./MapStore2/web/client/components/widgets/enhancers/tools/index.js"),c=l.editableWidget,u=l.defaultIcons,p=l.withHeaderTools,d=n("./MapStore2/web/client/utils/MapUtils.js").getScales;e.exports=o(i((function(e){var t=e.dependencies,n=void 0===t?{}:t,r=e.dependenciesMap;return{layers:n[(void 0===r?{}:r).layers]||n.layers||[],scales:d(n.projection||n.viewport&&n.viewport.crs||"EPSG:3857",a(n,"mapOptions.view.DPI")),currentZoomLvl:n.zoom}})),i((function(e){var t=e.layers;return{layers:(void 0===t?[]:t).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"background"!==e.group&&!1!==e.visibility&&"vector"!==e.type}))}})),s,c(),u(),p())},"./MapStore2/web/client/components/widgets/enhancers/mapWidget.js":function(e,t,n){var r=n("./MapStore2/web/client/components/widgets/enhancers/deleteWidget.js"),o=n("./node_modules/recompose/es/Recompose.js").compose,i=n("./MapStore2/web/client/components/widgets/enhancers/tools/index.js"),a=i.editableWidget,s=i.defaultIcons,l=i.withHeaderTools;e.exports=o(r,a(),s(),l())},"./MapStore2/web/client/components/widgets/enhancers/sampleChartData.js":function(e,t,n){var r=n("./node_modules/recompose/es/Recompose.js").defaultProps;e.exports=r({data:[{name:"A",variable:2,pv:2,amt:2},{name:"B",variable:.5,pv:.5,amt:.5},{name:"C",variable:3,pv:3,amt:3},{name:"D",variable:1,pv:1,amt:2}],series:[{dataKey:"variable",color:"#078aa3"}],xAxis:{dataKey:"name",show:!1}})},"./MapStore2/web/client/components/widgets/enhancers/tableWidget.js":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n("./node_modules/recompose/es/Recompose.js"),s=a.compose,l=a.withPropsOnChange,c=n("./node_modules/lodash/lodash.js").get,u=n("./MapStore2/web/client/components/widgets/enhancers/tools/index.js"),p=u.editableWidget,d=u.withHeaderTools,f=u.defaultIcons;e.exports=s(l(["gridEvents"],(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.gridEvents,n=void 0===t?{}:t,r=e.updateProperty,i=void 0===r?function(){}:r;return{gridEvents:o(o({},n),{},{onAddFilter:function(e){return i("quickFilters.".concat(e.attribute),e)},onColumnResize:function(e,t,n,r,o,a){return i('options.columnSettings["'.concat(c(a.filter((function(e){return!e.hide}))[e],"name"),'"].width'),t)}})}})),n("./MapStore2/web/client/components/widgets/enhancers/deleteWidget.js"),p(),f(),d())},"./MapStore2/web/client/components/widgets/enhancers/textWidget.js":function(e,t,n){var r=n("./MapStore2/web/client/components/widgets/enhancers/deleteWidget.js"),o=n("./node_modules/recompose/es/Recompose.js").compose,i=n("./MapStore2/web/client/components/widgets/enhancers/tools/index.js"),a=i.editableWidget,s=i.hidableWidget,l=i.defaultIcons,c=i.withHeaderTools;e.exports=o(r,a(),s(),l(),c())},"./MapStore2/web/client/components/widgets/enhancers/tools/collapsibleWidget.js":function(e,t,n){function r(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var i=n("./node_modules/recompose/es/Recompose.js"),a=i.compose,s=i.withProps;e.exports=function(){return a(s((function(e){var t=e.widgetTools,n=void 0===t?[]:t,o=e.dataGrid,i=void 0===o?{}:o,a=e.toggleCollapse,s=void 0===a?function(){}:a,l=e.toolsOptions;return{widgetTools:(void 0===l?{}:l).showCollapse?[].concat(r(n),[{glyph:"minus",target:"icons",tooltipId:"widgets.widget.menu.collapse",visible:!i.static,onClick:function(){return s()}}]):n}})))}},"./MapStore2/web/client/components/widgets/enhancers/tools/editableWidget.js":function(e,t,n){function r(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var i=n("./node_modules/recompose/es/Recompose.js").withProps;e.exports=function(){return i((function(e){var t=e.widgetTools,n=void 0===t?[]:t,o=e.dataGrid,i=void 0===o?{}:o,a=e.canEdit,s=e.onEdit,l=void 0===s?function(){}:s,c=e.toggleDeleteConfirm,u=void 0===c?function(){}:c;return{widgetTools:a?[].concat(r(n),[{glyph:"pencil",target:"menu",visible:a&&!i.static,textId:"widgets.widget.menu.edit",onClick:function(){return l()}},{glyph:"trash",target:"menu",visible:a&&!i.static,textId:"widgets.widget.menu.delete",onClick:function(){return u(!0)}}]):n}}))}},"./MapStore2/web/client/components/widgets/enhancers/tools/exportableWidget.js":function(e,t,n){function r(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var i=n("./node_modules/recompose/es/Recompose.js").withProps;e.exports=function(){return i((function(e){var t=e.widgetTools,n=void 0===t?[]:t,o=e.data,i=e.id,a=e.title,s=e.exportCSV,l=void 0===s?function(){}:s,c=e.exportImage,u=void 0===c?function(){}:c;return{widgetTools:[].concat(r(n),[{glyph:"download",glyphClassName:"exportCSV",target:"menu",textId:"widgets.widget.menu.downloadData",disabled:!o||!o.length,onClick:function(){return l({data:o,title:a})}},{glyph:"download",target:"menu",glyphClassName:"exportImage",textId:"widgets.widget.menu.exportImage",disabled:!o||!o.length,onClick:function(){return u({widgetDivId:"widget-chart-".concat(i),title:a})}}])}}))}},"./MapStore2/web/client/components/widgets/enhancers/tools/hidableWidget.js":function(e,t,n){function r(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var i=n("./node_modules/recompose/es/Recompose.js"),a=i.compose,s=i.withProps;e.exports=function(){return a(s((function(e){var t=e.widgetTools,n=void 0===t?[]:t,o=e.toolsOptions,i=void 0===o?{}:o,a=e.canEdit,s=e.updateProperty,l=void 0===s?function(){}:s,c=e.hide,u=void 0!==c&&c;return{widgetTools:i.showHide?[].concat(r(n),[{glyph:"lock",target:"menu",active:u,textId:u?"widgets.widget.menu.unhide":"widgets.widget.menu.hide",tooltipId:u?"widgets.widget.menu.unhideDescription":"widgets.widget.menu.hideDescription",visible:a,onClick:function(){return l("hide",!u)}}]):n}})))}},"./MapStore2/web/client/components/widgets/enhancers/tools/index.js":function(e,t,n){var r=n("./node_modules/recompose/es/Recompose.js").compose,o=n("./MapStore2/web/client/components/widgets/enhancers/tools/withTools.js"),i=n("./MapStore2/web/client/components/widgets/enhancers/tools/pinnableWidget.js"),a=n("./MapStore2/web/client/components/widgets/enhancers/tools/hidableWidget.js"),s=n("./MapStore2/web/client/components/widgets/enhancers/tools/withInfo.js"),l=n("./MapStore2/web/client/components/widgets/enhancers/tools/withMenu.js"),c=n("./MapStore2/web/client/components/widgets/enhancers/tools/withIcons.js"),u=n("./MapStore2/web/client/components/widgets/enhancers/tools/editableWidget.js"),p=n("./MapStore2/web/client/components/widgets/enhancers/tools/exportableWidget.js"),d=n("./MapStore2/web/client/components/widgets/enhancers/tools/collapsibleWidget.js");e.exports={withTools:o,pinnableWidget:i,hidableWidget:a,withMenu:l,withIcons:c,editableWidget:u,exportableWidget:p,collapsibleWidget:d,defaultIcons:function(){return r(i(),d(),s())},withHeaderTools:function(){return r(o(),c(),l())}}},"./MapStore2/web/client/components/widgets/enhancers/tools/pinnableWidget.js":function(e,t,n){function r(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var i=n("./node_modules/recompose/es/Recompose.js"),a=i.compose,s=i.withProps;e.exports=function(){return a(s((function(e){var t=e.widgetTools,n=void 0===t?[]:t,o=e.toolsOptions,i=void 0===o?{}:o,a=e.updateProperty,s=void 0===a?function(){}:a,l=e.dataGrid,c=void 0===l?{}:l;return{widgetTools:i.showPin?[].concat(r(n),[{glyph:"pushpin",bsStyle:c.static&&"primary",glyphClassName:c.static?"active":void 0,tooltipId:c.static?"widgets.widget.menu.unpin":"widgets.widget.menu.pin",target:"icons",onClick:function(){return s("dataGrid.static",!c.static)}}]):n}})))}},"./MapStore2/web/client/components/widgets/enhancers/tools/withIcons.js":function(e,t,n){var r=n("./node_modules/react/index.js"),o=n("./node_modules/recompose/es/Recompose.js"),i=o.compose,a=o.withPropsOnChange,s=n("./MapStore2/web/client/components/misc/toolbar/Toolbar.jsx"),l=function(e){return"icons"===e.target},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.filter(l).length>0};e.exports=function(){return i(a(["icons","widgetTools"],(function(e){var t=e.icons,n=void 0===t?[]:t,o=e.widgetTools;return{icons:c(o)?r.createElement(s,{btnDefaultProps:{className:"no-border",bsSize:"xs",bsStyle:"link"},buttons:o.filter(l)}):n}})))}},"./MapStore2/web/client/components/widgets/enhancers/tools/withInfo.js":function(e,t,n){function r(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var i=n("./node_modules/recompose/es/Recompose.js"),a=i.compose,s=i.withProps;e.exports=function(){return a(s((function(e){var t=e.widgetTools,n=void 0===t?[]:t,o=e.title,i=e.description,a=e.widgetType;return{widgetTools:i&&"text"!==a?[].concat(r(n),[{glyph:"question-sign",popover:{title:o,trigger:!0,text:i},target:"icons"}]):n}})))}},"./MapStore2/web/client/components/widgets/enhancers/tools/withMenu.js":function(e,t,n){function r(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var i=n("./node_modules/react/index.js"),a=n("./MapStore2/web/client/components/I18N/Message.jsx"),s=n("./node_modules/recompose/es/Recompose.js").withProps,l=n("./MapStore2/web/client/components/misc/enhancers/tooltip.jsx"),c=function(e){var t=e.target,n=e.visible;return(void 0===n||n)&&"menu"===t},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.filter(c).length>0},p=n("./node_modules/react-bootstrap/es/index.js"),d=p.Glyphicon,f=p.ButtonToolbar,m=p.DropdownButton,y=l(p.MenuItem);e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.className,n=void 0===t?"widget-menu":t,o=e.menuIcon,l=void 0===o?"option-vertical":o;return s((function(e){var t=e.widgetTools,o=e.topRightItems,s=void 0===o?[]:o;return{topRightItems:u(t)?[].concat(r(s),[i.createElement(f,null,i.createElement(m,{pullRight:!0,bsStyle:"default",className:n,title:i.createElement(d,{glyph:l}),noCaret:!0,id:"dropdown-no-caret"},t.filter(c).map((function(e,t){var n=e.onClick,r=void 0===n?function(){}:n,o=e.disabled,s=void 0!==o&&o,l=e.glyph,c=e.glyphClassName,u=e.text,p=e.textId,f=e.tooltipId,m=e.active;return i.createElement(y,{active:m,tooltipId:f,onSelect:r,disabled:s,eventKey:t},i.createElement(d,{className:c,glyph:l}),p?i.createElement(a,{msgId:p}):u)}))))]):s}}))}},"./MapStore2/web/client/components/widgets/enhancers/tools/withTools.js":function(e,t,n){function r(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var i=n("./node_modules/react/index.js"),a=n("./node_modules/recompose/es/Recompose.js"),s=a.compose,l=a.withPropsOnChange,c=n("./MapStore2/web/client/components/misc/toolbar/Toolbar.jsx"),u=function(e){return"tools"===e.target},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.filter(u).length>0};e.exports=function(){return s(l(["topLeftItems","widgetTools"],(function(e){var t=e.topLeftItems,n=void 0===t?[]:t,o=e.widgetTools;return{topLeftItems:p(o)?[].concat(r(n),[i.createElement(c,{btnGroupProps:{style:{position:"absolute",left:14}},btnDefaultProps:{className:"no-border",bsSize:"small",bsStyle:"link",style:{paddingLeft:4,paddingRight:4}},buttons:o.filter(u)})]):n}})))}},"./MapStore2/web/client/components/widgets/enhancers/utils.js":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n("./node_modules/lodash/lodash.js"),s=a.get,l=a.find,c=a.reduce,u=a.isEmpty,p=n("./MapStore2/web/client/utils/FeatureGridUtils.js").gridUpdateToQueryUpdate,d=n("./MapStore2/web/client/utils/FilterUtils.jsx").composeAttributeFilters;e.exports={getDependencyLayerParams:function(e,t){return e&&e.id&&s(l(t.layers||[],{id:e.id}),"params",{})},composeFilterObject:function(e,t,n){var r=t&&n&&Object.keys(t).filter((function(e){return l(n.propertyName,(function(t){return t===e}))})).reduce((function(e,n){return o(o({},e),{},i({},n,t[n]))}),{}),a=c(r,(function(e,t,n){return p(o({attribute:n},t),e)}),{});if(!u(e)||!u(a)){var s=d([e,a]);return o(o({},e),s)}return{}},getLayerInCommon:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.map,n=void 0===t?{}:t,r=e.dependencies,o=r&&r.layer&&r.layer.name,i=!u(n)&&!u(n.layers)&&l(n.layers,{name:o})||{};return i}}},"./MapStore2/web/client/components/widgets/enhancers/wfsTable/describeFetch.js":function(e,t,n){var r=n("./node_modules/rxjs/Rx.js"),o=n("./MapStore2/web/client/observables/wfs.js").describeFeatureType,i=n("./MapStore2/web/client/utils/LayersUtils.js").getSearchUrl;e.exports=function(e){return e.distinctUntilChanged((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layer,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.layer;return i(t)===i(r)&&t.loadingError===r.loadingError})).switchMap((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layer;return o({layer:t}).map((function(e){return{describeFeatureType:e.data,loading:!1,error:void 0}})).catch((function(e){return r.Observable.of({loading:!1,error:e})}))}))}},"./MapStore2/web/client/components/widgets/enhancers/wfsTable/index.js":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n("./node_modules/lodash/lodash.js"),s=a.includes,l=a.merge,c=n("./node_modules/recompose/es/Recompose.js"),u=c.compose,p=c.withProps,d=c.createEventHandler,f=c.withHandlers,m=c.withStateHandlers,y=c.defaultProps,b=n("./MapStore2/web/client/utils/ogc/WFS/base.js").getFeatureTypeProperties,g=n("./MapStore2/web/client/components/misc/enhancers/propsStreamFactory.jsx"),h=n("./MapStore2/web/client/components/widgets/enhancers/wfsTable/triggerFetch.js"),v=n("./MapStore2/web/client/components/widgets/enhancers/wfsTable/describeFetch.js"),S=n("./MapStore2/web/client/components/widgets/enhancers/wfsTable/virtualScrollFetch.js"),w=n("./MapStore2/web/client/components/widgets/enhancers/wfsTable/noPaginationFetch.js"),O=function(e){var t=d(),n=t.handler,r=t.stream;return v(e).combineLatest(function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return h(e).let(n?S(t.withLatestFrom(e.map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.pagination,n=void 0===t?{}:t;return{pagination:n}})),(function(e,t){return o({pagesRange:e},t)}))):w).startWith({})}(e,r.startWith({startPage:0,endPage:1})),(function(e,t){return o(o(o({},e),t),{},{pageEvents:{moreFeatures:n,onPageChange:function(){}}})})).startWith({loading:!0})};e.exports=u(y({virtualScroll:!0,size:20,maxStoredPages:5}),m({pages:[],features:[],pagination:{}},{setData:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.pages,n=e.features,r=e.pagination;return{pages:t,features:n,pagination:r,error:void 0}}}}),f({onLoad:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.setData,n=void 0===t?function(){}:t,r=e.onLoad,o=void 0===r?function(){}:r;return function(){n.apply(void 0,arguments),o.apply(void 0,arguments)}}}),p((function(){return{dataStreamFactory:O}})),g,p((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=e.describeFeatureType,a=e.columnSettings,c=void 0===a?{}:a;return{columnSettings:l(r?b(r).filter((function(e){return!s(n.propertyName||[],e.name)})).reduce((function(e,t){return o(o({},e),{},i({},t.name,{hide:!0}))}),{}):{},n.columnSettings||{},c)}})))},"./MapStore2/web/client/components/widgets/enhancers/wfsTable/noPaginationFetch.js":function(e,t,n){var r=n("./node_modules/rxjs/Rx.js"),o=n("./MapStore2/web/client/observables/wfs.js").getLayerJSONFeature;e.exports=function(e){return e.switchMap((function(e){var t=e.layer,n=void 0===t?{}:t,i=e.options,a=void 0===i?{}:i,s=e.filter,l=e.onLoad,c=void 0===l?function(){}:l,u=e.onLoadError,p=void 0===u?function(){}:u;return o(n,s,{timeout:15e3,params:{propertyName:a.propertyName,viewParams:a.viewParams}}).map((function(){return{loading:!1,error:void 0}})).do((function(e){return c({features:e.features,pagination:{totalFeatures:e.totalFeatures}})})).catch((function(e){return r.Observable.of({loading:!1,error:e,data:[]}).do(p)}))}))}},"./MapStore2/web/client/components/widgets/enhancers/wfsTable/triggerFetch.js":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n("./node_modules/rxjs/Rx.js");e.exports=function(e){return e.filter((function(e){var t=e.layer;return(void 0===t?{}:t).name})).distinctUntilChanged((function(e,t){var n,r,o=e.layer,i=void 0===o?{}:o,a=e.options,s=void 0===a?{}:a,l=e.filter,c=e.sortOptions;return t.layer&&i.name===t.layer.name&&i.loadingError===t.layer.loadingError&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.propertyName===t.propertyName&&e.viewParams===t.viewParams}(s,t.options)&&(n=l,r=t.filter,n===r)&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.sortBy===t.sortBy&&e.sortOrder===t.sortOrder}(c,t.sortOptions)})).map((function(e){return o(o({},e),{},{features:[],pages:[],pagination:{}})}))}},"./MapStore2/web/client/components/widgets/enhancers/wfsTable/virtualScrollFetch.js":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n("./node_modules/rxjs/Rx.js"),s=n("./MapStore2/web/client/observables/wfs.js").getLayerJSONFeature,l=n("./MapStore2/web/client/utils/FeatureGridUtils.js"),c=l.getCurrentPaginationOptions,u=l.updatePages;e.exports=function(e){return function(t){return t.switchMap((function(t){var n=t.layer,r=void 0===n?{}:n,i=t.size,l=void 0===i?20:i,p=t.maxStoredPages,d=void 0===p?5:p,f=t.filter,m=t.options,y=void 0===m?{}:m,b=t.pages,g=t.features,h=void 0===g?[]:g,v=t.onLoad,S=void 0===v?function(){}:v,w=t.onLoadError,O=void 0===w?function(){}:w;return e.switchMap((function(e,t){var n=e.pagesRange,i=e.pagination,p=void 0===i?{}:i;return function(e){if(null==e)throw new TypeError("Cannot destructure undefined")}(t),s(r,f,o(o({},c(n,b,l)),{},{timeout:15e3,totalFeatures:p.totalFeatures,propertyName:y.propertyName,viewParams:y.viewParams})).do((function(e){return S(o(o({},u(e,n,{pages:b,features:h},o(o({},c(n,b,l)),{},{size:l,maxStoredPages:d}))),{},{pagination:{totalFeatures:e.totalFeatures}}))})).map((function(){return{loading:!1}})).catch((function(e){return a.Observable.of({loading:!1,error:e}).do(O)})).startWith({loading:!0})}))}))}}},"./MapStore2/web/client/components/widgets/enhancers/withGroupColor.jsx":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n("./node_modules/recompose/es/Recompose.js").withProps,s=n("./node_modules/lodash/lodash.js"),l=s.get,c=s.head,u=function(e){return l(c(e,(function(e){return e.color})),"color")};e.exports=a((function(e){var t=e.groups,n=e.showGroupColor,r=e.headerStyle,i=void 0===r?{borderTop:"3px solid rgba(0,0,0,0)",transition:"border-color .5s ease-out"}:r;return{headerStyle:n&&t&&u(t)?o(o({},i),{},{borderTop:"3px solid ".concat(u(t))}):i}}))},"./MapStore2/web/client/components/widgets/enhancers/wpsChart.js":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n("./node_modules/recompose/es/Recompose.js"),s=a.compose,l=a.withProps,c=n("./MapStore2/web/client/observables/wps/aggregate.js"),u=n("./MapStore2/web/client/components/misc/enhancers/propsStreamFactory.jsx"),p=n("./node_modules/rxjs/Rx.js"),d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.AggregationResults,n=void 0===t?[]:t,r=e.GroupByAttributes,a=void 0===r?[]:r,s=e.AggregationAttribute,l=e.AggregationFunctions;return n.map((function(e){return o(o({},a.reduce((function(t,n,r){return o(o({},t),{},i({},n,e[r]))}),{})),{},i({},"".concat(l[0],"(").concat(s,")"),e[e.length-1]))})).sort((function(e,t){var n=parseFloat(e[a]),r=parseFloat(t[a]);return isNaN(n)||isNaN(r)?e<t?-1:e>t?1:0:n-r}))},f=n("./MapStore2/web/client/utils/LayersUtils.js").getWpsUrl,m=function(e){return e.filter((function(e){var t=e.layer,n=void 0===t?{}:t,r=e.options;return n.name&&f(n)&&r&&r.aggregateFunction&&r.aggregationAttribute&&r.groupByAttributes})).distinctUntilChanged((function(e,t){var n,r,o=e.layer,i=void 0===o?{}:o,a=e.options,s=void 0===a?{}:a,l=e.filter;return t.layer&&i.name===t.layer.name&&i.loadingError===t.layer.loadingError&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.aggregateFunction===t.aggregateFunction&&e.aggregationAttribute===t.aggregationAttribute&&e.groupByAttributes===t.groupByAttributes&&e.viewParams===t.viewParams}(s,t.options)&&(n=l,r=t.filter,n===r)})).switchMap((function(e){var t=e.layer,n=void 0===t?{}:t,r=e.options,i=e.filter,a=e.onLoad,s=void 0===a?function(){}:a,l=e.onLoadError,u=void 0===l?function(){}:l;return c(f(n),o(o({featureType:n.name},r),{},{filter:i}),{timeout:15e3}).map((function(e){return{loading:!1,isAnimationActive:!1,error:void 0,data:d(e.data),series:[{dataKey:"".concat(e.data.AggregationFunctions[0],"(").concat(e.data.AggregationAttribute,")")}],xAxis:{dataKey:e.data.GroupByAttributes[0]}}})).do(s).catch((function(e){return p.Observable.of({loading:!1,error:e,data:[]}).do(u)})).startWith({loading:!0})}))};e.exports=s(l((function(){return{dataStreamFactory:m}})),u)},"./MapStore2/web/client/components/widgets/enhancers/wpsCounter.js":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n("./node_modules/recompose/es/Recompose.js"),s=a.compose,l=a.withProps,c=n("./MapStore2/web/client/observables/wps/aggregate.js"),u=n("./MapStore2/web/client/components/misc/enhancers/propsStreamFactory.jsx"),p=n("./node_modules/rxjs/Rx.js"),d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.AggregationResults,n=void 0===t?[]:t,r=e.GroupByAttributes,a=void 0===r?[]:r,s=e.AggregationAttribute,l=e.AggregationFunctions;return n.map((function(e){return o(o({},a.reduce((function(t,n,r){return o(o({},t),{},i({},n,e[r]))}),{})),{},i({},"".concat(l[0],"(").concat(s,")"),e[e.length-1]))}))},f=n("./MapStore2/web/client/utils/LayersUtils.js").getWpsUrl,m=function(e){return e.filter((function(e){var t=e.layer,n=void 0===t?{}:t,r=e.options;return n.name&&f(n)&&r&&r.aggregateFunction&&r.aggregationAttribute})).distinctUntilChanged((function(e,t){var n,r,o=e.layer,i=void 0===o?{}:o,a=e.options,s=void 0===a?{}:a,l=e.filter;return t.layer&&i.name===t.layer.name&&i.loadingError===t.layer.loadingError&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.aggregateFunction===t.aggregateFunction&&e.aggregationAttribute===t.aggregationAttribute&&e.viewParams===t.viewParams}(s,t.options)&&(n=l,r=t.filter,n===r)})).switchMap((function(e){var t=e.layer,n=void 0===t?{}:t,r=e.options,i=e.filter,a=e.onLoad,s=void 0===a?function(){}:a,l=e.onLoadError,u=void 0===l?function(){}:l;return c(f(n),o(o({featureType:n.name},r),{},{filter:i}),{timeout:15e3}).map((function(e){return{loading:!1,isAnimationActive:!1,error:void 0,data:d(e.data),series:[{dataKey:"".concat(e.data.AggregationFunctions[0],"(").concat(e.data.AggregationAttribute,")")}]}})).do(s).catch((function(e){return p.Observable.of({loading:!1,error:e,data:[]}).do(u)})).startWith({loading:!0})}))};e.exports=s(l((function(){return{dataStreamFactory:m}})),u)},"./MapStore2/web/client/components/widgets/view/WidgetsBar.jsx":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n("./node_modules/recompose/es/Recompose.js"),s=a.compose,l=a.withPropsOnChange,c=n("./MapStore2/web/client/components/misc/toolbar/Toolbar.jsx"),u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.widgetType,n=e.type,r=t&&"chart"!==t?t:n;switch(r){case"text":return"sheet";case"table":return"features-grid";case"pie":return"pie-chart";case"line":return"1-line";case"map":return"1-map";case"counter":return"counter";default:return"stats"}};e.exports=s(l(["btnGroupProps"],(function(e){var t=e.btnGroupProps;return{btnGroupProps:o(o({},t),{},{className:"widgets-bar"+(t&&t.className?" ".concat(t.className):"")})}})),l(["widgets","onClick"],(function(e){var t=e.widgets,n=void 0===t?[]:t,r=e.onClick,o=void 0===r?function(){}:r;return{buttons:n.map((function(e){return{glyph:u(e),tooltip:e.title,className:e.collapsed?"btn-tray":"btn-tray active",onClick:function(){return o(e)}}}))}})))(c)},"./MapStore2/web/client/components/widgets/view/WidgetsView.jsx":function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=n("./node_modules/react/index.js"),c=n("./node_modules/recompose/es/Recompose.js"),u=c.pure,p=c.branch,d=n("./node_modules/lodash/lodash.js"),f=d.find,m=d.mapValues,y=n("./node_modules/react-grid-layout/index.js"),b=y.Responsive,g=p((function(e){var t=e.useDefaultWidthProvider;return void 0===t||t}),y.WidthProvider)(b),h=n("./MapStore2/web/client/components/widgets/enhancers/withGroupColor.jsx")(n("./MapStore2/web/client/components/widgets/widget/DefaultWidget.jsx")),v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.filter((function(e){return f(e.widgets,(function(e){return e===t.id}))}))};n("./node_modules/react-grid-layout/css/styles.css");var S=function(e){return e<480?e-34:e};e.exports=u((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,n=e.style,o=e.className,a=void 0===o?"":o,c=e.toolsOptions,u=void 0===c?{}:c,p=e.rowHeight,d=void 0===p?208:p,y=e.breakpoints,b=void 0===y?{lg:1200,md:996,sm:768,xs:480,xxs:0}:y,w=e.cols,O=void 0===w?{lg:6,md:6,sm:4,xs:2,xxs:1}:w,j=e.widgets,E=void 0===j?[]:j,x=e.layouts,P=e.dependencies,C=e.verticalCompact,T=void 0!==C&&C,M=e.compactMode,_=e.useDefaultWidthProvider,A=void 0===_||_,R=e.measureBeforeMount,I=e.width,D=e.showGroupColor,k=e.groups,L=void 0===k?[]:k,N=e.canEdit,F=void 0===N||N,U=e.getWidgetClass,G=void 0===U?function(){}:U,B=e.onWidgetClick,z=void 0===B?function(){}:B,W=e.updateWidgetProperty,V=void 0===W?function(){}:W,H=e.deleteWidget,q=void 0===H?function(){}:H,Y=e.toggleCollapse,Q=void 0===Y?function(){}:Y,K=e.editWidget,Z=void 0===K?function(){}:K,X=e.onLayoutChange,J=void 0===X?function(){}:X,$=e.language,ee=e.env,te=s(e,["id","style","className","toolsOptions","rowHeight","breakpoints","cols","widgets","layouts","dependencies","verticalCompact","compactMode","useDefaultWidthProvider","measureBeforeMount","width","showGroupColor","groups","canEdit","getWidgetClass","onWidgetClick","updateWidgetProperty","deleteWidget","toggleCollapse","editWidget","onLayoutChange","language","env"]),ne=E.filter((function(e){var t=e.mapSync,n=e.dependenciesMap;return t&&n})).map((function(e){return e.dependenciesMap})),re=function(e){return"table"===e.widgetType&&ne.filter((function(t){return Object.keys(t).filter((function(n){return t[n]&&-1!==t[n].indexOf(e.id)})).length>0})).length>0};return l.createElement(g,{key:t||"widgets-view",useDefaultWidthProvider:A,measureBeforeMount:R,width:A?void 0:S(I),isResizable:F,isDraggable:F,draggableHandle:".draggableHandle",onLayoutChange:J,preventCollision:!0,style:n,className:"widget-container ".concat(a," ").concat(F?"":"no-drag"),rowHeight:d,autoSize:!0,verticalCompact:T,compactMode:M,breakpoints:b,cols:O,layouts:x?JSON.parse(JSON.stringify(m(x,(function(e){return e.map((function(e){var t=f(E,{id:e.i});return t?i(i({},e),{},{static:t.dataGrid&&t.dataGrid.static}):e}))})))):void 0},E.map((function(e){return l.createElement("div",{key:e.id,"data-grid":e.dataGrid,onClick:function(){return z(e)},className:G(e)},l.createElement(h,r({"data-grid":e.dataGrid},te,e,{quickFilters:re(e)?e.quickFilters:void 0,toolsOptions:u,groups:v(L,e),showGroupColor:D,dependencies:P,enableColumnFilters:re(e),canEdit:F,updateProperty:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return V.apply(void 0,[e.id].concat(n))},toggleCollapse:function(){return Q(e)},onDelete:function(){return q(e)},onEdit:function(){return Z(e)},language:$,env:ee})))})))}))},"./MapStore2/web/client/components/widgets/widget/ChartView.jsx":function(e,t,n){var r=n("./MapStore2/web/client/components/misc/enhancers/loadingState.jsx")()(n("./MapStore2/web/client/components/widgets/enhancers/errorChartState.js")(n("./MapStore2/web/client/components/widgets/enhancers/emptyChartState.js")(n("./MapStore2/web/client/components/charts/SimpleChart.jsx")))),o=n("./node_modules/react-container-dimensions/lib/index.js").default,i=n("./node_modules/react/index.js");e.exports=function(e){return i.createElement("div",{className:"mapstore-widget-chart"},i.createElement(o,null,i.createElement(r,e)))}},"./MapStore2/web/client/components/widgets/widget/ChartWidget.jsx":function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function o(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var i=n("./node_modules/react/index.js"),a=n("./MapStore2/web/client/components/widgets/widget/TableView.jsx"),s=n("./MapStore2/web/client/components/widgets/widget/ChartView.jsx"),l=n("./MapStore2/web/client/components/widgets/widget/WidgetContainer.jsx"),c=n("./node_modules/react-bootstrap/es/index.js").Glyphicon,u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.showTable,n=e.toggleTableView,r=void 0===n?function(){}:n;return t?i.createElement(c,{onClick:function(){r()},glyph:"arrow-left pull-left"}):null};e.exports=function(e){var t=e.id,n=e.title,c=e.description,p=e.headerStyle,d=e.data,f=void 0===d?[]:d,m=e.series,y=void 0===m?[]:m,b=e.loading,g=e.icons,h=e.showTable,v=e.topRightItems,S=e.confirmDelete,w=void 0!==S&&S,O=e.onDelete,j=void 0===O?function(){}:O,E=e.toggleTableView,x=void 0===E?function(){}:E,P=e.toggleDeleteConfirm,C=void 0===P?function(){}:P,T=o(e,["id","title","description","headerStyle","data","series","loading","icons","showTable","topRightItems","confirmDelete","onDelete","toggleTableView","toggleDeleteConfirm"]);return i.createElement(l,{id:"widget-chart-".concat(t),headerStyle:p,title:n,icons:g,topLeftItems:u({loading:b,title:n,description:c,showTable:h,toggleTableView:x}),confirmDelete:w,onDelete:j,toggleDeleteConfirm:C,topRightItems:v},h?i.createElement(a,r({data:f},T)):i.createElement(s,r({id:t,isAnimationActive:!b,loading:b,data:f,series:y,iconFit:!0},T)))}},"./MapStore2/web/client/components/widgets/widget/CounterView.jsx":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function s(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=n("./MapStore2/web/client/components/misc/enhancers/loadingState.jsx")(),c=n("./MapStore2/web/client/components/widgets/enhancers/errorChartState.js"),u=n("./MapStore2/web/client/components/widgets/enhancers/emptyChartState.js"),p=n("./MapStore2/web/client/components/I18N/Number.jsx"),d=n("./node_modules/recompose/es/Recompose.js").compose,f=n("./node_modules/lodash/lodash.js").get,m=n("./node_modules/react-textfit/lib/index.js").Textfit,y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.value,n=void 0===t?"":t,r=e.uom,o=void 0===r?"":r,i=s(e,["value","uom"]);return g.createElement(m,a({mode:"single",forceSingleModeWidth:!1,max:500,throttle:20},i),g.createElement(p,{value:n}),g.createElement("span",{style:{fontSize:"75%"}},o))},b=d(l,c,u),g=n("./node_modules/react/index.js");e.exports=b((function(e){var t=e.series,n=void 0===t?[]:t,r=e.data,i=void 0===r?[]:r,a=e.options,s=void 0===a?{}:a,l=e.style,c=void 0===l?{width:"100%",height:"100%",transform:"translate(-50%, -50%)",position:"absolute",display:"inline",padding:"1%",top:"50%",left:"50%"}:l;return g.createElement("div",{className:"counter-widget-view"},n.map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dataKey,n=arguments.length>1?arguments[1]:void 0;return g.createElement(y,{key:t,uom:f(s,"seriesOptions[".concat(n,"].uom")),value:i[0][t],style:o({textAlign:"center"},c)})})))}))},"./MapStore2/web/client/components/widgets/widget/CounterWidget.jsx":function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function o(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var i=n("./node_modules/react/index.js"),a=n("./MapStore2/web/client/components/widgets/widget/CounterView.jsx"),s=n("./MapStore2/web/client/components/widgets/widget/WidgetContainer.jsx"),l=n("./node_modules/react-bootstrap/es/index.js").Glyphicon,c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.showTable,n=e.toggleTableView,r=void 0===n?function(){}:n;return t?i.createElement(l,{onClick:function(){r()},glyph:"arrow-left pull-left"}):null};e.exports=function(e){var t=e.id,n=e.title,l=e.description,u=e.data,p=void 0===u?[]:u,d=e.series,f=void 0===d?[]:d,m=e.loading,y=e.showTable,b=e.confirmDelete,g=void 0!==b&&b,h=e.headerStyle,v=e.icons,S=e.topRightItems,w=e.toggleTableView,O=void 0===w?function(){}:w,j=e.toggleDeleteConfirm,E=void 0===j?function(){}:j,x=e.onDelete,P=void 0===x?function(){}:x,C=o(e,["id","title","description","data","series","loading","showTable","confirmDelete","headerStyle","icons","topRightItems","toggleTableView","toggleDeleteConfirm","onDelete"]);return i.createElement(s,{className:"counter-widget",id:"widget-chart-".concat(t),title:n,icons:v,topLeftItems:c({loading:m,title:n,description:l,showTable:y,toggleTableView:O}),confirmDelete:g,onDelete:P,toggleDeleteConfirm:E,headerStyle:h,topRightItems:S},i.createElement(a,r({id:t,isAnimationActive:!m,loading:m,data:p,series:f,iconFit:!0},C)))}},"./MapStore2/web/client/components/widgets/widget/DefaultWidget.jsx":function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function o(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var i=n("./node_modules/react/index.js"),a=n("./node_modules/recompose/es/Recompose.js").compose,s=n("./MapStore2/web/client/components/widgets/enhancers/chartWidget.js"),l=n("./MapStore2/web/client/components/widgets/enhancers/counterWidget.js"),c=n("./MapStore2/web/client/components/widgets/enhancers/tableWidget.js"),u=n("./MapStore2/web/client/components/widgets/enhancers/legendWidget.js"),p=n("./MapStore2/web/client/components/widgets/enhancers/textWidget.js"),d=n("./MapStore2/web/client/components/widgets/enhancers/mapWidget.js"),f=n("./MapStore2/web/client/components/widgets/enhancers/wpsChart.js"),m=n("./MapStore2/web/client/components/widgets/enhancers/wpsCounter.js"),y=n("./MapStore2/web/client/components/widgets/enhancers/wfsTable/index.js"),b=n("./MapStore2/web/client/components/widgets/enhancers/dependenciesToFilter.js"),g=n("./MapStore2/web/client/components/widgets/enhancers/dependenciesToOptions.js"),h=n("./MapStore2/web/client/components/widgets/enhancers/dependenciesToWidget.js"),v=n("./MapStore2/web/client/components/widgets/enhancers/dependenciesToExtent.js"),S=n("./MapStore2/web/client/components/widgets/enhancers/dependenciesToLayers.js"),w=n("./MapStore2/web/client/components/widgets/enhancers/dependenciesToMapProp.js"),O=a(h,b,g,f,s)(n("./MapStore2/web/client/components/widgets/widget/ChartWidget.jsx")),j=a(p)(n("./MapStore2/web/client/components/widgets/widget/TextWidget.jsx")),E=a(h,S,w("center"),w("zoom"),v,d)(n("./MapStore2/web/client/components/widgets/widget/MapWidget.jsx")),x=a(h,g,b,y,c)(n("./MapStore2/web/client/components/widgets/widget/TableWidget.jsx")),P=a(h,b,g,m,l)(n("./MapStore2/web/client/components/widgets/widget/CounterWidget.jsx")),C=a(h,u)(n("./MapStore2/web/client/components/widgets/widget/LegendWidget.jsx"));e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dependencies,n=e.toggleCollapse,a=void 0===n?function(){}:n,s=e.exportCSV,l=void 0===s?function(){}:s,c=e.exportImage,u=void 0===c?function(){}:c,p=e.onDelete,d=void 0===p?function(){}:p,f=e.onEdit,m=void 0===f?function(){}:f,y=o(e,["dependencies","toggleCollapse","exportCSV","exportImage","onDelete","onEdit"]);return"text"===y.widgetType?i.createElement(j,r({},y,{toggleCollapse:a,onDelete:d,onEdit:m})):"table"===y.widgetType?i.createElement(x,r({},y,{toggleCollapse:a,exportCSV:l,dependencies:t,onDelete:d,onEdit:m})):"counter"===y.widgetType?i.createElement(P,r({},y,{toggleCollapse:a,dependencies:t,onDelete:d,onEdit:m})):"map"===y.widgetType?i.createElement(E,r({},y,{toggleCollapse:a,dependencies:t,onDelete:d,onEdit:m})):"legend"===y.widgetType?i.createElement(C,r({},y,{toggleCollapse:a,dependencies:t,onDelete:d,onEdit:m})):i.createElement(O,r({},y,{toggleCollapse:a,exportCSV:l,dependencies:t,exportImage:u,onDelete:d,onEdit:m}))}},"./MapStore2/web/client/components/widgets/widget/LegendView.jsx":function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=n("./node_modules/react/index.js"),l=n("./node_modules/lodash/lodash.js"),c=l.isNil,u=l.isObject,p=n("./MapStore2/web/client/components/misc/cardgrids/SideGrid.jsx"),d=n("./node_modules/react-bootstrap/es/index.js"),f=d.Glyphicon,m=d.Grid,y=d.Row,b=d.Col,g=n("./MapStore2/web/client/components/misc/Slider.jsx"),h=n("./MapStore2/web/client/components/TOC/fragments/WMSLegend.jsx");e.exports=function(e){var t=e.layers,n=void 0===t?[]:t,o=e.onChange,a=void 0===o?function(){}:o,l=e.legendProps,d=void 0===l?{}:l,v=e.currentZoomLvl,S=e.disableOpacitySlider,w=void 0===S||S,O=e.disableVisibility,j=void 0===O||O,E=e.scales,x=e.language,P=e.currentLocale;return s.createElement(p,{className:"compact-legend-grid",size:"sm",items:n.map((function(e){return{title:e.title&&u(e.title)&&(e.title[P]||e.title.default)||e.title,preview:j?null:s.createElement(f,{className:"text-primary",glyph:e.visibility?"eye-open":"eye-close"}),style:{opacity:e.visibility?1:.4},body:e.visibility?s.createElement("div",null,s.createElement(m,{fluid:!0},s.createElement(y,null,s.createElement(b,{xs:12,className:"ms-legend-container"},s.createElement(h,r({node:i({},e),currentZoomLvl:v,scales:E,language:x},d))))),!w&&s.createElement("div",{className:"mapstore-slider",onClick:function(e){e.stopPropagation()}},s.createElement(g,{disabled:!e.visibility,start:[c(e.opacity)?100:Math.round(100*e.opacity)],range:{min:0,max:100},onChange:function(t){return a(e.id,"layers",{opacity:parseFloat((t[0]/100).toFixed(2))})}}))):null}}))})}},"./MapStore2/web/client/components/widgets/widget/LegendWidget.jsx":function(e,t,n){function r(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var o=n("./node_modules/react/index.js"),i=n("./MapStore2/web/client/components/widgets/widget/WidgetContainer.jsx"),a=n("./MapStore2/web/client/components/widgets/enhancers/emptyLegendState.js")()(n("./MapStore2/web/client/components/widgets/widget/LegendView.jsx"));e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.toggleDeleteConfirm,n=void 0===t?function(){}:t,s=e.id,l=e.title,c=e.icons,u=e.headerStyle,p=e.confirmDelete,d=void 0!==p&&p,f=e.topRightItems,m=e.onDelete,y=void 0===m?function(){}:m,b=r(e,["toggleDeleteConfirm","id","title","icons","headerStyle","confirmDelete","topRightItems","onDelete"]);return o.createElement(i,{id:"widget-text-".concat(s),title:l,confirmDelete:d,onDelete:y,toggleDeleteConfirm:n,headerStyle:u,icons:c,topRightItems:f},o.createElement(a,b))}},"./MapStore2/web/client/components/widgets/widget/MapView.jsx":function(e,t,n){var r=n("./MapStore2/web/client/components/map/enhancers/autoMapType.js"),o=n("./MapStore2/web/client/components/map/enhancers/mapType.js"),i=n("./MapStore2/web/client/components/map/enhancers/autoResize.js"),a=n("./MapStore2/web/client/components/map/enhancers/getProjectionDefs.js").default,s=n("./MapStore2/web/client/components/map/enhancers/onMapViewChanges.js"),l=n("./node_modules/recompose/es/Recompose.js").compose,c=n("./MapStore2/web/client/components/map/enhancers/handlingUnsupportedProjection.js").handlingUnsupportedProjection;e.exports=l(s,i(0),r,o,a,c)(n("./MapStore2/web/client/components/map/BaseMap.jsx"))},"./MapStore2/web/client/components/widgets/widget/MapWidget.jsx":function(e,t,n){function r(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var o=n("./node_modules/react/index.js"),i=n("./MapStore2/web/client/components/widgets/widget/WidgetContainer.jsx"),a=n("./MapStore2/web/client/components/layout/BorderLayout.jsx"),s=n("./node_modules/lodash/lodash.js").omit,l=(0,n("./node_modules/recompose/es/Recompose.js").withHandlers)({onMapViewChanges:function(e){var t=e.updateProperty,n=void 0===t?function(){}:t;return function(e){e.layers;var t=r(e,["layers"]);return n("map",t,"merge")}}})(n("./MapStore2/web/client/components/widgets/widget/MapView.jsx")),c=n("./MapStore2/web/client/components/misc/LoadingSpinner.jsx");e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.updateProperty,n=void 0===t?function(){}:t,r=e.toggleDeleteConfirm,u=void 0===r?function(){}:r,p=e.id,d=e.title,f=e.map,m=e.icons,y=e.hookRegister,b=e.mapStateSource,g=e.topRightItems,h=e.confirmDelete,v=void 0!==h&&h,S=e.loading,w=void 0!==S&&S,O=e.onDelete,j=void 0===O?function(){}:O,E=e.headerStyle,x=e.env;return o.createElement(i,{id:"widget-text-".concat(p),title:d,confirmDelete:v,onDelete:j,toggleDeleteConfirm:u,headerStyle:E,icons:m,topRightItems:g},o.createElement(a,{footer:o.createElement("div",{style:{height:"30px",overflow:"hidden"}},w?o.createElement("span",{style:{float:"right"}},o.createElement(c,null)):null)},o.createElement(l,{updateProperty:n,id:p,map:s(f,"mapStateSource"),mapStateSource:b,hookRegister:y,layers:f&&f.layers,options:{style:{margin:10,height:"calc(100% - 20px)"}},env:x})))}},"./MapStore2/web/client/components/widgets/widget/TableView.jsx":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=n("./node_modules/react/index.js"),l=n("./node_modules/react-bootstrap/es/index.js").Table;e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data,n=void 0===t?[]:t,r=a(e,["data"]),i=Object.keys(n.reduce((function(e,t){return o(o({},e),t)}),{}));return s.createElement("div",{className:"mapstore-widget-table"},s.createElement(l,{striped:!0},s.createElement("thead",null,s.createElement("tr",null,i.map((function(e,t){return s.createElement("th",null,t+1===i.length&&r.yAxisLabel?r.yAxisLabel:t>0?"".concat(e):e)})))),s.createElement("tbody",null,n.map((function(e){return s.createElement("tr",null,i.map((function(t){return s.createElement("td",null,e[t])})))})))))}},"./MapStore2/web/client/components/widgets/widget/TableWidget.jsx":function(e,t,n){var r=n("./node_modules/react/index.js"),o=n("./MapStore2/web/client/components/I18N/Message.jsx"),i=n("./MapStore2/web/client/components/layout/BorderLayout.jsx"),a=n("./MapStore2/web/client/components/misc/LoadingSpinner.jsx"),s=n("./MapStore2/web/client/components/data/featuregrid/EmptyRowsView.jsx"),l=n("./MapStore2/web/client/components/misc/enhancers/loadingState.jsx"),c=n("./MapStore2/web/client/components/widgets/enhancers/errorChartState.js"),u=n("./MapStore2/web/client/plugins/widgets/getWidgetFilterRenderers.js").getWidgetFilterRenderers,p=c(l((function(e){return!e.describeFeatureType}))(n("./MapStore2/web/client/components/data/featuregrid/FeatureGrid.jsx"))),d=n("./MapStore2/web/client/components/widgets/widget/WidgetContainer.jsx");e.exports=u((function(e){var t=e.id,n=e.title,l=e.loading,c=e.confirmDelete,u=void 0!==c&&c,f=e.enableColumnFilters,m=void 0!==f&&f,y=e.headerStyle,b=e.icons,g=e.topRightItems,h=e.toggleDeleteConfirm,v=void 0===h?function(){}:h,S=e.onDelete,w=void 0===S?function(){}:S,O=e.gridEvents,j=void 0===O?function(){}:O,E=e.pageEvents,x=void 0===E?{moreFeatures:function(){}}:E,P=e.describeFeatureType,C=e.filterRenderers,T=e.columnSettings,M=e.features,_=e.size,A=e.pages,R=e.error,I=e.pagination,D=void 0===I?{}:I,k=e.virtualScroll,L=void 0===k||k;return r.createElement(d,{id:"widget-chart-".concat(t),title:n,headerStyle:y,icons:b,confirmDelete:u,onDelete:w,toggleDeleteConfirm:v,topRightItems:g},r.createElement(i,{footer:D.totalFeatures?r.createElement("div",{style:{height:"30px",overflow:"hidden"}},l?r.createElement("span",{style:{float:"right"}},r.createElement(a,null)):null,void 0===R&&r.createElement("span",{style:{float:"left",margin:"5px"}},r.createElement(o,{msgId:"featuregrid.resultInfoVirtual",msgParams:{total:D.totalFeatures}}))):null},r.createElement(p,{emptyRowsView:function(){return r.createElement(s,{loading:l})},gridEvents:j,sortable:!1,defaultSize:!1,columnSettings:T,pageEvents:x,virtualScroll:L,enableColumnFilters:m,filterRenderers:C,features:M,pages:A,error:R,size:_,rowKey:"id",describeFeatureType:P,pagination:D})))}))},"./MapStore2/web/client/components/widgets/widget/TextWidget.jsx":function(e,t,n){var r=n("./node_modules/react/index.js"),o=n("./MapStore2/web/client/components/widgets/widget/WidgetContainer.jsx"),i=n("./MapStore2/web/client/components/widgets/enhancers/emptyTextState.js")((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.text;return r.createElement("div",{className:"mapstore-widget-default-content ql-editor",dangerouslySetInnerHTML:{__html:t}})}));e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.toggleDeleteConfirm,n=void 0===t?function(){}:t,a=e.icons,s=e.topLeftItems,l=e.id,c=e.title,u=e.text,p=e.headerStyle,d=e.topRightItems,f=e.confirmDelete,m=void 0!==f&&f,y=e.onDelete,b=void 0===y?function(){}:y;return r.createElement(o,{id:"widget-text-".concat(l),title:c,confirmDelete:m,onDelete:b,toggleDeleteConfirm:n,headerStyle:p,icons:a,topLeftItems:s,topRightItems:d},r.createElement(i,{text:u}))}},"./MapStore2/web/client/components/widgets/widget/WidgetContainer.jsx":function(e,t,n){var r=n("./node_modules/react/index.js"),o=n("./MapStore2/web/client/components/I18N/Message.jsx"),i=n("./MapStore2/web/client/components/layout/BorderLayout.jsx"),a=n("./MapStore2/web/client/components/maps/modals/ConfirmModal.jsx");e.exports=function(e){var t=e.id,n=e.title,s=e.confirmDelete,l=void 0!==s&&s,c=e.className,u=e.handle,p=void 0===u?"draggableHandle":u,d=e.toggleDeleteConfirm,f=void 0===d?function(){}:d,m=e.onDelete,y=void 0===m?function(){}:m,b=e.icons,g=e.topLeftItems,h=e.topRightItems,v=e.headerStyle,S=void 0===v?{}:v,w=e.children;return r.createElement("div",{className:"mapstore-widget-card",id:t},r.createElement(i,{className:c,header:r.createElement("div",{style:S,className:"mapstore-widget-info ".concat(p||"")},r.createElement("div",{className:"mapstore-widget-header"},r.createElement("span",{className:"widget-icons"},b),g,r.createElement("span",{className:"widget-title"},n),r.createElement("span",{className:"mapstore-widget-options"},h)))},w),l?r.createElement(a,{confirmText:r.createElement(o,{msgId:"widgets.widget.menu.delete"}),titleText:r.createElement(o,{msgId:"widgets.widget.menu.delete"}),body:r.createElement(o,{msgId:"widgets.widget.menu.confirmDelete"}),show:l,onClose:function(){return f(!1)},onConfirm:function(){return y(t)}}):null)}},"./MapStore2/web/client/epics/autocomplete.js":function(e,t,n){var r=n("./node_modules/rxjs/Rx.js"),o=n("./MapStore2/web/client/libs/ajax.js"),i=n("./MapStore2/web/client/actions/queryform.js"),a=i.UPDATE_FILTER_FIELD,s=i.updateFilterFieldOptions,l=i.loadingFilterFieldOptions,c=i.setAutocompleteMode,u=i.toggleMenu,p=n("./MapStore2/web/client/actions/wfsquery.js").FEATURE_TYPE_SELECTED,d=n("./MapStore2/web/client/utils/ogc/WPS/autocomplete.js").getWpsPayload,f=n("./node_modules/lodash/lodash.js"),m=f.isArray,y=f.startsWith,b=n("./MapStore2/web/client/actions/notifications.js").error,g=n("./MapStore2/web/client/selectors/query.js").typeNameSelector,h=n("./MapStore2/web/client/selectors/queryform.js"),v=h.maxFeaturesWPSSelector,S=h.appliedFilterSelector,w=h.storedFilterSelector,O=n("./MapStore2/web/client/utils/ConfigUtils.js").getParsedUrl,j=n("./MapStore2/web/client/selectors/catalog.js").authkeyParamNameSelector;e.exports={isAutoCompleteEnabled:function(e,t){return e.ofType(p).switchMap((function(e){var n=O(e.url,{version:"1.0.0",REQUEST:"DescribeProcess",IDENTIFIER:"gs:PagedUnique"},j(t.getState()));return null===n?r.Observable.of(c(!1)):r.Observable.fromPromise(o.post(n,null,{timeout:5e3,headers:{Accept:"application/json","Content-Type":"application/xml"}}).then((function(e){return e.data}))).switchMap((function(e){return y(e,"<ows:ExceptionReport")?r.Observable.of(c(!1)):r.Observable.of(c(!0))})).catch((function(){return r.Observable.of(c(!1))}))}))},fetchAutocompleteOptionsEpic:function(e,t){return e.ofType(a).debounce((function(e){return r.Observable.timer(e.fieldOptions.delayDebounce||0)})).filter((function(e){return"value"===e.fieldName&&"string"===e.fieldType&&t.getState().queryform.autocompleteEnabled})).switchMap((function(e){var n=t.getState(),i=v(n),a=n.queryform&&n.queryform.filterFields&&n.queryform.filterFields.filter((function(t){return t.rowId===e.rowId}))[0];if("selected"===e.fieldOptions.selected)return r.Observable.from([s(a,[],0)]);var p=d({attribute:a.attribute,layerName:g(n),layerFilter:S(n)||w(n),maxFeatures:i,startIndex:(e.fieldOptions.currentPage-1)*i,value:e.fieldValue}),f=O(n.query.url,{outputFormat:"json"},j(t.getState()));return null===f?r.Observable.of(c(!1)):r.Observable.fromPromise(o.post(f,p,{timeout:6e4,headers:{Accept:"application/json","Content-Type":"application/xml"}}).then((function(e){return e.data}))).switchMap((function(t){var n=m(t.values)?t.values:[t.values],o=t.size;return r.Observable.from([s(a,n,o),u(e.rowId,!0)])})).startWith(l(!0,a)).catch((function(){return r.Observable.from([s(a,[],0),b({title:"warning",message:"warning",action:{label:"warning"},autoDismiss:3,position:"tr"}),u(e.rowId,!0)])})).concat([l(!1,a)])}))}}},"./MapStore2/web/client/epics/catalog.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/rxjs/Rx.js"),o=n("./node_modules/axios/index.js"),i=n.n(o),a=n("./node_modules/xpath/xpath.js"),s=n.n(a),l=n("./node_modules/xmldom/lib/dom-parser.js"),c=n("./node_modules/lodash/lodash.js"),u=n("./MapStore2/web/client/actions/catalog.js"),p=n("./MapStore2/web/client/actions/layers.js"),d=n("./MapStore2/web/client/actions/notifications.js"),f=n("./MapStore2/web/client/actions/controls.js"),m=n("./MapStore2/web/client/actions/featuregrid.js"),y=n("./MapStore2/web/client/actions/mapInfo.js"),b=n("./MapStore2/web/client/actions/backgroundselector.js"),g=n("./MapStore2/web/client/selectors/catalog.js"),h=n("./MapStore2/web/client/selectors/backgroundselector.js"),v=n("./MapStore2/web/client/selectors/locale.js"),S=n("./MapStore2/web/client/selectors/layers.js"),w=n("./MapStore2/web/client/utils/CatalogUtils.js"),O=n("./MapStore2/web/client/utils/CoordinatesUtils.js"),j=n.n(O),E=n("./MapStore2/web/client/utils/LayersUtils.js"),x=n.n(E);function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||T(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e){return function(e){if(Array.isArray(e))return M(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||T(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){if(e){if("string"==typeof e)return M(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?M(e,t):void 0}}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){I(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.default=function(e){return{recordSearchEpic:function(t,n){return t.ofType(u.TEXT_SEARCH).switchMap((function(t){var o=t.format,i=t.url,a=t.startPosition,s=t.maxRecords,l=t.text,c=t.options;return r.Observable.defer((function(){return e[o].textSearch(i,a,s,l,R({options:c},Object(g.catalogSearchInfoSelector)(n.getState())))})).switchMap((function(e){return e.error?r.Observable.of(Object(u.recordsLoadError)(e)):r.Observable.of(Object(u.recordsLoaded)({url:i,startPosition:a,maxRecords:s,text:l},e))})).startWith(Object(u.setLoading)(!0)).catch((function(e){return r.Observable.of(Object(u.recordsLoadError)(e))}))}))},addLayersFromCatalogsEpic:function(t,n){return t.ofType(u.ADD_LAYERS_FROM_CATALOGS).filter((function(e){var t=e.layers,n=e.sources;return Object(c.isArray)(t)&&Object(c.isArray)(n)&&t.length&&t.length===n.length})).switchMap((function(t){var o=t.layers,i=t.sources,a=t.options,s=t.startPosition,l=void 0===s?1:s,u=t.maxRecords,p=void 0===u?4:u,d=n.getState(),f=a||Object(g.searchOptionsSelector)(d),m=Object(g.servicesSelector)(d),y=o.filter((function(e,t){return!!m[i[t]]})).map((function(t,n){var a=m[i[n]],s=a.type,c=a.url,u=o[n];return r.Observable.defer((function(){return e[s].textSearch(c,l,p,u,f).catch((function(){return{results:[]}}))})).map((function(e){return R(R({},e),{},{format:s,url:c,text:u})}))}));return r.Observable.forkJoin(y).switchMap((function(e){return Object(c.isArray)(e)&&e.length?r.Observable.of(e.map((function(e){var t=e.format,n=e.url,o=e.text,i=_(e,["format","url","text"]),a=Object(v.currentMessagesSelector)(d),s=Object(w.getCatalogRecords)(t,i,f,a)||[],l=Object(c.head)(s.filter((function(e){return e.identifier===o}))),u=Object(w.extractOGCServicesReferences)(l),p=u.wms,m=u.wmts,y={},b={},h=Object(g.authkeyParamNameSelector)(d);if(p){var S=Object(w.buildSRSMap)(p.SRS);if(p.SRS.length>0&&!j.a.isAllowedSRS("EPSG:3857",S))return r.Observable.empty();y=Object(w.recordToLayer)(l,"wms",{removeParams:h,catalogURL:"csw"===t&&n?n+"?request=GetRecordById&service=CSW&version=2.0.2&elementSetName=full&id="+l.identifier:n},b)}else if(m){y={};var O=Object(w.buildSRSMap)(m.SRS);if(m.SRS.length>0&&!j.a.isAllowedSRS("EPSG:3857",O))return r.Observable.empty();y=Object(w.recordToLayer)(l,"wmts",{removeParams:h},b)}else{Object(w.extractEsriReferences)(l).esri&&(y=Object(w.esriToLayer)(l,b))}return l?y:o}))):r.Observable.empty()}))})).mergeMap((function(e){if(e){var t=e.filter((function(e){return Object(c.isString)(e)})).join(" "),n=[];return t&&(n=[Object(u.recordsNotFound)(t)]),n=[].concat(C(n),C(e.filter((function(e){return Object(c.isObject)(e)})).map((function(e){return Object(p.addLayer)(e)})))),r.Observable.from(n)}return r.Observable.empty()})).catch((function(){return r.Observable.empty()}))},newCatalogServiceAdded:function(t,n){return t.ofType(u.ADD_SERVICE).switchMap((function(){var t=n.getState(),o=Object(g.newServiceSelector)(t);return r.Observable.of(o).switchMap((function(t){var n,o,i;return null!==(n=null===(o=e[t.type])||void 0===o||null===(i=o.validate)||void 0===i?void 0:i.call(o,t))&&void 0!==n?n:r.Observable.of(t)})).switchMap((function(t){var n,o,i;return null!==(n=null===(o=e[t.type])||void 0===o||null===(i=o.testService)||void 0===i?void 0:i.call(o,t))&&void 0!==n?n:r.Observable.of(t)})).switchMap((function(){return r.Observable.of(Object(u.addCatalogService)(o),Object(d.success)({title:"notification.success",message:"catalog.notification.addCatalogService",autoDismiss:6,position:"tc"}))})).startWith(Object(u.savingService)(!0)).catch((function(e){return r.Observable.of(Object(d.error)({exception:e,title:"notification.warning",message:e.notification||"catalog.notification.warningAddCatalogService",autoDismiss:6,position:"tc"}))})).concat(r.Observable.of(Object(u.savingService)(!1)))}))},deleteCatalogServiceEpic:function(e,t){return e.ofType(u.DELETE_SERVICE).switchMap((function(){var e=t.getState(),n=Object(g.selectedServiceSelector)(e),o=Object(g.servicesSelector)(e),i=o[n]?Object(d.success)({title:"notification.warning",message:"catalog.notification.serviceDeletedCorrectly",autoDismiss:6,position:"tc"}):Object(d.error)({title:"notification.warning",message:"catalog.notification.impossibleDeleteService",autoDismiss:6,position:"tc"}),a=Object(u.deleteCatalogService)(n);return o[n]?r.Observable.of(i,a):r.Observable.of(i)}))},openCatalogEpic:function(e){return e.ofType(f.SET_CONTROL_PROPERTY).filter((function(e){return"metadataexplorer"===e.control&&e.value})).switchMap((function(){return r.Observable.of(Object(m.closeFeatureGrid)(),Object(y.purgeMapInfoResults)(),Object(y.hideMapinfoMarker)())}))},getMetadataRecordById:function(t,n){return t.ofType(u.GET_METADATA_RECORD_BY_ID).switchMap((function(t){var o=t.metadataOptions,a=void 0===o?{}:o,u=n.getState(),f=Object(S.getSelectedLayer)(u);return r.Observable.defer((function(){return e.wms.getCapabilities(x.a.getCapabilitiesUrl(f))})).switchMap((function(t){var n=Object(c.get)(t,"capability.layer.layer",[]),o=1===n.length?n[0].metadataURL:Object(c.find)(n,(function(e){return e.name===f.name.split(":")[1]})),u=Object(c.get)(Object(c.find)(o,(function(e){return Object(c.isString)(e.type)&&"iso19115:2003"===e.type.toLowerCase()&&("application/xml"===e.format||"text/xml"===e.format)})),"onlineResource.href"),m=Object(c.get)(Object(c.find)(o,(function(e){return Object(c.isString)(e.type)&&"iso19115:2003"===e.type.toLowerCase()&&"text/html"===e.format})),"onlineResource.href"),y=Object(c.find)(Object(c.get)(a,"extractors",[]),(function(e){var t=e.properties,n=e.layersRegex,r=n?new RegExp(n):null;return Object(c.isObject)(t)&&(!n||r.test(f.name))})),b=m?{metadataUrl:m}:{},g=r.Observable.defer((function(){return e.csw.getRecordById(f.catalogURL)})).switchMap((function(e){return e&&e.error?r.Observable.of(Object(d.error)({title:"notification.warning",message:"toc.layerMetadata.notification.warnigGetMetadataRecordById",autoDismiss:6,position:"tc"}),Object(p.showLayerMetadata)(b,!1)):e&&e.dc?r.Observable.of(Object(p.showLayerMetadata)(R(R({},b),e.dc),!1)):r.Observable.empty()})),h=r.Observable.defer((function(){return i.a.get(u)})).pluck("data").map((function(e){return(new l.DOMParser).parseFromString(e)})).map((function(e){var t=s.a.useNamespaces(a.xmlNamespaces||{});return function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;return Object(c.toPairs)(n).reduce((function(n,o){var i,a=P(o,2),s=a[0],l=a[1];if(Object(c.isObject)(l)&&Object(c.isString)(l.xpath)&&Object(c.isObject)(l.properties)&&Object(c.keys)(l.properties).length>0){0===(i=t(l.xpath,r).map((function(t){return e(l.properties,t)}))).length&&(i=null)}else{var u,p=t(l,r);if(1===p.length)i=null!==(u=Object(c.get)(p[0],"nodeValue"))&&void 0!==u?u:Object(c.get)(p[0],"childNodes[0].nodeValue");else p.length>1&&(i=p.map((function(e){return Object(c.get)(e,"childNodes[0].nodeValue")})).filter((function(e){return!!e})))}return R(R({},n),i?I({},s,i):{})}),{})}(y.properties,e)})).switchMap((function(e){return r.Observable.of(Object(p.showLayerMetadata)(R(R({},b),e),!1))}));return u&&y?h:f.catalogURL?g:r.Observable.of(Object(p.showLayerMetadata)(b,!1))})).startWith(Object(p.showLayerMetadata)({},!0)).catch((function(){return r.Observable.of(Object(d.error)({title:"notification.warning",message:"toc.layerMetadata.notification.warnigGetMetadataRecordById",autoDismiss:6,position:"tc"}),Object(p.showLayerMetadata)({},!1))}))}))},autoSearchEpic:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.getState,o=void 0===n?function(){}:n;return e.ofType(u.CHANGE_TEXT).debounce((function(){var e=o(),t=Object(g.delayAutoSearchSelector)(e);return r.Observable.timer(t)})).switchMap((function(e){var t=e.text,n=o(),i=Object(g.pageSizeSelector)(n),a=Object(g.selectedCatalogSelector)(n),s=a.type,l=a.url;return r.Observable.of(Object(u.textSearch)({format:s,url:l,startPosition:1,maxRecords:i,text:t}))}))},catalogCloseEpic:function(e,t){return e.ofType(u.CATALOG_CLOSE).switchMap((function(){var e,n=t.getState(),o=Object(h.metadataSourceSelector)(n),i=Object(g.servicesSelector)(n);return(e=r.Observable).of.apply(e,C([Object(f.setControlProperties)("metadataexplorer","enabled",!1,"group",null),Object(u.changeCatalogMode)("view"),Object(u.resetCatalog)()].concat("backgroundSelector"===o?[Object(u.changeSelectedService)(Object(c.head)(Object(c.keys)(i))),Object(b.allowBackgroundsDeletion)(!0)]:[])))}))}}}},"./MapStore2/web/client/epics/featuregrid.js":function(e,t,n){function r(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=n("./node_modules/rxjs/Rx.js"),c=n("./node_modules/lodash/lodash.js"),u=c.get,p=c.head,d=c.isEmpty,f=c.find,m=c.castArray,y=c.includes,b=c.reduce,g=n("./node_modules/connected-react-router/esm/index.js").LOCATION_CHANGE,h=n("./MapStore2/web/client/libs/ajax.js"),v=n("./node_modules/@turf/bbox/index.js"),S=n("./MapStore2/web/client/utils/ogc/Filter/filter.js").fidFilter,w=n("./MapStore2/web/client/utils/FeatureGridUtils.js"),O=w.getDefaultFeatureProjection,j=w.getPagesToLoad,E=n("./MapStore2/web/client/utils/MapUtils.js").isSimpleGeomType,x=n("./node_modules/object-assign/index.js"),P=n("./MapStore2/web/client/actions/draw.js"),C=P.changeDrawingStatus,T=P.GEOMETRY_CHANGED,M=P.drawSupportReset,_=n("./MapStore2/web/client/utils/ogc/WFST/RequestBuilder.js"),A=n("./MapStore2/web/client/utils/ogc/WFS/base.js").findGeometryProperty,R=n("./MapStore2/web/client/actions/mapInfo.js"),I=R.FEATURE_INFO_CLICK,D=R.HIDE_MAPINFO_MARKER,k=n("./MapStore2/web/client/actions/wfsquery.js"),L=k.query,N=k.QUERY,F=k.QUERY_CREATE,U=k.QUERY_RESULT,G=k.LAYER_SELECTED_FOR_SEARCH,B=k.FEATURE_TYPE_LOADED,z=k.UPDATE_QUERY,W=k.featureTypeSelected,V=k.createQuery,H=k.updateQuery,q=k.TOGGLE_SYNC_WMS,Y=k.QUERY_ERROR,Q=k.FEATURE_LOADING,K=k.toggleSyncWms,Z=n("./MapStore2/web/client/actions/queryform.js"),X=Z.reset,J=Z.QUERY_FORM_SEARCH,$=Z.loadFilter,ee=n("./MapStore2/web/client/actions/map.js"),te=ee.zoomToExtent,ne=ee.CLICK_ON_MAP,re=n("./MapStore2/web/client/selectors/map.js").projectionSelector,oe=n("./MapStore2/web/client/actions/layers.js"),ie=oe.BROWSE_DATA,ae=oe.changeLayerProperties,se=oe.refreshLayerVersion,le=oe.CHANGE_LAYER_PARAMS,ce=n("./MapStore2/web/client/actions/mapInfo.js"),ue=ce.closeIdentify,pe=ce.hideMapinfoMarker,de=n("./MapStore2/web/client/actions/featuregrid.js"),fe=de.SORT_BY,me=de.CHANGE_PAGE,ye=de.SAVE_CHANGES,be=de.SAVE_SUCCESS,ge=de.DELETE_SELECTED_FEATURES,he=de.featureSaving,ve=de.changePage,Se=de.saveSuccess,we=de.saveError,Oe=de.clearChanges,je=de.setLayer,Ee=de.clearSelection,xe=de.toggleViewMode,Pe=de.toggleTool,Ce=de.CLEAR_CHANGES,Te=de.START_EDITING_FEATURE,Me=de.TOGGLE_MODE,_e=de.MODES,Ae=de.geometryChanged,Re=de.DELETE_GEOMETRY,Ie=de.deleteGeometryFeature,De=de.SELECT_FEATURES,ke=de.DESELECT_FEATURES,Le=de.START_DRAWING_FEATURE,Ne=de.CREATE_NEW_FEATURE,Fe=de.CLEAR_CHANGES_CONFIRMED,Ue=de.FEATURE_GRID_CLOSE_CONFIRMED,Ge=de.openFeatureGrid,Be=de.closeFeatureGrid,ze=de.OPEN_FEATURE_GRID,We=de.CLOSE_FEATURE_GRID,Ve=de.CLOSE_FEATURE_GRID_CONFIRM,He=de.OPEN_ADVANCED_SEARCH,qe=de.ZOOM_ALL,Ye=de.UPDATE_FILTER,Qe=de.START_SYNC_WMS,Ke=de.STOP_SYNC_WMS,Ze=de.startSyncWMS,Xe=de.storeAdvancedSearchFilter,Je=de.fatureGridQueryResult,$e=de.LOAD_MORE_FEATURES,et=de.SET_TIME_SYNC,tt=de.updateFilter,nt=de.selectFeatures,rt=de.DEACTIVATE_GEOMETRY_FILTER,ot=de.ACTIVATE_TEMPORARY_CHANGES,it=de.disableToolbar,at=de.FEATURES_MODIFIED,st=de.deactivateGeometryFilter,lt=n("./MapStore2/web/client/actions/controls.js"),ct=lt.TOGGLE_CONTROL,ut=lt.resetControls,pt=lt.setControlProperty,dt=lt.toggleControl,ft=n("./MapStore2/web/client/selectors/controls.js"),mt=ft.queryPanelSelector,yt=ft.showCoordinateEditorSelector,bt=ft.drawerEnabledControlSelector,gt=n("./MapStore2/web/client/actions/highlight.js").setHighlightFeaturesPath,ht=n("./MapStore2/web/client/selectors/featuregrid.js"),vt=ht.selectedFeaturesSelector,St=ht.changesMapSelector,wt=ht.newFeaturesSelector,Ot=ht.hasChangesSelector,jt=ht.hasNewFeaturesSelector,Et=ht.selectedFeatureSelector,xt=ht.selectedFeaturesCount,Pt=ht.selectedLayerIdSelector,Ct=ht.isDrawingSelector,Tt=ht.modeSelector,Mt=ht.isFeatureGridOpen,_t=ht.timeSyncActive,At=ht.hasSupportedGeometry,Rt=ht.queryOptionsSelector,It=ht.getAttributeFilters,Dt=ht.selectedLayerSelector,kt=n("./MapStore2/web/client/actions/notifications.js"),Lt=kt.error,Nt=kt.warning,Ft=n("./MapStore2/web/client/selectors/query.js"),Ut=Ft.describeSelector,Gt=Ft.isDescribeLoaded,Bt=Ft.getFeatureById,zt=Ft.wfsURL,Wt=Ft.wfsFilter,Vt=Ft.featureCollectionResultSelector,Ht=Ft.isSyncWmsActive,qt=Ft.featureLoadingSelector,Yt=n("./MapStore2/web/client/utils/ObservableUtils.js").interceptOGCError,Qt=n("./MapStore2/web/client/utils/FeatureGridUtils.js"),Kt=Qt.gridUpdateToQueryUpdate,Zt=Qt.updatePages,Xt=n("./MapStore2/web/client/selectors/queryform.js"),Jt=Xt.queryFormUiStateSelector,$t=Xt.spatialFieldSelector,en=n("./MapStore2/web/client/utils/FilterUtils.jsx").composeAttributeFilters,tn=n("./MapStore2/web/client/utils/CoordinatesUtils.js"),nn=n("./MapStore2/web/client/utils/MapUtils.js"),rn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.page,r=t.size,o=u(e,"featuregrid.pagination"),i=void 0!==r?r:o.size;return{startIndex:void 0!==n?n*i:o.page*i,maxFeatures:i}},on=function(e,t){return a(a({},e),{},{pagination:t})},an=function(e,t,n){var r=n.insert,o=n.update,i=n.propertyChange,a=n.getPropertyName;return(0,n.transaction)(t.map((function(e){return r(e)})),Object.keys(e).map((function(t){return Object.keys(e[t]).map((function(n){return o([i(a(n),e[t][n]),S("ogc",t)])}))})))},sn=function(e,t){return l.Observable.defer((function(){return h.post(e,t,{headers:{"Content-Type":"application/xml"}})})).let(Yt)},ln=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.featuregrid;return ae(t.selectedLayer,{filterObj:void 0})},cn=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.update,r=void 0===n?{}:n,o=Dt(e.getState()),i=o.id,s=u(e.getState(),'featuregrid.advancedFilters["'.concat(i,'"]'));if(s){var l=It(e.getState())||{},c=b(l,(function(e,t,n){return Kt(a({attribute:n},t),e)}),{}),p=en([s,c],"AND","AND"),d=a(a({},s),p);return H(d,r.type)}return H(Kt(r,Wt(e.getState())),r.type)}};e.exports={featureGridBrowseData:function(e,t){return e.ofType(ie).switchMap((function(n){var o,i=n.layer,a=u(t.getState(),"query.typeName");return(o=l.Observable).of.apply(o,r(a!==i.name?[X()]:[]).concat([pt("drawer","enabled",!1),je(i.id),Ge()])).merge(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.url,o=n.name,i=n.id,a=u(t.getState(),'featuregrid.advancedFilters["'.concat(i,'"]')),s=function(){return V(r,a||{featureTypeName:o,filterType:"OGC",ogcVersion:"1.1.0"})};return Gt(t.getState(),o)?l.Observable.of(s(),W(r,o)):l.Observable.of(W(r,o)).merge(e.ofType(B).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.typeName;return t===o})).map(s))}(e,t,i))}))},featureGridLayerSelectionInitialization:function(e){return e.ofType(G).switchMap((function(e){return l.Observable.of(je(e.id))}))},featureGridStartupQuery:function(e,t){return e.ofType(F).switchMap((function(){return l.Observable.of(ve(0)).concat(Tt(t.getState())===_e.VIEW?l.Observable.of(xe()):l.Observable.empty())}))},featureGridSort:function(e,t){return e.ofType(fe).switchMap((function(n){var r=n.sortBy,o=n.sortOrder;return l.Observable.of(L(zt(t.getState()),on(a(a({},Wt(t.getState())),{},{sortOptions:{sortBy:r,sortOrder:o}}),rn(t.getState())),Rt(t.getState()))).merge(e.ofType(U).map((function(e){return Je(u(e,"result.features",[]),[u(e,"filterObj.pagination.startIndex")])})).takeUntil(e.ofType(Y)).take(1))}))},featureGridUpdateGeometryFilter:function(e,t){return e.ofType(ze).flatMap((function(){return l.Observable.merge(e.ofType(Ye).take(1).filter((function(e){var t=e.update;return!!(void 0===t?{}:t).value})).map(cn(t)),e.ofType(Ye).filter((function(e){var t=e.update;return"geometry"===(void 0===t?{}:t).type})).distinctUntilChanged((function(e,t){var n=e.update,r=t.update;return!n.enabled&&r.enabled&&!n.value&&!r.value||n.value===r.value})).skip(1).map(cn(t))).takeUntil(e.ofType(We))}))},featureGridUpdateTextFilters:function(e,t){return e.ofType(F).switchMap((function(){return e.ofType(Ye).filter((function(e){var t=e.update;return"geometry"!==(void 0===t?{}:t).type})).map(cn(t))}))},handleClickOnMap:function(e,t){return e.ofType(Ye).filter((function(e){var t=e.update,n=void 0===t?{}:t;return"geometry"===n.type&&n.enabled})).switchMap((function(){return e.ofType(ne).switchMap((function(e){var n=e.point,r=n.latlng,o=n.pixel,i=f(It(t.getState()),(function(e){return"geometry"===e.type}))||{},s=re(t.getState()),c=tn.reproject([r.lng,r.lat],"EPSG:4326",s),p=nn.getHook(nn.GET_COORDINATES_FROM_PIXEL_HOOK),d=tn.calculateCircleRadiusFromPixel(p,o,c,4);return i.deactivated?l.Observable.empty():l.Observable.of(tt(a(a({},i),{},{value:{attribute:i.attribute||u($t(t.getState()),"attribute"),geometry:{center:[c.x,c.y],coordinates:tn.calculateCircleCoordinates(c,d,12),extent:[c.x-d,c.y-d,c.x+d,c.y+d],projection:s,radius:d,type:"Polygon"},method:"Circle",operation:"INTERSECTS"}})))})).takeUntil(l.Observable.merge(e.ofType(Ye).filter((function(e){var t=e.update,n=void 0===t?{}:t;return"geometry"===n.type&&!n.enabled})),e.ofType(We,g)))}))},selectFeaturesOnMapClickResult:function(e,t){return e.ofType(U).filter((function(e){return"geometry"===e.reason})).map((function(e){var n=e.result,r=u(n,"features[0]"),o=f(It(t.getState()),(function(e){return"geometry"===e.type}));return nt(r&&o&&o.value?[r]:[])}))},toggleSyncOnEdit:function(e,t){return e.ofType(Me).filter((function(){return Tt(t.getState())===_e.EDIT})).flatMap((function(){var n;return l.Observable.merge((n=l.Observable).of.apply(n,r(Ht(t.getState())?[K()]:[])),e.ofType(Me,We,g).take(1).flatMap((function(){return l.Observable.of(K())})))}))},activateTemporaryChangesEpic:function(e){return e.ofType(ot).flatMap((function(e){var t=e.activated;return l.Observable.of(it(t),st(t))}))},handleGeometryFilterActivation:function(e,t){return e.ofType(Le).flatMap((function(){var e=f(It(t.getState()),(function(e){return"geometry"===e.type}))||{},n=Ot(t.getState()),r=jt(t.getState());return l.Observable.of(tt(a(a({},e),{},{type:"geometry",attribute:e.attribute||u($t(t.getState()),"attribute"),deactivated:!(!n&&!r)||!e.deactivated})))}))},deactivateGeometryFilter:function(e,t){return l.Observable.merge(e.ofType(Ne,T,Re,at),e.ofType(rt).filter((function(e){return!!e.deactivated}))).flatMap((function(){var e=f(It(t.getState()),(function(e){return"geometry"===e.type}))||{};return e.deactivated?l.Observable.empty():l.Observable.of(tt(a(a({},e),{},{type:"geometry",attribute:e.attribute||u($t(t.getState()),"attribute"),deactivated:!0})))}))},activateGeometryFilter:function(e,t){return l.Observable.merge(e.ofType(be,Ce),e.ofType(rt).filter((function(e){return!e.deactivated}))).flatMap((function(){var e=f(It(t.getState()),(function(e){return"geometry"===e.type}))||{},n=Ot(t.getState()),r=jt(t.getState());return!e.deactivated||n||r?l.Observable.empty():l.Observable.of(tt(a(a({},e),{},{type:"geometry",attribute:e.attribute||u($t(t.getState()),"attribute"),deactivated:!1})))}))},featureGridChangePage:function(e,t){return e.ofType(me).merge(e.ofType(z).debounceTime(500).map((function(e){return a(a({},e),{},{page:0})}))).switchMap((function(n){return function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.page,r=t.size,o=t.reason,i=e.getState();return l.Observable.of(L(zt(i),on(a({},Wt(i)),rn(i,{page:n,size:r})),Rt(i),o))}}(t)(n).merge(e.ofType(U).map((function(e){return Je(u(e,"result.features",[]),[u(e,"filterObj.pagination.startIndex")])})).take(1).takeUntil(e.ofType(Y)))}))},featureGridReloadPageOnSaveSuccess:function(e,t){return e.ofType(be).switchMap((function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.page,o=n.size;return l.Observable.of(L(zt(t.getState()),on(a({},Wt(t.getState())),rn(t.getState(),{page:r,size:o})),Rt(t.getState())),se(Pt(t.getState()))).merge(e.ofType(U).map((function(e){return l.Observable.of(Oe(),Je(u(e,"result.features",[]),[u(e,"filterObj.pagination.startIndex")]))})).mergeAll().takeUntil(e.ofType(Y)).take(2))}))},savePendingFeatureGridChanges:function(e,t){return e.ofType(ye).switchMap((function(){return l.Observable.of(he()).concat(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return sn(r,an(e,t,_(n)))}(St(t.getState()),wt(t.getState()),Ut(t.getState()),zt(t.getState())).map((function(){return Se()})).catch((function(e){return l.Observable.of(we(),Lt({title:"featuregrid.errorSaving",message:e.message||"Unknown Exception",uid:"saveError",autoDismiss:5}))})))}))},deleteSelectedFeatureGridFeatures:function(e,t){return e.ofType(ge).switchMap((function(){return l.Observable.of(he()).concat((e=vt(t.getState()),n=Ut(t.getState()),r=zt(t.getState()),sn(r,function(e,t){var n=t.transaction,r=t.deleteFeature;return n(e.map(r))}(e,_(n)))).map((function(){return Se()})).catch((function(e){return l.Observable.of(we(),Lt({title:"featuregrid.errorSaving",message:e.message||"Unknown Exception",uid:"saveError"}))})).concat(l.Observable.of(Pe("deleteConfirm"),Ee())));var e,n,r}))},handleEditFeature:function(e,t){return e.ofType(Te).switchMap((function(){var e=t.getState(),n=Ut(e),r=O(),o=A(n).localType,i={featureProjection:r,stopAfterDrawing:!1,editEnabled:!0,drawEnabled:!1},a=x({},Et(e),{type:"Feature"}),s=St(e);return s[a.id]&&s[a.id]&&s[a.id].geometry&&(a.geometry=s[a.id].geometry),l.Observable.of(C("drawOrEdit",o,"featureGrid",[a],i))}))},handleDrawFeature:function(e,t){return e.ofType(Le).switchMap((function(){var e=t.getState(),n=Ut(e),r=O(),o=A(n).localType,i=x({},Et(e),{type:"Feature"}),a=St(e);a[i.id]&&(a[i.id].geometry||null===a[i.id].geometry)&&(i.geometry=a[i.id].geometry),i._new&&(i.geometry=p(wt(e)).geometry);var s={featureProjection:r,stopAfterDrawing:!0,editEnabled:!Ct(e),drawEnabled:Ct(e)};return l.Observable.of(C("drawOrEdit",o,"featureGrid",[i],s))}))},resetEditingOnFeatureGridClose:function(e,t){return e.ofType(ze).switchMap((function(){return e.ofType(Me).filter((function(){return Tt(t.getState())===_e.EDIT})).take(1).switchMap((function(){return e.ofType(g,We).take(1).switchMap((function(){return l.Observable.of(M())}))}))}))},closeRightPanelOnFeatureGridOpen:function(e,t){return e.ofType(ze).switchMap((function(){var e=[pt("metadataexplorer","enabled",!1),pt("annotations","enabled",!1),pt("details","enabled",!1)];return yt(t.getState())&&e.push(pt("measure","enabled",!1)),l.Observable.from(e)}))},onFeatureGridGeometryEditing:function(e,t){return e.ofType(T).filter((function(e){return"featureGrid"===e.owner})).switchMap((function(e){var n=t.getState(),r={featureProjection:O(),stopAfterDrawing:!1,editEnabled:!0,drawEnabled:!1},o=x({},p(e.features),{id:Et(n).id,_new:Et(n)._new,type:"Feature"}),i="enterEditMode"===e.enableEdit?l.Observable.of(C("drawOrEdit",o.geometry.type,"featureGrid",[o],r)):l.Observable.empty();return l.Observable.of(Ae([o])).concat(i)}))},deleteGeometryFeature:function(e,t){return e.ofType(Re).switchMap((function(){var e=t.getState();return l.Observable.from([Ie(vt(e)),M()])}))},triggerDrawSupportOnSelectionChange:function(e,t){return e.ofType(De,ke,Ce,Me).filter((function(){return Tt(t.getState())===_e.EDIT&&At(t.getState())})).switchMap((function(e){return function(e,t){var n,r,o=O(),i=x({},Et(e),{type:"Feature"});if(!d(i)){r=A(Ut(e)).localType;var a=St(e);if(a[i.id]&&(a[i.id].geometry||null===a[i.id].geometry)&&(i.geometry=a[i.id].geometry),i._new&&!i.geometry){var s=f(wt(e),{id:i.id});s&&s.geometry&&(i.geometry=s.geometry)}if(t&&(i.geometry=Bt(e,i.id)?Bt(e,i.id).geometry:null),n={featureProjection:o,stopAfterDrawing:E(r),editEnabled:!!i.geometry,drawEnabled:!1,ftId:i.id},1===xt(e))return null===i.geometry||"empty_row"===i.id?l.Observable.from([M()]):l.Observable.from([C("drawOrEdit",r,"featureGrid",[i],n)])}return l.Observable.from([C("clean","","featureGrid",[],{})])}(t.getState(),e.type===Ce)}))},onFeatureGridCreateNewFeature:function(e){return e.ofType(Ne).switchMap((function(){return l.Observable.of(M())}))},setHighlightFeaturesPath:function(e,t){return e.ofType(Me).switchMap((function(e){return e.mode===_e.VIEW?l.Observable.of(M(),gt("featuregrid.select")):e.mode!==_e.EDIT||At(t.getState())?l.Observable.of(gt()):l.Observable.of(M(),gt("featuregrid.select"),Nt({title:"featuregrid.notSupportedGeometryTitle",message:"featuregrid.notSupportedGeometry",uid:"notSupportedGeometryWarning",autoDismiss:5}))}))},resetGridOnLocationChange:function(e){return e.ofType(ze).switchMap((function(){return e.ofType(g).take(1).switchMap((function(){return l.Observable.of(xe(),Be())})).takeUntil(e.ofType(We))}))},resetQueryPanel:function(e,t){return e.ofType(g).switchMap((function(){return mt(t.getState())?l.Observable.of(pt("queryPanel","enabled",!1)):l.Observable.empty()}))},autoCloseFeatureGridEpicOnDrowerOpen:function(e,t){return e.ofType(ze).switchMap((function(){return e.ofType(ct).filter((function(e){return e.control&&"drawer"===e.control&&Mt(t.getState())})).switchMap((function(){return l.Observable.of(Be())})).takeUntil(e.ofType(We,g))}))},askChangesConfirmOnFeatureGridClose:function(e,t){return e.ofType(Ve).switchMap((function(){var e=t.getState();return Ot(e)||jt(e)?l.Observable.of(Pe("featureCloseConfirm",!0)):l.Observable.of(Be())}))},onClearChangeConfirmedFeatureGrid:function(e){return e.ofType(Fe).switchMap((function(){return l.Observable.of(Oe(),Pe("clearConfirm",!1))}))},onCloseFeatureGridConfirmed:function(e){return e.ofType(Ue).switchMap((function(){return l.Observable.of(pt("drawer","enabled",!1),Pe("featureCloseConfirm",!1))}))},removeWmsFilterOnGridClose:function(e,t){return e.ofType(ze).exhaustMap((function(){return e.ofType(We).delay(50).filter((function(){return Ht(t.getState())})).switchMap((function(){return l.Observable.of(ln(t.getState()))})).takeUntil(e.ofType(g,I,He))}))},autoReopenFeatureGridOnFeatureInfoClose:function(e){return e.ofType(ze).switchMap((function(){return l.Observable.race(e.ofType(I).take(1),e.ofType(We).take(1)).exhaustMap((function(t){return t.type===We?l.Observable.empty():e.ofType(D).switchMap((function(){return l.Observable.of(Ge())}))})).takeUntil(e.ofType(g,ct).filter((function(e){return e.type===g||e.control&&"drawer"===e.control})).merge(e.ofType(We).withLatestFrom(e.ofType(I,D).scan((function(e,t){switch(t.type){case I:return!1;case D:return!0;default:return!1}}),!0).startWith(!0),(function(e,t){return t})).filter((function(e){return e}))))}))},onOpenAdvancedSearch:function(e,t){return e.ofType(He).switchMap((function(){return l.Observable.of($(u(t.getState(),'featuregrid.advancedFilters["'.concat(Pt(t.getState()),'"]'))),Be(),pt("queryPanel","enabled",!0)).merge(l.Observable.race(e.ofType(J).mergeMap((function(e){return l.Observable.of(V(e.searchUrl,e.filterObj),Xe(x({},Jt(t.getState()),e.filterObj)),pt("queryPanel","enabled",!1),Ge())})),e.ofType(ct).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.control,n=e.property;return"queryPanel"===t&&(!n||"enabled"===n)})).mergeMap((function(){var e="clean"!==(t.getState().draw||{}).drawStatus?[C("clean","","featureGrid",[],{})]:[];return l.Observable.from(e.concat(Ge()))}))).takeUntil(e.ofType(ze,g)))}))},onFeatureGridZoomAll:function(e,t){return e.ofType(qe).filter((function(){return!u(t.getState(),"featuregird.virtualScroll",!1)})).switchMap((function(){return l.Observable.of(te(v(Vt(t.getState())),"EPSG:4326"))}))},resetControlsOnEnterInEditMode:function(e){return e.ofType(Me).filter((function(e){return e.mode===_e.EDIT})).map((function(){return ut(["query"])}))},closeIdentifyWhenOpenFeatureGrid:function(e){return e.ofType(ze).switchMap((function(){return l.Observable.of(ue())}))},startSyncWmsFilter:function(e,t){return e.ofType(q).filter((function(){return Ht(t.getState())})).mapTo(Ze())},stopSyncWmsFilter:function(e,t){return e.ofType(q).filter((function(){return!Ht(t.getState())})).switchMap((function(){return l.Observable.from([ln(t.getState()),{type:Ke}])}))},syncMapWmsFilter:function(e,t){return e.ofType(F,z).filter((function(e){var n=t.getState().featuregrid.disableQuickFilterSync;return e.type===F||!n})).switchMap((function(){var n=t.getState(),r=n.query,o=(n.featuregrid||{}).selectedLayer,i=(r||{}).filterObj;return l.Observable.merge(l.Observable.of(Ht(t.getState())).filter((function(e){return e})),e.ofType(Qe)).mergeMap((function(){return l.Observable.of(function(e,t){return ae(e,{filterObj:t})}(o,i))}))}))},virtualScrollLoadFeatures:function(e,t){var n=t.getState;return e.ofType($e).filter((function(){return!qt(n())})).switchMap((function(t){var r=n(),o=t.pages,i=o.startPage,s=o.endPage,c=r.featuregrid,p=c.pages,d=c.pagination,f=u(d,"size"),m=j(i,s,p,f),y=m[1]-m[0]+1;return l.Observable.of(L(zt(r),on(a({},Wt(r)),{startIndex:m[0]*f,maxFeatures:y*f}),Rt(r))).filter((function(){return m.length>0})).merge(e.ofType(U).filter((function(){return m.length>0})).map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.result,r=void 0===t?{}:t,o=e.filterObj,a=n().featuregrid,l=a.features,c=a.maxStoredPages,d=u(o,"pagination.startIndex"),m=Zt(r,{endPage:s,startPage:i},{pages:p,features:l||[]},{size:f,startIndex:d,maxStoredPages:c}),y=m.pages,b=m.features;return Je(b,y)})).take(1).takeUntil(e.ofType(Y))).merge(e.ofType(Q).filter((function(){return m.length>0})).filter((function(e){return!e.isLoading})).withLatestFrom(e.ofType($e)).map((function(e){return e[1]})).take(1).takeUntil(e.ofType(Y)))}))},replayOnTimeDimensionChange:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.getState,r=void 0===n?function(){}:n;return e.ofType(le).filter((function(e){var t=e.layer,n=void 0===t?[]:t,o=e.params,i=void 0===o?{}:o;return y(m(n),Pt(r()))&&y(Object.keys(i),"time")&&_t(r())})).merge(e.ofType(et)).filter((function(){return Mt(r())})).withLatestFrom(e.ofType(N),(function(e,t){return t})).switchMap((function(e){return l.Observable.of(V(e.searchUrl,e.filterObj))}))},hideFeatureGridOnDrawerOpenMobile:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.getState;return e.ofType(ct).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.control;return"drawer"===t&&n().browser&&n().browser.mobile&&bt(n())})).switchMap((function(){return l.Observable.of(pe(),Ge())}))},hideDrawerOnFeatureGridOpenMobile:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.getState;return e.ofType(I).filter((function(){return n().browser&&n().browser.mobile&&bt(n())})).mapTo(dt("drawer","enabled"))}}},"./MapStore2/web/client/epics/layerfilter.js":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n("./node_modules/rxjs/Rx.js"),s=n("./node_modules/lodash/lodash.js"),l=s.get,c=s.head,u=n("./node_modules/connected-react-router/esm/index.js").LOCATION_CHANGE,p=n("./MapStore2/web/client/actions/controls.js"),d=p.TOGGLE_CONTROL,f=p.setControlProperty,m=n("./MapStore2/web/client/actions/queryform.js"),y=m.QUERY_FORM_SEARCH,b=m.loadFilter,g=m.reset,h=m.search,v=n("./MapStore2/web/client/actions/layers.js").changeLayerProperties,S=n("./MapStore2/web/client/actions/layerFilter.js"),w=S.OPEN_QUERY_BUILDER,O=S.initLayerFilter,j=S.DISCARD_CURRENT_FILTER,E=S.APPLY_FILTER,x=S.storeAppliedFilter,P=n("./MapStore2/web/client/actions/wfsquery.js"),C=P.featureTypeSelected,T=P.toggleLayerFilter,M=P.initQueryPanel,_=n("./MapStore2/web/client/selectors/layers.js").getSelectedLayer,A=n("./MapStore2/web/client/actions/draw.js").changeDrawingStatus,R=n("./MapStore2/web/client/utils/FilterUtils.jsx");e.exports={handleLayerFilterPanel:function(e,t){var n=t.getState;return e.ofType(w).switchMap((function(){var t=_(n()),r=t||{},i=r.url,s=r.name,p=r.layerFilter,m=t&&t.search&&t.search.url;return a.Observable.of(C(m||i,s),b(p),O(p),f("queryPanel","enabled",!0)).merge(a.Observable.of(T()).filter((function(){return!l(n(),"query.isLayerFilter")})),e.ofType(y).switchMap((function(e){var r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.crossLayerFilter,n=e.spatialField,r=e.filterFields;return!!(r&&c(r)||n&&n.method&&n.operation&&n.geometry||t&&t.collectGeometries&&t.operation)}(e.filterObj)?o({},l(n(),"queryform",{})):void 0;return r&&(r.filterFields=r.attributePanelExpanded&&r.filterFields||[],r.spatialField=r.spatialPanelExpanded&&r.spatialField||null,r.crossLayerFilter=r.crossLayerExpanded&&R.setupCrossLayerFilterDefaults(r.crossLayerFilter)||null),a.Observable.of(function(e,t){return v(e,{layerFilter:t})}(t.id,r))}))).let(function(e){return function(t){return t.takeUntil(e.ofType(d).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.control,n=e.property;return"queryPanel"===t&&(!n||"enabled"===n)})).merge(e.ofType(u)))}}(e)).concat(a.Observable.from([T(),g(),A("clean","","queryform",[],{})]))}))},restoreSavedFilter:function(e,t){var n=t.getState;return e.ofType(j).switchMap((function(){var e={typeName:l(n(),"state.query.typeName")},t=l(n(),"state.query.url"),r=l(n(),"layerFilter.persisted");return a.Observable.of(A("clean","","queryform",[]),b(r),h(t,r,e),M())}))},onApplyFilter:function(e,t){var n=t.getState;return e.ofType(E).map((function(){var e=o({},l(n(),"queryform",{}));return x(e)}))}}},"./MapStore2/web/client/epics/measurement.js":function(e,t,n){"use strict";n.r(t),n.d(t,"addAnnotationFromMeasureEpic",(function(){return b})),n.d(t,"addAsLayerEpic",(function(){return g})),n.d(t,"openMeasureEpic",(function(){return h}));var r=n("./node_modules/rxjs/Rx.js"),o=n.n(r),i=n("./node_modules/uuid/v1.js"),a=n.n(i),s=n("./MapStore2/web/client/utils/MeasurementUtils.js"),l=n("./MapStore2/web/client/actions/measurement.js"),c=n("./MapStore2/web/client/actions/layers.js"),u=n("./MapStore2/web/client/utils/AnnotationsUtils.js"),p=n("./MapStore2/web/client/actions/controls.js"),d=n("./MapStore2/web/client/actions/featuregrid.js"),f=n("./MapStore2/web/client/actions/mapInfo.js"),m=n("./MapStore2/web/client/selectors/controls.js"),y=n("./MapStore2/web/client/actions/annotations.js"),b=function(e){return e.ofType(l.ADD_MEASURE_AS_ANNOTATION).switchMap((function(e){var t=e.features,n=e.textLabels,r=e.uom,i=a()(),l=Object(s.convertMeasuresToGeoJSON)(t,n,r,i,"Annotations created from measurements",u.STYLE_TEXT);return o.a.Observable.of(Object(p.toggleControl)("annotations",null),Object(y.newAnnotation)(),Object(y.setEditingFeature)(l))}))},g=function(e){return e.ofType(l.ADD_AS_LAYER).switchMap((function(e){var t=e.features,n=e.textLabels,r=e.uom,i=Object(s.convertMeasuresToGeoJSON)(t,n,r,a()());return o.a.Observable.of(Object(c.addLayer)({type:"vector",id:a()(),name:"Measurements",hideLoading:!0,features:[i],visibility:!0}))}))},h=function(e,t){return e.ofType(p.SET_CONTROL_PROPERTY).filter((function(e){return"measure"===e.control&&e.value&&Object(m.showCoordinateEditorSelector)(t.getState())})).switchMap((function(){return o.a.Observable.of(Object(d.closeFeatureGrid)(),Object(f.purgeMapInfoResults)(),Object(f.hideMapinfoMarker)())}))}},"./MapStore2/web/client/epics/notifications.js":function(e,t,n){var r=n("./node_modules/rxjs/Rx.js"),o=n("./MapStore2/web/client/actions/notifications.js").clear,i=n("./node_modules/connected-react-router/esm/index.js").LOCATION_CHANGE;e.exports={clearNotificationOnLocationChange:function(e){return e.ofType(i).switchMap((function(){return r.Observable.of(o())}))}}},"./MapStore2/web/client/epics/queryform.js":function(e,t,n){var r=n("./node_modules/rxjs/Rx.js").Observable,o=n("./node_modules/@turf/bbox/index.js"),i=n("./MapStore2/web/client/actions/draw.js").changeDrawingStatus,a=n("./MapStore2/web/client/actions/map.js").zoomToExtent,s=n("./MapStore2/web/client/actions/queryform.js").CHANGE_SPATIAL_FILTER_VALUE;e.exports={updateSpatialFilterValue:function(e){return e.ofType(s).switchMap((function(e){var t=e.feature,n=e.srsName,s=e.style,l=e.options;return r.of(i("drawOrEdit",t.geometry.type,"queryform",[t],{editEnabled:!1,stopAfterDrawing:!0,featureProjection:n},s)).concat(t&&l&&l.autoZoom?[a(o(t),n)]:[])}))}}},"./MapStore2/web/client/epics/rulesmanager.js":function(e,t,n){var r=n("./node_modules/rxjs/Rx.js"),o=n("./MapStore2/web/client/actions/rulesmanager.js"),i=o.SAVE_RULE,a=o.setLoading,s=o.RULE_SAVED,l=o.DELETE_RULES,c=o.CACHE_CLEAN,u=n("./MapStore2/web/client/actions/notifications.js"),p=u.error,d=u.success,f=n("./MapStore2/web/client/actions/draw.js").drawSupportReset,m=n("./MapStore2/web/client/observables/rulesmanager.js"),y=m.updateRule,b=m.createRule,g=m.deleteRule,h=m.cleanCache,v=n("./node_modules/lodash/lodash.js").get,S=function(e){return e.mapTo({type:s}).concat(r.Observable.of(f())).catch((function(e){var t=!1;return e.data&&(t=0===e.data.indexOf("Duplicat")),r.Observable.of(p({title:"rulesmanager.errorTitle",message:t?"rulesmanager.errorDuplicateRule":"rulesmanager.errorUpdatingRule"}))})).startWith(a(!0)).concat(r.Observable.of(a(!1)))};e.exports={onSave:function(e,t){var n=t.getState;return e.ofType(i).exhaustMap((function(e){var t=e.rule;return t.id?y(t,v(n(),"rulesmanager.activeRule",{})).let(S):b(t).let(S)}))},onDelete:function(e,t){var n=t.getState;return e.ofType(l).switchMap((function(e){var t=e.ids,o=void 0===t?v(n(),"rulesmanager.selectedRules",[]).map((function(e){return e.id})):t;return r.Observable.combineLatest(o.map((function(e){return g(e)}))).let(S)}))},onCacheClean:function(e){return e.ofType(c).exhaustMap((function(){return h().mapTo(d({title:"rulesmanager.errorTitle",message:"rulesmanager.cacheCleaned"})).startWith(a(!0)).catch((function(){return r.Observable.of(p({title:"rulesmanager.errorTitle",message:"rulesmanager.errorCleaningCache"}))})).concat(r.Observable.of(a(!1)))}))}}},"./MapStore2/web/client/epics/search.js":function(e,t,n){"use strict";n.r(t),n.d(t,"searchEpic",(function(){return T})),n.d(t,"searchItemSelected",(function(){return M})),n.d(t,"textSearchShowGFIEpic",(function(){return _})),n.d(t,"zoomAndAddPointEpic",(function(){return A})),n.d(t,"searchOnStartEpic",(function(){return R}));var r=n("./node_modules/rxjs/Rx.js"),o=n("./node_modules/turf-bbox/index.js"),i=n.n(o),a=n("./node_modules/@turf/point-on-surface/index.js"),s=n.n(a),l=n("./node_modules/object-assign/index.js"),c=n.n(l),u=n("./node_modules/lodash/lodash.js"),p=n("./MapStore2/web/client/selectors/layers.js"),d=n("./MapStore2/web/client/actions/additionallayers.js"),f=n("./MapStore2/web/client/actions/mapInfo.js"),m=n("./MapStore2/web/client/actions/map.js"),y=n("./MapStore2/web/client/actions/layers.js"),b=n("./MapStore2/web/client/actions/search.js"),g=n("./MapStore2/web/client/utils/CoordinatesUtils.js"),h=n.n(g),v=n("./MapStore2/web/client/utils/SearchUtils.js"),S=n("./MapStore2/web/client/utils/TemplateUtils.js"),w=n("./MapStore2/web/client/api/searchText.js"),O=n("./MapStore2/web/client/api/WFS.js");function j(e){return function(e){if(Array.isArray(e))return E(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return E(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return E(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){C(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var T=function(e){return e.ofType(b.TEXT_SEARCH_STARTED).debounceTime(250).switchMap((function(t){return r.Observable.from((t.services||[{type:"nominatim",priority:5}]).map((function(e){var n=w.API.Utils.getService(e.type);if(!n){var o=new Error("Service Missing");return o.msgId="search.service_missing",o.serviceType=e.type,r.Observable.of(o).do((function(e){throw e}))}return r.Observable.defer((function(){return n(t.searchText,e.options).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.map((function(t){return P(P({},t),{},{__SERVICE__:e,__PRIORITY__:e.priority||0})}))}))})).retryWhen((function(e){return e.delay(200).scan((function(e,t){if(e>=2)throw t;return e+1}),0)}))}))).mergeAll().scan((function(e,t){return Object(u.sortBy)([].concat(j(e),j(t)),["__PRIORITY__"])})).map((function(e){return Object(b.searchResultLoaded)(e.slice(0,t.maxResults||15),!1)})).startWith(Object(b.searchTextLoading)(!0)).takeUntil(e.ofType(b.TEXT_SEARCH_RESULTS_PURGE,b.TEXT_SEARCH_RESET,b.TEXT_SEARCH_ITEM_SELECTED)).concat([Object(b.searchTextLoading)(!1)]).catch((function(e){var t=P(P({msgId:"search.generic_error"},e),{},{message:e.message,stack:e.stack});return r.Observable.from([Object(b.searchResultError)(t),Object(b.searchTextLoading)(!1)])}))}))},M=function(e,t){return e.ofType(b.TEXT_SEARCH_ITEM_SELECTED).switchMap((function(e){var n=r.Observable.of(e.item).concatMap((function(t){if(t&&t.__SERVICE__&&t.__SERVICE__.geomService){var n=Object(S.generateTemplateString)(t.__SERVICE__.geomService.options.staticFilter||"")(t);return r.Observable.fromPromise(w.API.Utils.getService(t.__SERVICE__.geomService.type)("",c()({},t.__SERVICE__.geomService.options,{staticFilter:n})).then((function(e){return c()({},t,{geometry:h.a.mergeToPolyGeom(e)})})))}return r.Observable.of(e.item)})).concatMap((function(e){var n=e.bbox||e.properties.bbox||i()(e),r=[Object(m.zoomToExtent)([n[0],n[1],n[2],n[3]],"EPSG:4326",e.__SERVICE__&&e.__SERVICE__.options&&e.__SERVICE__.options.maxZoomLevel||21),Object(b.addMarker)(e)];if(e.__SERVICE__&&!Object(u.isNil)(e.__SERVICE__.launchInfoPanel)&&e.__SERVICE__.options&&e.__SERVICE__.options.typeName){var o=s()(e).geometry.coordinates,a={lng:o[0],lat:o[1]},l=e.__SERVICE__.options.typeName;if(o){var c=l&&Object(p.getLayerFromName)(t.getState(),l),d=null,g=[],h={},v=!1;return"single_layer"===e.__SERVICE__.launchInfoPanel&&(v=e.__SERVICE__.forceSearchLayerVisibility,g=[l],d=e.id,h=C({},e.__SERVICE__.options.typeName,{info_format:"application/json"})),[].concat(j(v&&c?[Object(y.changeLayerProperties)(c.id,{visibility:!0})]:[]),[Object(f.featureInfoClick)({latlng:a},l,g,h,d),Object(f.showMapinfoMarker)()],r)}}return r})),o=e.item,a=o&&o.__SERVICE__&&o.__SERVICE__.then,l=a?r.Observable.of(Object(b.selectNestedService)(a.map((function(e){return P(P({},e),{},{options:P({item:o},e.options)})})),{text:Object(S.generateTemplateString)(o.__SERVICE__.displayName||"")(o),placeholder:o.__SERVICE__.nestedPlaceholder&&Object(S.generateTemplateString)(o.__SERVICE__.nestedPlaceholder||"")(o),placeholderMsgId:o.__SERVICE__.nestedPlaceholderMsgId&&Object(S.generateTemplateString)(o.__SERVICE__.nestedPlaceholderMsgId||"")(o)},Object(S.generateTemplateString)(o.__SERVICE__.searchTextTemplate||"")(o))):r.Observable.empty(),d=o.__SERVICE__&&o.__SERVICE__.searchTextTemplate,g=d?r.Observable.of(Object(b.searchTextChanged)(Object(S.generateTemplateString)(d)(o))):r.Observable.empty();return r.Observable.of(Object(b.resultsPurge)()).concat(n,l,g)}))},_=function(e,t){return e.ofType(b.TEXT_SEARCH_SHOW_GFI).switchMap((function(e){var n,o,a,l,c,u,d=e.item,g=t.getState(),h=null==d||null===(n=d.__SERVICE__)||void 0===n||null===(o=n.options)||void 0===o?void 0:o.typeName,S=h&&Object(p.getLayerFromName)(g,h),w=d.bbox||d.properties.bbox||i()(d),O=s()(d).geometry.coordinates,E={lng:O[0],lat:O[1]};return O&&Object(v.showGFIForService)(S,null==d?void 0:d.__SERVICE__)?(a=r.Observable).of.apply(a,j((null==d||null===(l=d.__SERVICE__)||void 0===l?void 0:l.forceSearchLayerVisibility)&&S?[Object(y.changeLayerProperties)(S.id,{visibility:!0})]:[]).concat([Object(f.featureInfoClick)({latlng:E},h,[h],C({},h,{info_format:"application/json"}),d.id),Object(f.showMapinfoMarker)(),Object(m.zoomToExtent)([w[0],w[1],w[2],w[3]],"EPSG:4326",(null==d||null===(c=d.__SERVICE__)||void 0===c||null===(u=c.options)||void 0===u?void 0:u.maxZoomLevel)||21),Object(b.addMarker)(d)])):r.Observable.empty()}))},A=function(e,t){return e.ofType(b.ZOOM_ADD_POINT).switchMap((function(e){var n={type:"Feature",geometry:{type:"Point",coordinates:[e.pos.x,e.pos.y]}},o=t.getState();return r.Observable.from([Object(d.updateAdditionalLayer)("search","search","overlay",{features:[n],type:"vector",name:"searchPoints",id:"searchPoints",visibility:!0,style:o.search&&o.search.style||v.defaultIconStyle}),Object(m.zoomToPoint)(e.pos,e.zoom,e.crs)])}))},R=function(e,t){return e.ofType(b.SEARCH_LAYER_WITH_FILTER).switchMap((function(e){var n=e.layer,o=e.cql_filter,i=t.getState();if(0===Object(p.queryableLayersSelector)(i).filter((function(e){return e.name===n})).length)return r.Observable.of(Object(b.nonQueriableLayerError)());var a=Object(p.getLayerFromName)(i,n);return a&&o?r.Observable.defer((function(){return Object(O.getFeatureSimple)(a.url,{maxFeatures:1,typeName:n,srsName:"EPSG:4326",outputFormat:"application/json",cql_filter:o}).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.features&&e.features.length&&P(P({},e.features[0]),{},{typeName:n})}))})).switchMap((function(e){var t=e.type,n=e.geometry,i=e.typeName,a=s()({type:t,geometry:n}).geometry.coordinates,l={lng:a[0],lat:a[1]};return a?r.Observable.of(Object(f.featureInfoClick)({latlng:l},i,[i],C({},i,{cql_filter:o})),Object(f.showMapinfoMarker)()):r.Observable.empty()})).catch((function(){return r.Observable.of(Object(b.serverError)())})):r.Observable.empty()}))}},"./MapStore2/web/client/epics/styleeditor.js":function(e,t,n){function r(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=n("./node_modules/rxjs/Rx.js"),c=n("./node_modules/lodash/lodash.js"),u=c.get,p=c.head,d=c.isArray,f=c.template,m=n("./MapStore2/web/client/actions/notifications.js"),y=m.success,b=m.error,g=n("./MapStore2/web/client/actions/layers.js"),h=g.UPDATE_NODE,v=g.updateNode,S=g.updateSettingsParams,w=n("./MapStore2/web/client/actions/additionallayers.js"),O=w.updateAdditionalLayer,j=w.removeAdditionalLayer,E=w.updateOptionsByOwner,x=n("./MapStore2/web/client/actions/layerCapabilities.js").getDescribeLayer,P=n("./MapStore2/web/client/observables/wms.js").getLayerCapabilities,C=n("./MapStore2/web/client/actions/controls.js").setControlProperty,T=n("./MapStore2/web/client/utils/LayersUtils.js"),M=T.findGeoServerName,_=T.formatCapabitiliesOptions,A=n("./MapStore2/web/client/actions/styleeditor.js"),R=A.SELECT_STYLE_TEMPLATE,I=A.updateTemporaryStyle,D=A.TOGGLE_STYLE_EDITOR,k=A.resetStyleEditor,L=A.UPDATE_STATUS,N=A.loadingStyle,F=A.LOADED_STYLE,U=A.loadedStyle,G=A.CREATE_STYLE,B=A.updateStatus,z=A.selectStyleTemplate,W=A.errorStyle,V=A.UPDATE_STYLE_CODE,H=A.EDIT_STYLE_CODE,q=A.DELETE_STYLE,Y=A.setEditPermissionStyleEditor,Q=A.SET_DEFAULT_STYLE,K=A.initStyleService,Z=A.updateEditorMetadata,X=n("./MapStore2/web/client/api/geoserver/Styles.js").default,J=n("./MapStore2/web/client/api/geoserver/Layers.js"),$=n("./MapStore2/web/client/selectors/styleeditor.js"),ee=$.temporaryIdSelector,te=$.codeStyleSelector,ne=$.formatStyleSelector,re=$.languageVersionStyleSelector,oe=$.statusStyleSelector,ie=$.selectedStyleSelector,ae=$.enabledStyleEditorSelector,se=$.loadingStyleSelector,le=$.styleServiceSelector,ce=$.getUpdatedLayer,ue=$.editorMetadataSelector,pe=$.selectedStyleMetadataSelector,de=n("./MapStore2/web/client/selectors/layers.js"),fe=de.getSelectedLayer,me=de.layerSettingSelector,ye=n("./MapStore2/web/client/utils/StyleEditorUtils.js"),be=ye.generateTemporaryStyleId,ge=ye.generateStyleId,he=ye.STYLE_OWNER_NAME,ve=ye.getNameParts,Se=n("./MapStore2/web/client/selectors/controls.js"),we=Se.initialSettingsSelector,Oe=Se.originalSettingsSelector,je=n("./MapStore2/web/client/api/StyleEditor.js").updateStyleService,Ee=function(e){var t=e.status,n=e.styleName,r=e.baseUrl;return"edit"===t?l.Observable.defer((function(){return X.getStyleCodeByName({baseUrl:r,styleName:n})})).switchMap((function(e){return l.Observable.of(z({languageVersion:e.languageVersion,code:e.code,templateId:"",format:e.format,init:!0}))})).catch((function(e){return l.Observable.of(W("edit",e))})):l.Observable.empty()},xe=function(e){var t=e.styleName,n=e.baseUrl,r=e.onSuccess$,o=e.onError$;return l.Observable.defer((function(){return X.deleteStyle({baseUrl:n,styleName:t})})).switchMap((function(){return r||l.Observable.empty()})).catch((function(){return o||l.Observable.empty()}))},Pe=function(e){var t=e.baseUrl,n=e.update,o=e.code,i=e.format,a=e.styleName,s=e.status,c=e.languageVersion,u=e.options,p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return l.Observable.defer((function(){return X[n?"updateStyle":"createStyle"]({baseUrl:t,code:o,format:i,styleName:a,languageVersion:c,options:u})})).switchMap((function(){var e;return d(p)&&(e=l.Observable).of.apply(e,[U()].concat(r(p)))||p})).catch((function(e){var t;return(t=l.Observable).of.apply(t,[W(s,e),U()].concat(r(f)))})).startWith(N(s))};e.exports={toggleStyleEditorEpic:function(e,t){return e.ofType(D).filter((function(){return!se(t.getState())})).switchMap((function(e){var n=t.getState(),r=me(n),o=!!u(r,"options.availableStyles");if(!e.enabled)return function(e){var t=ee(e),n=le(e).baseUrl,r=void 0===n?"":n;return l.Observable.of(k(),j({owner:he})).merge(t?xe({styleName:t,baseUrl:r}):l.Observable.empty())}(n);if(ae(n)&&o)return l.Observable.empty();var i=e.layer||fe(n);if(!i||i&&!i.url)return l.Observable.empty();var s=M(i);if(!s)return l.Observable.empty();var c=i.url.split(s),p="".concat(c[0]).concat(s),d=le(n);return l.Observable.defer((function(){return je({baseUrl:p,styleService:d})})).switchMap((function(e){var t,n=[K(e)];return(t=P(i).switchMap((function(e){var t=_(e);if(!t.availableStyles)return l.Observable.of(W("availableStyles",{status:401}),U());return l.Observable.defer((function(){return X.getStylesInfo({baseUrl:p,styles:t&&t.availableStyles||[]})})).switchMap((function(e){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return l.Observable.of(O(i.id,he,"override",{}),S({availableStyles:e}),v(i.id,"layer",a(a({},t),{},{availableStyles:e})),U())}(e)}))}))).startWith.apply(t,n).catch((function(e){return l.Observable.of(W("global",e),U())}))})).startWith(N("global"))}))},updateLayerOnStatusChangeEpic:function(e,t){return e.ofType(L).filter((function(e){return!!e.status})).switchMap((function(n){var o=t.getState(),i=ce(o),a=i&&i.params||{},s=i&&!i.describeFeatureType&&x(i.url,i,{query:a}),c=ie(o)||i.availableStyles&&i.availableStyles[0]&&i.availableStyles[0].name,u=pe(o),p=le(o).baseUrl,d=void 0===p?"":p;return s&&function(e,t){var n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return!0},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){};return(n=l.Observable).of.apply(n,[N("global")].concat(r(i))).merge(e.ofType(h).filter((function(){var e=fe(t.getState());return o(e)})).switchMap((function(){var e=fe(t.getState());return a(e)})).catch((function(e){return l.Observable.of(W("global",e),U())})).takeUntil(e.ofType(F)))}(e,t,(function(e){return e&&e.describeLayer}),[s],(function(e){return l.Observable.concat(Ee({status:n.status,styleName:c,baseUrl:d}),l.Observable.of(Y(!(e&&e.describeLayer&&401===e.describeLayer.error)),Z({editorType:u.msEditorType||"textarea",styleJSON:u.msStyleJSON}),U()))}))||l.Observable.concat(Ee({status:n.status,styleName:c,baseUrl:d}),l.Observable.of(Z({editorType:u.msEditorType||"textarea",styleJSON:u.msStyleJSON})))}))},updateTemporaryStyleEpic:function(e,t){return e.ofType(R,H).switchMap((function(e){var n=t.getState(),r=ee(n),o=ce(n),i=ve(o.name).workspace,a=e.format&&e.format!==ne(n),s=r||"".concat(i?"".concat(i,":"):"").concat(be()),l=e.format||ne(n),c=oe(n),u=le(n).baseUrl,p=void 0===u?"":u,d=re(n),f="sld"===l&&(e.code||"").match(/version=\"1\.1\.0\"/)&&{version:"1.1.0"}||e.format&&!e.languageVersion&&{version:"1.0.0"}||e.languageVersion||{version:"1.0.0"},m=d.version!==f.version?{params:{raw:!0}}:{},y=f,g=function(t){return Pe({update:!0,code:e.code,format:l,styleName:t,status:c,baseUrl:p,languageVersion:y,options:m},[E(he,[{style:t,_v_:Date.now(),singleTile:!0}]),I({temporaryId:t,templateId:e.templateId||"",code:e.code,format:l,init:e.init,languageVersion:y})],"edit"===c?[]:[b({title:"styleeditor.updateTmpErrorTitle",message:"styleeditor.updateTmpStyleErrorMessage",uid:"updateTmpStyleError",autoDismiss:5})])},h=("css"===l?"* { stroke: #888888; }":"sld"===l&&'<?xml version="1.0" encoding="ISO-8859-1"?>\n<StyledLayerDescriptor version="1.0.0"\n\t\txsi:schemaLocation="http://www.opengis.net/sld StyledLayerDescriptor.xsd"\n\t\txmlns="http://www.opengis.net/sld"\n\t\txmlns:ogc="http://www.opengis.net/ogc"\n\t\txmlns:xlink="http://www.w3.org/1999/xlink"\n\t\txmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">\n\n\t<NamedLayer>\n\t\t<Name>Default Style</Name>\n\t\t<UserStyle>\n\t\t\t<Title>${styleTitle}</Title>\n\t\t\t<Abstract>${styleAbstract}</Abstract>\n\t\t\t<FeatureTypeStyle>\n\t\t\t\t<Rule>\n\t\t\t\t\t<Name>Rule Name</Name>\n\t\t\t\t\t<Title>Rule Title</Title>\n\t\t\t\t\t<Abstract>Rule Abstract</Abstract>\n\t\t\t\t\t<LineSymbolizer>\n\t\t\t\t\t\t<Stroke>\n\t\t\t\t\t\t\t<CssParameter name="stroke">#0000FF</CssParameter>\n\t\t\t\t\t\t</Stroke>\n\t\t\t\t\t\t</LineSymbolizer>\n\t\t\t\t\t<PointSymbolizer>\n\t\t\t\t\t\t<Graphic>\n\t\t\t\t\t\t\t<Mark>\n\t\t\t\t\t\t\t\t<WellKnownName>square</WellKnownName>\n\t\t\t\t\t\t\t\t<Fill>\n\t\t\t\t\t\t\t\t\t<CssParameter name="fill">#FF0000</CssParameter>\n\t\t\t\t\t\t\t\t</Fill>\n\t\t\t\t\t\t\t</Mark>\n\t\t\t\t\t\t</Graphic>\n\t\t\t\t\t</PointSymbolizer>\n\t\t\t\t\t</Rule>\n\t\t\t\t</FeatureTypeStyle>\n\t\t\t</UserStyle>\n\t\t</NamedLayer>\n\t</StyledLayerDescriptor>\n')||"",v=function(e){return Pe({code:h,format:l,styleName:e,status:c,baseUrl:p},g(e),[b({title:"styleeditor.createTmpErrorTitle",message:"styleeditor.createTmpStyleErrorMessage",uid:"createTmpStyleError",autoDismiss:5}),I({temporaryId:null,templateId:"",code:"",format:"",init:"",languageVersion:null})])};return a&&r&&xe({styleName:r,baseUrl:p,onSuccess$:v("".concat(i?"".concat(i,":"):"").concat(be())),onError$:g(s)})||r&&g(s)||v(s)}))},createStyleEpic:function(e,t){return e.ofType(G).switchMap((function(e){var n=t.getState(),o=te(n),i=ce(n),s=ve(i.name).workspace,c="".concat(s?"".concat(s,":"):"").concat(ge(e.settings)),u=ne(n),d=e.settings||{},m=d.title,y=void 0===m?"":m,g=d._abstract,h=void 0===g?"":g,v=le(n).baseUrl,w=void 0===v?"":v,O=a({title:y,description:h},{msStyleJSON:null,msEditorType:"visual"});return l.Observable.defer((function(){return X.createStyle({baseUrl:w,code:f(o)({styleTitle:y,styleAbstract:h}),format:u,styleName:c,metadata:O})})).switchMap((function(){return l.Observable.of(E(he,[{}]),S({style:c||""},!0),B(""),U()).merge(function(e){var t=e.baseUrl,n=e.layer,o=e.styleName,i=e.format,s=e.title,c=e._abstract,u=e.metadata;return l.Observable.defer((function(){return J.updateAvailableStyles({baseUrl:t,layerName:n.name,styles:[{name:o}]})})).switchMap((function(){var e=a({filename:"".concat(o,".").concat(i),format:i,name:o,title:s,_abstract:c},u&&{metadata:u}),t=p(n.availableStyles),d=n.availableStyles&&[t,e].concat(r(n.availableStyles.filter((function(e,t){return t>0}))))||[e];return l.Observable.of(S({availableStyles:d},!0),U())})).catch((function(){return l.Observable.of(U())})).startWith(N("global"))}({layer:i,styleName:c,format:u,title:y,_abstract:h,baseUrl:w,metadata:O}))})).catch((function(e){return l.Observable.of(W("",e),U(),b({title:"styleeditor.createStyleErrorTitle",message:"styleeditor.createStyleErrorMessage",uid:"createStyleError",autoDismiss:5}))})).startWith(N(""))}))},updateStyleCodeEpic:function(e,t){return e.ofType(V).switchMap((function(){var e=t.getState(),n=ne(e),r=re(e),o=te(e),i=ie(e),s=ee(e),c=ce(e),u=le(e).baseUrl,p=void 0===u?"":u,d=ue(e)||{},f={msStyleJSON:d.styleJSON||null,msEditorType:d.editorType},m=(c.availableStyles||[]).map((function(e){return e.name===i?a(a({},e),{},{metadata:a(a({},e.metadata),f)}):e}));return l.Observable.defer((function(){return X.updateStyle({baseUrl:p,code:o,format:n,styleName:i,languageVersion:r,options:{params:{raw:!0}},metadata:f})})).switchMap((function(){return l.Observable.of(U(),v(c.id,"layer",{_v_:Date.now(),availableStyles:m}),S({availableStyles:m}),I({temporaryId:s,templateId:"",code:o,format:n,init:!0,languageVersion:r}),y({title:"styleeditor.savedStyleTitle",message:"styleeditor.savedStyleMessage",uid:"savedStyleTitle",autoDismiss:5}))})).catch((function(e){return l.Observable.of(W("global",e),U(),b({title:"styleeditor.updateStyleErrorTitle",message:"styleeditor.updateStyleErrorMessage",uid:"updateStyleError",autoDismiss:5}))})).startWith(N("global"))}))},deleteStyleEpic:function(e,t){return e.ofType(q).filter((function(e){return!!e.styleName})).switchMap((function(e){var n=e.styleName,r=t.getState(),o=ce(r),i=le(r).baseUrl,s=void 0===i?"":i,c=Oe(r),u=we(r);return l.Observable.defer((function(){return J.removeStyles({baseUrl:s,layerName:o.name,styles:[{name:n}]})})).switchMap((function(){var e=o.availableStyles&&o.availableStyles.filter((function(e){return e.name!==n}))||[];return l.Observable.concat(l.Observable.of(S({style:"",availableStyles:e},!0),U(),C("layersettings","originalSettings",a(a({},c),{},{style:""})),C("layersettings","initialSettings",a(a({},u),{},{style:""}))),xe({styleName:n,baseUrl:s,onSuccess$:l.Observable.of(y({title:"styleeditor.deletedStyleSuccessTitle",message:"styleeditor.deletedStyleSuccessMessage",uid:"deletedStyleSuccess",autoDismiss:5})),onError$:l.Observable.of(b({title:"styleeditor.deletedStyleErrorTitle",message:"styleeditor.deletedStyleErrorMessage",uid:"deletedStyleError",autoDismiss:5}))}))})).catch((function(){return l.Observable.of(U())})).startWith((function(){return l.Observable.of(N("global"))}))}))},setDefaultStyleEpic:function(e,t){return e.ofType(Q).switchMap((function(){var e=t.getState(),n=le(e).baseUrl,o=void 0===n?"":n,i=ce(e),a=ie(e);return l.Observable.defer((function(){return J.updateDefaultStyle({baseUrl:o,layerName:i.name,styleName:a})})).switchMap((function(){var e=i.availableStyles.filter((function(e){var t=e.name;return a===t})),t=i.availableStyles.filter((function(e){var t=e.name;return a!==t})),n=[].concat(r(e),r(t));return l.Observable.of(S({availableStyles:n},!0),y({title:"styleeditor.setDefaultStyleSuccessTitle",message:"styleeditor.setDefaultStyleSuccessMessage",uid:"setDefaultStyleSuccess",autoDismiss:5}),U())})).startWith(N("global")).catch((function(){return l.Observable.of(b({title:"styleeditor.setDefaultStyleErrorTitle",message:"styleeditor.setDefaultStyleErrorMessage",uid:"setDefaultStyleError",autoDismiss:5}),U())}))}))}}},"./MapStore2/web/client/epics/thematic.js":function(e,t,n){var r=n("./MapStore2/web/client/actions/thematic.js"),o=r.LOAD_FIELDS,i=r.LOAD_CLASSIFICATION,a=r.fieldsLoaded,s=r.fieldsError,l=r.classificationLoaded,c=r.classificationError,u=n("./MapStore2/web/client/actions/layers.js"),p=u.UPDATE_NODE,d=u.changeLayerParams,f=n("./node_modules/rxjs/Rx.js"),m=n("./MapStore2/web/client/libs/ajax.js"),y=n("./node_modules/lodash/lodash.js").head;e.exports=function(e){return{loadFieldsEpic:function(t){return t.ofType(o).switchMap((function(t){if(t.layer.thematic&&t.layer.thematic.fields)return f.Observable.of(a(t.layer,t.layer.thematic.fields)).delay(0);var n=e.getFieldsService(t.layer);return f.Observable.defer((function(){return m.get(n)})).switchMap((function(n){return f.Observable.of(a(t.layer,e.readFields(n.data)))})).catch((function(e){return f.Observable.of(s(t.layer,e))}))}))},loadClassificationEpic:function(t){return t.ofType(i).switchMap((function(t){var n=e.getStyleMetadataService(t.layer,t.params);return f.Observable.defer((function(){return m.get(n)})).switchMap((function(n){return f.Observable.of(l(t.layer,e.readClassification(n.data)))})).catch((function(e){return f.Observable.of(c(t.layer,e))}))}))},removeThematicEpic:function(t,n){return t.ofType(p).switchMap((function(t){var r=y(n.getState().layers.flat.filter((function(e){return e.id===t.node})));if(r&&null===t.options.thematic&&e.hasThematicStyle(r)){var o=e.removeThematicStyle(r.params);return f.Observable.of(d(t.node,o))}return f.Observable.empty()}))}}}},"./MapStore2/web/client/epics/tutorial.js":function(e,t,n){function r(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var i=n("./node_modules/rxjs/Rx.js"),a=n("./MapStore2/web/client/actions/tutorial.js"),s=a.START_TUTORIAL,l=a.UPDATE_TUTORIAL,c=a.INIT_TUTORIAL,u=a.CHANGE_PRESET,p=a.closeTutorial,d=a.setupTutorial,f=n("./MapStore2/web/client/actions/map.js").CHANGE_MAP_VIEW,m=n("./MapStore2/web/client/actions/maps.js").MAPS_LIST_LOADED,y=n("./MapStore2/web/client/actions/globeswitcher.js").TOGGLE_3D,b=n("./MapStore2/web/client/selectors/geostory.js").modeSelector,g=n("./MapStore2/web/client/actions/geostory.js").CHANGE_MODE,h=n("./MapStore2/web/client/selectors/contextcreator.js").creationStepSelector,v=n("./MapStore2/web/client/actions/contextcreator.js").CONTEXT_TUTORIALS,S=n("./node_modules/connected-react-router/esm/index.js").LOCATION_CHANGE,w=n("./node_modules/lodash/lodash.js"),O=w.isEmpty,j=w.isArray,E=w.isObject;e.exports={closeTutorialEpic:function(e){return e.ofType(s).audit((function(){return e.ofType(y)})).switchMap((function(){return i.Observable.of(p())}))},switchTutorialEpic:function(e,t){return e.ofType(S).filter((function(e){return e.payload&&e.payload.location&&e.payload.location.pathname})).switchMap((function(n){return e.ofType(m,f,c).take(1).switchMap((function(){var e,r,o,a=(r=n.payload.location.pathname).match(/\/(viewer)\/(\w+)\/(\d+)/)&&r.replace(/\/(viewer)\/(\w+)\/(\d+)/,"$2")||r.match(/\/(\w+)\/(\d+)/)&&r.replace(/\/(\w+)\/(\d+)/,"$1")||r.match(/\/(\w+)\//)&&r.replace(/\/(\w+)\//,"$1"),s=t.getState(),l=s.tutorial&&s.tutorial.presetList||{},c=s.browser,u=c&&c.mobile?"_mobile":"",p=a?"default":n.payload&&n.payload.location&&n.payload.location.pathname||"default",f=s.tutorial&&s.tutorial.id,m=a+u+"_tutorial";if(-1!==p.indexOf("context")){var y=h(s)||"general-settings",g=v[y];return i.Observable.of(d(g,l[g],null,null,null,f===g))}return a&&-1!==(null===(e=a)||void 0===e?void 0:e.indexOf("geostory"))&&!O(l)?"edit"===b(s)||a&&-1!==(null===(o=a)||void 0===o?void 0:o.indexOf("newgeostory"))?(a="geostory",m="geostory_edit_tutorial",i.Observable.from([d(a,l[m],null,null,null,!1)])):(m="geostory_view_tutorial",i.Observable.of(d(a,l[m],null,null,null,!0))):O(l)?i.Observable.empty():i.Observable.of(l[m]?d(a+u,l[m],null,null,null,f===a+u):d(p+u,l["default"+u+"_tutorial"],null,null,null,f===p+u))}))}))},getActionsFromStepEpic:function(e){return e.ofType(l).filter((function(e){return e.tour&&e.tour.step&&e.tour.step.action&&e.tour.step.action[e.tour.action]})).switchMap((function(e){var t;return j(e.tour.step.action[e.tour.action])&&(t=i.Observable).of.apply(t,r(e.tour.step.action[e.tour.action]))||E(e.tour.step.action[e.tour.action])&&i.Observable.of(e.tour.step.action[e.tour.action])||i.Observable.empty()}))},changePresetEpic:function(e,t){return e.ofType(u).switchMap((function(e){var n=e.preset,r=e.presetGroup,o=e.ignoreDisabled,a=t.getState(),s=a.tutorial&&a.tutorial.presetList||{},l=a.tutorial&&a.tutorial.checkbox,c=s[n];return c?i.Observable.of(d(n,c,null,l,null,!1,r,o)):i.Observable.empty()}))},switchGeostoryTutorialEpic:function(e,t){return e.ofType(g).switchMap((function(e){var n=e.mode,r="geostory",o=t.getState(),a=o.tutorial&&o.tutorial.presetList||{},s="_".concat(n),l=O(a)?null:a[r+s+"_tutorial"],c="true"===localStorage.getItem("mapstore.plugin.tutorial.geostory.disabled");return l?i.Observable.from([d(r,l,null,null,null,"view"===n||c)]):i.Observable.empty()}))}}},"./MapStore2/web/client/epics/wfsquery.js":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c=n("./node_modules/rxjs/Rx.js"),u=n("./MapStore2/web/client/libs/ajax.js"),p=n("./MapStore2/web/client/actions/queryform.js"),d=p.changeSpatialAttribute,f=p.SELECT_VIEWPORT_SPATIAL_METHOD,m=p.updateGeometrySpatialField,y=n("./MapStore2/web/client/actions/map.js").CHANGE_MAP_VIEW,b=n("./MapStore2/web/client/actions/wfsquery.js"),g=b.FEATURE_TYPE_SELECTED,h=b.QUERY,v=b.UPDATE_QUERY,S=b.featureLoading,w=b.featureTypeLoaded,O=b.featureTypeError,j=b.querySearchResponse,E=b.queryError,x=n("./MapStore2/web/client/selectors/query.js"),P=x.paginationInfo,C=x.isDescribeLoaded,T=x.layerDescribeSelector,M=n("./MapStore2/web/client/selectors/map.js").mapSelector,_=n("./MapStore2/web/client/selectors/catalog.js").authkeyParamNameSelector,A=n("./MapStore2/web/client/selectors/layers.js").getSelectedLayer,R=n("./MapStore2/web/client/utils/CoordinatesUtils.js"),I=n("./MapStore2/web/client/utils/WFSTimeUtils.js").addTimeParameter,D=n("./MapStore2/web/client/utils/ConfigUtils.js"),k=n("./node_modules/object-assign/index.js"),L=n("./MapStore2/web/client/selectors/queryform.js"),N=L.spatialFieldMethodSelector,F=L.spatialFieldSelector,U=L.spatialFieldGeomTypeSelector,G=L.spatialFieldGeomCoordSelector,B=L.spatialFieldGeomSelector,z=L.spatialFieldGeomProjSelector,W=n("./MapStore2/web/client/actions/draw.js").changeDrawingStatus,V=n("./MapStore2/web/client/actions/wfsquery.js").INIT_QUERY_PANEL,H=n("./MapStore2/web/client/observables/wfs.js"),q=H.getJSONFeatureWA,Y=H.getLayerJSONFeature,Q=n("./MapStore2/web/client/utils/FeatureTypeUtils.js").describeFeatureTypeToAttributes,K=n("./MapStore2/web/client/actions/notifications.js"),Z=n("./node_modules/lodash/lodash.js").find,X=n("./MapStore2/web/client/utils/FilterUtils.jsx"),J=n("./MapStore2/web/client/utils/ogc/Filter/FilterBuilder.js"),$=n("./MapStore2/web/client/utils/ogc/Filter/fromObject.js"),ee=n("./MapStore2/web/client/utils/ogc/Filter/CQL/parser.js").read,te=J({gmlVersion:"3.1.1"}),ne=$(te),re=te.filter,oe=te.and,ie=function(e){return{geometry:e.featureTypes[0].properties.filter((function(e){return 0===e.type.indexOf("gml:")})).map((function(e){return{label:e.name,attribute:e.name,type:"geometry",valueId:"id",valueLabel:"name",values:[]}})),original:e,attributes:Q(e)}};e.exports={featureTypeSelectedEpic:function(e,t){return e.ofType(g).filter((function(e){return e.url&&e.typeName})).switchMap((function(e){var n=t.getState();if(C(n,e.typeName)){var r=ie(T(n,e.typeName)),o=r.geometry[0]&&r.geometry[0].attribute?r.geometry[0].attribute:"the_geom";return c.Observable.of(d(o))}return c.Observable.defer((function(){return u.get(D.filterUrlParams(e.url,_(t.getState()))+"?service=WFS&version=1.1.0&request=DescribeFeatureType&typeName="+e.typeName+"&outputFormat=application/json")})).map((function(t){if("object"===l(t.data)&&t.data.featureTypes&&t.data.featureTypes[0]){var n=ie(t.data),r=n.geometry[0]&&n.geometry[0].attribute?n.geometry[0].attribute:"the_geom";return c.Observable.from([d(r),w(e.typeName,n)])}try{JSON.parse(t.data)}catch(t){return c.Observable.from([O(e.typeName,"Error from WFS: "+t.message),K.error({title:"warning",message:"layerProperties.featureTypeErrorInvalidJSON",autoDismiss:3,position:"tc"})])}return c.Observable.from([O(e.typeName,"Error: feature types are empty")])})).mergeAll().catch((function(t){return c.Observable.of(O(e.typeName,t.message||t.statusText))}))}))},wfsQueryEpic:function(e,t){return e.ofType(h).switchMap((function(n){var r,i,s=(i=t.getState(),(r=i.query&&i.query.featureTypes&&i.query.featureTypes[i.query.typeName]&&i.query.featureTypes[i.query.typeName].attributes&&i.query.featureTypes[i.query.typeName].attributes[0]&&i.query.featureTypes[i.query.typeName].attributes[0].attribute||null)?{sortBy:r,sortOrder:"A"}:{}),u=P.totalFeatures(t.getState()),p=D.filterUrlParams(n.searchUrl,_(t.getState())),d=A(t.getState())||{},f=d.layerFilter,m=d.params,y=Z(Object.keys(m||{}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"cql_filter"===e.toLowerCase()})),b=y?[ne(ee(y))]:[],g=(b.length>0||X.isFilterValid(f)&&!f.disabled)&&re(oe.apply(void 0,b.concat(a(X.isFilterValid(f)&&!f.disabled?X.toOGCFilterParts(f,"1.1.0","ogc"):[]),a(X.isFilterValid(n.filterObj)?X.toOGCFilterParts(n.filterObj,"1.1.0","ogc"):[]))))||n.filterObj,h=I(p,n.queryOptions||{},t.getState()),w=h.url,O=h.options,x=o(o({},n.filterObj.pagination),{},{totalFeatures:u,sortOptions:s},O);return c.Observable.merge(("object"===l(g)&&q(w,g,x)||Y(d,g,x)).map((function(e){return j(e,n.searchUrl,n.filterObj,n.queryOptions,n.reason)})).catch((function(e){return c.Observable.of(E(e))})).startWith(S(!0)).concat(c.Observable.of(S(!1)))).takeUntil(e.ofType(v))}))},redrawSpatialFilterEpic:function(e,t){return e.ofType(V).switchMap((function(){var e=t.getState(),n=F(e),r={type:"Feature",geometry:{type:U(e),coordinates:G(e)}},o=B(e)?W("drawOrEdit",n.method||"","queryform",[r],{featureProjection:z(e),drawEnabled:!1,editEnabled:!1}):W("clean",n.method||"","queryform",[],{drawEnabled:!1,editEnabled:!1});return c.Observable.of(o)}))},viewportSelectedEpic:function(e,t){return e.ofType(f,y).switchMap((function(e){var n=e.type===y?e:M(t.getState());if((e.type===f||e.type===y&&"Viewport"===N(t.getState()))&&n.bbox&&n.bbox.bounds&&n.bbox.crs){var r=Object.keys(n.bbox.bounds).reduce((function(e,t){return k({},e,i({},t,parseFloat(n.bbox.bounds[t])))}),{});return c.Observable.of(m(R.getViewportGeometry(r,n.bbox.crs)))}return c.Observable.empty()}))}}},"./MapStore2/web/client/epics/widgets.js":function(e,t,n){function r(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=n("./node_modules/rxjs/Rx.js"),c=n("./node_modules/lodash/lodash.js"),u=c.endsWith,p=c.has,d=c.get,f=c.includes,m=c.isEqual,y=c.omit,b=c.omitBy,g=n("./MapStore2/web/client/actions/widgets.js"),h=g.EXPORT_CSV,v=g.EXPORT_IMAGE,S=g.INSERT,w=g.TOGGLE_CONNECTION,O=g.WIDGET_SELECTED,j=g.EDITOR_SETTING_CHANGE,E=g.onEditorChange,x=g.updateWidgetLayer,P=g.clearWidgets,C=g.loadDependencies,T=g.toggleDependencySelector,M=g.DEPENDENCY_SELECTOR_KEY,_=g.WIDGETS_REGEX,A=n("./MapStore2/web/client/actions/config.js").MAP_CONFIG_LOADED,R=n("./MapStore2/web/client/selectors/widgets.js"),I=R.availableDependenciesSelector,D=R.isWidgetSelectionActive,k=R.getDependencySelectorConfig,L=n("./MapStore2/web/client/actions/layers.js"),N=L.CHANGE_LAYER_PROPERTIES,F=L.LAYER_LOAD,U=L.LAYER_ERROR,G=n("./MapStore2/web/client/selectors/layers.js").getLayerFromId,B=n("./MapStore2/web/client/selectors/router.js").pathnameSelector,z=n("./MapStore2/web/client/actions/maps.js"),W=z.MAP_CREATED,V=z.SAVING_MAP,H=z.MAP_ERROR,q=n("./MapStore2/web/client/actions/dashboard.js").DASHBOARD_LOADED,Y=n("./node_modules/connected-react-router/esm/index.js").LOCATION_CHANGE,Q=n("./node_modules/file-saver/FileSaver.js").saveAs,K=n("./MapStore2/web/client/utils/FileUtils.js"),Z=n("./node_modules/json-2-csv/lib/converter.js"),X=n("./node_modules/canvg-browser/index.js"),J=function(e){return e.ofType(V,W,H).startWith({type:A}).switchMap((function(t){return t.type===V?l.Observable.never():e})).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type;return t===Y}))},$=function(e,t,n,r){return l.Observable.of(E("mapSync",e),E("dependenciesMap",function(e,t,n){var r,o=n.dependenciesMap,i=n.mappings,l=["layer","filter","quickFilters","options"],c=["layers","viewport","zoom","center"],p=(_.exec(t)||[])[1],d=b(o,(function(e){return-1===e.indexOf(p)})),m=Object.keys(i).filter((function(e){return void 0!==i[e]})).reduce((function(e,n){return!u(t,"map")&&f(l,n)?a(a({},e),{},s({},n,"".concat(t,".").concat(i[n]))):u(t,"map")?f(c,n)?a(a({},e),{},s({},n,"map"===t?i[n]:"".concat(t,".").concat(i[n]))):a(a({},e),{},s({},n,"".concat(t.replace(".map",""),".").concat(i[n]))):e}),{});return e?a(a(a({},d),m),{},(s(r={},"dependenciesMap","".concat(t.replace(".map",""),".dependenciesMap")),s(r,"mapSync","".concat(t.replace(".map",""),".mapSync")),r)):y(d,[Object.keys(i)])}(e,t,n)))};e.exports={exportWidgetData:function(e){return e.ofType(h).do((function(e){var t=e.data,n=void 0===t?[]:t,r=e.title,o=void 0===r?"data":r;return Z.json2csv(n,(function(e,t){return e?null:Q(new Blob([t],{type:"text/csv"}),o+".csv")}))})).filter((function(){return!1}))},alignDependenciesToWidgets:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.getState,o=void 0===n?function(){}:n;return e.ofType(A,q,S).map((function(){return I(o())})).pluck("availableDependencies").distinctUntilChanged((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return m(r(e),r(t))})).map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return C(e.reduce((function(e,t){var n,r,o=t.replace(".map","");return u(t,"map")?a(a({},e),{},(s(n={},"".concat(o,".dependenciesMap"),"".concat(o,".dependenciesMap")),s(n,"".concat(o,".mapSync"),"".concat(o,".mapSync")),s(n,"map"===t?"viewport":"".concat(t,".viewport"),"".concat(t,".bbox")),s(n,"map"===t?"center":"".concat(t,".center"),"".concat(t,".center")),s(n,"map"===t?"zoom":"".concat(t,".zoom"),"".concat(t,".zoom")),s(n,"map"===t?"layers":"".concat(t,".layers"),"map"===t?"layers.flat":"".concat(t,".layers")),n)):a(a({},e),{},(s(r={},"".concat(t,".filter"),"".concat(t,".filter")),s(r,"".concat(t,".quickFilters"),"".concat(t,".quickFilters")),s(r,"".concat(o,".dependenciesMap"),"".concat(o,".dependenciesMap")),s(r,"".concat(o,".mapSync"),"".concat(o,".mapSync")),s(r,"".concat(t,".layer"),"".concat(t,".layer")),s(r,"".concat(t,".options"),"".concat(t,".options")),r))}),{}))}))},toggleWidgetConnectFlow:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.getState,r=void 0===n?function(){}:n;return e.ofType(w).switchMap((function(t){var n=t.active,o=t.availableDependencies,i=void 0===o?[]:o,a=t.options;return n&&i.length>0?1===i.length?$(n,i[0],a):l.Observable.of(T(n,{availableDependencies:i})).merge(e.ofType(O).filter((function(){return D(r())})).switchMap((function(e){var t=e.widget,o=d(k(r()),"availableDependencies").filter((function(e){return(_.exec(e)||[])[1]===t.id}));return $(n,o[0],a,t.dependeciesMap).concat(l.Observable.of(T(!1,{})))})).takeUntil(e.ofType(Y).merge(e.filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,n=e.key;return t===j&&n===M}))))):$(n,i[0],a)}))},clearWidgetsOnLocationChange:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.getState,r=void 0===n?function(){}:n;return e.ofType(A).switchMap((function(){var t=B(r()).split("/"),n=t[t.length-1];return e.let(J).filter((function(){var e=B(r()).split("/");return e[e.length-1]!==n})).switchMap((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload,n=void 0===t?{}:t;return n&&n.location&&n.location.pathname?l.Observable.of(P()):l.Observable.empty()}))}))},exportWidgetImage:function(e){return e.ofType(v).do((function(e){var t,n,r=e.widgetDivId,o=e.title,i=void 0===o?"data":o,a=document.createElement("canvas"),s=document.querySelector("#".concat(r," .recharts-wrapper svg")),l=s.outerHTML?s.outerHTML:(t=s,(n=document.createElement("div")).appendChild(t.cloneNode(!0)),n.innerHTML);X(a,l,{renderCallback:function(){var e=a.getContext("2d");e.globalCompositeOperation="destination-over",e.fillStyle="#fff",e.fillRect(0,0,a.width,a.height),K.downloadCanvasDataURL(a.toDataURL("image/jpeg",1),"".concat(i,".jpg"),"image/jpeg")}})})).filter((function(){return!1}))},updateLayerOnLayerPropertiesChange:function(e,t){return e.ofType(N).switchMap((function(e){var n,o=e.layer,i=e.newProperties,a=t.getState(),s=G(a,o);return(n=l.Observable).of.apply(n,r(p(i,"layerFilter")&&s?[x(s)]:[]))}))},updateLayerOnLoadingErrorChange:function(e,t){return e.ofType(F,U).groupBy((function(e){return e.layerId})).map((function(e){return e.switchMap((function(e){var n,o=e.layerId,i=t.getState(),a=G(i,o);return(n=l.Observable).of.apply(n,r(a&&a.previousLoadingError!==a.loadingError?[x(a)]:[]))}))})).mergeAll()}}},"./MapStore2/web/client/epics/widgetsTray.js":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n("./node_modules/rxjs/Rx.js"),s=n("./node_modules/lodash/lodash.js").get,l=n("./MapStore2/web/client/actions/timeline.js"),c=l.setCollapsed,u=l.SET_COLLAPSED,p=n("./MapStore2/web/client/actions/widgets.js"),d=p.TOGGLE_COLLAPSE,f=p.INSERT,m=p.TOGGLE_COLLAPSE_ALL,y=p.UPDATE_PROPERTY,b=p.toggleCollapseAll,g=p.DELETE,h=n("./MapStore2/web/client/actions/config.js").MAP_CONFIG_LOADED,v=n("./MapStore2/web/client/actions/notifications.js").info,S=n("./MapStore2/web/client/selectors/widgets.js").getVisibleFloatingWidgets,w=n("./MapStore2/web/client/actions/layers.js").CHANGE_LAYER_PROPERTIES,O=n("./MapStore2/web/client/selectors/timeline.js"),j=O.isVisible,E=O.hasLayers,x=function(e){return(S(e)||[]).filter((function(e){return!s(e,"dataGrid.static")})).length>0},P=function(e){return function(t){return t.take(1).switchMap((function(){return a.Observable.of(v(o(o({},e),{},{autoDismiss:8,position:"tr",uid:"timeline-collapsed"})))})).merge(t)}};e.exports={collapseTimelineOnWidgetsEvents:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.getState,r=void 0===n?function(){}:n;return a.Observable.merge(e.ofType(d,m,h,y,f).filter((function(){return x(r())&&j(r())}))).switchMap((function(){return a.Observable.of(c(!0))})).let(P({title:"widgets.tray.notifications.collapsed.timelineTitle",message:"widgets.tray.notifications.collapsed.message"}))},collapseWidgetsOnTimelineEvents:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.getState,r=void 0===n?function(){}:n;return a.Observable.merge(e.ofType(u).filter((function(e){return!e.collapsed})),e.ofType(w).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.newProperties,n=void 0===t?{}:t;return n.dimensions}))).filter((function(){return x(r())&&E(r())&&j(r())})).switchMap((function(){return a.Observable.of(b())})).let(P({title:"widgets.tray.notifications.collapsed.widgetsTitle",message:"widgets.tray.notifications.collapsed.message"}))},expandTimelineIfCollapsedOnTrayUnmount:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.getState,r=void 0===n?function(){}:n;return e.ofType(g,y,h).filter((function(){return!j(r())&&E(r())})).filter((function(){return!x(r())})).switchMap((function(){return a.Observable.of(c(!1))}))}}},"./MapStore2/web/client/epics/widgetsbuilder.js":function(e,t,n){function r(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=n("./node_modules/rxjs/Rx.js"),c=n("./MapStore2/web/client/actions/widgets.js"),u=c.NEW,p=c.INSERT,d=c.EDIT,f=c.OPEN_FILTER_EDITOR,m=c.NEW_CHART,y=c.editNewWidget,b=c.onEditorChange,g=n("./MapStore2/web/client/actions/featuregrid.js").closeFeatureGrid,h=n("./MapStore2/web/client/actions/draw.js").drawSupportReset,v=n("./MapStore2/web/client/actions/queryform.js"),S=v.QUERY_FORM_SEARCH,w=v.loadFilter,O=n("./MapStore2/web/client/actions/controls.js"),j=O.setControlProperty,E=O.TOGGLE_CONTROL,x=n("./MapStore2/web/client/actions/layers.js").ADD_LAYER,P=n("./node_modules/connected-react-router/esm/index.js").LOCATION_CHANGE,C=n("./MapStore2/web/client/actions/wfsquery.js").featureTypeSelected,T=n("./MapStore2/web/client/selectors/widgets.js"),M=T.getWidgetLayer,_=T.getEditingWidgetFilter,A=n("./MapStore2/web/client/selectors/query.js").wfsFilter,R=n("./MapStore2/web/client/selectors/controls.js").widgetBuilderAvailable,I=function(e){var t=M(e);return[t.search&&t.search.url,t.name]};e.exports={openWidgetEditor:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.getState,r=void 0===n?function(){}:n;return e.ofType(u,d,m).filter((function(){return R(r())})).switchMap((function(){return l.Observable.of(j("widgetBuilder","enabled",!0),j("metadataexplorer","enabled",!1))}))},closeWidgetEditorOnFinish:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.getState,r=void 0===n?function(){}:n;return e.ofType(p,x).filter((function(){return R(r())})).switchMap((function(){return l.Observable.of(j("widgetBuilder","enabled",!1))}))},initEditorOnNew:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.getState,r=void 0===n?function(){}:n;return e.ofType(u).filter((function(){return R(r())})).switchMap((function(e){return l.Observable.of(y(a(a({legend:!1,mapSync:!0,cartesian:!0,yAxis:!0},e),{},{type:void 0}),{step:0}))}))},initEditorOnNewChart:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.getState,r=void 0===n?function(){}:n;return e.ofType(m).filter((function(){return R(r())})).switchMap((function(e){return l.Observable.of(g(),y(a(a({legend:!1,mapSync:!0,cartesian:!0,yAxis:!0,widgetType:"chart",filter:A(r())},e),{},{type:void 0}),{step:0}),b("returnToFeatureGrid",!0))}))},handleWidgetsFilterPanel:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.getState,o=void 0===n?function(){}:n;return e.ofType(f).filter((function(){return R(o())})).switchMap((function(){return l.Observable.of(C.apply(void 0,r(I(o()))),w(_(o())),j("widgetBuilder","enabled",!1),j("queryPanel","enabled",!0)).concat(l.Observable.race(e.ofType(S).take(1),e.ofType(E).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.control,n=e.property;return"queryPanel"===t&&(!n||"enabled"===n)})).take(1)).switchMap((function(e){return(e.filterObj?l.Observable.of(b("filter",e.filterObj)):l.Observable.empty()).merge(l.Observable.of(j("widgetBuilder","enabled",!0)))}))).takeUntil(e.ofType(P,d).merge(e.ofType(E).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.control,n=e.property;return"widgetBuilder"===t&&!1==!n})))).concat(l.Observable.of(h(),j("queryPanel","enabled",!1)))}))}}},"./MapStore2/web/client/libs/bindings/rxjsRecompose.js":function(e,t,n){"use strict";var r=n("./node_modules/recompose/rxjsObservableConfig.js"),o=n.n(r),i=(n("./node_modules/rxjs/Rx.js"),n("./node_modules/recompose/es/Recompose.js"));Object(i.setObservableConfig)(o.a)},"./MapStore2/web/client/observables/autocomplete.js":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=n("./node_modules/rxjs/Rx.js"),a=n("./MapStore2/web/client/libs/ajax.js"),s=n("./MapStore2/web/client/utils/ogc/WPS/autocomplete.js").getWpsPayload,l=n("./node_modules/object-assign/index.js"),c=n("./MapStore2/web/client/api/searchText.js").API,u=n("./node_modules/lodash/lodash.js"),p=u.endsWith,d=u.head,f=u.isNil,m=n("./node_modules/url/url.js"),y=function(e){var t=e.searchText,n=void 0===t?"":t,r=e.queriableAttributes,o=void 0===r?[]:r,i=e.predicate,a=void 0===i?"ILIKE":i,s=d(o),l=n.toLowerCase(),c="strToLowerCase(".concat(s,") ").concat(a," '%").concat(l,"%'");return f(s)?"":"("+c+")"};e.exports={createPagedUniqueAutompleteStream:function(e){return e.distinctUntilChanged((function(e){var t=e.value,n=e.currentPage,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return!(r.value!==t||r.currentPage!==n)})).throttle((function(e){return i.Observable.timer(e.delayDebounce||0)})).merge(e.debounce((function(e){return i.Observable.timer(e.delayDebounce||0)}))).distinctUntilChanged().switchMap((function(e){if(e.performFetch){var t=s({attribute:e.attribute,layerName:e.typeName,maxFeatures:e.maxFeatures,startIndex:(e.currentPage-1)*e.maxFeatures,value:e.value});return i.Observable.fromPromise(a.post(e.url,t,{timeout:6e4,headers:{Accept:"application/json","Content-Type":"application/xml"}}).then((function(e){return{fetchedData:e.data,busy:!1}}))).catch((function(){return i.Observable.of({fetchedData:{values:[],size:0},busy:!1})})).startWith({busy:!0})}return i.Observable.of({fetchedData:{values:[],size:0},busy:!1})})).startWith({})},createWFSFetchStream:function(e){return i.Observable.merge(e.distinctUntilChanged((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.value,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.value;return t===r})).debounce((function(e){return i.Observable.timer(e.delayDebounce||0)})),e.distinctUntilChanged((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.filterProps,n=e.currentPage,r=arguments.length>1?arguments[1]:void 0,o=r.filterProps,i=r.currentPage;return t===o&&n===i}))).switchMap((function(e){if(e.performFetch){var t=m.parse(e.url,!0),n="";(p(t.pathname,"wfs")||p(t.pathname,"wms")||p(t.pathname,"ows")||p(t.pathname,"wps"))&&(n=t.pathname.replace(/(wms|ows|wps|wfs)$/,"wfs")),t.query&&t.query.service&&delete t.query.service;var a=m.format(l({},t,{search:null,pathname:n})),s=l({},function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({url:a,typeName:e.filterProps&&e.filterProps.typeName||"",predicate:e.filterProps&&e.filterProps.predicate||"ILIKE",blacklist:e.filterProps&&e.filterProps.blacklist||[],maxFeatures:e.filterProps&&e.filterProps.maxFeatures||3,queriableAttributes:e.filterProps&&e.filterProps.queriableAttributes||[],returnFullData:!0,startIndex:((e.currentPage||1)-1)*(e.filterProps&&e.filterProps.maxFeatures||3),outputFormat:"application/json",staticFilter:"",fromTextToFilter:y,item:{},timeout:6e4,headers:{Accept:"application/json","Content-Type":"application/xml"},srsName:e.filterProps&&e.filterProps.srsName||"EPSG:4326"},t.query));return i.Observable.fromPromise(c.Utils.getService("wfs")(e.value,s).then((function(t){return{fetchedData:{values:t.features.map((function(e){return e.properties})),size:t.totalFeatures,features:t.features,crs:e.filterProps&&e.filterProps.srsName||"EPSG:4326"},busy:!1}}))).catch((function(){return i.Observable.of({fetchedData:{values:[],size:0,features:[]},busy:!1})})).startWith({busy:!0})}return i.Observable.of({fetchedData:{values:[],size:0,features:[]},busy:!1})})).startWith({})},singleAttributeFilter:y}},"./MapStore2/web/client/observables/rulesmanager.js":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=n("./node_modules/rxjs/Rx.js"),l=n("./MapStore2/web/client/api/geoserver/GeoFence.js"),c=n("./MapStore2/web/client/utils/ConfigUtils.js"),u=n("./node_modules/lodash/lodash.js").trim,p=n("./MapStore2/web/client/api/WMS.js"),d=n("./MapStore2/web/client/observables/wms.js"),f=d.getLayerCapabilities,m=d.describeLayer,y=n("./MapStore2/web/client/observables/wfs.js").describeFeatureType,b=n("./MapStore2/web/client/actions/rulesmanager.js").RULE_SAVED,g=function(e){var t=u(e,"/");return 0===t.indexOf("http")?"".concat(t,"/"):"/".concat(t,"/")},h=function(e,t){return e.priority!==t.priority?"full":e.grant!==t.grant||e.ipaddress!==t.ipaddress?"grant":"simple"},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return s.Observable.defer((function(){return l.loadRules(e,t,n)})).map((function(t){var n=t.rules;return{page:e,rules:(void 0===n?[]:n).map((function(e){if(!e.constraints)return e;var t=[].concat(e.constraints.allowedStyles.style||[]);return e.constraints.allowedStyles={style:t},e}))}}))},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return s.Observable.defer((function(){return l.getUsersCount(e)}))},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return s.Observable.defer((function(){return l.getUsers(e,t,n)}))},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return s.Observable.defer((function(){return l.getRolesCount(e)}))},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return s.Observable.defer((function(){return l.getRoles(e,t,n)}))},E=function(e){return s.Observable.defer((function(){return l.deleteRule(e)}))},x=function(e){return e.filter((function(e){var t=e.rule,n=e.origRule;return"full"===h(n,t)})).switchMap((function(e){var t=e.rule,n=e.origRule;return E(t.id).switchMap((function(){t.priority,t.id;var e=a(t,["priority","id"]);return s.Observable.defer((function(){return l.addRule(e)})).catch((function(e){var t=n.priority,r=(n.id,a(n,["priority","id"]));return r.position={value:t,position:"fixedPriority"},s.Observable.defer((function(){return l.addRule(r)})).concat(s.Observable.of({type:b}).do((function(){throw e})))}))})).switchMap((function(e){var n=e.data;return s.Observable.defer((function(){return l.moveRules(t.priority,[{id:n}])}))}))}))},P=function(e){return e.filter((function(e){var t=e.rule,n=e.origRule;return"grant"===h(n,t)})).switchMap((function(e){var t=e.rule,n=e.origRule;return E(t.id).switchMap((function(){var e=t.priority,r=(t.id,a(t,["priority","id"]));return r.position={value:e,position:"fixedPriority"},s.Observable.defer((function(){return l.addRule(r)})).catch((function(e){var t=n.priority,r=(n.id,a(n,["priority","id"]));return r.position={value:t,position:"fixedPriority"},s.Observable.defer((function(){return l.addRule(r)})).concat(s.Observable.of({type:b}).do((function(){throw e})))}))}))}))},C=function(e){return e.filter((function(e){var t=e.rule,n=e.origRule;return"simple"===h(n,t)})).switchMap((function(e){var t=e.rule;return s.Observable.defer((function(){return l.updateRule(t)}))}))};e.exports={loadRules:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return s.Observable.combineLatest(e.map((function(e){return v(e,t,n)}))).map((function(e){return e.reduce((function(e,t){var n=t.page,r=t.rules;return o(o({},e),{},i({},n,r))}),{})})).map((function(e){return{pages:e}}))},getCount:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s.Observable.defer((function(){return l.getRulesCount(e)}))},moveRules:function(e,t){return s.Observable.defer((function(){return l.moveRules(e,t)}))},getUsers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return r&&s.Observable.combineLatest([S(e),w(e,t,n)],(function(e,t){return{count:e,data:t.users}}))||w(e,t,n).map((function(e){return{data:e.users}}))},getRoles:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return r?s.Observable.combineLatest([O(e),j(e,t,n)],(function(e,t){return{count:e,data:t.roles}})):j(e,t,n).map((function(e){return{data:e.roles}}))},getWorkspaces:function(e){var t=e.size;return s.Observable.defer((function(){return l.getWorkspaces()})).map((function(e){var n=e.workspaces;return{count:t,data:[].concat((void 0===n?{}:n).workspace)}}))},loadLayers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return s.Observable.defer((function(){return l.getLayers(e,t,n,r)}))},updateRule:function(e,t){var n=s.Observable.of({rule:e,origRule:t}).let(x),r=s.Observable.of({rule:e,origRule:t}).let(C),o=s.Observable.of({rule:e,origRule:t}).let(P);return n.merge(r,o)},createRule:function(e){return s.Observable.defer((function(){return l.addRule(e)}))},deleteRule:E,getStylesAndAttributes:function(e,t){var n=(c.getDefaults().geoFenceGeoServerInstance||{}).url,r="".concat(t,":").concat(e),o={url:"".concat(g(n),"wms"),name:r};return s.Observable.combineLatest(f(o).map((function(e){return{style:e.style,ly:{bbox:p.getBBox(e),name:r,url:"".concat(g(n),"wms"),type:"wms",visibility:!0,format:"image/png",title:e.title}}})),m(o).map((function(e){return e.data.layerDescriptions[0]})).switchMap((function(e){return"WCS"===e.owsType?s.Observable.of({properties:[],type:"RASTER"}):y({layer:o}).map((function(e){var t=e.data;return{properties:t.featureTypes[0]&&t.featureTypes[0].properties||[],type:"VECTOR"}}))})),(function(e,t){var n=e.style,r=e.ly;return{styles:n||[],properties:t.properties,type:t.type,layer:r}}))},cleanCache:function(){return s.Observable.defer((function(){return l.cleanCache()}))}}},"./MapStore2/web/client/observables/wfs.js":function(e,t,n){function r(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=n("./MapStore2/web/client/libs/ajax.js"),p=n("./node_modules/url/url.js"),d=n("./node_modules/rxjs/Rx.js"),f=n("./node_modules/lodash/lodash.js"),m=f.castArray,y=f.isNil,b=n("./node_modules/xml2js/lib/xml2js.js").parseString,g=n("./node_modules/xml2js/lib/processors.js").stripPrefix,h=n("./MapStore2/web/client/utils/ObservableUtils.js").interceptOGCError,v=n("./MapStore2/web/client/utils/LayersUtils.js").getCapabilitiesUrl,S=n("./MapStore2/web/client/utils/FilterUtils.jsx"),w=n("./MapStore2/web/client/utils/ogc/WFS/RequestBuilder.js")({wfsVersion:"1.1.0"}),O=w.getFeature,j=w.query,E=w.sortBy,x=w.propertyName,P=n("./node_modules/url/url.js"),C=n("./node_modules/lodash/lodash.js").isObject,T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.totalFeatures,n=e.features,r=a(e,["totalFeatures","features"]),o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=o.startIndex,s=arguments.length>2?arguments[2]:void 0;return s>t&&s===i+n.length&&t===n.length?l(l({},r),{},{features:n,totalFeatures:s}):l(l({},r),{},{features:n,totalFeatures:t})},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.pagination||!y(t.startIndex)&&!y(t.maxFeatures)&&{startIndex:t.startIndex,maxFeatures:t.maxFeatures}},_=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=S.getWFSFilterData(t,n),o=P.parse(e,!0),i=C(o.query)?o.query:{};i.service="WFS",i.outputFormat="json";var a=P.format({protocol:o.protocol,host:o.host,pathname:o.pathname,query:i});return d.Observable.defer((function(){return u.post(a,r,{timeout:6e4,headers:{Accept:"application/json","Content-Type":"application/json"}})})).let(h).map((function(e){return T(e.data,M(t,n),n.totalFeatures)}))};e.exports={getJSONFeature:_,getLayerJSONFeature:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.search,n=void 0===t?{}:t,o=e.url,s=e.name,c=arguments.length>1?arguments[1]:void 0,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},p=u.sortOptions,d=u.propertyName,f=a(u,["sortOptions","propertyName"]);return _(n.url||o,c&&"object"===i(c)?l(l({},c),{},{typeName:s||c.typeName}):O(j(s,[].concat(r(p?[E(p.sortBy,p.sortOrder)]:[]),r(d?[x(d)]:[]),r(c?m(c):[]))),f),f).catch((function(e){if("OGCError"===e.name&&"NoApplicableCode"===e.code&&!p&&d&&d[0])return _(n.url||o,c&&"object"===i(c)?l(l({},c),{},{typeName:s||c.typeName}):O(j(s,[E(d[0])].concat(r(d?[x(d)]:[]),r(c?m(c):[]))),f),f);throw e}))},getJSONFeatureWA:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.sortOptions,o=void 0===r?{}:r,i=a(n,["sortOptions"]);return _(e,t,i).catch((function(n){if("OGCError"===n.name&&"NoApplicableCode"===n.code)return _(e,l(l({},t),{},{sortOptions:o}),i);throw n}))},describeFeatureType:function(e){var t=e.layer;return d.Observable.defer((function(){return u.get(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,n=e.search,r=void 0===n?{}:n,o=e.url,i=e.describeFeatureTypeURL,a=p.parse(i||r.url||o,!0);return p.format(l(l({},a),{},{search:void 0,query:l(l({},a.query),{},{service:"WFS",version:"1.1.0",typeName:t,outputFormat:"application/json",request:"DescribeFeatureType"})}))}(t))})).let(h)},getLayerWFSCapabilities:function(e){var t=e.layer;return d.Observable.defer((function(){return u.get(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,n=e.search,r=void 0===n?{}:n,o=e.url,i=v({name:t,url:r&&r.url||o}),a=p.parse(i,!0);return p.format(l(l({},a),{},{search:void 0,query:l(l({},a.query),{},{service:"WFS",version:"1.1.1",request:"GetCapabilities"})}))}(t))})).let(h).switchMap((function(e){return d.Observable.bindNodeCallback((function(e,t){return b(e,{tagNameProcessors:[g],explicitArray:!1,mergeAttrs:!0},t)}))(e.data)}))}}},"./MapStore2/web/client/observables/widgets/canGenerateCharts.js":function(e,t,n){var r=n("./node_modules/rxjs/Rx.js").Observable,o=n("./MapStore2/web/client/observables/wfs.js").describeFeatureType,i=n("./MapStore2/web/client/observables/wps/describe.js").describeProcess;e.exports=function(e){return r.forkJoin(o({layer:e}),i(e.url,"gs:Aggregate"))}},"./MapStore2/web/client/observables/wps/aggregate.js":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n("./node_modules/lodash/lodash.js").castArray,s=function(e){var t=e.featureType,n=e.aggregationAttribute,r=e.groupByAttributes,o=void 0===r?[]:r,i=e.aggregateFunction,s=e.viewParams,l=e.filter,c=void 0===l?"":l;return'<?xml version="1.0" encoding="UTF-8"?>\n<wps:Execute service="WPS"   version="1.0.0"\n    xmlns="http://www.opengis.net/wps/1.0.0"\n    xmlns:gml="http://www.opengis.net/gml"\n    xmlns:ogc="http://www.opengis.net/ogc"\n    xmlns:ows="http://www.opengis.net/ows/1.1"\n    xmlns:wcs="http://www.opengis.net/wcs/1.1.1"\n    xmlns:wfs="http://www.opengis.net/wfs"\n    xmlns:wps="http://www.opengis.net/wps/1.0.0"\n    xmlns:xlink="http://www.w3.org/1999/xlink"\n    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"   xsi:schemaLocation="http://www.opengis.net/wps/1.0.0  http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd">\n    <ows:Identifier>gs:Aggregate</ows:Identifier>\n    <wps:DataInputs>\n        <wps:Input>\n            <ows:Identifier>features</ows:Identifier>\n            <wps:Reference method="POST" mimeType="text/xml" xlink:href="http://geoserver/wfs">\n                <wps:Body>\n                    <wfs:GetFeature '.concat(s?'viewParams="'.concat(s,'"'):"",' outputFormat="GML2" service="WFS" version="1.0.0">\n                        <wfs:Query typeName="').concat(t,'">\n                        ').concat(c,"\n                        </wfs:Query>\n                    </wfs:GetFeature>\n                </wps:Body>\n            </wps:Reference>\n        </wps:Input>\n        <wps:Input>\n            <ows:Identifier>aggregationAttribute</ows:Identifier>\n            <wps:Data>\n                <wps:LiteralData>").concat(n,"</wps:LiteralData>\n            </wps:Data>\n        </wps:Input>\n        ").concat(a(i).map((function(e){return"<wps:Input>\n                    <ows:Identifier>function</ows:Identifier>\n                    <wps:Data>\n                        <wps:LiteralData>".concat(e,"</wps:LiteralData>\n                    </wps:Data>\n                    </wps:Input>")})),"\n        <wps:Input>\n            <ows:Identifier>singlePass</ows:Identifier>\n            <wps:Data>\n                <wps:LiteralData>false</wps:LiteralData>\n            </wps:Data>\n        </wps:Input>\n        ").concat(a(o).map((function(e){return"<wps:Input>\n            <ows:Identifier>groupByAttributes</ows:Identifier>\n            <wps:Data>\n                <wps:LiteralData>".concat(e,"</wps:LiteralData>\n            </wps:Data>\n        </wps:Input>")})),'\n    </wps:DataInputs>\n    <wps:ResponseForm>\n        <wps:RawDataOutput mimeType="application/json">\n            <ows:Identifier>result</ows:Identifier>\n        </wps:RawDataOutput>\n    </wps:ResponseForm>\n</wps:Execute>')},l=n("./MapStore2/web/client/libs/ajax.js"),c=n("./node_modules/rxjs/Rx.js"),u=n("./MapStore2/web/client/observables/wps/common.js").getWPSURL;e.exports=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return c.Observable.defer((function(){return l.post(u(e),s(t),o({headers:{"Content-Type":"text/xml"}},n))}))}},"./MapStore2/web/client/observables/wps/bounds.js":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=function(e){var t=e.wfsGetFeature;return'<?xml version="1.0" encoding="UTF-8"?>\n<wps:Execute service="WPS"   version="1.0.0"\n    xmlns="http://www.opengis.net/wps/1.0.0"\n    xmlns:gml="http://www.opengis.net/gml"\n    xmlns:ogc="http://www.opengis.net/ogc"\n    xmlns:ows="http://www.opengis.net/ows/1.1"\n    xmlns:wcs="http://www.opengis.net/wcs/1.1.1"\n    xmlns:wfs="http://www.opengis.net/wfs"\n    xmlns:wps="http://www.opengis.net/wps/1.0.0"\n    xmlns:xlink="http://www.w3.org/1999/xlink"\n    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"   xsi:schemaLocation="http://www.opengis.net/wps/1.0.0  http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd">\n    <ows:Identifier>gs:Bounds</ows:Identifier>\n    <wps:DataInputs>\n        <wps:Input>\n            <ows:Identifier>features</ows:Identifier>\n            <wps:Reference method="POST" mimeType="text/xml" xlink:href="http://geoserver/wfs">\n                <wps:Body>\n                    '.concat(t,'\n                </wps:Body>\n            </wps:Reference>\n        </wps:Input>\n    </wps:DataInputs>\n    <wps:ResponseForm>\n        <wps:RawDataOutput mimeType="application/json">\n            <ows:Identifier>bounds</ows:Identifier>\n        </wps:RawDataOutput>\n    </wps:ResponseForm>\n</wps:Execute>')},s=n("./MapStore2/web/client/libs/ajax.js"),l=n("./node_modules/rxjs/Rx.js"),c=n("./MapStore2/web/client/observables/wps/common.js").getWPSURL;e.exports=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return l.Observable.defer((function(){return s.post(c(e),a(t),o({headers:{"Content-Type":"text/xml"}},n))}))}},"./MapStore2/web/client/observables/wps/common.js":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n("./node_modules/url/url.js"),s=n("./node_modules/lodash/lodash.js").endsWith;e.exports={getWPSURL:function(e,t){if(e){var n=a.parse(e,!0),r=n.pathname;return(s(n.pathname,"wfs")||s(n.pathname,"wms"))&&(r=n.pathname.replace(/(wms|ows|wfs|wps)$/,"wps")),a.format(o(o({},n),{},{search:null,pathname:r,query:o(o({service:"WPS"},t),n.query)}))}return e}}},"./MapStore2/web/client/observables/wps/describe.js":function(e,t,n){var r=n("./MapStore2/web/client/observables/wps/common.js").getWPSURL,o=n("./node_modules/rxjs/Rx.js").Observable,i=n("./MapStore2/web/client/libs/ajax.js"),a=n("./MapStore2/web/client/utils/ObservableUtils.js").interceptOGCError;e.exports={describeProcess:function(e,t){return o.defer((function(){return i.get(r(e,{version:"1.0.0",REQUEST:"DescribeProcess",IDENTIFIER:t}),{timeout:5e3,headers:{Accept:"application/json","Content-Type":"application/xml"}})})).let(a)}}},"./MapStore2/web/client/plugins/AddGroup.jsx":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/react/index.js"),o=n.n(r),i=n("./node_modules/prop-types/index.js"),a=n.n(i),s=n("./node_modules/react-redux/es/index.js"),l=n("./node_modules/lodash/get.js"),c=n.n(l),u=n("./MapStore2/web/client/components/misc/Portal.jsx"),p=n.n(u),d=n("./MapStore2/web/client/components/misc/ResizableModal.jsx"),f=n.n(d),m=n("./MapStore2/web/client/components/I18N/Message.jsx"),y=n.n(m),b=n("./node_modules/react-bootstrap/es/index.js"),g=n("./MapStore2/web/client/actions/controls.js"),h=n("./MapStore2/web/client/actions/layers.js"),v=n("./MapStore2/web/client/utils/PluginsUtils.js");function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=C(e);if(t){var o=C(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return x(this,n)}}function x(e,t){return!t||"object"!==S(t)&&"function"!=typeof t?P(e):t}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var M=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(a,e);var t,n,r,i=E(a);function a(){var e;w(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return T(P(e=i.call.apply(i,[this].concat(n))),"state",{groupName:""}),T(P(e),"changeName",(function(t){e.setState({groupName:t.target.value})})),T(P(e),"isValid",(function(e){return""!==e})),e}return t=a,(n=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.enabled&&!this.props.enabled&&this.setState({groupName:""})}},{key:"render",value:function(){var e=this;return o.a.createElement(p.a,null,o.a.createElement(f.a,{size:"xs",clickOutEnabled:!1,showClose:!1,title:o.a.createElement(y.a,{msgId:"toc.addGroup"}),show:this.props.enabled,buttons:[{text:o.a.createElement(y.a,{msgId:"cancel"}),onClick:function(){e.props.onClose()}},{bsStyle:"primary",disabled:!this.isValid(this.state.groupName),text:o.a.createElement(y.a,{msgId:"addgroup.addbtn"}),onClick:function(){e.props.onAdd(e.state.groupName,e.props.parent),e.props.onClose()}}]},o.a.createElement("div",{id:"mapstore-add-toc-group"},o.a.createElement(b.FormGroup,null,o.a.createElement("label",{htmlFor:"groupName"},o.a.createElement(y.a,{msgId:"addgroup.groupName"})),o.a.createElement(b.FormControl,{name:"groupName",onChange:this.changeName,value:this.state.groupName})))))}}])&&O(t.prototype,n),r&&O(t,r),a}(r.Component);T(M,"propTypes",{enabled:a.a.bool,parent:a.a.string,onClose:a.a.func,onAdd:a.a.func}),T(M,"defaultProps",{enabled:!1,parent:null,onClose:function(){},onAdd:function(){}});var _=Object(s.connect)((function(e){return{enabled:c()(e,"controls.addgroup.enabled",!1),parent:c()(e,"controls.addgroup.parent",null)}}),{onClose:g.setControlProperties.bind(null,"addgroup","enabled",!1,"parent",null),onAdd:h.addGroup})(M);t.default=Object(v.createPlugin)("AddGroup",{component:_,containers:{TOC:{doNotHide:!0,name:"AddGroup"}}})},"./MapStore2/web/client/plugins/DrawerMenu.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=n("./node_modules/react/index.js"),m=n("./node_modules/prop-types/index.js"),y=n("./node_modules/react-redux/es/index.js").connect,b=n("./node_modules/reselect/es/index.js").createSelector,g=n("./MapStore2/web/client/plugins/locale/Message.jsx"),h=n("./MapStore2/web/client/actions/controls.js"),v=h.toggleControl,S=h.setControlProperty,w=n("./MapStore2/web/client/actions/map.js").changeMapStyle,O=n("./node_modules/react-bootstrap/es/index.js"),j=O.Button,E=O.Glyphicon,x=O.Panel,P=n("./MapStore2/web/client/plugins/drawer/Section.jsx"),C=n("./node_modules/lodash/lodash.js").partialRight,T=n("./node_modules/object-assign/index.js"),M=n("./MapStore2/web/client/selectors/maplayout.js").mapLayoutValuesSelector,_=n("./MapStore2/web/client/components/misc/enhancers/tooltip.jsx")(j),A=y(b([function(e){return e.controls.drawer&&e.controls.drawer.enabled},function(e){return e.controls.drawer&&e.controls.drawer.menu||"1"},function(e){return e.controls.queryPanel&&e.controls.queryPanel.enabled&&e.controls.drawer&&e.controls.drawer.width||e.controls.drawer&&e.controls.drawer.resizedWidth||void 0},function(e){return M(e,{height:!0})}],(function(e,t,n,r){return{show:e,activeKey:t,dynamicWidth:n,layout:r}})),{onToggle:v.bind(null,"drawer",null),onResize:S.bind(null,"drawer","resizedWidth"),onChoose:C(S.bind(null,"drawer","menu"),!0),changeMapStyle:w})(n("./MapStore2/web/client/plugins/drawer/Menu.jsx"));n("./MapStore2/web/client/plugins/drawer/drawer.css");var R=y((function(e){return{disabled:e.controls&&e.controls.drawer&&e.controls.drawer.disabled}}),{toggleMenu:v.bind(null,"drawer",null)})((function(e){var t=e.id,n=void 0===t?"":t,r=e.menuButtonStyle,o=void 0===r?{}:r,i=e.buttonStyle,a=void 0===i?"primary":i,s=e.buttonClassName,l=void 0===s?"square-button ms-drawer-menu-button":s,c=e.toggleMenu,u=void 0===c?function(){}:c,p=e.disabled,d=void 0!==p&&p,m=e.glyph,y=void 0===m?"1-layer":m,b=e.tooltipId,g=void 0===b?"toc.drawerButton":b,h=e.tooltipPosition,v=void 0===h?"bottom":h;return f.createElement(_,{id:n,style:o,bsStyle:a,key:"menu-button",className:l,onClick:u,disabled:d,tooltipId:g,tooltipPosition:v},f.createElement(E,{glyph:y}))})),I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(p,e);var t,n,r,c=l(p);function p(){var e;i(this,p);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return d(u(e=c.call.apply(c,[this].concat(n))),"getTools",(function(){return e.props.items.map((function(e,t){return T({},e,{position:e.position||t})})).sort((function(e,t){return e.position-t.position}))})),d(u(e),"renderItems",(function(){return e.getTools().map((function(t,n){var r=t.panel||t.plugin,i=f.createElement(r,o({isPanel:!0},t.cfg,{items:t.items||[],groupStyle:{style:{marginBottom:"0px",cursor:"pointer"}}})),a=t.title?f.createElement("div",{className:"drawer-menu-head drawer-menu-head-"+t.name},f.createElement(g,{msgId:t.title})):null;return e.props.singleSection?f.createElement(x,{icon:t.icon,glyph:t.glyph,buttonConfig:t.buttonConfig,key:t.name,eventKey:n+1+"",header:a},i):f.createElement(P,{key:t.name,renderInModal:t.renderInModal||!1,eventKey:n+1+"",header:a},i)}))})),e}return t=p,(n=[{key:"render",value:function(){return this.getTools().length>0?f.createElement("div",{id:this.props.id},f.createElement(R,o({},this.props,{id:"drawer-menu-button"})),f.createElement(A,o({single:this.props.singleSection},this.props.menuOptions,{title:f.createElement(g,{msgId:"menu"}),alignment:"left"}),this.renderItems())):null}}])&&a(t.prototype,n),r&&a(t,r),p}(f.Component);d(I,"propTypes",{items:m.array,active:m.string,toggleMenu:m.func,id:m.string,glyph:m.string,buttonStyle:m.string,menuOptions:m.object,singleSection:m.bool,buttonClassName:m.string,menuButtonStyle:m.object,disabled:m.bool}),d(I,"contextTypes",{messages:m.object,router:m.object}),d(I,"defaultProps",{id:"mapstore-drawermenu",items:[],toggleMenu:function(){},glyph:"1-layer",buttonStyle:"primary",menuOptions:{},singleSection:!0,buttonClassName:"square-button ms-drawer-menu-button",disabled:!1});var D=y((function(e){return{active:e.controls&&e.controls.drawer&&e.controls.drawer.active,disabled:e.controls&&e.controls.drawer&&e.controls.drawer.disabled}}),{toggleMenu:v.bind(null,"drawer",null)})(I);e.exports={DrawerMenuPlugin:T(D,{disablePluginIf:"{state('featuregridmode') === 'EDIT'}",FloatingLegend:{priority:1,name:"drawer-menu",button:R}}),reducers:{}}},"./MapStore2/web/client/plugins/FeatureEditor.jsx":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/react/index.js"),o=n.n(r),i=n("./node_modules/react-redux/es/index.js"),a=n("./node_modules/reselect/es/index.js"),s=n("./node_modules/redux/es/index.js"),l=n("./node_modules/lodash/lodash.js"),c=n("./node_modules/recompose/es/Recompose.js"),u=n("./node_modules/react-dock/lib/index.js"),p=n.n(u),d=n("./MapStore2/web/client/utils/PluginsUtils.js"),f=n("./MapStore2/web/client/epics/featuregrid.js"),m=n("./MapStore2/web/client/reducers/featuregrid.js"),y=n("./MapStore2/web/client/components/data/featuregrid/FeatureGrid.jsx"),b=n.n(y),g=n("./MapStore2/web/client/selectors/query.js"),h=n("./MapStore2/web/client/selectors/featuregrid.js"),v=n("./MapStore2/web/client/utils/FeatureGridUtils.js"),S=n("./MapStore2/web/client/plugins/featuregrid/panels/index.jsx"),w=n("./MapStore2/web/client/components/layout/BorderLayout.jsx"),O=n.n(w),j=n("./MapStore2/web/client/plugins/featuregrid/index.jsx"),E=n("./MapStore2/web/client/actions/featuregrid.js"),x=n("./node_modules/react-container-dimensions/lib/index.js"),P=n.n(x),C=n("./MapStore2/web/client/selectors/maplayout.js");function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function A(){return(A=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var R=[],I={},D=Object(i.connect)(Object(a.createSelector)(h.getDockSize,(function(e){return Object(C.mapLayoutValuesSelector)(e,{transform:!0})}),(function(e,t){return{size:e,dockStyle:t}})))(p.a),k=Object(a.createSelector)((function(e){return Object(l.get)(e,"featuregrid.open")}),(function(e){return Object(l.get)(e,"queryform.autocompleteEnabled")}),(function(e){return Object(g.wfsURLSelector)(e)}),(function(e){return Object(g.typeNameSelector)(e)}),(function(e){return Object(l.get)(e,"featuregrid.features")||R}),g.describeSelector,(function(e){return Object(l.get)(e,"featuregrid.attributes")}),(function(e){return Object(l.get)(e,"featuregrid.tools")}),h.selectedFeaturesSelector,h.modeSelector,h.changesSelector,h.newFeaturesSelector,h.hasChangesSelector,(function(e){return Object(l.get)(e,"featuregrid.focusOnEdit")||[]}),(function(e){return Object(l.get)(e,"featuregrid.enableColumnFilters")}),Object(a.createStructuredSelector)(g.paginationInfo),(function(e){return Object(l.get)(e,"featuregrid.pages")}),(function(e){return Object(l.get)(e,"featuregrid.pagination.size")}),(function(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:R,i=arguments.length>5?arguments[5]:void 0,a=arguments.length>6?arguments[6]:void 0,s=arguments.length>7?arguments[7]:void 0,l=arguments.length>8?arguments[8]:void 0,c=arguments.length>9?arguments[9]:void 0,u=arguments.length>10?arguments[10]:void 0,p=arguments.length>11&&void 0!==arguments[11]?arguments[11]:R,d=arguments.length>12?arguments[12]:void 0,f=arguments.length>13?arguments[13]:void 0,m=arguments.length>14?arguments[14]:void 0,y=arguments.length>15?arguments[15]:void 0,b=arguments.length>16?arguments[16]:void 0,g=arguments.length>17?arguments[17]:void 0;return{open:e,autocompleteEnabled:t,url:n,typeName:r,hasChanges:d,newFeatures:p,features:o,describe:i,attributes:a,tools:s,select:l,mode:c,focusOnEdit:f,enableColumnFilters:m,changes:Object(v.toChangesMap)(u),pagination:y,pages:b,size:g}})),L=Object(c.compose)(Object(i.connect)(k,(function(e){return{onMount:Object(s.bindActionCreators)(E.setUp,e),gridEvents:Object(s.bindActionCreators)(j.gridEvents,e),pageEvents:Object(s.bindActionCreators)(j.pageEvents,e),initPlugin:Object(s.bindActionCreators)((function(e){return Object(E.initPlugin)(e)}),e),toolbarEvents:Object(s.bindActionCreators)(j.toolbarEvents,e),gridTools:j.gridTools.map((function(t){return M(M({},t),{},{events:Object(s.bindActionCreators)(t.events,e)})})),onSizeChange:function(){return e(E.sizeChange.apply(void 0,arguments))}}})),Object(c.lifecycle)({componentDidMount:function(){this.props.onMount(Object(l.pick)(this.props,["showFilteredObject","showTimeSync","timeSync"]))}}))((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{tools:I,dialogs:I,select:R},t={dimMode:"none",defaultSize:.35,fluid:!0,isVisible:e.open,maxDockSize:.7,minDockSize:.1,position:"bottom",setDockSize:function(){},zIndex:1030};return o.a.createElement(D,A({},t,{onSizeChange:function(n){e.onSizeChange(n,t)}}),e.open&&o.a.createElement(P.a,null,(function(t){var n=t.height;return o.a.createElement(O.a,{className:"feature-grid-container",key:"feature-grid-container",height:n-94,header:Object(S.getHeader)(),columns:Object(S.getPanels)(e.tools),footer:Object(S.getFooter)(e)},Object(S.getDialogs)(e.tools),o.a.createElement(b.a,{editingAllowedRoles:e.editingAllowedRoles,initPlugin:e.initPlugin,customEditorsOptions:e.customEditorsOptions,autocompleteEnabled:e.autocompleteEnabled,url:e.url,typeName:e.typeName,filterRenderers:Object(S.getFilterRenderers)(e.describe),enableColumnFilters:e.enableColumnFilters,emptyRowsView:Object(S.getEmptyRowsView)(),focusOnEdit:e.focusOnEdit,newFeatures:e.newFeatures,changes:e.changes,mode:e.mode,select:e.select,key:"feature-grid-container",columnSettings:e.attributes,gridEvents:e.gridEvents,pageEvents:e.pageEvents,describeFeatureType:e.describe,features:e.features,minHeight:600,tools:e.gridTools,pagination:e.pagination,pages:e.pages,virtualScroll:e.virtualScroll,maxStoredPages:e.maxStoredPages,vsOverScan:e.vsOverScan,scrollDebounce:e.scrollDebounce,size:e.size}))})))}));t.default=Object(d.createPlugin)("FeatureEditor",{component:L,epics:f,reducers:{featuregrid:m},containers:{TOC:{doNotHide:!0,name:"FeatureEditor"}}})},"./MapStore2/web/client/plugins/FilterLayer.jsx":function(e,t,n){"use strict";n.r(t);var r=n("./MapStore2/web/client/utils/PluginsUtils.js");t.default=Object(r.createPlugin)("FilterLayer",{component:function(){return null},containers:{TOC:{name:"FilterLayer"}}})},"./MapStore2/web/client/plugins/FloatingLegend.jsx":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function a(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m(this,n)}}function m(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=n("./node_modules/react/index.js"),h=n("./node_modules/prop-types/index.js"),v=n("./node_modules/object-assign/index.js"),S=n("./node_modules/react-redux/es/index.js").connect,w=n("./node_modules/reselect/es/index.js").createSelector,O=n("./node_modules/lodash/lodash.js"),j=O.reverse,E=O.head,x=O.get,P=n("./MapStore2/web/client/actions/layers.js").updateNode,C=n("./MapStore2/web/client/actions/floatinglegend.js"),T=C.resizeLegend,M=C.expandLegend,_=n("./MapStore2/web/client/selectors/layers.js").layersSelector,A=n("./MapStore2/web/client/selectors/locale.js").currentLocaleSelector,R=n("./MapStore2/web/client/selectors/map.js").mapSelector,I=n("./MapStore2/web/client/selectors/maplayout.js").boundingMapRectSelector,D=n("./MapStore2/web/client/selectors/featuregrid.js").isFeatureGridOpen,k=n("./MapStore2/web/client/selectors/floatinglegend.js"),L=k.legendSizeSelector,N=k.legendExpandedSelector,F=n("./MapStore2/web/client/components/TOC/FloatingLegend.jsx"),U=n("./MapStore2/web/client/utils/MapUtils.js"),G=U.parseLayoutValue,B=U.getScales,z=n("./MapStore2/web/client/utils/LocaleUtils.js").getLocalizedProp,W=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(i,e);var t,n,r,o=f(i);function i(){return u(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"renderPanel",value:function(){var e=this,t=this.props.items&&E(this.props.items.filter((function(t){return t&&t.name===e.props.pluginName})));return t&&t.plugin&&g.createElement(t.plugin,c({},t.cfg||{},{items:t.items||[],menuButtonStyle:{display:"none"}}))}},{key:"renderToggleButton",value:function(){var e=this,t=this.props.items&&E(this.props.items.filter((function(t){return t&&t.name===e.props.pluginName})));return t&&t.button&&g.createElement(t.button,c({},t.cfg||{},{tooltipId:this.props.tooltipId}))}},{key:"render",value:function(){return g.createElement("div",{className:this.props.className,style:this.props.style},g.createElement(F,c({},this.props,{toggleButton:this.renderToggleButton()})),this.renderPanel())}}])&&p(t.prototype,n),r&&p(t,r),i}(g.Component);b(W,"propTypes",{items:h.array,pluginName:h.string,tooltipId:h.string,className:h.string,style:h.object}),b(W,"defaultProps",{items:[],pluginName:"drawer-menu",tooltipId:"floatinglegend.showTOC",className:"ms-floatinglegend-container",style:{top:0,left:0,position:"absolute",height:"100%"}});var V=S(w([_,A,L,N,function(e){return x(e,"controls.drawer.enabled")},R,I,D],(function(e,t,n,r,s,l,c,u){return{layers:u&&[]||e&&j(a(e.filter((function(e){return e&&"background"!==e.group&&!e.loadingError})).map((function(e){var n=e.title;return o(o({},i(e,["title"])),{},{title:z(t,n)})}))))||[],title:l&&l.info&&l.info.name||"",height:n.height||300,expanded:r,disabled:!!s,maxHeight:l&&l.size&&l.size.height-134-(c&&c.bottom&&G(c.bottom,l&&l.size&&l.size.height)||0)||9999,currentZoomLvl:l&&l.zoom,scales:B(l&&l.projection||"EPSG:3857",l&&l.mapOptions&&l.mapOptions.view&&l.mapOptions.view.DPI||null)}})),{onChange:P,onResize:T,onExpand:M})(W);e.exports={FloatingLegendPlugin:v(V,{disablePluginIf:"{state('featuregridmode') === 'EDIT'}"}),reducers:{floatinglegend:n("./MapStore2/web/client/reducers/floatinglegend.js")}}},"./MapStore2/web/client/plugins/GeoStory.jsx":function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"openMediaEditorForNewMedia",(function(){return pe})),n.d(r,"openWebPageComponentCreator",(function(){return fe})),n.d(r,"editWebPageComponent",(function(){return me})),n.d(r,"saveGeoStoryResource",(function(){return ye})),n.d(r,"scrollToContentEpic",(function(){return be})),n.d(r,"editMediaForBackgroundEpic",(function(){return ge})),n.d(r,"loadGeostoryEpic",(function(){return he})),n.d(r,"reloadGeoStoryOnLoginLogout",(function(){return ve})),n.d(r,"cleanUpEmptyStoryContainers",(function(){return Se})),n.d(r,"sortContentEpic",(function(){return we})),n.d(r,"setFocusOnMapEditing",(function(){return Oe})),n.d(r,"inlineEditorEditMap",(function(){return je})),n.d(r,"closeShareOnGeostoryChangeMode",(function(){return Ee})),n.d(r,"handlePendingGeoStoryChanges",(function(){return xe})),n.d(r,"urlUpdateOnScroll",(function(){return Pe})),n.d(r,"scrollOnLoad",(function(){return Ce})),n.d(r,"loadStoryOnHistoryPop",(function(){return Te})),n.d(r,"scrollSideBar",(function(){return Me}));var o=n("./node_modules/react/index.js"),i=n.n(o),a=n("./node_modules/react-redux/es/index.js"),s=n("./node_modules/reselect/es/index.js"),l=n("./node_modules/recompose/es/Recompose.js"),c=n("./MapStore2/web/client/utils/PluginsUtils.js"),u=n("./MapStore2/web/client/utils/GeoStoryUtils.js"),p=n("./MapStore2/web/client/utils/LocaleUtils.js"),d=n("./MapStore2/web/client/actions/geostory.js"),f=n("./node_modules/lodash/lodash.js"),m="geostory",y={type:"osm",title:"Open Street Map",name:"mapnik",source:"osm",group:"background",visibility:!0,id:"mapnik__0",loading:!1,loadingError:!1},b="MEDIA_EDITOR:HIDE",g=function(){return{type:b}},h=function(e){return{type:"MEDIA_EDITOR:SHOW",owner:e}},v=n("./node_modules/rxjs/Rx.js"),S=n("./node_modules/lodash/head.js"),w=n.n(S),O=n("./node_modules/lodash/isNaN.js"),j=n.n(O),E=n("./node_modules/lodash/isString.js"),x=n.n(E),P=n("./node_modules/lodash/isNil.js"),C=n.n(P),T=n("./node_modules/lodash/lastIndexOf.js"),M=n.n(T),_=n("./node_modules/lodash/words.js"),A=n.n(_),R=n("./node_modules/lodash/get.js"),I=n.n(R),D=n("./node_modules/lodash/isArray.js"),k=n.n(D),L=n("./node_modules/lodash/isEmpty.js"),N=n.n(L),F=n("./node_modules/connected-react-router/esm/actions.js"),U=n("./node_modules/uuid/v1.js"),G=n.n(U),B=n("./MapStore2/web/client/libs/ajax.js"),z=n.n(B),W=n("./MapStore2/web/client/actions/controls.js"),V=n("./MapStore2/web/client/actions/notifications.js"),H=n("./MapStore2/web/client/actions/security.js"),q=n("./MapStore2/web/client/selectors/security.js"),Y=n("./MapStore2/web/client/selectors/geostory.js"),Q=function(e){return Object(f.get)(e,"mediaEditor.settings.sourceId")},K=function(e){return Object(f.get)(e,"mediaEditor.settings.mediaType")},Z=(Object(s.createSelector)((function(e){return Object(f.get)(function(e){return Object(f.get)(e,'mediaEditor.data["'.concat(K(e),'"]["').concat(Q(e),'"].resultData'))}(e),"resources")}),(function(e){return Object(f.get)(e,"mediaEditor.selected")}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return Object(f.find)(e,{id:t})})),n("./MapStore2/web/client/observables/epics.js")),X="MAP_EDITOR:SAVE";function J(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||oe(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach((function(t){te(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ne(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function re(e){return function(e){if(Array.isArray(e))return ie(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||oe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oe(e,t){if(e){if("string"==typeof e)return ie(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ie(e,t):void 0}}function ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ae=n("./MapStore2/web/client/api/persistence/index.js"),se=ae.createResource,le=ae.updateResource,ce=ae.getResource,ue=function(e,t){return function(n){return n.ofType("MEDIA_EDITOR:CHOOSE_MEDIA").switchMap((function(n){var r=n.resource,o=void 0===r?{}:r,i=[],a=e.getState(),s=K(a),l=Q(a),c=w()(Object(Y.resourcesSelector)(a).filter((function(e){return e.data&&(l!==m&&e.data.id||e.id)===o.id}))),p=o.id;if(c)p=c.id;else if(N()(o)){var f=s===u.d.MAP?{resourceId:"",type:null,map:void 0}:{resourceId:"",type:null};i=[].concat(re(i),[Object(d.update)("".concat(t),f),g()])}else p=G()(),i=[].concat(re(i),[Object(d.addResource)(p,s,o)]);var y=s===u.d.MAP?{resourceId:p,type:s,map:void 0}:{resourceId:p,type:s};return i=[].concat(re(i),[Object(d.update)("".concat(t),y,"merge"),g()]),v.Observable.from(i)}))}},pe=function(e,t){return e.ofType(d.ADD).filter((function(e){var t=e.element,n=void 0===t?{}:t;return n.type===u.a.MEDIA||Object(u.r)(n)})).switchMap((function(n){var r=n.path,o=n.element,i="";Object(u.r)(o)&&"sections"===r&&(i=".contents[0].contents[0]");var a="".concat(r,'[{"id":"').concat(o.id,'"}]').concat(i);return v.Observable.of(h("geostory")).merge(e.let(ue(t,a)),e.ofType(b).switchMap((function(){return v.Observable.of(Object(d.remove)(a))})).takeUntil(e.ofType(d.UPDATE))).takeUntil(e.ofType("GEOSTORY:EDIT_MEDIA"))}))},de=function(e){return function(t){return t.ofType(d.SET_WEBPAGE_URL).switchMap((function(t){var n=t.src;return v.Observable.of(Object(d.update)("".concat(e),{src:n,editURL:!1},"merge"))}))}},fe=function(e){return e.ofType(d.ADD).filter((function(e){var t=e.element,n=void 0===t?{}:t;return n.type===u.a.WEBPAGE&&!1!==n.editURL||Object(u.s)(n)})).switchMap((function(t){var n=t.path,r=t.element,o="";Object(u.s)(r)&&"sections"===n&&(o=".contents[0].contents[0]");var i="".concat(n,'[{"id":"').concat(r.id,'"}]').concat(o);return v.Observable.of(Object(d.update)(i,{editURL:!0},"merge")).merge(e.let(de(i))).takeUntil(e.ofType(d.EDIT_WEBPAGE))}))},me=function(e){return e.ofType(d.EDIT_WEBPAGE).switchMap((function(t){var n=t.path;return v.Observable.of(Object(d.update)(n,{editURL:!0},"merge")).merge(e.let(de(n))).takeUntil(e.ofType(d.ADD))}))},ye=function(e){return e.ofType(d.SAVE).exhaustMap((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.resource,n=e.delay,r=void 0===n?1e3:n;return(t.id?le(t):se(t)).switchMap((function(e){return v.Observable.of(Object(d.storySaved)(e),Object(d.setControl)(u.b.SHOW_SAVE,!1),t.id?Object(d.loadGeostory)(e):Object(F.g)("/geostory/".concat(e))).merge(v.Observable.of(Object(V.show)({id:"STORY_SAVE_SUCCESS",title:"saveDialog.saveSuccessTitle",message:"saveDialog.saveSuccessMessage"})).delay(t.id?0:r))})).let(Object(Z.wrapStartStop)(Object(d.loadingGeostory)(!0,"loading"),Object(d.loadingGeostory)(!1,"loading"))).catch((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.status,n=e.statusText,r=e.data,o=e.message,i=ne(e,["status","statusText","data","message"]);return v.Observable.of(Object(d.saveGeoStoryError)(t?{status:t,statusText:n,data:r}:o||i),Object(d.loadingGeostory)(!1,"loading"))}))}))},be=function(e){return e.ofType(d.ADD).switchMap((function(e){var t=e.element;return v.Observable.of(t).switchMap((function(){if(document.getElementById(t.id))return Object(u.v)(t.id,{behavior:"auto",block:"center"}),v.Observable.empty();throw new Error("Item not mounted yet")})).retryWhen((function(e){return e.delay(200).take(10)}))}))},ge=function(e,t){return e.ofType("GEOSTORY:EDIT_MEDIA").switchMap((function(n){var r,o=n.path,i=n.owner,a=Object(Y.resourceIdSelectorCreator)(o)(t.getState()),s=Object(Y.resourceByIdSelectorCreator)(a)(t.getState());return v.Observable.of(K(t.getState())).filter((function(e){return s&&s.type!==e})).map((function(){return{type:"MEDIA_EDITOR:SET_MEDIA_TYPE",mediaType:s.type}})).merge(v.Observable.of(h(i),(r=a,{type:"MEDIA_EDITOR:SELECT_ITEM",id:r})).merge(e.let(ue(t,o)).takeUntil(e.ofType(b,d.ADD))))}))},he=function(e,t){var n=t.getState,r=void 0===n?function(){}:n;return e.ofType(d.LOAD_GEOSTORY).switchMap((function(e){var t=e.id;return v.Observable.defer((function(){return t&&j()(parseInt(t,10))?z.a.get("configs/".concat(t,".json")).then((function(e){var t=e.data,n=t.sections,r=k()(n)&&n.map((function(e){return ee(ee({},e),{},{id:G()()})}));return{data:r.length?ee(ee({},t),{},{sections:r}):t,isStatic:!0,canEdit:!0}})):ce(t)})).do((function(e){if(!e.data)throw Error("Wrong data format");return!0})).switchMap((function(e){var n=e.data,o=e.isStatic,i=void 0!==o&&o,a=ne(e,["data","isStatic"]),s=r(),l=Object(q.isAdminUserSelector)(s),c=Object(q.isLoggedIn)(s),p=x()(n)?JSON.parse(n):n;if(!c&&j()(parseInt(t,10)))return v.Observable.of(Object(d.loadGeostoryError)({status:403}));var f=Object(Y.modeSelector)(s)===u.e.EDIT;return v.Observable.from([].concat(re(i||f?[Object(d.setEditing)(a&&a.canEdit||l)]:[]),[Object(d.geostoryLoaded)(t),Object(d.setCurrentStory)(p),Object(d.setResource)(a)]))})).let(Object(Z.wrapStartStop)(Object(d.loadingGeostory)(!0,"loading"),Object(d.loadingGeostory)(!1,"loading"),(function(e){var t="geostory.errors.loading.unknownError";return 403===e.status?(t="geostory.errors.loading.pleaseLogin",(Object(q.isLoggedIn)(r())||Object(Y.isSharedStory)(r()))&&(t="geostory.errors.loading.geostoryNotAccessible")):404===e.status?t="geostory.errors.loading.geostoryDoesNotExist":C()(e.status)&&(t=e.message),v.Observable.of(Object(V.error)({title:"geostory.errors.loading.title",message:t}),Object(d.setCurrentStory)({}),Object(d.loadGeostoryError)(ee(ee({},e),{},{messageId:t})))})))}))},ve=function(e){return e.ofType(d.LOAD_GEOSTORY).switchMap((function(t){var n=t.id;return e.ofType(H.LOGIN_SUCCESS,H.LOGOUT).switchMap((function(){return v.Observable.of(Object(d.loadGeostory)(n)).delay(500)})).takeUntil(e.ofType(F.b))}))},Se=function(e,t){var n=t.getState,r=void 0===n?function(){}:n;return e.ofType(d.REMOVE).switchMap((function(e){var t=e.path,n=Object(u.n)(t,Object(Y.currentStorySelector)(r())),o=M()(n,"contents");if(o>0){var i=n.splice(0,o),a=Object(Y.createPathSelector)(i.join("."))(r());if(a&&a.contents&&0===a.contents.length)return v.Observable.of(Object(d.remove)(i.join(".")))}return v.Observable.empty()}))},we=function(e,t){var n=t.getState,r=void 0===n?function(){}:n;return e.ofType(d.MOVE).switchMap((function(e){var t=e.source,n=e.target,o=e.position,i=r(),a=Object(Y.createPathSelector)(t)(i);return v.Observable.of(Object(d.remove)(t),Object(d.add)(n,o,a))}))},Oe=function(e,t){var n=t.getState,r=void 0===n?function(){}:n;return e.ofType(d.UPDATE).filter((function(e){var t=e.path;return(void 0===t?"":t).endsWith("editMap")})).map((function(e){var t=e.path,n=e.element,o=Object(u.o)(t,Object(Y.currentStorySelector)(r())),i=o.flatPath,a=o.path,s=i.pop(),l=i.shift(),c="background"===a[a.length-2],p=c&&"#".concat(l.id," .ms-section-background-container")||"#".concat(s.id);return Object(u.v)(s.id),Object(d.setFocusOnContent)(n,s,p,c,t.replace(".editMap",""))}))},je=function(e,t){var n=t.getState;return e.ofType("MAP_EDITOR:SHOW").filter((function(e){var t=e.owner,n=e.map;return"inlineEditor"===t&&!!n})).switchMap((function(){return e.ofType(X).switchMap((function(t){var r,o=t.map,i=Object(Y.getFocusedContentSelector)(n()).path;return v.Observable.of(Object(d.update)("".concat(i,".map"),o),Object(d.update)("".concat(i,".editMap"),!1),{type:"MAP_EDITOR:HIDE",owner:r}).takeUntil(e.ofType("MAP_EDITOR:HIDE"))}))}))},Ee=function(e){return e.ofType(d.CHANGE_MODE).switchMap((function(){return v.Observable.of(Object(W.setControlProperty)("share","enabled",!1))}))},xe=function(e){return v.Observable.merge(e.ofType(d.LOAD_GEOSTORY).switchMap((function(){return e.ofType(d.SET_RESOURCE)}))).switchMap((function(){return e.ofType(d.ADD,d.UPDATE,d.REMOVE,d.ADD_RESOURCE,d.EDIT_RESOURCE,d.UPDATE_SETTING).take(1).switchMap((function(){return v.Observable.of(Object(d.setPendingChanges)(!0)).concat(e.ofType(d.SAVED,F.b,H.LOGOUT).take(1).switchMap((function(){return v.Observable.of(Object(d.setPendingChanges)(!1))})))}))}))},Pe=function(e,t){var n=t.getState;return e.ofType(d.UPDATE_CURRENT_PAGE).debounceTime(50).switchMap((function(e){var t=e.sectionId,r=e.columnId;if("edit"!==Object(Y.modeSelector)(n())&&(r||t)&&Object(Y.updateUrlOnScrollSelector)(n())){var o,i,a=I()(n(),"geostory.resource.id"),s=Object(u.u)(window.location.href,null===(o=window)||void 0===o||null===(i=o.location)||void 0===i?void 0:i.hash,a,t,r);s&&history.pushState(null,"",s)}return v.Observable.empty()}))},Ce=function(e){return e.ofType(d.SET_CURRENT_STORY).switchMap((function(){var e,t,n,r,o,i,a=null===(e=window)||void 0===e||null===(t=e.location)||void 0===t||null===(n=t.hash)||void 0===n?void 0:n.split("/");return(null===(r=window)||void 0===r||null===(o=r.location)||void 0===o||null===(i=o.hash)||void 0===i?void 0:i.includes("shared"))?Object(u.v)(a[5]||a[4],{block:"center",behavior:"auto"}):a.length>4?Object(u.v)(a[4],{block:"start",behavior:"auto"}):4===a.length&&Object(u.v)(a[3],{block:"start",behavior:"auto"}),v.Observable.empty()}))},Te=function(e){return e.ofType(F.b).switchMap((function(e){var t,n=e.payload;if((null==n||null===(t=n.location)||void 0===t?void 0:t.pathname.includes("/geostory/"))&&"POP"===n.action){var r,o=A()(null==n||null===(r=n.location)||void 0===r?void 0:r.pathname);return o.find((function(e){return"shared"===e}))?v.Observable.of(Object(d.loadGeostory)(o[2])).delay(500):v.Observable.of(Object(d.loadGeostory)(o[1])).delay(500)}return v.Observable.empty()}))},Me=function(e,t){var n=t.getState;return e.ofType(d.UPDATE_CURRENT_PAGE).filter((function(e){var t=e.columnId,r=e.sectionId;return!("edit"!==Object(Y.modeSelector)(n())||!t&&!r)})).debounceTime(50).switchMap((function(){return v.Observable.of(Array.from(document.querySelectorAll(".ms-geostory-builder .mapstore-side-card.ms-highlight")).pop()).filter((function(e){return!!e})).withLatestFrom(v.Observable.of(document.querySelector(".ms-geostory-builder .ms2-border-layout-body")).filter((function(e){return!!e}))).map((function(e){var t=J(e,2),n=t[0],r=t[1];return function(){var e=n.getBoundingClientRect(),t=e.top,o=e.bottom,i=r.getBoundingClientRect(),a=i.top,s=i.bottom;t<a?r.scrollBy({top:t-a-10,behavior:"smooth"}):o>s&&r.scrollBy({top:o-s+10,behavior:"smooth"})}})).do((function(e){return window.requestAnimationFrame(e)})).ignoreElements()}))},_e=n("./MapStore2/web/client/selectors/locale.js"),Ae=n("./MapStore2/web/client/utils/ImmutableUtils.js");function Re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Re(Object(n),!0).forEach((function(t){De(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Re(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function De(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ke(e){return function(e){if(Array.isArray(e))return Le(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Le(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Le(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Le(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ne=function(e,t){var n=e.length,r=0;return t||0===t||(r=n),Object(f.isString)(t)?r=Object(f.findIndex)(e,{id:t})+1:Object(f.isNumber)(t)&&(r=Math.min(t,e.length)),r},Fe=function e(t,n,r){var o=r.contents,i=r.background,a=r.id,s=r.resourceId,l=[],c=n+'{"id": "'.concat(a,'"}]');return s===t?[c]:(i&&i.resourceId===t&&l.push(c+".background"),o?o.reduce((function(n,r){return[].concat(ke(n),ke(e(t,c+".contents[",r)))}),l):l)},Ue={mode:"view",isCollapsed:!1,focusedContent:{},currentPage:{},settings:{},oldSettings:{},updateUrlOnScroll:!1},Ge=n("./MapStore2/web/client/components/layout/BorderLayout.jsx"),Be=n.n(Ge),ze=n("./node_modules/react-container-dimensions/lib/index.js"),We=n.n(ze),Ve=n("./node_modules/recompose/rxjsObservableConfig.js"),He=n.n(Ve);function qe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qe(Object(n),!0).forEach((function(t){Qe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Qe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ke(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ze(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ze(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Object(l.setObservableConfig)(He.a);var Xe=Object(l.compose)(Object(l.mapPropsStream)((function(e){var t=Object(l.createEventHandler)(),n=t.handler,r=t.stream,o="EMPTY",i="EMPTY";return v.Observable.combineLatest(e,r.filter((function(e){var t=e.columnId,n=e.sectionId;return t&&o!==t?(o=t,!0):!(!n||i===n)&&(i=n,!0)})).withLatestFrom(e.pluck("updateCurrentPage")).do((function(e){var t=Ke(e,2),n=t[0],r=t[1];return r&&r(n)})).ignoreElements().startWith({}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Ye(Ye({},t.reduce((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return Ye(Ye({},e),t)}),{})),{},{updateCurrentPage:n})}))}))),Je=n("./MapStore2/web/client/components/misc/enhancers/emptyState.jsx"),$e=n.n(Je);function et(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?et(Object(n),!0).forEach((function(t){nt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):et(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function nt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object(l.setObservableConfig)(He.a);var rt=Object(l.compose)(Object(l.mapPropsStream)((function(e){var t=Object(l.createEventHandler)(),n=t.handler,r=t.stream;return v.Observable.combineLatest(e,function(e,t){return t.map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.interceptorTime,n=e.updateCurrentPage;return{interceptorTime:t,updateCurrentPage:n}})).distinctUntilKeyChanged("interceptorTime").switchMap((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.interceptorTime,r=void 0===n?100:n,o=t.updateCurrentPage;return e.scan((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.id,r=t.visible,o=t.entry;return tt(tt({},e),{},nt({},n,{visible:r,entry:o}))}),{}).debounceTime(r).map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(f.minBy)(Object.keys(e),(function(t){return e[t].visible?Object(f.get)(e[t],"entry.boundingClientRect.top"):1/0}));return t})).do((function(e){o&&o({sectionId:e})})).ignoreElements()}))}(r,e).startWith({}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return tt(tt({},t.reduce((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return tt(tt({},e),t)}),{})),{},{onVisibilityChange:n})}))}))),ot=n("./node_modules/prop-types/index.js"),it=n.n(ot),at=n("./MapStore2/web/client/components/misc/enhancers/localizedProps.js"),st=n.n(at),lt=(n("./node_modules/react-draft-wysiwyg/dist/react-draft-wysiwyg.css"),n("./node_modules/draft-js/lib/Draft.js")),ct=n("./node_modules/draftjs-to-html/lib/draftjs-to-html.js"),ut=n.n(ct),pt=n("./node_modules/html-to-draftjs/dist/html-to-draftjs.js"),dt=n.n(pt),ft=n("./node_modules/react-draft-wysiwyg/dist/react-draft-wysiwyg.js");function mt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mt(Object(n),!0).forEach((function(t){bt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function bt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var gt=Object(l.compose)(Object(l.withState)("contentEditing","setContentEditing",!1),Object(l.withState)("editorState","onEditorStateChange"),Object(l.withHandlers)({toggleEditing:function(e){var t=e.bubblingTextEditing,n=void 0===t?function(){}:t,r=e.sectionType,o=e.onEditorStateChange,i=void 0===o?function(){}:o,a=e.setContentEditing,s=void 0===a?function(){}:a;return function(e,t){if(e){var o=dt()(t),a=lt.ContentState.createFromBlockArray(o.contentBlocks),l=lt.EditorState.createWithContent(a);r===u.g.TITLE&&"unstyled"===lt.RichUtils.getCurrentBlockType(l)&&(a=lt.Modifier.setBlockType(a,lt.EditorState.createWithContent(a).getSelection(),"header-one"),l=lt.EditorState.createWithContent(a)),i(l),s(!0),n(!0)}else s(!1),n(!1)}}}),Object(l.branch)((function(e){return!!e.contentEditing}),Object(l.compose)(Object(l.lifecycle)({componentWillUnmount:function(){var e=this.props,t=e.editorState,n=e.save,r=void 0===n?function(){}:n,o=1!==Object(lt.convertToRaw)(t.getCurrentContent()).blocks.length||Object(lt.convertToRaw)(t.getCurrentContent()).blocks[0].text,i=ut()(Object(lt.convertToRaw)(t.getCurrentContent()));r(o?i:u.c)}}),Object(l.withHandlers)({onBlur:function(e){var t=e.toggleEditing,n=void 0===t?function(){}:t;return function(){n(!1)}}}),Object(l.withProps)((function(e){var t=e.placeholder,n=e.toolbarStyle,r=void 0===n?{}:n,o=e.className,i=void 0===o?"ms-text-editor":o;return{editorRef:function(e){return setTimeout((function(){return e&&e.focus&&e.focus()}),100)},stripPastedStyles:!0,placeholder:t,toolbarStyle:r,toolbar:yt({options:["fontFamily","blockType","fontSize","inline","textAlign","colorPicker","list","link","remove"],fontFamily:{options:["inherit","Arial","Georgia","Impact","Tahoma","Times New Roman","Verdana"],className:void 0,component:void 0,dropdownClassName:void 0},link:{inDropdown:!1,className:void 0,component:void 0,popupClassName:void 0,dropdownClassName:void 0,showOpenOptionOnHover:!0,defaultTargetOption:"_self",options:["link","unlink"],link:{icon:void 0,className:void 0},unlink:{icon:void 0,className:void 0},linkCallback:void 0},blockType:{inDropdown:!0,options:["Normal","H1","H2","H3","H4","H5","H6","Blockquote","Code"],className:void 0,component:void 0,dropdownClassName:void 0},inline:{options:["bold","italic","underline","strikethrough","monospace"],bold:{className:"".concat(i,"-toolbar-btn")},italic:{className:"".concat(i,"-toolbar-btn")},underline:{className:"".concat(i,"-toolbar-btn")},strikethrough:{className:"".concat(i,"-toolbar-btn")},code:{className:"".concat(i,"-toolbar-btn")}},textAlign:{left:{className:"".concat(i,"-toolbar-btn")},center:{className:"".concat(i,"-toolbar-btn")},right:{className:"".concat(i,"-toolbar-btn")},justify:{className:"".concat(i,"-toolbar-btn")}},colorPicker:{className:"".concat(i,"-toolbar-btn")},remove:{className:"".concat(i,"-toolbar-btn")}},toolbar),toolbarClassName:"".concat(i,"-toolbar"),wrapperClassName:"".concat(i,"-wrapper"),editorClassName:"".concat(i,"-main")}})),Object(l.renderComponent)(ft.Editor)))),ht=Object(l.compose)(Object(l.withHandlers)({save:function(e){var t=e.update,n=void 0===t?function(){}:t;return function(e){return n("html",e)}}}),Object(l.branch)((function(e){return e.mode===u.e.EDIT}),gt),Object(l.compose)(Object(l.withPropsOnChange)(["sectionType"],(function(e){var t=e.sectionType;return{placeholder:u.g.TITLE===t?"geostory.builder.defaults.htmlTitlePlaceholder":"geostory.builder.defaults.htmlPlaceholder",placeholderTag:u.g.TITLE===t?"h1":"p"}})),st()("placeholder")))((function(e){var t=e.placeholder,n=e.placeholderTag,r=void 0===n?"p":n,o=e.id,a=e.toggleEditing,s=void 0===a?function(){}:a,l=e.html,c=e.mode;return i.a.createElement("div",{className:"ms-text-wrapper"},l!==u.c&&i.a.createElement("div",{id:o,onClick:function(){return s(!0,l)},dangerouslySetInnerHTML:{__html:l}}),(!l||l===u.c)&&c===u.e.EDIT&&i.a.createElement("div",{className:"ms-text-placeholder",id:"placeholder"+o,onClick:function(){return s(!0,l===u.c?"":l)},dangerouslySetInnerHTML:{__html:"<".concat(r,">").concat(t,"</").concat(r,">")}}))})),vt=n("./node_modules/react-intersection-observer/react-intersection-observer.esm.js"),St=n("./node_modules/lodash/debounce.js"),wt=n.n(St);function Ot(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return jt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Et=function(e){var t=e.id,n=e.onLoad,r=e.loading,a=e.debounceTime,s=e.children,l=e.loaderComponent,c=Ot(Object(vt.b)(),2),u=c[0],p=c[1],d=Object(o.useRef)(null),f=l;return Object(o.useEffect)((function(){return d.current=wt()((function(e){n(e)}),a),function(){d.current.cancel()}}),[]),Object(o.useEffect)((function(){p&&r&&d.current(t),!p&&r&&d.current.cancel()}),[p,r,t]),i.a.createElement("div",{ref:u,className:"ms-visibility-container"},r?f?i.a.createElement(f,null):null:Object(o.cloneElement)(s,{inView:p}))};Et.propTypes={id:it.a.string,debounceTime:it.a.number,loading:it.a.bool,onLoad:it.a.func,loaderComponent:it.a.element},Et.defaultProps={id:"",debounceTime:300,loading:!0,onLoad:function(){},loaderComponent:null};var xt=Et,Pt=n("./node_modules/react-bootstrap/es/index.js"),Ct=n("./node_modules/react-image-lightbox/dist/umd/react-image-lightbox.js"),Tt=n.n(Ct),Mt=n("./node_modules/object-fit-images/dist/ofi.common-js.js"),_t=n.n(Mt);function At(e){return(At="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function It(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Dt(e,t){return(Dt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function kt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Nt(e);if(t){var o=Nt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lt(this,n)}}function Lt(e,t){return!t||"object"!==At(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Nt(e){return(Nt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ft,Ut,Gt,Bt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Dt(e,t)}(a,e);var t,n,r,o=kt(a);function a(){return Rt(this,a),o.apply(this,arguments)}return t=a,(n=[{key:"componentDidMount",value:function(){_t()(this._node)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.src!==this.props.src&&_t()(this._node)}},{key:"render",value:function(){var e=this,t=this.props,n=t.id,r=t.src,o=t.fit,a=void 0===o?"cover":o,s=t.enableFullscreen,l=void 0===s||s,c=t.fullscreen,u=t.onClick,p=t.description,d=t.showCaption,f=t.caption,m=void 0===f?p:f,y=t.credits,b=this.props.loaderComponent,g=this.props.errorComponent;return i.a.createElement("div",{id:n,className:"ms-media ms-media-image"},r&&"error"!==this.props.status&&i.a.createElement("img",{ref:function(t){e._node=t},src:r,onLoad:function(){return e.props.onChangeStatus("loaded")},onError:function(){return e.props.onChangeStatus("error")},onClick:l?function(){return u(!0)}:void 0,style:{objectFit:a,fontFamily:"object-fit: ".concat(a),cursor:l?"pointer":"default"}}),r&&!this.props.status&&b&&i.a.createElement(b,null),"error"===this.props.status&&g&&i.a.createElement(g,null),y&&i.a.createElement("div",{className:"ms-media-credits"},i.a.createElement("small",null,y)),d&&m&&i.a.createElement("div",{className:"ms-media-caption"},i.a.createElement("small",null,m)),l&&c?i.a.createElement(Tt.a,{mainSrc:r,onCloseRequest:function(){return u(!1)}}):null)}}])&&It(t.prototype,n),r&&It(t,r),a}(o.Component);Ft=Bt,Ut="propTypes",Gt={src:it.a.string,id:it.a.string,fit:it.a.string,description:it.a.string,showCaption:it.a.bool,credits:it.a.string,altText:it.a.string,enableFullscreen:it.a.bool,fullscreen:it.a.bool,onClick:it.a.func,onChangeStatus:it.a.func,status:it.a.string,loaderComponent:it.a.element,errorComponent:it.a.element,caption:it.a.string},Ut in Ft?Object.defineProperty(Ft,Ut,{value:Gt,enumerable:!0,configurable:!0,writable:!0}):Ft[Ut]=Gt;var zt=Object(l.compose)(Object(l.withState)("fullscreen","onClick",!1),Object(l.withState)("status","onChangeStatus",""))(Bt),Wt=n("./MapStore2/web/client/components/map/enhancers/autoMapType.js"),Vt=n.n(Wt),Ht=n("./MapStore2/web/client/components/map/enhancers/mapType.js"),qt=n.n(Ht),Yt=n("./MapStore2/web/client/components/map/enhancers/autoResize.js"),Qt=n.n(Yt),Kt=n("./MapStore2/web/client/components/map/enhancers/getProjectionDefs.js"),Zt=n("./MapStore2/web/client/components/map/enhancers/onMapViewChanges.js"),Xt=n.n(Zt),Jt=n("./MapStore2/web/client/components/map/enhancers/handlingUnsupportedProjection.js"),$t=n("./MapStore2/web/client/components/misc/enhancers/loadingState.jsx"),en=n.n($t),tn=n("./MapStore2/web/client/components/data/identify/enhancers/defaultViewer.js"),nn=n("./MapStore2/web/client/components/data/identify/DefaultViewer.jsx"),rn=n.n(nn),on=n("./MapStore2/web/client/components/data/identify/SwipeHeader.jsx"),an=n.n(on),sn=Object(l.compose)(Object(l.withStateHandlers)({indx:0},{setIndex:function(){return function(e){return{index:e}}}}),Object(l.defaultProps)({responses:[]})),ln=Object(l.compose)(Object(l.defaultProps)({responses:[],container:function(e){var t=e.index,n=e.children;return i.a.createElement(i.a.Fragment,null,Object(f.isArray)(n)&&n[t]||n)},header:an.a}),sn,tn.defaultViewerDefaultProps,tn.defaultViewerHandlers,en()((function(e){return 0===e.responses.length})))(rn.a),cn=n("./MapStore2/web/client/api/identify.jsx"),un=n("./MapStore2/web/client/utils/MapInfoUtils.js");function pn(){return(pn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function dn(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function fn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fn(Object(n),!0).forEach((function(t){yn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function yn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return gn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var hn=function(){return-1!==Object(un.getAvailableInfoFormatValues)().indexOf("application/json")?"application/json":Object(un.getDefaultInfoFormatValue)()},vn=Object(l.mapPropsStream)((function(e){var t=Object(l.createEventHandler)(),n=t.stream,r=t.handler;return n.withLatestFrom(e.map((function(e){return{map:e.map,layers:e.layers,options:e.options}})).distinctUntilChanged((function(e,t){return Object(f.isEqual)(e,t)}))).switchMap((function(e){var t=bn(e,2),n=t[0].point,r=t[1],o=r.map,i=r.layers,a=void 0===i?[]:i,s=r.options,l=(s=void 0===s?{}:s).mapOptions,c=(l=void 0===l?{}:l).mapInfoFormat,u=void 0===c?hn():c,p=a.filter(un.defaultQueryableFilter),d=["SLD_BODY"],f=["buffer","cql_filter","filter","propertyName"];return v.Observable.from(p).mergeMap((function(e){var t=Object(un.buildIdentifyRequest)(e,{format:u,map:o,point:n,currentLocale:"en-US"}),r=t.url,i=t.request,a=t.metadata,s=r,l=i,c=mn(mn({},Object(un.filterRequestParams)(e,f,d)),l),p=G()();return Object(cn.a)(s,c,e).map((function(e){return e.data.exceptions?{reqId:p,exceptions:e.data.exceptions,queryParams:l,layerMetadata:a}:{data:e.data,reqId:p,queryParams:l,layerMetadata:mn(mn({},a),{},{features:e.features,featuresCrs:e.featuresCrs})}})).catch((function(e){return{error:e.data||e.statusText||e.status,reqId:p,queryParams:l,layerMetadata:a}})).startWith({start:!0,reqId:p,request:c})})).scan((function(e,t){var n=e.requests,r=e.responses,o=e.validResponses;if(t.start){var i=t.reqId,a=t.request;return{requests:n.concat({reqId:i,request:a}),responses:r,validResponses:o}}var s=t.data,l=t.queryParams,c=t.layerMetadata,p=Object(un.getValidator)(u),d=r.concat({response:s,queryParams:l,layerMetadata:c});return{requests:n,validResponses:p.getValidResponses(d),responses:d}}),{requests:[],responses:[],validResponses:[]})})).startWith({requests:[],responses:[]}).combineLatest(e,(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return mn(mn({},t),{},{mapInfo:e,getFeatureInfoHandler:r})}))})),Sn=Object(l.branch)((function(e){var t=e.map,n=(t=void 0===t?{}:t).mapInfoControl;return void 0!==n&&n}),Object(l.compose)(vn,Object(l.withStateHandlers)({popups:[]},{onClick:function(e,t){var n=t.getFeatureInfoHandler,r=void 0===n?function(){}:n;return function(e,t){var n=e.rawPos,o=void 0===n?[]:n,i=dn(e,["rawPos"]);return r({point:i,layerInfo:t}),{popups:[{position:{coordinates:o},id:G()()}]}}},onPopupClose:function(){return function(){return{popups:[]}}}}),Object(l.withPropsOnChange)(["mapInfo","popups"],(function(e){var t=e.mapInfo,n=e.popups,r=e.options,o=(r=void 0===r?{}:r).mapOptions,a=(o=void 0===o?{}:o).mapInfoFormat,s=void 0===a?hn():a,l=t.responses,c=t.requests,u=t.validResponses,p=function(){return i.a.createElement(ln,{responses:l,requests:c,validResponses:u,format:s,showEmptyMessageGFI:!0,missingResponses:(c||[]).length-(l||[]).length})};return{popups:n.map((function(e){return mn(mn({},e),{},{component:p})}))}})),Object(l.withPropsOnChange)(["plugins","onPopupClose","popups"],(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.plugins,n=e.popups,r=e.onPopupClose,o=t.PopupSupport,a=t.tools,s=void 0===a?{}:a,l=dn(t,["PopupSupport","tools"]);if(!o)return{};var c=function(e){return i.a.createElement(o,pn({},e,{popups:n,onPopupClose:r}))};return{plugins:mn(mn({},l),{},{tools:mn(mn({},s),{},{popup:c})})}})))),wn=Object(l.withPropsOnChange)(["onClick","eventHandlers"],(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onClick,n=void 0===t?function(){}:t,r=e.eventHandlers,o=void 0===r?{}:r;return{eventHandlers:mn(mn({},o),{},{onClick:n})}})),On=n("./MapStore2/web/client/components/map/BaseMap.jsx"),jn=n.n(On),En=Object(l.compose)(Xt.a,Qt()(0),Vt.a,qt.a,Sn,wn,Kt.default,Jt.handlingUnsupportedProjection)(jn.a),xn=n("./MapStore2/web/client/components/misc/Portal.jsx"),Pn=n.n(xn),Cn=n("./MapStore2/web/client/components/misc/enhancers/tooltip.jsx"),Tn=n.n(Cn),Mn=n("./node_modules/react-resize-detector/lib/esm/hoc/withResizeDetector.js");function _n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function An(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_n(Object(n),!0).forEach((function(t){Rn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_n(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Rn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function In(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var Dn=Tn()(Pt.Button),kn=Object(l.compose)(Object(l.withState)("active","setActive",!1),Mn.a)((function(e){var t=e.id,n=e.map,r=void 0===n?{layers:[y]}:n,o=e.fit,a=e.editMap,s=void 0!==a&&a,l=e.onMapViewChanges,c=e.eventHandlers,p=e.expandable,d=void 0!==p&&p,f=e.active,m=e.setActive,b=e.width,g=e.height,h=e.size,v=e.showCaption,S=e.caption,w=r.data?r.data:r,O=w.layers,j=void 0===O?[]:O,E=w.mapOptions,x=void 0===E?{}:E,P=w.description,C=In(w,["layers","mapOptions","description"]),T=S||P,M=d?f?{zoomControl:!1,interactive:!0,mapOptions:{scrollWheelZoom:!0,interactions:{mouseWheelZoom:!0,dragPan:!0}}}:{zoomControl:!1,interactive:!1,mapOptions:{scrollWheelZoom:!1,interactions:{mouseWheelZoom:!1,dragPan:!1}}}:{mapOptions:x},_=s?{mapOptions:An(An({},x),{},{interactions:An(An({},x.interactions),{},{mouseWheelZoom:C.zoomControl})})}:M,A=C.mapInfoControl&&!(d&&!f),R=i.a.createElement(i.a.Fragment,null,i.a.createElement(En,{key:d?"overlay":"block",onMapViewChanges:l,eventHandlers:c,map:An(An({},C),{},{id:"media-".concat(t),resize:b+"-"+g+"_"+h,className:"aaaa",style:{cursor:A?"pointer":"default"}}),layers:j,tools:A?["popup"]:[],options:Object(u.i)(_)}),d&&!s&&i.a.createElement(Dn,{className:"ms-expand-media-button",onClick:function(){return m(!f)},tooltipId:f?"geostory.closeFullscreenMap":"geostory.showFullscreenMap",tooltipPosition:"left"},i.a.createElement(Pt.Glyphicon,{glyph:f?"1-close":"1-full-screen"})));return i.a.createElement("div",{className:"ms-media ms-media-map ".concat(x.zoomPosition||""),style:{objectFit:o}},f&&d?i.a.createElement(Pn.a,null,i.a.createElement("div",{className:"ms-expanded-media-container"},R)):R,v&&T&&i.a.createElement("div",{className:"ms-media-caption"},i.a.createElement("small",null,T)))})),Ln=n("./node_modules/react-player/lib/ReactPlayer.js"),Nn=n.n(Ln),Fn=n("./MapStore2/web/client/components/misc/Loader.jsx"),Un=n.n(Fn);function Gn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Bn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gn(Object(n),!0).forEach((function(t){zn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function zn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Vn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Vn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Hn=Object(Mn.a)((function(e){var t=e.src,n=e.width,r=e.height,a=e.resolution,s=e.thumbnail,l=e.controls,c=e.play,u=e.onPlay,p=void 0===u?function(){}:u,d=e.onStart,f=void 0===d?function(){}:d,m=e.fit,y=e.loop,b=e.volume,g=void 0===b?1:b,h=e.muted,v=c,S=Wn(Object(o.useState)(v),2),w=S[0],O=S[1],j=Wn(Object(o.useState)(),2),E=j[0],x=j[1],P=Wn(Object(o.useState)(c),2),C=P[0],T=P[1],M="cover"===m;Object(o.useEffect)((function(){!w&&v&&(O(!0),T(!0)),w&&f(w)}),[w,v]);var _,A=(_=n/r,M?_<a?[r*a,r]:[n,n/a]:"contain"===m?_<a?[n,n/a]:[r*a,r]:[n,n/a]),R="contain"===m||M?r:A[1],I=!M&&l,D=!!M||y;return i.a.createElement("div",{className:"ms-video",style:{position:"relative",width:n,height:R,display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"}},t&&i.a.createElement(i.a.Fragment,null,w&&i.a.createElement(Nn.a,{url:t,width:A[0],height:A[1],playing:v,loop:D,volume:g,muted:h,style:M?{left:"50%",top:"50%",transform:"translate(-50%, -50%)",position:"absolute"}:{},controls:I,pip:!1,fileConfig:{attributes:{controlsList:"nodownload",disablePictureInPicture:!0}},youtubeConfig:{playerVars:{controls:I?2:0,modestbranding:1,rel:0}},onReady:function(){return T(!1)},onError:function(e){return x(e)},onPause:function(){return p(!1)},onPlay:function(){return p(!0)}}),(!w||w&&(C||E))&&i.a.createElement("div",{className:"ms-video-cover",style:Bn(Bn({position:"absolute",width:A[0],height:A[1],display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(0, 0, 0, 1.0)"},!(C||E)&&{cursor:"pointer"}),!v&&s&&{backgroundImage:"url(".concat(s,")"),backgroundSize:M?"cover":"640px auto",backgroundPosition:"center",backgroundRepeat:"no-repeat"}),onClick:function(){O(!0),T(!0),p(!0)}},C&&i.a.createElement(Un.a,{size:70}),E&&"Error",!(C||E)&&!v&&i.a.createElement(Pt.Glyphicon,{glyph:"play",style:{fontSize:A[1]/4>100?100:A[1]/4,mixBlendMode:"difference",color:"#ffffff"}}))),!I&&i.a.createElement("div",{className:"ms-video-mask-cover",style:{position:"absolute",width:A[0],height:A[1]}}))})),qn=function(e){var t=e.id,n=e.src,r=e.resolution,a=void 0===r?16/9:r,s=e.autoplay,l=e.inView,c=e.description,p=e.showCaption,d=e.caption,f=void 0===d?c:d,m=e.thumbnail,y=e.credits,b=e.controls,g=void 0===b||b,h=e.fit,v=e.loop,S=e.muted,w=e.onPlay,O=void 0===w?function(){}:w,j=e.mode,E=e.containerInView,x=(void 0===E||E)&&l,P=Wn(Object(o.useState)(!1),2),C=P[0],T=P[1],M=function(e){T(e),O(e)};return Object(o.useEffect)((function(){j===u.e.EDIT&&M(!1)}),[j]),Object(o.useEffect)((function(){j===u.e.VIEW&&x&&(s||"cover"===h)&&M(!0)}),[x,s,h,j]),Object(o.useEffect)((function(){j===u.e.VIEW&&!x&&C&&M(!1)}),[x,C,j]),i.a.createElement("div",{id:t,key:"".concat(t,"-").concat(h,"-").concat(j),className:"ms-media ms-media-video"},i.a.createElement(Hn,{src:n,play:C&&j===u.e.VIEW,resolution:a,thumbnail:m,controls:g&&j===u.e.VIEW,onPlay:M,fit:h,loop:v,muted:S}),y&&i.a.createElement("div",{className:"ms-media-credits"},i.a.createElement("small",null,y)),p&&f&&i.a.createElement("div",{className:"ms-media-caption"},i.a.createElement("small",null,f)))};function Yn(){return(Yn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Qn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Kn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qn(Object(n),!0).forEach((function(t){Zn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Zn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Jn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Jn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function $n(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var er=zt,tr={image:zt,map:kn,video:qn},nr=function(){return i.a.createElement("div",{className:"ms-media-error"},i.a.createElement(Pt.Glyphicon,{glyph:"exclamation-sign"}))},rr=function(){return i.a.createElement("div",{className:"ms-media-loader"},i.a.createElement(Un.a,{size:52}))},or=function(e){var t=e.debounceTime,n=e.mediaViewer,r=$n(e,["debounceTime","mediaViewer"]),a=Xn(Object(o.useState)({}),2),s=a[0],l=a[1],c=void 0===s[r.id]||s[r.id],u=n||tr[r.mediaType||r.type]||er;return r.lazy?i.a.createElement(xt,{key:r.id,id:r.id,debounceTime:t,loading:c,onLoad:function(e){return l(Kn(Kn({},s),{},Zn({},e,!1)))},loaderComponent:rr},i.a.createElement(u,Yn({},r,{type:r.mediaType||r.type,loaderComponent:rr,errorComponent:nr}))):i.a.createElement(u,Yn({},r,{key:r.id,type:r.mediaType||r.type,loaderComponent:rr,errorComponent:nr}))};or.propTypes={id:it.a.string,lazy:it.a.bool,mediaType:it.a.string,type:it.a.string,debounceTime:it.a.number},or.defaultProps={id:"",lazy:!0,mediaType:"",type:""};var ir=or,ar=n("./MapStore2/web/client/components/misc/StandardDialog.jsx"),sr=n.n(ar),lr=n("./MapStore2/web/client/components/I18N/Message.jsx"),cr=n.n(lr),ur=Object(l.branch)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.src,n=void 0===t?"":t,r=e.viewHeight,o=e.size;return!n||!r||!o}),$e()((function(){return!0}),(function(){return{glyph:"code"}}))),pr=Object(l.compose)(ur)((function(e){var t=e.src,n=e.size,r=e.viewHeight;return i.a.createElement("div",{className:"ms-webpage-wrapper"},i.a.createElement("iframe",{src:t,height:"".concat(Object(u.q)(n,r),"px")}))})),dr=n("./MapStore2/web/client/utils/URLUtils.js"),fr=n("./MapStore2/web/client/utils/ConfigUtils.js");function mr(e){return(mr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function br(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gr(e,t){return(gr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function hr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=wr(e);if(t){var o=wr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return vr(this,n)}}function vr(e,t){return!t||"object"!==mr(t)&&"function"!=typeof t?Sr(e):t}function Sr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wr(e){return(wr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Or(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var jr=function(){return i.a.createElement("div",{className:"ms-media-loader"},i.a.createElement(Un.a,{size:52}))},Er=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gr(e,t)}(a,e);var t,n,r,o=hr(a);function a(){var e;yr(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Or(Sr(e=o.call.apply(o,[this].concat(n))),"state",{url:e.props.src||"",error:!1,loading:!0}),Or(Sr(e),"updateURL",(function(t){var n=t.target.value;e.setState({url:n})})),Or(Sr(e),"save",(function(){var t=e.state.url,n=!Object(dr.isValidURL)(t,Object(fr.getConfigProp)("GeoStoryValidIframeURLRegex"));e.setState({error:n}),n||e.props.onChange(t)})),e}return t=a,(n=[{key:"render",value:function(){var e=this,t=this.props,n=t.onClose,r=t.editURL,o=this.state,a=o.url,s=o.error;return i.a.createElement(i.a.Fragment,null,i.a.createElement(Pn.a,null,i.a.createElement(sr.a,{modal:!0,show:r,onClickOut:function(e){return e.preventDefault()&&e.stopPropagation()},title:i.a.createElement(cr.a,{msgId:"geostory.webPageCreator.title"}),onClose:n,id:"web-page-creator",footer:i.a.createElement(Pt.Button,{bsSize:"small",onClick:this.save},i.a.createElement(cr.a,{msgId:"geostory.webPageCreator.saveButton"}))},s&&i.a.createElement("div",{className:"dropzone-errorBox alert-danger"},i.a.createElement(cr.a,{msgId:"geostory.webPageCreator.error"})),i.a.createElement(Pt.FormGroup,{controlId:"WEBPAGE_URL",validationState:s&&"error"},i.a.createElement(Pt.ControlLabel,null,i.a.createElement(cr.a,{msgId:"geostory.webPageCreator.url.label"})),i.a.createElement(Pt.FormControl,{label:"URL",type:"text",value:a,onChange:this.updateURL,required:!0})))),this.props.lazy?i.a.createElement(xt,{key:this.props.id,id:this.props.id,debounceTime:this.props.debounceTime,loading:this.state.loading,onLoad:function(){return e.setState({loading:!1})},loaderComponent:jr},i.a.createElement(pr,this.props)):i.a.createElement(pr,this.props))}}])&&br(t.prototype,n),r&&br(t,r),a}(i.a.PureComponent);Or(Er,"propTypes",{editURL:it.a.bool,onClose:it.a.func,onChange:it.a.func,src:it.a.string,id:it.a.string,debounceTime:it.a.number,lazy:it.a.bool}),Or(Er,"defaultProps",{lazy:!0});var xr=Object(l.compose)(Object(l.withHandlers)({onClose:function(e){var t=e.update,n=void 0===t?function(){}:t;return function(){return n("editURL",!1,"merge")}}}))(Er),Pr=Object(a.connect)(null,{onChange:d.setWebPageUrl})(xr);function Cr(){return(Cr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Tr(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var Mr=function(e){var t=e.type;return i.a.createElement("div",{className:"ms-content ms-content-unknown"},'warning: unknown content type "'.concat(t,'"'))},_r=function(e){var t=e.type,n=Tr(e,["type"]),r=function(e){switch(e){case u.a.TEXT:return ht;case u.a.MEDIA:case u.d.IMAGE:case u.d.MAP:case u.d.VIDEO:return ir;case u.a.WEBPAGE:return Pr;default:return Mr}}(t);return i.a.createElement(r,Cr({type:t},n))};function Ar(e){return(Ar="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ir(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Dr(e,t){return(Dr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function kr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Nr(e);if(t){var o=Nr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lr(this,n)}}function Lr(e,t){return!t||"object"!==Ar(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Nr(e){return(Nr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ur=n("./node_modules/react/index.js"),Gr=n("./node_modules/prop-types/index.js"),Br=n("./node_modules/react-bootstrap/es/index.js"),zr=Br.Popover,Wr=Br.OverlayTrigger,Vr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Dr(e,t)}(i,e);var t,n,r,o=kr(i);function i(){return Rr(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){var e=this;return Ur.createElement("div",{ref:function(t){e.parentNode=t&&t.parentNode},className:this.props.className,style:this.props.style},Ur.createElement(Wr,{ref:function(t){e.trigger=t},trigger:["click"],container:this.parentNode,placement:this.props.placement,rootClose:!0,overlay:Ur.createElement(zr,{id:this.props.id,title:this.props.title},this.props.content)},this.props.children))}}])&&Ir(t.prototype,n),r&&Ir(t,r),i}(Ur.Component);Fr(Vr,"propTypes",{id:Gr.string,style:Gr.object,className:Gr.string,placement:Gr.string,title:Gr.node,content:Gr.node}),Fr(Vr,"defaultProps",{id:""});var Hr=Vr,qr=n("./MapStore2/web/client/components/misc/toolbar/Toolbar.jsx"),Yr=n.n(qr);function Qr(e){return(Qr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Kr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Zr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kr(Object(n),!0).forEach((function(t){oo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Xr(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function Jr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function eo(e,t){return(eo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function to(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ro(e);if(t){var o=ro(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return no(this,n)}}function no(e,t){return!t||"object"!==Qr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ro(e){return(ro=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var io=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&eo(e,t)}(a,e);var t,n,r,o=to(a);function a(){return Jr(this,a),o.apply(this,arguments)}return t=a,(n=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){!this.trigger||e.containerWidth===this.props.containerWidth&&e.containerHeight===this.props.containerHeight||this.trigger.hide()}},{key:"render",value:function(){var e=this;return i.a.createElement(Hr,{className:"add-bar",content:i.a.createElement(Yr.a,{btnDefaultProps:{className:"square-button btn-tray"},buttons:this.props.buttons.map((function(t){var n=t.onClick,r=void 0===n?function(){}:n;return Zr(Zr({},Xr(t,["onClick"])),{},{onClick:function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];r.apply(void 0,n),e.trigger.hide(),n[0]&&n[0].preventDefault&&n[0].preventDefault()}})}))}),ref:function(t){t&&(e.trigger=t.trigger)},placement:"top"},i.a.createElement(Pt.Button,{className:this.props.addButtonClassName},i.a.createElement(Pt.Glyphicon,{glyph:"plus"})))}}])&&$r(t.prototype,n),r&&$r(t,r),a}(i.a.Component);oo(io,"propTypes",{id:it.a.string,type:it.a.string,buttons:it.a.array,containerWidth:it.a.oneOfType([it.a.number,it.a.string]),containerHeight:it.a.oneOfType([it.a.number,it.a.string]),addButtonClassName:it.a.string}),oo(io,"defaultProps",{id:"",type:"",buttons:[],containerWidth:0,containerHeight:0,addButtonClassName:""});var ao=io;function so(e){return function(e){if(Array.isArray(e))return lo(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return lo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lo(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function co(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function uo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?co(Object(n),!0).forEach((function(t){po(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):co(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function po(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fo(){return(fo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function mo(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var yo=function(e){var t=e.viewWidth,n=e.viewHeight,r=e.className,o=e.contentProps,a=void 0===o?{}:o,s=e.addButtons,l=void 0===s?[]:s,c=e.tools,p=void 0===c?[]:c,d=e.contents,f=void 0===d?[]:d,m=e.ContentComponent,y=void 0===m?_r:m,b=e.mode,g=e.sectionType,h=e.editMedia,v=void 0===h?function(){}:h,S=e.editWebPage,w=void 0===S?function(){}:S,O=e.add,j=void 0===O?function(){}:O,E=e.update,x=void 0===E?function(){}:E,P=e.remove,C=void 0===P?function(){}:P,T=e.bubblingTextEditing,M=void 0===T?function(){}:T,_=e.storyTheme;return i.a.createElement("div",{className:r},f.reduce((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0,o=r.id,s=mo(r,["id"]),c=[i.a.createElement(y,fo({id:o,key:"".concat(o,"-content"),mode:b,viewWidth:t,sectionType:g,viewHeight:n,editMedia:function(e){for(var t=e.path,n=void 0===t?"":t,r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return v.apply(void 0,[{path:'contents[{"id": "'.concat(o,'"}]')+n}].concat(i))},editWebPage:function(e){for(var t=e.path,n=void 0===t?"":t,r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return w.apply(void 0,[{path:'contents[{"id": "'.concat(o,'"}]')+n}].concat(i))},add:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return j.apply(void 0,['contents[{"id": "'.concat(o,'"}].')+e].concat(n))},update:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return x.apply(void 0,['contents[{"id": "'.concat(o,'"}].')+e].concat(n))},remove:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return C.apply(void 0,['contents[{"id": "'.concat(o,'"}]')+(e?"."+e:"")].concat(n))}},a,s,{storyTheme:_,bubblingTextEditing:M,tools:p&&p[s.type]}))];return b===u.e.EDIT&&l.length>0&&c.push(i.a.createElement(ao,{key:"".concat(o,"-content-add-buttons"),containerWidth:t,containerHeight:n,buttons:l.map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return uo(uo({},e),{},{onClick:function(){return j("contents",o,e.template)}})}))})),[].concat(so(e),c)}),[]))};n("./node_modules/intersection-observer/intersection-observer.js");function bo(){return(bo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function go(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var ho=function(e){return Object(l.compose)(Object(l.withHandlers)({onVisibilityChange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,n=e.onVisibilityChange,r=void 0===n?function(){}:n;return function(e,n){return r({id:t,visible:e,entry:n})}}}),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onVisibilityChange,n=(e.rootSelector,go(e,["onVisibilityChange","rootSelector"]));return function(e){return function(r){var o=r.intersectionObserverOptions,a=void 0===o?{}:o,s=r.onVisibilityChange,l=go(r,["intersectionObserverOptions","onVisibilityChange"]),c=t||s;return i.a.createElement(vt.a,bo({},n,a,{onChange:c}),(function(t){var n=t.inView,r=t.ref,o=t.entry;return i.a.createElement(e,bo({},l,{inView:n,inViewRef:r,inViewEntry:o}))}))}}}(e))},vo=n("./MapStore2/web/client/components/misc/toolbar/ToolbarButton.jsx"),So=n.n(vo),wo=n("./MapStore2/web/client/components/misc/enhancers/buttonTooltip.jsx"),Oo=n.n(wo),jo=n("./node_modules/lodash/find.js"),Eo=n.n(jo),xo=n("./node_modules/lodash/isFunction.js"),Po=n.n(xo),Co=n("./node_modules/lodash/isEqual.js"),To=n.n(Co);function Mo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return _o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ao=Oo()(Pt.DropdownButton);function Ro(e){var t=e.value,n=e.options,r=void 0===n?[]:n,a=e.onSelect,s=void 0===a?function(){}:a,l=e.glyph,c=void 0===l?"":l,u=e.tooltipId,p=e.pullRight,d=void 0!==p&&p,f=e.className,m=void 0===f?"square-button-md no-border":f,y=e.disabled,b=e.noTooltipWhenDisabled,g=void 0!==b&&b,h=e.hideMenuItem,v=void 0===h?function(){return!1}:h,S=e.shouldClose,w=Mo(Object(o.useState)(!1),2),O=w[0],j=w[1],E=Mo(Object(o.useState)(!1),2),x=E[0],P=E[1],T=(Eo()(r,(function(e){return To()(e.value,t)}))||{}).glyph;return Object(o.useEffect)((function(){y&&j(!1)}),[y]),i.a.createElement(Ao,{noCaret:!0,open:O,noTooltipWhenDisabled:g,tooltipId:u,pullRight:d,className:m,disabled:y,title:i.a.createElement(Pt.Glyphicon,{glyph:T||c}),onToggle:function(e,n,r){return x||"select"===(null==r?void 0:r.source)||S&&!S(t,n)?null:j(e)}},r.map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(null==e?void 0:e.Component)||Pt.MenuItem;return v(t,e)?null:i.a.createElement(n,{key:e.value,selected:t,value:e.value,active:Po()(null==e?void 0:e.isActive)&&e.isActive(t)||!C()(t)&&t===e.value,onClick:(null==e?void 0:e.Component)?s:function(){return s(e.value)},onActive:function(e){return P(e)}},e.label)})))}var Io=n("./MapStore2/web/client/components/misc/ConfirmDialog.jsx"),Do=n.n(Io);function ko(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var Lo=Object(l.compose)(Object(l.withProps)((function(e){var t=e.setConfirming;return{onClose:function(){return t(!1)}}})))((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.confirmYes,n=void 0===t?i.a.createElement(cr.a,{msgId:"yes"}):t,r=e.confirmNo,o=void 0===r?i.a.createElement(cr.a,{msgId:"no"}):r,a=e.confirmTitle,s=void 0===a?i.a.createElement(cr.a,{msgId:"confirm"}):a,l=e.confirmContent,c=e.confirmButtonBSStyle,u=void 0===c?"primary":c,p=e.show,d=void 0!==p&&p,f=e.confirmModal,m=void 0===f||f,y=e.draggable,b=void 0!==y&&y,g=e.onClose,h=void 0===g?function(){}:g,v=e.onConfirm,S=void 0===v?function(){}:v;return d?i.a.createElement(Pn.a,null,i.a.createElement("div",{className:"with-confirm-modal"},i.a.createElement(Do.a,{draggable:b,show:d,modal:m,onClose:h,onConfirm:S,title:s,confirmButtonContent:n,closeText:o,confirmButtonBSStyle:u,closeGlyph:"1-close"},l))):null})),No=function(e){return function(t){var n=t.confirming,r=t.confirmYes,o=t.confirmNo,a=t.confirmTitle,s=t.confirmContent,l=t.confirmModal,c=t.draggable,u=t.onConfirm,p=t.setConfirming,d=ko(t,["confirming","confirmYes","confirmNo","confirmTitle","confirmContent","confirmModal","draggable","onConfirm","setConfirming"]);return i.a.createElement(i.a.Fragment,null,i.a.createElement(Lo,{show:n,setConfirming:p,confirmYes:r,confirmNo:o,confirmTitle:a,confirmContent:s,confirmModal:l,draggable:c,onConfirm:u}),i.a.createElement(e,d))}},Fo=function(e){return Object(l.compose)(Object(l.withState)("confirming","setConfirming",!1),Object(l.withHandlers)({onClick:function(e){var t=e.setConfirming,n=void 0===t?function(){}:t,r=e.onClick,o=void 0===r?function(){}:r,i=e.confirmPredicate,a=void 0===i||i;return function(){a?n(!0):o.apply(void 0,arguments)}},onConfirm:function(e){var t=e.onClick,n=void 0===t?function(){}:t,r=e.setConfirming,o=void 0===r?function(){}:r;return function(){o(!1),n.apply(void 0,arguments)}}}),No)(e)},Uo=n("./MapStore2/web/client/components/style/ColorSelector.jsx"),Go=n("./node_modules/lodash/isObject.js"),Bo=n.n(Go),zo=n("./node_modules/tinycolor2/tinycolor.js"),Wo=n.n(zo),Vo=n("./MapStore2/web/client/components/misc/switch/SwitchButton.jsx"),Ho=n.n(Vo),qo=n("./MapStore2/web/client/components/I18N/HTML.jsx"),Yo=n.n(qo);function Qo(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function Ko(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Zo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ko(Object(n),!0).forEach((function(t){Xo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ko(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Xo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Jo=Tn()(Pt.Button);function $o(e){var t=e.themeStyle,n=e.disableBackgroundAlpha,r=e.disableTextColor,a=e.disableShadow,s=e.onChange,l=void 0===s?function(){}:s,c=e.onOpen,u=e.placement,p=Object(o.useRef)(),d=null==t?void 0:t.backgroundColor,f=null==t?void 0:t.color,m=!r&&d&&f&&!Wo.a.isReadable(f,d)?Wo.a.mostReadable(d,[f,"#000000","#ffffff"],{includeFallbackColors:!0}).toHexString():null;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"ms-custom-theme-picker-field"},i.a.createElement("div",null,i.a.createElement(cr.a,{msgId:"geostory.customizeTheme.backgroundColorLabel"})),i.a.createElement("div",null,i.a.createElement(Uo.default,{placement:u,key:d,onOpen:c,color:d,format:n?"hex":"rgb",disableAlpha:n,presetColors:[],onChangeColor:function(e){var n=Wo()(e).isLight()?Wo()(e).darken(10).toHexString():Wo()(e).lighten(15).toHexString(),o=!r&&!(null==t?void 0:t.color)&&{color:Wo.a.mostReadable(e,["#000000","#ffffff"],{includeFallbackColors:!0}).toHexString()};l(Zo(Zo({},t),{},{backgroundColor:e,borderColor:n},!r&&o))}}))),!r&&i.a.createElement("div",{className:"ms-custom-theme-picker-field"},i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement(cr.a,{msgId:"geostory.customizeTheme.textColorLabel"})),i.a.createElement(Hr,{className:"ms-custom-theme-picker-popover",ref:function(e){e&&(p.current=e.trigger)},placement:"top",content:i.a.createElement(i.a.Fragment,null,i.a.createElement(Yo.a,{msgId:"geostory.customizeTheme.alternativeTextColorPopover",msgParams:{color:m}}),i.a.createElement(Jo,{bsSize:"xs",bsStyle:"primary",style:{margin:"auto",display:"block"},onClick:function(){var e,n;l(Zo(Zo({},t),{},{color:m})),null===(e=p.current)||void 0===e||null===(n=e.hide)||void 0===n||n.call(e)}},i.a.createElement(cr.a,{msgId:"geostory.customizeTheme.useAlternativeTextColor"})))},m&&i.a.createElement(Jo,{className:"square-button-md no-border",style:{display:m?"block":"none"}},i.a.createElement(Pt.Glyphicon,{glyph:"exclamation-mark"}))||i.a.createElement("div",null))),i.a.createElement("div",null,i.a.createElement(Uo.default,{placement:u,key:f,color:f,onOpen:c,format:"hex",disableAlpha:!0,presetColors:[],onChangeColor:function(e){l(Zo(Zo({},t),{},{color:e}))}}))),!a&&i.a.createElement("div",{className:"ms-custom-theme-picker-field"},i.a.createElement("div",null,i.a.createElement(cr.a,{msgId:"geostory.customizeTheme.shadowLabel"})),i.a.createElement("div",null,i.a.createElement(Ho.a,{checked:null==t?void 0:t.boxShadow,onChange:function(){var e=t||{},n=e.boxShadow,r=(e.MozBoxShadow,e.WebkitBoxShadow,Qo(e,["boxShadow","MozBoxShadow","WebkitBoxShadow"]));l(n?Zo({},r):Zo(Zo({},r),{},{boxShadow:"0 14px 28px rgba(0,0,0,0.25), 0 10px 10px rgba(0,0,0,0.22)"}))}}))))}function ei(e){var t=e.selected,n=e.value,r=e.storyTheme,o=e.onUpdate,a=e.onActive,s=e.disableBackgroundAlpha,l=e.disableTextColor,c=e.disableShadow,u=function(e,r){var i=Bo()(t)&&t;return o("theme",Zo(Zo({},i),{},r?Xo({value:e},n,Zo({},r)):{value:e}))},p=r||{},d=p.color,f=p.backgroundColor,m=f&&{backgroundColor:f},y=Zo(Zo({},!l&&d&&{color:d}),m),b=(null==t?void 0:t.value)===n,g=(null==t?void 0:t[n])||y;return i.a.createElement(i.a.Fragment,null,b?i.a.createElement("div",{className:"ms-custom-theme-picker-menuitem-header"},i.a.createElement("div",null,i.a.createElement(cr.a,{msgId:"geostory.contentToolbar.customizeThemeLabel"})),i.a.createElement(Jo,{tooltipId:"geostory.contentToolbar.customizeThemeRemoveLabel",className:"square-button-md no-border",onClick:function(e){e.stopPropagation(),u("")}},i.a.createElement(Pt.Glyphicon,{glyph:"trash"}))):i.a.createElement(i.a.Fragment,null,i.a.createElement(Pt.MenuItem,{active:b,onClick:function(){return u(n,g)}},i.a.createElement(cr.a,{msgId:"geostory.contentToolbar.customizeThemeLabel"}))),b&&i.a.createElement("div",{className:"ms-custom-theme-picker-menuitem"},i.a.createElement($o,{disableBackgroundAlpha:s,disableTextColor:l,disableShadow:c,themeStyle:g,onChange:function(e){return u(n,e)},onOpen:a})))}function ti(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ni(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ti(Object(n),!0).forEach((function(t){ri(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ti(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ri(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oi(){return(oi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var ii=Fo(So.a),ai=function(e){var t=e.editMap,n=void 0!==t&&t,r=e.align,o=e.sectionType,a=e.size,s=e.update,l=void 0===s?function(){}:s,c=e.filterOptions,u=e.pullRight;return i.a.createElement(Ro,{value:a,noTooltipWhenDisabled:!0,disabled:n,glyph:"resize-horizontal",pullRight:u||("right"===r||"full"===a||"large"===a)&&!o,tooltipId:"geostory.contentToolbar.contentSize",options:[{value:"small",glyph:"size-small",label:i.a.createElement(cr.a,{msgId:"geostory.contentToolbar.smallSizeLabel"})},{value:"medium",glyph:"size-medium",label:i.a.createElement(cr.a,{msgId:"geostory.contentToolbar.mediumSizeLabel"})},{value:"large",glyph:"size-large",label:i.a.createElement(cr.a,{msgId:"geostory.contentToolbar.largeSizeLabel"})},{value:"full",glyph:"size-extra-large",label:i.a.createElement(cr.a,{msgId:"geostory.contentToolbar.fullSizeLabel"})}].filter((function(e){return!c||c(e)})),onSelect:function(e){return l("size",e)}})},si=function(e){var t=e.editMap,n=void 0!==t&&t,r=e.align,o=e.sectionType,a=e.size,s=e.update,l=void 0===s?function(){}:s;return i.a.createElement(Ro,{value:r,noTooltipWhenDisabled:!0,disabled:"full"===a||n,glyph:"align-center",pullRight:("right"===r||"full"===a||"large"===a)&&!o,tooltipId:"geostory.contentToolbar.contentAlign",options:[{value:"left",label:i.a.createElement(cr.a,{msgId:"geostory.contentToolbar.leftAlignLabel"}),glyph:"align-left"},{value:"center",label:i.a.createElement(cr.a,{msgId:"geostory.contentToolbar.centerAlignLabel"}),glyph:"align-center"},{value:"right",label:i.a.createElement(cr.a,{msgId:"geostory.contentToolbar.rightAlignLabel"}),glyph:"align-right"}],onSelect:function(e){return l("align",e)}})},li=function(e){var t=e.editMap,n=void 0!==t&&t,r=e.theme,o=e.storyTheme,a=e.align,s=e.sectionType,l=e.update,c=void 0===l?function(){}:l,u=e.themeProps,p=e.size;return i.a.createElement(Ro,{value:r,noTooltipWhenDisabled:!0,pullRight:("right"===a||"full"===p||"large"===p)&&!s,glyph:"dropper",tooltipId:"geostory.contentToolbar.contentTheme",disabled:n,shouldClose:function(e,t){var n,r;return Bo()(e)&&"ms-color-picker-cover"!==(null==t||null===(n=t.target)||void 0===n||null===(r=n.getAttribute)||void 0===r?void 0:r.call(n,"class"))||x()(e)||void 0===e},hideMenuItem:function(e,t){return"custom"===(null==e?void 0:e.value)&&"custom"!==(null==t?void 0:t.value)},options:[{value:"",isActive:function(e){return void 0===e||""===e||Bo()(e)&&(void 0===e.value||""===e.value)},label:i.a.createElement(cr.a,{msgId:"geostory.contentToolbar.defaultThemeLabel"})},{value:"bright",isActive:function(e){return"bright"===(null==e?void 0:e.value)||"bright"===e},label:i.a.createElement(cr.a,{msgId:"geostory.contentToolbar.brightThemeLabel"})},{value:"dark",isActive:function(e){return"dark"===(null==e?void 0:e.value)||"dark"===e},label:i.a.createElement(cr.a,{msgId:"geostory.contentToolbar.darkThemeLabel"})},{value:"custom",Component:function(e){return i.a.createElement(ei,oi({},e,{disableBackgroundAlpha:null==u?void 0:u.disableBackgroundAlpha,disableShadow:null==u?void 0:u.disableShadow,disableTextColor:null==u?void 0:u.disableTextColor,onUpdate:c,storyTheme:o}))}}],onSelect:function(e){return c("theme",ni(ni({},Bo()(r)&&r),{},{value:e}))}})},ci=function(e){var t=e.editMap,n=void 0!==t&&t,r=e.path,o=e.remove,a=void 0===o?function(){}:o;return i.a.createElement(ii,{glyph:"trash",visible:!0,noTooltipWhenDisabled:!0,disabled:n,className:"square-button-md no-border",tooltipId:"geostory.contentToolbar.remove",confirmTitle:i.a.createElement(cr.a,{msgId:"geostory.contentToolbar.removeConfirmTitle"}),confirmContent:i.a.createElement(cr.a,{msgId:"geostory.contentToolbar.removeConfirmContent"}),onClick:function(){a(r)}})};function ui(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ui(Object(n),!0).forEach((function(t){di(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ui(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function di(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fi(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var mi={size:function(e){return{renderButton:i.a.createElement(ai,e)}},align:function(e){return{renderButton:i.a.createElement(si,e)}},theme:function(e){return{renderButton:i.a.createElement(li,e)}},fit:function(e){var t=e.editMap,n=void 0!==t&&t,r=e.fit,o=e.update,i=void 0===o?function(){}:o;return{value:r,glyph:"contain"===r?"fit-cover":"fit-contain",disabled:n,visible:!0,tooltipId:"contain"===r?"geostory.contentToolbar.cover":"geostory.contentToolbar.fit",onClick:function(){return i("fit","contain"===r?"cover":"contain")}}},cover:function(e){var t=e.editMap,n=void 0!==t&&t,r=e.cover,o=e.updateSection,i=void 0===o?function(){}:o;return{value:r,glyph:r?"height-auto":"height-view",visible:!0,disabled:n,tooltipId:r?"geostory.contentToolbar.contentHeightAuto":"geostory.contentToolbar.contentHeightView",onClick:function(){return i({cover:!r},"merge")}}},editMedia:function(e){var t=e.editMap,n=void 0!==t&&t,r=e.path,o=e.editMedia,i=void 0===o?function(){}:o;return{glyph:"pencil","data-button":"pencil",visible:!0,disabled:n,tooltipId:"geostory.contentToolbar.editMedia",onClick:function(){i({path:r})}}},remove:function(e){return{renderButton:i.a.createElement(ci,e)}},editMap:function(e){var t=e.editMap,n=void 0!==t&&t,r=e.update,o=void 0===r?function(){}:r;return{glyph:"map-edit",visible:!0,disabled:n,bsStyle:n?"success":"default",tooltipId:"geostory.contentToolbar.editMap",onClick:function(){o("editMap",!n)}}},editURL:function(e){var t=e.editURL,n=void 0!==t&&t,r=e.path,o=e.editWebPage,i=void 0===o?function(){}:o;return{glyph:"pencil",visible:!0,disabled:n,bsStyle:n?"success":"default",tooltipId:"geostory.contentToolbar.editURL",onClick:function(){i({path:r})}}},muted:function(e){var t=e.update,n=e.muted;return{glyph:n?"muted":"audio",visible:!0,active:!n,tooltipId:n?"geostory.contentToolbar.enableAudio":"geostory.contentToolbar.disableAudio",onClick:function(){t("muted",!n)}}},autoplay:function(e){var t=e.update,n=e.autoplay;return{glyph:"play-circle",visible:!("cover"===e.fit),active:n,tooltipId:n?"geostory.contentToolbar.disableAutoplay":"geostory.contentToolbar.enableAutoplay",onClick:function(){t("autoplay",!n)}}},loop:function(e){var t=e.update,n=e.loop;return{glyph:"loop",visible:!("cover"===e.fit),active:n,tooltipId:n?"geostory.contentToolbar.disableLoop":"geostory.contentToolbar.enableLoop",onClick:function(){t("loop",!n)}}},showCaption:function(e){var t=e.editMap,n=void 0!==t&&t,r=e.update,o=e.showCaption,i=e.caption,a=e.description;return{glyph:"caption",visible:!(!i&&!a),disabled:n,active:!(!o||n),tooltipId:o?"geostory.contentToolbar.hideCaption":"geostory.contentToolbar.showCaption",onClick:function(){r("showCaption",!o)}}}};function yi(e){var t=e.tools,n=void 0===t?[]:t,r=fi(e,["tools"]);return i.a.createElement("div",{className:"ms-content-toolbar"},i.a.createElement(Yr.a,{btnDefaultProps:{className:"square-button-md no-border",noTooltipWhenDisabled:!0},buttons:n.filter((function(e){return(null==e?void 0:e.id)&&mi[e.id]||mi[e]})).map((function(e){return(null==e?void 0:e.id)&&mi[e.id](pi(pi({},r),e))||mi[e](r)}))}))}function bi(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var gi=function(e){var t=e.id,n=e.inViewRef,r=e.children,o=e.type,a=e.contentWrapperStyle,s=e.contentToolbar,l=e.mode,c=bi(e,["id","inViewRef","children","type","contentWrapperStyle","contentToolbar","mode"]),p=s||yi;return i.a.createElement("div",{id:t,ref:n,style:a,className:"ms-content ms-content-".concat(o).concat(Object(u.l)(c))},i.a.createElement("div",{className:"ms-content-body",style:Object(u.p)(c)},l===u.e.EDIT&&i.a.createElement(p,c),r))};function hi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var vi=Object(l.compose)(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return l.nest.apply(void 0,t.concat([e]))}}(gi),Object(l.setDisplayName)("ColumnContent"))(_r),Si=function(e){return{id:"size",filterOptions:function(e){return"full"!==e.value},pullRight:e}},wi=Object(l.compose)(Object(l.branch)((function(e){var t=e.type;return e.sectionType===u.g.IMMERSIVE&&t===u.a.COLUMN}),ho({threshold:[0,.25,.5,.75]})),function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return l.nest.apply(void 0,t.concat([e]))}}(gi),Object(l.setDisplayName)("SectionContent"),Object(l.branch)((function(e){return e.type===u.a.COLUMN}),Object(l.renderComponent)((function(e){var t,n=e.viewWidth,r=e.viewHeight,o=e.contents,a=void 0===o?[]:o,s=e.mode,l=e.add,c=void 0===l?function(){}:l,p=e.editMedia,d=void 0===p?function(){}:p,f=e.editWebPage,m=void 0===f?function(){}:f,y=e.update,b=void 0===y?function(){}:y,g=e.remove,h=void 0===g?function(){}:g,v=e.bubblingTextEditing,S=void 0===v?function(){}:v,w=e.expandable,O=e.mediaViewer,j=e.contentToolbar;return i.a.createElement(yo,{className:"ms-column-contents",ContentComponent:vi,contents:a,mode:s,add:c,editMedia:d,editWebPage:m,update:b,remove:h,viewWidth:n,viewHeight:r,bubblingTextEditing:S,contentProps:{expandable:w,mediaViewer:O,contentToolbar:j},tools:(t={},hi(t,u.a.TEXT,["remove"]),hi(t,u.d.IMAGE,["editMedia",Si(),"showCaption","remove"]),hi(t,u.d.MAP,["editMedia","editMap",Si(!0),"showCaption","remove"]),hi(t,u.a.WEBPAGE,["editURL",Si(!0),"remove"]),hi(t,u.d.VIDEO,["editMedia","muted","autoplay","loop","showCaption","remove"]),t),addButtons:[{glyph:"sheet",tooltipId:"geostory.addTextContent",template:u.a.TEXT},{glyph:"picture",tooltipId:"geostory.addMediaContent",template:u.a.MEDIA},{glyph:"webpage",tooltipId:"geostory.addWebPageContent",template:u.a.WEBPAGE}]})}))))(_r),Oi=Object(l.compose)(Object(l.defaultProps)({ContentComponent:wi}),Object(l.withHandlers)({editMedia:function(e){var t=e.editMedia,n=void 0===t?function(){}:t,r=e.sectionId;return function(e){for(var t=e.path,o=arguments.length,i=new Array(o>1?o-1:0),a=1;a<o;a++)i[a-1]=arguments[a];return n.apply(void 0,[{path:'sections[{"id": "'.concat(r,'"}].')+t}].concat(i))}},editWebPage:function(e){var t=e.editWebPage,n=void 0===t?function(){}:t,r=e.sectionId;return function(e){for(var t=e.path,o=arguments.length,i=new Array(o>1?o-1:0),a=1;a<o;a++)i[a-1]=arguments[a];return n.apply(void 0,[{path:'sections[{"id": "'.concat(r,'"}].')+t}].concat(i))}},add:function(e){var t=e.add,n=void 0===t?function(){}:t,r=e.sectionId;return function(e){for(var t=arguments.length,o=new Array(t>1?t-1:0),i=1;i<t;i++)o[i-1]=arguments[i];return n.apply(void 0,['sections[{"id": "'.concat(r,'"}].')+e].concat(o))}},update:function(e){var t=e.update,n=void 0===t?function(){}:t,r=e.sectionId;return function(e){for(var t=arguments.length,o=new Array(t>1?t-1:0),i=1;i<t;i++)o[i-1]=arguments[i];return n.apply(void 0,['sections[{"id": "'.concat(r,'"}].')+e].concat(o))}},remove:function(e){var t=e.remove,n=void 0===t?function(){}:t,r=e.sectionId;return function(e){for(var t=arguments.length,o=new Array(t>1?t-1:0),i=1;i<t;i++)o[i-1]=arguments[i];return n.apply(void 0,['sections[{"id": "'.concat(r,'"}].')+e].concat(o))}}}),Object(l.setDisplayName)("SectionContents"))(yo);function ji(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ei(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ei(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ei(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function xi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xi(Object(n),!0).forEach((function(t){Ci(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ci(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object(l.setObservableConfig)(He.a);var Ti=Object(l.withProps)((function(e){var t=e.id,n=e.backgroundId,r=e.contents,o=function(e,t){var n=Object(f.findIndex)(e,{id:t});return e[-1!==n&&n?n:0]}(void 0===r?[]:r,n)||{},i=o&&o.id;return{background:Object(f.get)(o,"background")||{type:"none"},contentId:i,sectionId:t,path:'sections[{"id": "'.concat(t,'"}].contents[{"id": "').concat(i,'"}].background')}})),Mi=Object(l.withHandlers)({updateBackground:function(e){var t=e.sectionId,n=e.contentId,r=e.update,o=void 0===r?function(){}:r;return function(e){for(var r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return o.apply(void 0,['sections[{"id": "'.concat(t,'"}].contents[{"id": "').concat(n,'"}].background.')+e].concat(i))}},updateSection:function(e){var t=e.sectionId,n=e.update,r=void 0===n?function(){}:n;return function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return r.apply(void 0,['sections[{"id": "'.concat(t,'"}]')].concat(n))}}}),_i=Object(l.compose)(Ti,Mi),Ai=Object(l.compose)(Object(l.mapPropsStream)((function(e){var t=Object(l.createEventHandler)(),n=t.handler,r=t.stream;return v.Observable.combineLatest(e,function(e,t){var n=e.scan((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.id,r=t.visible,o=t.entry;return Pi(Pi({},e),{},Ci({},n,{visible:r,entry:o}))}),{}).debounceTime(100).map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(f.maxBy)(Object.keys(e),(function(t){return e[t].visible?Object(f.get)(e[t],"entry.intersectionRatio"):-1/0}));return{maxItem:t,items:e}}));return v.Observable.merge(n.pluck("maxItem").distinctUntilChanged().map((function(e){return{backgroundId:e}})),n.map((function(e){var t=e.maxItem,n=e.items;return 0===Object(f.get)(n[t],"entry.intersectionRatio")?"EMPTY":t})).withLatestFrom(t.pluck("updateCurrentPage")).do((function(e){var t=ji(e,2),n=t[0],r=t[1];return r&&r({columnId:n})})).ignoreElements())}(r,e).startWith({}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Pi(Pi({},t.reduce((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return Pi(Pi({},e),t)}),{})),{},{onVisibilityChange:n})}))})),_i),Ri=n("./node_modules/stickybits/dist/stickybits.es.js");function Ii(e){return(Ii="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Di(){return(Di=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ki(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Li(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ki(Object(n),!0).forEach((function(t){Vi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ki(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ni(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Fi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ui(e,t){return(Ui=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Gi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Wi(e);if(t){var o=Wi(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Bi(this,n)}}function Bi(e,t){return!t||"object"!==Ii(t)&&"function"!=typeof t?zi(e):t}function zi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Wi(e){return(Wi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Vi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Hi=n("./node_modules/react-overlays/es/index.js"),qi=n("./MapStore2/web/client/components/geostory/layouts/sections/patterns/grid.svg"),Yi=n.n(qi);function Qi(e){return(Qi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ki(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Zi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ki(Object(n),!0).forEach((function(t){oa(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ki(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Xi(){return(Xi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ji(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ea(e,t){return(ea=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ta(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ra(e);if(t){var o=ra(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return na(this,n)}}function na(e,t){return!t||"object"!==Qi(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ra(e){return(ra=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ia=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ea(e,t)}(a,e);var t,n,r,o=ta(a);function a(){return Ji(this,a),o.apply(this,arguments)}return t=a,(n=[{key:"render",value:function(){var e=Object(u.p)(this.props),t=!this.props.disableToolbarPortal&&this.refs&&this.refs.div&&this.refs.div.parentNode,n=this.props.sectionType===u.g.TITLE?["editMedia","cover"]:["editMedia"],r=this.props.contentToolbar||yi,o=i.a.createElement(r,Xi({},this.props,{themeProps:{disableBackgroundAlpha:!0,disableTextColor:!0,disableShadow:!0},tools:this.props.tools&&this.props.type&&this.props.tools[this.props.type]||this.props.sectionType===u.g.BANNER&&[].concat(n,["cover","remove"])||n})),a="".concat(this.props.sectionId||"ms","-media-").concat(this.props.id||this.props.resourceId);return i.a.createElement("div",{ref:"div",className:"ms-section-background",style:Zi({},this.props.style)},i.a.createElement("div",{className:"ms-section-background-container".concat(Object(u.l)(this.props)),style:Zi(Zi({height:this.props.height},e),(null==tr?void 0:tr[this.props.type])?{}:this.props.backgroundPlaceholder)},i.a.createElement(ir,Xi({id:a},this.props,{enableFullscreen:!1,descriptionEnabled:!1,mediaViewer:this.props.mediaViewer,containerInView:this.props.inView})),this.props.mode===u.e.EDIT&&(t?i.a.createElement(Hi.Portal,{container:t},o):o)))}}])&&$i(t.prototype,n),r&&$i(t,r),a}(o.Component);oa(ia,"propTypes",{id:it.a.string,resourceId:it.a.string,sectionId:it.a.string,mode:it.a.string,fit:it.a.string,size:it.a.string,path:it.a.string,credits:it.a.string,description:it.a.string,height:it.a.number,width:it.a.number,tools:it.a.object,style:it.a.object,add:it.a.func,editMedia:it.a.func,update:it.a.func,updateSection:it.a.func,remove:it.a.func,type:it.a.oneOf(u.t.MediaTypes),disableToolbarPortal:it.a.bool,backgroundPlaceholder:it.a.object,sectionType:it.a.string,src:it.a.string,theme:it.a.string,mediaViewer:it.a.func,contentToolbar:it.a.func,inView:it.a.bool}),oa(ia,"defaultProps",{height:0,size:"full",width:0,style:{},backgroundPlaceholder:{background:"url(".concat(Yi.a,")"),backgroundSize:"256px auto"}});var aa,sa,la,ca=(aa=ia,la=sa=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ui(e,t)}(a,e);var t,n,r,o=Gi(a);function a(){var e;Ni(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Vi(zi(e=o.call.apply(o,[this].concat(n))),"state",{style:{}}),Vi(zi(e),"update",(function(t){if(e._stickybits){var n=document.querySelector(t);-1===e._stickybits.definePosition().indexOf("sticky")&&n&&(e._stickybits.update(),setTimeout((function(){var t=n.getBoundingClientRect(),r=t.top,o=t.left;e.setState({style:{top:r,left:o,width:n.scrollWidth-2}})})))}})),e}return t=a,(n=[{key:"componentDidMount",value:function(){this._stickybits=this._node&&Object(Ri.a)(this._node,{scrollEl:this.props.scrollContainerSelector,noStyles:!0,useGetBoundingClientRect:!0}),this.update(this.props.scrollContainerSelector)}},{key:"componentWillReceiveProps",value:function(e){!this._stickybits||e.viewWidth===this.props.viewWidth&&e.viewHeight===this.props.viewHeight||this.update(e.scrollContainerSelector)}},{key:"componentWillUnmount",value:function(){this._stickybits&&this._stickybits.cleanup()}},{key:"render",value:function(){var e=this;return i.a.createElement(aa,Di({ref:function(t){t&&t.refs&&t.refs[e.props.refId]&&(e._node=t.refs[e.props.refId])},style:Li({},this.state.style)},this.props),this.props.children)}}])&&Fi(t.prototype,n),r&&Fi(t,r),a}(o.Component),Vi(sa,"propTypes",{scrollContainerSelector:it.a.string,height:it.a.number,width:it.a.number,refId:it.a.string}),Vi(sa,"defaultProps",{scrollContainerSelector:"body",height:0,width:0,refId:"div"}),la),ua=n("./MapStore2/web/client/components/geostory/layouts/sections/patterns/world.svg"),pa=n.n(ua);function da(){return(da=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function fa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ma=Object(l.compose)(Ai,Object(l.withStateHandlers)({textEditorActive:!1},{bubblingTextEditing:function(){return function(e){return{textEditorActiveClass:e?" ms-text-editor-active":""}}}}))((function(e){var t,n=e.add,r=void 0===n?function(){}:n,o=e.editMedia,a=void 0===o?function(){}:o,s=e.editWebPage,l=void 0===s?function(){}:s,c=e.onVisibilityChange,p=void 0===c?function(){}:c,d=e.update,m=void 0===d?function(){}:d,y=e.updateBackground,b=void 0===y?function(){}:y,g=e.updateCurrentPage,h=void 0===g?function(){}:g,v=e.remove,S=void 0===v?function(){}:v,w=e.id,O=e.background,j=void 0===O?{}:O,E=e.path,x=e.contents,P=void 0===x?[]:x,C=e.mode,T=e.sectionType,M=e.inViewRef,_=e.viewWidth,A=e.viewHeight,R=e.focusedContent,I=e.contentId,D=e.bubblingTextEditing,k=void 0===D?function(){}:D,L=e.textEditorActiveClass,N=void 0===L?"":L,F=e.expandableMedia,U=void 0!==F&&F,G=e.storyTheme,B=e.mediaViewer,z=e.contentToolbar,W=e.inView,V=R&&R.hideContent&&Object(f.get)(R,"target.id")===I,H=V?"hidden":"visible",q=U&&j&&"map"===j.type?" ms-expandable-background":"";return i.a.createElement("section",{className:"ms-section ms-section-immersive".concat(q),id:w,ref:M},i.a.createElement(ca,da({},j,{mode:C,disableToolbarPortal:!0,tools:(t={},fa(t,u.d.IMAGE,["editMedia","fit","size","align","theme"]),fa(t,u.d.MAP,["editMedia","editMap","size","align","theme"]),fa(t,u.d.VIDEO,["editMedia","fit","size","align","theme","muted","autoplay","loop"]),t),scrollContainerSelector:"#ms-sections-container",add:r,editMedia:a,expandable:U,path:E,update:b,updateCurrentPage:h,remove:S,sectionType:T,sectionId:w,backgroundId:j.id,key:j.id,width:_,height:A,backgroundPlaceholder:{background:"url(".concat(pa.a,")"),backgroundSize:"600px auto"},storyTheme:G,mediaViewer:B,contentToolbar:z,inView:W})),i.a.createElement(Oi,{tools:fa({},u.a.COLUMN,["size","align","theme"]),className:"ms-section-contents".concat(N),contents:P,mode:C,add:r,updateCurrentPage:h,editMedia:a,editWebPage:l,update:m,remove:S,sectionId:w,viewWidth:_,viewHeight:A,contentProps:{onVisibilityChange:p,contentWrapperStyle:{minHeight:A,visibility:H},expandable:U,mediaViewer:B,contentToolbar:z},focusedContent:R,bubblingTextEditing:k,sectionType:T,storyTheme:G}),C===u.e.EDIT&&!V&&i.a.createElement(ao,{containerWidth:_,containerHeight:A,buttons:[{glyph:"story-title-section",tooltipId:"geostory.addTitleSection",onClick:function(){r("sections",w,u.g.TITLE)}},{glyph:"story-title-section",tooltipId:"geostory.addBannerSection",onClick:function(){r("sections",w,u.g.BANNER)}},{glyph:"story-paragraph-section",tooltipId:"geostory.addParagraphSection",onClick:function(){r("sections",w,u.g.PARAGRAPH)}},{glyph:"story-immersive-content",tooltipId:"geostory.addImmersiveContent",onClick:function(){r('sections[{"id": "'.concat(w,'"}].contents'),void 0,u.a.COLUMN)}},{glyph:"story-media-section",tooltipId:"geostory.addMediaSection",onClick:function(){r("sections",w,u.f.MEDIA)}},{glyph:"story-webpage-section",tooltipId:"geostory.addWebPageSection",onClick:function(){r("sections",w,u.f.WEBPAGE)}}]}))})),ya=function(e){var t=e.id,n=e.contents,r=e.mode,o=e.add,a=void 0===o?function(){}:o,s=e.update,l=void 0===s?function(){}:s,c=e.editMedia,p=void 0===c?function(){}:c,d=e.editWebPage,f=void 0===d?function(){}:d,m=e.remove,y=void 0===m?function(){}:m,b=e.inViewRef,g=e.viewWidth,h=e.viewHeight,v=e.expandableMedia,S=e.mediaViewer,w=e.contentToolbar;return i.a.createElement("section",{className:"ms-section ms-section-paragraph",id:t,ref:b},i.a.createElement(Oi,{className:"ms-section-contents",contents:n,mode:r,add:a,editMedia:p,editWebPage:f,update:l,remove:y,sectionId:t,viewWidth:g,viewHeight:h,contentProps:{expandable:v,mediaViewer:S,contentToolbar:w}}),r===u.e.EDIT&&i.a.createElement(ao,{containerWidth:g,containerHeight:h,buttons:[{glyph:"story-title-section",tooltipId:"geostory.addTitleSection",onClick:function(){a("sections",t,u.g.TITLE)}},{glyph:"story-title-section",tooltipId:"geostory.addBannerSection",onClick:function(){a("sections",t,u.g.BANNER)}},{glyph:"story-paragraph-section",tooltipId:"geostory.addParagraphSection",onClick:function(){a("sections",t,u.g.PARAGRAPH)}},{glyph:"story-immersive-section",tooltipId:"geostory.addImmersiveSection",onClick:function(){a("sections",t,u.g.IMMERSIVE)}},{glyph:"story-media-section",tooltipId:"geostory.addMediaSection",onClick:function(){a("sections",t,u.f.MEDIA)}},{glyph:"story-webpage-section",tooltipId:"geostory.addWebPageSection",onClick:function(){a("sections",t,u.f.WEBPAGE)}}]}))},ba=n("./MapStore2/web/client/components/geostory/layouts/sections/patterns/dots.png"),ga=n.n(ba);function ha(){return(ha=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function va(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Sa=Object(l.compose)(_i,Object(l.withStateHandlers)({textEditorActive:!1},{bubblingTextEditing:function(){return function(e){return{textEditorActiveClass:e?" ms-text-editor-active":""}}}}))((function(e){var t=e.id,n=e.background,r=void 0===n?{}:n,o=e.contents,a=void 0===o?[]:o,s=e.mode,l=e.contentId,c=e.path,p=e.sectionType,d=e.cover,m=e.viewWidth,y=e.viewHeight,b=e.inViewRef,g=e.add,h=void 0===g?function(){}:g,v=e.update,S=void 0===v?function(){}:v,w=e.updateSection,O=void 0===w?function(){}:w,j=e.remove,E=void 0===j?function(){}:j,x=e.updateBackground,P=void 0===x?function(){}:x,C=e.editMedia,T=void 0===C?function(){}:C,M=e.focusedContent,_=e.bubblingTextEditing,A=void 0===_?function(){}:_,R=e.textEditorActiveClass,I=void 0===R?"":R,D=e.expandableMedia,k=void 0!==D&&D,L=e.storyTheme,N=e.mediaViewer,F=e.contentToolbar,U=e.inView,G=Object(f.get)(M,"target.id")===l,B=G?"hidden":"visible",z=k&&r&&"map"===r.type?" ms-expandable-background":"";return i.a.createElement("section",{ref:b,className:"ms-section ms-section-title".concat(z),id:t},i.a.createElement(We.a,null,(function(e){var t,n=e.height;return i.a.createElement(ca,ha({},r,{scrollContainerSelector:"#ms-sections-container",key:r.id,mode:s,id:l,path:c,update:P,add:h,editMedia:T,expandable:k,updateSection:O,cover:d,remove:E,width:m,sectionType:p,backgroundPlaceholder:{background:"url(".concat(d?Yi.a:ga.a,")"),backgroundSize:"".concat(d?64:600,"px auto")},tools:(t={},va(t,u.d.IMAGE,["editMedia","cover","fit","size","align","theme"]),va(t,u.d.MAP,["editMedia","cover","editMap","size","align","theme"]),va(t,u.d.VIDEO,["editMedia","cover","fit","size","align","theme","muted","autoplay","loop"]),t),height:n>=y?y:n,storyTheme:L,mediaViewer:N,contentToolbar:F,inView:U}))})),i.a.createElement(Oi,{className:"ms-section-contents".concat(I),contents:a,mode:s,add:h,sectionType:p,update:S,remove:E,sectionId:t,contentProps:{contentWrapperStyle:d?{minHeight:y,visibility:B}:{visibility:B},mediaViewer:N,contentToolbar:F},tools:va({},u.a.TEXT,["size","align","theme","remove"]),focusedContent:M,bubblingTextEditing:A,storyTheme:L}),s===u.e.EDIT&&!G&&i.a.createElement(ao,{containerWidth:m,containerHeight:y,buttons:[{glyph:"story-title-section",tooltipId:"geostory.addTitleSection",onClick:function(){h("sections",t,u.g.TITLE)}},{glyph:"story-title-section",tooltipId:"geostory.addBannerSection",onClick:function(){h("sections",t,u.g.BANNER)}},{glyph:"story-paragraph-section",tooltipId:"geostory.addParagraphSection",onClick:function(){h("sections",t,u.g.PARAGRAPH)}},{glyph:"story-immersive-section",tooltipId:"geostory.addImmersiveSection",onClick:function(){h("sections",t,u.g.IMMERSIVE)}},{glyph:"story-media-section",tooltipId:"geostory.addMediaSection",onClick:function(){h("sections",t,u.f.MEDIA)}},{glyph:"story-webpage-section",tooltipId:"geostory.addWebPageSection",onClick:function(){h("sections",t,u.f.WEBPAGE)}}]}))}));function wa(){return(wa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Oa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ja,Ea=Object(l.compose)(_i,Object(l.withStateHandlers)({textEditorActive:!1}))((function(e){var t=e.id,n=e.background,r=void 0===n?{}:n,o=e.mode,a=e.contentId,s=e.path,l=e.sectionType,c=void 0===l?u.g.BANNER:l,p=e.cover,d=e.viewWidth,m=e.viewHeight,y=e.inViewRef,b=e.add,g=void 0===b?function(){}:b,h=e.updateSection,v=void 0===h?function(){}:h,S=e.remove,w=void 0===S?function(){}:S,O=e.updateBackground,j=void 0===O?function(){}:O,E=e.editMedia,x=void 0===E?function(){}:E,P=e.focusedContent,C=e.expandableMedia,T=void 0!==C&&C,M=e.storyTheme,_=e.mediaViewer,A=e.contentToolbar,R=e.inView,I=Object(f.get)(P,"target.id")===a,D=T&&r&&"map"===r.type?" ms-expandable-background":"",k=s.replace(".background","");return i.a.createElement("section",{ref:y,className:"ms-section ms-section-banner".concat(D),id:t},i.a.createElement(We.a,null,(function(e){var t,n=e.height;return i.a.createElement(ca,wa({},r,{scrollContainerSelector:"#ms-sections-container",key:r.id,mode:o,id:a,path:s,update:j,add:g,editMedia:x,expandable:T,updateSection:v,cover:p,remove:function(){return w(k)},width:d,sectionType:c,backgroundPlaceholder:{background:"url(".concat(p?Yi.a:ga.a,")"),backgroundSize:"".concat(p?64:600,"px auto")},tools:(t={},Oa(t,u.d.IMAGE,["editMedia","cover","fit","size","align","theme","remove"]),Oa(t,u.d.MAP,["editMedia","cover","editMap","size","align","theme","remove"]),Oa(t,u.d.VIDEO,["editMedia","cover","fit","size","align","theme","muted","autoplay","loop","remove"]),t),height:n>=m?m:n,storyTheme:M,mediaViewer:_,contentToolbar:A,inView:R}))})),i.a.createElement("div",{style:{minHeight:p?m:300,pointerEvents:"none"}}),o===u.e.EDIT&&!I&&i.a.createElement(ao,{containerWidth:d,containerHeight:m,buttons:[{glyph:"story-title-section",tooltipId:"geostory.addTitleSection",onClick:function(){g("sections",t,u.g.TITLE)}},{glyph:"story-title-section",tooltipId:"geostory.addBannerSection",onClick:function(){g("sections",t,u.g.BANNER)}},{glyph:"story-paragraph-section",tooltipId:"geostory.addParagraphSection",onClick:function(){g("sections",t,u.g.PARAGRAPH)}},{glyph:"story-immersive-section",tooltipId:"geostory.addImmersiveSection",onClick:function(){g("sections",t,u.g.IMMERSIVE)}},{glyph:"story-media-section",tooltipId:"geostory.addMediaSection",onClick:function(){g("sections",t,u.f.MEDIA)}},{glyph:"story-webpage-section",tooltipId:"geostory.addWebPageSection",onClick:function(){g("sections",t,u.f.WEBPAGE)}}]}))}));function xa(e){return(xa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pa(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ca(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ta(e,t){return(Ta=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ma(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ra(e);if(t){var o=Ra(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _a(this,n)}}function _a(e,t){return!t||"object"!==xa(t)&&"function"!=typeof t?Aa(e):t}function Aa(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ra(e){return(Ra=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ia(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Da=(Ia(ja={},u.g.IMMERSIVE,ma),Ia(ja,u.g.PARAGRAPH,ya),Ia(ja,u.f.MEDIA,ya),Ia(ja,u.f.WEBPAGE,ya),Ia(ja,u.g.TITLE,Sa),Ia(ja,u.g.BANNER,Ea),Ia(ja,"UNKNOWN",(function(e){var t=e.type,n=e.inViewRef;return i.a.createElement("div",{ref:n,className:"ms-section ms-section-unknown"},"WARNING: unknown session of type ",t)})),ja),ka=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ta(e,t)}(a,e);var t,n,r,o=Ma(a);function a(){var e;Pa(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ia(Aa(e=o.call.apply(o,[this].concat(n))),"state",{height:0}),e}return t=a,(n=[{key:"render",value:function(){var e=Da[this.props.type]||Da.UNKNOWN;return i.a.createElement(e,{sectionType:this.props.type,id:this.props.id,add:this.props.add,update:this.props.update,inViewRef:this.props.inViewRef,editMedia:this.props.editMedia,expandableMedia:this.props.expandableMedia,editWebPage:this.props.editWebPage,updateCurrentPage:this.props.updateCurrentPage,remove:this.props.remove,mode:this.props.mode,cover:this.props.cover,contents:this.props.contents,viewWidth:this.props.viewWidth,viewHeight:this.props.viewHeight,focusedContent:this.props.focusedContent,storyTheme:this.props.storyTheme,mediaViewer:this.props.mediaViewer,contentToolbar:this.props.contentToolbar,inView:this.props.inView})}}])&&Ca(t.prototype,n),r&&Ca(t,r),a}(i.a.Component);Ia(ka,"propTypes",{id:it.a.string,type:it.a.oneOf(u.t.SectionTypes),storyType:it.a.oneOf(u.t.StoryTypes),add:it.a.func,update:it.a.func,editMedia:it.a.func,editWebPage:it.a.func,remove:it.a.func,updateCurrentPage:it.a.func,mode:it.a.oneOf(u.t.Modes),contents:it.a.array,viewHeight:it.a.number,viewWidth:it.a.number,inViewRef:it.a.func,excludeClassName:it.a.string,cover:it.a.bool,focusedContent:it.a.object,expandableMedia:it.a.bool,storyTheme:it.a.object,mediaViewer:it.a.func,contentToolbar:it.a.func,inView:it.a.bool}),Ia(ka,"defaultProps",{id:"",add:function(){},update:function(){},editMedia:function(){},editWebPage:function(){},updateCurrentPage:function(){},remove:function(){},storyType:u.h.CASCADE,viewHeight:0,viewWidth:0,mode:u.e.VIEW,expandableMedia:!1});var La=ho({threshold:[0,.25,.5,.75,1],rootMargin:"-200px 0px 0px 0px"})(ka);function Na(e){return(Na="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fa(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ua(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ga(e,t){return(Ga=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ba(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Va(e);if(t){var o=Va(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return za(this,n)}}function za(e,t){return!t||"object"!==Na(t)&&"function"!=typeof t?Wa(e):t}function Wa(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Va(e){return(Va=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ha(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var qa=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ga(e,t)}(a,e);var t,n,r,o=Ba(a);function a(){var e;Fa(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ha(Wa(e=o.call.apply(o,[this].concat(n))),"getAdjustedSelector",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.replace(/#\d|^#-\d/g,(function(e,t){return t?"#\\"+t[1]+t[2]:"#\\3"+e[1]+" "}))})),Ha(Wa(e),"getFocusedTarget",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.props.targets,n=e.props.padding,r=void 0===n?{}:n;return t.map((function(t){var n=t.selector,o=null;try{var i=window.document.querySelector(e.getAdjustedSelector(n));if(i){var a=i.getBoundingClientRect(),s=a.top,l=a.right,c=a.bottom,u=a.left;o={x:u-r,y:s-r,w:l-u+2*r,h:c-s+2*r}}}catch(e){console.warn(e)}finally{return o}})).filter((function(e){return e}))})),Ha(Wa(e),"getHolePath",(function(t){var n=t.x,r=t.y,o=t.w,i=t.h,a=e.props.borderRadius,s=void 0===a?8:a;return"M ".concat(n," ").concat(r+s," q 0 -").concat(s," ").concat(s," -").concat(s," h ").concat(o-2*s," q ").concat(s," 0 ").concat(s," ").concat(s," v ").concat(i-2*s," q 0 ").concat(s," -").concat(s," ").concat(s," h-").concat(o-2*s," q -").concat(s," 0 -").concat(s," -").concat(s," v-").concat(i-2*s)})),Ha(Wa(e),"getPath",(function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.getFocusedTarget(),o="M 0 0 h ".concat(n," v ").concat(t," h -").concat(n," v -").concat(t),i=r.map(e.getHolePath);return o+i.join(" ")})),e}return t=a,(n=[{key:"render",value:function(){var e=this,t=this.props,n=t.onMaskClicked,r=t.stopEventsOnTargets,o=void 0!==r&&r,a=t.targets,s=this.getFocusedTarget(a.filter((function(e){var t=e.stopEventsOnTarget;return o||t})));return i.a.createElement("div",{style:{position:"fixed",height:"100vh",width:"100vw",top:0,left:0,zIndex:1e6,pointerEvents:"none"}},i.a.createElement(We.a,null,(function(t){var r=t.width,o=t.height;return i.a.createElement("svg",{width:r,height:o,xmlns:"http://www.w3.org/2000/svg"},i.a.createElement("path",{d:e.getPath(o,r),fill:"rgba(0,0,0,0.7)",fillRule:"evenodd",pointerEvents:"visiblePainted",onClick:n}),s.map((function(t,n){return i.a.createElement("path",{key:n,d:e.getHolePath(t),fill:"transparent",pointerEvents:"visiblePainted"})})))})))}}])&&Ua(t.prototype,n),r&&Ua(t,r),a}(i.a.Component);Ha(qa,"propTypes",{targets:it.a.arrayOf(it.a.shape({selector:it.a.string,stopEventsOnTarget:it.a.bool})),padding:it.a.number,borderRadius:it.a.number,onMaskClicked:it.a.func,stopEventsOnTargets:it.a.bool}),Ha(qa,"defaultProps",{targets:[],padding:0,borderRadius:8,onMaskClicked:function(){},stopEventsOnTargets:!1});function Ya(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ya(Object(n),!0).forEach((function(t){Ka(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ya(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ka(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Za=$e()((function(e){var t=e.sections;return 0===(void 0===t?[]:t).length}),(function(e){var t=e.add,n=void 0===t?function(){}:t;return{iconFit:!1,style:{position:"relative",width:"50%",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},glyph:"geostory",title:i.a.createElement(cr.a,{msgId:"geostory.emptyTitle"}),description:i.a.createElement(cr.a,{msgId:"geostory.emptyDescription"}),content:i.a.createElement(ao,{addButtonClassName:"square-button-md",containerWidth:"100%",containerHeight:"100%",buttons:[{glyph:"story-title-section",tooltipId:"geostory.addTitleSection",onClick:function(){n("sections",0,u.g.TITLE)}},{glyph:"story-title-section",tooltipId:"geostory.addBannerSection",onClick:function(){n("sections",0,u.g.BANNER)}},{glyph:"story-paragraph-section",tooltipId:"geostory.addParagraphSection",onClick:function(){n("sections",0,u.g.PARAGRAPH)}},{glyph:"story-immersive-section",tooltipId:"geostory.addImmersiveContent",onClick:function(){n("sections",0,u.g.IMMERSIVE)}},{glyph:"story-media-section",tooltipId:"geostory.addMediaSection",onClick:function(){n("sections",0,u.f.MEDIA)}},{glyph:"code",tooltipId:"geostory.addWebPageSection",onClick:function(){n("sections",0,u.f.WEBPAGE)}}]})}}))(We.a),Xa=function(e){var t=e.width;return e.mode===u.e.EDIT?"":t<640?"sm":t>=640&&t<1024?"md":""},Ja=Object(l.compose)(Xe,rt,function(e){var t=e.showFocusMask,n=void 0===t?function(){}:t,r=e.defaultTargets,o=void 0===r?{selector:".ms-geostory-map-editor"}:r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=a.padding,c=void 0===s?0:s,u=a.borderRadius,p=void 0===u?8:u,d=a.stopEventsOnTargets,f=void 0!==d&&d,m=a.onMaskClicked,y=void 0===m?function(){}:m;return Object(l.branch)(n,(function(e){return Object(l.nest)((function(e){var t=e.focusedContent,n=e.children;return i.a.createElement(i.a.Fragment,null,n,i.a.createElement(qa,{targets:[t,o],padding:c,borderRadius:p,stopEventsOnTargets:f,onMaskClicked:y}))}),e)}))}({showFocusMask:function(e){var t=e.focusedContent,n=(t=void 0===t?{}:t).target;return(void 0===n?{}:n).id}}))((function(e){var t=e.mode,n=void 0===t?u.e.VIEW:t,r=e.sections,o=void 0===r?[]:r,a=e.add,s=void 0===a?function(){}:a,l=e.onVisibilityChange,c=void 0===l?function(){}:l,p=e.updateCurrentPage,d=void 0===p?function(){}:p,f=e.editMedia,m=void 0===f?function(){}:f,y=e.editWebPage,b=void 0===y?function(){}:y,g=e.update,h=void 0===g?function(){}:g,v=e.remove,S=void 0===v?function(){}:v,w=e.focusedContent,O=e.isContentFocused,j=void 0!==O&&O,E=e.getSize,x=void 0===E?Xa:E,P=e.theme,C=void 0===P?{}:P,T=e.mediaViewer,M=e.contentToolbar;return i.a.createElement(Be.a,{className:"ms-cascade-story ms-".concat(n)},i.a.createElement(Za,{sections:o,add:s},(function(e){var t=e.width,r=e.height,a=x({width:t,height:r,mode:n}),l=a?" ms-".concat(a):"",u="sm"===a,p=C&&Bo()(C)&&C||{};return i.a.createElement("div",{id:"ms-sections-container",className:"ms-sections-container".concat(l),style:Qa(Qa({},p),j&&{overflow:"hidden"})},o.map((function(e){var o=e.contents,a=void 0===o?[]:o,l=e.id,f=e.type,y=e.cover;return i.a.createElement(La,{focusedContent:w,onVisibilityChange:c,add:s,editMedia:m,expandableMedia:u,editWebPage:b,updateCurrentPage:d,update:h,remove:S,key:l,id:l,viewHeight:r,viewWidth:t,type:f,mode:n,contents:a,cover:y,storyTheme:p,mediaViewer:T,contentToolbar:M})})))})))})),$a=n("./node_modules/uuid/index.js"),es=n.n($a),ts=n("./MapStore2/web/client/components/widgets/builder/wizard/map/enhancers/handleNodeSelection.js"),ns=n.n(ts);function rs(e){return function(e){if(Array.isArray(e))return os(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return os(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return os(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function os(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function is(){return(is=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function as(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function ss(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ls(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ss(Object(n),!0).forEach((function(t){cs(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ss(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function cs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var us=Fo(So.a),ps=Object(l.compose)(Object(a.connect)(Object(s.createSelector)(Y.resourcesSelector,Y.isFocusOnContentSelector,(function(e,t){return{resources:e,isContentFocused:t}}))),Object(l.withProps)((function(e){var t=e.resources,n=e.resourceId,r=e.map,o=void 0===r?{}:r,i=ls(ls({},o),{},{layers:(o.layers||[]).map((function(e){return e||void 0}))}),a=Object(f.find)(t,{id:n})||{};return{map:Object(u.j)(a.data,i)}}))),ds=Object(l.compose)(Object(a.connect)(Object(s.createSelector)(Y.getCurrentFocusedContentEl,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{focusedEl:e}}))),Object(l.withProps)((function(e){var t=e.focusedEl,n=(t=void 0===t?{}:t).resourceId,r=t.map;return{map:r||{},resourceId:n,disableReset:!r}}))),fs=Object(l.withHandlers)({onChangeMap:function(e){var t=e.update,n=e.focusedContent,r=void 0===n?{}:n;return function(e,n){t("".concat(r.path,".map.").concat(e),n,"merge")}},onChange:function(e){var t=e.update,n=e.focusedContent,r=void 0===n?{}:n;return function(e,n){t(r.path+".".concat(e),n,"merge")}}}),ms=Object(l.compose)(Object(a.connect)(null,{toggleAdvancedEditing:function(e,t){return{type:"MAP_EDITOR:SHOW",owner:e,map:t}}}),Object(l.withHandlers)({toggleAdvancedEditing:function(e){var t=e.toggleAdvancedEditing,n=void 0===t?function(){}:t,r=e.map,o=void 0===r?{}:r;return function(){var e=o.id,t=as(o,["id"]);n("inlineEditor",{data:t,id:e})}}})),ys=Object(l.withHandlers)({toggleEditing:function(e){var t=e.editMap,n=e.update,r=e.focusedContent;return function(){return n(r.path+".editMap",!t)}},onReset:function(e){var t=e.update,n=e.focusedContent,r=(n=void 0===n?{}:n).path,o=void 0===r?"":r;return function(){t(o+".map",void 0)}},discardAndClose:function(e){var t=e.update,n=e.focusedContent,r=void 0===n?{}:n;return function(e){t(r.path+".map",e),t(r.path+".editMap",!1)}}}),bs=function(e){return i.a.createElement(us,is({glyph:"repeat",bsStyle:"primary",className:"square-button-md no-border",tooltipId:"geostory.contentToolbar.resetMap",confirmTitle:i.a.createElement(cr.a,{msgId:"geostory.contentToolbar.resetMapConfirm"}),confirmContent:i.a.createElement(cr.a,{msgId:"geostory.contentToolbar.resetConfirmContent"})},e))},gs=Object(l.compose)(Object(l.withProps)((function(e){var t=e.pendingChanges,n=e.toggleEditing,r=e.disableReset,o=e.onReset,a=e.toggleAdvancedEditing,s=void 0===a?function(){}:a;return{buttons:[{glyph:"floppy-disk",disabled:!t,tooltipId:"geostory.contentToolbar.saveChanges",onClick:n},{renderButton:i.a.createElement(bs,{disabled:r,onClick:o})},{glyph:"pencil",tooltipId:"geostory.contentToolbar.advancedMapEditor",onClick:s}]}})),ns.a,Object(l.withStateHandlers)((function(){return{editNode:void 0}}),{setEditNode:function(){return function(e){return{editNode:e}}},closeNodeEditor:function(){return function(){return{editNode:void 0}}}}),Object(l.branch)((function(e){return!!e.editNode}),Object(l.withProps)((function(e){var t=e.selectedNodes,n=void 0===t?[]:t,r=e.closeNodeEditor,o=void 0===r?function(){}:r;return{buttons:[{visible:1===n.length,tooltipId:"close",glyph:"1-close",onClick:o}]}})),Object(l.withProps)((function(e){var t=e.selectedNodes,n=void 0===t?[]:t,r=e.setEditNode,o=void 0===r?function(){}:r,i=e.buttons,a=void 0===i?[]:i;return{buttons:[{visible:1===n.length,glyph:"wrench",tooltipId:"toc.toolLayerSettingsTooltip",onClick:function(){o(n[0])}}].concat(rs(a))}})))),hs=Object(l.compose)(Object(l.withPropsOnChange)(["focusedContent"],(function(e){var t=e.map,n=e.focusedEl;return{contentMap:(n=void 0===n?{}:n).map,lastSavedMap:t}})),Object(l.withPropsOnChange)(["map"],(function(e){var t=e.map,n=e.lastSavedMap;return{pendingChanges:!Object(f.isEqual)(n,t)}}))),vs=Object(l.compose)(Object(l.withProps)((function(e){var t=e.toggleEditing;return{CloseBtn:function(e){return i.a.createElement(So.a,is({onClick:t},e))}}})),Object(l.branch)((function(e){return e.pendingChanges}),Object(l.withProps)((function(e){var t=e.discardAndClose,n=e.contentMap;return{CloseBtn:function(e){return i.a.createElement(us,is({onClick:function(){return t(n)},confirmTitle:i.a.createElement(cr.a,{msgId:"geostory.contentToolbar.confirmCloseMapEditing"}),confirmContent:i.a.createElement(cr.a,{msgId:"geostory.contentToolbar.pendingChangesDiscardConfirm"})},e))}}})))),Ss=Object(l.mapPropsStream)((function(e){var t=Object(l.createEventHandler)(),n=t.stream,r=t.handler;return e.pluck("map").distinctUntilChanged((function(e,t){return Object(f.isEqual)(e,t)})).switchMap((function(e){return n.map((function(t){return{map:ls(ls({},e),t)}})).startWith({map:e})})).combineLatest(e,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.map,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ls(ls({},n),{},{onMapViewLocalChanges:r,map:t})}))})),ws=function(e,t){return void 0!==e&&void 0!==t&&e.toFixed(12)-t.toFixed(12)==0},Os=Object(l.withHandlers)({onMapViewChanges:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.update,n=e.editMap,r=void 0!==n&&n,o=e.onMapViewLocalChanges,i=e.map,a=(i=void 0===i?{}:i).center,s=void 0===a?{}:a,l=i.zoom;return function(e){var n=e.center,i=void 0===n?{}:n,a=e.zoom,c=e.mapStateSource,u=ws(s.x,i.x)&&ws(s.y,i.y);!r||u&&l===a?o({center:i,zoom:a,mapStateSource:c}):t("map",{center:i,zoom:a,mapStateSource:es()()},"merge")}}}),js=n("./MapStore2/web/client/components/misc/enhancers/localizeStringMap.js"),Es=n.n(js),xs=n("./MapStore2/web/client/components/widgets/builder/wizard/map/NodeEditor.jsx"),Ps=n.n(xs),Cs=n("./MapStore2/web/client/components/widgets/builder/wizard/map/enhancers/nodeEditor.js"),Ts=n.n(Cs);function Ms(){return(Ms=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _s(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var As=Tn()(Pt.NavItem),Rs=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.tabs,n=void 0===t?[]:t,r=e.activeTab,o=(e.width,e.setActiveTab),a=void 0===o?function(){}:o,s=_s(e,["tabs","activeTab","width","setActiveTab"]);return i.a.createElement("div",{key:"ms-geostory-map-settings-navbar",className:"ms-row-tab"},i.a.createElement("div",null,i.a.createElement(Pt.Nav,{bsStyle:"tabs",activeKey:r,justified:!0},n.map((function(e){return i.a.createElement(As,{key:"ms-tab-settings-"+e.id,tooltipId:e.tooltipId,eventKey:e.id,onClick:function(){return a(e.id)}},i.a.createElement(Pt.Glyphicon,{glyph:e.glyph}))})))),i.a.createElement("div",null,n.filter((function(e){return e.id&&e.id===r})).filter((function(e){return e.Component})).map((function(e){return i.a.createElement(e.Component,Ms({},s,{key:"ms-geostory-tab-settings-body-"+e.id}))}))))},Is=n("./MapStore2/web/client/components/misc/enhancers/withControllableState.js"),Ds=n.n(Is),ks=n("./node_modules/react-select/dist/react-select.es.js"),Ls=n("./MapStore2/web/client/components/misc/FeatureInfoFormatSelector.jsx"),Ns=st()(["placeholder","options"])(ks.default),Fs=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.map,n=void 0===t?{zoomControl:!0,mapInfoControl:!1}:t,r=e.onChangeMap,o=void 0===r?function(){}:r,a=n&&n.mapOptions||{},s=Object(u.i)({mapOptions:a,zoomControl:!!Object(f.isNil)(n.zoomControl)||n.zoomControl,mapInfoControl:!Object(f.isNil)(n.mapInfoControl)&&n.mapInfoControl});return i.a.createElement(Pt.Form,{className:"ms-geostory-map-controls"},i.a.createElement(Pt.FormGroup,null,i.a.createElement(Pt.ControlLabel,null,i.a.createElement(cr.a,{msgId:"geostory.mapEditor.zoom"})),i.a.createElement(Ho.a,{onChange:function(){var e=!s.zoomControl;o("zoomControl",e),o("mapOptions.interactions",{doubleClickZoom:e,shiftDragZoom:e,pinchZoom:e})},className:"ms-geostory-map-controls-switch",checked:s.zoomControl}),i.a.createElement(Ns,{options:[{label:"geostory.mapEditor.topLeft",value:"topLeft"},{label:"geostory.mapEditor.topRight",value:"topRight"},{label:"geostory.mapEditor.bottomLeft",value:"bottomLeft"},{label:"geostory.mapEditor.bottomRight",value:"bottomRight"}],wrapperStyle:{marginTop:"10px"},value:s.mapOptions&&s.mapOptions.zoomPosition||"topLeft",clearable:!1,disabled:!s.zoomControl,onChange:function(e){return o("mapOptions.zoomPosition",e&&e.value?e.value:"topLeft")},placeholder:"geostory.builder.settings.titlePlaceholder"})),i.a.createElement(Pt.FormGroup,null,i.a.createElement(Pt.ControlLabel,null,i.a.createElement(cr.a,{msgId:"geostory.mapEditor.pan"})),i.a.createElement(Ho.a,{onChange:function(){var e=!(s.mapOptions&&s.mapOptions.interactions&&s.mapOptions.interactions.dragPan);o("mapOptions.interactions",{dragPan:e,keyboardPan:e})},className:"ms-geostory-map-controls-switch",checked:s.mapOptions&&s.mapOptions.interactions&&s.mapOptions.interactions.dragPan})),i.a.createElement(Pt.FormGroup,null,i.a.createElement(Pt.ControlLabel,null,i.a.createElement(cr.a,{msgId:"geostory.mapEditor.identify"})),i.a.createElement(Ho.a,{onChange:function(){var e=!s.mapInfoControl;o("mapInfoControl",e)},className:"ms-geostory-map-controls-switch",checked:s.mapInfoControl}),s.mapInfoControl&&i.a.createElement(Ls.default,{disabled:!s.mapInfoControl,popoverMessage:"geostory.builder.settings.templateTooltip",infoFormat:s.mapOptions&&s.mapOptions.mapInfoFormat||"application/json",onInfoFormatChange:function(e){return o("mapOptions.mapInfoFormat",e)},selectProps:{wrapperStyle:{marginTop:10}}})))},Us=n("./MapStore2/web/client/components/widgets/builder/wizard/map/TOC.jsx"),Gs=n.n(Us),Bs=Object(l.withProps)((function(e){return{tabs:e.tabs||[{id:"toc",titleId:"geostory.mapEditor.toc",tooltipId:"geostory.mapEditor.toc",glyph:"1-layer",visible:!0,Component:Gs.a},{id:"settings",titleId:"geostory.mapEditor.settings",tooltipId:"geostory.mapEditor.settings",glyph:"wrench",visible:!0,Component:Fs}]}})),zs=Object(l.compose)(Ds()("activeTab","setActiveTab","toc"),Bs),Ws=Object(l.compose)(Ts.a,Object(l.withProps)((function(e){var t=e.selectedNode;return{title:t&&t.title}})),Es()("title"))((function(e){var t=e.title,n=e.description;return i.a.createElement("div",{className:"text-center"},i.a.createElement("div",{className:"mapstore-step-title"},t),i.a.createElement("div",{className:"mapstore-step-description"},n))})),Vs=Ts()(Ps.a),Hs=zs(Rs),qs=Object(l.branch)((function(e){var t=e.focusedContent;return(t=void 0===t?{}:t).path}),Object(l.compose)(Object(l.defaultProps)({isFocused:!0,editMap:!0}),ds,ps,hs,fs,ys,ms,gs,vs))((function(e){var t=e.mode,n=void 0===t?u.e.VIEW:t,r=e.isFocused,o=void 0!==r&&r,a=e.map,s=void 0===a?{}:a,l=e.onChange,c=void 0===l?function(){}:l,p=e.onChangeMap,d=void 0===p?function(){}:p,f=e.onNodeSelect,m=void 0===f?function(){}:f,y=e.selectedNodes,b=e.buttons,g=void 0===b?[]:b,h=e.editNode,v=e.closeNodeEditor,S=e.CloseBtn,w=void 0===S?function(){return null}:S;return n===u.e.EDIT&&o?i.a.createElement("div",{key:"left-column",style:{order:-1,width:400,position:"relative"}},i.a.createElement(Be.a,{className:"ms-geostory-map-editor",header:i.a.createElement("div",{className:"ms-geostory-map-editor-header text-center"},i.a.createElement(Pt.Row,null,i.a.createElement(Pt.Col,{md:12,className:"text-center",style:{overflow:"hidden",lineHeight:"52px"}},i.a.createElement(w,{glyph:"1-close",className:"pull-left on-close-btn square-button no-border ",tooltipId:"geostory.contentToolbar.closeMapEditing"}),i.a.createElement("div",{className:"mapstore-step-title"},i.a.createElement(cr.a,{msgId:"geostory.mapEditor.configureMapOptions"})))),i.a.createElement(Yr.a,{transitionProps:!1,btnGroupProps:{className:"ms-geostory-map-editor-toolbar"},btnDefaultProps:{className:"square-button-md no-border",bsStyle:"primary",noTooltipWhenDisabled:!0},buttons:g}))},!!h&&[i.a.createElement(Ws,{map:s,editNode:h}),i.a.createElement(Vs,{closeNodeEditor:v,editNode:h,map:s,onChange:c})]||[i.a.createElement(Hs,{map:s,onChange:c,onChangeMap:d,selectedNodes:y,onSelect:m})])):null}));function Ys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ys(Object(n),!0).forEach((function(t){Ks(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ks(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zs(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var Xs={image:Object(l.branch)((function(e){return e.resourceId}),Object(l.compose)(Object(a.connect)(Object(s.createSelector)(Y.resourcesSelector,(function(e){return{resources:e}}))),Object(l.withProps)((function(e){var t=e.resources,n=e.resourceId;return(Eo()(t,{id:n})||{}).data}))),$e()((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.src,n=void 0===t?"":t,r=e.sectionType;return!n&&r!==u.g.TITLE&&r!==u.g.IMMERSIVE}),(function(){return{glyph:"picture"}})))(zt),map:Object(l.compose)(Object(l.branch)((function(e){return e.resourceId}),ps),Ss,Os)(kn),video:Object(l.branch)((function(e){return e.resourceId}),Object(l.compose)(Object(a.connect)(Object(s.createSelector)(Y.resourcesSelector,(function(e){return{resources:e}}))),Object(l.withProps)((function(e){var t=e.resources,n=e.resourceId,r=e.autoplay,o=(Eo()(t,{id:n})||{}).data||{},i=o.autoplay;return Qs(Qs({},Zs(o,["autoplay"])),{},{autoplay:void 0!==r?r:i})}))),$e()((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.src,n=void 0===t?"":t,r=e.sectionType;return!n&&r!==u.g.TITLE&&r!==u.g.IMMERSIVE}),(function(){return{glyph:"play"}})))(qn)},Js=function(e){var t=e.type,n=Zs(e,["type"]),r=Xs[t];return r?i.a.createElement(r,n):null};function $s(){return($s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function el(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var tl=Object(a.connect)(Object(s.createSelector)(Y.resourcesSelector,(function(e){return{resources:e}})))((function(e){var t=e.resources,n=el(e,["resources"]);if(n.resourceId){var r=(Eo()(t,{id:n.resourceId})||{}).data||{};return i.a.createElement(yi,$s({},r,n))}return i.a.createElement(yi,n)}));function nl(){return(nl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function rl(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}t.default=Object(c.createPlugin)("GeoStory",{component:Object(l.compose)(Object(a.connect)(Object(s.createStructuredSelector)({mode:Y.modeSelector,story:Y.currentStorySelector,messages:_e.currentMessagesSelector,focusedContent:Y.getFocusedContentSelector,isContentFocused:Y.isFocusOnContentSelector,theme:function(e){var t,n;return(null===(t=Object(Y.settingsSelector)(e))||void 0===t||null===(n=t.theme)||void 0===n?void 0:n.general)||{}}}),{add:d.add,update:d.update,updateCurrentPage:d.updateCurrentPage,remove:d.remove,editMedia:function(e){var t=e.path,n=e.owner;return{type:"GEOSTORY:EDIT_MEDIA",path:t,owner:void 0===n?"geostory":n}},editWebPage:d.editWebPage}),Object(l.withPropsOnChange)(["messages"],(function(e){var t=e.messages;return{localize:function(e){return Object(p.getMessageById)(t,e)}}})),Object(l.withHandlers)({add:function(e){var t=e.localize,n=e.add;return function(e,r,o){return n(e,r,o,t)}}}))((function(e){var t=e.story,n=e.mode,r=void 0===n?u.e.VIEW:n,o=rl(e,["story","mode"]);return i.a.createElement(Be.a,{className:"ms-geostory",columns:[i.a.createElement(qs,nl({},o,{mode:r}))]},i.a.createElement(Ja,nl({},t,o,{mode:r,mediaViewer:Js,contentToolbar:tl})))})),reducers:{geostory:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d.ADD:var n=t.id,r=t.path,o=t.position,i=t.element,a=Object(u.n)("currentStory.".concat(r),e),s=Object(f.get)(e,a,[]),l=Ne(s,o),c=s.slice();return c.splice(l,0,Ie({id:n},i)),Object(Ae.set)(a,c,e);case d.ADD_RESOURCE:var p=t.id,m=t.mediaType,y=t.data;return Object(Ae.set)("currentStory.resources",[{id:p,type:m,data:y}].concat(ke(e.currentStory&&e.currentStory.resources||[])),e);case d.CHANGE_MODE:return Object(Ae.set)("mode",t.mode,e);case d.EDIT_RESOURCE:var b=t.id,g=t.mediaType,h=t.data,v=Object(Ae.arrayUpdate)("currentStory.resources",{id:b,type:g,data:h},{id:b},e);return g===u.d.MAP&&e.currentStory.sections.reduce((function(e,t){return[].concat(ke(e),ke(Fe(b,"sections[",t)))}),[]).map((function(t){var n=Object(u.n)("currentStory.".concat(t,".map"),e);v=Object(Ae.set)(n,void 0,v)})),v;case d.REMOVE_RESOURCE:var S=t.id,w=t.mediaType,O=Object(Ae.arrayDelete)("currentStory.resources",{id:S},e);return e.currentStory.sections.reduce((function(e,t){return[].concat(ke(e),ke(Fe(S,"sections[",t)))}),[]).map((function(t){var n=Object(u.n)("currentStory.".concat(t,".resourceId"),e);if(O=Object(Ae.unset)(n,O),w===u.d.MAP){var r=Object(u.n)("currentStory.".concat(t,".map"),e);O=Object(Ae.unset)(r,O)}})),O;case d.LOADING_GEOSTORY:return Object(Ae.set)("loading"===t.name?"loading":"loadFlags.".concat(t.name),t.value,Object(Ae.set)("loading",t.value,e));case d.REMOVE:var j=t.path,E=Object(u.n)("currentStory.".concat(j),e),x=ke(E),P=x.pop(),C=Object(f.get)(e,x);return Object(f.isArray)(C)?(Object(f.isString)(P)&&(P=parseInt(P,10)),Object(Ae.set)(x,[].concat(ke(C.slice(0,P)),ke(C.slice(P+1))),e)):Object(Ae.unset)(E,e);case d.SET_CURRENT_STORY:var T=e.defaultSettings||{},M=t.story.settings||T;return Object(Ae.set)("currentStory",Ie(Ie({},t.story),{},{settings:M}),e);case d.SELECT_CARD:return Object(Ae.set)("selectedCard",e.selectedCard===t.card?"":t.card,e);case d.SET_CONTROL:var _=t.control,A=t.value;return Object(Ae.set)("controls.".concat(_),A,e);case d.SET_RESOURCE:var R=t.resource,I=e.currentStory&&e.currentStory.settings||{};return Object(Ae.compose)(Object(Ae.set)("resource",R),Object(Ae.set)("currentStory.settings.storyTitle",I.storyTitle||R.name))(e);case d.SAVED:case d.CLEAR_SAVE_ERROR:return Object(Ae.unset)("errors.save",e);case d.SAVE_ERROR:return Object(Ae.set)("errors.save",Object(f.castArray)(t.error),e);case d.TOGGLE_CARD_PREVIEW:return Object(Ae.set)("isCollapsed",!e.isCollapsed,e);case d.TOGGLE_SETTING:var D=Object(f.get)(e,"currentStory.settings.".concat(t.option));return Object(Ae.set)("currentStory.settings.".concat(t.option),!D,e);case d.TOGGLE_SETTINGS_PANEL:var k=!e.isSettingsEnabled,L=e.currentStory&&e.currentStory.settings||{};return Object(Ae.compose)(Object(Ae.set)("isSettingsEnabled",k),Object(Ae.set)("oldSettings",k?L:{}),Object(Ae.set)("currentStory.settings",k?Ie({},L):t.withSave?L:e.oldSettings))(e);case d.UPDATE:var N=t.path,F=t.mode,U=t.element,G=Object(u.n)("currentStory.".concat(N),e),B=Object(f.get)(e,G);return Object(f.isObject)(B)&&Object(f.isObject)(U)&&"merge"===F&&(U=Ie(Ie({},B),U)),Object(Ae.set)(G,U,e);case d.UPDATE_SETTING:return Object(Ae.set)("currentStory.settings.".concat(t.prop),t.value,e);case d.UPDATE_CURRENT_PAGE:if(t.columnId){var z=Object(f.find)(e.currentStory.sections,(function(e){return Object(f.find)(e.contents,{id:t.columnId})}));return z&&Object(f.find)(z.contents,{id:t.columnId})?Object(Ae.set)("currentPage",Ie(Ie({},e.currentPage),{},{columns:Ie(Ie({},e.currentPage.columns),{},De({},z.id,t.columnId))}),e):e}return Object(Ae.set)("currentPage",Ie(Ie({},e.currentPage),{},{sectionId:t.sectionId}),e);case d.TOGGLE_CONTENT_FOCUS:var W=t.status,V=t.target,H=t.selector,q=void 0===H?"":H,Y=t.hideContent,Q=void 0!==Y&&Y,K=t.path,Z=W?{target:V,selector:q,hideContent:Q,path:K}:void 0;return Object(Ae.set)("focusedContent",Z,e);case d.SET_PENDING_CHANGES:return Object(Ae.set)("pendingChanges",t.value,e);case d.SET_UPDATE_URL_SCROLL:return Object(Ae.set)("updateUrlOnScroll",t.value,e);default:return e}}},epics:r})},"./MapStore2/web/client/plugins/GridContainer.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=n("./node_modules/prop-types/index.js"),f=n("./node_modules/react/index.js"),m=n("./node_modules/react-bootstrap/es/index.js"),y=m.Grid,b=m.Row,g=m.Col,h=n("./MapStore2/web/client/plugins/containers/ToolsContainer.jsx"),v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(u,e);var t,n,r,l=s(u);function u(){var e;o(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return p(c(e=l.call.apply(l,[this].concat(n))),"getPanels",(function(){return e.props.items.filter((function(e){return e.tools})).reduce((function(e,t){return e.concat(t.tools.map((function(e,n){return{name:t.name+n,panel:e,cfg:t.cfg.toolsCfg?t.cfg.toolsCfg[n]:{}}})))}),[])})),p(c(e),"getTools",(function(){return e.props.items.sort((function(e,t){return e.position-t.position}))})),e}return t=u,(n=[{key:"render",value:function(){return f.createElement(h,{id:this.props.id,style:this.props.style,className:this.props.className,mapType:this.props.mapType,container:function(e){return f.createElement(y,{fluid:!0},f.createElement(b,null,e.children.map((function(e,t){return f.createElement(g,{key:t,xs:12,xsOffset:0,sm:6,smOffset:3},e)}))))},toolStyle:"primary",activeStyle:"default",stateSelector:"omnibar",tool:function(e){return f.createElement("div",null,e.children)},tools:this.getTools(),panels:this.getPanels()})}}])&&i(t.prototype,n),r&&i(t,r),u}(f.Component);p(v,"propTypes",{className:d.string,style:d.object,items:d.array,id:d.string,mapType:d.string}),p(v,"defaultProps",{items:[],className:"grid-home-container",style:{},id:"mapstore-grid-home",mapType:"leaflet"}),e.exports={GridContainerPlugin:v,reducers:{}}},"./MapStore2/web/client/plugins/History.jsx":function(e,t,n){var r=n("./node_modules/react/index.js"),o=n("./node_modules/react-redux/es/index.js").connect,i=n("./node_modules/object-assign/index.js"),a=n("./MapStore2/web/client/plugins/locale/Message.jsx"),s=n("./node_modules/react-bootstrap/es/index.js").Glyphicon,l=n("./node_modules/redux-undo/lib/index.js").ActionCreators,c=l.undo,u=l.redo,p=o((function(e){return{disabled:!((e.map&&e.map.past&&{past:e.map.past,future:e.map.future}||{past:[],future:[]}).past.length>0)}}),{onClick:c})(n("./MapStore2/web/client/components/mapcontrols/navigationhistory/UndoButton.jsx")),d=o((function(e){return{disabled:!((e.map&&e.map.past&&{past:e.map.past,future:e.map.future}||{past:[],future:[]}).future.length>0)}}),{onClick:u})(n("./MapStore2/web/client/components/mapcontrols/navigationhistory/RedoButton.jsx"));e.exports={UndoPlugin:i(p,{Toolbar:{name:"undo",position:5,tool:!0,tooltip:"history.undoBtnTooltip",icon:r.createElement(s,{glyph:"step-backward"}),help:r.createElement(a,{msgId:"helptexts.historyundo"}),priority:1}}),RedoPlugin:i(d,{Toolbar:{name:"redo",position:6,tool:!0,tooltip:"history.redoBtnTooltip",icon:r.createElement(s,{glyph:"step-forward"}),help:r.createElement(a,{msgId:"helptexts.historyredo"}),priority:1}}),reducers:{}}},"./MapStore2/web/client/plugins/Locate.jsx":function(e,t,n){var r=n("./node_modules/react/index.js"),o=n("./node_modules/react-redux/es/index.js").connect,i=n("./MapStore2/web/client/actions/locate.js").changeLocateState,a=n("./MapStore2/web/client/plugins/locale/Message.jsx"),s=n("./node_modules/react-bootstrap/es/index.js").Glyphicon,l=n("./node_modules/object-assign/index.js"),c=o((function(e){return{locate:e.locate&&e.locate.state||"ENABLED",tooltip:e.locate&&"FOLLOWING"===e.locate.state?"locate.tooltipDeactivate":"locate.tooltip"}}),{onClick:i})(n("./MapStore2/web/client/components/mapcontrols/locate/LocateBtn.jsx"));n("./MapStore2/web/client/plugins/locate/locate.css"),e.exports={LocatePlugin:l(c,{disablePluginIf:"{state('mapType') === 'cesium'}",Toolbar:{name:"locate",position:2,tool:!0,icon:r.createElement(s,{glyph:"screenshot"}),help:r.createElement(a,{msgId:"helptexts.locateBtn"}),priority:1}}),reducers:{locate:n("./MapStore2/web/client/reducers/locate.js")}}},"./MapStore2/web/client/plugins/MapFooter.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=n("./node_modules/react/index.js"),y=n("./node_modules/prop-types/index.js"),b=n("./MapStore2/web/client/plugins/containers/ToolsContainer.jsx"),g=n("./node_modules/recompose/es/Recompose.js").lifecycle,h={},v=g({componentDidMount:function(){if(h[this.props.id]){var e=document.getElementById(this.props.id);e&&e.parentNode&&!e.hasChildNodes()&&e.parentNode.replaceChild(h[this.props.id],e)}},shouldComponentUpdate:function(){return!1},componentWillUnmount:function(){h[this.props.id]=document.getElementById(this.props.id)}})((function(e){var t=e.id;return m.createElement("div",{id:t})})),S=[{element:m.createElement(v,{key:"attribution",id:"footer-attribution-container"})},{element:m.createElement(v,{key:"scalebar",id:"footer-scalebar-container"})}],w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(u,e);var t,n,r,i=c(u);function u(){var e;a(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return f(p(e=i.call.apply(i,[this].concat(n))),"getPanels",(function(){return e.props.items.filter((function(e){return e.tools})).reduce((function(e,t){return e.concat(t.tools.map((function(e,n){return{name:t.name+n,panel:e,cfg:t.cfg.toolsCfg?t.cfg.toolsCfg[n]:{}}})))}),[])})),f(p(e),"getTools",(function(){return[S[0]].concat(o(e.props.items.sort((function(e,t){return t.position-e.position}))),[S[1]])})),e}return t=u,(n=[{key:"render",value:function(){return m.createElement(b,{id:this.props.id,style:this.props.style,className:this.props.className,mapType:this.props.mapType,container:function(e){return m.createElement("div",e,e.children)},toolStyle:"primary",activeStyle:"default",stateSelector:"mapFooter",tool:function(e){return m.createElement("div",null,e.children)},tools:this.getTools(),panels:this.getPanels()})}}])&&s(t.prototype,n),r&&s(t,r),u}(m.Component);f(w,"propTypes",{className:y.string,style:y.object,items:y.array,id:y.string,mapType:y.string}),f(w,"defaultProps",{items:[],className:"mapstore-map-footer",style:{},id:"mapstore-map-footer",mapType:"leaflet"}),e.exports={MapFooterPlugin:w,reducers:{}}},"./MapStore2/web/client/plugins/MapImport.jsx":function(e,t,n){var r=n("./node_modules/react/index.js"),o=n("./node_modules/react-redux/es/index.js").connect,i=n("./MapStore2/web/client/plugins/locale/Message.jsx"),a=n("./MapStore2/web/client/actions/mapimport.js"),s=a.onError,l=a.setLoading,c=a.setLayers,u=a.onSelectLayer,p=a.onLayerAdded,d=a.onLayerSkipped,f=a.updateBBox,m=a.onSuccess,y=n("./MapStore2/web/client/actions/map.js").zoomToExtent,b=n("./MapStore2/web/client/actions/layers.js").addLayer,g=n("./MapStore2/web/client/actions/annotations.js").loadAnnotations,h=n("./MapStore2/web/client/selectors/annotations.js").annotationsLayerSelector,v=n("./MapStore2/web/client/actions/controls.js").toggleControl,S=n("./node_modules/object-assign/index.js"),w=n("./node_modules/react-bootstrap/es/index.js").Glyphicon,O=n("./MapStore2/web/client/selectors/maptype.js").mapTypeSelector;e.exports={MapImportPlugin:S({loadPlugin:function(e){n.e(10).then(function(){var t=n("./MapStore2/web/client/plugins/import/Import.jsx"),r=o((function(e){return{enabled:e.controls&&e.controls.mapimport&&e.controls.mapimport.enabled,layers:e.mapimport&&e.mapimport.layers||null,selected:e.mapimport&&e.mapimport.selected||null,bbox:e.mapimport&&e.mapimport.bbox||null,success:e.mapimport&&e.mapimport.success||null,errors:e.mapimport&&e.mapimport.errors||null,shapeStyle:e.style||{},mapType:O(e),annotationsLayer:h(e)}}),{setLayers:c,onLayerAdded:p,onLayerSkipped:d,onSelectLayer:u,onError:s,onSuccess:m,addLayer:b,loadAnnotations:g,onZoomSelected:y,updateBBox:f,setLoading:l,onClose:v.bind(null,"mapimport",null)})(t);e(r)}.bind(null,n)).catch(n.oe)},enabler:function(e){return e.mapimport&&e.mapimport.enabled||e.toolbar&&"import"===e.toolbar.active}},{disablePluginIf:"{state('mapType') === 'cesium'}",BurgerMenu:{name:"import",position:4,text:r.createElement(i,{msgId:"mapImport.title"}),icon:r.createElement(w,{glyph:"upload"}),action:v.bind(null,"mapimport",null),priority:2,doNotHide:!0}}),reducers:{mapimport:n("./MapStore2/web/client/reducers/mapimport.js"),style:n("./MapStore2/web/client/reducers/style.js")}}},"./MapStore2/web/client/plugins/Measure.jsx":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=n("./node_modules/react/index.js"),a=n("./node_modules/react-redux/es/index.js").connect,s=n("./node_modules/react-bootstrap/es/index.js").Glyphicon,l=n("./node_modules/object-assign/index.js"),c=n("./node_modules/reselect/es/index.js").createSelector,u=n("./MapStore2/web/client/plugins/locale/Message.jsx"),p=n("./MapStore2/web/client/actions/measurement.js"),d=p.changeMeasurement,f=p.changeUom,m=p.changeFormatMeasurement,y=p.changeCoordinates,b=p.addAnnotation,g=p.addAsLayer,h=p.init,v=p.setCurrentFeature,S=n("./MapStore2/web/client/actions/controls.js"),w=S.toggleControl,O=S.setControlProperty,j=n("./MapStore2/web/client/plugins/measure/index.js").MeasureDialog,E=n("./MapStore2/web/client/actions/annotations.js").highlightPoint,x=n("./MapStore2/web/client/selectors/maptype.js").isOpenlayers,P=n("./MapStore2/web/client/selectors/measurement.js"),C=P.isCoordinateEditorEnabledSelector,T=P.showAddAsAnnotationSelector,M=P.isTrueBearingEnabledSelector,_=n("./MapStore2/web/client/selectors/controls.js"),A=_.showCoordinateEditorSelector,R=_.measureSelector,I=w.bind(null,"measure",null),D=a(c([function(e){return{measurement:e.measurement||{},uom:e.measurement&&e.measurement.uom||{length:{unit:"m",label:"m"},area:{unit:"sqm",label:"m"}},lineMeasureEnabled:e.measurement&&e.measurement.lineMeasureEnabled,lineMeasureValueEnabled:!x(e),areaMeasureEnabled:e.measurement&&e.measurement.areaMeasureEnabled,areaMeasureValueEnabled:!x(e),bearingMeasureEnabled:e.measurement&&e.measurement.bearingMeasureEnabled,bearingMeasureValueEnabled:!x(e),isCoordinateEditorEnabled:C(e),showCoordinateEditor:A(e),showFeatureSelector:x(e),useSingleFeature:!x(e),withReset:x(e),showExportToGeoJSON:x(e),showAddAsAnnotation:T(e)&&x(e),trueBearing:M(e),showAddAsLayer:x(e),isCoordEditorEnabled:e.measurement&&!e.measurement.isDrawing,geomType:e.measurement&&e.measurement.geomType,format:e.measurement&&e.measurement.format||"decimal"}},function(e){return R(e)}],(function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({show:t},e)})),{toggleMeasure:d,onAddAnnotation:b,onChangeUom:f,onHighlightPoint:E,onChangeFormat:m,onInit:h,onChangeCoordinates:y,onChangeCurrentFeature:v,onClose:I,onMount:function(e){return O("measure","showCoordinateEditor",e)},onAddAsLayer:g},null,{pure:!1})(j);e.exports={MeasurePlugin:l(D,{disablePluginIf:"{state('mapType') === 'cesium'}",BurgerMenu:{name:"measurement",position:9,panel:!1,help:i.createElement(u,{msgId:"helptexts.measureComponent"}),tooltip:"measureComponent.tooltip",text:i.createElement(u,{msgId:"measureComponent.Measure"}),icon:i.createElement(s,{glyph:"1-ruler"}),action:function(){return O("measure","enabled",!0)}}}),reducers:{measurement:n("./MapStore2/web/client/reducers/measurement.js")},epics:n("./MapStore2/web/client/epics/measurement.js")}},"./MapStore2/web/client/plugins/MetadataExplorer.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=n("./node_modules/react/index.js"),y=n("./node_modules/prop-types/index.js"),b=n("./node_modules/react-redux/es/index.js").connect,g=n("./node_modules/object-assign/index.js"),h=n("./node_modules/reselect/es/index.js").createStructuredSelector,v=n("./node_modules/recompose/es/Recompose.js"),S=v.compose,w=v.branch,O=v.renderComponent,j=v.withProps,E=v.defaultProps,x=n("./MapStore2/web/client/components/catalog/CatalogServiceEditor.jsx").default,P=n("./node_modules/react-bootstrap/es/index.js"),C=P.Glyphicon,T=P.Panel,M=n("./node_modules/react-container-dimensions/lib/index.js").default,_=n("./MapStore2/web/client/actions/layers.js").changeLayerProperties,A=n("./MapStore2/web/client/actions/catalog.js"),R=A.addService,I=A.deleteService,D=A.textSearch,k=A.changeCatalogFormat,L=A.changeCatalogMode,N=A.changeUrl,F=A.changeTitle,U=A.changeServiceProperty,G=A.changeType,B=A.changeServiceFormat,z=A.changeSelectedService,W=A.addLayer,V=A.addLayerError,H=A.focusServicesList,q=A.changeText,Y=A.changeMetadataTemplate,Q=A.toggleAdvancedSettings,K=A.toggleThumbnail,Z=A.toggleTemplate,X=A.catalogClose,J=n("./MapStore2/web/client/actions/backgroundselector.js"),$=J.addBackgroundProperties,ee=J.clearModalParameters,te=J.backgroundAdded,ne=n("./MapStore2/web/client/selectors/locale.js"),re=ne.currentLocaleSelector,oe=ne.currentMessagesSelector,ie=n("./MapStore2/web/client/selectors/layers.js").layersSelector,ae=n("./MapStore2/web/client/actions/controls.js"),se=ae.setControlProperty,le=ae.toggleControl,ce=n("./MapStore2/web/client/selectors/catalog.js"),ue=ce.resultSelector,pe=ce.serviceListOpenSelector,de=ce.newServiceSelector,fe=ce.newServiceTypeSelector,me=ce.selectedServiceTypeSelector,ye=ce.searchOptionsSelector,be=ce.servicesSelector,ge=ce.servicesSelectorWithBackgrounds,he=ce.loadingErrorSelector,ve=ce.selectedServiceSelector,Se=ce.modeSelector,we=ce.layerErrorSelector,Oe=ce.activeSelector,je=ce.savingSelector,Ee=ce.authkeyParamNameSelector,xe=ce.searchTextSelector,Pe=ce.groupSelector,Ce=ce.pageSizeSelector,Te=ce.loadingSelector,Me=ce.selectedServiceLayerOptionsSelector,_e=n("./MapStore2/web/client/selectors/map.js").projectionSelector,Ae=n("./MapStore2/web/client/selectors/localizedLayerStyles.js").isLocalizedLayerStylesEnabledSelector,Re=n("./MapStore2/web/client/selectors/maplayout.js").mapLayoutValuesSelector,Ie=n("./MapStore2/web/client/selectors/backgroundselector.js"),De=Ie.metadataSourceSelector,ke=Ie.modalParamsSelector,Le=n("./MapStore2/web/client/components/I18N/Message.jsx"),Ne=n("./MapStore2/web/client/components/misc/panels/DockPanel.jsx");n("./MapStore2/web/client/plugins/metadataexplorer/css/style.css");var Fe=n("./MapStore2/web/client/utils/CatalogUtils.js"),Ue=h({searchOptions:ye,result:ue,loadingError:he,selectedService:ve,mode:Se,services:be,servicesWithBackgrounds:ge,layerError:we,active:Oe,dockStyle:function(e){return Re(e,{height:!0})},searchText:xe,group:Pe,source:De,layers:ie,modalParams:ke,authkeyParamNames:Ee,saving:je,openCatalogServiceList:pe,service:de,format:fe,selectedFormat:me,options:ye,layerOptions:Me,currentLocale:re,locales:oe,pageSize:Ce,loading:Te,crs:_e,isLocalizedLayerStylesEnabled:Ae}),Ge=S(j((function(e){var t=e.result,n=e.selectedFormat,r=e.options,o=e.layerOptions,i=e.services,a=e.selectedService,s=e.locales;return{records:t&&Fe.getCatalogRecords(n,t,d(d({},r),{},{layerOptions:o,service:i[a]}),s)||[]}})),E({buttonStyle:{marginBottom:"10px",marginRight:"5px"},formatOptions:[{label:"image/png",value:"image/png"},{label:"image/png8",value:"image/png8"},{label:"image/jpeg",value:"image/jpeg"},{label:"image/vnd.jpeg-png",value:"image/vnd.jpeg-png"},{label:"image/gif",value:"image/gif"}]}),w((function(e){return"edit"===e.mode}),O(x)))(n("./MapStore2/web/client/components/catalog/Catalog.jsx")),Be=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(u,e);var t,n,r,c=l(u);function u(){return i(this,u),c.apply(this,arguments)}return t=u,(n=[{key:"render",value:function(){var e=this,t={group:this.props.group||void 0},n=m.createElement(Ge,o({layerBaseConfig:t},this.props,{services:"backgroundSelector"===this.props.source?this.props.servicesWithBackgrounds:this.props.services}));return m.createElement("div",{id:"catalog-root",className:this.props.active?"catalog-active":"",style:{width:"100%",height:"100%",pointerEvents:"none"}},m.createElement(M,null,(function(t){var r=t.width;return m.createElement(Ne,{open:e.props.active,size:e.props.width/r>1?r:e.props.width,position:"right",bsStyle:"primary",title:m.createElement(Le,{msgId:"catalog.title"}),onClose:function(){return e.props.closeCatalog()},glyph:"folder-open",zIndex:1031,style:e.props.dockStyle},m.createElement(T,{id:e.props.id,style:e.props.panelStyle,className:e.props.panelClassName},n))})))}}])&&a(t.prototype,n),r&&a(t,r),u}(m.Component);f(Be,"propTypes",{id:y.string,source:y.string,active:y.bool,searchOnStartup:y.bool,serviceTypes:y.array,wrap:y.bool,wrapWithPanel:y.bool,panelStyle:y.object,panelClassName:y.string,closeCatalog:y.func,closeGlyph:y.string,buttonStyle:y.object,services:y.object,servicesWithBackgrounds:y.object,selectedService:y.string,style:y.object,dockProps:y.object,zoomToLayer:y.bool,isLocalizedLayerStylesEnabled:y.bool,width:y.number,dockStyle:y.object,group:y.string}),f(Be,"defaultProps",{id:"mapstore-metadata-explorer",serviceTypes:[{name:"csw",label:"CSW"},{name:"wms",label:"WMS"},{name:"wmts",label:"WMTS"},{name:"tms",label:"TMS",allowedProviders:["OpenStreetMap","OpenSeaMap","Stamen"]},{name:"wfs",label:"WFS"}],active:!1,wrap:!1,modal:!0,wrapWithPanel:!1,panelStyle:{zIndex:100,overflow:"hidden",height:"100%"},panelClassName:"catalog-panel",closeCatalog:function(){},closeGlyph:"1-close",zoomToLayer:!0,width:660,dockProps:{dimMode:"none",fluid:!1,position:"right",zIndex:1030},dockStyle:{},group:null,services:{},servicesWithBackgrounds:{}});var ze=b(Ue,{clearModal:ee,onSearch:D,onLayerAdd:W,closeCatalog:X,onChangeFormat:k,onChangeServiceFormat:B,onChangeUrl:N,onChangeType:G,onChangeTitle:F,onChangeMetadataTemplate:Y,onChangeText:q,onChangeServiceProperty:U,onChangeSelectedService:z,onChangeCatalogMode:L,onAddService:R,onToggleAdvancedSettings:Q,onToggleThumbnail:K,onToggleTemplate:Z,onDeleteService:I,onError:V,onAddBackgroundProperties:$,onFocusServicesList:H,onPropertiesChange:_,onAddBackground:te,onToggle:le.bind(null,"backgroundSelector",null),onLayerChange:se.bind(null,"backgroundSelector"),onStartChange:se.bind(null,"backgroundSelector","start")})(Be),We=n("./MapStore2/web/client/api/catalog/index.js").default;e.exports={MetadataExplorerPlugin:g(ze,{BurgerMenu:{name:"metadataexplorer",position:5,text:m.createElement(Le,{msgId:"catalog.title"}),icon:m.createElement(C,{glyph:"folder-open"}),action:se.bind(null,"metadataexplorer","enabled",!0,!0),doNotHide:!0},BackgroundSelector:{name:"MetadataExplorer",doNotHide:!0},TOC:{name:"MetadataExplorer",doNotHide:!0}}),reducers:{catalog:n("./MapStore2/web/client/reducers/catalog.js")},epics:n("./MapStore2/web/client/epics/catalog.js").default(We)}},"./MapStore2/web/client/plugins/MousePosition.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function i(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=n("./node_modules/react/index.js"),g=n("./node_modules/react-redux/es/index.js").connect,h=n("./node_modules/lodash/lodash.js").get,v=n("./MapStore2/web/client/selectors/map.js"),S=v.mapSelector,w=v.projectionDefsSelector,O=n("./MapStore2/web/client/components/I18N/Message.jsx"),j=n("./node_modules/react-bootstrap/es/index.js").Tooltip,E=n("./node_modules/reselect/es/index.js").createSelector,x=n("./node_modules/object-assign/index.js"),P=n("./node_modules/prop-types/index.js"),C=n("./MapStore2/web/client/actions/mousePosition.js").changeMousePositionCrs,T=n("./MapStore2/web/client/actions/map.js"),M=T.registerEventListener,_=T.unRegisterEventListener,A=n("./MapStore2/web/client/selectors/map.js").isMouseMoveCoordinatesActiveSelector,R=function(e,t,n){return t.showCenter&&e?e.center:t.showOnClick?n.clickPoint&&n.clickPoint.latlng?{x:n.clickPoint.latlng.lng,y:n.clickPoint.latlng.lat,crs:"EPSG:4326"}:{crs:"EPSG:4326"}:t},I=E([function(e){return e},S,function(e){return A(e)},function(e){return h(e,"mousePosition.position")||{}},function(e){return h(e,"mousePosition.crs","EPSG:4326")},function(e){return e.mapInfo||{}}],(function(e,t,n,r,o,i){return{enabled:n,mousePosition:R(t,r,i),projectionDefs:w(e),crs:o}})),D=g((function(e){return{pressed:A(e),active:A(e),tooltip:b.createElement(j,{id:"showMousePositionCoordinates"},b.createElement(O,{msgId:"showMousePositionCoordinates"})),tooltipPlace:"left",pressedStyle:"success active",defaultStyle:"primary",glyphicon:"mouse",btnConfig:{bsSize:"small"}}}),{registerEventListener:M,unRegisterEventListener:_},(function(e,t){return m(m({},e),{},{onClick:function(){return e.active?t.unRegisterEventListener("mousemove","mouseposition"):t.registerEventListener("mousemove","mouseposition")}})}))(n("./MapStore2/web/client/components/buttons/ToggleButton.jsx")),k=n("./MapStore2/web/client/components/mapcontrols/mouseposition/MousePosition.jsx"),L=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(f,e);var t,r,u,d=c(f);function f(){var e;a(this,f);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return y(p(e=d.call.apply(d,[this].concat(r))),"getTemplate",(function(e){return n("./MapStore2/web/client/components/mapcontrols/mouseposition sync recursive ^\\.\\/.*$")("./"+e)})),e}return t=f,(r=[{key:"render",value:function(){var e=this.props,t=e.degreesTemplate,n=e.projectedTemplate,r=i(e,["degreesTemplate","projectedTemplate"]);return b.createElement(k,o({degreesTemplate:this.getTemplate(t),projectedTemplate:this.getTemplate(n),toggle:b.createElement(D,null)},r))}}])&&s(t.prototype,r),u&&s(t,u),f}(b.Component);y(L,"propTypes",{degreesTemplate:P.string,projectedTemplate:P.string}),y(L,"defaultProps",{degreesTemplate:"MousePositionLabelDMS",projectedTemplate:"MousePositionLabelYX"});var N=g(I,{onCRSChange:C})(L);e.exports={MousePositionPlugin:x(N,{MapFooter:{name:"mousePosition",position:2,tool:!0,priority:1}}),reducers:{mousePosition:n("./MapStore2/web/client/reducers/mousePosition.js")}}},"./MapStore2/web/client/plugins/Notifications.jsx":function(e,t,n){var r=n("./MapStore2/web/client/actions/notifications.js"),o=r.hide,i=r.dispatchAction,a=n("./MapStore2/web/client/epics/notifications.js").clearNotificationOnLocationChange,s=n("./node_modules/react-redux/es/index.js").connect;e.exports={NotificationsPlugin:s((function(e){return{notifications:e&&e.notifications}}),{onRemove:o,onDispatch:i})(n("./MapStore2/web/client/components/notifications/NotificationContainer.jsx")),reducers:{notifications:n("./MapStore2/web/client/reducers/notifications.js")},epics:{clearNotificationOnLocationChange:a}}},"./MapStore2/web/client/plugins/QueryPanel.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=n("./node_modules/prop-types/index.js"),m=n("./node_modules/react/index.js"),y=n("./node_modules/react-redux/es/index.js").connect,b=n("./node_modules/react-sidebar/dist-modules/index.js").default,g=n("./node_modules/reselect/es/index.js").createSelector,h=n("./MapStore2/web/client/actions/layers.js"),v=h.changeLayerProperties,S=h.changeGroupProperties,w=h.toggleNode,O=h.sortNode,j=h.showSettings,E=h.hideSettings,x=h.updateSettings,P=h.updateNode,C=h.removeNode,T=n("./MapStore2/web/client/plugins/locale/Message.jsx"),M=n("./MapStore2/web/client/actions/layerCapabilities.js").getLayerCapabilities,_=n("./MapStore2/web/client/actions/layerFilter.js"),A=_.storeCurrentFilter,R=_.discardCurrentFilter,I=_.applyFilter,D=n("./MapStore2/web/client/actions/map.js").zoomToExtent,k=n("./MapStore2/web/client/actions/controls.js").toggleControl,L=n("./MapStore2/web/client/selectors/layers.js"),N=L.groupsSelector,F=L.selectedLayerLoadingErrorSelector,U=n("./MapStore2/web/client/selectors/map.js").mapSelector,G=n("./MapStore2/web/client/selectors/dashboard.js").isDashboardAvailable,B=n("./MapStore2/web/client/selectors/queryform.js"),z=B.crossLayerFilterSelector,W=B.availableCrossLayerFilterLayersSelector,V=B.storedFilterSelector,H=B.appliedFilterSelector,q=n("./node_modules/lodash/lodash.js").isEqual,Y=n("./MapStore2/web/client/utils/LayersUtils.js"),Q=n("./MapStore2/web/client/components/data/query/QueryBuilder.jsx"),K=n("./MapStore2/web/client/components/data/query/QueryPanelHeader.jsx"),Z=n("./MapStore2/web/client/epics/wfsquery.js"),X=Z.featureTypeSelectedEpic,J=Z.wfsQueryEpic,$=Z.viewportSelectedEpic,ee=Z.redrawSpatialFilterEpic,te=n("./MapStore2/web/client/epics/autocomplete.js"),ne=n("./node_modules/redux/es/index.js").bindActionCreators,re=n("./MapStore2/web/client/selectors/maplayout.js").mapLayoutValuesSelector,oe=n("./MapStore2/web/client/epics/layerfilter.js"),ie=n("./MapStore2/web/client/components/misc/ResizableModal.jsx"),ae=n("./MapStore2/web/client/components/misc/Portal.jsx"),se=n("./MapStore2/web/client/actions/queryform.js"),le=se.addGroupField,ce=se.addFilterField,ue=se.removeFilterField,pe=se.updateFilterField,de=se.updateExceptionField,fe=se.updateLogicCombo,me=se.removeGroupField,ye=se.changeCascadingValue,be=se.expandAttributeFilterPanel,ge=se.expandSpatialFilterPanel,he=se.expandCrossLayerFilterPanel,ve=se.selectSpatialMethod,Se=se.selectViewportSpatialMethod,we=se.selectSpatialOperation,Oe=se.removeSpatialSelection,je=se.changeSpatialFilterValue,Ee=se.showSpatialSelectionDetails,xe=se.setCrossLayerFilterParameter,Pe=se.addCrossLayerFilterField,Ce=se.updateCrossLayerFilterField,Te=se.removeCrossLayerFilterField,Me=se.resetCrossLayerFilter,_e=se.search,Ae=se.reset,Re=se.changeDwithinValue,Ie=se.zoneGetValues,De=se.zoneSearch,ke=se.zoneChange,Le=se.toggleMenu,Ne=n("./MapStore2/web/client/actions/wfsquery.js").initQueryPanel,Fe=n("./MapStore2/web/client/actions/draw.js").changeDrawingStatus,Ue=Ae.bind(null,"query"),Ge=y((function(e){return{useMapProjection:e.queryform.useMapProjection,groupLevels:e.queryform.groupLevels,groupFields:e.queryform.groupFields,filterFields:e.queryform.filterFields,attributes:e.query&&e.query.typeName&&e.query.featureTypes&&e.query.featureTypes[e.query.typeName]&&e.query.featureTypes[e.query.typeName].attributes,featureTypeError:e.query&&e.query.typeName&&e.query.featureTypes&&e.query.featureTypes[e.query.typeName]&&e.query.featureTypes[e.query.typeName].error,spatialField:e.queryform.spatialField,showDetailsPanel:e.queryform.showDetailsPanel,toolbarEnabled:e.queryform.toolbarEnabled,attributePanelExpanded:e.queryform.attributePanelExpanded,autocompleteEnabled:e.queryform.autocompleteEnabled,crossLayerExpanded:e.queryform.crossLayerExpanded,crossLayerFilterOptions:p({layers:W(e),crossLayerFilter:z(e)},e.queryform.crossLayerFilterOptions||{}),maxFeaturesWPS:e.queryform.maxFeaturesWPS,spatialPanelExpanded:e.queryform.spatialPanelExpanded,featureTypeConfigUrl:e.query&&e.query.url,searchUrl:e.query&&e.query.url,featureTypeName:e.query&&e.query.typeName,ogcVersion:"1.1.0",params:{typeName:e.query&&e.query.typeName},resultTitle:"Query Result",showGeneratedFilter:!1,allowEmptyFilter:!0,emptyFilterWarning:!0,maxHeight:e.map&&e.map.present&&e.map.present.size&&e.map.present.size.height,zoom:(U(e)||{}).zoom,projection:(U(e)||{}).projection}}),(function(e){return{attributeFilterActions:ne({onAddGroupField:le,onAddFilterField:ce,onRemoveFilterField:ue,onUpdateFilterField:pe,onUpdateExceptionField:de,onUpdateLogicCombo:fe,onRemoveGroupField:me,onChangeCascadingValue:ye,toggleMenu:Le,onExpandAttributeFilterPanel:be},e),spatialFilterActions:ne({onChangeSpatialFilterValue:je,onExpandSpatialFilterPanel:ge,onSelectSpatialMethod:ve,onSelectViewportSpatialMethod:Se,onSelectSpatialOperation:we,onChangeDrawingStatus:Fe,onRemoveSpatialSelection:Oe,onShowSpatialSelectionDetails:Ee,onChangeDwithinValue:Re,zoneFilter:Ie,zoneSearch:De,zoneChange:ke},e),queryToolbarActions:ne({onQuery:_e,onReset:Ue,onSaveFilter:A,onRestoreFilter:R,storeAppliedFilter:I,onChangeDrawingStatus:Fe},e),crossLayerFilterActions:ne({expandCrossLayerFilterPanel:he,setCrossLayerFilterParameter:xe,addCrossLayerFilterField:Pe,updateCrossLayerFilterField:Ce,removeCrossLayerFilterField:Te,resetCrossLayerFilter:Me},e)}}))(Q),Be=g([function(e){return e.controls&&e.controls.toolbar&&"toc"===e.controls.toolbar.active},N,function(e){return e.layers&&e.layers.settings||{expanded:!1,options:{opacity:1}}},function(e){return e.controls&&e.controls.queryPanel&&e.controls.queryPanel.enabled||!1},function(e){return re(e,{height:!0})},G,H,V,function(e){return e&&e.query&&e.query.isLayerFilter},F],(function(e,t,n,r,o,i,a,s,l,c){return{enabled:e,groups:t,settings:n,querypanelEnabled:r,layout:i?{}:o,appliedFilter:a,storedFilter:s,advancedToolbar:l,loadingError:c}})),ze=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(c,e);var t,n,r,s=a(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),d(l(t=s.call(this,e)),"getNoBackgroundLayers",(function(e){return"background"!==e.name})),d(l(t),"renderSidebar",(function(){return m.createElement(b,{open:t.props.querypanelEnabled,sidebar:t.renderQueryPanel(),sidebarClassName:"query-form-panel-container",touch:!1,styles:{sidebar:p(p({},t.props.layout),{},{zIndex:1024,width:600}),overlay:{zIndex:1023,width:0},root:{right:t.props.querypanelEnabled?0:"auto",width:"0",overflow:"visible"},content:{overflowY:"auto"}}},m.createElement("div",null))})),d(l(t),"onToggle",(function(){t.props.advancedToolbar&&!q(t.props.appliedFilter,t.props.storedFilter)?t.setState((function(){return{showModal:!0}})):t.props.onToggleQuery()})),d(l(t),"restoreAndClose",(function(){t.setState((function(){return{showModal:!1}})),t.props.onRestoreFilter(),t.props.onToggleQuery()})),d(l(t),"storeAndClose",(function(){t.setState((function(){return{showModal:!1}})),t.props.onSaveFilter(),t.props.onToggleQuery()})),d(l(t),"renderQueryPanel",(function(){return m.createElement("div",{className:"mapstore-query-builder"},m.createElement(Ge,{header:m.createElement(K,{loadingError:t.props.loadingError,onToggleQuery:t.onToggle}),spatialOperations:t.props.spatialOperations,spatialMethodOptions:t.props.spatialMethodOptions,toolsOptions:t.props.toolsOptions,featureTypeErrorText:m.createElement(T,{msgId:"layerProperties.featureTypeError"}),appliedFilter:t.props.appliedFilter,storedFilter:t.props.storedFilter,advancedToolbar:t.props.advancedToolbar,loadingError:t.props.loadingError}),m.createElement(ae,null,m.createElement(ie,{fade:!0,show:t.state.showModal,title:m.createElement(T,{msgId:"queryform.changedFilter"}),size:"xs",onClose:function(){return t.setState((function(){return{showModal:!1}}))},buttons:[{bsStyle:"primary",text:m.createElement(T,{msgId:"yes"}),onClick:t.storeAndClose},{bsStyle:"primary",text:m.createElement(T,{msgId:"no"}),onClick:t.restoreAndClose}]},m.createElement("div",{className:"ms-alert"},m.createElement("div",{className:"ms-alert-center"},m.createElement(T,{msgId:t.props.loadingError?"queryform.changedFilterWithErrorAlert":"queryform.changedFilterAlert"}))))))})),t.state={showModal:!1},t}return t=c,(n=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){!0===e.querypanelEnabled&&!1===this.props.querypanelEnabled&&this.props.onInit()}},{key:"render",value:function(){return this.renderSidebar()}}])&&o(t.prototype,n),r&&o(t,r),c}(m.Component);d(ze,"propTypes",{id:f.number,buttonContent:f.node,groups:f.array,settings:f.object,querypanelEnabled:f.bool,groupStyle:f.object,groupPropertiesChangeHandler:f.func,layerPropertiesChangeHandler:f.func,onToggleGroup:f.func,onToggleLayer:f.func,onToggleQuery:f.func,onZoomToExtent:f.func,retrieveLayerData:f.func,onSort:f.func,onInit:f.func,onSettings:f.func,hideSettings:f.func,updateSettings:f.func,updateNode:f.func,removeNode:f.func,activateRemoveLayer:f.bool,activateLegendTool:f.bool,activateZoomTool:f.bool,activateSettingsTool:f.bool,visibilityCheckType:f.string,settingsOptions:f.object,layout:f.object,toolsOptions:f.object,appliedFilter:f.object,storedFilter:f.object,advancedToolbar:f.bool,onSaveFilter:f.func,onRestoreFilter:f.func}),d(ze,"defaultProps",{groupPropertiesChangeHandler:function(){},layerPropertiesChangeHandler:function(){},retrieveLayerData:function(){},onToggleGroup:function(){},onToggleLayer:function(){},onToggleQuery:function(){},onZoomToExtent:function(){},onSettings:function(){},onInit:function(){},updateNode:function(){},removeNode:function(){},activateLegendTool:!0,activateZoomTool:!0,activateSettingsTool:!0,activateRemoveLayer:!0,visibilityCheckType:"checkbox",settingsOptions:{},querypanelEnabled:!1,layout:{},toolsOptions:{},onSaveFilter:function(){},onRestoreFilter:function(){}});var We=y(Be,{groupPropertiesChangeHandler:S,layerPropertiesChangeHandler:v,retrieveLayerData:M,onToggleGroup:Y.toggleByType("groups",w),onToggleLayer:Y.toggleByType("layers",w),onToggleQuery:k.bind(null,"queryPanel",null),onSort:Y.sortUsing(Y.sortLayers,O),onSettings:j,onInit:Ne,onZoomToExtent:D,hideSettings:E,updateSettings:x,updateNode:P,removeNode:C,onSaveFilter:A,onRestoreFilter:R})(ze);e.exports={QueryPanelPlugin:We,reducers:{queryform:n("./MapStore2/web/client/reducers/queryform.js"),query:n("./MapStore2/web/client/reducers/query.js"),layerFilter:n("./MapStore2/web/client/reducers/layerFilter.js")},epics:p(p(p({featureTypeSelectedEpic:X,wfsQueryEpic:J,viewportSelectedEpic:$,redrawSpatialFilterEpic:ee},te),n("./MapStore2/web/client/epics/queryform.js")),oe)}},"./MapStore2/web/client/plugins/RasterStyler.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=n("./node_modules/prop-types/index.js"),f=n("./node_modules/react/index.js"),m=n("./node_modules/react-redux/es/index.js").connect,y=n("./node_modules/react-bootstrap/es/index.js"),b=y.Grid,g=y.Row,h=y.Col,v=y.Panel,S=y.PanelGroup,w=y.Button,O=y.Glyphicon,j=n("./node_modules/react-widgets/lib/index.js").Combobox,E=n("./MapStore2/web/client/utils/AgentUtils.js").getWindowSize,x=n("./MapStore2/web/client/actions/rasterstyler.js"),P=x.setRasterStyleParameter,C=x.setRasterLayer,T=n("./MapStore2/web/client/actions/layers.js").changeLayerProperties,M=n("./MapStore2/web/client/plugins/rasterstyler/index.js"),_=M.RedBandSelector,A=M.BlueBandSelector,R=M.GreenBandSelector,I=M.GrayBandSelector,D=M.PseudoBandSelector,k=M.RasterStyleTypePicker,L=M.EqualInterval,N=M.PseudoColor,F=M.OpacityPicker,U=n("./MapStore2/web/client/selectors/layers.js").layersSelector,G=n("./node_modules/reselect/es/index.js").createSelector,B=n("./node_modules/object-assign/index.js");n("./MapStore2/web/client/plugins/rasterstyler/rasterstyler.css");var z=n("./MapStore2/web/client/plugins/locale/Message.jsx"),W=n("./MapStore2/web/client/utils/SLDUtils.js").jsonToSLD,V=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(u,e);var t,n,r,l=s(u);function u(){var e;o(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return p(c(e=l.call.apply(l,[this].concat(n))),"getPanelStyle",(function(){var e=E(),t=e.maxHeight-10,n={maxHeight:t,maxWidth:e.maxWidth-70};return t<600&&(n.height=t,n.overflowY="auto"),n})),p(c(e),"renderError",(function(){return e.props.error?f.createElement(g,null,f.createElement(h,{xs:12},f.createElement("div",{className:"rasterstyler-error"},f.createElement("span",null,e.props.error)))):null})),p(c(e),"renderWarning",(function(e){return e?null:f.createElement(g,null,f.createElement(h,{xs:12},f.createElement("div",{className:"rasterstyler-warning"},f.createElement("span",null,f.createElement(z,{msgId:"print.layoutWarning"})))))})),p(c(e),"renderSelector",(function(){return f.createElement(g,{style:{marginBottom:"22px"}},f.createElement(g,null,e.props.hideLayerSelector?null:f.createElement(h,{xs:4},f.createElement("label",null,f.createElement(z,{msgId:"rasterstyler.layerlabel"})),f.createElement(j,{data:e.props.layers.reverse(),value:e.props.layer?e.props.layer.id:null,onChange:function(t){return e.props.selectLayer(t)},valueField:"id",textField:"title"})),e.props.layer?f.createElement(h,{xs:4},f.createElement("label",null,f.createElement(z,{msgId:"rasterstyler.typelabel"})),f.createElement(k,{styletype:e.props.styletype})," "):null,e.props.layer?f.createElement(h,{xs:4,style:{paddingRight:"27px",paddingTop:"7px"}},f.createElement("label",null,f.createElement(z,{msgId:"rasterstyler.opacitylabel"})),f.createElement(F,{disabled:e.canApply(),opacity:e.props.opacity})):null))})),p(c(e),"renderRasterStyler",(function(){return e.props.layer?f.createElement(g,null,"gray"===e.props.styletype?e.renderGreyscale():null,"rgb"===e.props.styletype?e.renderRGB():null,"pseudo"===e.props.styletype?e.renderPseudocolor():null):null})),p(c(e),"renderRGB",(function(){return f.createElement(S,{defaultActiveKey:"1",accordion:!0},f.createElement(v,{header:f.createElement("label",null,f.createElement(z,{msgId:"rasterstyler.redtitle"})),eventKey:"1"},f.createElement(_,{bands:e.bands})),f.createElement(v,{header:f.createElement("label",null,f.createElement(z,{msgId:"rasterstyler.greentitle"})),eventKey:"2"},f.createElement(R,{bands:e.bands})),f.createElement(v,{header:f.createElement("label",null,f.createElement(z,{msgId:"rasterstyler.bluetitle"})),eventKey:"3"},f.createElement(A,{bands:e.bands})))})),p(c(e),"renderGreyscale",(function(){return f.createElement(v,{header:f.createElement("label",null,f.createElement(z,{msgId:"rasterstyler.graytitle"})),eventKey:"1"},f.createElement(I,{bands:e.bands}))})),p(c(e),"renderPseudocolor",(function(){return f.createElement(S,{activeKey:e.props.rasterstyler.pseudocolor.activepanel,onSelect:function(t){return e.props.setRasterStyleParameter("pseudocolor","activepanel",t)},accordion:!0},f.createElement(v,{header:f.createElement("label",null,f.createElement(z,{msgId:"rasterstyler.pseudobandtitle"})),eventKey:"3"},f.createElement(D,{bands:e.bands?["none"].concat(e.bands):["none","1","2","3"]})),f.createElement(v,{header:f.createElement("label",null,f.createElement(z,{msgId:"rasterstyler.eqinttitle"})),eventKey:"1"},f.createElement(L,{onClassify:e.classify})),f.createElement(v,{header:f.createElement("label",null,f.createElement(z,{msgId:"rasterstyler.pseudotitle"})),eventKey:"2"},"2"===e.props.rasterstyler.pseudocolor.activepanel?f.createElement(N,null):null))})),p(c(e),"renderApplyBtn",(function(){return f.createElement(g,null,f.createElement(w,{style:{float:"right"},onClick:e.apply,disabled:e.canApply()},f.createElement(z,{msgId:"rasterstyler.applybtn"})))})),p(c(e),"renderBody",(function(){return f.createElement(b,{fluid:!0},e.renderError(),e.renderSelector(),e.renderRasterStyler(),e.props.layer?e.renderApplyBtn():null)})),p(c(e),"classify",(function(t,n){var r=n.map((function(e){return e.label=e.quantity.toFixed(2),e}));e.props.setRasterStyleParameter("pseudocolor","activepanel","2"),e.props.setRasterStyleParameter("pseudocolor","colorMapEntry",r)})),p(c(e),"apply",(function(){var t=W({styletype:e.props.styletype,opacity:e.props.opacity,state:e.props.rasterstyler,layer:e.props.layer});e.props.changeLayerProperties(e.props.layer.id,{params:B({},e.props.layer.params,{SLD_BODY:t})})})),p(c(e),"canApply",(function(){var t=e.props.rasterstyler,n=0;return t&&t.pseudocolor&&(n="ramp"===t.pseudocolor.type||"intervals"===t.pseudocolor.type?1:0),"pseudo"===e.props.styletype&&e.props.rasterstyler.pseudocolor.colorMapEntry.length<=n})),e}return t=u,(n=[{key:"UNSAFE_componentWillMount",value:function(){}},{key:"UNSAFE_componentWillUpdate",value:function(e){this.bands=e.layer&&e.layer.describeLayer?e.layer.describeLayer.bands:void 0}},{key:"render",value:function(){return this.props.forceOpen||this.props.open?this.props.withContainer?f.createElement(v,{className:"mapstore-rasterstyler-panel",style:this.getPanelStyle(),header:f.createElement("label",null,f.createElement(z,{msgId:"rasterstyler.paneltitle"}))},this.renderBody()):this.renderBody():null}}])&&i(t.prototype,n),r&&i(t,r),u}(f.Component);p(V,"propTypes",{layers:d.array,layer:d.object,styletype:d.oneOf(["rgb","gray","pseudo"]),opacity:d.string,withContainer:d.bool,open:d.bool,forceOpen:d.bool,style:d.object,selectLayer:d.func,setRasterStyleParameter:d.func,error:d.string,rasterstyler:d.object,changeLayerProperties:d.func,hideLayerSelector:d.bool}),p(V,"contextTypes",{messages:d.object}),p(V,"defaultProps",{open:!1,forceOpen:!1,layers:[],layer:null,withContainer:!0,selectLayer:function(){},setRasterStyleParameter:function(){},styletype:"pseudo",opacity:"1.00",style:{},rasterstyler:{},changeLayerProperties:function(){},hideLayerSelector:!1});var H=m(G([function(e){return e.controls.toolbar&&"rasterstyler"===e.controls.toolbar.active},function(e){return e.rasterstyler&&e.rasterstyler.layer},function(e){return e.rasterstyler&&e.rasterstyler.typepicker&&e.rasterstyler.typepicker.styletype},function(e){return e.rasterstyler&&e.rasterstyler.opacitypicker&&e.rasterstyler.opacitypicker.opacity},U,function(e){return e.rasterstyler}],(function(e,t,n,r,o,i){return{open:e,layer:t,styletype:n,opacity:r,layers:o.filter((function(e){return"background"!==e.group})),rasterstyler:i}})),{setRasterStyleParameter:P,selectLayer:C,changeLayerProperties:T})(V);e.exports={RasterStylerPlugin:B(H,{Toolbar:{name:"rasterstyler",help:f.createElement(z,{msgId:"helptexts.rasterstyler"}),tooltip:"rasterstyler.tooltip",icon:f.createElement(O,{glyph:"pencil"}),position:9,panel:!0,exclusive:!0}}),reducers:{rasterstyler:n("./MapStore2/web/client/reducers/rasterstyler.js")}}},"./MapStore2/web/client/plugins/RulesEditor.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=n("./node_modules/react/index.js"),d=n("./node_modules/prop-types/index.js"),f=n("./node_modules/reselect/es/index.js").createSelector,m=n("./node_modules/recompose/es/Recompose.js").compose,y=n("./node_modules/react-redux/es/index.js").connect,b=n("./MapStore2/web/client/actions/rulesmanager.js"),g=b.cleanEditing,h=b.saveRule,v=b.setLoading,S=n("./MapStore2/web/client/selectors/rulesmanager.js"),w=S.activeRuleSelector,O=S.geometryStateSel,j=n("./MapStore2/web/client/selectors/rulesmanager.js"),E=j.isEditorActive,x=j.isLoading,P=n("./MapStore2/web/client/plugins/manager/RulesEditor.jsx"),C=n("./MapStore2/web/client/plugins/manager/RulesToolbar.jsx"),T=n("./MapStore2/web/client/plugins/manager/EditorEnhancer.js"),M=m(y(f([w,O],(function(e,t){return{activeRule:e,geometryState:t}})),{onExit:g,onSave:h,setLoading:v}),T)(P),_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(c,e);var t,n,r,l=s(c);function c(){return o(this,c),l.apply(this,arguments)}return t=c,(n=[{key:"render",value:function(){var e=this;return this.props.editing?p.createElement("div",{className:"rulesmanager-editor"},p.createElement(M,{disableDetails:this.props.disableDetails,loading:this.props.loading,enabled:this.props.editing,onClose:function(){return e.props.setEditing(!1)},catalog:this.props.catalog})):p.createElement("div",{className:"ms-vertical-toolbar rules-editor re-toolbar",id:this.props.id},p.createElement(C,{loading:this.props.loading,transitionProps:!1,btnGroupProps:{vertical:!0},btnDefaultProps:{tooltipPosition:"right",className:"square-button-md",bsStyle:"primary"}}))}}])&&i(t.prototype,n),r&&i(t,r),c}(p.Component);u(_,"propTypes",{id:d.string,editing:d.bool,limitDockHeight:d.bool,disableDetails:d.bool,fluid:d.bool,zIndex:d.number,dockSize:d.number,position:d.string,onMount:d.func,onUnmount:d.func,setEditing:d.func,dimMode:d.string,src:d.string,style:d.object,loading:d.bool}),u(_,"defaultProps",{id:"rules-editor",editing:!1,dockSize:500,limitDockHeight:!0,zIndex:1e4,fluid:!1,dimMode:"none",position:"left",setEditing:function(){}});var A=y(f([E,x],(function(e,t){return{editing:e,loading:t}})),{})(_);e.exports={RulesEditorPlugin:A,reducers:{rulesmanager:n("./MapStore2/web/client/reducers/rulesmanager.js")},epics:n("./MapStore2/web/client/epics/rulesmanager.js")}},"./MapStore2/web/client/plugins/Save.jsx":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/react/index.js"),o=n.n(r),i=n("./node_modules/recompose/es/Recompose.js"),a=n("./node_modules/react-redux/es/index.js"),s=n("./node_modules/reselect/es/index.js"),l=n("./node_modules/react-bootstrap/es/index.js"),c=n("./MapStore2/web/client/components/I18N/Message.jsx"),u=n.n(c),p=n("./MapStore2/web/client/selectors/map.js"),d=n("./MapStore2/web/client/selectors/security.js"),f=n("./MapStore2/web/client/utils/PluginsUtils.js"),m=n("./MapStore2/web/client/actions/controls.js"),y=n("./MapStore2/web/client/actions/config.js"),b=n("./MapStore2/web/client/plugins/maps/MapSave.jsx");t.default=Object(f.createPlugin)("Save",{component:Object(i.compose)(Object(a.connect)(Object(s.createSelector)((function(e){return e.controls&&e.controls.mapSave&&e.controls.mapSave.enabled}),p.mapInfoSelector,(function(e,t){return{show:e,resource:t}})),{onClose:m.toggleControl.bind(null,"mapSave",!1),onResetMapSaveError:y.mapSaved}))(b.a),containers:{BurgerMenu:{name:"save",position:30,text:o.a.createElement(u.a,{msgId:"save"}),icon:o.a.createElement(l.Glyphicon,{glyph:"floppy-open"}),action:m.toggleControl.bind(null,"mapSave",null),selector:Object(s.createSelector)(d.isLoggedIn,p.mapInfoSelector,(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.canEdit,r=t.id;return{style:e&&r&&n?{}:{display:"none"}}}))}}})},"./MapStore2/web/client/plugins/SaveAs.jsx":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/react/index.js"),o=n.n(r),i=n("./node_modules/recompose/es/Recompose.js"),a=n("./node_modules/react-redux/es/index.js"),s=n("./node_modules/reselect/es/index.js"),l=n("./node_modules/react-bootstrap/es/index.js"),c=n("./node_modules/lodash/lodash.js"),u=n("./MapStore2/web/client/components/I18N/Message.jsx"),p=n.n(u),d=n("./MapStore2/web/client/selectors/map.js"),f=n("./MapStore2/web/client/selectors/security.js"),m=n("./MapStore2/web/client/utils/PluginsUtils.js"),y=n("./MapStore2/web/client/actions/controls.js"),b=n("./MapStore2/web/client/actions/config.js"),g=n("./MapStore2/web/client/plugins/maps/MapSave.jsx");function h(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}t.default=Object(m.createPlugin)("SaveAs",{component:Object(i.compose)(Object(a.connect)(Object(s.createSelector)((function(e){return e.controls&&e.controls.mapSaveAs&&e.controls.mapSaveAs.enabled}),d.mapInfoSelector,(function(e,t){var n=t||{};n.id,n.attributes,n.name,n.description;return{show:e,resource:h(n,["id","attributes","name","description"])}})),{onClose:y.toggleControl.bind(null,"mapSaveAs",!1),onResetMapSaveError:b.mapSaved}),Object(i.withProps)({isMapSaveAs:!0}))(g.a),containers:{BurgerMenu:{name:"saveAs",position:31,text:o.a.createElement(p.a,{msgId:"saveAs"}),icon:o.a.createElement(l.Glyphicon,{glyph:"floppy-open"}),action:y.toggleControl.bind(null,"mapSaveAs",null),selector:function(e){return e&&e.controls&&e.controls.saveAs&&e.controls.saveAs.allowedRoles?-1!==Object(c.indexOf)(e.controls.saveAs.allowedRoles,e&&e.security&&e.security.user&&e.security.user.role)?{}:{style:{display:"none"}}:{style:Object(f.isLoggedIn)(e)?{}:{display:"none"}}}}}})},"./MapStore2/web/client/plugins/Search.jsx":function(e,t,n){var r,o;function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f(this,n)}}function f(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?m(e):t}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=n("./node_modules/prop-types/index.js"),h=n("./node_modules/react/index.js"),v=n("./node_modules/react-redux/es/index.js").connect,S=n("./node_modules/reselect/es/index.js").createSelector,w=n("./node_modules/object-assign/index.js"),O=n("./node_modules/lodash/lodash.js"),j=O.get,E=O.isArray,x=n("./MapStore2/web/client/epics/search.js"),P=x.searchEpic,C=x.searchOnStartEpic,T=x.searchItemSelected,M=x.zoomAndAddPointEpic,_=x.textSearchShowGFIEpic,A=n("./MapStore2/web/client/utils/SearchUtils.js").defaultIconStyle,R=n("./MapStore2/web/client/selectors/map.js").mapSelector,I=n("./MapStore2/web/client/actions/searchbookmarkconfig.js").setSearchBookmarkConfig,D=n("./MapStore2/web/client/actions/map.js").zoomToExtent,k=n("./MapStore2/web/client/actions/config.js").configureMap,L=n("./MapStore2/web/client/actions/search.js"),N=L.resultsPurge,F=L.resetSearch,U=L.addMarker,G=L.searchTextChanged,B=L.textSearch,z=L.selectSearchItem,W=L.cancelSelectedItem,V=L.changeActiveSearchTool,H=L.zoomAndAddPoint,q=L.changeFormat,Y=L.changeCoord,Q=L.updateResultsStyle,K=L.showGFI,Z=n("./MapStore2/web/client/actions/controls.js").toggleControl,X=n("./MapStore2/web/client/actions/additionallayers.js").removeAdditionalLayer,J=v(S([function(e){return e.search||null},function(e){return e.controls&&e.controls.searchservicesconfig||null},function(e){return e.controls&&e.controls.searchBookmarkConfig||null},function(e){return e.mapConfigRawData||{}},function(e){return e.searchbookmarkconfig||{}}],(function(e,t,n,r,o){return{enabledSearchServicesConfig:t&&t.enabled||!1,enabledSearchBookmarkConfig:n&&n.enabled||!1,error:e&&e.error,coordinate:e&&e.coordinate||{},loading:e&&e.loading,searchText:e?e.searchText:"",activeSearchTool:j(e,"activeSearchTool","addressSearch"),format:j(e,"format","decimal"),selectedItems:e&&e.selectedItems,mapInitial:r,bookmarkConfig:o||{}}})),{onSearch:B,onChangeCoord:Y,onChangeActiveSearchTool:V,onClearCoordinatesSearch:X,onChangeFormat:q,onToggleControl:Z,onZoomToPoint:H,onPurgeResults:N,onSearchReset:F,onSearchTextChange:G,onCancelSelectedItem:W,onPropertyChange:I,onZoomToExtent:D,onLayerVisibilityLoad:k})(n("./MapStore2/web/client/components/mapcontrols/search/SearchBar.jsx").default),$=n("./MapStore2/web/client/selectors/layers.js").layersSelector,ee=n("./node_modules/react-responsive/dist/react-responsive.js"),te=v(S([R,$,function(e){return e.search||null}],(function(e,t,n){return{mapConfig:e,layers:t,results:n?n.results:null}})),{onItemClick:z,addMarker:U,showGFI:K})(n("./MapStore2/web/client/components/mapcontrols/search/SearchResultList.jsx").default),ne=n("./MapStore2/web/client/plugins/searchbar/ToggleButton.jsx"),re=v((function(e){return{enabled:e.controls&&e.controls.search&&e.controls.search.enabled||!1,selectedServices:e&&e.search&&e.search.selectedServices,selectedItems:e&&e.search&&e.search.selectedItems,textSearchConfig:e&&e.searchconfig&&e.searchconfig.textSearchConfig}}),{onUpdateResultsStyle:Q})((o=r=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(i,e);var t,n,r,o=d(i);function i(){var e;c(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return b(m(e=o.call.apply(o,[this].concat(n))),"getServiceOverrides",(function(t){return e.props.selectedItems&&e.props.selectedItems[e.props.selectedItems.length-1]&&j(e.props.selectedItems[e.props.selectedItems.length-1],t)})),b(m(e),"getSearchOptions",(function(){var t=e.props,n=t.searchOptions,r=t.textSearchConfig;return r&&r.services&&r.services.length>0?r.override?w({},n,{services:r.services}):w({},n,{services:n.services.concat(r.services)}):n})),b(m(e),"getCurrentServices",(function(){var t=e.props.selectedServices,n=e.getSearchOptions();return t&&t.length>0?w({},n,{services:t}):n})),b(m(e),"getSearchAndToggleButton",(function(){var t=h.createElement(J,l({key:"searchBar"},e.props,{searchOptions:e.getCurrentServices(),placeholder:e.getServiceOverrides("placeholder"),placeholderMsgId:e.getServiceOverrides("placeholderMsgId")}));return!0===e.props.withToggle?[h.createElement(ne,null)].concat(e.props.enabled?[t]:null):E(e.props.withToggle)?h.createElement("span",null,h.createElement(ee,{query:"("+e.props.withToggle[0]+")"},h.createElement(ne,null),e.props.enabled?t:null),h.createElement(ee,{query:"("+e.props.withToggle[1]+")"},t)):t})),e}return t=i,(n=[{key:"componentDidMount",value:function(){this.props.onUpdateResultsStyle(s(s({},A),this.props.resultsStyle))}},{key:"render",value:function(){return h.createElement("span",null,this.getSearchAndToggleButton(),h.createElement(te,{fitToMapSize:this.props.fitResultsToMapSize,searchOptions:this.props.searchOptions,onUpdateResultsStyle:this.props.onUpdateResultsStyle,key:"nominatimresults"}))}}])&&u(t.prototype,n),r&&u(t,r),i}(h.Component),b(r,"propTypes",{splitTools:g.bool,showOptions:g.bool,isSearchClickable:g.bool,fitResultsToMapSize:g.bool,searchOptions:g.object,resultsStyle:g.object,selectedItems:g.array,selectedServices:g.array,userServices:g.array,withToggle:g.oneOfType([g.bool,g.array]),enabled:g.bool,textSearchConfig:g.object}),b(r,"defaultProps",{searchOptions:{services:[{type:"nominatim",priority:5}]},isSearchClickable:!1,splitTools:!0,resultsStyle:{color:"#3388ff",weight:4,dashArray:"",fillColor:"#3388ff",fillOpacity:.2},fitResultsToMapSize:!0,withToggle:!1,enabled:!0}),o));e.exports={SearchPlugin:w(re,{OmniBar:{name:"search",position:1,tool:!0,priority:1}}),epics:{searchEpic:P,searchOnStartEpic:C,searchItemSelected:T,zoomAndAddPointEpic:M,textSearchShowGFIEpic:_},reducers:{search:n("./MapStore2/web/client/reducers/search.js"),mapInfo:n("./MapStore2/web/client/reducers/mapInfo.js")}}},"./MapStore2/web/client/plugins/SearchServicesConfig.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=n("./node_modules/react/index.js"),y=n("./node_modules/react-redux/es/index.js").connect,b=n("./node_modules/react-bootstrap/es/index.js"),g=b.Glyphicon,h=b.Button,v=n("./MapStore2/web/client/components/buttons/ConfirmButton.jsx"),S=n("./MapStore2/web/client/components/misc/Dialog.jsx"),w=n("./MapStore2/web/client/components/misc/Portal.jsx"),O=n("./MapStore2/web/client/plugins/locale/Message.jsx"),j=n("./node_modules/lodash/lodash.js").isEqual,E=n("./MapStore2/web/client/actions/controls.js").toggleControl,x=n("./MapStore2/web/client/actions/searchconfig.js"),P=x.setSearchConfigProp,C=x.updateService,T=x.restServiceConfig,M=n("./MapStore2/web/client/components/mapcontrols/searchservicesconfig/ServicesList.jsx"),_=n("./MapStore2/web/client/components/mapcontrols/searchservicesconfig/WFSServiceProps.jsx"),A=n("./MapStore2/web/client/components/mapcontrols/searchservicesconfig/ResultsProps.jsx"),R=n("./MapStore2/web/client/components/mapcontrols/searchservicesconfig/WFSOptionalProps.jsx"),I=n("./node_modules/prop-types/index.js"),D=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(u,e);var t,n,r,o=c(u);function u(){var e;a(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return f(p(e=o.call.apply(o,[this].concat(n))),"canProceed",(function(){var t=e.props,n=t.page,r=t.pages,o=t.service;return r[n].validate(o)})),f(p(e),"isDirty",(function(){var t=e.props,n=t.service,r=t.initServiceValues;return!j(n,r)})),f(p(e),"renderFooter",(function(){var t=e.props,n=t.page,r=t.pages;return 0===n?m.createElement("span",{role:"footer"},m.createElement(h,{onClick:e.addService,bsStyle:"primary"},m.createElement(O,{msgId:"search.addbtn"}))):n===r.length-1?m.createElement("span",{role:"footer"},m.createElement(h,{onClick:e.prev,bsStyle:"primary"},m.createElement(O,{msgId:"search.prevbtn"})),m.createElement(h,{disabled:!e.canProceed(),onClick:e.update,bsStyle:"success"},m.createElement(O,{msgId:"search.savebtn"}))):m.createElement("span",{role:"footer"},1===n&&e.isDirty()?m.createElement(v,{onConfirm:e.prev,bsStyle:"primary",confirming:{text:m.createElement(O,{msgId:"search.cancelconfirm"})},text:m.createElement(O,{msgId:"search.cancelbtn"})}):m.createElement(h,{onClick:e.prev,bsStyle:"primary"},m.createElement(O,{msgId:1===n?"search.cancelbtn":"search.prevbtn"})),m.createElement(h,{disabled:!e.canProceed(),onClick:e.next,bsStyle:"primary"},m.createElement(O,{msgId:"search.nextbtn"})))})),f(p(e),"onClose",(function(){e.props.toggleControl("searchservicesconfig"),e.props.restServiceConfig(0)})),f(p(e),"addService",(function(){var t=e.props.newService;e.props.onPropertyChange("init_service_values",t),e.props.onPropertyChange("service",t),e.props.onPropertyChange("page",1)})),f(p(e),"prev",(function(){var t=e.props.page;t>1?e.props.onPropertyChange("page",t-1):1===t&&e.props.restServiceConfig(0)})),f(p(e),"next",(function(){var t=e.props,n=t.page;n<t.pages.length-1&&e.props.onPropertyChange("page",n+1)})),f(p(e),"update",(function(){var t=e.props,n=t.service,r=t.editIdx;e.props.updateService(n,r)})),e}return t=u,(n=[{key:"render",value:function(){var e=this.props,t=e.enabled,n=e.pages,r=e.page,o=e.id,a=e.panelStyle,s=e.panelClassName,l=e.titleText,c=e.closeGlyph,u=e.onPropertyChange,p=e.service,d=e.textSearchConfig,f=void 0===d?{}:d,y=e.containerClassName,b=n&&n[r]||null;return t?m.createElement(w,null,m.createElement(S,{id:o,style:i(i({},a),{},{display:t?"block":"none"}),containerClassName:y,className:s,draggable:!1,modal:!0},m.createElement("span",{role:"header"},m.createElement("span",null,l),this.isDirty()?m.createElement(v,{className:"close",confirming:{text:m.createElement(O,{msgId:"search.cancelconfirm"}),className:"btn btn-sm btn-warning services-config-editor-confirm-close"},onConfirm:this.onClose,bsStyle:"primary",text:m.createElement(g,{glyph:c})}):m.createElement("button",{onClick:this.onClose,className:"close"},c?m.createElement(g,{glyph:c}):m.createElement("span",null,""))),m.createElement("div",{role:"body",className:"services-config-editor"},m.createElement(b.Element,{services:f.services,override:f.override,onPropertyChange:u,service:p})),this.renderFooter())):null}}])&&s(t.prototype,n),r&&s(t,r),u}(m.Component);f(D,"propTypes",{id:I.string,enabled:I.bool,panelStyle:I.object,panelClassName:I.string,containerClassName:I.string,closeGlyph:I.string,titleText:I.oneOfType([I.string,I.element]),toggleControl:I.func,pages:I.arrayOf(I.shape({Element:I.func.isRequired,validate:I.func.isRequired})),page:I.number,service:I.object,initServiceValues:I.object,onPropertyChange:I.func,newService:I.object.isRequired,updateService:I.func,restServiceConfig:I.func,textSearchConfig:I.object,editIdx:I.number}),f(D,"defaultProps",{id:"search-services-config-editor",enabled:!1,panelStyle:{minWidth:"400px",zIndex:2e3,position:"absolute",top:"100px",minHeight:"300px",left:"calc(50% - 150px)",backgroundColor:"white"},panelClassName:"toolbar-panel",containerClassName:"",closeGlyph:"1-close",titleText:m.createElement(O,{msgId:"search.configpaneltitle"}),closePanel:function(){},onPropertyChange:function(){},page:0,newService:{type:"wfs",name:"",displayName:"",subTitle:"",priority:1,options:{url:"",typeName:"",queriableAttributes:"",sortBy:"",maxFeatures:5,srsName:"EPSG:4326"}}});var k=y((function(e){var t=e.controls,n=void 0===t?{}:t,r=e.searchconfig,o=void 0===r?{}:r;return{enabled:n.searchservicesconfig&&n.searchservicesconfig.enabled||!1,pages:[M,_,A,R],page:o&&o.page||0,service:o&&o.service,initServiceValues:o&&o.init_service_values,textSearchConfig:o&&o.textSearchConfig,editIdx:o&&o.editIdx}}),{toggleControl:E,onPropertyChange:P,restServiceConfig:T,updateService:C})(D);e.exports={SearchServicesConfigPlugin:k,reducers:{searchconfig:n("./MapStore2/web/client/reducers/searchconfig.js")}}},"./MapStore2/web/client/plugins/Settings.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=n("./node_modules/prop-types/index.js"),y=n("./node_modules/react/index.js"),b=n("./node_modules/react-redux/es/index.js").connect,g=n("./MapStore2/web/client/actions/locale.js").loadLocale,h=n("./MapStore2/web/client/actions/controls.js").toggleControl,v=b((function(e){return{currentLocale:e.locale&&e.locale.current}}),{onLanguageChange:g.bind(null,null)})(n("./MapStore2/web/client/components/I18N/LangBar.jsx"));n("./MapStore2/web/client/plugins/settings/css/settings.css");var S=n("./MapStore2/web/client/components/mapcontrols/navigationhistory/HistoryBar.jsx"),w=n("./node_modules/redux-undo/lib/index.js").ActionCreators,O=w.undo,j=w.redo,E=n("./MapStore2/web/client/plugins/locale/Message.jsx"),x=n("./node_modules/react-bootstrap/es/index.js"),P=x.Glyphicon,C=x.FormGroup,T=x.Row,M=x.Col,_=n("./node_modules/object-assign/index.js"),A=n("./MapStore2/web/client/plugins/settings/SettingsPanel.jsx"),R=n("./MapStore2/web/client/utils/LocaleUtils.js"),I=n("./node_modules/react-bootstrap/es/index.js").Panel,D=n("./MapStore2/web/client/components/misc/Dialog.jsx"),k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(u,e);var t,n,r,o=c(u);function u(){var e;a(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return f(p(e=o.call.apply(o,[this].concat(n))),"renderSettings",(function(){var t={language:y.createElement("span",{key:"language-label"},y.createElement(C,null,y.createElement(T,null,y.createElement(M,{xs:12},y.createElement("label",null,y.createElement(E,{msgId:"language"})))),y.createElement(T,null,y.createElement(M,{xs:12},y.createElement(v,{dropdown:!1,locales:R.getSupportedLocales(),key:"langSelector"})))))},n={history:y.createElement(S,{key:"history",undoBtnProps:{onClick:e.props.undo,label:y.createElement(E,{msgId:"history.undoBtnTooltip"}),disabled:!(e.props.mapHistory.past.length>0)},redoBtnProps:{onClick:e.props.redo,label:y.createElement(E,{msgId:"history.redoBtnTooltip"}),disabled:!(e.props.mapHistory.future.length>0)}})};return Object.keys(t).filter(e.isEnabled).map((function(e){return t[e]})).concat(e.props.items.map((function(e){return e.tool}))).concat(Object.keys(n).filter(e.isEnabled).map((function(e){return n[e]})))})),f(p(e),"isEnabled",(function(t){return _({},e.props.settings,e.props.overrideSettings)[t]})),e}return t=u,(n=[{key:"render",value:function(){var e=y.createElement(A,{key:"SettingsPanel",role:"body",style:this.props.style},this.renderSettings());return this.props.wrap?this.props.visible?this.props.wrapWithPanel?y.createElement(I,{id:this.props.id,header:y.createElement("span",null,y.createElement("span",{className:"settings-panel-title"},y.createElement(E,{msgId:"settings"})),y.createElement("span",{className:"settings-panel-close panel-close",onClick:this.props.toggleControl})),style:this.props.panelStyle,className:this.props.panelClassName},e):y.createElement(D,{id:this.props.id,style:i(i({},this.props.panelStyle),{},{display:this.props.visible?"block":"none"}),className:this.props.panelClassName,draggable:!1,modal:!0},y.createElement("span",{role:"header"},y.createElement("span",{className:"settings-panel-title"},y.createElement(E,{msgId:"settings"})),y.createElement("button",{onClick:this.props.toggleControl,className:"settings-panel-close close"},this.props.closeGlyph?y.createElement(P,{glyph:this.props.closeGlyph}):y.createElement("span",null,""))),e):null:e}}])&&s(t.prototype,n),r&&s(t,r),u}(y.Component);f(k,"propTypes",{id:m.string,undo:m.func,redo:m.func,mapHistory:m.object,settings:m.object,overrideSettings:m.object,items:m.array,style:m.object,wrap:m.bool,wrapWithPanel:m.bool,panelStyle:m.object,panelClassName:m.string,visible:m.bool,toggleControl:m.func,closeGlyph:m.string}),f(k,"defaultProps",{id:"mapstore-settings",settings:{language:!0,history:!0},overrideSettings:{history:!1},items:[],style:{width:"300px"},wrap:!1,wrapWithPanel:!1,panelStyle:{minWidth:"300px",zIndex:1996,position:"absolute",overflow:"visible",top:"90px",left:"calc(50% - 150px)",backgroundColor:"white"},panelClassName:"toolbar-panel",visible:!1,toggleControl:function(){},closeGlyph:"1-close"});var L=b((function(e){return{mapHistory:e.map&&e.map.past&&{past:e.map.past,future:e.map.future}||{past:[],future:[]},visible:e.controls&&e.controls.settings&&e.controls.settings.enabled||!1,settings:{language:!!e.locale,history:!(!e.map||!e.map.history)}}}),{undo:O,redo:j,toggleControl:h.bind(null,"settings",null)})(k);e.exports={SettingsPlugin:_(L,{Toolbar:{name:"settings",position:100,tooltip:"settings",help:y.createElement(E,{msgId:"helptexts.settingsPanel"}),icon:y.createElement(P,{glyph:"cog"}),panel:!0,wrap:!0,exclusive:!0,priority:1},DrawerMenu:{name:"settings",position:3,title:"settings",priority:2},BurgerMenu:{name:"settings",position:100,text:y.createElement(E,{msgId:"settings"}),icon:y.createElement(P,{glyph:"cog"}),action:h.bind(null,"settings",null),priority:3,doNotHide:!0}}),reducers:{}}},"./MapStore2/web/client/plugins/Share.jsx":function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"readQueryParamsOnMapEpic",(function(){return D})),n.d(r,"onMapClickForShareEpic",(function(){return k})),n.d(r,"disableGFIForShareEpic",(function(){return L}));var o=n("./node_modules/react/index.js"),i=n.n(o),a=n("./MapStore2/web/client/utils/PluginsUtils.js"),s=n("./node_modules/object-assign/index.js"),l=n.n(s),c=n("./node_modules/react-bootstrap/es/index.js"),u=n("./MapStore2/web/client/components/I18N/Message.jsx"),p=n.n(u),d=n("./MapStore2/web/client/actions/controls.js"),f=n("./MapStore2/web/client/utils/ConfigUtils.js"),m=n.n(f),y=n("./MapStore2/web/client/utils/ShareUtils.js"),b=n.n(y),g=n("./MapStore2/web/client/utils/CoordinatesUtils.js"),h=n("./MapStore2/web/client/selectors/version.js"),v=n("./node_modules/rxjs/Rx.js"),S=n("./node_modules/connected-react-router/esm/actions.js"),w=n("./node_modules/lodash/lodash.js"),O=n("./node_modules/url/url.js"),j=n.n(O),E=n("./MapStore2/web/client/actions/map.js"),x=n("./MapStore2/web/client/actions/catalog.js"),P=n("./MapStore2/web/client/actions/search.js"),C=n("./MapStore2/web/client/actions/notifications.js"),T=n("./MapStore2/web/client/actions/mapInfo.js"),M=n("./MapStore2/web/client/utils/MapUtils.js"),_=n("./MapStore2/web/client/selectors/map.js");function A(e){return function(e){if(Array.isArray(e))return R(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return R(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return R(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var I={bbox:function(e){var t=e.value,n=(void 0===t?"":t).split(",").map((function(e){return parseFloat(e)})).filter((function(e,t){return t%2==0?e>-180.5&&e<180.5:e>=-90&&e<=90})).filter((function(e){return!Object(w.isNaN)(e)}));return n&&4===n.length&&Object(g.isValidExtent)(n)?[Object(E.zoomToExtent)(n,"EPSG:4326")]:[Object(C.warning)({title:"share.wrongBboxParamTitle",message:"share.wrongBboxParamMessage",position:"tc"})]},center:function(e){var t=e.value,n=void 0===t?{}:t,r=e.state,o=Object(_.mapSelector)(r),i=n&&!Object(w.isEmpty)(n.center)&&n.center.split(",").map((function(e){return!Object(w.isEmpty)(e)&&Object(w.toNumber)(e)})),a=i&&-1===i.indexOf(!1)&&Object(f.getCenter)(i),s=Object(w.toNumber)(n.zoom),l=Object(M.getBbox)(a,s),c=o&&o.size,u=o&&o.projection;return a&&Object(w.isObject)(a)&&Object(w.inRange)(a.y,-90,91)&&Object(w.inRange)(a.x,-180,181)&&Object(w.inRange)(s,1,36)?[Object(E.changeMapView)(a,s,l,c,null,u)]:[Object(C.warning)({title:"share.wrongCenterAndZoomParamTitle",message:"share.wrongCenterAndZoomParamMessage",position:"tc"})]},marker:function(e){var t=e.value,n=void 0===t?{}:t,r=e.state,o=Object(_.mapSelector)(r),i=n&&!Object(w.isEmpty)(n.marker)&&n.marker.split(",").map((function(e){return!Object(w.isEmpty)(e)&&Object(w.toNumber)(e)})),a=i&&2===i.length&&-1===i.indexOf(!1)&&Object(f.getCenter)(i),s=Object(w.toNumber)(n.zoom),l=Object(M.getBbox)(a,s),c=i&&i[0],u=i&&i[1],p=o&&o.size,d=o&&o.projection;return a&&i&&Object(w.isObject)(i)&&Object(w.inRange)(u,-90,91)&&Object(w.inRange)(c,-180,181)&&Object(w.inRange)(s,1,36)?[Object(E.changeMapView)(a,s,l,p,null,d),Object(P.addMarker)({lat:u,lng:c})]:[Object(C.warning)({title:"share.wrongMarkerAndZoomParamTitle",message:"share.wrongMarkerAndZoomParamMessage",position:"tc"})]},actions:function(e){var t=e.value,n=void 0===t?"":t,r=(Object(f.getConfigProp)("initialActionsWhiteList")||[]).concat([P.SEARCH_LAYER_WITH_FILTER,E.ZOOM_TO_EXTENT,x.ADD_LAYERS_FROM_CATALOGS]);if(Object(w.isString)(n)){var o=JSON.parse(n);return o.filter((function(e){return Object(w.includes)(r,e.type)}))}return[]}},D=function(e,t){return e.ofType(S.b).switchMap((function(){return e.ofType(E.CHANGE_MAP_VIEW).take(1).switchMap((function(){var e,n=t.getState(),r=Object(w.get)(n,"router.location.search")||"",o=(j.a.parse(r,!0)||{}).query,i=void 0===o?{}:o,a=Object.keys(i).reduce((function(e,t){return[].concat(A(e),A(I[t]&&I[t]({value:1===Object(w.size)(i)?i[t]:i,state:n})||[]))}),[]);return Object(w.head)(a)?(e=v.Observable).of.apply(e,A(a)):v.Observable.empty()}))}))},k=function(e,t){var n=t.getState,r=void 0===n?function(){}:n;return e.ofType(E.CLICK_ON_MAP).switchMap((function(e){var t=e.point,n=e.layer;return Object(w.get)(r(),"controls.share.settings.centerAndZoomEnabled")?v.Observable.of(Object(P.resetSearch)(),Object(T.featureInfoClick)(t,n)):v.Observable.empty()}))},L=function(e,t){var n=t.getState,r=void 0===n?function(){}:n;return e.ofType(d.TOGGLE_CONTROL).filter((function(e){return"share"===e.control})).switchMap((function(){var e=Object(w.get)(r(),"controls.share.enabled"),t=Object(w.get)(r(),"mapInfo.enabled");return!Object(w.isUndefined)(e)&&e?t?v.Observable.of(Object(T.toggleMapInfoState)()):v.Observable.empty():v.Observable.of(Object(T.hideMapinfoMarker)(),Object(T.purgeMapInfoResults)(),Object(T.toggleMapInfoState)(),Object(d.setControlProperty)("share","settings",{bboxEnabled:!1,centerAndZoomEnabled:!1}))}))},N=n("./node_modules/prop-types/index.js"),F=n.n(N),U=n("./MapStore2/web/client/components/misc/Dialog.jsx"),G=n.n(U),B=n("./MapStore2/web/client/utils/LocaleUtils.js"),z=n.n(B),W=n("./node_modules/react-share/lib/react-share.js");function V(e){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function H(){return(H=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function q(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Q(e,t){return(Q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function K(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=X(e);if(t){var o=X(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Z(this,n)}}function Z(e,t){return!t||"object"!==V(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function X(e){return(X=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function J(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $=W.ShareButtons.FacebookShareButton,ee=W.ShareButtons.LinkedinShareButton,te=W.ShareButtons.TwitterShareButton,ne=W.ShareCounts.FacebookShareCount,re=W.ShareCounts.LinkedinShareCount,oe=Object(W.generateShareIcon)("facebook"),ie=Object(W.generateShareIcon)("twitter"),ae=Object(W.generateShareIcon)("linkedin"),se=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Q(e,t)}(a,e);var t,n,r,o=K(a);function a(){return q(this,a),o.apply(this,arguments)}return t=a,(n=[{key:"render",value:function(){var e={};this.props.getCount&&(e.getCount=this.props.getCount);var t=this.props.sharedTitle||z.a.getMessageById(this.context.messages,"share.sharedTitle");return i.a.createElement("div",{className:"social-links"},i.a.createElement("h4",null,i.a.createElement(p.a,{msgId:"share.socialIntro"})),i.a.createElement("div",{className:"social-links-list"},i.a.createElement("div",{className:"social-box facebook"},i.a.createElement($,{url:this.props.shareUrl,quote:t,className:"share-facebook"},i.a.createElement(oe,{size:32,round:!0})),i.a.createElement(ne,H({url:this.props.shareUrl},e,{className:"share-facebook-count"}),(function(e){return e}))),i.a.createElement("div",{className:"social-box twitter"},i.a.createElement(te,{url:this.props.shareUrl,title:t,className:"share-twitter"},i.a.createElement(ie,{size:32,round:!0})),i.a.createElement("div",{className:"share-twitter-count"},"")),i.a.createElement("div",{className:"social-box linkedin"},i.a.createElement(ee,{url:this.props.shareUrl,title:t,className:"share-linkedin-count"},i.a.createElement(ae,{size:32,round:!0})),i.a.createElement(re,H({url:this.props.shareUrl},e,{className:"share-linkedin-count"}),(function(e){return e})))))}}])&&Y(t.prototype,n),r&&Y(t,r),a}(i.a.Component);J(se,"propTypes",{shareUrl:F.a.string,getCount:F.a.func,sharedTitle:F.a.string}),J(se,"contextTypes",{messages:F.a.object}),J(se,"defaultProps",{sharedTitle:""});var le=se,ce=n("./node_modules/react-copy-to-clipboard/lib/index.js"),ue=n.n(ce),pe=n("./MapStore2/web/client/components/misc/enhancers/tooltip.jsx"),de=n.n(pe)()(ue.a),fe=function(e){var t=e.shareUrl,n=void 0===t?"":t,r=e.copied,o=void 0!==r&&r,a=e.onCopy,s=void 0===a?function(){}:a,l=e.onMouseLeave,u=void 0===l?function(){}:l;return i.a.createElement(de,{text:n,tooltipId:o?"share.msgCopiedUrl":"share.msgToCopyUrl",tooltipPosition:"bottom",key:o.toString(),onCopy:function(){return s(n)}},i.a.createElement(c.Button,{bsStyle:"primary",onMouseLeave:function(){return u()}},i.a.createElement(c.Glyphicon,{glyph:"copy"})))};function me(e){return(me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function be(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ge(e,t){return(ge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function he(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=we(e);if(t){var o=we(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ve(this,n)}}function ve(e,t){return!t||"object"!==me(t)&&"function"!=typeof t?Se(e):t}function Se(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function we(e){return(we=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Oe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var je=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ge(e,t)}(a,e);var t,n,r,o=he(a);function a(){var e;ye(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Oe(Se(e=o.call.apply(o,[this].concat(n))),"state",{copied:!1}),e}return t=a,(n=[{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"input-link"},i.a.createElement("div",{className:"input-link-head"},i.a.createElement("h4",null,i.a.createElement(p.a,{msgId:"share.directLinkTitle"})),i.a.createElement(fe,{copied:this.state.copied,shareUrl:this.props.shareUrl,onCopy:function(){return e.setState({copied:!0})},onMouseLeave:function(){return e.setState({copied:!1})}})),i.a.createElement("pre",{style:{padding:0}},i.a.createElement(c.FormControl,{readOnly:!0,type:"text",value:this.props.shareUrl,onFocus:function(e){return e.target.select()}})))}}])&&be(t.prototype,n),r&&be(t,r),a}(i.a.Component);Oe(je,"propTypes",{shareUrl:F.a.string});var Ee=je;function xe(e){return(xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Te(e,t){return(Te=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Me(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Re(e);if(t){var o=Re(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _e(this,n)}}function _e(e,t){return!t||"object"!==xe(t)&&"function"!=typeof t?Ae(e):t}function Ae(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Re(e){return(Re=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var De=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Te(e,t)}(a,e);var t,n,r,o=Me(a);function a(){var e;Pe(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ie(Ae(e=o.call.apply(o,[this].concat(n))),"state",{copied:!1,forceDrawer:!1}),Ie(Ae(e),"renderTools",(function(){return e.props.showTOCToggle?i.a.createElement(c.Checkbox,{checked:e.state.forceDrawer,onChange:function(){return e.setState({forceDrawer:!e.state.forceDrawer})}},i.a.createElement(p.a,{msgId:"share.forceDrawer"})):null})),Ie(Ae(e),"generateUrl",(function(){var t=j.a.parse(e.props.shareUrl,!0);return e.state.forceDrawer&&(t.query.forceDrawer=!0),j.a.format(t)})),e}return t=a,(n=[{key:"render",value:function(){var e=this,t='<iframe style="border: none;" height="400" width="600" src="'+this.generateUrl(this.props.shareUrl)+'"></iframe>';return i.a.createElement("div",{className:"input-link"},i.a.createElement("div",{className:"input-link-head"},i.a.createElement("h4",null,i.a.createElement(p.a,{msgId:"share.embeddedLinkTitle"})),i.a.createElement(fe,{copied:this.state.copied,shareUrl:t,onCopy:function(){return e.setState({copied:!0})},onMouseLeave:function(){return e.setState({copied:!1})}})),i.a.createElement("div",{className:"input-link-tools"},this.renderTools()),i.a.createElement("pre",null,i.a.createElement("code",null,t)))}}])&&Ce(t.prototype,n),r&&Ce(t,r),a}(i.a.Component);Ie(De,"propTypes",{shareUrl:F.a.string,showTOCToggle:F.a.bool}),Ie(De,"defaultProps",{showTOCToggle:!0,shareUrl:""});var ke=De,Le=n("./node_modules/raw-loader/index.js!./MapStore2/web/client/components/share/api-template.raw"),Ne=n.n(Le);function Fe(e){return(Fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ue(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ge(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Be(e,t){return(Be=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ze(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=He(e);if(t){var o=He(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return We(this,n)}}function We(e,t){return!t||"object"!==Fe(t)&&"function"!=typeof t?Ve(e):t}function Ve(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function He(e){return(He=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ye=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Be(e,t)}(a,e);var t,n,r,o=ze(a);function a(){var e;Ue(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return qe(Ve(e=o.call.apply(o,[this].concat(n))),"state",{copied:!1}),e}return t=a,(n=[{key:"render",value:function(){var e=this,t=Ne.a.replace("__BASE__URL__",this.props.baseUrl).replace("__CONFIG__URL__",this.props.shareConfigUrl).replace("__ORIGINAL_URL__",this.props.shareUrl).replace("__VERSION__",Object(h.validateVersion)(this.props.version)?"?"+Object(w.trim)(this.props.version):"");return i.a.createElement("div",{className:"input-link"},i.a.createElement("div",{className:"input-link-head"},i.a.createElement("h4",null,i.a.createElement(p.a,{msgId:"share.apiLinkTitle"})),i.a.createElement(fe,{copied:this.state.copied,shareUrl:t,onCopy:function(){return e.setState({copied:!0})},onMouseLeave:function(){return e.setState({copied:!1})}})),i.a.createElement("pre",null,i.a.createElement("code",null,t)))}}])&&Ge(t.prototype,n),r&&Ge(t,r),a}(i.a.Component);qe(Ye,"propTypes",{baseUrl:F.a.string,shareUrl:F.a.string,shareConfigUrl:F.a.string,version:F.a.string});var Qe=Ye,Ke=n("./node_modules/qrcode.react/lib/index.js"),Ze=n.n(Ke);function Xe(e){return(Xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Je(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function et(e,t){return(et=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function tt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=rt(e);if(t){var o=rt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return nt(this,n)}}function nt(e,t){return!t||"object"!==Xe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function rt(e){return(rt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ot,it,at,st=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&et(e,t)}(a,e);var t,n,r,o=tt(a);function a(){return Je(this,a),o.apply(this,arguments)}return t=a,(n=[{key:"render",value:function(){return i.a.createElement("div",{className:"qr-code"},i.a.createElement("h4",null,i.a.createElement(p.a,{msgId:"share.QRCodeLinkTitle"})),i.a.createElement(Ze.a,{value:this.props.shareUrl}))}}])&&$e(t.prototype,n),r&&$e(t,r),a}(i.a.Component);ot=st,it="propTypes",at={shareUrl:F.a.string},it in ot?Object.defineProperty(ot,it,{value:at,enumerable:!0,configurable:!0,writable:!0}):ot[it]=at;var lt=st,ct=n("./MapStore2/web/client/components/misc/switch/SwitchPanel.jsx"),ut=n.n(ct),pt=n("./MapStore2/web/client/components/data/identify/coordinates/Editor.jsx"),dt=n.n(pt),ft=n("./MapStore2/web/client/utils/ImmutableUtils.js"),mt=n("./MapStore2/web/client/components/misc/OverlayTrigger.jsx"),yt=n.n(mt);function bt(e){return(bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gt(){return(gt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ht(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ht(Object(n),!0).forEach((function(t){Ct(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ht(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function St(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ot(e,t){return(Ot=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function jt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Pt(e);if(t){var o=Pt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Et(this,n)}}function Et(e,t){return!t||"object"!==bt(t)&&"function"!=typeof t?xt(e):t}function xt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Pt(e){return(Pt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ct(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Tt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ot(e,t)}(a,e);var t,n,r,o=jt(a);function a(){var e;St(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ct(xt(e=o.call.apply(o,[this].concat(n))),"state",{eventKey:1,showAdvanced:!0}),Ct(xt(e),"getLonLat",(function(e){var t=e&&e.latlng||null,n=null;return t&&(n=t&&Math.round(1e17*t.lng)/1e17,n-=360*Math.floor(n/360+.5)),[n,t&&t.lat]})),Ct(xt(e),"getShareUrl",(function(){var t=e.props,n=t.settings,r=t.advancedSettings,o=!n.showSectionId&&r&&r.sectionId,i=Object(y.getSharedGeostoryUrl)(Object(y.removeQueryFromUrl)(e.props.shareUrl),o);return n.bboxEnabled&&r&&r.bbox&&e.state.bbox&&(i="".concat(i,"?bbox=").concat(e.state.bbox)),n.showHome&&r&&r.homeButton&&(i="".concat(i,"?showHome=true")),n.centerAndZoomEnabled&&r&&r.centerAndZoom&&(i="".concat(i).concat(n.markerEnabled?"?marker=":"?center=").concat(e.state.coordinate,"&zoom=").concat(e.state.zoom)),i})),Ct(xt(e),"generateUrl",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:location.href,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=new RegExp(t);return e.match(r)?e.replace(r,n):e})),Ct(xt(e),"getCoordinates",(function(t){var n=e.getLonLat(t.point),r=t.center||{x:"",y:""},o=r.x,i=r.y;return n.filter((function(e){return null!==e})).length>0?n:[o,i]})),Ct(xt(e),"renderAdvancedSettings",(function(){return i.a.createElement(ut.a,{title:i.a.createElement(p.a,{msgId:"share.advancedOptions"}),expanded:e.state.showAdvanced,onSwitch:function(){return e.setState({showAdvanced:!e.state.showAdvanced})}},e.props.advancedSettings.bbox&&i.a.createElement(c.Checkbox,{checked:e.props.settings.bboxEnabled,onChange:function(){return e.props.onUpdateSettings(vt(vt({},e.props.settings),{},{bboxEnabled:!e.props.settings.bboxEnabled,centerAndZoomEnabled:!1}))}},i.a.createElement(p.a,{msgId:"share.addBboxParam"})),e.props.advancedSettings.centerAndZoom&&i.a.createElement(c.Checkbox,{checked:e.props.settings&&e.props.settings.centerAndZoomEnabled,onChange:function(){e.props.onUpdateSettings(vt(vt({},e.props.settings),{},{centerAndZoomEnabled:!e.props.settings.centerAndZoomEnabled,bboxEnabled:!1})),e.props.hideMarker()}},i.a.createElement(p.a,{msgId:"share.addCenterAndZoomParam"})),e.props.advancedSettings.homeButton&&i.a.createElement(c.Checkbox,{checked:e.props.settings.showHome,onChange:function(){return e.props.onUpdateSettings(vt(vt({},e.props.settings),{},{showHome:!e.props.settings.showHome}))}},i.a.createElement(p.a,{msgId:"share.showHomeButton"})),e.props.isScrollPosition&&e.props.advancedSettings.sectionId&&i.a.createElement(c.Checkbox,{checked:e.props.settings.showSectionId,onChange:function(){return e.props.onUpdateSettings(vt(vt({},e.props.settings),{},{showSectionId:!e.props.settings.showSectionId}))}},i.a.createElement(p.a,{msgId:"share.showSectionId"})),e.props.settings.centerAndZoomEnabled&&i.a.createElement("div",null,i.a.createElement(c.FormGroup,{id:"share-container"},i.a.createElement(c.ControlLabel,null,i.a.createElement(p.a,{msgId:"share.coordinate"})),i.a.createElement(yt.a,{placement:"top",overlay:i.a.createElement(c.Tooltip,{id:"share-coordinate"},i.a.createElement(p.a,{msgId:"share.coordTooltip"}))},i.a.createElement(c.Glyphicon,{style:{marginLeft:5},glyph:"info-sign"})),i.a.createElement(dt.a,{removeVisible:!1,formatCoord:e.props.formatCoords,coordinate:{lat:e.state.coordinate[1]||"",lon:e.state.coordinate[0]||""},onSubmit:function(t){var n=Object(w.isNil)(t.lat)||isNaN(t.lat)?0:parseFloat(t.lat),r=Object(w.isNil)(t.lon)||isNaN(t.lon)?0:parseFloat(t.lon),o=Object(ft.set)("latlng.lng",r,Object(ft.set)("latlng.lat",n,e.props.point));e.props.onSubmitClickPoint(o)},onChangeFormat:e.props.onChangeFormat})),i.a.createElement(c.FormGroup,null,i.a.createElement(c.ControlLabel,null,i.a.createElement(p.a,{msgId:"share.zoom"})),i.a.createElement(yt.a,{placement:"top",overlay:i.a.createElement(c.Tooltip,{id:"share-zoom"},i.a.createElement(p.a,{msgId:"share.zoomToolTip"}))},i.a.createElement(c.Glyphicon,{style:{marginLeft:5},glyph:"info-sign"})),i.a.createElement(c.FormControl,{type:"number",min:1,max:35,name:"zoom",value:e.state.zoom||e.props.zoom||21,onChange:function(t){var n=t.target,r=Object(w.inRange)(parseInt(n.value,10),1,36)?n.value:1;e.setState(vt(vt({},e.state),{},{zoom:r}))}})),i.a.createElement(c.Checkbox,{checked:e.props.settings&&e.props.settings.markerEnabled,onChange:function(){e.props.onUpdateSettings(vt(vt({},e.props.settings),{},{markerEnabled:!e.props.settings.markerEnabled}))}},i.a.createElement(p.a,{msgId:"share.marker"}))))})),e}return t=a,(n=[{key:"UNSAFE_componentWillMount",value:function(){var e=Object(w.join)(this.props.bbox,","),t=this.getCoordinates(this.props);this.setState({bbox:e,eventKey:{link:1,social:2,embed:3}[this.props.selectedTab]||1,zoom:this.props.zoom,coordinate:t})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=Object(w.join)(e.bbox,",");if(!(Object(w.isEqual)(this.props.zoom,e.zoom)&&Object(w.isEqual)(this.props.point,e.point)&&Object(w.isEqual)(this.props.center,e.center)&&Object(w.isEqual)(this.props.bbox,e.bbox))){var n=this.getCoordinates(e);this.setState({bbox:t,zoom:e.zoom,coordinate:n})}}},{key:"render",value:function(){var e=this,t=this.getShareUrl(),n=t||location.href,r=t||location.href;this.props.shareUrlRegex&&this.props.shareUrlReplaceString&&(r=this.generateUrl(r,this.props.shareUrlRegex,this.props.shareUrlReplaceString));var o=this.props.embedPanel||3!==this.state.eventKey?this.state.eventKey:1,a=this.props.shareApiUrl||t||location.href,s=i.a.createElement(le,{sharedTitle:this.props.sharedTitle,shareUrl:n,getCount:this.props.getCount}),l=i.a.createElement("div",null,i.a.createElement(Ee,{shareUrl:n,bbox:this.props.bbox}),i.a.createElement(lt,{shareUrl:n})),u=i.a.createElement("div",null,i.a.createElement(ke,gt({shareUrl:r},this.props.embedOptions)),this.props.showAPI?i.a.createElement(Qe,{baseUrl:a,shareUrl:n,shareConfigUrl:this.props.shareConfigUrl,version:this.props.version}):null),d=i.a.createElement(c.Tabs,{defaultActiveKey:o,id:"sharePanel-tabs",onSelect:function(t){return e.setState({eventKey:t})}},i.a.createElement(c.Tab,{eventKey:1,title:i.a.createElement(p.a,{msgId:"share.direct"})},1===o&&l),i.a.createElement(c.Tab,{eventKey:2,title:i.a.createElement(p.a,{msgId:"share.social"})},2===o&&s),this.props.embedPanel?i.a.createElement(c.Tab,{eventKey:3,title:i.a.createElement(p.a,{msgId:"share.code"})},3===o&&u):null),f=i.a.createElement(G.a,{id:this.props.modal?"share-panel-dialog-modal":"share-panel-dialog",className:"modal-dialog modal-content share-win",modal:this.props.modal,draggable:this.props.draggable,style:{zIndex:1993}},i.a.createElement("span",{role:"header"},i.a.createElement("span",{className:"share-panel-title"},i.a.createElement(p.a,{msgId:"share.title"})),i.a.createElement("button",{onClick:this.props.onClose,className:"share-panel-close close"},this.props.closeGlyph?i.a.createElement(c.Glyphicon,{glyph:this.props.closeGlyph}):i.a.createElement("span",null,""))),i.a.createElement("div",{role:"body",className:"share-panels"},d,this.props.advancedSettings&&this.renderAdvancedSettings()));return this.props.isVisible?f:null}}])&&wt(t.prototype,n),r&&wt(t,r),a}(i.a.Component);Ct(Tt,"propTypes",{isVisible:F.a.bool,title:F.a.node,modal:F.a.bool,draggable:F.a.bool,sharedTitle:F.a.string,shareUrl:F.a.string,shareUrlRegex:F.a.string,shareUrlReplaceString:F.a.string,shareApiUrl:F.a.string,shareConfigUrl:F.a.string,embedPanel:F.a.bool,embedOptions:F.a.object,showAPI:F.a.bool,onClose:F.a.func,getCount:F.a.func,closeGlyph:F.a.string,version:F.a.string,bbox:F.a.object,advancedSettings:F.a.shape({bbox:F.a.bool,homeButton:F.a.bool,centerAndZoom:F.a.bool}),settings:F.a.object,onUpdateSettings:F.a.func,selectedTab:F.a.string,formatCoords:F.a.string,point:F.a.object,isScrollPosition:F.a.bool}),Ct(Tt,"defaultProps",{title:i.a.createElement(p.a,{msgId:"share.titlePanel"}),modal:!1,draggable:!0,onClose:function(){},shareUrlRegex:"(h[^#]*)#\\/viewer\\/([^\\/]*)\\/([A-Za-z0-9]*)",shareUrlReplaceString:"$1embedded.html#/$3",embedPanel:!0,embedOptions:{},showAPI:!0,closeGlyph:"1-close",settings:{},onUpdateSettings:function(){},formatCoords:"decimal",isScrollPosition:!1});var Mt=Tt,_t=n("./node_modules/reselect/es/index.js"),At=n("./MapStore2/web/client/selectors/context.js"),Rt=n("./MapStore2/web/client/reducers/controls.js"),It=n.n(Rt),Dt=n("./MapStore2/web/client/selectors/mapInfo.js"),kt=n("./MapStore2/web/client/selectors/geostory.js");n.d(t,"SharePlugin",(function(){return Nt})),n.d(t,"reducers",(function(){return Ft})),n.d(t,"epics",(function(){return Ut}));var Lt=Object(a.connect)(Object(_t.createSelector)([function(e){return e.controls&&e.controls.share&&e.controls.share.enabled},h.versionSelector,_.mapSelector,At.currentContextSelector,function(e){return Object(w.get)(e,"controls.share.settings",{})},function(e){return e.mapInfo&&e.mapInfo.formatCoord},Dt.clickPointSelector,kt.updateUrlOnScrollSelector],(function(e,t,n,r,o,i,a,s){return{isVisible:e,shareUrl:location.href,shareApiUrl:b.a.getApiUrl(location.href),shareConfigUrl:b.a.getConfigUrl(location.href,m.a.getConfigProp("geoStoreUrl")),version:t,bbox:e&&n&&n.bbox&&Object(g.getExtentFromViewport)(n.bbox),center:n&&n.center&&m.a.getCenter(n.center),zoom:n&&n.zoom,showAPI:!r,embedOptions:{showTOCToggle:!r},settings:o,advancedSettings:{bbox:!0,centerAndZoom:!0},formatCoords:i,point:a,isScrollPosition:s}})),{onClose:d.toggleControl.bind(null,"share",null),hideMarker:T.hideMapinfoMarker,onUpdateSettings:d.setControlProperty.bind(null,"share","settings"),onSubmitClickPoint:T.featureInfoClick,onChangeFormat:T.changeFormat})(Mt),Nt=l()(Lt,{disablePluginIf:"{state('router') && (state('router').endsWith('new') || state('router').includes('newgeostory') || state('router').endsWith('dashboard'))}",BurgerMenu:{name:"share",position:1e3,text:i.a.createElement(p.a,{msgId:"share.title"}),icon:i.a.createElement(c.Glyphicon,{glyph:"share-alt"}),action:d.toggleControl.bind(null,"share",null)}}),Ft={controls:It.a},Ut=r},"./MapStore2/web/client/plugins/Snapshot.jsx":function(e,t,n){var r=n("./node_modules/react/index.js"),o=n("./node_modules/react-redux/es/index.js").connect,i=n("./node_modules/reselect/es/index.js").createSelector,a=n("./MapStore2/web/client/actions/snapshot.js"),s=a.onCreateSnapshot,l=a.changeSnapshotState,c=a.saveImage,u=a.onRemoveSnapshot,p=a.onSnapshotError,d=n("./MapStore2/web/client/selectors/map.js").mapSelector,f=n("./MapStore2/web/client/selectors/layers.js").layersSelector,m=n("./MapStore2/web/client/selectors/maptype.js").mapTypeSelector,y=n("./MapStore2/web/client/actions/controls.js").toggleControl,b=n("./node_modules/object-assign/index.js"),g=n("./MapStore2/web/client/plugins/locale/Message.jsx"),h=n("./node_modules/react-bootstrap/es/index.js").Glyphicon,v=o(i([d,m,f,function(e){return e.controls&&e.controls.toolbar&&"snapshot"===e.controls.toolbar.active||e.controls.snapshot&&e.controls.snapshot.enabled},function(e){return e.browser},function(e){return e.snapshot||{queue:[]}}],(function(e,t,n,r,o,i){return{map:e,mapType:t,layers:n,active:r,browser:o,snapshot:i}})),{onCreateSnapshot:s,onStatusChange:l,downloadImg:c,toggleControl:y.bind(null,"snapshot",null)})(n("./MapStore2/web/client/components/mapcontrols/Snapshot/SnapshotPanel.jsx")),S=o((function(e){return{queue:e.snapshot&&e.snapshot.queue||[]}}),{downloadImg:c,onSnapshotError:p,onRemoveSnapshot:u})(n("./MapStore2/web/client/components/mapcontrols/Snapshot/SnapshotQueue.jsx"));e.exports={SnapshotPlugin:b(S,{Toolbar:{name:"snapshot",position:8,panel:v,help:r.createElement(g,{msgId:"helptexts.snapshot"}),tooltip:"snapshot.tooltip",icon:r.createElement(h,{glyph:"camera"}),wrap:!0,title:"snapshot.title",exclusive:!0,priority:1},BurgerMenu:{name:"snapshot",position:3,panel:v,text:r.createElement(g,{msgId:"snapshot.title"}),icon:r.createElement(h,{glyph:"camera"}),action:y.bind(null,"snapshot",null),tools:[S],priority:2}}),reducers:{snapshot:n("./MapStore2/web/client/reducers/snapshot.js")}}},"./MapStore2/web/client/plugins/StyleEditor.jsx":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=n("./node_modules/react/index.js"),m=n("./node_modules/prop-types/index.js"),y=n("./node_modules/react-redux/es/index.js").connect,b=n("./node_modules/reselect/es/index.js").createSelector,g=n("./node_modules/recompose/es/Recompose.js"),h=g.compose,v=g.branch,S=g.toClass,w=g.lifecycle,O=n("./node_modules/object-assign/index.js"),j=n("./node_modules/lodash/lodash.js"),E=j.isArray,x=j.isString,P=n("./MapStore2/web/client/components/misc/Loader.jsx"),C=n("./MapStore2/web/client/components/layout/BorderLayout.jsx"),T=n("./MapStore2/web/client/components/misc/enhancers/loadingState.jsx"),M=n("./MapStore2/web/client/components/misc/enhancers/emptyState.jsx"),_=n("./MapStore2/web/client/components/I18N/HTML.jsx"),A=n("./MapStore2/web/client/selectors/styleeditor.js"),R=A.statusStyleSelector,I=A.loadingStyleSelector,D=A.getUpdatedLayer,k=A.errorStyleSelector,L=A.canEditStyleSelector,N=A.styleServiceSelector,F=n("./MapStore2/web/client/selectors/security.js").userRoleSelector,U=n("./MapStore2/web/client/actions/styleeditor.js"),G=U.initStyleService,B=U.toggleStyleEditor,z=n("./MapStore2/web/client/actions/layers.js").updateSettingsParams,W=n("./MapStore2/web/client/plugins/styleeditor/index.js").default,V=W.StyleSelector,H=W.StyleToolbar,q=W.StyleCodeEditor,Y=n("./MapStore2/web/client/utils/StyleEditorUtils.js").isSameOrigin,Q=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(i,e);var t,n,r,o=c(i);function i(){return a(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"UNSAFE_componentWillMount",value:function(){var e=!this.props.editingAllowedRoles||E(this.props.editingAllowedRoles)&&x(this.props.userRole)&&-1!==this.props.editingAllowedRoles.indexOf(this.props.userRole);this.props.onInit(this.props.styleService,e&&Y(this.props.layer,this.props.styleService))}},{key:"render",value:function(){return f.createElement(C,{className:"ms-style-editor-container",header:this.props.showToolbar?f.createElement("div",{className:"ms-style-editor-container-header"},this.props.header,f.createElement("div",{className:"text-center"},f.createElement(H,{enableSetDefaultStyle:this.props.enableSetDefaultStyle}))):null,footer:f.createElement("div",{style:{height:25}})},this.props.isEditing?f.createElement(q,{config:this.props.editorConfig}):f.createElement(V,{showDefaultStyleIcon:this.props.canEdit&&this.props.enableSetDefaultStyle}))}}])&&s(t.prototype,n),r&&s(t,r),i}(f.Component);d(Q,"propTypes",{layer:m.object,header:m.node,isEditing:m.bool,showToolbar:m.node.bool,onInit:m.func,styleService:m.object,userRole:m.string,editingAllowedRoles:m.array,enableSetDefaultStyle:m.bool,canEdit:m.bool,editorConfig:m.object}),d(Q,"defaultProps",{layer:{},onInit:function(){},editingAllowedRoles:["ADMIN"],editorConfig:{}});var K=h(S,v((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.active;return!t}),(function(){return function(){return null}})),y(b([R,I,D,k,F,L,N],(function(e,t,n,r,o,i,a){return{isEditing:"edit"===e,loading:t,layer:n,error:!(!r||!r.availableStyles),userRole:o,canEdit:i,styleService:a}})),{onInit:G,onUpdateParams:z},(function(e,t,n){var r,i,a,s=(null===(r=n.styleService)||void 0===r?void 0:r.baseUrl)===(null===(i=e.styleService)||void 0===i?void 0:i.baseUrl)&&(null===(a=e.styleService)||void 0===a?void 0:a.isStatic),l=n.styleService&&!s?o(o({},n.styleService),{},{isStatic:!0}):o({},e.styleService);return o(o(o(o({},n),e),t),{},{styleService:l})})),M((function(e){return e.error}),{glyph:"exclamation-mark",title:f.createElement(_,{msgId:"styleeditor.missingAvailableStyles"}),description:f.createElement(_,{msgId:"styleeditor.missingAvailableStylesMessage"}),style:{display:"flex",width:"100%",height:"100%",overflow:"hidden"},mainViewStyle:{margin:"auto",width:300}}),T((function(e){return"global"===e.loading}),{size:150,style:{margin:"auto"}},(function(e){return f.createElement("div",{style:{position:"relative",height:"100%",display:"flex"}},f.createElement(P,e))})),h(y((function(){return{}}),{toggleStyleEditor:B}),w({componentDidMount:function(){this.props.toggleStyleEditor(null,!0)}})))(Q);e.exports={StyleEditorPlugin:O(K,{TOC:{priority:1,container:"TOCItemSettings"},TOCItemsSettings:{name:"StyleEditor",target:"style",priority:1,ToolbarComponent:H}}),reducers:{styleeditor:n("./MapStore2/web/client/reducers/styleeditor.js")},epics:n("./MapStore2/web/client/epics/styleeditor.js")}},"./MapStore2/web/client/plugins/Styler.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=n("./node_modules/prop-types/index.js"),f=n("./node_modules/react/index.js"),m=n("./node_modules/react-redux/es/index.js").connect,y=n("./node_modules/react-bootstrap/es/index.js"),b=y.Grid,g=y.Row,h=y.Glyphicon,v=y.Alert,S=y.Button,w=n("./node_modules/react-spinkit/dist/index.js"),O=n("./MapStore2/web/client/components/misc/Dialog.jsx"),j=n("./node_modules/react-widgets/lib/index.js").Combobox,E=n("./node_modules/lodash/lodash.js").head,x=n("./MapStore2/web/client/utils/AgentUtils.js").getWindowSize,P=n("./MapStore2/web/client/actions/vectorstyler.js").setVectorLayer,C=n("./MapStore2/web/client/actions/rasterstyler.js").setRasterLayer,T=n("./MapStore2/web/client/actions/controls.js").toggleControl,M=n("./MapStore2/web/client/actions/layers.js").changeLayerProperties,_=n("./MapStore2/web/client/actions/layerCapabilities.js"),A=_.getDescribeLayer,R=_.getLayerCapabilities,I=n("./MapStore2/web/client/actions/styler.js"),D=I.saveLayerDefaultStyle,k=I.reset,L=n("./MapStore2/web/client/selectors/layers.js").layersSelector,N=n("./MapStore2/web/client/actions/map.js").zoomToExtent,F=n("./MapStore2/web/client/plugins/VectorStyler.jsx").VectorStylerPlugin,U=n("./MapStore2/web/client/plugins/RasterStyler.jsx").RasterStylerPlugin,G=n("./node_modules/reselect/es/index.js").createSelector,B=n("./node_modules/object-assign/index.js");n("./MapStore2/web/client/plugins/styler/styler.css");var z=n("./MapStore2/web/client/plugins/locale/Message.jsx"),W=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(u,e);var t,n,r,l=s(u);function u(){var e;o(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return p(c(e=l.call.apply(l,[this].concat(n))),"state",{counter:1}),p(c(e),"getPanelStyle",(function(){var e=x(),t=e.maxHeight-20,n={maxHeight:t,maxWidth:e.maxWidth-70};return t<600&&(n.height=t,n.overflowY="auto"),n})),p(c(e),"getStylerStyle",(function(){var e=x(),t=e.maxHeight-170,n={maxHeight:t,maxWidth:e.maxWidth-70};return t<600&&(n.height=t,n.overflowY="auto"),n})),p(c(e),"getRestURL",(function(e){var t=e.split("/geoserver/");return t[0]||""===t[0]?t[0]+"/geoserver/rest/":null})),p(c(e),"renderError",(function(e){return f.createElement(v,{bsStyle:"danger"},e)})),p(c(e),"renderStyler",(function(){switch(e.props.layer.describeLayer&&e.props.layer.describeLayer.owsType){case"WFS":return f.createElement("div",{style:e.getStylerStyle()},f.createElement(F,{forceOpen:!0,hideLayerSelector:!0,withContainer:!1}));case"WCS":return f.createElement("div",{style:e.getStylerStyle()},f.createElement(U,{forceOpen:!0,hideLayerSelector:!0,withContainer:!1}));default:return e.props.layer.describeLayer&&e.props.layer.describeLayer.error?e.renderError(e.props.layer.describeLayer.error):null}})),p(c(e),"renderWait",(function(){return e.state.layer?f.createElement(w,{spinnerName:"circle",noFadeIn:!0,overrideSpinnerClassName:"spinner"}):null})),p(c(e),"renderWaitOrError",(function(){return e.state.layer&&e.state.error?e.renderError(e.state.error):e.renderWait()})),p(c(e),"renderSelector",(function(){return f.createElement(g,{style:{marginBottom:"5px",marginLeft:"10px",marginRight:"10px"}},e.props.hideLayerSelector||1===e.props.layers.length?null:f.createElement(g,null,f.createElement("label",null,f.createElement(z,{msgId:"styler.layerlabel"})),f.createElement(j,{data:e.props.layers.reverse(),value:e.props.layer?e.props.layer.id:e.state.layer&&e.state.layer.id,onChange:e.setLayer,valueField:"id",textField:"title"})))})),p(c(e),"renderSave",(function(){var t=e.findOriginalLayer(e.props,e.props);return t&&t.params&&t.params.SLD_BODY&&e.props.layer&&e.getRestURL(e.props.layer.url)?f.createElement(S,{style:{marginRight:"4px"},onClick:e.saveStyle},"Save"):null})),p(c(e),"renderReset",(function(){return e.props.layer?f.createElement(S,{key:"reset-btn",onClick:e.reset},"Reset"):null})),p(c(e),"renderZoom",(function(){var t=e.findOriginalLayer(e.props,e.props);return t&&t.capabilities?f.createElement(S,{key:"zoom-btn",style:{float:"right"},onClick:e.zoomToLayerExtent},f.createElement(h,{glyph:"zoom-in"}),"Zoom To Layer"):null})),p(c(e),"renderBody",(function(){return f.createElement(b,{fluid:!0},e.renderSelector(),e.props.layer?e.renderStyler():e.renderWaitOrError(),f.createElement(g,{style:{margin:"4px 0"}},e.props.layer&&e.props.canSave?e.renderSave():null,e.renderReset(),e.renderZoom()))})),p(c(e),"clearLayerStyle",(function(){e.props.changeLayerProperties(e.props.layer.id,{params:B({},e.props.layer.params,{SLD_BODY:null,_dc:e.state.counter})}),e.setState({counter:e.state.counter+1})})),p(c(e),"reset",(function(){e.clearLayerStyle(),e.props.reset()})),p(c(e),"setLayer",(function(t){if(t.describeLayer&&t.describeLayer.owsType){switch(t.describeLayer&&t.describeLayer.owsType){case"WFS":e.props.selectVectorLayer(t);break;case"WCS":e.props.selectRasterLayer(t)}t.capabilities&&t.capabilities.error||e.props.getLayerCapabilities(t)}else t.describeLayer&&t.describeLayer.error||e.props.getDescribeLayer(t.url,t)})),p(c(e),"findOriginalLayer",(function(e,t){return E(e.layers.filter((function(e){return e&&t.layer&&e.id===t.layer.id})))})),p(c(e),"saveStyle",(function(){var t=e.findOriginalLayer(e.props,e.props);t.params&&t.params.SLD_BODY&&(e.props.saveStyle(e.getRestURL(t.url),t.name,t.params.SLD_BODY),setTimeout(e.clearLayerStyle,2e3))})),p(c(e),"zoomToLayerExtent",(function(){var t=e.findOriginalLayer(e.props,e.props);if(t&&t.capabilities){var n=t.capabilities.latLonBoundingBox;n&&!e.state.zoomed&&(e.props.zoomToExtent([n.minx,n.miny,n.maxx,n.maxy],"EPSG:4326"),e.setState({zoomed:!0}))}})),e}return t=u,(n=[{key:"UNSAFE_componentWillMount",value:function(){this.props.reset()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.layer||1!==this.props.layers.length?e.layer&&1===this.props.layers.length&&this.props.layers[0].id!==e.layer.id?this.findOriginalLayer(this.props,e)||this.props.reset():e.layer&&this.props.layer&&e.layer.name!==this.props.layer.name&&this.setLayer(e.layer):(this.props.reset(),this.setLayer(this.props.layers[0]))}},{key:"render",value:function(){return this.props.open||this.props.forceOpen?this.props.withContainer?f.createElement(O,{id:"wms-styler-dialog",className:"mapstore-styler-panel",style:this.getPanelStyle()},f.createElement("span",{role:"header"},f.createElement("span",{className:"metadataexplorer-panel-title"},f.createElement(z,{msgId:"styler.paneltitle"})),f.createElement("button",{onClick:this.props.toggleControl.bind(null,"styler",null),className:"print-panel-close close"},this.props.closeGlyph?f.createElement(h,{glyph:this.props.closeGlyph}):f.createElement("span",null,""))),f.createElement("div",{role:"body"},this.renderBody())):this.renderBody():null}}])&&i(t.prototype,n),r&&i(t,r),u}(f.Component);p(W,"propTypes",{canSave:d.oneOfType([d.bool,d.func]),layers:d.array,layer:d.object,withContainer:d.bool,open:d.bool,closeGlyph:d.string,forceOpen:d.bool,style:d.object,selectVectorLayer:d.func,selectRasterLayer:d.func,toggleControl:d.func,error:d.string,changeLayerProperties:d.func,getDescribeLayer:d.func,getLayerCapabilities:d.func,zoomToExtent:d.func,saveStyle:d.func,reset:d.func,hideLayerSelector:d.bool}),p(W,"contextTypes",{messages:d.object}),p(W,"defaultProps",{canSave:!0,hideLayerSelector:!1,open:!1,closeGlyph:"1-close",layers:[],layer:null,withContainer:!0,selectVectorLayer:function(){},selectRasterLayer:function(){},getDescribeLayer:function(){},getLayerCapabilities:function(){},toggleControl:function(){},style:{},saveStyle:function(){},changeLayerProperties:function(){},zoomToExtent:function(){},reset:function(){}});var V=m(G([function(e){return e.controls.styler&&!0===e.controls.styler.enabled},function(e){return e.vectorstyler},function(e){return e.rasterstyler},function(e){return e.styler&&e.styler.type},L],(function(e,t,n,r,o){return{open:e,layer:"vector"===r?t.layer:n.layer,layers:o.filter((function(e){return"background"!==e.group}))}})),{selectVectorLayer:P,selectRasterLayer:C,getDescribeLayer:A,getLayerCapabilities:R,changeLayerProperties:M,saveStyle:D,toggleControl:T,zoomToExtent:N,reset:k})(W);e.exports={StylerPlugin:B(V,{Toolbar:{name:"styler",help:f.createElement(z,{msgId:"helptexts.styler"}),tooltip:"styler.tooltip",icon:f.createElement(h,{glyph:"pencil"}),position:9,action:T.bind(null,"styler",null)}}),reducers:{styler:n("./MapStore2/web/client/reducers/styler.js"),vectorstyler:n("./MapStore2/web/client/reducers/vectorstyler.js"),rasterstyler:n("./MapStore2/web/client/reducers/rasterstyler.js")}}},"./MapStore2/web/client/plugins/TOC.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=n("./node_modules/prop-types/index.js"),m=n("./node_modules/react/index.js"),y=n("./node_modules/react-redux/es/index.js").connect,b=n("./node_modules/reselect/es/index.js").createSelector,g=n("./node_modules/recompose/es/Recompose.js"),h=g.compose,v=g.branch,S=g.withPropsOnChange,w=n("./node_modules/react-bootstrap/es/index.js").Glyphicon,O=n("./MapStore2/web/client/actions/layers.js"),j=O.changeLayerProperties,E=O.changeGroupProperties,x=O.toggleNode,P=O.contextNode,C=O.moveNode,T=O.showSettings,M=O.hideSettings,_=O.updateSettings,A=O.updateNode,R=O.removeNode,I=O.browseData,D=O.selectNode,k=O.filterLayers,L=O.refreshLayerVersion,N=O.hideLayerMetadata,F=O.download,U=n("./MapStore2/web/client/actions/layerFilter.js").openQueryBuilder,G=n("./MapStore2/web/client/actions/layerCapabilities.js").getLayerCapabilities,B=n("./MapStore2/web/client/actions/map.js").zoomToExtent,z=n("./MapStore2/web/client/actions/notifications.js").error,W=n("./MapStore2/web/client/selectors/layers.js"),V=W.groupsSelector,H=W.layersSelector,q=W.selectedNodesSelector,Y=W.layerFilterSelector,Q=W.layerSettingSelector,K=W.layerMetadataSelector,Z=W.wfsDownloadSelector,X=n("./MapStore2/web/client/selectors/map.js"),J=X.mapSelector,$=X.mapNameSelector,ee=n("./MapStore2/web/client/selectors/locale.js"),te=ee.currentLocaleSelector,ne=ee.currentLocaleLanguageSelector,re=n("./MapStore2/web/client/selectors/controls.js").widgetBuilderAvailable,oe=n("./MapStore2/web/client/selectors/mapInfo.js").generalInfoFormatSelector,ie=n("./MapStore2/web/client/selectors/security.js").userSelector,ae=n("./MapStore2/web/client/selectors/localizedLayerStyles.js").isLocalizedLayerStylesEnabledSelector,se=n("./MapStore2/web/client/utils/LayersUtils.js"),le=n("./MapStore2/web/client/utils/MapUtils.js"),ce=n("./MapStore2/web/client/utils/LocaleUtils.js"),ue=n("./MapStore2/web/client/components/I18N/Message.jsx"),pe=n("./node_modules/object-assign/index.js"),de=n("./MapStore2/web/client/plugins/toolbar/assets/img/layers.png"),fe=n("./node_modules/lodash/lodash.js"),me=fe.isObject,ye=fe.head,be=fe.find,ge=n("./MapStore2/web/client/actions/controls.js").setControlProperties,he=n("./MapStore2/web/client/actions/widgets.js").createWidget,ve=n("./MapStore2/web/client/actions/catalog.js").getMetadataRecordById,Se=n("./MapStore2/web/client/selectors/catalog.js").activeSelector,we=n("./MapStore2/web/client/selectors/maptype.js").isCesium,Oe=function e(t,n){return t.reduce((function(t,r){var o=pe({},r);return o.nodes&&(o=pe({},o,{nodes:e(o.nodes,n)})),n.forEach((function(e){o=e.func(o)?pe({},o,e.options):pe({},o)})),t.push(o),t}),[])},je=function(e,t,n){return-1!==((me(e.title)?e.title[n]||e.title.default:e.title)||e.name).toLowerCase().indexOf(t.toLowerCase())},Ee=b([function(e){return e.controls&&e.controls.toolbar&&"toc"===e.controls.toolbar.active},V,Q,K,Z,J,te,ne,q,Y,H,$,Se,re,oe,we,ie,ae],(function(e,t,n,r,o,i,a,s,l,c,u,p,d,f,m,y,b,g){return{enabled:e,groups:t,settings:n,layerMetadata:r,wfsdownload:o,currentZoomLvl:i&&i.zoom,scales:le.getScales(i&&i.projection||"EPSG:3857",i&&i.mapOptions&&i.mapOptions.view&&i.mapOptions.view.DPI||null),currentLocale:a,currentLocaleLanguage:s,selectedNodes:l,filterText:c,generalInfoFormat:m,selectedLayers:u.filter((function(e){return ye(l.filter((function(t){return t===e.id})))})),noFilterResults:0===u.filter((function(e){return je(e,c,a)})).length,selectedGroups:l.map((function(e){return se.getNode(t,e)})).filter((function(e){return e&&e.nodes})),mapName:p,filteredGroups:Oe(t,[{options:{showComponent:!0},func:function(){return!c}},{options:{loadingError:!0},func:function(e){return ye((e.nodes||[]).filter((function(e){return e.loadingError&&"Warning"!==e.loadingError})))}},{options:{expanded:!0,showComponent:!0},func:function(e){return c&&ye((e.nodes||[]).filter((function(t){return je(t,c,a)||t.nodes&&ye(e.nodes.filter((function(e){return e.showComponent})))})))}},{options:{showComponent:!1},func:function(e){return ye((e.nodes||[]).filter((function(e){return e.hidden||"annotations"===e.id&&y})))&&1===e.nodes.length}},{options:{showComponent:!1},func:function(e){return"annotations"===e.id&&y}}]),catalogActive:d,activateWidgetTool:f,user:b,isLocalizedLayerStylesEnabled:g}})),xe=n("./MapStore2/web/client/components/TOC/TOC.jsx"),Pe=n("./MapStore2/web/client/components/TOC/Header.jsx"),Ce=n("./MapStore2/web/client/components/TOC/Toolbar.jsx"),Te=n("./MapStore2/web/client/components/TOC/DefaultGroup.jsx"),Me=n("./MapStore2/web/client/components/TOC/DefaultLayer.jsx"),_e=n("./MapStore2/web/client/components/TOC/DefaultLayerOrGroup.jsx"),Ae=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(p,e);var t,n,r,c=l(p);function p(){var e;i(this,p);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return d(u(e=c.call.apply(c,[this].concat(n))),"getNoBackgroundLayers",(function(e){return"background"!==e.name})),d(u(e),"getDefaultGroup",(function(){var t=e.props.groupNodeComponent||Te;return m.createElement(t,o({onSort:!e.props.filterText&&e.props.activateSortLayer?e.props.onSort:null},e.props.groupOptions,{titleTooltip:e.props.activateTitleTooltip,propertiesChangeHandler:e.props.groupPropertiesChangeHandler,onToggle:e.props.onToggleGroup,style:e.props.groupStyle,groupVisibilityCheckbox:!0,visibilityCheckType:e.props.visibilityCheckType,currentLocale:e.props.currentLocale,selectedNodes:e.props.selectedNodes,onSelect:e.props.activateToolsContainer?e.props.onSelectNode:null}))})),d(u(e),"getDefaultLayer",(function(){var t=e.props.layerNodeComponent||Me;return m.createElement(t,o({},e.props.layerOptions,{titleTooltip:e.props.activateTitleTooltip,showFullTitleOnExpand:e.props.showFullTitleOnExpand,onToggle:e.props.onToggleLayer,activateOpacityTool:e.props.activateOpacityTool,onContextMenu:e.props.onContextMenu,propertiesChangeHandler:e.props.layerPropertiesChangeHandler,onSelect:e.props.activateToolsContainer?e.props.onSelectNode:null,visibilityCheckType:e.props.visibilityCheckType,activateLegendTool:e.props.activateLegendTool,currentZoomLvl:e.props.currentZoomLvl,scales:e.props.scales,currentLocale:e.props.currentLocale,selectedNodes:e.props.selectedNodes,filterText:e.props.filterText,onUpdateNode:e.props.updateNode,hideOpacityTooltip:e.props.hideOpacityTooltip,language:e.props.isLocalizedLayerStylesEnabled?e.props.currentLocaleLanguage:null}))})),d(u(e),"renderTOC",(function(){var t=e.getDefaultGroup(),n=e.getDefaultLayer(),r=[e.props.activateToolsContainer,e.props.activateFilterLayer,e.props.activateMapTitle].filter((function(e){return e})),o=r.length>0?" toc-body-sections-"+r.length:" toc-body-sections";return m.createElement("div",null,m.createElement(Pe,{title:e.props.mapName,showTitle:e.props.activateMapTitle,showFilter:e.props.activateFilterLayer&&(e.props.groups.filter((function(e){return(e.nodes||[]).length}))||[]).length,showTools:e.props.activateToolsContainer,onClear:function(){e.props.onSelectNode()},onFilter:e.props.onFilter,filterTooltipClear:m.createElement(ue,{msgId:"toc.clearFilter"}),filterPlaceholder:ce.getMessageById(e.context.messages,"toc.filterPlaceholder"),filterText:e.props.filterText,toolbar:m.createElement(Ce,{groups:e.props.groups,selectedLayers:e.props.selectedLayers,selectedGroups:e.props.selectedGroups,generalInfoFormat:e.props.generalInfoFormat,settings:e.props.settings,layerMetadata:e.props.layerMetadata,wfsdownload:e.props.wfsdownload,metadataTemplate:e.props.metadataTemplate,maxDepth:e.props.maxDepth,activateTool:{activateToolsContainer:e.props.activateToolsContainer,activateRemoveLayer:e.props.activateRemoveLayer,activateRemoveGroup:e.props.activateRemoveGroup,activateZoomTool:e.props.activateZoomTool,activateQueryTool:e.props.activateQueryTool,activateDownloadTool:e.props.activateDownloadTool,activateSettingsTool:e.props.activateSettingsTool,activateAddLayer:e.props.activateAddLayerButton&&!e.props.catalogActive,activateAddGroup:e.props.activateAddGroupButton,includeDeleteButtonInSettings:!1,activateMetedataTool:e.props.activateMetedataTool,activateWidgetTool:e.props.activateWidgetTool,activateLayerFilterTool:e.props.activateLayerFilterTool},options:{modalOptions:{},metadataOptions:e.props.metadataOptions,settingsOptions:e.props.settingsOptions},style:{chartStyle:e.props.chartStyle},text:{settingsText:m.createElement(ue,{msgId:"layerProperties.windowTitle"}),opacityText:m.createElement(ue,{msgId:"opacity"}),elevationText:m.createElement(ue,{msgId:"elevation"}),saveText:m.createElement(ue,{msgId:"save"}),closeText:m.createElement(ue,{msgId:"close"}),confirmDeleteText:m.createElement(ue,{msgId:"layerProperties.deleteLayer"}),confirmDeleteMessage:m.createElement(ue,{msgId:"layerProperties.deleteLayerMessage"}),confirmDeleteLayerGroupText:m.createElement(ue,{msgId:"layerProperties.deleteLayerGroup"}),confirmDeleteLayerGroupMessage:m.createElement(ue,{msgId:"layerProperties.deleteLayerGroupMessage"}),confirmDeleteConfirmText:m.createElement(ue,{msgId:"layerProperties.delete"}),confirmDeleteCancelText:m.createElement(ue,{msgId:"cancel"}),addLayer:m.createElement(ue,{msgId:"toc.addLayer"}),addLayerTooltip:m.createElement(ue,{msgId:"toc.addLayer"}),addLayerToGroupTooltip:m.createElement(ue,{msgId:"toc.addLayerToGroup"}),addGroupTooltip:m.createElement(ue,{msgId:"toc.addGroup"}),addSubGroupTooltip:m.createElement(ue,{msgId:"toc.addSubGroup"}),createWidgetTooltip:m.createElement(ue,{msgId:"toc.createWidget"}),zoomToTooltip:{LAYER:m.createElement(ue,{msgId:"toc.toolZoomToLayerTooltip"}),LAYERS:m.createElement(ue,{msgId:"toc.toolZoomToLayersTooltip"})},settingsTooltip:{LAYER:m.createElement(ue,{msgId:"toc.toolLayerSettingsTooltip"}),GROUP:m.createElement(ue,{msgId:"toc.toolGroupSettingsTooltip"})},featuresGridTooltip:m.createElement(ue,{msgId:"toc.toolFeaturesGridTooltip"}),downloadToolTooltip:m.createElement(ue,{msgId:"toc.toolDownloadTooltip"}),trashTooltip:{LAYER:m.createElement(ue,{msgId:"toc.toolTrashLayerTooltip"}),LAYERS:m.createElement(ue,{msgId:"toc.toolTrashLayersTooltip"}),GROUP:m.createElement(ue,{msgId:"toc.toolTrashGroupTooltip"})},reloadTooltip:{LAYER:m.createElement(ue,{msgId:"toc.toolReloadLayerTooltip"}),LAYERS:m.createElement(ue,{msgId:"toc.toolReloadLayersTooltip"})},layerMetadataTooltip:m.createElement(ue,{msgId:"toc.layerMetadata.toolLayerMetadataTooltip"}),layerMetadataPanelTitle:m.createElement(ue,{msgId:"toc.layerMetadata.layerMetadataPanelTitle"}),layerFilterTooltip:m.createElement(ue,{msgId:"toc.layerFilterTooltip"})},onToolsActions:{onZoom:e.props.onZoomToExtent,onNewWidget:e.props.onNewWidget,onBrowseData:e.props.onBrowseData,onQueryBuilder:e.props.onQueryBuilder,onDownload:e.props.onDownload,onUpdate:e.props.updateNode,onRemove:e.props.removeNode,onClear:e.props.onSelectNode,onSettings:e.props.onSettings,onUpdateSettings:e.props.updateSettings,onRetrieveLayerData:e.props.retrieveLayerData,onHideSettings:e.props.hideSettings,onReload:e.props.refreshLayerVersion,onAddLayer:e.props.onAddLayer,onAddGroup:e.props.onAddGroup,onGetMetadataRecord:e.props.onGetMetadataRecord,onHideLayerMetadata:e.props.hideLayerMetadata,onShow:e.props.layerPropertiesChangeHandler}})}),m.createElement("div",{className:"mapstore-toc"+o},e.props.noFilterResults&&e.props.filterText?m.createElement("div",null,m.createElement("div",{className:"toc-filter-no-results"},m.createElement(ue,{msgId:"toc.noFilteredResults"}))):m.createElement(xe,{onError:e.props.onError,onSort:!e.props.filterText&&e.props.activateSortLayer?e.props.onSort:null,filter:e.getNoBackgroundLayers,nodes:e.props.filteredGroups},m.createElement(_e,{groupElement:t,layerElement:n}))))})),e}return t=p,(n=[{key:"render",value:function(){return this.props.groups?this.renderTOC():m.createElement("div",null)}}])&&a(t.prototype,n),r&&a(t,r),p}(m.Component);d(Ae,"propTypes",{id:f.number,items:f.array,buttonContent:f.node,groups:f.array,settings:f.object,layerMetadata:f.object,wfsdownload:f.object,metadataTemplate:f.oneOfType([f.string,f.array,f.object,f.func]),refreshMapEnabled:f.bool,groupStyle:f.object,groupPropertiesChangeHandler:f.func,layerPropertiesChangeHandler:f.func,onToggleGroup:f.func,onToggleLayer:f.func,onContextMenu:f.func,onBrowseData:f.func,onQueryBuilder:f.func,onDownload:f.func,onSelectNode:f.func,selectedNodes:f.array,onZoomToExtent:f.func,retrieveLayerData:f.func,onSort:f.func,onSettings:f.func,onRefreshLayer:f.func,onNewWidget:f.func,hideSettings:f.func,updateSettings:f.func,updateNode:f.func,removeNode:f.func,activateTitleTooltip:f.bool,showFullTitleOnExpand:f.bool,activateOpacityTool:f.bool,activateSortLayer:f.bool,activateFilterLayer:f.bool,activateMapTitle:f.bool,activateToolsContainer:f.bool,activateRemoveLayer:f.bool,activateRemoveGroup:f.bool,activateLegendTool:f.bool,activateZoomTool:f.bool,activateQueryTool:f.bool,activateDownloadTool:f.bool,activateSettingsTool:f.bool,activateMetedataTool:f.bool,activateWidgetTool:f.bool,maxDepth:f.number,visibilityCheckType:f.string,settingsOptions:f.object,chartStyle:f.object,currentZoomLvl:f.number,scales:f.array,layerOptions:f.object,metadataOptions:f.object,spatialOperations:f.array,spatialMethodOptions:f.array,groupOptions:f.object,currentLocale:f.string,currentLocaleLanguage:f.string,onFilter:f.func,filterText:f.string,generalInfoFormat:f.string,selectedLayers:f.array,selectedGroups:f.array,mapName:f.string,filteredGroups:f.array,noFilterResults:f.bool,onAddLayer:f.func,onAddGroup:f.func,onError:f.func,onGetMetadataRecord:f.func,hideLayerMetadata:f.func,activateAddLayerButton:f.bool,activateAddGroupButton:f.bool,activateLayerFilterTool:f.bool,catalogActive:f.bool,refreshLayerVersion:f.func,hideOpacityTooltip:f.bool,layerNodeComponent:f.func,groupNodeComponent:f.func,isLocalizedLayerStylesEnabled:f.bool}),d(Ae,"contextTypes",{messages:f.object}),d(Ae,"defaultProps",{items:[],groupPropertiesChangeHandler:function(){},layerPropertiesChangeHandler:function(){},retrieveLayerData:function(){},onToggleGroup:function(){},onToggleLayer:function(){},onContextMenu:function(){},onToggleQuery:function(){},onZoomToExtent:function(){},onSettings:function(){},onRefreshLayer:function(){},onNewWidget:function(){},updateNode:function(){},removeNode:function(){},onSelectNode:function(){},selectedNodes:[],activateOpacityTool:!0,activateTitleTooltip:!0,showFullTitleOnExpand:!1,activateSortLayer:!0,activateFilterLayer:!0,activateMapTitle:!0,activateToolsContainer:!0,activateLegendTool:!0,activateZoomTool:!0,activateSettingsTool:!0,activateMetedataTool:!0,activateRemoveLayer:!0,activateRemoveGroup:!0,activateQueryTool:!0,activateDownloadTool:!1,activateWidgetTool:!1,activateLayerFilterTool:!1,maxDepth:3,visibilityCheckType:"glyph",settingsOptions:{includeCloseButton:!1,closeGlyph:"1-close",buttonSize:"small",showFeatureInfoTab:!0},layerOptions:{},metadataOptions:{},groupOptions:{},spatialOperations:[{id:"INTERSECTS",name:"queryform.spatialfilter.operations.intersects"},{id:"BBOX",name:"queryform.spatialfilter.operations.bbox"},{id:"CONTAINS",name:"queryform.spatialfilter.operations.contains"},{id:"WITHIN",name:"queryform.spatialfilter.operations.within"}],spatialMethodOptions:[{id:"Viewport",name:"queryform.spatialfilter.methods.viewport"},{id:"BBOX",name:"queryform.spatialfilter.methods.box"},{id:"Circle",name:"queryform.spatialfilter.methods.circle"},{id:"Polygon",name:"queryform.spatialfilter.methods.poly"}],currentLocale:"en-US",filterText:"",selectedLayers:[],selectedGroups:[],mapName:"",filteredGroups:[],noFilterResults:!1,onAddLayer:function(){},onAddGroup:function(){},onError:function(){},onGetMetadataRecord:function(){},hideLayerMetadata:function(){},activateAddLayerButton:!1,activateAddGroupButton:!1,catalogActive:!1,refreshLayerVersion:function(){},metadataTemplate:null});var Re=S(["user","addLayersPermissions","activateAddLayerButton","removeLayersPermissions","activateRemoveLayer","sortingPermission","activateRemoveLayer","addGroupsPermissions","activateAddGroupButton","removeGroupsPermissions","activateRemoveGroup"],(function(e){var t=e.addLayersPermissions,n=void 0===t||t,r=e.removeLayersPermissions,o=void 0===r||r,i=e.sortingPermissions,a=void 0===i||i,s=e.addGroupsPermissions,l=void 0===s||s,c=e.removeGroupsPermissions,u=void 0===c||c,p=e.activateAddLayerButton,d=e.activateRemoveLayer,f=e.activateSortLayer,m=e.activateAddGroupButton,y=e.activateRemoveGroup,b=e.user,g=function(e,t){var n=b&&"ADMIN"===b.role||!1;return!(!e&&!n)&&t};return{activateAddLayerButton:g(n,p),activateRemoveLayer:g(o,d),activateSortLayer:g(a,f),activateAddGroupButton:g(l,m),activateRemoveGroup:g(u,y)}})),Ie=v((function(e){var t=e.checkPlugins;return void 0===t||t}),S(["items","activateAddLayerButton","activateAddGroupButton","activateLayerFilterTool","activateSettingsTool","FeatureEditor"],(function(e){var t=e.items,n=void 0===t?[]:t,r=e.activateAddLayerButton,o=void 0===r||r,i=e.activateAddGroupButton,a=void 0===i||i,s=e.activateQueryTool,l=void 0===s||s,c=e.activateSettingsTool,u=void 0===c||c,p=e.activateLayerFilterTool,d=void 0===p||p,f=e.activateWidgetTool,m=void 0===f||f;return{activateAddLayerButton:o&&!!be(n,{name:"MetadataExplorer"})||!1,activateAddGroupButton:a&&!!be(n,{name:"AddGroup"})||!1,activateSettingsTool:u&&!!be(n,{name:"TOCItemsSettings"})||!1,activateQueryTool:l&&!!be(n,{name:"FeatureEditor"})||!1,activateLayerFilterTool:d&&!!be(n,{name:"FilterLayer"})||!1,activateWidgetTool:m&&!!be(n,{name:"WidgetBuilder"})&&!!be(n,{name:"Widgets"})}}))),De=y(Ee,{groupPropertiesChangeHandler:E,layerPropertiesChangeHandler:j,retrieveLayerData:G,onToggleGroup:se.toggleByType("groups",x),onToggleLayer:se.toggleByType("layers",x),onContextMenu:P,onBrowseData:I,onQueryBuilder:U,onDownload:F,onSort:C,onSettings:T,onZoomToExtent:B,hideSettings:M,updateSettings:_,updateNode:A,removeNode:R,onSelectNode:D,onFilter:k,onAddLayer:ge.bind(null,"metadataexplorer","enabled",!0,"group"),onAddGroup:ge.bind(null,"addgroup","enabled",!0,"parent"),onGetMetadataRecord:ve,onError:z,hideLayerMetadata:N,onNewWidget:function(){return he()},refreshLayerVersion:L})(h(Re,Ie)(Ae)),ke=n("./MapStore2/web/client/api/catalog/index.js").default;e.exports={TOCPlugin:pe(De,{Toolbar:{name:"toc",position:7,exclusive:!0,panel:!0,help:m.createElement(ue,{msgId:"helptexts.layerSwitcher"}),tooltip:"layers",wrap:!0,title:"layers",icon:m.createElement(w,{glyph:"1-layer"}),priority:1},DrawerMenu:{name:"toc",position:1,glyph:"1-layer",icon:m.createElement("img",{src:de}),buttonConfig:{buttonClassName:"square-button no-border",tooltip:"toc.layers"},priority:2}}),reducers:{queryform:n("./MapStore2/web/client/reducers/queryform.js"),query:n("./MapStore2/web/client/reducers/query.js")},epics:n("./MapStore2/web/client/epics/catalog.js").default(ke)}},"./MapStore2/web/client/plugins/TOCItemsSettings.jsx":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/react-redux/es/index.js"),o=n("./node_modules/prop-types/index.js"),i=n.n(o),a=n("./node_modules/reselect/es/index.js"),s=n("./node_modules/recompose/es/Recompose.js"),l=n("./MapStore2/web/client/utils/PluginsUtils.js"),c=n("./MapStore2/web/client/utils/LayersUtils.js"),u=n.n(c),p=n("./MapStore2/web/client/actions/layers.js"),d=n("./MapStore2/web/client/actions/layerCapabilities.js"),f=n("./MapStore2/web/client/components/TOC/enhancers/tocItemsSettings.js"),m=n("./MapStore2/web/client/components/TOC/TOCItemsSettings.jsx"),y=n.n(m),b=n("./node_modules/react/index.js"),g=n.n(b),h=n("./MapStore2/web/client/components/I18N/Message.jsx"),v=n.n(h),S=n("./node_modules/lodash/lodash.js"),w=n("./node_modules/react-bootstrap/es/index.js"),O=n("./MapStore2/web/client/components/data/identify/viewers/HTMLViewer.jsx"),j=n.n(O),E=n("./MapStore2/web/client/components/data/identify/viewers/TextViewer.jsx"),x=n.n(E),P=n("./MapStore2/web/client/components/data/identify/viewers/JSONViewer.jsx"),C=n.n(P),T=n("./MapStore2/web/client/components/misc/HtmlRenderer.jsx"),M=n.n(T),_=n("./MapStore2/web/client/utils/MapInfoUtils.js"),A=n.n(_),R=n("./MapStore2/web/client/components/TOC/fragments/settings/General.jsx"),I=n.n(R),D=n("./MapStore2/web/client/components/TOC/fragments/settings/Display.jsx"),k=n.n(D),L=n("./MapStore2/web/client/components/TOC/fragments/settings/Elevation.jsx"),N=n.n(L),F=n("./MapStore2/web/client/components/TOC/fragments/settings/FeatureInfoEditor.jsx"),U=n.n(F),G=n("./MapStore2/web/client/components/misc/LoadingView.jsx"),B=n.n(G),z=n("./node_modules/raw-loader/index.js!./MapStore2/web/client/plugins/tocitemssettings/featureInfoPreviews/responseHTML.txt"),W=n.n(z),V=n("./node_modules/raw-loader/index.js!./MapStore2/web/client/plugins/tocitemssettings/featureInfoPreviews/responseJSON.txt"),H=n.n(V),q=n("./node_modules/raw-loader/index.js!./MapStore2/web/client/plugins/tocitemssettings/featureInfoPreviews/responseText.txt"),Y=n.n(q),Q=n("./MapStore2/web/client/components/misc/enhancers/loadingState.jsx"),K=n.n(Q),Z=n("./MapStore2/web/client/components/misc/enhancers/emptyState.jsx"),X=n.n(Z),J=n("./MapStore2/web/client/components/widgets/enhancers/wfsTable/describeFetch.js"),$=n.n(J),ee=(n("./MapStore2/web/client/libs/bindings/rxjsRecompose.js"),n("./MapStore2/web/client/utils/ColorUtils.js")),te=n("./MapStore2/web/client/components/style/StylePoint.jsx"),ne=n.n(te),re=n("./MapStore2/web/client/components/style/StylePolygon.jsx"),oe=n.n(re),ie=n("./MapStore2/web/client/components/style/StylePolyline.jsx"),ae=n.n(ie),se=n("./MapStore2/web/client/utils/WFSLayerUtils.js");function le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?le(Object(n),!0).forEach((function(t){ue(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):le(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ue(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var pe=Object(s.compose)(Object(s.withProps)((function(e){var t=e.style,n=void 0===t?{}:t,r=e.styleName,o=n.fillColor,i=n.fillOpacity,a=n.color,s=n.opacity,l=n.shapeStyle,c=n.weight,u=n.radius;return{shapeStyle:ce(ce({},l),{},{marker:"marker"===r,radius:u,width:c,fill:Object(ee.colorToRgbaStr)(o,i),color:Object(ee.colorToRgbaStr)(a,s)})}})),Object(s.withHandlers)({setStyleParameter:function(e){var t=e.onChange,n=void 0===t?function(){}:t,r=e.style,o=void 0===r?{}:r;return function(e,t){switch(e){case"fill":var r=t.r,i=t.g,a=t.b,s=t.a;n("style",ce(ce({},o),{},{fillColor:"rgb(".concat(r,", ").concat(i,", ").concat(a,")"),fillOpacity:s}));break;case"color":var l=t.r,c=t.g,u=t.b,p=t.a;n("style",ce(ce({},o),{},{color:"rgb(".concat(l,", ").concat(c,", ").concat(u,")"),opacity:p}));break;case"width":n("style",ce(ce({},o),{},{weight:t}));break;case"marker":n("styleName",t?"marker":void 0);break;default:n("style",ce(ce({},o),{},ue({},e,t)))}}}})),de={Polygon:pe(oe.a),MultiPolygon:pe(oe.a),GeometryCollection:pe(oe.a),LineString:pe(ae.a),MultiLineString:pe(ae.a),MultiPoint:pe(ne.a),Point:pe(ne.a)},fe=Object(s.branch)((function(e){var t=e.element;return"wfs"===(void 0===t?{}:t).type}),Object(s.mapPropsStream)((function(e){return e.combineLatest(e.map((function(e){return{layer:e.element}})).let($.a).map((function(e){var t=e.error,n=e.loading,r=e.describeFeatureType;return{error:t,loading:n,geometryType:!t&&!n&&r&&Object(se.extractGeometryType)(r)}})),(function(e,t){var n=t.geometryType,r=t.error,o=t.loading;return ce(ce({},e),{},{geometryType:n,error:r,loading:o})}))})),Object(s.withProps)((function(e){var t=e.element;return{geometryType:t&&t.features&&t.features[0].geometry&&t.features[0].geometry.type}}))),me=Object(s.compose)(fe,K()(),X()((function(e){return!e.geometryType})))((function(e){var t=e.geometryType,n=e.element,r=void 0===n?{}:n,o=e.onChange,i=void 0===o?function(){}:o,a=de[t];return g.a.createElement(g.a.Fragment,null,g.a.createElement("h4",null,"",g.a.createElement(v.a,{msgId:"layerProperties.style"})),g.a.createElement(a,{styleName:r.styleName,style:r.style,onChange:i}))})),ye=n("./MapStore2/web/client/plugins/styleeditor/index.js"),be=n("./MapStore2/web/client/components/TOC/fragments/settings/FeatureInfo.jsx"),ge=n.n(be);function he(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?he(Object(n),!0).forEach((function(t){Se(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):he(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Se(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function we(e){return function(e){if(Array.isArray(e))return Oe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Oe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Oe(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function je(){return(je=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ee(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var xe={html:W.a,json:JSON.parse(H.a),text:Y.a},Pe=Object(s.defaultProps)({readOnly:!0})(ye.StyleSelector),Ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.settings,n=void 0===t?{}:t;return"layers"===n.nodeType},Te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.element,n=void 0===t?{}:t;return"wfs"===n.type||"vector"===n.type&&"annotations"!==n.id},Me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.element,n=void 0===t?{}:t;return"wms"===n.type},_e=function(e){return Ce(e)&&(Me(e)||Te(e))},Ae={TEXT:{titleId:"layerProperties.textFormatTitle",descId:"layerProperties.textFormatDescription",glyph:"ext-txt",body:function(){return g.a.createElement("div",null,g.a.createElement("div",null,g.a.createElement(v.a,{msgId:"layerProperties.exampleOfResponse"})),g.a.createElement("br",null),g.a.createElement(x.a,{response:xe.text}))}},HTML:{titleId:"layerProperties.htmlFormatTitle",descId:"layerProperties.htmlFormatDescription",glyph:"ext-html",body:function(){return g.a.createElement("div",null,g.a.createElement("div",null,g.a.createElement(v.a,{msgId:"layerProperties.exampleOfResponse"})),g.a.createElement("br",null),g.a.createElement(j.a,{response:xe.html}))}},PROPERTIES:{titleId:"layerProperties.propertiesFormatTitle",descId:"layerProperties.propertiesFormatDescription",glyph:"ext-json",body:function(){return g.a.createElement("div",null,g.a.createElement("div",null,g.a.createElement(v.a,{msgId:"layerProperties.exampleOfResponse"})),g.a.createElement("br",null),g.a.createElement(C.a,{response:xe.json}))}},TEMPLATE:{titleId:"layerProperties.templateFormatTitle",descId:"layerProperties.templateFormatDescription",glyph:"ext-empty",body:function(e){var t=e.template,n=void 0===t?"":t,r=Ee(e,["template"]);return g.a.createElement("div",null,g.a.createElement("div",null,n&&"<p><br></p>"!==n?g.a.createElement(v.a,{msgId:"layerProperties.templatePreview"}):null),g.a.createElement("br",null),g.a.createElement("div",null,n&&"<p><br></p>"!==n?g.a.createElement(M.a,{html:n}):g.a.createElement("span",null,g.a.createElement("p",null,g.a.createElement(v.a,{msgId:"layerProperties.templateFormatInfoAlert2",msgParams:{attribute:"{ }"}})),g.a.createElement("pre",null,g.a.createElement(v.a,{msgId:"layerProperties.templateFormatInfoAlertExample",msgParams:{properties:"{ properties.id }"}})),g.a.createElement("p",null,g.a.createElement("small",null,g.a.createElement(v.a,{msgId:"layerProperties.templateFormatInfoAlert1"})),"(",g.a.createElement(w.Glyphicon,{glyph:"pencil"}),")")),g.a.createElement(U.a,je({template:n},r))))}}},Re=Object(s.defaultProps)({formatCards:Ae,defaultInfoFormat:A.a.getAvailableInfoFormat()})(ge.a),Ie={},De=function(e,t,n){if(e){var r=Ie[e.name];return r||(r=l.default.getConfiguredPlugin(e,t,n))&&r.loaded&&(Ie[e.name]=r),r}return e},ke=function(e){var t=e.settings,n=e.items,r=void 0===n?[]:n,o=e.loadedPlugins,i=e.onToggleStyleEditor,a=void 0===i?function(){}:i,l=e.onUpdateParams,c=void 0===l?function(){}:l,u=e.element,p=Ee(e,["settings","items","loadedPlugins","onToggleStyleEditor","onUpdateParams","element"]);if(Te({element:u}))return{Component:me};var d=Object(S.sortBy)(Object(S.filter)(we(r),{target:"style"}),["priority"]).filter((function(e){var t=e.selector;return!t||t(ve(ve({},p),{},{element:u}))})),f=Object(S.head)(Object(S.filter)(d,{name:"ThematicLayer"}));if(f){var m=t&&t.options&&t.options.thematic,y=[{glyph:"list",tooltipId:"toc.thematic.classify",visible:p.isAdmin&&!m||!1,onClick:function(){return c({thematic:{unconfigured:!0}})}},{glyph:"trash",tooltipId:"toc.thematic.remove_thematic",visible:p.isAdmin&&m||!1,onClick:function(){return c({thematic:null})}}];return m?{Component:"style"===p.activeTab&&f.plugin&&De(f,o,g.a.createElement(B.a,{width:100,height:100})),toolbar:y}:{toolbar:y}}var b=Object(S.head)(d);return b&&b.plugin?{onClose:function(){return a(null,!1)},Component:De(ve(ve({},b),{},{cfg:ve(ve({},b.cfg||b.plugin.cfg||{}),{},{active:!0})}),o,g.a.createElement(B.a,{width:100,height:100})),toolbarComponent:b.ToolbarComponent&&(b.plugin.cfg&&Object(s.defaultProps)(b.plugin.cfg)(b.ToolbarComponent)||b.ToolbarComponent)}:{}},Le=function(e){var t=e.showFeatureInfoTab,n=void 0===t||t,r=e.loadedPlugins,o=e.items,i=e.onToggleStyleEditor,a=Ee(e,["showFeatureInfoTab","loadedPlugins","items","onToggleStyleEditor"]);return[{id:"general",titleId:"layerProperties.general",tooltipId:"layerProperties.general",glyph:"wrench",visible:!0,Component:I.a},{id:"display",titleId:"layerProperties.display",tooltipId:"layerProperties.display",glyph:"eye-open",visible:Ce(a),Component:k.a},ve({id:"style",titleId:"layerProperties.style",tooltipId:"layerProperties.style",glyph:"dropper",visible:_e(a),Component:Pe},ke(ve({items:o,loadedPlugins:r,onToggleStyleEditor:i},a))),{id:"feature",titleId:"layerProperties.featureInfo",tooltipId:"layerProperties.featureInfo",glyph:"map-marker",visible:n&&Ce(a)&&Me(a)&&!(a.element.featureInfo&&a.element.featureInfo.viewer),Component:Re,toolbar:[{glyph:"pencil",tooltipId:"layerProperties.editCustomFormat",visible:!a.showEditor&&a.element&&a.element.featureInfo&&"TEMPLATE"===a.element.featureInfo.format||!1,onClick:function(){return a.onShowEditor&&a.onShowEditor(!a.showEditor)}}]},{id:"elevation",titleId:"layerProperties.elevation",tooltipId:"layerProperties.elevation",glyph:"1-vector",visible:Ce(a)&&Me(a)&&a.element.dimensions&&a.getDimension&&a.getDimension(a.element.dimensions,"elevation"),Component:N.a}].filter((function(e){return e.visible}))},Ne=n("./MapStore2/web/client/selectors/controls.js"),Fe=n("./MapStore2/web/client/selectors/layers.js"),Ue=n("./MapStore2/web/client/selectors/maplayout.js"),Ge=n("./MapStore2/web/client/selectors/locale.js"),Be=n("./MapStore2/web/client/selectors/security.js"),ze=n("./MapStore2/web/client/selectors/localizedLayerStyles.js"),We=n("./MapStore2/web/client/actions/controls.js"),Ve=n("./MapStore2/web/client/actions/styleeditor.js"),He=Object(a.createSelector)([Fe.layerSettingSelector,Fe.layersSelector,Fe.groupsSelector,Ge.currentLocaleSelector,Ge.currentLocaleLanguageSelector,function(e){return Object(Ue.mapLayoutValuesSelector)(e,{height:!0})},Be.isAdminUserSelector,Ne.initialSettingsSelector,Ne.originalSettingsSelector,Ne.activeTabSettingsSelector,Fe.elementSelector,ze.isLocalizedLayerStylesEnabledSelector],(function(e,t,n,r,o,i,a,s,l,c,u,p){return{settings:e,element:u,groups:n,currentLocale:r,currentLocaleLanguage:o,dockStyle:i,isAdmin:a,initialSettings:s,originalSettings:l,activeTab:c,isLocalizedLayerStylesEnabled:p}})),qe=Object(s.compose)(Object(r.connect)(He,{onHideSettings:p.hideSettings,onUpdateSettings:p.updateSettings,onUpdateNode:p.updateNode,onRetrieveLayerData:d.getLayerCapabilities,onUpdateOriginalSettings:We.setControlProperty.bind(null,"layersettings","originalSettings"),onUpdateInitialSettings:We.setControlProperty.bind(null,"layersettings","initialSettings"),onSetTab:We.setControlProperty.bind(null,"layersettings","activeTab"),onUpdateParams:p.updateSettingsParams,onToggleStyleEditor:Ve.toggleStyleEditor}),f.updateSettingsLifecycle,Object(s.defaultProps)({getDimension:u.a.getDimension}),Object(s.getContext)({loadedPlugins:i.a.object}),Object(s.withPropsOnChange)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.items,n=void 0===t?[]:t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=r.items;return n!==o}),(function(e){return{tabs:Le(e)}})))(y.a);t.default=Object(l.createPlugin)("TOCItemsSettings",{component:qe,containers:{TOC:{doNotHide:!0,name:"TOCItemsSettings"}}})},"./MapStore2/web/client/plugins/ThematicLayer.jsx":function(e,t,n){var r=n("./MapStore2/web/client/utils/PluginsUtils.js").connect,o=n("./node_modules/object-assign/index.js"),i=n("./MapStore2/web/client/actions/layers.js").changeLayerParams,a=n("./MapStore2/web/client/actions/thematic.js"),s=a.loadFields,l=a.loadClassification,c=a.changeConfiguration,u=a.cancelDirty,p=a.setDirty,d=a.setInvalidInput,f=a.resetInvalidInput,m=n("./MapStore2/web/client/selectors/layers.js").getSelectedLayer,y=n("./MapStore2/web/client/api/SLDService.js"),b=n("./MapStore2/web/client/selectors/security.js").isAdminUserSelector;e.exports={ThematicLayerPlugin:o({loadPlugin:function(e){n.e(14).then(function(){var t=r((function(e){var t=e.thematic&&e.thematic.colors;return o({},{layer:m(e),fields:e&&e.thematic&&e.thematic.fields||[],fieldsLoading:{status:e&&e.thematic&&e.thematic.loadingFields||!1,error:e&&e.thematic&&e.thematic.errorFields||null},classification:e&&e.thematic&&e.thematic.classification||[],classificationLoading:{status:e&&e.thematic&&e.thematic.loadingClassification||!1,error:e&&e.thematic&&e.thematic.errorClassification||null},canEditThematic:b(e),initialParams:o(y.defaultParams,t?{ramp:t[0].name}:{}),methods:y.methods,colors:t,adminCfg:e&&e.thematic&&e.thematic.adminCfg,applyEnabled:e&&e.thematic&&e.thematic.dirty||!1,invalidInputs:e&&e.thematic&&e.thematic.invalidInputs||{},geometryType:e&&e.thematic&&e.thematic.classification&&e.thematic.classification.length&&e.thematic.classification[0].type||"Polygon"},y)}),{onChangeConfiguration:c,onChangeLayerParams:i,onSwitchLayer:s,onClassify:l,onApplyStyle:u,onDirtyStyle:p,onInvalidInput:d,onValidInput:f})(n("./MapStore2/web/client/components/TOC/fragments/settings/ThematicLayer.jsx"));e(t)}.bind(null,n)).catch(n.oe)},enabler:function(e){return e.layerSettings&&e.layerSettings.expanded}},{TOCItemsSettings:{priority:1,name:"ThematicLayer",selector:function(e){var t;return null==e||null===(t=e.element)||void 0===t?void 0:t.search},container:"TOCItemSettings",target:"style"}}),reducers:{thematic:n("./MapStore2/web/client/reducers/thematic.js")},epics:n("./MapStore2/web/client/epics/thematic.js")(n("./MapStore2/web/client/api/SLDService.js"))}},"./MapStore2/web/client/plugins/Tutorial.jsx":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n("./node_modules/react/index.js"),s=n("./node_modules/react-redux/es/index.js").connect,l=n("./node_modules/redux/es/index.js").bindActionCreators,c=n("./MapStore2/web/client/actions/tutorial.js"),u=c.initTutorial,p=c.startTutorial,d=c.updateTutorial,f=c.disableTutorial,m=c.resetTutorial,y=c.closeTutorial,b=c.toggleTutorial,g=n("./MapStore2/web/client/plugins/tutorial/preset.js"),h=n("./node_modules/object-assign/index.js"),v=n("./MapStore2/web/client/components/I18N/I18N.jsx"),S=n("./node_modules/react-bootstrap/es/index.js").Glyphicon,w=n("./node_modules/reselect/es/index.js").createSelector,O=n("./MapStore2/web/client/selectors/tutorial.js").tutorialSelector,j=n("./MapStore2/web/client/epics/tutorial.js"),E=s(w([O],(function(e){return{toggle:e.enabled,steps:e.steps,run:e.run,autoStart:e.start,status:e.status,tourAction:e.tourAction,stepIndex:e.stepIndex}})),(function(e){return{actions:l({onSetup:u,onStart:p,onUpdate:d,onDisable:f,onReset:m,onClose:y},e)}}),(function(e,t,n){return o(o(o(o({},e),t),n),{},{presetList:o(o({},g),n.presetList)})}))(n("./MapStore2/web/client/components/tutorial/Tutorial.jsx"));e.exports={TutorialPlugin:h(E,{BurgerMenu:{name:"tutorial",position:1200,text:a.createElement(v.Message,{msgId:"tutorial.title"}),icon:a.createElement(S,{glyph:"book"}),action:b,priority:2,doNotHide:!0}}),reducers:{tutorial:n("./MapStore2/web/client/reducers/tutorial.js")},epics:j}},"./MapStore2/web/client/plugins/VectorStyler.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=n("./node_modules/prop-types/index.js"),f=n("./node_modules/react/index.js"),m=n("./node_modules/react-redux/es/index.js").connect,y=n("./node_modules/react-bootstrap/es/index.js"),b=y.Grid,g=y.Row,h=y.Col,v=y.Panel,S=y.PanelGroup,w=y.Button,O=y.Glyphicon,j=y.FormControl,E=n("./node_modules/react-widgets/lib/index.js").Combobox,x=n("./MapStore2/web/client/utils/AgentUtils.js").getWindowSize,P=n("./MapStore2/web/client/actions/vectorstyler.js"),C=P.setVectorStyleParameter,T=P.setVectorLayer,M=P.newVectorRule,_=P.selectVectorRule,A=P.removeVectorRule,R=P.setVectorRuleParameter,I=n("./MapStore2/web/client/actions/layers.js").changeLayerProperties,D=n("./MapStore2/web/client/plugins/vectorstyler/index.js"),k=D.StylePolygon,L=D.StylePolyline,N=D.StylePoint,F=D.ScaleDenominator,U=n("./MapStore2/web/client/selectors/layers.js").layersSelector,G=n("./MapStore2/web/client/selectors/vectorstyler.js").ruleselctor,B=n("./node_modules/reselect/es/index.js").createSelector,z=n("./node_modules/object-assign/index.js");n("./MapStore2/web/client/plugins/vectorstyler/vectorstyler.css");var W=n("./MapStore2/web/client/plugins/locale/Message.jsx"),V=n("./MapStore2/web/client/utils/SLDUtils.js").vecStyleToSLD,H=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(u,e);var t,n,r,l=s(u);function u(){var e;o(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return p(c(e=l.call.apply(l,[this].concat(n))),"state",{}),p(c(e),"getPanelStyle",(function(){var e=x(),t=e.maxHeight-10,n={maxHeight:t,maxWidth:e.maxWidth-70};return t<600&&(n.height=t,n.overflowY="auto"),n})),p(c(e),"renderError",(function(){return e.props.error?f.createElement(g,null,f.createElement(h,{xs:12},f.createElement("div",{className:"rasterstyler-error"},f.createElement("span",null,e.props.error)))):null})),p(c(e),"renderWarning",(function(e){return e?null:f.createElement(g,null,f.createElement(h,{xs:12},f.createElement("div",{className:"rasterstyler-warning"},f.createElement("span",null,f.createElement(W,{msgId:"print.layoutWarning"})))))})),p(c(e),"renderStyle",(function(){switch(e.props.layer.describeLayer.geometryType){case"Polygon":case"MultiPolygon":case"MultiSurface":return f.createElement(k,null);case"LineString":case"MultiLineString":return f.createElement(L,null);case"Point":case"MultiPoint":return f.createElement(N,{showMarker:!1,showMarkSelector:!0});default:return null}})),p(c(e),"renderSymbolStyler",(function(){return f.createElement(v,{header:f.createElement("label",null,f.createElement(W,{msgId:"vectorstyler.symboltitle"})),eventKey:"1"},e.renderStyle())})),p(c(e),"renderLabelStyler",(function(){return f.createElement(v,{header:f.createElement("label",null,f.createElement(W,{msgId:"vectorstyler.labeltitle"})),eventKey:"2"},f.createElement(b,{fluid:!0},f.createElement(g,null,f.createElement(h,{xs:1},f.createElement("input",{"aria-label":"...",type:"checkbox",defaultChecked:!1})),f.createElement(h,{style:{paddingLeft:0,paddingTop:1},xs:4},f.createElement("label",null,"Label Features")))))})),p(c(e),"renderAvancedRule",(function(){return f.createElement(v,{header:f.createElement("label",null,f.createElement(W,{msgId:"vectorstyler.conditiontitle"})),eventKey:"3"},f.createElement(b,{fluid:!0},f.createElement(F,{minValue:e.props.rule.minDenominator,maxValue:e.props.rule.maxDenominator,onChange:e.props.setRuleParameter})))})),p(c(e),"renderSelector",(function(){return f.createElement(g,{style:{marginBottom:"22px"}},f.createElement(g,null,e.props.hideLayerSelector?null:f.createElement(h,{sm:4},f.createElement("label",null,f.createElement(W,{msgId:"vectorstyler.layerlabel"})),f.createElement(E,{data:e.props.layers.reverse(),value:e.props.layer?e.props.layer.id:null,onChange:function(t){return e.props.selectLayer(t)},valueField:"id",textField:"title"})),e.props.layer?f.createElement(h,{sm:4},f.createElement("label",null,f.createElement(W,{msgId:"vectorstyler.rulelabel"})),f.createElement(E,{data:e.props.rules,value:e.props.rule,onChange:function(t){return e.props.selectRule(t.id)},valueField:"id",textField:"name"})," "):null,e.props.rule?f.createElement(h,{sm:4},f.createElement("label",null,f.createElement(W,{msgId:"vectorstyler.namelabel"})),f.createElement(j,{type:"text",onChange:function(t){return e.props.setRuleParameter("name",t.target.value)},value:e.props.rule.name})):null))})),p(c(e),"renderVectorStyler",(function(){return e.props.layer?f.createElement(g,null,f.createElement(S,{defaultActiveKey:"1",accordion:!0},e.props.rule?e.renderSymbolStyler():null,e.props.rule?e.renderAvancedRule():null)):null})),p(c(e),"renderApplyBtn",(function(){var t=!e.props.rule;return f.createElement(g,null,f.createElement(h,{sm:3,style:{padding:0}},f.createElement(w,{onClick:e.props.addRule},f.createElement(O,{glyph:"plus"}),f.createElement(W,{msgId:"vectorstyler.addrulebtn"}))),f.createElement(h,{sm:3,style:{padding:0}},f.createElement(w,{disabled:t,onClick:function(){return e.props.removeRule(e.props.rule.id)}},f.createElement(O,{glyph:"minus"}),f.createElement(W,{msgId:"vectorstyler.removerulebtn"}))),f.createElement(h,{sm:4,smOffset:2,style:{padding:0}},f.createElement(w,{style:{float:"right"},onClick:e.apply,disabled:t},f.createElement(W,{msgId:"vectorstyler.applybtn"}))))})),p(c(e),"renderBody",(function(){return f.createElement(b,{fluid:!0},e.renderError(),e.renderSelector(),e.renderVectorStyler(),e.props.layer?e.renderApplyBtn():null)})),p(c(e),"apply",(function(){var t=V({rules:e.props.rules,layer:e.props.layer});e.props.changeLayerProperties(e.props.layer.id,{params:z({},e.props.layer.params,{SLD_BODY:t})})})),e}return t=u,(n=[{key:"UNSAFE_componentWillMount",value:function(){}},{key:"UNSAFE_componentWillUpdate",value:function(e){this.bands=e.layer&&e.layer.describeLayer?e.layer.describeLayer.bands:void 0}},{key:"render",value:function(){return this.props.forceOpen||this.props.open?this.props.withContainer?f.createElement(v,{className:"mapstore-vectorstyler-panel",style:this.getPanelStyle(),header:f.createElement("label",null,f.createElement(W,{msgId:"vectorstyler.paneltitle"}))},this.renderBody()):this.renderBody():null}}])&&i(t.prototype,n),r&&i(t,r),u}(f.Component);p(H,"propTypes",{layers:d.array,layer:d.object,rules:d.array,rule:d.object,withContainer:d.bool,open:d.bool,forceOpen:d.bool,style:d.object,selectLayer:d.func,setVectorStyleParameter:d.func,addRule:d.func,removeRule:d.func,selectRule:d.func,setRuleParameter:d.func,error:d.string,changeLayerProperties:d.func,hideLayerSelector:d.bool}),p(H,"contextTypes",{messages:d.object}),p(H,"defaultProps",{hideLayerSelector:!1,open:!1,layers:[],layer:null,forceOpen:!1,withContainer:!0,selectLayer:function(){},setVectorStyleParameter:function(){},opacity:"1.00",style:{},changeLayerProperties:function(){},addRule:function(){},removeRule:function(){},selectRule:function(){},setRuleParameter:function(){}});var q=m(B([function(e){return e.controls.toolbar&&"vectorstyler"===e.controls.toolbar.active},G,function(e){return e.vectorstyler&&e.vectorstyler.rules},function(e){return e.vectorstyler&&e.vectorstyler.layer},U],(function(e,t,n,r,o){return{open:e,rule:t,rules:n,layer:r,layers:o.filter((function(e){return"background"!==e.group}))}})),{setVectorStyleParameter:C,selectLayer:T,addRule:M,removeRule:A,selectRule:_,changeLayerProperties:I,setRuleParameter:R})(H);e.exports={VectorStylerPlugin:z(q,{Toolbar:{name:"vectorstyler",help:f.createElement(W,{msgId:"helptexts.vectorstyler"}),tooltip:"vectorstyler.tooltip",icon:f.createElement(O,{glyph:"pencil"}),position:9,panel:!0,exclusive:!0}}),reducers:{vectorstyler:n("./MapStore2/web/client/reducers/vectorstyler.js")}}},"./MapStore2/web/client/plugins/Widgets.jsx":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/react/index.js"),o=n.n(r),i=n("./node_modules/prop-types/index.js"),a=n.n(i),s=n("./node_modules/react-redux/es/index.js"),l=n("./node_modules/reselect/es/index.js"),c=n("./node_modules/recompose/es/Recompose.js"),u=n("./MapStore2/web/client/utils/PluginsUtils.js"),p=n("./MapStore2/web/client/selectors/map.js"),d=n("./MapStore2/web/client/selectors/widgets.js"),f=n("./MapStore2/web/client/actions/widgets.js"),m=n("./MapStore2/web/client/plugins/widgets/editOptions.js"),y=n.n(m),b=n("./MapStore2/web/client/plugins/widgets/autoDisableWidgets.js"),g=n.n(b),h=n("./MapStore2/web/client/components/layout/enhancers/gridLayout.jsx"),v=n("./node_modules/react-container-dimensions/lib/index.js"),S=n.n(v),w=n("./MapStore2/web/client/components/widgets/view/WidgetsView.jsx"),O=n.n(w);function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M(e);if(t){var o=M(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return T(this,n)}}function T(e,t){return!t||"object"!==j(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){R(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function I(){return(I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var D=Object(c.compose)(Object(s.connect)(Object(l.createSelector)(p.mapIdSelector,d.getVisibleFloatingWidgets,d.getFloatingWidgetsLayout,d.dependenciesSelector,(function(e,t,n,r){return{id:e,widgets:t,layouts:n,dependencies:r}})),{editWidget:f.editWidget,updateWidgetProperty:f.updateWidgetProperty,exportCSV:f.exportCSV,toggleCollapse:f.toggleCollapse,exportImage:f.exportImage,deleteWidget:f.deleteWidget,onLayoutChange:f.changeLayout}),Object(c.compose)(Object(h.heightProvider)({debounceTime:20,closest:!0,querySelector:".fill"}),(function(e){return function(t){return o.a.createElement(S.a,null,(function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.width;return o.a.createElement(e,I({width:r},t))}))}}),Object(c.withProps)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.width,n=e.height,r=n-120,o=4,i=Math.floor(r/o-20);return{rowHeight:i,className:"on-map",breakpoints:{md:480,xxs:0},cols:{md:6,xxs:1},style:{left:t&&t>800?"500px":"0",marginTop:52,bottom:65,height:Math.floor((n-100)/(i+10))*(i+10),width:"calc(100% - ".concat(t&&t>800?570:70,"px)"),position:"absolute",zIndex:50}}}))),Object(c.compose)(Object(c.defaultProps)({toolsOptions:{showPin:"user.role===ADMIN",seeHidden:"user.role===ADMIN",showHide:!1,showCollapse:!0}}),y()("toolsOptions",{asObject:!0}),Object(c.compose)(Object(s.connect)(Object(l.createSelector)(d.isTrayEnabled,(function(e){return{tray:e}}))),Object(c.withPropsOnChange)(["toolsOptions","tray"],(function(e){var t=e.toolsOptions,n=e.tray;return{toolsOptions:t?A(A({},t),{},{showCollapse:t.showCollapse&&n}):t}}))),Object(c.withPropsOnChange)(["widgets","toolsOptions"],(function(e){var t=e.widgets,n=void 0===t?[]:t,r=e.toolsOptions,o=void 0===r?{}:r;return{widgets:n.filter((function(e){return!e.hide||o.seeHidden}))}}))))(O.a),k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(a,e);var t,n,r,i=C(a);function a(){return E(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"render",value:function(){return this.props.enabled?o.a.createElement(D,this.props):null}}])&&x(t.prototype,n),r&&x(t,r),a}(o.a.Component);R(k,"propTypes",{enabled:a.a.bool,shortenChartLabelThreshold:a.a.number}),R(k,"defaultProps",{enabled:!0,shortenChartLabelThreshold:1e3});var L=g()(k);t.default=Object(u.createPlugin)("WidgetsPlugin",{component:L,containers:{TOC:{doNotHide:!0,name:"Widgets"}},reducers:{widgets:n("./MapStore2/web/client/reducers/widgets.js")},epics:n("./MapStore2/web/client/epics/widgets.js")})},"./MapStore2/web/client/plugins/WidgetsBuilder.jsx":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/react/index.js"),o=n.n(r),i=n("./node_modules/prop-types/index.js"),a=n.n(i),s=n("./MapStore2/web/client/epics/widgetsbuilder.js"),l=n("./MapStore2/web/client/utils/PluginsUtils.js"),c=n("./MapStore2/web/client/components/misc/panels/DockPanel.jsx"),u=n.n(c),p=n("./node_modules/react-redux/es/index.js"),d=n("./node_modules/reselect/es/index.js"),f=n("./node_modules/recompose/es/Recompose.js"),m=n("./MapStore2/web/client/actions/controls.js"),y=n("./MapStore2/web/client/selectors/maplayout.js"),b=n("./MapStore2/web/client/selectors/controls.js"),g=n("./MapStore2/web/client/selectors/widgets.js"),h=n("./MapStore2/web/client/actions/widgets.js"),v=n("./MapStore2/web/client/plugins/widgetbuilder/enhancers/withMapExitButton.js"),S=n.n(v),w=n("./MapStore2/web/client/plugins/widgetbuilder/WidgetTypeBuilder.jsx"),O=n.n(w);function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M(e);if(t){var o=M(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return T(this,n)}}function T(e,t){return!t||"object"!==j(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){R(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var I=Object(f.compose)(Object(p.connect)(Object(d.createSelector)(g.dependenciesSelector,g.availableDependenciesForEditingWidgetSelector,(function(e,t){return A({dependencies:e},t)})),{toggleConnection:h.toggleConnection}),S.a)(O.a),D=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(a,e);var t,n,r,i=C(a);function a(){return E(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"componentDidMount",value:function(){this.props.onMount()}},{key:"componentWillUnmount",value:function(){this.props.onUnmount()}},{key:"render",value:function(){return o.a.createElement(u.a,{open:this.props.enabled,size:this.props.dockSize,zIndex:this.props.zIndex,position:this.props.position,bsStyle:"primary",hideHeader:!0,style:A(A({},this.props.layout),{},{background:"white"})},o.a.createElement(I,{enabled:this.props.enabled,onClose:this.props.onClose,typeFilter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type;return"map"!==t&&"legend"!==t},shortenChartLabelThreshold:this.props.shortenChartLabelThreshold}))}}])&&x(t.prototype,n),r&&x(t,r),a}(o.a.Component);R(D,"propTypes",{id:a.a.string,enabled:a.a.bool,limitDockHeight:a.a.bool,fluid:a.a.bool,zIndex:a.a.number,dockSize:a.a.number,position:a.a.string,onMount:a.a.func,onUnmount:a.a.func,onClose:a.a.func,dimMode:a.a.string,src:a.a.string,style:a.a.object,layout:a.a.object,shortenChartLabelThreshold:a.a.number}),R(D,"defaultProps",{id:"widgets-builder-plugin",enabled:!1,dockSize:500,limitDockHeight:!0,zIndex:1e4,fluid:!1,dimMode:"none",position:"left",shortenChartLabelThreshold:1e3,onMount:function(){},onUnmount:function(){},onClose:function(){},layout:{}});var k=Object(p.connect)(Object(d.createSelector)(b.widgetBuilderSelector,(function(e){return Object(y.mapLayoutValuesSelector)(e,{height:!0})}),(function(e,t){return{enabled:e,layout:t}})),{onMount:function(){return Object(m.setControlProperty)("widgetBuilder","available",!0)},onUnmount:function(){return Object(m.setControlProperty)("widgetBuilder","available",!1)},onClose:m.setControlProperty.bind(null,"widgetBuilder","enabled",!1,!1)})(D);t.default=Object(l.createPlugin)("WidgetsBuilder",{component:k,epics:s,containers:{TOC:{doNotHide:!0,name:"WidgetBuilder"}}})},"./MapStore2/web/client/plugins/WidgetsTray.jsx":function(e,t,n){"use strict";n.r(t);var r=n("./MapStore2/web/client/plugins/widgets/WidgetsTray.jsx"),o=n.n(r),i=n("./MapStore2/web/client/plugins/widgets/autoDisableWidgets.js"),a=n.n(i),s=n("./MapStore2/web/client/epics/widgetsTray.js");t.default={WidgetsTrayPlugin:a()(o.a),epics:s}},"./MapStore2/web/client/plugins/drawer/Menu.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function s(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m(e);if(t){var o=m(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d(this,n)}}function d(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=n("./node_modules/react/index.js"),g=n("./node_modules/prop-types/index.js"),h=n("./node_modules/react-bootstrap/es/index.js"),v=h.Glyphicon,S=h.Button,w=h.Tooltip,O=n("./MapStore2/web/client/components/misc/OverlayTrigger.jsx"),j=n("./node_modules/react-sidebar/dist-modules/index.js").default,E=n("./node_modules/react-resizable/index.js").Resizable,x=n("./MapStore2/web/client/components/I18N/Message.jsx"),P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(d,e);var t,n,r,o=p(d);function d(){var e;l(this,d);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return y(f(e=o.call.apply(o,[this].concat(n))),"getWidth",(function(){return e.props.dynamicWidth||e.props.width})),y(f(e),"renderChildren",(function(t,n){var r={key:t.key?t.key:n,ref:t.ref,open:e.props.activeKey&&e.props.activeKey===t.props.eventKey},o=t.props,i=(o.glyph,o.icon,o.buttonConfig,s(o,["glyph","icon","buttonConfig"]));return b.createElement(t.type,a({},r,i))})),y(f(e),"renderButtons",(function(){return e.props.children.map((function(t){var n=b.createElement(S,{key:t.props.eventKey,bsSize:"large",className:t.props.buttonConfig&&t.props.buttonConfig.buttonClassName?t.props.buttonConfig.buttonClassName:"square-button",onClick:e.props.onChoose.bind(null,t.props.eventKey,e.props.activeKey===t.props.eventKey),bsStyle:e.props.activeKey===t.props.eventKey?"default":"primary"},t.props.glyph?b.createElement(v,{glyph:t.props.glyph}):t.props.icon);if(t.props.buttonConfig&&t.props.buttonConfig.tooltip){var r=b.createElement(w,{key:"tooltip."+t.props.eventKey,id:"tooltip."+t.props.eventKey},b.createElement(x,{msgId:t.props.buttonConfig.tooltip}));return b.createElement(O,{placement:"bottom",key:"overlay-trigger."+t.props.eventKey,overlay:r},n)}return n}))})),y(f(e),"renderContent",(function(){var t=e.props.single?b.createElement("div",{className:"navHeader",style:{width:"100%",minHeight:"35px"}},b.createElement(v,{glyph:"1-close",className:"no-border btn-default",onClick:e.props.onToggle,style:{cursor:"pointer"}}),b.createElement("div",{className:"navButtons"},e.renderButtons())):b.createElement("div",{className:"navHeader",style:{width:"100%",minHeight:"35px"}},b.createElement("span",{className:"title"},e.props.title),b.createElement(v,{glyph:"1-close",className:"no-border btn-default",onClick:e.props.onToggle,style:{cursor:"pointer"}})),n=b.createElement("div",{className:"nav-content"},t,b.createElement("div",{className:"nav-body"},e.props.children.filter((function(t){return!e.props.single||e.props.activeKey===t.props.eventKey})).map(e.renderChildren)));return e.props.resizable?b.createElement(E,{axis:"x",resizeHandles:["e"],width:e.getWidth(),onResize:e.resize},n):n})),y(f(e),"resize",(function(t,n){var r=n.size;e.props.onResize(r.width)})),e}return t=d,(n=[{key:"componentDidMount",value:function(){if(!this.props.overlapMap&&this.props.show){var e={left:this.props.width,width:"calc(100% - ".concat(this.props.width,"px)")};this.props.changeMapStyle(e,"drawerMenu")}}},{key:"componentDidUpdate",value:function(e){if(!this.props.overlapMap&&e.show!==this.props.show){var t=this.props.show?{left:this.props.width,width:"calc(100% - ".concat(this.props.width,"px)")}:{};this.props.changeMapStyle(t,"drawerMenu")}}},{key:"render",value:function(){var e=this;return b.createElement(j,{styles:{sidebar:i(i({},this.props.layout),{},{zIndex:1022,width:this.getWidth()}),overlay:{zIndex:1021},root:{right:this.props.show?0:"auto",width:"0",overflow:"visible"},content:{overflowY:"auto"}},sidebarClassName:"nav-menu",onSetOpen:function(){e.props.onToggle()},open:this.props.show,docked:this.props.docked,sidebar:this.renderContent()},b.createElement("div",null))}}])&&c(t.prototype,n),r&&c(t,r),d}(b.Component);y(P,"propTypes",{title:g.node,alignment:g.string,activeKey:g.string,docked:g.bool,show:g.bool,onToggle:g.func,onChoose:g.func,single:g.bool,width:g.number,dynamicWidth:g.number,overlapMap:g.bool,changeMapStyle:g.func,layout:g.object,resizable:g.bool,onResize:g.func}),y(P,"defaultProps",{docked:!1,single:!1,width:300,overlapMap:!0,layout:{},resizable:!1,onResize:function(){}}),e.exports=P},"./MapStore2/web/client/plugins/drawer/Section.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=n("./node_modules/prop-types/index.js"),f=n("./node_modules/react/index.js"),m=n("./node_modules/react-bootstrap/es/index.js").Glyphicon,y=n("./MapStore2/web/client/components/misc/Modal.jsx"),b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(u,e);var t,n,r,l=s(u);function u(){var e;o(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return p(c(e=l.call.apply(l,[this].concat(n))),"onHeaderClick",(function(){e.props.onHeaderClick(e.props.eventKey)})),p(c(e),"getHeight",(function(){return e.props.open&&e.refs.sectionContent?e.refs.sectionContent.scrollHeight+10:"0"})),e}return t=u,(n=[{key:"render",value:function(){var e={maxHeight:this.getHeight(),overflow:this.props.open?"auto":"hidden",padding:this.props.open?null:"0"};return f.createElement("div",{className:"section"},f.createElement("div",{className:"sectionHeader",style:{width:"100%"},onClick:this.onHeaderClick},this.props.renderInModal?null:f.createElement(m,{glyph:"triangle-right",style:this.props.open?{transform:"rotate(90deg)"}:{}}),f.createElement("span",{className:this.headerClassName+" sectionTitle",ref:"sectionTitle"},this.props.header)),this.props.renderInModal?f.createElement(y,{ref:"modal",show:this.props.open,onHide:this.onHeaderClick},f.createElement(y.Header,{closeButton:!0},f.createElement(y.Title,null,this.props.header)),f.createElement(y.Body,null,this.props.children)):f.createElement("div",{ref:"sectionContent",className:"sectionContent",style:e},this.props.children))}}])&&i(t.prototype,n),r&&i(t,r),u}(f.Component);p(b,"displayName","Section"),p(b,"propTypes",{key:d.string,eventKey:d.string,headerClassName:d.string,open:d.bool,onHeaderClick:d.func,renderInModal:d.bool,header:d.node}),p(b,"defaultProps",{headerClassName:"panel-heading"}),e.exports=b},"./MapStore2/web/client/plugins/drawer/drawer.css":function(e,t,n){var r=n("./node_modules/css-loader/index.js!./node_modules/postcss-loader/src/index.js?!./MapStore2/web/client/plugins/drawer/drawer.css");"string"==typeof r&&(r=[[e.i,r,""]]);n("./node_modules/style-loader/addStyles.js")(r,{});r.locals&&(e.exports=r.locals)},"./MapStore2/web/client/plugins/example.jsx":function(e,t,n){"use strict";n.r(t),n.d(t,"ConnectedSamplePlugin",(function(){return j}));var r=n("./node_modules/react/index.js"),o=n.n(r),i=n("./node_modules/react-redux/es/index.js"),a=n("./node_modules/prop-types/index.js"),s=n.n(a),l=n("./node_modules/lodash/lodash.js"),c=n("./MapStore2/web/client/actions/map.js");n("./MapStore2/web/client/actions/timeline.js");function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b(e);if(t){var o=b(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g,h,v,S=n("./MapStore2/web/client/actions/mapInfo.js"),w=(S.hideMapinfoMarker,S.showMapinfoRevGeocode),O=(S.hideMapinfoRevGeocode,S.clearWarning,S.toggleMapInfoState,S.changeMapInfoFormat,S.updateCenterToMarker,S.closeIdentify,S.purgeMapInfoResults,S.updateFeatureInfoClickPoint,S.changeFormat,S.toggleShowCoordinateEditor,S.changePage,S.toggleHighlightFeature,S.editLayerFeatures,function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(a,e);var t,n,r,i=m(a);function a(){return p(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"render",value:function(){var e=this;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{style:{position:"absolute",top:"750px",left:"20px",zIndex:1e6,backgroundColor:"yellow"}},"Zoom: ",this.props.zoom,o.a.createElement("button",{onClick:function(){return e.props.onZoom(e.props.zoom+1)}},"Increase"),o.a.createElement("button",{onClick:function(){return e.props.onZoom(e.props.zoom-1)}},"Decrease"),o.a.createElement("button",{onClick:function(){return e.props.onClick("30","33")}},"click"),o.a.createElement("button",{onClick:function(){return e.props.extent([30,33])}},"selectTime")))}}])&&d(t.prototype,n),r&&d(t,r),a}(o.a.Component));g=O,h="propTypes",v={zoom:s.a.number,onZoom:s.a.func,onClick:s.a.func,extent:s.a.func},h in g?Object.defineProperty(g,h,{value:v,enumerable:!0,configurable:!0,writable:!0}):g[h]=v;var j=Object(i.connect)((function(e){return{zoom:Object(l.get)(e,"map.present.zoom")}}),{onZoom:c.changeZoomLevel,onClick:c.panTo,extent:w})(O)},"./MapStore2/web/client/plugins/featuregrid/gridEvents.js":function(e,t,n){var r=n("./MapStore2/web/client/actions/featuregrid.js"),o=r.sort,i=r.selectFeatures,a=r.deselectFeatures,s=r.featureModified,l=r.updateFilter,c=r.activateTemporaryChanges;e.exports={onGridSort:function(e,t){return o(e,t)},onAddFilter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l(e)},onTemporaryChanges:function(e){return c(e)},onGridRowsUpdated:function(e,t){var n,r,o=e.fromRow,i=e.toRow,a=e.updated,l=(n=o,r=i,Array.from({length:r+1-n},(function(e,t){return t+n}))).map((function(e){return t(e)})).filter((function(e){return Object.keys(a||{}).filter((function(t){return e.properties[t]!==a[t]})).length>0}));return s(l,a)},onRowsToggled:function(e,t){return i(e.map((function(e){return t(e.rowIdx)})),!1)},onRowsSelected:function(e,t){return i(e.map((function(e){return t(e.rowIdx)})),!0)},onRowsDeselected:function(e,t){return a(e.map((function(e){return t(e.rowIdx)})))}}},"./MapStore2/web/client/plugins/featuregrid/gridTools.jsx":function(e,t,n){var r=n("./node_modules/react/index.js"),o=n("./node_modules/@turf/bbox/index.js"),i=n("./MapStore2/web/client/actions/map.js").zoomToExtent,a=n("./MapStore2/web/client/components/I18N/Message.jsx"),s=n("./node_modules/react-bootstrap/es/index.js"),l=s.Glyphicon,c=s.Tooltip,u=n("./MapStore2/web/client/components/misc/OverlayTrigger.jsx");e.exports=[{name:"",key:"geometry",width:35,frozen:!0,events:{onClick:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=r.crs;return e.geometry?i(o(e),a||"EPSG:4326"):{type:"NONE"}}},formatter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.value;return t?r.createElement(l,{glyph:"zoom-to"}):r.createElement(u,{placement:"top",overlay:r.createElement(c,{id:"fe-save-features"},r.createElement(a,{msgId:"featuregrid.missingGeometry"}))},r.createElement(l,{glyph:"exclamation-mark"}))}}]},"./MapStore2/web/client/plugins/featuregrid/index.jsx":function(e,t,n){e.exports={gridTools:n("./MapStore2/web/client/plugins/featuregrid/gridTools.jsx"),toolbarEvents:n("./MapStore2/web/client/plugins/featuregrid/toolbarEvents.js"),gridEvents:n("./MapStore2/web/client/plugins/featuregrid/gridEvents.js"),pageEvents:n("./MapStore2/web/client/plugins/featuregrid/pageEvents.js")}},"./MapStore2/web/client/plugins/featuregrid/pageEvents.js":function(e,t,n){var r=n("./MapStore2/web/client/actions/featuregrid.js"),o=r.changePage,i=r.moreFeatures;e.exports={onPageChange:function(e,t){return o(e,t)},moreFeatures:i}},"./MapStore2/web/client/plugins/featuregrid/panels/AttributeSelector.jsx":function(e,t,n){var r=n("./node_modules/react-redux/es/index.js").connect,o=n("./MapStore2/web/client/components/data/featuregrid/AttributeSelector.jsx"),i=n("./MapStore2/web/client/selectors/featuregrid.js").getCustomizedAttributes,a=n("./MapStore2/web/client/actions/featuregrid.js").customizeAttribute;e.exports=r((function(e){return{attributes:i(e)}}),{onChange:function(e,t){return a(e,"hide",t)}})(o)},"./MapStore2/web/client/plugins/featuregrid/panels/index.jsx":function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=n("./node_modules/react/index.js"),l=n("./node_modules/react-redux/es/index.js").connect,c=n("./node_modules/redux/es/index.js").bindActionCreators,u=n("./node_modules/reselect/es/index.js"),p=u.createSelector,d=u.createStructuredSelector,f=n("./MapStore2/web/client/selectors/controls.js"),m=f.widgetBuilderAvailable,y=f.wfsDownloadAvailable,b=n("./MapStore2/web/client/selectors/query.js"),g=b.paginationInfo,h=b.featureLoadingSelector,v=b.resultsSelector,S=b.isSyncWmsActive,w=b.featureCollectionResultSelector,O=n("./MapStore2/web/client/selectors/featuregrid.js"),j=O.getTitleSelector,E=O.modeSelector,x=O.selectedFeaturesCount,P=O.hasChangesSelector,C=O.hasGeometrySelector,T=O.isSimpleGeomSelector,M=O.hasNewFeaturesSelector,_=O.isSavingSelector,A=O.isSavedSelector,R=O.isDrawingSelector,I=O.getAttributeFilter,D=O.hasSupportedGeometry,k=O.timeSyncActive,L=O.showTimeSync,N=O.isEditingAllowedSelector,F=n("./MapStore2/web/client/selectors/maptype.js").isCesium,U=n("./MapStore2/web/client/selectors/maplayout.js").mapLayoutValuesSelector,G=n("./MapStore2/web/client/selectors/featuregrid.js"),B=G.chartDisabledSelector,z=G.showAgainSelector,W=G.showPopoverSyncSelector,V=G.selectedLayerNameSelector,H=n("./MapStore2/web/client/actions/featuregrid.js"),q=H.deleteFeatures,Y=H.toggleTool,Q=H.clearChangeConfirmed,K=H.closeFeatureGridConfirmed,Z=H.closeFeatureGrid,X=n("./MapStore2/web/client/plugins/featuregrid/index.jsx"),J=X.toolbarEvents,$=X.pageEvents,ee=n("./MapStore2/web/client/components/data/featuregrid/filterRenderers/index.js").getFilterRenderer,te=n("./MapStore2/web/client/selectors/query.js"),ne=te.isDescribeLoaded,re=te.isFilterActive,oe=n("./MapStore2/web/client/utils/ogc/WFS/base.js"),ie=oe.getFeatureTypeProperties,ae=oe.isGeometryType,se=l(d({loading:h}))(n("./MapStore2/web/client/components/data/featuregrid/EmptyRowsView.jsx")),le=l(d({saving:_,saved:A,mode:E,hasChanges:P,hasNewFeatures:M,hasGeometry:C,syncPopover:function(e){return{showAgain:z(e),showPopoverSync:W(e),dockSize:U(e,{dockSize:!0}).dockSize+3.2+"%"}},isDrawing:R,showChartButton:function(e){return!B(e)&&m(e)},isSimpleGeom:T,selectedCount:x,disableToolbar:function(e){return e&&e.featuregrid&&e.featuregrid.disableToolbar||!ne(e,V(e))},displayDownload:y,disableDownload:function(e){return 0===(v(e)||[]).length},isDownloadOpen:function(e){return e&&e.controls&&e.controls.wfsdownload&&e.controls.wfsdownload.enabled},isSyncActive:S,isColumnsOpen:function(e){return e&&e.featuregrid&&e.featuregrid.tools&&e.featuregrid.tools.settings},disableZoomAll:function(e){return e&&e.featuregrid.virtualScroll||0===w(e).features.length},isSearchAllowed:function(e){return!F(e)},isEditingAllowed:N,hasSupportedGeometry:D,isFilterActive:re,showTimeSyncButton:L,timeSync:k}),(function(e){return{events:c(J,e)}}))(n("./MapStore2/web/client/components/data/featuregrid/toolbars/Toolbar.jsx")),ce=l(p(j,(function(e){return{title:e}})),{onClose:J.onClose})(n("./MapStore2/web/client/components/data/featuregrid/Header.jsx")),ue=l(p(d(g),h,(function(e){return e&&e.featuregrid&&!!e.featuregrid.virtualScroll}),(function(e,t,n){return i(i({},e),{},{loading:t,virtualScroll:n})})),$)(n("./MapStore2/web/client/components/data/featuregrid/Footer.jsx")),pe=l(p(x,(function(e){return{count:e}})),{onClose:function(){return Y("deleteConfirm",!1)},onConfirm:function(){return q()}})(n("./MapStore2/web/client/components/data/featuregrid/dialog/ConfirmDelete.jsx")),de=l(p(x,(function(e){return{count:e}})),{onClose:function(){return Y("clearConfirm",!1)},onConfirm:function(){return Q()}})(n("./MapStore2/web/client/components/data/featuregrid/dialog/ConfirmClear.jsx")),fe=l((function(){}),{onClose:function(){return K()},onConfirm:function(){return Z()}})(n("./MapStore2/web/client/components/data/featuregrid/dialog/ConfirmFeatureClose.jsx")),me={settings:n("./MapStore2/web/client/plugins/featuregrid/panels/AttributeSelector.jsx")},ye={deleteConfirm:pe,featureCloseConfirm:fe,clearConfirm:de},be={settings:{style:{padding:"0 12px",overflow:"auto",flex:"0 0 14em",boxShadow:"inset 0px 0px 10px rgba(0, 0, 0, 0.4)",height:"100%",minWidth:195}}};e.exports={getPanels:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).filter((function(t){return e[t]&&me[t]})).map((function(e){var t=me[e];return s.createElement(t,r({key:e},be[e]||{}))}))},getHeader:function(){return s.createElement(ce,null,s.createElement(le,null))},getFooter:function(e){return e.focusOnEdit&&e.hasChanges||e.newFeatures.length>0?null:s.createElement(ue,null)},getEmptyRowsView:function(){return se},getFilterRenderers:p((function(e){return e}),(function(e){return e?(ie(e)||[]).reduce((function(e,t){return i(i({},e),{},a({},t.name,l(p((function(e){return I(e,t.name)}),E,(function(e,n){var r=i({value:e&&(e.rawValue||e.value)},ae(t)?{filterEnabled:null==e?void 0:e.enabled,filterDeactivated:null==e?void 0:e.deactivated}:{}),o=ae(t)?{}:{disabled:!0,tooltipMsgId:"featuregrid.filter.tooltips.editMode"};return"EDIT"===n?i(i({},r),o):r})))(ee(ae(t)?"geometry":t.localType,{name:t.name}))))}),{}):{}})),getDialogs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).filter((function(t){return e[t]&&ye[t]})).map((function(e){var t=ye[e];return s.createElement(t,{key:e})}))}}},"./MapStore2/web/client/plugins/featuregrid/toolbarEvents.js":function(e,t,n){var r=n("./MapStore2/web/client/actions/controls.js").toggleControl,o=n("./MapStore2/web/client/actions/featuregrid.js"),i=o.toggleTool,a=o.toggleEditMode,s=o.toggleViewMode,l=o.closeFeatureGridConfirm,c=o.saveChanges,u=o.hideSyncPopover,p=o.setTimeSync,d=o.toggleShowAgain,f=o.createNewFeatures,m=o.startEditingFeature,y=o.startDrawingFeature,b=o.deleteGeometry,g=o.openAdvancedSearch,h=o.zoomAll,v=n("./MapStore2/web/client/actions/widgets.js").createChart,S=n("./MapStore2/web/client/actions/wfsquery.js").toggleSyncWms;e.exports={createFeature:function(){return f([{}])},saveChanges:function(){return c()},clearFeatureEditing:function(){return i("clearConfirm",!0)},deleteGeometry:function(){return b()},deleteFeatures:function(){return i("deleteConfirm",!0)},download:function(){return r("wfsdownload")},settings:function(){return i("settings")},switchEditMode:function(){return a()},startEditingFeature:function(){return m()},startDrawingFeature:function(){return y()},switchViewMode:function(){return s()},onClose:function(){return l()},showQueryPanel:function(){return g()},zoomAll:function(){return h()},sync:function(){return S()},setTimeSync:p,hideSyncPopover:function(){return u()},toggleShowAgain:function(){return d()},chart:function(){return v()}}},"./MapStore2/web/client/plugins/locate/locate.css":function(e,t,n){var r=n("./node_modules/css-loader/index.js!./node_modules/postcss-loader/src/index.js?!./MapStore2/web/client/plugins/locate/locate.css");"string"==typeof r&&(r=[[e.i,r,""]]);n("./node_modules/style-loader/addStyles.js")(r,{});r.locals&&(e.exports=r.locals)},"./MapStore2/web/client/plugins/manager/EditorEnhancer.js":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){var t=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===r(t)?t:String(t)}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var c=n("./node_modules/recompose/es/Recompose.js"),u=c.compose,p=c.withStateHandlers,d=c.defaultProps,f=c.withPropsOnChange,m=n("./MapStore2/web/client/components/misc/enhancers/propsStreamFactory.jsx"),y=n("./node_modules/rxjs/Rx.js"),b=n("./node_modules/lodash/lodash.js").isEmpty,g=n("./node_modules/react-redux/es/index.js").connect,h=n("./MapStore2/web/client/actions/draw.js").changeDrawingStatus,v=n("./MapStore2/web/client/actions/notifications.js").error,S=function(e){return e.filter((function(){return!1})).startWith({})},w=n("./MapStore2/web/client/observables/rulesmanager.js").getStylesAndAttributes;e.exports=u(g((function(){return{}}),{onChangeDrawingStatus:h,onError:v}),d({dataStreamFactory:function(e){return e.distinctUntilChanged((function(e,t){return n=t,r=e.activeRule,o=n.activeRule,r.layer===o.layer;var n,r,o})).filter((function(e){var t=e.activeRule;return t.layer&&t.workspace})).switchMap((function(e){var t=e.activeRule,n=e.optionsLoaded,r=e.onError,o=void 0===r?function(){}:r,i=e.setLoading,a=t.workspace,s=t.layer;return i(!0),w(s,a).do((function(e){return n(e)})).catch((function(){return i(!1),y.Observable.of(o({title:"rulesmanager.errorTitle",message:"rulesmanager.errorLoading"}))})).do((function(){return i(!1)}))})).let(S)}}),p((function(e){var t=e.activeRule;return{activeRule:t,initRule:t,activeEditor:"1",styles:[],properties:[]}}),{setOption:function(e){var t=e.activeRule;return function(e){var n=e.key,r=e.value;if("workspace"===n){var i=t.layer,c=(t.workspace,t.constraints,r?{}:{layer:i});return{activeRule:a(a({},l(t,["layer","workspace","constraints"])),{},{workspace:r},c),styles:[],properties:[],type:void 0,layer:void 0}}if("layer"===n){t.layer,t.constraints;return{activeRule:a(a({},l(t,["layer","constraints"])),{},{layer:r})}}if("service"===n){t.request,t.service;return{activeRule:a(a({},l(t,["request","service"])),{},{service:r})}}if(!r){t[n];return{activeRule:l(t,[n].map(o))}}return{activeRule:a(a({},t),{},s({},n,r))}}},setRule:function(){return function(e){return{activeRule:e}}},setConstraintsOption:function(e){var t=e.activeRule,n=e.type;return function(e){var r=e.key,o=e.value,i=a(a({},t.constraints||{}),{},s({type:n},r,o));return{activeRule:a(a({},t),{},{constraints:i})}}},onNavChange:function(){return function(e){return{activeEditor:e}}},cleanConstraints:function(e,t){var n=e.activeRule,r=t.onChangeDrawingStatus;return function(e){n.constraints;var t=l(n,["constraints"]);return r("clean","","rulesmanager",[],{}),e&&{activeRule:t}||{activeRule:t,styles:void 0,properties:void 0,type:void 0,layer:void 0}}},optionsLoaded:function(){return function(e){return{styles:e.styles,properties:e.properties,type:e.type,layer:e.layer}}}}),f(["geometryState"],(function(e){var t=e.activeRule,n=void 0===t?{}:t,r=e.geometryState,o=e.setRule;if(!b(r)){var i=n.constraints,s=void 0===i?{}:i;o(a(a({},n),{},{constraints:a(a({},s),{},{restrictedAreaWkt:r.wkt})}))}return{}})),m)},"./MapStore2/web/client/plugins/manager/RulesEditor.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=n("./node_modules/react/index.js"),f=n("./node_modules/prop-types/index.js"),m=n("./MapStore2/web/client/utils/RulesEditor.js"),y=m.isSaveDisabled,b=m.isRulePristine,g=m.isRuleValid,h=m.askConfirm,v=n("./MapStore2/web/client/components/I18N/Message.jsx"),S=n("./MapStore2/web/client/components/layout/BorderLayout.jsx"),w=n("./MapStore2/web/client/components/manager/rulesmanager/ruleseditor/Header.jsx"),O=n("./MapStore2/web/client/components/manager/rulesmanager/ruleseditor/EditMain.jsx"),j=n("./MapStore2/web/client/components/manager/rulesmanager/ruleseditor/StylesEditor.jsx"),E=n("./MapStore2/web/client/components/manager/rulesmanager/ruleseditor/FiltersEditor.jsx"),x=n("./MapStore2/web/client/components/manager/rulesmanager/ruleseditor/AttributesEditor.jsx"),P=n("./MapStore2/web/client/components/manager/rulesmanager/ModalDialog.jsx"),C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(u,e);var t,n,r,l=s(u);function u(){var e;o(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return p(c(e=l.call.apply(l,[this].concat(n))),"cancelEditing",(function(){var t=e.props,n=t.activeRule,r=t.initRule,o=t.onExit;b(n,r)?o():e.setState((function(){return{modalProps:{title:"featuregrid.toolbar.saveChanges",showDialog:!0,buttons:[{text:d.createElement(v,{msgId:"no"}),bsStyle:"primary",onClick:e.cancel},{text:d.createElement(v,{msgId:"yes"}),bsStyle:"primary",onClick:o}],closeAction:e.cancel,msg:"map.details.sureToClose"}}}))})),p(c(e),"cancel",(function(){e.setState((function(){return{modalProps:{showDialog:!1}}}))})),p(c(e),"save",(function(){var t=e.props,n=t.activeRule,r=t.onSave;g(n)?r(n):e.setState((function(){return{modalProps:{title:"featuregrid.toolbar.saveChanges",showDialog:!0,buttons:[{text:"Ok",bsStyle:"primary",onClick:e.cancel}],closeAction:e.cancel,msg:"rulesmanager.invalidForm"}}}))})),p(c(e),"setOption",(function(t){var n=t.key,r=t.value;h(e.props.activeRule,n,r)?e.setState((function(){return{modalProps:{title:"rulesmanager.resetconstraints",showDialog:!0,buttons:[{text:d.createElement(v,{msgId:"no"}),bsStyle:"primary",onClick:e.cancel},{text:d.createElement(v,{msgId:"yes"}),bsStyle:"primary",onClick:function(){e.cancel(),e.props.setOption({key:n,value:r}),e.props.cleanConstraints("grant"===n)}}],closeAction:e.cancel,msg:"rulesmanager.constraintsmsg"}}})):e.props.setOption({key:n,value:r})})),e}return t=u,(n=[{key:"render",value:function(){var e=this.props,t=e.loading,n=e.activeRule,r=e.layer,o=e.activeEditor,i=e.onNavChange,a=e.initRule,s=e.styles,l=void 0===s?[]:s,c=e.setConstraintsOption,u=e.type,p=e.properties,f=e.disableDetails,m=(this.state||{}).modalProps;return d.createElement(S,{className:"bg-body",header:d.createElement(w,{disableDetails:f,layer:r,loading:t,type:u,onSave:this.save,onExit:this.cancelEditing,activeTab:o,disableSave:y(n,a),rule:n,onNavChange:i})},d.createElement(O,{key:"main-editor",rule:n,setOption:this.setOption,active:"1"===o}),d.createElement(j,{styles:l,key:"styles-editor",constraints:n&&n.constraints,setOption:c,active:"2"===o}),d.createElement(E,{layer:r,key:"filters-editor",setOption:c,constraints:n&&n.constraints,active:"3"===o}),d.createElement(x,{key:"attributes-editor",active:"4"===o,attributes:p,constraints:n&&n.constraints,setOption:c}),d.createElement(P,m))}}])&&i(t.prototype,n),r&&i(t,r),u}(d.Component);p(C,"propTypes",{initRule:f.object,disableDetails:f.bool,activeRule:f.object,activeEditor:f.string,onNavChange:f.func,setOption:f.func,setConstraintsOption:f.func,onExit:f.func,onSave:f.func,onDelete:f.func,styles:f.array,type:f.string,properties:f.array,loading:f.bool,cleanConstraints:f.func,layer:f.object}),p(C,"defaultProps",{activeEditor:"1",onNavChange:function(){},setOption:function(){},onExit:function(){},onSave:function(){},onDelete:function(){},type:""}),e.exports=C},"./MapStore2/web/client/plugins/manager/RulesToolbar.jsx":function(e,t,n){function r(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var o=n("./node_modules/react/index.js"),i=n("./node_modules/recompose/es/Recompose.js"),a=i.compose,s=i.withProps,l=i.withStateHandlers,c=i.withPropsOnChange,u=n("./node_modules/react-redux/es/index.js").connect,p=n("./MapStore2/web/client/actions/rulesmanager.js"),d=p.onEditRule,f=p.delRules,m=p.onCacheClean,y=n("./MapStore2/web/client/selectors/rulesmanager.js").rulesEditorToolbarSelector,b=n("./MapStore2/web/client/components/misc/toolbar/Toolbar.jsx"),g=n("./MapStore2/web/client/components/manager/rulesmanager/ModalDialog.jsx"),h=n("./MapStore2/web/client/components/I18N/Message.jsx"),v=a(u(y,{deleteRules:f,editOrCreate:d,cleanCache:m}),l((function(){return{modal:"none"}}),{cancelModal:function(){return function(){return{modal:"none"}}},showModal:function(){return function(e){return{modal:e}}}}),s((function(e){var t=e.showAdd,n=e.showEdit,r=e.showModal,o=e.showInsertBefore,i=e.showInsertAfter,a=e.showDel,s=e.showCache,l=e.editOrCreate,c=void 0===l?function(){}:l;return{buttons:[{glyph:"plus",tooltipId:"rulesmanager.tooltip.addT",visible:t,onClick:c.bind(null,0,!0)},{glyph:"pencil",tooltipId:"rulesmanager.tooltip.editT",visible:n,onClick:c.bind(null,0,!1)},{glyph:"add-row-before",tooltipId:"rulesmanager.tooltip.addBeT",visible:o,onClick:c.bind(null,-1,!0)},{glyph:"add-row-after",tooltipId:"rulesmanager.tooltip.addAfT",visible:i,onClick:c.bind(null,1,!0)},{glyph:"trash",tooltipId:"rulesmanager.tooltip.deleteT",visible:a,onClick:function(){r("delete")}},{glyph:"clear-brush",tooltipId:"rulesmanager.tooltip.cacheT",visible:s,onClick:function(){r("cache")}}]}})),c(["modal"],(function(e){var t=e.modal,n=e.cancelModal,r=e.deleteRules,i=e.cleanCache;switch(t){case"delete":return{modalsProps:{showDialog:!0,title:"rulesmanager.deltitle",buttons:[{text:o.createElement(h,{msgId:"no"}),bsStyle:"primary",onClick:n},{text:o.createElement(h,{msgId:"yes"}),bsStyle:"primary",onClick:function(){n(),r()}}],closeAction:n,msg:"rulesmanager.delmsg"}};case"cache":return{modalsProps:{showDialog:!0,title:"rulesmanager.cachetitle",buttons:[{text:o.createElement(h,{msgId:"no"}),bsStyle:"primary",onClick:n},{text:o.createElement(h,{msgId:"yes"}),bsStyle:"primary",onClick:function(){n(),i()}}],closeAction:n,msg:"rulesmanager.cachemsg"}};default:return{modalsProps:{showDialog:!1,title:"",buttons:[],closeAction:n,msg:""}}}})))((function(e){var t=e.modalsProps,n=e.loading,i=r(e,["modalsProps","loading"]);return o.createElement("div",null,o.createElement(b,i),o.createElement(g,t),o.createElement("div",{className:"toolbar-loader ".concat(n?"ms-circle-loader-md":"")}))}));e.exports=v},"./MapStore2/web/client/plugins/maps/MapSave.jsx":function(e,t,n){"use strict";var r=n("./node_modules/prop-types/index.js"),o=n.n(r),i=n("./node_modules/recompose/es/Recompose.js"),a=n("./node_modules/react-redux/es/index.js"),s=n("./node_modules/reselect/es/index.js"),l=n("./MapStore2/web/client/actions/maps.js"),c=n("./MapStore2/web/client/selectors/map.js"),u=n("./MapStore2/web/client/selectors/layers.js"),p=n("./MapStore2/web/client/selectors/backgroundselector.js"),d=n("./MapStore2/web/client/selectors/mapsave.js"),f=n("./MapStore2/web/client/components/resources/modals/enhancers/handleSaveModal.js"),m=n.n(f),y=n("./MapStore2/web/client/selectors/security.js"),b=n("./MapStore2/web/client/selectors/maptype.js"),g=n("./MapStore2/web/client/selectors/searchconfig.js"),h=n("./MapStore2/web/client/selectors/context.js"),v=n("./MapStore2/web/client/utils/MapUtils.js"),S=n.n(v);function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){j(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var x=Object(s.createSelector)(y.userSelector,c.mapInfoLoadingSelector,c.mapSaveErrorsSelector,u.layersSelector,u.groupsSelector,p.backgroundListSelector,d.mapOptionsToSaveSelector,g.textSearchConfigSelector,g.bookmarkSearchConfigSelector,c.mapSelector,b.mapTypeSelector,h.currentContextSelector,h.contextResourceSelector,(function(e,t,n,r,o,i,a,s,l,c,u,p,d){return{user:e,loading:t,errors:n,layers:r,groups:o,backgrounds:i,additionalOptions:a,textSearchConfig:s,bookmarkSearchConfig:l,map:c,mapType:u,context:p,contextResource:d}})),P=Object(i.compose)(Object(a.connect)(x,{saveMap:l.saveMapResource}),Object(i.withProps)({category:"MAP"}),Object(i.getContext)({router:o.a.object}),Object(i.withHandlers)({onClose:function(e){var t=e.onClose,n=e.onResetMapSaveError;return function(){t(),n()}},onSave:function(e){var t=e.map,n=e.layers,r=e.groups,o=e.backgrounds,i=e.textSearchConfig,a=e.bookmarkSearchConfig,s=e.additionalOptions,l=e.saveMap,c=e.isMapSaveAs,u=e.user,p=e.contextResource;return function(e){var d,f=S.a.saveMapConfiguration(t,n,r,o,i,a,s),m={owner:u&&u.name||null},y=e.metadata,b=(e.data,e.attributes),g=e.id,h=E(e,["metadata","data","attributes","id"]);return d=O(c?{data:f,attributes:O(O({},b),{},{context:(null==p?void 0:p.id)||b.context}),metadata:O({attributes:O({},m)},y)}:{data:f,attributes:b,metadata:y,id:g},h),l(d)}}}),m.a)(n("./MapStore2/web/client/components/resources/modals/Save.jsx"));t.a=P},"./MapStore2/web/client/plugins/measure/index.js":function(e,t,n){var r=n("./MapStore2/web/client/components/mapcontrols/measure/MeasureComponent.jsx"),o=n("./MapStore2/web/client/components/mapcontrols/measure/MeasureDialog.jsx");e.exports={MeasureComponent:r,MeasureDialog:o}},"./MapStore2/web/client/plugins/metadataexplorer/css/style.css":function(e,t,n){var r=n("./node_modules/css-loader/index.js!./node_modules/postcss-loader/src/index.js?!./MapStore2/web/client/plugins/metadataexplorer/css/style.css");"string"==typeof r&&(r=[[e.i,r,""]]);n("./node_modules/style-loader/addStyles.js")(r,{});r.locals&&(e.exports=r.locals)},"./MapStore2/web/client/plugins/rasterstyler/index.js":function(e,t,n){var r=n("./node_modules/react-redux/es/index.js").connect,o=n("./MapStore2/web/client/actions/rasterstyler.js").setRasterStyleParameter,i=r((function(e){return e.rasterstyler.redband||{}}),{onChange:o.bind(null,"redband")})(n("./MapStore2/web/client/components/style/BandSelector.jsx")),a=r((function(e){return e.rasterstyler.blueband||{}}),{onChange:o.bind(null,"blueband")})(n("./MapStore2/web/client/components/style/BandSelector.jsx")),s=r((function(e){return e.rasterstyler.greenband||{}}),{onChange:o.bind(null,"greenband")})(n("./MapStore2/web/client/components/style/BandSelector.jsx")),l=r((function(e){return e.rasterstyler.grayband||{}}),{onChange:o.bind(null,"grayband")})(n("./MapStore2/web/client/components/style/BandSelector.jsx")),c=r((function(e){return e.rasterstyler.pseudoband||{}}),{onChange:o.bind(null,"pseudoband")})(n("./MapStore2/web/client/components/style/BandSelector.jsx")),u=r((function(e){return e.rasterstyler.typepicker||{}}),{onChange:o.bind(null,"typepicker")})(n("./MapStore2/web/client/components/style/RasterStyleTypePicker.jsx")),p=r((function(e){return e.rasterstyler.opacitypicker||{}}),{onChange:o.bind(null,"opacitypicker")})(n("./MapStore2/web/client/components/style/OpacityPicker.jsx")),d=r((function(e){return e.rasterstyler.equalinterval||{}}),{onChange:o.bind(null,"equalinterval")})(n("./MapStore2/web/client/components/style/EqualInterval.jsx")),f=r((function(e){return e.rasterstyler.pseudocolor||{}}),{onChange:o.bind(null,"pseudocolor")})(n("./MapStore2/web/client/components/style/PseudoColorSettings.jsx"));e.exports={RedBandSelector:i,BlueBandSelector:a,GreenBandSelector:s,GrayBandSelector:l,PseudoBandSelector:c,RasterStyleTypePicker:u,EqualInterval:d,PseudoColor:f,OpacityPicker:p}},"./MapStore2/web/client/plugins/rasterstyler/rasterstyler.css":function(e,t,n){var r=n("./node_modules/css-loader/index.js!./node_modules/postcss-loader/src/index.js?!./MapStore2/web/client/plugins/rasterstyler/rasterstyler.css");"string"==typeof r&&(r=[[e.i,r,""]]);n("./node_modules/style-loader/addStyles.js")(r,{});r.locals&&(e.exports=r.locals)},"./MapStore2/web/client/plugins/searchbar/ToggleButton.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=n("./node_modules/prop-types/index.js"),d=n("./node_modules/react/index.js"),f=n("./node_modules/react-redux/es/index.js").connect,m=n("./node_modules/react-bootstrap/es/index.js"),y=m.Button,b=m.Glyphicon,g=n("./MapStore2/web/client/actions/controls.js").toggleControl,h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(c,e);var t,n,r,l=s(c);function c(){return o(this,c),l.apply(this,arguments)}return t=c,(n=[{key:"render",value:function(){var e=this;return d.createElement(y,{onClick:function(){return e.props.onToggle(e.props.pressed)},bsStyle:this.props.pressed?"default":"primary",className:"square-button search-toggle"},d.createElement(b,{glyph:"search"}))}}])&&i(t.prototype,n),r&&i(t,r),c}(d.Component);u(h,"propTypes",{pressed:p.bool,onToggle:p.func}),u(h,"defaultProps",{pressed:!1,onToggle:function(){}}),e.exports=f((function(e){return{pressed:e.controls&&e.controls.search&&e.controls.search.enabled||!1}}),{onToggle:g.bind(null,"search",null)})(h)},"./MapStore2/web/client/plugins/settings/SettingsPanel.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=n("./node_modules/prop-types/index.js"),d=n("./node_modules/react/index.js"),f=n("./node_modules/react-bootstrap/es/index.js").Glyphicon,m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(c,e);var t,n,r,l=s(c);function c(){return o(this,c),l.apply(this,arguments)}return t=c,(n=[{key:"render",value:function(){return d.createElement("div",{style:this.props.style},this.props.children)}}])&&i(t.prototype,n),r&&i(t,r),c}(d.Component);u(m,"propTypes",{isPanel:p.bool,buttonTooltip:p.oneOfType([p.string,p.element]),style:p.object}),u(m,"defaultProps",{isPanel:!0,icon:d.createElement(f,{glyph:"cog"}),style:{width:"300px"}}),e.exports=m},"./MapStore2/web/client/plugins/settings/css/settings.css":function(e,t,n){var r=n("./node_modules/css-loader/index.js!./node_modules/postcss-loader/src/index.js?!./MapStore2/web/client/plugins/settings/css/settings.css");"string"==typeof r&&(r=[[e.i,r,""]]);n("./node_modules/style-loader/addStyles.js")(r,{});r.locals&&(e.exports=r.locals)},"./MapStore2/web/client/plugins/styleeditor/index.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/react/index.js"),o=n.n(r),i=n("./node_modules/react-redux/es/index.js"),a=n("./node_modules/reselect/es/index.js"),s=n("./node_modules/recompose/es/Recompose.js"),l=n("./MapStore2/web/client/actions/styleeditor.js"),c=n("./MapStore2/web/client/actions/additionallayers.js"),u=n("./MapStore2/web/client/actions/layers.js"),p=n("./MapStore2/web/client/actions/layerCapabilities.js"),d=n("./MapStore2/web/client/components/layout/BorderLayout.jsx"),f=n.n(d),m=n("./MapStore2/web/client/components/misc/enhancers/withMask.js"),y=n.n(m),b=n("./MapStore2/web/client/components/misc/enhancers/loadingState.jsx"),g=n.n(b),h=n("./MapStore2/web/client/components/misc/enhancers/emptyState.jsx"),v=n.n(h),S=n("./MapStore2/web/client/components/misc/Loader.jsx"),w=n.n(S),O=n("./MapStore2/web/client/components/I18N/Message.jsx"),j=n.n(O),E=n("./MapStore2/web/client/selectors/styleeditor.js"),x=n("./MapStore2/web/client/utils/StyleEditorUtils.js"),P=n("./node_modules/lodash/isObject.js"),C=n.n(P),T=n("./node_modules/lodash/isArray.js"),M=n.n(T),_=n("./MapStore2/web/client/plugins/styleeditor/inlineWidgets.js"),A=n.n(_),R=n("./MapStore2/web/client/api/SLDService.js"),I=n("./MapStore2/web/client/selectors/map.js"),D=n("./MapStore2/web/client/components/styleeditor/Editor.jsx"),k=n.n(D),L=n("./node_modules/prop-types/index.js"),N=n.n(L),F=n("./node_modules/lodash/debounce.js"),U=n.n(F),G=n("./node_modules/lodash/identity.js"),B=n.n(G),z=n("./MapStore2/web/client/components/misc/toolbar/Toolbar.jsx"),W=n.n(z),V=n("./node_modules/react-bootstrap/es/index.js"),H=n("./node_modules/lodash/omit.js"),q=n.n(H),Y=n("./node_modules/lodash/isNil.js"),Q=n.n(Y),K=n("./node_modules/lodash/isNaN.js"),Z=n.n(K),X=n("./MapStore2/web/client/components/style/ColorSelector.jsx"),J=n("./MapStore2/web/client/components/misc/Slider.jsx"),$=n.n(J),ee=n("./MapStore2/web/client/components/styleeditor/ColorRamp.jsx"),te=n("./MapStore2/web/client/components/style/vector/DashArray.jsx"),ne=n.n(te),re=n("./MapStore2/web/client/components/style/ThemaClassesEditor.jsx"),oe=n.n(re),ie=n("./node_modules/react-select/dist/react-select.es.js"),ae=n("./MapStore2/web/client/components/misc/enhancers/localizedProps.js"),se=n.n(ae);var le=function(e){var t=e.children,n=e.label,r=e.tools,i=e.divider,a=e.invalid,s=e.disabled;if(i)return o.a.createElement("div",{className:"ms-symbolizer-field-divider"});var l=a?" ms-symbolizer-value-invalid":"",c=s?" ms-symbolizer-value-disabled":"";return o.a.createElement("div",{className:"ms-symbolizer-field"},o.a.createElement("div",{className:"ms-symbolizer-label"},o.a.createElement(j.a,{msgId:n})),o.a.createElement("div",{className:"ms-symbolizer-value"+l+c},t,o.a.createElement("div",{className:"ms-symbolizer-tools"},r)))},ce=n("./node_modules/react-dom/index.js"),ue=n("./MapStore2/web/client/utils/ConfigUtils.js"),pe=n("./node_modules/lodash/isFunction.js"),de=n.n(pe);function fe(){return(fe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function me(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(n),!0).forEach((function(t){ge(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ge(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function he(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ve(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ve(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ve(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Se(e){var t=e.containerNode,n=void 0===t?function(){return document.querySelector("."+(Object(ue.getConfigProp)("themePrefix")||"ms2")+" > div")||document.body}:t,i=e.placement,a=e.content,s=e.children,l=e.open,c=e.onOpen,u=void 0===c?function(){}:c,p=de()(n)?n():n,d=Object(r.useRef)({picker:{opacity:0},arrow:{opacity:0},overlay:{}}),f=he(Object(r.useState)(d.current),2),m=f[0],y=f[1],b=Object(r.useRef)(),g=Object(r.useRef)(),h=Object(r.useRef)(),v=Object(r.useCallback)((function(){var e,t,n,r,o,a;if(!l)return d.current;var s={picker:{},overlay:{backgroundColor:"rgba(0, 0, 0, 0.4)"},arrow:{opacity:0}};if("center"===i)return s;var c=null==b||null===(e=b.current)||void 0===e||null===(t=e.getBoundingClientRect)||void 0===t?void 0:t.call(e),u=null==g||null===(n=g.current)||void 0===n||null===(r=n.getBoundingClientRect)||void 0===r?void 0:r.call(n),p=null==h||null===(o=h.current)||void 0===o||null===(a=o.getBoundingClientRect)||void 0===a?void 0:a.call(o);if(c&&u&&p){var f,m,y,v,S=p.width,w=p.height,O=u.top,j=u.left,E=u.width,x=u.height,P=c.top,C=c.left,T=c.width,M=c.height,_=[C+T/2,P+M/2],A=_[0]-j>S/2+10&&j+E-_[0]>S/2+10,R=_[1]-O>w/2+10&&O+x-_[1]>w/2+10,I={top:{filter:function(){return A&&P-O>w+10},styles:function(){return{picker:{position:"absolute",top:P-w-10-O,left:C+T/2-S/2-j},overlay:{},arrow:{top:P+2,left:C+T/2,transform:"translate(-50%, -50%) rotateZ(270deg) translateX(50%)"}}}},right:{filter:function(){return R&&j+E-(C+T)>S+10},styles:function(){return{picker:{position:"absolute",top:P-w/2-O,left:C+T+10-j},overlay:{},arrow:{top:P+M/2,left:C+T-2,transform:"translate(-50%, -50%) rotateZ(0deg) translateX(50%)"}}}},bottom:{filter:function(){return A&&O+x-(P+M)>w+10},styles:function(){return{picker:{position:"absolute",top:P+M+10-O,left:C+T/2-S/2-j},overlay:{},arrow:{top:P+M-2,left:C+T/2,transform:"translate(-50%, -50%) rotateZ(90deg) translateX(50%)"}}}},left:{filter:function(){return R&&C-j>S+10},styles:function(){return{picker:{position:"absolute",top:P-w/2-O,left:C-S-10-j},overlay:{},arrow:{top:P+M/2,left:C+2,transform:"translate(-50%, -50%) rotateZ(180deg) translateX(50%)"}}}}};if(null==I||null===(f=I[i])||void 0===f||null===(m=f.filter)||void 0===m?void 0:m.call(f))return null==I||null===(y=I[i])||void 0===y||null===(v=y.styles)||void 0===v?void 0:v.call(y);if("top"!==i&&I.top.filter())return I.top.styles();if("right"!==i&&I.right.filter())return I.right.styles();if("bottom"!==i&&I.bottom.filter())return I.bottom.styles();if("left"!==i&&I.left.filter())return I.left.styles()}return s}),[i,l]);Object(r.useEffect)((function(){y(v());var e=function(){return y(v())};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[v]);var S=Object(r.useRef)();return S.current={open:l},Object(r.useEffect)((function(){function e(e){var t=h.current,n=t&&e.target&&t.contains(e.target);if(S.current.open&&!n){var r,o,i=e.clientX,a=e.clientY,s=(null==h||null===(r=h.current)||void 0===r||null===(o=r.getBoundingClientRect)||void 0===o?void 0:o.call(r))||{},l=s.left,c=s.top,p=s.width,d=s.height;void 0!==i&&void 0!==a&&!(i>=l&&i<=l+p&&a>=c&&a<=c+d)&&u(!1)}}return window.addEventListener("click",e,!0),window.addEventListener("wheel",e,!0),window.addEventListener("scroll",e,!0),function(){window.removeEventListener("click",e,!0),window.removeEventListener("wheel",e,!0),window.removeEventListener("scroll",e,!0)}}),[]),o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"ms-popover",ref:b},Object(r.cloneElement)(s,{onClick:function(e){e.stopPropagation(),u(!l)}})),p&&l?Object(ce.createPortal)(o.a.createElement("div",{className:"ms-popover-overlay",ref:g,style:be({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",top:0,left:0,pointerEvents:"none"},null==m?void 0:m.overlay)},o.a.createElement("div",{style:{position:"absolute",width:"100%",height:"100%",top:0,left:0}}),o.a.createElement("div",{ref:h,style:be({pointerEvents:"auto"},null==m?void 0:m.picker)},a),o.a.createElement("div",{className:"ms-popover-arrow",style:be({position:"absolute",borderTop:"".concat(9,"px solid transparent"),borderBottom:"".concat(9,"px solid transparent"),borderRight:"".concat(9,"px solid #ffffff"),filter:"drop-shadow(-4px 2px 4px rgba(0, 0, 0, 0.2))"},null==m?void 0:m.arrow)})),p):null)}var we=function(e){var t=e.open,n=e.onOpen,i=void 0===n?function(){}:n,a=me(e,["open","onOpen"]),s=he(Object(r.useState)(t),2),l=s[0],c=s[1];return o.a.createElement(Se,fe({},a,{open:l,onOpen:function(e){c(e),i(e)}}))},Oe=n("./MapStore2/web/client/components/styleeditor/SVGPreview.jsx"),je=n.n(Oe),Ee=[{value:"Circle",label:"styleeditor.circle",preview:{type:"point",paths:[{d:"M 160,100 A 60,60 0 0 1 100,160 60,60 0 0 1 40,100 60,60 0 0 1 100,40 60,60 0 0 1 160,100 Z",stroke:"#f2f2f2",fill:"#333333",strokeWidth:4}]}},{value:"Square",label:"styleeditor.square",preview:{type:"point",paths:[{d:"M40 40 L160 40 L160 160 L40 160Z",stroke:"#f2f2f2",fill:"#333333",strokeWidth:4}]}},{value:"Triangle",label:"styleeditor.triangle",preview:{type:"point",paths:[{d:"M 160,151.96151 H 40 L 99.999999,48.038488 Z",stroke:"#f2f2f2",fill:"#333333",strokeWidth:4}]}},{value:"Star",label:"styleeditor.star",preview:{type:"point",paths:[{d:"M 165.07677,84.40286 131.87672,116.49613 139.49277,162.03972 98.710865,140.38195 57.749838,161.699 65.745291,116.22048 32.813927,83.851564 78.537289,77.40206 99.145626,36.079922 119.40876,77.572419 Z",stroke:"#f2f2f2",fill:"#333333",strokeWidth:4}]}},{value:"Cross",label:"styleeditor.cross",preview:{type:"point",paths:[{d:"M 84.99987,39.999998 V 84.999868 H 39.999999 V 115.00013 H 84.99987 V 160 H 115.00013 V 115.00013 H 160 V 84.999868 H 115.00013 V 39.999998 Z",stroke:"#f2f2f2",fill:"#333333",strokeWidth:4}]}},{value:"X",label:"styleeditor.x",preview:{type:"point",paths:[{d:"M 131.81971,46.966899 100,78.786612 68.180288,46.966898 46.966899,68.180287 78.786613,100 46.9669,131.81971 68.180287,153.0331 100,121.21339 131.81971,153.0331 153.0331,131.81971 121.21339,99.999999 153.0331,68.180286 Z",stroke:"#f2f2f2",fill:"#333333",strokeWidth:4}]}},{value:"shape://vertline",label:"styleeditor.verticalLine",preview:{type:"point",paths:[{d:"M 100,40 V 160 Z",stroke:"#333333",strokeWidth:4,fill:"none"}]}},{value:"shape://horline",label:"styleeditor.horizontalLine",preview:{type:"point",paths:[{d:"M 160,100 40.000002,100 Z",stroke:"#333333",strokeWidth:4,fill:"none"}]}},{value:"shape://slash",label:"styleeditor.slash",preview:{type:"point",paths:[{d:"M 142.42641,57.573591 57.573595,142.4264 Z",stroke:"#333333",strokeWidth:4,fill:"none"}]}},{value:"shape://backslash",label:"styleeditor.backslash",preview:{type:"point",paths:[{d:"M 142.42641,142.42641 57.573595,57.573594 Z",stroke:"#333333",strokeWidth:4,fill:"none"}]}},{value:"shape://dot",label:"styleeditor.dot",preview:{type:"point",paths:[{d:"M 95,100 105,100 Z",stroke:"#333333",strokeWidth:10,fill:"none"}]}},{value:"shape://plus",label:"styleeditor.plus",preview:{type:"point",paths:[{d:"M 100,40 V 160 Z",stroke:"#333333",strokeWidth:4,fill:"none"},{d:"M 160,100 40.000002,100 Z",stroke:"#333333",strokeWidth:4,fill:"none"}]}},{value:"shape://times",label:"styleeditor.times",preview:{type:"point",paths:[{d:"M 142.42641,57.573591 57.573595,142.4264 Z",stroke:"#333333",strokeWidth:4,fill:"none"},{d:"M 142.42641,142.42641 57.573595,57.573594 Z",stroke:"#333333",strokeWidth:4,fill:"none"}]}},{value:"shape://oarrow",label:"styleeditor.openArrow",preview:{type:"point",paths:[{d:"M 40.027335,53.266123 159.77305,100 40.027335,146.73388",stroke:"#333333",strokeWidth:4,fill:"none"}]}},{value:"shape://carrow",label:"styleeditor.closedArrow",preview:{type:"point",paths:[{d:"M 40.027335,53.266123 159.77305,100 40.027335,146.73388Z",stroke:"#333333",strokeWidth:4,fill:"none"}]}}],xe=n("./MapStore2/web/client/components/misc/enhancers/tooltip.jsx"),Pe=n.n(xe),Ce=Pe()(V.Button);var Te=function(e){var t=e.value,n=e.config,r=void 0===n?{}:n,i=e.onChange,a=void 0===i?function(){}:i,s=r.options,l=void 0===s?Ee:s,c=l.find((function(e){return e.value===t}));return o.a.createElement(we,{content:o.a.createElement("div",{className:"ms-mark-list"},o.a.createElement("ul",null,l.map((function(e){return o.a.createElement("li",{key:e.value},o.a.createElement(Ce,{className:"ms-mark-preview",active:e.value===t,onClick:function(){return a(e.value)}},o.a.createElement(je.a,e.preview)))}))))},o.a.createElement(Ce,{className:"ms-mark-preview"},c&&o.a.createElement(je.a,c.preview)))};var Me=function(e){var t=e.label,n=void 0===t?"styleeditor.band":t,r=e.value,i=e.bands,a=e.onChange,s=e.enhancementType;return o.a.createElement(o.a.Fragment,null,o.a.createElement(le,{label:n},o.a.createElement(ie.default,{clearable:!1,options:i,value:r,onChange:function(e){return a("band",e.value)}})),o.a.createElement(le,{label:"styleeditor.contrastEnhancement"},o.a.createElement(ie.default,{clearable:!1,options:[{label:o.a.createElement(j.a,{msgId:"styleeditor.none"}),value:"none"},{label:o.a.createElement(j.a,{msgId:"styleeditor.normalize"}),value:"normalize"},{label:o.a.createElement(j.a,{msgId:"styleeditor.histogram"}),value:"histogram"}],value:s||"none",onChange:function(e){var t="none"===e.value?void 0:e.value;a("enhancementType",t)}})))};function _e(){return(_e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ae(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||Ie(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Re(e){return function(e){if(Array.isArray(e))return De(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Ie(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ie(e,t){if(e){if("string"==typeof e)return De(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?De(e,t):void 0}}function De(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ke(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function Le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(n),!0).forEach((function(t){Fe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Le(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Fe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ue=se()("placeholder")(V.FormControl),Ge=se()(["placeholder","noResultsText"])(ie.default),Be=se()(["placeholder","noResultsText"])(ie.default.Creatable),ze={color:function(e){var t=e.label,n=e.config,i=void 0===n?{}:n,a=e.value,s=e.onChange,l=void 0===s?function(){}:s,c=e.disableAlpha,u=Object(r.useRef)({value:a});if(u.current={value:a},"pattern"===(C()(a)&&a.kind?"pattern":"solid")){var p=((null==i?void 0:i.getGroupParams(a.kind))||{}).params,d=void 0===p?{}:p,f=(null==i?void 0:i.getGroupConfig(a.kind))||{},m=a;return o.a.createElement(o.a.Fragment,null,o.a.createElement(We,{properties:m,params:f.omittedKeys?q()(d,f.omittedKeys):d,config:{disableAlpha:f.disableAlpha},onChange:function(e){return l(Ne(Ne({},u.current.value),e))}}),o.a.createElement(le,{divider:!0}))}return o.a.createElement(le,{label:t},o.a.createElement(X.default,{color:a,line:i.stroke,disableAlpha:i.disableAlpha||c,onChangeColor:function(e){return e&&l(e)}}))},slider:function(e){var t=e.label,n=e.value,r=e.disabled,i=e.config,a=void 0===i?{}:i,s=e.onChange,l=void 0===s?function(){}:s;return o.a.createElement(le,{label:t,disabled:r},o.a.createElement("div",{className:"mapstore-slider with-tooltip",onClick:function(e){e.stopPropagation()}},o.a.createElement($.a,{start:[n],disabled:r,tooltips:[!0],format:a.format,range:a.range||{min:0,max:10},onChange:function(e){return l(e)}})))},input:function(e){var t=e.label,n=e.value,r=e.config,i=void 0===r?{}:r,a=e.onChange,s=void 0===a?function(){}:a;return o.a.createElement(le,{label:t},o.a.createElement(V.FormGroup,null,o.a.createElement(Ue,{type:i.type||"text",value:n,placeholder:"styleeditor.placeholderInput",onChange:function(e){return s(e.target.value)}})))},toolbar:function(e){var t=e.label,n=e.value,r=e.onChange,i=void 0===r?function(){}:r,a=e.config,s=void 0===a?{}:a,l=e.disabled;return o.a.createElement(le,{label:t,disabled:l},o.a.createElement(W.a,{btnDefaultProps:{className:"no-border",bsSize:"xs"},buttons:(s.options||[]).map((function(e){var t=e.glyph,r=e.label,a=e.labelId,s=e.tooltipId,c=e.value;return{glyph:t,tooltipId:s,disabled:l,text:a?o.a.createElement(j.a,{msgId:a}):r,active:c===n,onClick:function(){return i(n===c?void 0:c)}}}))}))},mark:function(e){var t=e.label,n=ke(e,["label"]);return o.a.createElement(le,{label:t},o.a.createElement(Te,n))},image:function(e){var t=e.label,n=e.value,r=e.config.isValid,i=e.onChange,a=!r||r({value:n});return o.a.createElement(le,{label:t,invalid:!a},o.a.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"}},o.a.createElement(V.FormGroup,{style:{flex:1}},o.a.createElement(Ue,{placeholder:"styleeditor.placeholderEnterImageUrl",value:n,onChange:function(e){return i(e.target.value)}})),o.a.createElement("img",{src:n,style:{width:28,height:28,objectFit:"contain"}})))},select:function(e){var t=e.label,n=e.value,i=e.config,a=i.getOptions,s=void 0===a?function(){return[]}:a,l=i.selectProps,c=void 0===l?{}:l,u=i.isValid,p=e.onChange,d=ke(e,["label","value","config","onChange"]),f=c.creatable,m=c.clearable,y=void 0!==m&&m,b=c.multi;function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=e.map((function(e){return e.value})),r=(null==t?void 0:t.value)&&-1===n.indexOf(t.value);return r?[t].concat(Re(e)):e}function h(e){return n?[{value:n,label:n}].reduce(g,e):e}var v=s(d),S=Ae(Object(r.useState)(h(v)),2),w=S[0],O=S[1];Object(r.useEffect)((function(){O(h(v))}),[null==v?void 0:v.length]);var E=f?Be:Ge,x=!u||u({value:n});return o.a.createElement(le,{label:t,invalid:!x},o.a.createElement(E,_e({clearable:y,placeholder:"styleeditor.selectPlaceholder",noResultsText:"styleeditor.noResultsSelectInput"},c,{options:w.map((function(e){return Ne(Ne({},e),{},{label:e.labelId?o.a.createElement(j.a,{msgId:e.labelId}):e.label})})),value:n,onChange:function(e){return b?p(e.length>0?e.map((function(e){return e.value})):void 0):(O(g(w,e)),p(e.value))}})))},colorRamp:function(e){var t=e.label,n=e.value,r=e.config,i=r.samples,a=void 0===i?5:i,s=r.getOptions,l=void 0===s?function(){return[]}:s,c=r.rampFunction,u=void 0===c?function(e){return e.colors}:c,p=e.onChange,d=l(ke(e,["label","value","config","onChange"]));return o.a.createElement(le,{label:t},o.a.createElement(ee.default,{items:d,rampFunction:u,samples:a,value:{name:n},onChange:function(e){return p(e.name)}}))},colorMap:function(e){var t=e.value,n=e.onChange;return o.a.createElement(o.a.Fragment,null,o.a.createElement(oe.a,{classification:t,onUpdateClasses:function(e,t){return n({classification:e,type:t})}}))},channel:function(e){var t,n,r,i=e.value,a=e.onChange,s=e.bands,l=i.channelSelection,c=l?l.grayChannel?"gray":"rgb":"auto",u=(s||[]).map((function(e){return{label:e,value:e}}));if("rgb"===c)return Object.keys(l).map((function(e){var t,n,r=null===(t=l[e])||void 0===t?void 0:t.sourceChannelName,s=null===(n=l[e])||void 0===n?void 0:n.contrastEnhancement;return o.a.createElement(o.a.Fragment,null,o.a.createElement(Me,{key:e,value:r,bands:u,label:"styleeditor."+e,enhancementType:(null==s?void 0:s.enhancementType)||"none",onChange:function(t,n){return"band"===t?a({contrastEnhancement:{},channelSelection:Ne(Ne({},i.channelSelection),{},Fe({},e,Ne(Ne({},i.channelSelection[e]),{},{sourceChannelName:n})))}):"enhancementType"===t?a({contrastEnhancement:{},channelSelection:Ne(Ne({},i.channelSelection),{},Fe({},e,Ne(Ne({},i.channelSelection[e]),{},{contrastEnhancement:Ne(Ne({},l[e].contrastEnhancement),{},{enhancementType:n})})))}):null}}),o.a.createElement(le,{key:e+"-divider",divider:!0}))}));var p=void 0===(null==l||null===(t=l.grayChannel)||void 0===t?void 0:t.sourceChannelName)?"auto":null==l||null===(n=l.grayChannel)||void 0===n?void 0:n.sourceChannelName,d="auto"===c?i.contrastEnhancement:null==l||null===(r=l.grayChannel)||void 0===r?void 0:r.contrastEnhancement;return o.a.createElement(Me,{label:"styleeditor.grayChannel",value:p,bands:[{label:o.a.createElement(j.a,{msgId:"styleeditor.channelAuto"}),value:"auto"}].concat(Re(u)),enhancementType:(null==d?void 0:d.enhancementType)||"none",onChange:function(e,t){return"band"===e?a("auto"===t?Ne(Ne({},i),{},{channelSelection:void 0}):{contrastEnhancement:{},channelSelection:{grayChannel:Ne(Ne({contrastEnhancement:{}},null==l?void 0:l.grayChannel),{},{sourceChannelName:t})}}):"enhancementType"===e?a("auto"===c?{channelSelection:void 0,contrastEnhancement:Ne(Ne({},i.contrastEnhancement),{},{enhancementType:t})}:{contrastEnhancement:{},channelSelection:Object.keys(l).reduce((function(e,n){return Ne(Ne({},e),{},Fe({},n,Ne(Ne({},l[n]),{},{contrastEnhancement:Ne(Ne({},l[n].contrastEnhancement),{},{enhancementType:t})})))}),{})}):null}})},dash:function(e){var t=e.label,n=e.value,r=e.onChange,i=e.config.options;return o.a.createElement(le,{label:t},o.a.createElement(ne.a,{dashArray:n,onChange:r,options:i,defaultStrokeWidth:2,isValidNewOption:function(e){return!!e.label&&!e.label.split(" ").find((function(e){return Z()(parseFloat(e))}))},creatable:!0}))}};function We(e){var t=e.properties,n=e.params,i=e.config,a=e.onChange,s=Object(r.useRef)({properties:t});return s.current={properties:t},o.a.createElement(o.a.Fragment,null,Object.keys(n).map((function(e){var r=n[e]||{},l=r.type,c=r.setValue,u=r.getValue,p=r.isDisabled,d=r.config,f=r.label,m=r.key||e,y=ze[l],b=c&&c(t[m],s.current.properties);return y&&o.a.createElement(y,_e({},i,{key:m,label:f||m,config:d,disabled:p&&p(t[m],s.current.properties),value:Q()(b)?t[m]:b,onChange:function(e){return a(u&&u(e,s.current.properties)||e)}}))})))}var Ve=We,He=n("./node_modules/uuid/v1.js"),qe=n.n(He),Ye=n("./MapStore2/web/client/components/data/query/GroupField.jsx"),Qe=n.n(Ye);function Ke(e){return function(e){if(Array.isArray(e))return Ze(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Ze(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ze(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Je(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xe(Object(n),!0).forEach((function(t){$e(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var et=Pe()(V.Button),tt=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Je(Je({},t),{},($e(e={},n.fieldName,n.fieldValue),$e(e,"type",n.fieldType),$e(e,"fieldOptions",Je(Je({},t.fieldOptions),{},{currentPage:void 0===n.fieldOptions.currentPage?1:n.fieldOptions.currentPage})),e));return"attribute"===n.fieldName?Je(Je({},r),{},{value:"string"===n.fieldType?"":null,operator:""}):"operator"===n.fieldName?Je(Je({},r),{},{value:null}):r},nt=function(e){var t=e.filterObj,n=void 0===t?{groupFields:[{id:1,logic:"OR",index:0}]}:t,r=e.attributes,i=void 0===r?[]:r,a=e.groupLevels,s=void 0===a?0:a,l=e.onChange,c=void 0===l?function(){}:l,u=n.groupFields,p=n.filterFields;return o.a.createElement("div",{className:"ms-style-rule-filter"},o.a.createElement(Qe.a,{attributes:i,filterFields:p,groupFields:u,autocompleteEnabled:!1,groupLevels:s,withContainer:!1,listOperators:["="],stringOperators:["=","<>","like","isNull"],booleanOperators:["="],defaultOperators:["=",">","<",">=","<=","<>"],logicComboOptions:[{logic:"OR",name:"queryform.attributefilter.groupField.any"},{logic:"AND",name:"queryform.attributefilter.groupField.all"}],actions:{onAddGroupField:function(e,t){var n={id:(new Date).getTime(),logic:"OR",groupId:e,index:t+1};c({filterFields:p,groupFields:u?[].concat(Ke(u),[n]):[n]})},onAddFilterField:function(e){var t={rowId:(new Date).getTime(),groupId:e,attribute:null,operator:"",value:null,type:null,fieldOptions:{valuesCount:0,currentPage:1},exception:null};c({filterFields:p?[].concat(Ke(p),[t]):[t],groupFields:u})},onRemoveFilterField:function(e){c({filterFields:p.filter((function(t){return t.rowId!==e})),groupFields:u})},onUpdateFilterField:function(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};c({filterFields:p.map((function(i){return i.rowId===e?tt(i,{rowId:e,fieldName:t,fieldValue:n,fieldType:r,fieldOptions:o}):i})),groupFields:u})},onUpdateExceptionField:function(e,t){c({filterFields:p.map((function(n){return n.rowId===e?Je(Je({},n),{},{exception:t}):n})),groupFields:u})},onUpdateLogicCombo:function(e,t){c({filterFields:p,groupFields:u.map((function(n){return n.id===e?Je(Je({},n),{},{logic:t}):n}))})},onRemoveGroupField:function(e){c({filterFields:p.filter((function(t){return t.groupId!==e})),groupFields:u.filter((function(t){return t.id!==e}))})},onChangeCascadingValue:function(){}}}))};function rt(e){var t=e.value,n=e.hide,r=e.attributes,i=e.onChange,a=e.placement,s=void 0===a?"right":a;return n||!r||0===r.length?null:o.a.createElement(we,{placement:s,content:o.a.createElement(nt,{filterObj:t,attributes:r,onChange:function(e){return i({filter:e})}})},o.a.createElement(et,{className:"square-button-md no-border",active:!!t,tooltipId:"styleeditor.openFilterBuilder"},o.a.createElement(V.Glyphicon,{glyph:"filter"})))}function ot(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function it(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ot(Object(n),!0).forEach((function(t){at(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ot(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function at(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function st(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||ct(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lt(e){return function(e){if(Array.isArray(e))return ut(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||ct(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ct(e,t){if(e){if("string"==typeof e)return ut(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ut(e,t):void 0}}function ut(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var pt=se()(["placeholder","noResultsText"])(ie.default.Creatable),dt=Pe()(V.Button);function ft(e){var t=e.label,n=e.currentZoom;return o.a.createElement("span",null,t,n&&o.a.createElement(o.a.Fragment,null,"",o.a.createElement(V.Glyphicon,{glyph:"arrow-left"})))}function mt(e){var t=e.label,n=e.value,r=e.options,i=e.isValidNewOption,a=e.onChange;return o.a.createElement(le,{label:t},o.a.createElement(pt,{placeholder:"styleeditor.selectScale",noResultsText:"styleeditor.noResultScales",value:n,options:r,optionRenderer:ft,valueRenderer:ft,isValidNewOption:function(e){if(e.label){var t=parseFloat(e.label);return!Z()(t)&&i(t)}return!1},onChange:function(e){var t=(null==e?void 0:e.value)&&parseFloat(e.value);a(Z()(t)?void 0:t)}}))}function yt(e){var t=e.value,n=e.zoom,i=e.scales,a=void 0===i?[]:i,s=e.onChange;function l(e,t){var n=e.map((function(e){return e.value}));return t&&-1===n.indexOf(t)?[{value:t}].concat(lt(e)).sort((function(e,t){return e.value>t.value?-1:1})):e}var c=st(Object(r.useState)(function(e){var n=e.map((function(e,t){return{value:e,zoom:t}})),r=[t.min,t.max].filter((function(e){return void 0!==e}));return 0===r.length?n:r.reduce(l,n)}(a)),2),u=c[0],p=c[1];return o.a.createElement("div",{className:"ms-style-rule-scale"},o.a.createElement(mt,{label:"styleeditor.maxScaleDenominator",value:t.max,options:u.map((function(e){return{value:e.value,label:"1 : "+e.value,currentZoom:void 0!==n&&n===e.zoom,disabled:t.min&&e.value<=t.min}})),isValidNewOption:function(e){return e>=t.min},onChange:function(e){s(it(it({},t),{},{max:e})),p(l(u,e))}}),o.a.createElement(mt,{label:"styleeditor.minScaleDenominator",value:t.min,options:u.map((function(e){return{value:e.value,label:"1 : "+e.value,currentZoom:void 0!==n&&n===e.zoom,disabled:t.max&&e.value>=t.max}})),isValidNewOption:function(e){return e<=t.max},onChange:function(e){s(it(it({},t),{},{min:e})),p(l(u,e))}}))}function bt(e){var t=e.value,n=void 0===t?{}:t,r=e.scales,i=void 0===r?[]:r,a=e.zoom,s=e.hide,l=e.onChange,c=e.placement,u=void 0===c?"right":c;return s?null:o.a.createElement(we,{placement:u,content:o.a.createElement(yt,{value:n,zoom:a,scales:i,onChange:function(e){return l({scaleDenominator:e})}})},o.a.createElement(dt,{className:"square-button-md no-border",tooltipId:"styleeditor.openScaleDenominator",active:void 0!==n.min||void 0!==n.max},o.a.createElement(V.Glyphicon,{glyph:"1-ruler"})))}function gt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ht(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gt(Object(n),!0).forEach((function(t){vt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function vt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var St=function(e){var t=e.ruleBlock,n=e.symbolizerBlock;return"Raster"!==e.kind?[{value:"Simple",labelId:"styleeditor.simpleStyle",onSelect:function(e){return{ruleId:e.ruleId,name:"",symbolizers:[ht(ht({},e.deaultProperties),{},{symbolizerId:qe()()})]}}},{value:"Classification",labelId:"styleeditor.classificationStyle",onSelect:function(e){var n=e.ruleId,r=e.symbolizerKind;return ht(ht(ht({},e.deaultProperties),t.Classification.deaultProperties),{},{ruleId:n,symbolizerKind:r})}},{value:"Mark",labelId:"styleeditor.patternMarkStyle",isVisible:function(e){return!!e.graphicKey},onSelect:function(e){var t=e.ruleId,r=e.deaultProperties,o=e.graphicKey;return{ruleId:t,name:"",symbolizers:[ht(ht({},r),{},vt({symbolizerId:qe()(),fill:void 0},o,ht({},n.Mark.deaultProperties)))]}}},{value:"Icon",labelId:"styleeditor.patternIconStyle",isVisible:function(e){return!!e.graphicKey},onSelect:function(e){var t=e.ruleId,r=e.deaultProperties,o=e.graphicKey;return{ruleId:t,name:"",symbolizers:[ht(ht({},r),{},vt({symbolizerId:qe()(),fill:void 0},o,ht({},n.Icon.deaultProperties)))]}}}]:[{value:"Gray",labelId:"styleeditor.singleBand",onSelect:function(e){return{ruleId:e.ruleId,name:"",symbolizers:[ht(ht({},n.Raster.deaultProperties),{},{symbolizerId:qe()()})]}}},{value:"RGB",labelId:"styleeditor.rgbaBands",onSelect:function(e){return{ruleId:e.ruleId,name:"",symbolizers:[ht(ht({},n.Raster.deaultProperties),{},{channelSelection:{redChannel:{sourceChannelName:void 0,contrastEnhancement:{}},greenChannel:{sourceChannelName:void 0,contrastEnhancement:{}},blueChannel:{sourceChannelName:void 0,contrastEnhancement:{}}},symbolizerId:qe()()})]}}},{value:"PseudoColor",labelId:"styleeditor.pseudoColor",onSelect:function(e){var n=e.ruleId;return ht(ht({},t.Raster.deaultProperties),{},{ruleId:n})}}]},wt=function(e){var t=e.ruleKind,n=e.graphic,r=e.symbolizerKind,o=e.channelSelection;return"Raster"===t?"PseudoColor":"Raster"===r?(null==o?void 0:o.redChannel)?"RGB":"Gray":void 0!==t?t:(null==n?void 0:n.kind)?null==n?void 0:n.kind:"Simple"};function Ot(e){var t,n,r=e.ruleKind,i=e.symbolizerKind,a=e.ruleId,s=e.graphic,l=e.channelSelection,c=e.hide,u=e.ruleBlock,p=e.symbolizerBlock,d=e.getSelected,f=void 0===d?wt:d,m=e.getOptions,y=void 0===m?St:m,b=e.onSelect,g=y({ruleBlock:u,symbolizerBlock:p,kind:i}),h=i?p[i]:{},v=h.deaultProperties,S=h.params,w=void 0===S?{}:S,O=null==w||null===(t=w.color)||void 0===t||null===(n=t.config)||void 0===n?void 0:n.graphicKey,E=f({ruleKind:r,symbolizerKind:i,graphic:s,channelSelection:l});return c?null:o.a.createElement(V.DropdownButton,{className:"square-button-md no-border",noCaret:!0,pullRight:!0,title:o.a.createElement(V.Glyphicon,{glyph:"option-vertical"})},g.map((function(e){return!e.isVisible||e.isVisible({graphicKey:O})?o.a.createElement(V.MenuItem,{key:e.value,active:E===e.value,onClick:function(){return t=e.value,n=e.onSelect({ruleId:a,ruleKind:r,symbolizerKind:i,deaultProperties:v,graphicKey:O}),t===E?null:b(n);var t,n}},o.a.createElement(j.a,{msgId:e.labelId})):null})))}var jt=function(e){var t=e.className,n=e.glyph,r=e.tools,i=e.children,a=t?" "+t:"";return o.a.createElement("li",{className:"ms-symbolizer".concat(a)},o.a.createElement("div",{className:"ms-symbolizer-info"},n&&o.a.createElement(V.Glyphicon,{glyph:n}),o.a.createElement("div",{className:"ms-symbolizer-tools"},r)),i)};function Et(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Et(Object(n),!0).forEach((function(t){Pt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Et(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Pt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ct(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var Tt=function(e){var t=e.ruleId,n=e.glyph,i=e.params,a=e.kind,s=e.symbolizerKind,l=e.classificationType,c=void 0===l?"classificationVector":l,u=e.attributes,p=void 0===u?[]:u,d=e.onUpdate,f=e.onReplace,m=e.methods,y=e.getColors,b=void 0===y?function(){}:y,g=e.ruleBlock,h=void 0===g?{}:g,v=e.symbolizerBlock,S=void 0===v?{}:v,w=e.bands,O=Ct(e,["ruleId","glyph","params","kind","symbolizerKind","classificationType","attributes","onUpdate","onReplace","methods","getColors","ruleBlock","symbolizerBlock","bands"]),j=O.ramp,E=O.method,x=O.classification,P=O.attribute,C=O.intervals,T=O.reverse,M=O.continuous,_=Object(r.useRef)();_.current={ruleId:t,intervals:C,method:E,attribute:P,reverse:T,ramp:j,continuous:M,classification:x};var A=i.reduce((function(e,t){return de()(t)?xt(xt({},e),t(s)):xt(xt({},e),t)}),{}),R=(S[s]||{}).glyph;return o.a.createElement(jt,{key:"Classification",glyph:R||n,tools:o.a.createElement(Ot,{ruleKind:a,symbolizerKind:s,ruleId:t,onSelect:f,ruleBlock:h,symbolizerBlock:S})},o.a.createElement(Ve,{properties:O,config:{attributes:p,methods:m,getColors:function(){var e="custom"===j&&x.length>0&&{name:"custom",colors:x.map((function(e){return e.color}))},t=b(void 0,void 0,5,e);return t?t.map((function(e){var t=e.name,n=Ct(e,["name"]);return xt({label:t?"global.colors.".concat(t):void 0,name:t},n)})):[]},bands:w,method:E},params:A,onChange:function(e){return d(xt(xt({},_.current),{},{type:c,values:e}))}}))},Mt=n("./node_modules/lodash/isEqual.js"),_t=n.n(Mt),At=n("./node_modules/tinycolor2/tinycolor.js"),Rt=n.n(At);function It(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Dt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?It(Object(n),!0).forEach((function(t){Lt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):It(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function kt(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function Lt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Nt={color:function(e){var t=e.key,n=void 0===t?"color":t,r=e.opacityKey,o=void 0===r?"opacity":r,i=e.graphicKey,a=e.label,s=void 0===a?"Fill":a,l=e.stroke,c=e.pattern,u=e.disableAlpha,p=e.getGroupParams,d=e.getGroupConfig;return{type:"color",label:s,config:{stroke:l,pattern:c,disableAlpha:u,getGroupParams:p,getGroupConfig:d,graphicKey:i},setValue:function(e,t){var n;if(c&&(null===(n=t[i])||void 0===n?void 0:n.kind))return t[i];var r=Q()(t[o])?1:t[o];return Rt()(e).setAlpha(r).toRgb()},getValue:function(e){var t,r;if(c&&C()(e)&&e.kind)return Lt(r={},i,e),Lt(r,n,void 0),Lt(r,o,void 0),r;var a=e||{},s=a.a,l=kt(a,["a"]);return Dt((Lt(t={},n,Rt()(Dt(Dt({},l),{},{a:1})).toHexString()),Lt(t,o,s),t),c&&Lt({},i,void 0))}}},width:function(e){var t=e.key,n=void 0===t?"width":t,r=e.label,o=void 0===r?"Width":r,i=e.dasharrayKey,a=void 0===i?"dasharray":i;return{type:"slider",label:o,config:{range:{min:0,max:20},format:{from:function(e){return Math.round(e)},to:function(e){return Math.round(e)+" px"}}},setValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return parseFloat(e)},getValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,r=e[0]&&e[0].split(" px")[0],o=parseFloat(r),i=t[a],s=t[n];return Dt(Lt({},n,o),i&&Lt({},a,o?i.map((function(e){return Math.round(e/s*o)})):void 0))}}},dasharray:function(e){var t=e.key,n=void 0===t?"dasharray":t,r=e.label;return{type:"dash",label:void 0===r?"Dash array":r,config:{options:[{value:"0"},{value:"1 4"},{value:"1 12"},{value:"8 8"},{value:"8 16"},{value:"8 8 1 8"},{value:"8 8 1 4 1 8"}]},setValue:function(e,t){var n=void 0===t.width?1:t.width;return void 0!==e?e.map((function(e){return Math.round(e/n)})):[0]},getValue:function(e,t){if(_t()(e,["0"]))return Lt({},n,void 0);var r=void 0===t.width?1:t.width,o=!(e||[]).find((function(e){return Z()(parseFloat(e))}));return Lt({},n,void 0!==e&&o?e.map((function(e){return parseFloat(e)*r})):void 0)}}},cap:function(e){var t=e.key,n=void 0===t?"cap":t,r=e.label;return{type:"toolbar",label:void 0===r?"Line cap":r,config:{options:[{labelId:"styleeditor.lineCapButt",value:"butt"},{labelId:"styleeditor.lineCapRound",value:"round"},{labelId:"styleeditor.lineCapSquare",value:"square"}]},getValue:function(e){return Lt({},n,e)}}},join:function(e){var t=e.key,n=void 0===t?"join":t,r=e.label;return{type:"toolbar",label:void 0===r?"Line join":r,config:{options:[{labelId:"styleeditor.lineJoinBevel",value:"bevel"},{labelId:"styleeditor.lineJoinRound",value:"round"},{labelId:"styleeditor.lineJoinMiter",value:"miter"}]},getValue:function(e){return Lt({},n,e)}}},size:function(e){var t=e.key,n=void 0===t?"radius":t,r=e.label;return{type:"slider",label:void 0===r?"Radius":r,config:{range:{min:0,max:100},format:{from:function(e){return Math.round(e)},to:function(e){return Math.round(e)+" px"}}},setValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return parseFloat(e)},getValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e[0]&&e[0].split(" px")[0];return Lt({},n,parseFloat(t))}}},opacity:function(e){var t=e.key,n=void 0===t?"opacity":t,r=e.label;return{type:"slider",label:void 0===r?"Opacity":r,config:{range:{min:0,max:1}},setValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return parseFloat(e)},getValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e[0]&&e[0].split(" px")[0];return Lt({},n,parseFloat(t))}}},offset:function(e){var t=e.key,n=void 0===t?"offset":t,r=e.label,o=void 0===r?"":r,i=e.axis,a=void 0===i?"":i;return{key:n,type:"slider",label:o,config:{range:{min:-100,max:100},format:{from:function(e){return Math.round(e)},to:function(e){return Math.round(e)+" px"}}},setValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t="y"===a?parseFloat(e[1]):parseFloat(e[0]);return Z()(t)?0:t},getValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,r=e[0]&&e[0].split(" px")[0],o=t[n]||[0,0];return Lt({},n,"y"===a?[o[0],parseFloat(r)]:[parseFloat(r),o[1]])}}},rotate:function(e){var t=e.key,n=void 0===t?"rotate":t,r=e.label;return{type:"slider",label:void 0===r?"Rotation (deg)":r,config:{range:{min:0,max:360},format:{from:function(e){return Math.round(e)},to:function(e){return Math.round(e)+""}}},setValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return parseFloat(e)},getValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e[0]&&e[0].split("")[0];return Lt({},n,parseFloat(t))}}},shape:function(e){var t=e.label,n=e.key,r=void 0===n?"wellKnownName":n;return{type:"mark",label:t,getValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Lt({},r,e)}}},image:function(e){var t=e.label,n=e.key,r=void 0===n?"image":n;return{type:"image",label:t,config:{isValid:e.isValid},getValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Lt({},r,e)}}},text:function(e){var t=e.label,n=e.key,r=void 0===n?"label":n;return{type:"input",label:t,getValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Lt({},r,e)}}},fontStyle:function(e){var t=e.label,n=e.key,r=void 0===n?"fontStyle":n;return{type:"toolbar",label:t,config:{options:[{labelId:"styleeditor.fontStyleNormal",value:"normal"},{labelId:"styleeditor.fontStyleItalic",value:"italic"}]},getValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Lt({},r,e)}}},fontWeight:function(e){var t=e.label,n=e.key,r=void 0===n?"fontWeight":n;return{type:"toolbar",label:t,config:{options:[{labelId:"styleeditor.fontWeightNormal",value:"normal"},{labelId:"styleeditor.fontWeightBold",value:"bold"}]},getValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Lt({},r,e)}}},bool:function(e){var t=e.key,n=void 0===t?"label":t;return{type:"toolbar",label:e.label,config:{options:[{labelId:"styleeditor.boolTrue",value:!0},{labelId:"styleeditor.boolFalse",value:!1}]},isDisabled:e.isDisabled,getValue:function(e){return Lt({},n,e)}}},intervals:function(e){var t=e.key,n=void 0===t?"intervals":t,r=e.label,o=e.isDisabled;return{type:"slider",label:r,config:{range:{min:2,max:25},format:{from:function(e){return Math.round(e)},to:function(e){return Math.round(e)}}},isDisabled:void 0===o?function(e,t){return"customInterval"===(null==t?void 0:t.method)}:o,setValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return parseFloat(e)},getValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Lt({},n,parseFloat(e[0]))}}},select:function(e){var t=e.label,n=e.key,r=void 0===n?"":n,o=e.getOptions;return{type:"select",label:t,config:{getOptions:void 0===o?function(){return[]}:o,selectProps:e.selectProps,isValid:e.isValid},getValue:function(e){return Lt({},r,e)}}},colorRamp:function(e){var t=e.label,n=e.key,r=void 0===n?"":n,o=e.getOptions;return{type:"colorRamp",label:t,config:{getOptions:void 0===o?function(){return[]}:o},getValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Lt({},r,e)}}},colorMap:function(e){var t=e.label,n=e.key,r=void 0===n?"":n;return{type:"colorMap",label:t,getValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=e.classification,o=e.type,i="interval"===o||"customInterval"===t.method,a="color"===o||"custom"===t.ramp;return Dt(Dt(Lt({},r,n),i&&{method:"customInterval"}),a&&{ramp:"custom"})}}},channel:function(e){return{type:"channel",label:e.label,setValue:function(e,t){return{channelSelection:t.channelSelection,contrastEnhancement:t.contrastEnhancement}},getValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{channelSelection:e.channelSelection,contrastEnhancement:e.contrastEnhancement}}}}};function Ft(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ut(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ft(Object(n),!0).forEach((function(t){Gt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ft(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Gt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Bt(e){return function(e){if(Array.isArray(e))return zt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return zt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zt(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Wt=function(){var e={Mark:{kind:"Mark",glyph:"1-point",glyphAdd:"1-point-add",tooltipAddId:"styleeditor.addMarkRule",supportedTypes:["point","linestring","polygon","vector"],params:{wellKnownName:Nt.shape({label:"styleeditor.shape"}),color:Nt.color({key:"color",opacityKey:"fillOpacity",label:"styleeditor.fill"}),strokeColor:Nt.color({key:"strokeColor",opacityKey:"strokeOpacity",label:"styleeditor.strokeColor",stroke:!0}),strokeWidth:Nt.width({key:"strokeWidth",label:"styleeditor.strokeWidth"}),radius:Nt.size({key:"radius",label:"styleeditor.radius"}),rotate:Nt.rotate({label:"styleeditor.rotation"})},deaultProperties:{kind:"Mark",wellKnownName:"Circle",color:"#dddddd",fillOpacity:1,strokeColor:"#777777",strokeOpacity:1,strokeWidth:1,radius:16,rotate:0}},Icon:{kind:"Icon",glyph:"point",glyphAdd:"point-plus",tooltipAddId:"styleeditor.addIconRule",supportedTypes:["point","linestring","polygon","vector"],params:{image:Nt.image({label:"styleeditor.image",key:"image",isValid:function(e){return!!e.value}}),opacity:Nt.opacity({label:"styleeditor.opacity"}),size:Nt.size({key:"size",label:"styleeditor.size"}),rotate:Nt.rotate({label:"styleeditor.rotation"})},deaultProperties:{kind:"Icon",image:"",opacity:1,size:32,rotate:0}},Line:{kind:"Line",glyph:"line",glyphAdd:"line-plus",tooltipAddId:"styleeditor.addLineRule",supportedTypes:["linestring","polygon","vector"],params:{color:Nt.color({label:"styleeditor.strokeColor",stroke:!0,pattern:!0,getGroupParams:function(t){return e[t]},getGroupConfig:function(e){return"Mark"===e?{disableAlpha:!0}:"Icon"===e?{omittedKeys:["rotate","opacity"]}:{}},graphicKey:"graphicStroke"}),width:Nt.width({label:"styleeditor.strokeWidth",key:"width"}),dasharray:Nt.dasharray({label:"styleeditor.lineStyle",key:"dasharray"}),cap:Nt.cap({label:"styleeditor.lineCap",key:"cap"}),join:Nt.join({label:"styleeditor.lineJoin",key:"join"})},deaultProperties:{kind:"Line",color:"#777777",width:1,opacity:1,cap:"round",join:"round"}},Fill:{kind:"Fill",glyph:"polygon",glyphAdd:"polygon-plus",tooltipAddId:"styleeditor.addFillRule",supportedTypes:["polygon","vector"],params:{color:Nt.color({label:"styleeditor.fill",key:"color",opacityKey:"fillOpacity",pattern:!0,graphicKey:"graphicFill",getGroupParams:function(t){return e[t]},getGroupConfig:function(e){return"Mark"===e?{}:"Icon"===e?{omittedKeys:["rotate","opacity"]}:{}}}),outlineColor:Nt.color({key:"outlineColor",opacityKey:"outlineOpacity",label:"styleeditor.outlineColor",stroke:!0}),outlineWidth:Nt.width({key:"outlineWidth",label:"styleeditor.outlineWidth"})},deaultProperties:{kind:"Fill",color:"#dddddd",fillOpacity:1,outlineColor:"#777777",outlineWidth:1}},Text:{kind:"Text",glyph:"font",tooltipAddId:"styleeditor.addTextRule",supportedTypes:["point","linestring","polygon","vector"],params:{label:Nt.select({key:"label",label:"styleeditor.label",selectProps:{creatable:!0},getOptions:function(e){var t=e.attributes;return(null==t?void 0:t.map((function(e){return{value:"{{"+e.attribute+"}}",label:e.attribute}})))||[]}}),font:Nt.select({key:"font",label:"styleeditor.fontFamily",selectProps:{multi:!0},getOptions:function(e){var t=e.fonts;return(null==t?void 0:t.map((function(e){return{value:e,label:e}})))||[]}}),color:Nt.color({label:"styleeditor.fontColor",key:"color",disableAlpha:!0}),size:Nt.size({label:"styleeditor.fontSize",key:"size"}),fontStyle:Nt.fontStyle({label:"styleeditor.fontStyle",key:"fontStyle"}),fontWeight:Nt.fontWeight({label:"styleeditor.fontWeight",key:"fontWeight"}),haloColor:Nt.color({label:"styleeditor.haloColor",key:"haloColor",stroke:!0,disableAlpha:!0}),haloWidth:Nt.width({label:"styleeditor.haloWidth",key:"haloWidth"}),rotate:Nt.rotate({label:"styleeditor.rotation"}),offsetX:Nt.offset({label:"styleeditor.offsetX",axis:"x"}),offsetY:Nt.offset({label:"styleeditor.offsetY",axis:"y"})},deaultProperties:{kind:"Text",label:"Label",color:"#333333",size:14,fontStyle:"normal",fontWeight:"normal",haloColor:"#ffffff",haloWidth:1,allowOverlap:!0,offset:[0,0]}},Raster:{kind:"Raster",glyph:"1-raster",tooltipAddId:"styleeditor.addRasterRule",supportedTypes:["raster"],params:{channel:Nt.channel({}),opacity:Nt.opacity({label:"styleeditor.opacity"})},deaultProperties:{kind:"Raster",opacity:1,contrastEnhancement:{}}}},t={Classification:{kind:"Classification",glyph:"list",classificationType:"classificationVector",hideInputLabel:!0,hideFilter:!0,params:[{ramp:Nt.colorRamp({key:"ramp",label:"styleeditor.colorRamp",getOptions:function(e){return(0,e.getColors)()}}),reverse:Nt.bool({key:"reverse",label:"styleeditor.reverse",isDisabled:function(e,t){return"custom"===(null==t?void 0:t.ramp)||"customInterval"===(null==t?void 0:t.method)}}),attribute:Nt.select({key:"attribute",label:"styleeditor.attribute",isValid:function(e){return void 0!==e.value},getOptions:function(e){var t=e.attributes;return null==t?void 0:t.map((function(e){return{value:e.attribute,label:e.attribute,disabled:e.disabled}}))}}),method:Nt.select({key:"method",label:"styleeditor.method",getOptions:function(e){var t=e.methods,n=e.method,r=(null==t?void 0:t.map((function(e){return{labelId:"styleeditor."+e,value:e}})))||[];return[].concat(Bt("customInterval"===n?[{labelId:"styleeditor."+n,value:n}]:[]),Bt(r))}}),intervals:Nt.intervals({label:"styleeditor.intervals"})},function(t){var n,r,o,i;if(!t)return{};switch(t){case"Mark":return Ut({fillOpacity:Nt.opacity({key:"fillOpacity",label:"styleeditor.opacity"})},q()(null===(n=e[t])||void 0===n?void 0:n.params,["color"]));case"Line":return Ut({opacity:Nt.opacity({key:"opacity",label:"styleeditor.opacity"})},q()(null===(r=e[t])||void 0===r?void 0:r.params,["color"]));case"Fill":return Ut({fillOpacity:Nt.opacity({key:"fillOpacity",label:"styleeditor.opacity"})},q()(null===(o=e[t])||void 0===o?void 0:o.params,["color"]));default:return null===(i=e[t])||void 0===i?void 0:i.params}},{classification:Nt.colorMap({key:"classification",rampKey:"ramp"})}],deaultProperties:{kind:"Classification",classification:[],intervals:5,method:"equalInterval",ramp:"orrd",reverse:!1}},Raster:{kind:"Raster",glyph:"1-raster",classificationType:"classificationRaster",hideInputLabel:!1,hideFilter:!0,params:[{channel:Nt.channel({}),opacity:Nt.opacity({label:"styleeditor.opacity"}),ramp:Nt.colorRamp({key:"ramp",label:"styleeditor.colorRamp",getOptions:function(e){return(0,e.getColors)()}}),reverse:Nt.bool({key:"reverse",label:"styleeditor.reverse"}),continuous:Nt.bool({key:"continuous",label:"styleeditor.continuous"}),method:Nt.select({key:"method",label:"styleeditor.method",getOptions:function(e){var t=e.methods;return null==t?void 0:t.map((function(e){return{labelId:"styleeditor."+e,value:e}}))}}),intervals:Nt.intervals({label:"styleeditor.intervals"})}],deaultProperties:{kind:"Raster",opacity:1,classification:[],intervals:5,method:"equalInterval",reverse:!1,continuous:!0,symbolizerKind:"Raster"}}};return{symbolizerBlock:e,ruleBlock:t}};function Vt(){return(Vt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ht(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function qt(e){return function(e){if(Array.isArray(e))return Yt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Yt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Yt(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Qt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Kt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qt(Object(n),!0).forEach((function(t){Zt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Zt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Xt=Pe()(V.Button),Jt=se()("placeholder")(V.FormControl);function $t(e){var t=e.title,n=e.tools,r=e.errorId,i=e.children;return o.a.createElement("li",{className:"ms-style-rule"},o.a.createElement("div",{className:"ms-style-rule-head"},o.a.createElement("div",{className:"ms-style-rule-head-info"},t),o.a.createElement("div",{className:"ms-style-rule-head-tools"},n)),r&&o.a.createElement(V.Alert,{bsStyle:"danger"},o.a.createElement(j.a,{msgId:r})),o.a.createElement("ul",{className:"ms-style-rule-body"},i))}function en(){return o.a.createElement("div",{style:{position:"relative",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",textAlign:"center"}},o.a.createElement("div",null,o.a.createElement(V.Glyphicon,{glyph:"exclamation-mark",style:{fontSize:150}}),o.a.createElement("h1",null,o.a.createElement(j.a,{msgId:"styleeditor.emptyRuleEditorTitle"})),o.a.createElement("p",null,o.a.createElement(j.a,{msgId:"styleeditor.emptyRuleEditor"}))))}function tn(e){var t=e.rules,n=void 0===t?[]:t,i=e.loading,a=e.toolbar,s=e.config,l=void 0===s?{}:s,c=e.ruleBlock,u=void 0===c?{}:c,p=e.symbolizerBlock,d=void 0===p?{}:p,f=e.onUpdate,m=void 0===f?function(){}:f,y=e.onChange,b=void 0===y?function(){}:y,g=l.geometryType,h=l.attributes,v=l.bands,S=l.scales,w=l.zoom,O=l.fonts,E=l.methods,x=l.getColors,P=Object(r.useRef)();function C(e,t){var n=e.values,r=e.ruleId,o=e.symbolizerId;if(t){var i=P.current.rules.map((function(e){return e.ruleId===r?Kt(Kt({},e),n):e}));return b(i)}var a=P.current.rules.map((function(e){return e.symbolizers?Kt(Kt({},e),{},{symbolizers:e.symbolizers.map((function(t){return t.symbolizerId===o&&e.ruleId===r?Kt(Kt({},t),n):t}))}):e}));return b(a)}function T(e){var t=[].concat(qt(P.current.rules),[e]);b(t)}function M(e){var t=e.ruleId,n=Ht(e,["ruleId"]),r=P.current.rules.map((function(e){return e.ruleId===t?Kt({ruleId:t},n):e}));return b(r)}return P.current={rules:n},o.a.createElement("div",{className:"ms-style-rules-editor"},o.a.createElement("div",{className:"ms-style-rules-editor-head"},o.a.createElement("div",{className:"ms-style-rules-editor-left"},a),o.a.createElement("div",{className:"ms-style-rules-editor-right"},o.a.createElement(W.a,{btnDefaultProps:{className:"square-button-md no-border"},buttons:[].concat(qt(Object.keys(d).map((function(e){var t=d[e];return{glyph:t.glyphAdd||t.glyph,visible:-1!==t.supportedTypes.indexOf(g),tooltipId:t.tooltipAddId,onClick:function(){return T({name:"",ruleId:qe()(),symbolizers:[Kt(Kt({},d[e].deaultProperties),{},{symbolizerId:qe()()})]})}}}))),qt(Object.keys(u).filter((function(e){return u[e].add})).map((function(e){var t=u[e];return{glyph:t.glyphAdd||t.glyph,visible:-1!==t.supportedTypes.indexOf(g),tooltipId:t.tooltipAddId,onClick:function(){return T(Kt({name:"",ruleId:qe()()},u[e].deaultProperties))}}}))))}))),o.a.createElement("ul",{className:"ms-style-rules-editor-body"},0===n.length&&o.a.createElement(en,null),n.map((function(e){var t=e.name,n=e.symbolizers,r=void 0===n?[]:n,i=e.filter,a=e.scaleDenominator,s=void 0===a?{}:a,l=e.ruleId,c=e.kind,p=e.errorId,f=u[c]||{},y=f.params,g=f.glyph,T=f.hideInputLabel,_=f.hideFilter,A=f.hideScaleDenominator,R=f.classificationType;return o.a.createElement($t,{key:l,errorId:p,title:T?o.a.createElement(j.a,{msgId:"styleeditor.rule".concat(c)}):o.a.createElement(V.FormGroup,null,o.a.createElement(Jt,{value:t,placeholder:"styleeditor.enterLegendLabelPlaceholder",onChange:function(e){return C({values:{name:e.target.value},ruleId:l},!0)}})),tools:o.a.createElement(o.a.Fragment,null,o.a.createElement(rt,{hide:_,value:i,attributes:h,onChange:function(e){return C({values:e,ruleId:l},!0)}}),o.a.createElement(bt,{hide:A,value:s,scales:S,zoom:w,onChange:function(e){return C({values:e,ruleId:l},!0)}}),o.a.createElement(Xt,{className:"square-button-md no-border",tooltipId:"styleeditor.removeRule",onClick:function(){return function(e){var t=P.current.rules.filter((function(t){return t.ruleId!==e}));b(t)}(l)}},o.a.createElement(V.Glyphicon,{glyph:"trash"})))},"Classification"===c||"Raster"===c?o.a.createElement(Tt,Vt({},e,{ruleBlock:u,symbolizerBlock:d,glyph:g,classificationType:R,params:y,methods:E,getColors:x,bands:v,attributes:h&&h.map((function(e){return Kt(Kt({},e),{},{disabled:"number"!==e.type})})),onUpdate:m,onChange:function(e){return C({values:e,ruleId:l},!0)},onReplace:M})):r.map((function(e){var t=e.kind,n=void 0===t?"":t,r=e.symbolizerId,i=Ht(e,["kind","symbolizerId"]),a=d[n]||{},s=a.params,c=a.glyph;return s&&o.a.createElement(jt,{key:r,defaultExpanded:!0,draggable:!0,glyph:c,tools:o.a.createElement(Ot,{hide:"Icon"===n,symbolizerKind:n,ruleBlock:u,symbolizerBlock:d,ruleId:l,onSelect:M,graphic:i.graphicFill||i.graphicStroke,channelSelection:i.channelSelection})},o.a.createElement(Ve,{properties:i,params:s,config:{bands:v,attributes:h,fonts:O},onChange:function(e){return C({values:e,ruleId:l,symbolizerId:r})}}))})))})),i&&o.a.createElement("div",{style:{position:"absolute",width:"100%",height:"100%",backgroundColor:"rgba(255, 255, 255, 0.4)",zIndex:10,transition:"0.3s all"}})))}$t.propTypes={title:N.a.oneOfType([N.a.node,N.a.string]),tools:N.a.node,errorId:N.a.string};var nn=Wt(),rn=nn.symbolizerBlock,on=nn.ruleBlock;tn.propTypes={rules:N.a.array,loading:N.a.bool,toolbar:N.a.node,config:N.a.object,ruleBlock:N.a.object,symbolizerBlock:N.a.object,onUpdate:N.a.func,onChange:N.a.func},tn.defaultProps={rules:[],config:{},ruleBlock:on,symbolizerBlock:rn,onUpdate:function(){},onChange:function(){}};var an=tn,sn=n("./MapStore2/web/client/utils/VectorStyleUtils.js"),ln=n("./node_modules/redux-undo/lib/index.js"),cn=n.n(ln),un=n("./MapStore2/web/client/components/widgets/widget/InfoPopover.jsx"),pn=n.n(un);function dn(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function fn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return mn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function yn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yn(Object(n),!0).forEach((function(t){gn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function gn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var hn=gn({},"UPDATE_STYLE",(function(e,t){return bn({},t)})),vn=cn()((function(e,t){return(hn[t.type]||B.a)(e,t.payload)}),{limit:20,undoType:"UNDO_STYLE",redoType:"REDO_STYLE",jumpType:"",jumpToPastType:"",jumpToFutureType:"",clearHistoryType:""}),Sn={},wn=function(e){var t=e.values,n=e.properties,r=e.rules,o=e.layer,i=e.styleUpdateTypes,a=void 0===i?{}:i;return new Promise((function(e){var i=n.type&&a[n.type];return e(i?i({values:t,properties:n,rules:r,layer:o}):r.map((function(e){return e.ruleId===n.ruleId?bn(bn(bn({},e),t),{},{errorId:void 0}):e})))}))};function On(e){var t,n,i=e.code,a=e.format,s=e.layer,l=e.zoom,c=e.scales,u=e.geometryType,p=e.fonts,d=e.bands,f=e.attributes,m=e.onChange,y=e.onError,b=e.defaultStyleJSON,g=e.config,h=e.loading,v=e.error,S=e.methods,O=e.getColors,E=e.styleUpdateTypes,P=e.debounceTime,C=Wt(g),T=C.symbolizerBlock,M=C.ruleBlock,_=fn(Object(r.useState)(!1),2),A=_[0],R=_[1],I=fn(Object(r.useState)(),2),D=I[0],k=I[1],L=fn(Object(r.useReducer)(vn,{}),2),N=L[0],F=L[1],G=(null==N?void 0:N.present)||Sn,B=Object(r.useRef)();B.current=G;var z=Object(r.useRef)(!1);Object(r.useEffect)((function(){var e;z.current||((e=Object(sn.getStyleParser)(a))&&i&&null===b?e.readStyle(i).then((function(e){F({type:"UPDATE_STYLE",payload:Object(x.formatJSONStyle)(e)}),z.current=!0})).catch((function(e){return k(e&&e.message)})):e&&i&&b?(z.current=!0,F({type:"UPDATE_STYLE",payload:b})):i&&!e&&y({messageId:"styleeditor.formatNotSupported"}))}),[i,a,b]);var V=function(e){if(R(!1),!e)return null;var t=bn(bn({},B.current),{},{rules:e});return F({type:"UPDATE_STYLE",payload:t})},H=Object(r.useRef)();return Object(r.useEffect)((function(){return H.current=U()((function(e){k(void 0);var t=Object(sn.getStyleParser)(e.format);t&&t.writeStyle(Object(x.parseJSONStyle)(e.style)).then((function(t){m(t,e.style)})).catch((function(e){return k(e&&e.message)}))}),P),function(){H.current.cancel()}}),[]),Object(r.useEffect)((function(){H.current.cancel(),H.current({format:a,style:G})}),[JSON.stringify(G)]),o.a.createElement(an,{loading:A,toolbar:o.a.createElement(W.a,{btnDefaultProps:{className:"square-button-md no-border"},buttons:[{glyph:"undo",tooltipId:"styleeditor.undoStyle",disabled:0===(null==N||null===(t=N.past)||void 0===t?void 0:t.length),onClick:function(){return F({type:"UNDO_STYLE"})}},{disabled:0===(null==N||null===(n=N.future)||void 0===n?void 0:n.length),tooltipId:"styleeditor.redoStyle",glyph:"redo",onClick:function(){return F({type:"REDO_STYLE"})}},{visible:!(!v&&!D),Element:function(){return o.a.createElement("div",{className:"square-button-md",style:{display:"inline-flex",alignItems:"center",justifyContent:"center"}},o.a.createElement(pn.a,{glyph:"exclamation-mark",bsStyle:"danger",placement:"right",title:o.a.createElement(j.a,{msgId:"styleeditor.validationErrorTitle"}),text:o.a.createElement(o.a.Fragment,null,o.a.createElement("p",null,o.a.createElement(j.a,{msgId:"styleeditor.genericValidationError"})),o.a.createElement("p",null,o.a.createElement(j.a,{msgId:"styleeditor.incorrectPropertyInputError"})),(null==v?void 0:v.line)&&o.a.createElement("p",null,o.a.createElement(j.a,{msgId:"styleeditor.validationError"}),":",v.message),D&&o.a.createElement("p",null,o.a.createElement(j.a,{msgId:"styleeditor.validationError"}),":",D))}))}},{visible:!(!h&&!A),Element:function(){return o.a.createElement("div",{className:"square-button-md",style:{display:"inline-flex",alignItems:"center",justifyContent:"center"}},o.a.createElement(w.a,{size:18}))}}]}),ruleBlock:M,symbolizerBlock:T,rules:null==G?void 0:G.rules,config:{geometryType:u,zoom:l,fonts:p,scales:c,bands:d,attributes:f,methods:S,getColors:O},onUpdate:function(e){var t=e.values,n=dn(e,["values"]);R(!0),wn({values:t,properties:n,layer:s,rules:B.current.rules,styleUpdateTypes:E}).then((function(e){return V(e)})).catch((function(){return V()}))},onChange:function(e){return V(e)}})}On.propTypes={code:N.a.string,format:N.a.string,layer:N.a.object,zoom:N.a.number,scales:N.a.array,geometryType:N.a.string,fonts:N.a.array,bands:N.a.array,attributes:N.a.array,onChange:N.a.func,onError:N.a.func,defaultStyleJSON:N.a.object,config:N.a.object,loading:N.a.bool,error:N.a.object,methods:N.a.array,getColors:N.a.func,styleUpdateTypes:N.a.object,debounceTime:N.a.number},On.defaultProps={onChange:function(){},onError:function(){},config:{},getColors:function(){},styleUpdateTypes:{},debounceTime:300,defaultStyleJSON:null};var jn=On,En=n("./MapStore2/web/client/utils/ReselectUtils.js"),xn=n("./MapStore2/web/client/api/StyleEditor.js");function Pn(){return(Pn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Cn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Tn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Tn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Mn(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var _n={classificationVector:xn.classificationVector,classificationRaster:xn.classificationRaster,classification:xn.classificationVector,"classification-raster":xn.classificationRaster};function An(e,t){return e&&"raster"!==t&&Object.keys(e).filter((function(t){return-1!==["integer","long","double","float","bigdecimal","string","decimal"].indexOf(e[t].localPart.toLowerCase())})).map((function(t){var n=e[t].localPart;return{attribute:t,label:t,type:-1!==["integer","long","double","float","bigdecimal","decimal"].indexOf(n.toLowerCase())?"number":"string"}}))}var Rn=Object(i.connect)(Object(a.createSelector)([E.codeStyleSelector,E.formatStyleSelector,E.layerPropertiesSelector,E.errorStyleSelector,E.loadingStyleSelector,E.getUpdatedLayer,E.geometryTypeSelector,I.scalesSelector,I.mapSelector,E.styleServiceSelector],(function(e,t,n,r,o,i,a,s,l,c){var u,p;return{code:e,mode:Object(x.getEditorMode)(t),bands:M()(n)&&"raster"===a&&n||[],attributes:An(n,a),error:r.edit||null,loading:o,format:t,layer:i,geometryType:a,scales:s.map((function(e){return Math.round(e)})),zoom:l.zoom,fonts:c.fonts||[],methods:("raster"===a?null==c||null===(u=c.classificationMethods)||void 0===u?void 0:u.raster:null==c||null===(p=c.classificationMethods)||void 0===p?void 0:p.vector)||R.methods}})))(jn);Rn.defaultProps={getColors:R.getColors,styleUpdateTypes:_n};var In={visual:Rn,textarea:Object(i.connect)(Object(a.createSelector)([E.codeStyleSelector,E.formatStyleSelector,E.layerPropertiesSelector,E.errorStyleSelector,E.loadingStyleSelector],(function(e,t,n,r,o){return{code:e,mode:Object(x.getEditorMode)(t),hintProperties:n,error:r.edit||null,loading:o}})))(k.a)};function Dn(e){var t=e.code,n=e.error,i=e.canEdit,a=e.editorType,s=e.onUpdateMetadata,l=e.onChange,c=e.loading,u=Mn(e,["code","error","canEdit","editorType","onUpdateMetadata","onChange","loading"]),p=Cn(Object(r.useState)(),2),d=p[0],m=p[1],y={position:"relative",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",textAlign:"center"};if(!t&&!n)return o.a.createElement("div",{style:y},o.a.createElement(w.a,{size:150}));if(!i)return o.a.createElement("div",{style:y},o.a.createElement("div",null,o.a.createElement(V.Glyphicon,{glyph:"exclamation-mark",style:{fontSize:150}}),o.a.createElement("h1",null,o.a.createElement(j.a,{msgId:"styleeditor.noPermission"}))));if(404===(null==n?void 0:n.status))return o.a.createElement("div",{style:y},o.a.createElement("div",null,o.a.createElement(V.Glyphicon,{glyph:"exclamation-mark",style:{fontSize:150}}),o.a.createElement("h1",null,o.a.createElement(j.a,{msgId:"styleeditor.styleNotFound"}))));var b=In[a]||In.textarea;return o.a.createElement(f.a,{style:{position:"relative"},header:o.a.createElement("div",{className:"ms-style-editor-switch"},o.a.createElement(W.a,{buttons:[{className:"square-button-md no-border",glyph:"code",active:"textarea"===a,disabled:c,tooltipId:"visual"===a?"styleeditor.switchToTextareaEditor":"styleeditor.switchToVisualEditor",onClick:function(){return c?null:"visual"===a?s({editorType:"textarea"}):m(!0)}}]}))},b&&o.a.createElement(b,Pn({},u,{onChange:function(e,t){l(e),C()(t)&&s({styleJSON:JSON.stringify(t)})}})),d&&o.a.createElement("div",{className:"ms-style-editor-alert",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:10,display:"flex",alignItems:"center",justifyContent:"center",padding:16,backgroundColor:"rgba(0, 0, 0, 0.6)"}},o.a.createElement(V.Alert,{bsStyle:"warning",style:{textAlign:"center"}},o.a.createElement("p",{style:{padding:8}},o.a.createElement(j.a,{msgId:"styleeditor.alertForceTranslate"})),o.a.createElement("p",null,o.a.createElement(W.a,{buttons:[{text:o.a.createElement(j.a,{msgId:"styleeditor.stayInTextareaEditor"}),onClick:function(){return m(!1)},style:{marginRight:4}},{bsStyle:"primary",text:o.a.createElement(j.a,{msgId:"styleeditor.useLatestValidStyle"}),onClick:function(){s({editorType:"visual"}),m(!1)}}]})))))}Dn.defaultProps={inlineWidgets:A.a};var kn=Object(i.connect)(Object(En.createShallowSelector)(E.codeStyleSelector,E.errorStyleSelector,E.canEditStyleSelector,(function(e){var t=Object(E.editorMetadataSelector)(e);return null==t?void 0:t.editorType}),(function(e){try{var t=Object(E.editorMetadataSelector)(e);return JSON.parse(null==t?void 0:t.styleJSON)}catch(e){return null}}),E.loadingStyleSelector,(function(e,t,n,r,o,i){return{code:e,error:t.edit||null,canEdit:n,editorType:r,defaultStyleJSON:o,loading:i}})),{onUpdateMetadata:l.updateEditorMetadata,onChange:l.editStyleCode})(Dn);n.d(t,"StyleSelector",(function(){return Wn}));var Ln=Object(x.getStyleTemplates)(),Nn=v()((function(e){return!e.canEdit}),{glyph:"exclamation-mark",title:o.a.createElement(j.a,{msgId:"styleeditor.noPermission"})}),Fn=function(e){return g()(e,{size:150,style:{margin:"auto"}},(function(e){return o.a.createElement("div",{style:{position:"relative",height:"100%",display:"flex"}},o.a.createElement(w.a,e))}))},Un=Object(s.compose)(Object(s.defaultProps)({templates:Ln}),Object(i.connect)(Object(a.createSelector)([E.templateIdSelector,E.addStyleSelector,E.geometryTypeSelector,E.canEditStyleSelector,E.styleServiceSelector,E.loadingStyleSelector],(function(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=o.formats,a=void 0===i?[]:i,s=arguments.length>5?arguments[5]:void 0;return{selectedStyle:e,add:t&&e,geometryType:n,canEdit:r,availableFormats:a,loading:s}})),{onSelect:l.selectStyleTemplate,onClose:l.addStyle.bind(null,!1),onSave:l.createStyle}),Nn,Fn((function(e){return!e.geometryType})),Object(s.withState)("filterText","onFilter",""),Object(s.withState)("styleSettings","onUpdate",{}))(n("./MapStore2/web/client/components/styleeditor/StyleTemplates.jsx")),Gn=Object(s.compose)(Object(i.connect)(Object(a.createSelector)([E.statusStyleSelector,E.getAllStyles],(function(e,t){return{status:e,defaultStyle:t.defaultStyle,enabledStyle:t.enabledStyle,availableStyles:t.availableStyles}})),{onSelect:u.updateSettingsParams}),Object(s.withState)("filterText","onFilter",""),y()((function(e){var t=e.status,n=e.readOnly;return"template"===t&&!n}),(function(){return o.a.createElement(Un,null)}),{maskContainerStyle:{display:"flex",position:"relative"},maskStyle:{overflowY:"auto",left:0}}))(n("./MapStore2/web/client/components/styleeditor/StyleList.jsx")),Bn=Object(s.compose)(Object(s.withState)("showModal","onShowModal"),Object(i.connect)(Object(a.createSelector)([E.statusStyleSelector,E.templateIdSelector,E.errorStyleSelector,E.initialCodeStyleSelector,E.codeStyleSelector,E.loadingStyleSelector,E.selectedStyleSelector,E.canEditStyleSelector,E.getAllStyles,E.styleServiceSelector,E.selectedStyleFormatSelector],(function(e,t,n,r,o,i,a,s,l){var c=l.defaultStyle,u=arguments.length>9&&void 0!==arguments[9]?arguments[9]:{},p=u.formats,d=void 0===p?["sld"]:p,f=arguments.length>10?arguments[10]:void 0;return{status:e,templateId:t,error:n,isCodeChanged:r!==o,loading:i,layerDefaultStyleName:c,selectedStyle:c===a?"":a,editEnabled:s,disableCodeEditing:-1===d.indexOf(f)}})),{onSelectStyle:l.updateStatus.bind(null,"template"),onEditStyle:l.updateStatus.bind(null,"edit"),onBack:l.updateStatus.bind(null,""),onReset:c.updateOptionsByOwner.bind(null,x.STYLE_OWNER_NAME,[{}]),onAdd:l.addStyle.bind(null,!0),onUpdate:l.updateStyleCode,onDelete:l.deleteStyle,onSetDefault:l.setDefaultStyle}))(n("./MapStore2/web/client/components/styleeditor/StyleToolbar.jsx")),zn=Object(s.compose)(Object(i.connect)(Object(a.createSelector)([E.getUpdatedLayer],(function(e){return{layer:e}})),{onInit:p.getLayerCapabilities}),Object(s.lifecycle)({componentWillMount:function(){this.props.onInit&&this.props.layer&&this.props.onInit(this.props.layer)}}),Fn((function(e){var t=e.layer,n=void 0===t?{}:t;return n&&n.capabilitiesLoading})))((function(){return o.a.createElement(f.a,{className:"ms-style-editor-container",footer:o.a.createElement("div",{style:{height:25}})},o.a.createElement(Gn,{readOnly:!0}))})),Wn=Object(s.branch)((function(e){return e.readOnly}),(function(){return zn}))(Gn);t.default={StyleSelector:Wn,StyleTemplates:Un,StyleToolbar:Bn,StyleCodeEditor:kn}},"./MapStore2/web/client/plugins/styleeditor/inlineWidgets.js":function(e,t,n){var r=n("./node_modules/react/index.js"),o=n("./node_modules/react-color/lib/index.js").SketchPicker,i=n("./node_modules/tinycolor2/tinycolor.js");e.exports=[{type:"color",active:function(e){return"atom"===e.type&&i(e.string).isValid()},style:function(e){return{backgroundColor:e.string}},Widget:function(e){var t=e.token,n=e.value,i=e.onChange,a=void 0===i?function(){}:i;return r.createElement(o,{color:{hex:n||t.string},onChange:function(e){return a(e.hex)}})}}]},"./MapStore2/web/client/plugins/styler/styler.css":function(e,t,n){var r=n("./node_modules/css-loader/index.js!./node_modules/postcss-loader/src/index.js?!./MapStore2/web/client/plugins/styler/styler.css");"string"==typeof r&&(r=[[e.i,r,""]]);n("./node_modules/style-loader/addStyles.js")(r,{});r.locals&&(e.exports=r.locals)},"./MapStore2/web/client/plugins/toolbar/assets/img/layers.png":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3woCDCsUqrUEAAAAAQxJREFUOMvN0iFLw1EUBfCf02Q0LGhQQVZekiU/gTAYImpasMi6VVBhwSCsi0kQbIJFsBoMBjHdpKDJMjBaxM3yhCn7z4HF29695xzuue/wxxofNkwp1crl8kKn03kswowVEEvYx25utdCKiO6vAimlKZxh+cfoCo2IeC0USClVcY7Zgo2fsR4Rd1+NUh95CzdDyDCHm4z9LoAueiMcvpexAy0sZgvzBeQnrEXE/SALM3hHFZcDyJd59pFSmh5koY1b1FDHXl61m7+zjpWMaX+RJvoEGjjAKZawncFwjSM0cYidYTlYxQkCGzmt56hgMyIuRkliJZPKWeAlH+9hpChnkUkc52czIt78y/oEtThIARE8NNwAAAAASUVORK5CYII="},"./MapStore2/web/client/plugins/tutorial/preset.js":function(e,t,n){e.exports={default_tutorial:n("./MapStore2/web/client/plugins/tutorial/preset/default_tutorial.js"),default_mobile_tutorial:n("./MapStore2/web/client/plugins/tutorial/preset/default_mobile_tutorial.js"),home_tutorial:n("./MapStore2/web/client/plugins/tutorial/preset/home_tutorial.js"),cesium_tutorial:n("./MapStore2/web/client/plugins/tutorial/preset/cesium_tutorial.js"),cesium_mobile_tutorial:n("./MapStore2/web/client/plugins/tutorial/preset/cesium_mobile_tutorial.js"),dashboard_tutorial:n("./MapStore2/web/client/plugins/tutorial/preset/dashboard_tutorial.js"),contextcreator_generalsettings_tutorial:n("./MapStore2/web/client/plugins/tutorial/preset/contextcreator_generalsettings_tutorial.js").default,contextcreator_configuremap_tutorial:n("./MapStore2/web/client/plugins/tutorial/preset/contextcreator_configuremap_tutorial.js").default,contextcreator_configureplugins_tutorial:n("./MapStore2/web/client/plugins/tutorial/preset/contextcreator_configureplugins_tutorial.js").default,geostory_view_tutorial:n("./MapStore2/web/client/plugins/tutorial/preset/geostory_view_tutorial.js"),geostory_edit_tutorial:n("./MapStore2/web/client/plugins/tutorial/preset/geostory_edit_tutorial.js")}},"./MapStore2/web/client/plugins/tutorial/preset/cesium_mobile_tutorial.js":function(e,t,n){var r=n("./node_modules/react/index.js"),o=n("./MapStore2/web/client/components/I18N/I18N.jsx"),i=n("./MapStore2/web/client/components/tutorial/steps/CesiumTooltip.jsx");e.exports=[{translation:"introCesium",selector:"#intro-tutorial"},{title:r.createElement(o.Message,{msgId:"tutorial.cesium.title"}),text:r.createElement(i,{touch:!0}),selector:"#map .cesium-viewer"},{translation:"drawerMenu",selector:".ms-drawer-menu-button"},{translation:"home",selector:"#home-button"},{translation:"searchButton",selector:"#search-help"},{translation:"burgerMenu",selector:"#mapstore-burger-menu"}]},"./MapStore2/web/client/plugins/tutorial/preset/cesium_tutorial.js":function(e,t,n){var r=n("./node_modules/react/index.js"),o=n("./MapStore2/web/client/components/I18N/I18N.jsx"),i=n("./MapStore2/web/client/components/tutorial/steps/CesiumTooltip.jsx");e.exports=[{translation:"introCesium",selector:"#intro-tutorial"},{title:r.createElement(o.Message,{msgId:"tutorial.cesium.title"}),text:r.createElement(i,null),selector:"#map .cesium-viewer",position:"bottom"},{translation:"cesiumCompass",selector:"#distanceLegendDiv .compass"},{translationHTML:"drawerMenu",selector:".ms-drawer-menu-button"},{translation:"searchBar",selector:"#map-search-bar"},{translation:"home",selector:"#home-button"},{translation:"burgerMenu",selector:"#mapstore-burger-menu"},{translation:"fullscreen",selector:"#fullscreen-btn",position:"top"},{translation:"identifyButton",selector:"#navigationBar-container .glyphicon.glyphicon-option-horizontal",position:"top"}]},"./MapStore2/web/client/plugins/tutorial/preset/contextcreator_configuremap_tutorial.js":function(e,t,n){"use strict";n.r(t),t.default=[{translationHTML:"contextCreator.configureMap.intro",selector:"#intro-tutorial"},{translationHTML:"contextCreator.configureMap.reloadMap",selector:".ms2-stepper .footer-button-toolbar-extra > button:nth-child(2)",position:"top"}]},"./MapStore2/web/client/plugins/tutorial/preset/contextcreator_configureplugins_tutorial.js":function(e,t,n){"use strict";n.r(t);var r=n("./MapStore2/web/client/actions/contextcreator.js");t.default=[{translationHTML:"contextCreator.configurePlugins.intro",selector:"#intro-tutorial"},{translationHTML:"contextCreator.configurePlugins.availablePlugins",selector:".ms2-transfer-left",position:"right"},{translationHTML:"contextCreator.configurePlugins.pluginManipulation",selector:".btn-group-vertical",position:"right"},{translationHTML:"contextCreator.configurePlugins.enabledPlugins",selector:".ms2-transfer-right",position:"left"},{translationHTML:"contextCreator.configurePlugins.userPlugin",selector:".ms2-transfer-right .mapstore-side-card:nth-child(1) .btn-group > span > button:nth-child(1)",position:"left"},{translationHTML:"contextCreator.configurePlugins.userPluginCheckbox",selector:".ms2-transfer-right .mapstore-side-card:nth-child(1) .btn-group > span > button:nth-child(2)",position:"left",action:{back:Object(r.setTutorialStep)()}},{translationHTML:"contextCreator.configurePlugins.cfgTool",selector:".ms2-transfer-right .mapstore-side-card:nth-child(1) .btn-group > span > button:nth-child(3)",position:"left",action:{back:Object(r.setTutorialStep)("configureplugins-cfgeditor"),next:Object(r.setTutorialStep)("configureplugins-cfgeditor")}},{translationHTML:"contextCreator.configurePlugins.cfgEditor",selector:".plugin-configuration-editor",position:"left"},{translationHTML:"contextCreator.configurePlugins.documentationTool",selector:".ms2-transfer-right .mapstore-side-card:nth-child(1) .btn-group > span > a > button",position:"left"},{translationHTML:"contextCreator.configurePlugins.mapTemplatesTool",selector:".ms2-transfer-right .mapstore-side-card:nth-child(2) .btn-group > span > button:nth-child(1)",position:"top"},{translationHTML:"contextCreator.configurePlugins.extensions",selector:".ms2-transfer-left .ms2-transfer-title-area button",position:"right"},{translationHTML:"contextCreator.configurePlugins.extensionsDelete",selector:".ms2-transfer-left .mapstore-side-card:nth-child(2) .btn-group > span > button:nth-child(1)",position:"right"}]},"./MapStore2/web/client/plugins/tutorial/preset/contextcreator_generalsettings_tutorial.js":function(e,t,n){"use strict";n.r(t),t.default=[{translation:"contextCreator.generalSettings.intro",selector:"#intro-tutorial"},{translationHTML:"contextCreator.generalSettings.stepsOverview",selector:".ms2-stepper .footer-step-bar",position:"top"},{translationHTML:"contextCreator.generalSettings.navigation.next",selector:".ms2-stepper .footer-button-toolbar button:nth-child(1)",position:"top"},{translationHTML:"contextCreator.generalSettings.navigation.back",selector:".ms2-stepper .footer-button-toolbar button:nth-child(2)",position:"top"},{translationHTML:"contextCreator.generalSettings.navigation.close",selector:".ms2-stepper .footer-button-toolbar button:nth-child(3)",position:"top"},{translationHTML:"contextCreator.generalSettings.fields",selector:".general-settings-step > div"},{translationHTML:"contextCreator.generalSettings.showTutorial",selector:".ms2-stepper .footer-button-toolbar-extra > button",position:"top"}]},"./MapStore2/web/client/plugins/tutorial/preset/dashboard_tutorial.js":function(e,t){e.exports=[{translation:"dashboardIntro",selector:"#intro-tutorial"},{translationHTML:"dashboardContainer",selector:".ms2-border-layout-content"},{translation:"dashboardAddWidget",selector:"#ms-add-card-dashboard",position:"right",action:{back:{type:"DASHBOARD:SET_EDITING",editing:!1},next:{type:"DASHBOARD:SET_EDITING",editing:!1}}},{translation:"dashboardBuilder",selector:".dashboard-editor.de-builder",position:"right",action:{next:{type:"WIDGETS:NEW"}}},{translationHTML:"dashboardAddChart",selector:".ms-widget-selector-chart",position:"right"},{translationHTML:"dashboardAddText",selector:".ms-widget-selector-text",position:"right"},{translationHTML:"dashboardAddTable",selector:".ms-widget-selector-table",position:"right"},{translationHTML:"dashboardAddCounter",selector:".ms-widget-selector-counter",position:"right"},{translationHTML:"dashboardAddMap",selector:".ms-widget-selector-map",position:"right"},{translation:"dashboardNav",selector:"#mapstore-navbar",position:"bottom"}]},"./MapStore2/web/client/plugins/tutorial/preset/default_mobile_tutorial.js":function(e,t){e.exports=[{translation:"drawerMenu",selector:".ms-drawer-menu-button"},{translation:"home",selector:"#home-button"},{translation:"searchButton",selector:"#search-help"},{translation:"burgerMenu",selector:"#mapstore-burger-menu"}]},"./MapStore2/web/client/plugins/tutorial/preset/default_tutorial.js":function(e,t){e.exports=[{translationHTML:"drawerMenu",selector:".ms-drawer-menu-button"},{translation:"searchBar",selector:"#map-search-bar"},{translation:"home",selector:"#home-button"},{translation:"burgerMenu",selector:"#mapstore-burger-menu"},{translation:"zoomInButton",selector:"#zoomin-btn",position:"top"},{translation:"zoomOutButton",selector:"#zoomout-btn",position:"top"},{translation:"fullscreen",selector:"#fullscreen-btn",position:"top"},{translation:"identifyButton",selector:"#navigationBar-container .glyphicon.glyphicon-option-horizontal",position:"top"}]},"./MapStore2/web/client/plugins/tutorial/preset/geostory_edit_tutorial.js":function(e,t){e.exports=[{translationHTML:"geostoryIntro",selector:"#intro-tutorial"},{translation:"geostoryViewHeader",selector:"#mapstore-navbar",position:"bottom"},{translationHTML:"geostoryEditSidebar",selector:".ms-geostory-builder",position:"right"},{translationHTML:"geostoryEditSidebarToolbar",selector:".ms-geostory-builder-header",position:"bottom"},{translationHTML:"geostoryEditSidebarSettings",selector:"#geostory-builder-settings-button",position:"right"},{translationHTML:"geostoryEditContainer",selector:".ms-geostory",position:"auto"},{translationHTML:"geostoryEditAddbar",selector:".ms-sections-container > section",position:"auto"},{translationHTML:"geostoryEditMediaEditor",selector:".ms-geostory .ms-sections-container .ms-content-toolbar > div > span > button[data-button=pencil]",position:"bottom"}]},"./MapStore2/web/client/plugins/tutorial/preset/geostory_view_tutorial.js":function(e,t){e.exports=[{translationHTML:"geostoryIntro",selector:"#intro-tutorial"},{translation:"geostoryViewHeader",selector:"#mapstore-navbar",position:"bottom"},{translation:"geostoryViewNavItems",selector:".ms-geostory-navigation-navigable-items",position:"bottom"},{translation:"geostoryViewNavTitle",selector:".ms-geostory-navigation-title",position:"bottom"},{translation:"geostoryViewNavLogo",selector:".ms-geostory-navigation-logo",position:"bottom"},{translation:"geostoryViewContent",selector:".ms-geostory",position:"auto"},{translation:"geostoryViewEditButton",selector:".ms-geostory-navigation-toolbar #edit-story",position:"bottom"}]},"./MapStore2/web/client/plugins/tutorial/preset/home_tutorial.js":function(e,t){e.exports=[{translation:"mapType",selector:"#mapstore-maptype",position:"top"},{translation:"mapsGrid",selector:"#mapstore-maps-grid",position:"top"},{translation:"examples",selector:"#mapstore-examples-applications",position:"top"}]},"./MapStore2/web/client/plugins/vectorstyler/index.js":function(e,t,n){var r=n("./node_modules/react-redux/es/index.js").connect,o=n("./MapStore2/web/client/actions/vectorstyler.js").setVectorStyleParameter,i=n("./MapStore2/web/client/selectors/vectorstyler.js").symbolselector,a=r(i,{setStyleParameter:o.bind(null,"symbol")})(n("./MapStore2/web/client/components/style/StylePolygon.jsx")),s=r(i,{setStyleParameter:o.bind(null,"symbol")})(n("./MapStore2/web/client/components/style/StylePoint.jsx")),l=r(i,{setStyleParameter:o.bind(null,"symbol")})(n("./MapStore2/web/client/components/style/StylePolyline.jsx")),c=n("./MapStore2/web/client/components/style/ScaleDenominator.jsx");e.exports={StylePolygon:a,StylePolyline:l,StylePoint:s,ScaleDenominator:c}},"./MapStore2/web/client/plugins/vectorstyler/vectorstyler.css":function(e,t,n){var r=n("./node_modules/css-loader/index.js!./node_modules/postcss-loader/src/index.js?!./MapStore2/web/client/plugins/vectorstyler/vectorstyler.css");"string"==typeof r&&(r=[[e.i,r,""]]);n("./node_modules/style-loader/addStyles.js")(r,{});r.locals&&(e.exports=r.locals)},"./MapStore2/web/client/plugins/widgetbuilder/BuilderHeader.jsx":function(e,t,n){e.exports=n("./MapStore2/web/client/components/widgets/builder/BuilderHeader.jsx")},"./MapStore2/web/client/plugins/widgetbuilder/Catalog.jsx":function(e,t,n){var r=n("./node_modules/react/index.js"),o=n("./MapStore2/web/client/components/I18N/Message.jsx"),i=n("./node_modules/recompose/es/Recompose.js").defaultProps;e.exports=i({title:r.createElement(o,{msgId:"widgets.builder.wizard.selectALayer"})})(n("./MapStore2/web/client/components/catalog/CompactCatalog.jsx"))},"./MapStore2/web/client/plugins/widgetbuilder/ChartBuilder.jsx":function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function o(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var i=n("./node_modules/react/index.js"),a=n("./node_modules/react-redux/es/index.js").connect,s=n("./node_modules/recompose/es/Recompose.js"),l=s.compose,c=s.renameProps,u=s.branch,p=s.renderComponent,d=n("./MapStore2/web/client/components/layout/BorderLayout.jsx"),f=n("./MapStore2/web/client/actions/widgets.js"),m=f.insertWidget,y=f.onEditorChange,b=f.setPage,g=f.openFilterEditor,h=f.changeEditorSetting,v=n("./MapStore2/web/client/components/widgets/enhancers/builderConfiguration.jsx"),S=n("./MapStore2/web/client/plugins/widgetbuilder/enhancers/chartLayerSelector.js"),w=n("./MapStore2/web/client/plugins/widgetbuilder/enhancers/connection/viewportBuilderConnect.js"),O=n("./MapStore2/web/client/plugins/widgetbuilder/enhancers/connection/viewportBuilderConnectMask.jsx"),j=n("./MapStore2/web/client/plugins/widgetbuilder/enhancers/withExitButton.js"),E=n("./MapStore2/web/client/plugins/widgetbuilder/enhancers/connection/withConnectButton.js"),x=n("./MapStore2/web/client/plugins/widgetbuilder/commons.js"),P=x.wizardStateToProps,C=x.wizardSelector,T=a(C,{setPage:b,setValid:function(e){return h("valid",e)},onEditorChange:y,insertWidget:m},P)(l(v,c({editorData:"data",onEditorChange:"onChange"}))(n("./MapStore2/web/client/components/widgets/builder/wizard/ChartWizard.jsx"))),M=n("./MapStore2/web/client/plugins/widgetbuilder/BuilderHeader.jsx"),_=l(a(C,{openFilterEditor:g,setPage:b,onChange:y,insertWidget:m},P),w,j(),E((function(e){return 1===e.step})))(n("./MapStore2/web/client/components/widgets/builder/wizard/chart/Toolbar.jsx")),A=l(a(C),O,u((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layer;return!t}),p(S(n("./MapStore2/web/client/plugins/widgetbuilder/LayerSelector.jsx")))));e.exports=A((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.enabled,n=e.onClose,a=void 0===n?function(){}:n,s=e.exitButton,l=e.editorData,c=e.toggleConnection,u=e.availableDependencies,p=void 0===u?[]:u,f=e.dependencies,m=o(e,["enabled","onClose","exitButton","editorData","toggleConnection","availableDependencies","dependencies"]);return i.createElement("div",{className:"mapstore-chart-advance-options"},i.createElement(d,{header:i.createElement(M,{onClose:a},i.createElement(_,{exitButton:s,editorData:l,toggleConnection:c,availableDependencies:p,onClose:a}))},t?i.createElement(T,r({dependencies:f},m)):null))}))},"./MapStore2/web/client/plugins/widgetbuilder/CounterBuilder.jsx":function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function o(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var i=n("./node_modules/react/index.js"),a=n("./node_modules/react-redux/es/index.js").connect,s=n("./node_modules/recompose/es/Recompose.js"),l=s.compose,c=s.renameProps,u=s.branch,p=s.renderComponent,d=n("./MapStore2/web/client/components/layout/BorderLayout.jsx"),f=n("./MapStore2/web/client/actions/widgets.js"),m=f.insertWidget,y=f.onEditorChange,b=f.setPage,g=f.openFilterEditor,h=f.changeEditorSetting,v=n("./MapStore2/web/client/components/widgets/enhancers/builderConfiguration.jsx"),S=n("./MapStore2/web/client/plugins/widgetbuilder/enhancers/chartLayerSelector.js"),w=n("./MapStore2/web/client/plugins/widgetbuilder/enhancers/connection/viewportBuilderConnect.js"),O=n("./MapStore2/web/client/plugins/widgetbuilder/enhancers/connection/viewportBuilderConnectMask.jsx"),j=n("./MapStore2/web/client/plugins/widgetbuilder/enhancers/withExitButton.js"),E=n("./MapStore2/web/client/plugins/widgetbuilder/enhancers/connection/withConnectButton.js"),x=n("./MapStore2/web/client/plugins/widgetbuilder/commons.js"),P=x.wizardStateToProps,C=x.wizardSelector,T=a(C,{setPage:b,setValid:function(e){return h("valid",e)},onEditorChange:y,insertWidget:m},P)(l(v,c({editorData:"data",onEditorChange:"onChange"}))(n("./MapStore2/web/client/components/widgets/builder/wizard/CounterWizard.jsx"))),M=n("./MapStore2/web/client/plugins/widgetbuilder/BuilderHeader.jsx"),_=l(a(C,{openFilterEditor:g,setPage:b,onChange:y,insertWidget:m},P),w,j(),E((function(e){return 0===e.step})))(n("./MapStore2/web/client/components/widgets/builder/wizard/counter/Toolbar.jsx")),A=l(a(C),O,u((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layer;return!t}),p(S(n("./MapStore2/web/client/plugins/widgetbuilder/LayerSelector.jsx")))));e.exports=A((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.enabled,n=e.onClose,a=void 0===n?function(){}:n,s=e.exitButton,l=e.editorData,c=e.toggleConnection,u=e.availableDependencies,p=void 0===u?[]:u,f=e.dependencies,m=o(e,["enabled","onClose","exitButton","editorData","toggleConnection","availableDependencies","dependencies"]);return i.createElement(d,{header:i.createElement(M,{onClose:a},i.createElement(_,{exitButton:s,editorData:l,toggleConnection:c,availableDependencies:p,onClose:a}))},t?i.createElement(T,r({formOptions:{showColorRamp:!1,showUom:!0,showGroupBy:!1,showLegend:!1},dependencies:f},m)):null)}))},"./MapStore2/web/client/plugins/widgetbuilder/LayerSelector.jsx":function(e,t,n){var r=n("./node_modules/react/index.js"),o=n("./node_modules/react-redux/es/index.js").connect,i=n("./node_modules/reselect/es/index.js").createSelector,a=n("./MapStore2/web/client/components/layout/BorderLayout.jsx"),s=n("./MapStore2/web/client/selectors/catalog.js").selectedCatalogSelector,l=n("./MapStore2/web/client/components/widgets/builder/wizard/common/layerselector/Toolbar.jsx"),c=n("./MapStore2/web/client/plugins/widgetbuilder/BuilderHeader.jsx"),u=n("./MapStore2/web/client/components/widgets/widget/InfoPopover.jsx"),p=n("./MapStore2/web/client/components/I18N/I18N.jsx"),d=p.Message,f=p.HTML,m=n("./node_modules/recompose/es/Recompose.js"),y=(0,m.compose)((0,m.branch)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.catalog;return!t}),o(i(s,(function(e){return{catalog:e}})))))(n("./MapStore2/web/client/plugins/widgetbuilder/Catalog.jsx"));e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onClose,n=void 0===t?function(){}:t,o=e.setSelected,i=void 0===o?function(){}:o,s=e.onLayerChoice,p=void 0===s?function(){}:s,m=e.stepButtons,b=e.selected,g=e.error,h=e.canProceed,v=e.layer,S=e.catalog,w=e.catalogServices;return r.createElement(a,{className:"bg-body layer-selector",header:r.createElement(c,{onClose:n},r.createElement(l,{stepButtons:m,canProceed:h,onProceed:function(){return p(v)}}),b&&!h&&g?r.createElement(u,{trigger:!1,glyph:"warning-sign",bsStyle:"warning",title:r.createElement(d,{msgId:"widgets.builder.errors.noWidgetsAvailableTitle"}),text:r.createElement(f,{msgId:"widgets.builder.errors.noWidgetsAvailableDescription"})}):null)},r.createElement(y,{services:w,selected:b,catalog:S,onRecordSelected:function(e){return i(e)}}))}},"./MapStore2/web/client/plugins/widgetbuilder/LegendBuilder.jsx":function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function o(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var i=n("./node_modules/react/index.js"),a=n("./node_modules/react-redux/es/index.js").connect,s=n("./node_modules/reselect/es/index.js").createSelector,l=n("./node_modules/lodash/lodash.js").get,c=n("./node_modules/recompose/es/Recompose.js"),u=c.compose,p=c.renameProps,d=c.mapPropsStream,f=c.withProps,m=n("./MapStore2/web/client/components/widgets/widget/InfoPopover.jsx"),y=n("./MapStore2/web/client/components/I18N/Message.jsx"),b=n("./MapStore2/web/client/components/layout/BorderLayout.jsx"),g=n("./MapStore2/web/client/actions/widgets.js"),h=g.insertWidget,v=g.onEditorChange,S=g.setPage,w=g.openFilterEditor,O=n("./MapStore2/web/client/plugins/widgetbuilder/enhancers/connection/legendBuilderConnect.js"),j=n("./MapStore2/web/client/plugins/widgetbuilder/enhancers/connection/viewportBuilderConnectMask.jsx"),E=n("./MapStore2/web/client/plugins/widgetbuilder/enhancers/withExitButton.js"),x=n("./MapStore2/web/client/plugins/widgetbuilder/enhancers/connection/withConnectButton.js"),P=n("./MapStore2/web/client/plugins/widgetbuilder/enhancers/connection/withMapConnect.js"),C=f((function(e){var t=e.availableDependencies,n=void 0===t?[]:t,r=e.editorData;return{valid:n.length>0&&r.mapSync}})),T=s(n("./MapStore2/web/client/selectors/locale.js").currentLocaleSelector,(function(e){return{currentLocale:e}})),M=n("./MapStore2/web/client/plugins/widgetbuilder/commons.js"),_=M.wizardStateToProps,A=M.wizardSelector,R=u(a(A,{setPage:S,onEditorChange:v,insertWidget:h},_),a(T),C,p({editorData:"data",onEditorChange:"onChange"}))(n("./MapStore2/web/client/components/widgets/builder/wizard/LegendWizard.jsx")),I=n("./MapStore2/web/client/plugins/widgetbuilder/BuilderHeader.jsx"),D=u(a(A,{openFilterEditor:w,setPage:S,onChange:v,insertWidget:h},_),O,C,a((function(){return{}}),{onLayerChoice:function(e){return v("layer",e)},onResetChange:v}),f((function(e){var t=e.onResetChange,n=void 0===t?function(){}:t;return{exitButton:{glyph:"arrow-left",tooltipId:"widgets.builder.wizard.backToWidgetTypeSelection",onClick:function(){return n("widgetType",void 0)}}}})),E((function(e){return 0===e.step})),x((function(e){return 0===e.step})))(n("./MapStore2/web/client/components/widgets/builder/wizard/legend/Toolbar.jsx")),k=u(a(A),j,O,P({layers:"layers",zoom:"zoom",viewport:"viewport"}),d((function(e){return e.merge(e.filter((function(e){var t=e.editorData;return!(void 0===t?{}:t).mapSync})).take(1).distinctUntilChanged().do((function(e){var t=e.toggleConnection;return(void 0===t?function(){}:t)(e.availableDependencies)})).ignoreElements())})));e.exports=k((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.enabled,n=e.onClose,a=void 0===n?function(){}:n,s=e.editorData,c=void 0===s?{}:s,u=e.exitButton,p=e.toggleConnection,d=e.availableDependencies,f=void 0===d?[]:d,g=e.dependencies,h=o(e,["enabled","onClose","editorData","exitButton","toggleConnection","availableDependencies","dependencies"]);return i.createElement(b,{header:i.createElement(I,{onClose:a},i.createElement(D,{editorData:c,exitButton:u,toggleConnection:p,availableDependencies:f,onClose:a}),0===l(c,"options.propertyName.length")?i.createElement(m,{trigger:!1,glyph:"exclamation-mark",bsStyle:"warning",text:i.createElement(y,{msgId:"widgets.builder.errors.checkAtLeastOneAttribute"})}):null)},t?i.createElement(R,r({availableDependencies:f,editorData:c,dependencies:g},h)):null)}))},"./MapStore2/web/client/plugins/widgetbuilder/MapBuilder.jsx":function(e,t,n){var r=n("./node_modules/react/index.js"),o=n("./node_modules/react-redux/es/index.js").connect,i=n("./MapStore2/web/client/actions/widgets.js").onEditorChange,a=n("./MapStore2/web/client/plugins/widgetbuilder/commons.js"),s=a.wizardSelector,l=a.wizardStateToProps,c=n("./MapStore2/web/client/plugins/widgetbuilder/enhancers/layerSelector.js"),u=n("./MapStore2/web/client/plugins/widgetbuilder/enhancers/manageLayers.js"),p=n("./MapStore2/web/client/plugins/widgetbuilder/enhancers/mapToolbar.js"),d=n("./MapStore2/web/client/plugins/widgetbuilder/enhancers/handleNodeEditing.js"),f=n("./MapStore2/web/client/plugins/widgetbuilder/enhancers/connection/mapBuilderConnectMask.jsx"),m=n("./MapStore2/web/client/components/layout/BorderLayout.jsx"),y=n("./MapStore2/web/client/plugins/widgetbuilder/BuilderHeader.jsx"),b=n("./node_modules/recompose/es/Recompose.js"),g=b.compose,h=b.branch,v=b.renderComponent,S=b.withState,w=b.withHandlers,O=b.withProps,j=n("./MapStore2/web/client/components/widgets/builder/wizard/map/enhancers/handleNodeSelection.js"),E=p(n("./MapStore2/web/client/components/widgets/builder/wizard/map/Toolbar.jsx")),x=n("./MapStore2/web/client/plugins/widgetbuilder/MapSelector.jsx"),P=g(o(s,{onResetChange:i}),h((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.editorData,n=void 0===t?{}:t;return!n.map}),v(x)),S("layerSelectorOpen","toggleLayerSelector",!1),h((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layerSelectorOpen,n=void 0!==t&&t;return n}),v(g(u,w({onLayerChoice:function(e){var t=e.toggleLayerSelector,n=void 0===t?function(){}:t,r=e.addLayer,o=void 0===r?function(){}:r;return function(e){o(e),n(!1)}}}),c)(n("./MapStore2/web/client/plugins/widgetbuilder/MapLayerSelector.jsx")))),O((function(e){var t=e.onResetChange,n=void 0===t?function(){}:t;return{exitButton:{glyph:"arrow-left",onClick:function(){n("map",void 0)}}}}))),C=o(s,{onChange:i},l)(n("./MapStore2/web/client/components/widgets/builder/wizard/MapWizard.jsx")),T=g(P,O((function(e){var t=e.editorData;return{map:(void 0===t?{}:t).map}})),f,j,d);e.exports=T((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.enabled,n=e.onClose,o=void 0===n?function(){}:n,i=e.toggleLayerSelector,a=void 0===i?function(){}:i,s=e.editorData,l=void 0===s?{}:s,c=e.editNode,u=e.setEditNode,p=e.closeNodeEditor,d=e.isLocalizedLayerStylesEnabled,f=e.env,b=e.selectedGroups,g=void 0===b?[]:b,h=e.exitButton,v=e.selectedLayers,S=void 0===v?[]:v,w=e.selectedNodes,O=e.onNodeSelect,j=void 0===O?function(){}:O,x=e.availableDependencies,P=void 0===x?[]:x,T=e.toggleConnection,M=void 0===T?function(){}:T;return r.createElement(m,{className:"map-selector",header:r.createElement(y,{onClose:o},r.createElement(E,{exitButton:h,editorData:l,availableDependencies:P,toggleConnection:M,selectedNodes:w,selectedLayers:S,selectedGroups:g,onNodeSelect:j,toggleLayerSelector:a}))},t?r.createElement(C,{setEditNode:u,editNode:c,closeNodeEditor:p,onNodeSelect:j,isLocalizedLayerStylesEnabled:d,env:f,selectedNodes:w}):null)}))},"./MapStore2/web/client/plugins/widgetbuilder/MapLayerSelector.jsx":function(e,t,n){var r=n("./node_modules/react/index.js"),o=n("./node_modules/react-redux/es/index.js").connect,i=n("./node_modules/reselect/es/index.js").createSelector,a=n("./MapStore2/web/client/components/layout/BorderLayout.jsx"),s=n("./MapStore2/web/client/selectors/catalog.js").selectedCatalogSelector,l=n("./MapStore2/web/client/components/misc/toolbar/Toolbar.jsx"),c=n("./MapStore2/web/client/plugins/widgetbuilder/BuilderHeader.jsx"),u=n("./MapStore2/web/client/components/widgets/widget/InfoPopover.jsx"),p=n("./MapStore2/web/client/components/I18N/I18N.jsx"),d=p.Message,f=p.HTML,m=n("./node_modules/recompose/es/Recompose.js"),y=(0,m.compose)((0,m.branch)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.catalog;return!t}),o(i(s,(function(e){return{catalog:e}})))))(n("./MapStore2/web/client/plugins/widgetbuilder/Catalog.jsx"));e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onClose,n=void 0===t?function(){}:t,o=e.setSelected,i=void 0===o?function(){}:o,s=e.onLayerChoice,p=void 0===s?function(){}:s,m=e.toggleLayerSelector,b=void 0===m?function(){}:m,g=e.selected,h=e.canProceed,v=e.layer,S=e.catalog,w=e.catalogServices;return r.createElement(a,{className:"bg-body layer-selector",header:r.createElement(c,{onClose:n},r.createElement(l,{btnDefaultProps:{className:"square-button-md",bsStyle:"primary",bsSize:"sm"},buttons:[{onClick:function(){return b(!1)},tooltipId:"close",glyph:"1-close"},{onClick:function(){return p(v)},disabled:!g||!h,tooltipId:"widgets.builder.wizard.useTheSelectedLayer",glyph:"plus"}]}),g&&!h?r.createElement(u,{glyph:"exclamation-mark",bsStyle:"warning",title:r.createElement(d,{msgId:"widgets.builder.errors.noWidgetsAvailableTitle"}),text:r.createElement(f,{msgId:"widgets.builder.errors.noWidgetsAvailableDescription"})}):null)},r.createElement(y,{services:w,selected:g,catalog:S,onRecordSelected:function(e){return i(e)}}))}},"./MapStore2/web/client/plugins/widgetbuilder/MapSelector.jsx":function(e,t,n){var r=n("./node_modules/recompose/es/Recompose.js"),o=r.compose,i=r.withProps,a=n("./node_modules/react-redux/es/index.js").connect,s=n("./MapStore2/web/client/actions/widgets.js").onEditorChange,l=n("./MapStore2/web/client/utils/LayersUtils.js").normalizeMap,c=n("./MapStore2/web/client/components/widgets/builder/wizard/map/MapSelector.jsx").default;e.exports=o(a((function(){return{}}),{onMapSelected:function(e){var t=e.map;return s("map",l(t))},onResetChange:s}),i((function(e){var t=e.onResetChange,n=void 0===t?function(){}:t;return{stepButtons:[{glyph:"arrow-left",tooltipId:"widgets.builder.wizard.backToWidgetTypeSelection",onClick:function(){n("map",void 0),n("widgetType",void 0)}}]}})))(c)},"./MapStore2/web/client/plugins/widgetbuilder/TableBuilder.jsx":function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function o(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var i=n("./node_modules/react/index.js"),a=n("./node_modules/react-redux/es/index.js").connect,s=n("./node_modules/lodash/lodash.js").get,l=n("./MapStore2/web/client/utils/ogc/WFS/base.js").isGeometryType,c=n("./node_modules/recompose/es/Recompose.js"),u=c.compose,p=c.renameProps,d=c.branch,f=c.renderComponent,m=c.mapPropsStream,y=n("./MapStore2/web/client/components/widgets/widget/InfoPopover.jsx"),b=n("./MapStore2/web/client/components/I18N/Message.jsx"),g=n("./MapStore2/web/client/components/layout/BorderLayout.jsx"),h=n("./MapStore2/web/client/actions/widgets.js"),v=h.insertWidget,S=h.onEditorChange,w=h.setPage,O=h.openFilterEditor,j=h.changeEditorSetting,E=n("./MapStore2/web/client/components/widgets/enhancers/builderConfiguration.jsx"),x=n("./MapStore2/web/client/plugins/widgetbuilder/enhancers/chartLayerSelector.js"),P=n("./MapStore2/web/client/plugins/widgetbuilder/enhancers/connection/viewportBuilderConnect.js"),C=n("./MapStore2/web/client/plugins/widgetbuilder/enhancers/connection/viewportBuilderConnectMask.jsx"),T=n("./MapStore2/web/client/plugins/widgetbuilder/enhancers/withExitButton.js"),M=n("./MapStore2/web/client/plugins/widgetbuilder/enhancers/connection/withConnectButton.js"),_=n("./MapStore2/web/client/plugins/widgetbuilder/commons.js"),A=_.wizardStateToProps,R=_.wizardSelector,I=a(R,{setPage:w,setValid:function(e){return j("valid",e)},onEditorChange:S,insertWidget:v},A)(u(E,p({editorData:"data",onEditorChange:"onChange"}),m((function(e){return e.merge(e.distinctUntilChanged((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.featureTypeProperties,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.featureTypeProperties;return t===r})).do((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.featureTypeProperties,n=void 0===t?[]:t,r=e.onChange,o=void 0===r?function(){}:r,i=e.data,a=void 0===i?{}:i;o&&n.length>0&&!s(a,"options.propertyName")&&o("options.propertyName",n.filter((function(e){return!l(e)})).map((function(e){return e.name})))})).ignoreElements())})))(n("./MapStore2/web/client/components/widgets/builder/wizard/TableWizard.jsx"))),D=n("./MapStore2/web/client/plugins/widgetbuilder/BuilderHeader.jsx"),k=u(a(R,{openFilterEditor:O,setPage:w,onChange:S,insertWidget:v},A),P,T(),M((function(e){return 0===e.step})))(n("./MapStore2/web/client/components/widgets/builder/wizard/table/Toolbar.jsx")),L=u(a(R),C,d((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layer;return!t}),f(x(n("./MapStore2/web/client/plugins/widgetbuilder/LayerSelector.jsx")))));e.exports=L((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.enabled,n=e.onClose,a=void 0===n?function(){}:n,l=e.editorData,c=void 0===l?{}:l,u=e.exitButton,p=e.toggleConnection,d=e.availableDependencies,f=void 0===d?[]:d,m=e.dependencies,h=o(e,["enabled","onClose","editorData","exitButton","toggleConnection","availableDependencies","dependencies"]);return i.createElement(g,{header:i.createElement(D,{onClose:a},i.createElement(k,{editorData:c,exitButton:u,toggleConnection:p,availableDependencies:f,onClose:a}),0===s(c,"options.propertyName.length")?i.createElement(y,{trigger:!1,glyph:"exclamation-mark",bsStyle:"warning",text:i.createElement(b,{msgId:"widgets.builder.errors.checkAtLeastOneAttribute"})}):null)},t?i.createElement(I,r({editorData:c,dependencies:m},h)):null)}))},"./MapStore2/web/client/plugins/widgetbuilder/TextBuilder.jsx":function(e,t,n){var r=n("./node_modules/react/index.js"),o=n("./node_modules/react-redux/es/index.js").connect,i=n("./node_modules/recompose/es/Recompose.js"),a=i.compose,s=i.withProps,l=n("./MapStore2/web/client/actions/widgets.js"),c=l.onEditorChange,u=l.insertWidget,p=l.setPage,d=n("./MapStore2/web/client/plugins/widgetbuilder/commons.js"),f=d.wizardSelector,m=d.wizardStateToProps,y=n("./MapStore2/web/client/components/layout/BorderLayout.jsx"),b=n("./MapStore2/web/client/plugins/widgetbuilder/enhancers/withExitButton.js"),g=n("./MapStore2/web/client/plugins/widgetbuilder/BuilderHeader.jsx"),h=a(o(f,{setPage:p,insertWidget:u,onResetChange:c},m),s((function(e){var t=e.onResetChange,n=void 0===t?function(){}:t;return{exitButton:{glyph:"arrow-left",tooltipId:"widgets.builder.wizard.backToWidgetTypeSelection",onClick:function(){return n("widgetType",void 0)}}}})),b())(n("./MapStore2/web/client/components/widgets/builder/wizard/text/Toolbar.jsx")),v=o(f,{onChange:c},m)(n("./MapStore2/web/client/components/widgets/builder/wizard/TextWizard.jsx"));e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.enabled,n=e.onClose,o=void 0===n?function(){}:n;return r.createElement(y,{header:r.createElement(g,{onClose:o},r.createElement(h,null))},t?r.createElement(v,null):null)}},"./MapStore2/web/client/plugins/widgetbuilder/WidgetTypeBuilder.jsx":function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function o(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var i=n("./node_modules/react/index.js"),a=n("./node_modules/react-redux/es/index.js").connect,s=n("./node_modules/reselect/es/index.js").createSelector,l=n("./node_modules/recompose/es/Recompose.js"),c=l.compose,u=l.branch,p=l.renderComponent,d=l.withProps,f=s(n("./MapStore2/web/client/selectors/widgets.js").getEditingWidget,(function(e){return{widgetType:e&&e.widgetType}})),m=n("./MapStore2/web/client/plugins/widgetbuilder/WidgetTypeSelector.jsx"),y={chart:n("./MapStore2/web/client/plugins/widgetbuilder/ChartBuilder.jsx"),text:n("./MapStore2/web/client/plugins/widgetbuilder/TextBuilder.jsx"),table:n("./MapStore2/web/client/plugins/widgetbuilder/TableBuilder.jsx"),map:n("./MapStore2/web/client/plugins/widgetbuilder/MapBuilder.jsx"),counter:n("./MapStore2/web/client/plugins/widgetbuilder/CounterBuilder.jsx"),legend:n("./MapStore2/web/client/plugins/widgetbuilder/LegendBuilder.jsx")};e.exports=c(a(f),d((function(e){var t=e.typeFilter,n=void 0===t?function(){return!0}:t,r=e.availableDependencies,o=void 0===r?[]:r;return{typeFilter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n(e)&&!("legend"===e.type&&0===o.length)}}})),u((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.widgetType;return!t}),p(m),(function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.widgetType,n=e.onClose,a=void 0===n?function(){}:n,s=o(e,["widgetType","onClose"]),l=y[t];return i.createElement(l,r({},s,{onClose:a,widgetType:t}))}})))()},"./MapStore2/web/client/plugins/widgetbuilder/WidgetTypeSelector.jsx":function(e,t,n){var r=n("./node_modules/react/index.js"),o=n("./MapStore2/web/client/components/I18N/Message.jsx"),i=n("./MapStore2/web/client/actions/widgets.js").onEditorChange,a=n("./node_modules/react-redux/es/index.js").connect,s=n("./MapStore2/web/client/components/layout/BorderLayout.jsx"),l=n("./MapStore2/web/client/plugins/widgetbuilder/BuilderHeader.jsx"),c=a((function(){return{}}),{onSelect:function(e){return i("widgetType",e)}})(n("./MapStore2/web/client/components/widgets/builder/WidgetTypeSelector.jsx"));e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.enabled,n=e.onClose,i=void 0===n?function(){}:n,a=e.typeFilter;return r.createElement(s,{className:"bg-body",header:r.createElement(l,{onClose:i},r.createElement(o,{msgId:"widgets.selectWidgetType"}))},t?r.createElement(c,{typeFilter:a}):null)}},"./MapStore2/web/client/plugins/widgetbuilder/commons.js":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n("./node_modules/reselect/es/index.js").createSelector,s=n("./node_modules/lodash/lodash.js").isNil,l=n("./MapStore2/web/client/selectors/widgets.js"),c=l.getEditingWidget,u=l.dependenciesSelector,p=l.getEditorSettings,d=l.getWidgetLayer,f=l.getFloatingWidgets,m=l.availableDependenciesForEditingWidgetSelector,y=n("./MapStore2/web/client/selectors/localizedLayerStyles.js"),b=y.isLocalizedLayerStylesEnabledDashboardsSelector,g=y.localizedLayerStylesEnvSelector,h=n("./MapStore2/web/client/selectors/locale.js").currentLocaleLanguageSelector,v=n("./MapStore2/web/client/selectors/dashboard.js").showConnectionsSelector,S=a(d,c,p,f,(function(e,t,n,r){return{layer:t&&t.layer||e,editorData:t,settings:n,widgets:r}})),w=a(c,v,u,m,(function(e,t,n,r){return o({layer:e.layer,showConnections:t,dependencies:n},r)})),O=a(b,h,g,(function(e,t,n){return{isLocalizedLayerStylesEnabled:!s(e),language:t,env:n}}));e.exports={getWidgetLayer:d,availableDependenciesForEditingWidgetSelector:m,dashboardSelector:w,dashboardsLocalizedSelector:O,wizardStateToProps:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return o(o(o(o({},n),e),t),{},{step:e&&e.settings&&e.settings.step,valid:e&&e.settings&&e.settings.valid,onFinish:function(){return t.insertWidget&&t.insertWidget(o({layer:e.layer,url:e.layer&&e.layer.url},e.editorData||{}),n.target)}})},wizardSelector:S}},"./MapStore2/web/client/plugins/widgetbuilder/enhancers/chartLayerSelector.js":function(e,t,n){var r=n("./node_modules/react-redux/es/index.js").connect,o=n("./node_modules/recompose/es/Recompose.js"),i=o.compose,a=o.defaultProps,s=o.withProps,l=o.setDisplayName,c=n("./MapStore2/web/client/plugins/widgetbuilder/enhancers/layerSelector.js"),u=n("./MapStore2/web/client/actions/widgets.js").onEditorChange,p=n("./MapStore2/web/client/observables/widgets/canGenerateCharts.js");e.exports=i(l("ChartLayerSelector"),r((function(){return{}}),{onLayerChoice:function(e){return u("layer",e)},onResetChange:u}),a({layerValidationStream:function(e){return e.switchMap((function(e){return p(e)}))}}),s((function(e){var t=e.onResetChange,n=void 0===t?function(){}:t;return{stepButtons:[{glyph:"arrow-left",tooltipId:"widgets.builder.wizard.backToWidgetTypeSelection",onClick:function(){n("options",void 0),n("widgetType",void 0)}}]}})),c)},"./MapStore2/web/client/plugins/widgetbuilder/enhancers/connection/legendBuilderConnect.js":function(e,t,n){var r=n("./node_modules/recompose/es/Recompose.js"),o=r.withProps,i=r.compose;e.exports=i(o((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.availableDependencies,n=void 0===t?[]:t,r=e.editorData,o=void 0===r?{}:r;return{availableDependencies:n.filter((function(e){return!(o.id&&e.indexOf(o.id)>=0)}))}})),o((function(e){var t=e.editorData,n=void 0===t?{}:t,r=e.availableDependencies;return{canConnect:(void 0===r?[]:r).length>0,connected:!!n.mapSync}})))},"./MapStore2/web/client/plugins/widgetbuilder/enhancers/connection/mapBuilderConnect.js":function(e,t,n){var r=n("./node_modules/recompose/es/Recompose.js"),o=r.withProps,i=r.compose,a=n("./MapStore2/web/client/plugins/widgetbuilder/enhancers/connection/withMapConnect.js");e.exports=i(o((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.availableDependencies,n=void 0===t?[]:t,r=e.editorData,o=void 0===r?{}:r;return{availableDependencies:n.filter((function(e){return!(o.id&&e.indexOf(o.id)>=0)}))}})),o((function(e){var t=e.editorData;return{canConnect:!0,connected:!!(void 0===t?{}:t).mapSync}})),a({center:"center",zoom:"zoom",filter:"filter",quickFilters:"quickFilters",layer:"layer",options:"options",mapSync:"mapSync",dependenciesMap:"dependenciesMap"}))},"./MapStore2/web/client/plugins/widgetbuilder/enhancers/connection/mapBuilderConnectMask.jsx":function(e,t,n){var r=n("./MapStore2/web/client/selectors/widgets.js").isWidgetSelectionActive,o=n("./MapStore2/web/client/components/misc/enhancers/withMask.js"),i=n("./node_modules/react-redux/es/index.js").connect,a=n("./node_modules/reselect/es/index.js").createSelector,s=n("./node_modules/recompose/es/Recompose.js").compose,l=n("./node_modules/react/index.js"),c=n("./MapStore2/web/client/components/I18N/Message.jsx");e.exports=s(i(a(r,(function(e){return{widgetSelectionActive:e}}))),o((function(e){return e.widgetSelectionActive}),(function(){return l.createElement("div",{style:{margin:"auto"}},l.createElement(c,{msgId:"widgets.builder.wizard.selectMapToConnect"}))}),{alwaysWrap:!0}))},"./MapStore2/web/client/plugins/widgetbuilder/enhancers/connection/viewportBuilderConnect.js":function(e,t,n){var r=n("./node_modules/recompose/es/Recompose.js"),o=r.withProps,i=r.compose,a=n("./MapStore2/web/client/plugins/widgetbuilder/enhancers/connection/withMapConnect.js"),s=function(e,t,n){return"table"===t&&0===e.filter((function(e){return Object.keys(e).filter((function(t){return e[t]&&-1!==e[t].indexOf(n.id)})).length>0})).length};e.exports=i(o((function(e){var t=e.editorData,n=void 0===t?{}:t,r=e.widgets,o=(void 0===r?[]:r).filter((function(e){var t=e.mapSync,n=e.dependenciesMap;return t&&n})).map((function(e){return e.dependenciesMap}));return{canConnect:n.geomProp&&"table"!==n.widgetType||s(o,n.widgetType,n),connected:n.mapSync}})),a({viewport:"viewport",layers:"layers",filter:"filter",quickFilters:"quickFilters",layer:"layer",options:"options",mapSync:"mapSync",dependenciesMap:"dependenciesMap"}))},"./MapStore2/web/client/plugins/widgetbuilder/enhancers/connection/viewportBuilderConnectMask.jsx":function(e,t,n){var r=n("./MapStore2/web/client/selectors/widgets.js").isWidgetSelectionActive,o=n("./MapStore2/web/client/components/misc/enhancers/withMask.js"),i=n("./node_modules/react-redux/es/index.js").connect,a=n("./node_modules/reselect/es/index.js").createSelector,s=n("./node_modules/recompose/es/Recompose.js").compose,l=n("./node_modules/react/index.js"),c=n("./MapStore2/web/client/components/I18N/Message.jsx");e.exports=s(i(a(r,(function(e){return{widgetSelectionActive:e}}))),o((function(e){return e.widgetSelectionActive}),(function(){return l.createElement("div",{style:{margin:"auto"}},l.createElement(c,{msgId:"widgets.builder.wizard.selectMapToConnect"}))}),{alwaysWrap:!0}))},"./MapStore2/web/client/plugins/widgetbuilder/enhancers/connection/withConnectButton.js":function(e,t,n){function r(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var a=n("./node_modules/recompose/es/Recompose.js"),s=a.withProps,l=a.compose;e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return!0};return l(s((function(t){var n=t.disableMultiDependencySupport,o=t.stepButtons,a=void 0===o?[]:o,s=t.toggleConnection,l=void 0===s?function(){}:s,c=t.availableDependencies,u=void 0===c?[]:c,p=t.canConnect,d=t.connected,f=i(t,["disableMultiDependencySupport","stepButtons","toggleConnection","availableDependencies","canConnect","connected"]);return{stepButtons:[].concat(r(a),[{onClick:function(){return l(u)},disabled:n,visible:!!e(f)&&!!p&&u.length>0,bsStyle:d?"success":"primary",glyph:d?"plug":"unplug",tooltipId:d?"widgets.builder.wizard.clearConnection":1===u.length?"widgets.builder.wizard.connectToTheMap":"widgets.builder.wizard.connectToAMap"}])}})))}},"./MapStore2/web/client/plugins/widgetbuilder/enhancers/connection/withMapConnect.js":function(e,t,n){var r=n("./node_modules/recompose/es/Recompose.js").withHandlers;e.exports=function(e){return r({toggleConnection:function(t){var n=t.toggleConnection,r=void 0===n?function(){}:n,o=t.editorData,i=void 0===o?{}:o;return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return r(!i.mapSync,t,{dependenciesMap:i.dependenciesMap,mappings:e,sourceWidgetType:i.widgetType})}}})}},"./MapStore2/web/client/plugins/widgetbuilder/enhancers/handleMapRemoveLayer.js":function(e,t,n){var r=(0,n("./node_modules/recompose/es/Recompose.js").withHandlers)({onRemoveSelected:function(e){var t=e.selectedLayers,n=void 0===t?[]:t,r=e.removeLayersById,o=void 0===r?function(){}:r,i=e.onNodeSelect,a=void 0===i?function(){}:i;return function(){o(n),n.forEach((function(e){return a(e,"layer",!1)}))}}});e.exports=r},"./MapStore2/web/client/plugins/widgetbuilder/enhancers/handleMapZoomLayer.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/recompose/es/Recompose.js"),o=n("./node_modules/react-redux/es/index.js"),i=n("./node_modules/lodash/lodash.js"),a=n("./MapStore2/web/client/libs/proj4.js"),s=n.n(a),l=n("./MapStore2/web/client/utils/CoordinatesUtils.js"),c=n.n(l),u=n("./MapStore2/web/client/utils/MapUtils.js"),p=n.n(u),d=n("./MapStore2/web/client/actions/widgets.js");function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=Object(r.compose)(Object(o.connect)((function(){return{}}),{setMap:function(e){return Object(d.onEditorChange)("map",e)}}),Object(r.withHandlers)({isEpsgSupported:function(e){var t=e.editorData,n=void 0===t?{}:t,r=e.selectedNodes,o=void 0===r?[]:r;return function(){var e=n.map.layers,t=o.map((function(t){return e.find((function(e){return e.id===t}))})).filter((function(e){return e})).filter((function(e){return e.bbox})).map((function(e){return e.bbox})),r=t.length>0?t.reduce((function(e,t){return e.crs===t.crs?e:{crs:"differentCRS"}})):{crs:"differentCRS"},a=!!Object(i.head)(t)&&"differentCRS"!==r.crs&&r.crs;return a&&s.a.defs(a)}},zoomTo:function(e){var t=e.editorData,n=void 0===t?{}:t,r=e.setMap,o=void 0===r?function(){}:r;return function(e){var t=n.map,r=n.map.layers,a=e.map((function(e){return r.find((function(t){return t.id===e}))})).filter((function(e){return e})).filter((function(e){return e.bbox})).map((function(e){return e.bbox})),s=a.length>1?a.reduce((function(e,t){return{bounds:{maxx:e.bounds.maxx>t.bounds.maxx?e.bounds.maxx:t.bounds.maxx,maxy:e.bounds.maxy>t.bounds.maxy?e.bounds.maxy:t.bounds.maxy,minx:e.bounds.minx<t.bounds.minx?e.bounds.minx:t.bounds.minx,miny:e.bounds.miny<t.bounds.miny?e.bounds.miny:t.bounds.miny},crs:t.crs}}),a[0]):a[0],l=0,u=function(e){if(Object(i.isArray)(e))return e.map((function(e){return"string"==typeof e||e instanceof String?Number(e):e}));if(Object(i.isObject)(e)){var t=Object(i.mapValues)(e,(function(e){return"string"==typeof e||e instanceof String?Number(e):e}));return[t.minx,t.miny,t.maxx,t.maxy]}return null}(s.bounds),d=c.a.reprojectBbox(u,s.crs,t.bbox&&t.bbox.crs||"EPSG:4326");if(d){var f=c.a.reproject(p.a.getCenterForExtent(u,s.crs),s.crs,"EPSG:4326");if("EPSG:4326"===s.crs&&u&&u[0]<=-180&&u[1]<=-90&&u[2]>=180&&u[3]>=90)l=1;else{var y=c.a.reprojectBbox(u,s.crs,t.projection||"EPSG:4326");l=p.a.getZoomForExtent(y,t.size,0,21,null)}var b={minx:d[0],miny:d[1],maxx:d[2],maxy:d[3]},g=m(m({},t.bbox),{},{bounds:b});o(m(m({},n.map),{},{center:f,zoom:l,bbox:g,mapStateSource:"tool"}))}}}}),Object(r.withProps)((function(e){var t=e.isEpsgSupported;return{epsgSupported:(void 0===t?function(){}:t)()}})));t.default=b},"./MapStore2/web/client/plugins/widgetbuilder/enhancers/handleNodeEditing.js":function(e,t,n){var r=n("./node_modules/react-redux/es/index.js").connect,o=n("./node_modules/reselect/es/index.js").createSelector,i=n("./MapStore2/web/client/actions/widgets.js").changeEditorSetting,a=n("./MapStore2/web/client/selectors/widgets.js").getEditorSettings;e.exports=r(o(a,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.editNode;return{editNode:t}})),{setEditNode:function(e){return i("editNode",e)},closeNodeEditor:function(){return i("editNode",void 0)}})},"./MapStore2/web/client/plugins/widgetbuilder/enhancers/layerSelector.js":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n("./node_modules/rxjs/Rx.js"),s=n("./node_modules/recompose/es/Recompose.js"),l=s.compose,c=s.withState,u=s.mapPropsStream,p=n("./MapStore2/web/client/observables/wms.js").addSearch,d=n("./MapStore2/web/client/utils/CatalogUtils.js").recordToLayer;e.exports=l(c("selected","setSelected",null),c("layer","setLayer",null),u((function(e){return e.distinctUntilKeyChanged("selected").filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.selected;return t})).switchMap((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.selected,n=e.layerValidationStream,r=void 0===n?function(e){return e}:n,o=e.setLayer,i=void 0===o?function(){}:o;return a.Observable.of(d(t)).let(r).switchMap((function(){return p(d(t))})).do((function(e){return i(e)})).mapTo({canProceed:!0}).catch((function(e){return a.Observable.of({error:e,canProceed:!1})}))})).startWith({}).combineLatest(e,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.canProceed,n=e.error,r=arguments.length>1?arguments[1]:void 0;return o({error:n,canProceed:t},r)}))})))},"./MapStore2/web/client/plugins/widgetbuilder/enhancers/manageLayers.js":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var l=n("./node_modules/recompose/es/Recompose.js"),c=l.compose,u=l.withProps,p=l.withHandlers,d=n("./node_modules/react-redux/es/index.js").connect,f=n("./node_modules/lodash/lodash.js"),m=f.castArray,y=f.find,b=n("./MapStore2/web/client/utils/LayersUtils.js").normalizeLayer,g=n("./MapStore2/web/client/actions/widgets.js").onEditorChange;e.exports=c(u((function(e){var t=e.editorData,n=void 0===t?{}:t;return{layers:n.map&&n.map.layers}})),d((function(){return{}}),{setLayers:function(e){return g("map.layers",e)}}),p({addLayer:function(e){var t=e.layers,n=void 0===t?[]:t,r=e.setLayers,i=void 0===r?function(){}:r,s=e.catalog;return function(e){return s.localizedLayerStyles?i([].concat(a(n),[b(o(o({},e),{},{localizedLayerStyles:s.localizedLayerStyles}))])):i([].concat(a(n),[b(e)]))}},removeLayersById:function(e){var t=e.layers,n=void 0===t?[]:t,r=e.setLayers,o=void 0===r?function(){}:r;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return o(n.filter((function(t){return!y(m(e),(function(e){return e===t.id}))})))}}}))},"./MapStore2/web/client/plugins/widgetbuilder/enhancers/mapToolbar.js":function(e,t,n){var r=n("./node_modules/recompose/es/Recompose.js"),o=r.compose,i=r.branch,a=r.withProps,s=n("./node_modules/react-redux/es/index.js").connect,l=n("./MapStore2/web/client/actions/widgets.js"),c=l.insertWidget,u=l.setPage,p=l.onEditorChange,d=n("./MapStore2/web/client/plugins/widgetbuilder/enhancers/manageLayers.js"),f=n("./MapStore2/web/client/plugins/widgetbuilder/enhancers/handleNodeEditing.js"),m=n("./MapStore2/web/client/plugins/widgetbuilder/enhancers/handleMapRemoveLayer.js"),y=n("./MapStore2/web/client/plugins/widgetbuilder/enhancers/handleMapZoomLayer.js").default,b=n("./MapStore2/web/client/plugins/widgetbuilder/commons.js"),g=b.wizardSelector,h=b.wizardStateToProps,v=n("./MapStore2/web/client/plugins/widgetbuilder/enhancers/connection/mapBuilderConnect.js"),S=n("./MapStore2/web/client/plugins/widgetbuilder/enhancers/connection/withConnectButton.js"),w=n("./MapStore2/web/client/plugins/widgetbuilder/enhancers/withExitButton.js");e.exports=o(s(g,{setPage:u,onChange:p,insertWidget:c},h),d,f,m,y,i((function(e){return!!e.editNode}),a((function(e){var t=e.selectedNodes,n=void 0===t?[]:t,r=e.setEditNode,o=void 0===r?function(){}:r;return{buttons:[{visible:1===n.length,tooltipId:"close",glyph:"1-close",onClick:function(){return o(!1)}}]}})),a((function(e){var t=e.selectedNodes,n=void 0===t?[]:t,r=e.epsgSupported,o=void 0!==r&&r,i=e.onRemoveSelected,a=void 0===i?function(){}:i,s=e.setEditNode,l=void 0===s?function(){}:s,c=e.zoomTo,u=void 0===c?function(){}:c;return{tocButtons:[{visible:n.length>0,glyph:"zoom-to",tooltipId:1===n.length?"toc.toolZoomToLayerTooltip":"toc.toolZoomToLayersTooltip",disabled:!o,onClick:o?function(){return u(n)}:function(){}},{visible:1===n.length,glyph:"wrench",tooltipId:"toc.toolLayerSettingsTooltip",onClick:function(){return l(n[0])}},{onClick:function(){return a()},visible:n.length>0,glyph:"trash",tooltipId:"toc.toolTrashLayerTooltip"}]}}))),v,w(void 0,{tooltipId:"widgets.builder.wizard.backToMapSelection"}),S((function(e){return 0===e.step})))},"./MapStore2/web/client/plugins/widgetbuilder/enhancers/withExitButton.js":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var c=n("./node_modules/recompose/es/Recompose.js").withProps;e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return 0===e.step},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return c((function(n){var r=n.stepButtons,i=void 0===r?[]:r,s=n.exitButton,c=l(n,["stepButtons","exitButton"]);return{stepButtons:[o(o({},s),{},{visible:e(o({stepButtons:i,exitButton:s},c))},t)].concat(a(i))}}))}},"./MapStore2/web/client/plugins/widgetbuilder/enhancers/withMapExitButton.js":function(e,t,n){var r=n("./node_modules/recompose/es/Recompose.js"),o=r.compose,i=r.withProps,a=r.withHandlers,s=n("./node_modules/react-redux/es/index.js").connect,l=n("./MapStore2/web/client/actions/controls.js").setControlProperty,c=n("./MapStore2/web/client/actions/featuregrid.js").openFeatureGrid,u=n("./MapStore2/web/client/actions/widgets.js").onEditorChange,p=n("./MapStore2/web/client/selectors/widgets.js").returnToFeatureGridSelector;e.exports=o(s((function(e){return{returnToFeatureGrid:p(e)}}),{backToWidgetList:function(){return u("widgetType",void 0)},closeWidgetBuilder:function(){return l("widgetBuilder","enabled",!1,!1)},openFeatureGridTable:function(){return c()}}),a({backFromWizard:function(e){var t=e.backToWidgetList,n=void 0===t?function(){}:t,r=e.closeWidgetBuilder,o=void 0===r?function(){}:r,i=e.openFeatureGridTable,a=void 0===i?function(){}:i,s=e.returnToFeatureGrid;return function(){s?(o(),a()):n()}}}),i((function(e){var t=e.returnToFeatureGrid,n=e.backFromWizard;return{exitButton:{onClick:void 0===n?function(){}:n,glyph:"arrow-left",tooltipId:t?"widgets.builder.wizard.backToFeatureGrid":"widgets.builder.wizard.backToWidgetTypeSelection"}}})))},"./MapStore2/web/client/plugins/widgets/WidgetsBar.jsx":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n("./node_modules/recompose/es/Recompose.js"),s=a.compose,l=a.defaultProps,c=a.withProps,u=n("./node_modules/reselect/es/index.js").createSelector,p=n("./node_modules/react-redux/es/index.js").connect,d=n("./MapStore2/web/client/plugins/widgets/widgetsPermission.js").filterHiddenWidgets,f=n("./MapStore2/web/client/actions/widgets.js").toggleCollapse,m=n("./MapStore2/web/client/selectors/widgetsTray.js").trayWidgets;e.exports=s(p(u(m,(function(e){return{widgets:e}})),{onClick:f}),l({btnGroupProps:{className:"widgets-toolbar",style:{marginLeft:2,marginRight:2}}}),d,c((function(e){var t=e.btnGroupProps,n=void 0===t?{}:t,r=e.btnDefaultProps,i=void 0===r?{}:r;return{btnGroupProps:o({bsSize:"xsmall"},n),btnDefaultProps:o({bsSize:"xsmall"},i||{})}})))(n("./MapStore2/web/client/components/widgets/view/WidgetsBar.jsx"))},"./MapStore2/web/client/plugins/widgets/WidgetsTray.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=n("./node_modules/react/index.js"),m=n("./node_modules/prop-types/index.js"),y=n("./node_modules/react-redux/es/index.js").connect,b=n("./node_modules/recompose/es/Recompose.js"),g=b.compose,h=b.withProps,v=b.withState,S=b.lifecycle,w=b.mapPropsStream,O=n("./node_modules/reselect/es/index.js").createSelector,j=n("./MapStore2/web/client/components/misc/enhancers/tooltip.jsx"),E=n("./node_modules/react-bootstrap/es/index.js"),x=E.Glyphicon,P=j(E.Button),C=n("./MapStore2/web/client/selectors/widgets.js").getVisibleFloatingWidgets,T=n("./MapStore2/web/client/actions/widgets.js"),M=T.toggleCollapseAll,_=T.toggleTray,A=n("./MapStore2/web/client/selectors/widgetsTray.js").trayWidgets,R=n("./MapStore2/web/client/plugins/widgets/widgetsPermission.js").filterHiddenWidgets,I=n("./MapStore2/web/client/components/layout/BorderLayout.jsx"),D=n("./MapStore2/web/client/plugins/widgets/WidgetsBar.jsx"),k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.expanded,n=e.onClick,r=void 0===n?function(){}:n;return f.createElement(P,{tooltipId:t?"widgets.tray.collapseTray":"widgets.tray.expandTray",bsSize:"xsmall",bsStyle:"default",style:{borderColor:"transparent"},onClick:r},f.createElement(x,{glyph:t?"chevron-right":"chevron-left"}))},L=g(y(O(C,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{widgets:e}})),{onClick:function(){return M()}}),R,h((function(e){var t=e.widgets;return{shouldExpand:0===(void 0===t?[]:t).length}})))((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onClick,n=void 0===t?function(){}:t,r=e.shouldExpand,o=void 0!==r&&r;return f.createElement(P,{tooltipId:o?"widgets.tray.expandAll":"widgets.tray.collapseAll",bsStyle:o?"primary":"success active",bsSize:"xsmall",onClick:n},f.createElement(x,{glyph:"list"}))})),N=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(u,e);var t,n,r,i=c(u);function u(){return a(this,u),i.apply(this,arguments)}return t=u,(n=[{key:"render",value:function(){var e=this;return this.props.enabled?f.createElement("div",{className:"widgets-tray",style:{marginBottom:32,marginRight:80,bottom:0,right:0,position:"absolute"}},f.createElement(I,{columns:[f.createElement(k,{key:"collapse-tray",toolsOptions:this.props.toolsOptions,expanded:this.props.expanded,onClick:function(){return e.props.setExpanded(!e.props.expanded)}}),f.createElement(L,{key:"collapse-all",toolsOptions:this.props.toolsOptions})].concat(o(this.props.items.map((function(e){return e.tool}))||[]))},this.props.expanded?f.createElement(D,{toolsOptions:this.props.toolsOptions}):null)):null}}])&&s(t.prototype,n),r&&s(t,r),u}(f.Component);d(N,"propTypes",{enabled:m.bool,toolsOptions:m.object,items:m.array,expanded:m.bool,setExpanded:m.func}),d(N,"defaultProps",{enabled:!0,items:[],expanded:!1,setExpanded:function(){}}),e.exports=g(v("expanded","setExpanded",!1),y(O(A,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{widgets:e}})),{toggleTray:_}),R,h((function(e){var t=e.widgets,n=void 0===t?[]:t;return{hasCollapsedWidgets:n.filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.collapsed;return t})).length>0,hasTrayWidgets:n.length>0}})),S({componentDidMount:function(){this.props.toggleTray&&this.props.toggleTray(!0)},componentWillUnmount:function(){this.props.toggleTray&&this.props.toggleTray(!1)}}),w((function(e){return e.merge(e.distinctUntilKeyChanged("hasCollapsedWidgets").do((function(e){var t=e.setExpanded;return(void 0===t?function(){}:t)(e.hasCollapsedWidgets)})).ignoreElements())})),h((function(e){var t=e.enabled,n=e.hasTrayWidgets;return{enabled:t&&n}})))(N)},"./MapStore2/web/client/plugins/widgets/autoDisableWidgets.js":function(e,t,n){var r=n("./node_modules/reselect/es/index.js").createSelector,o=n("./node_modules/react-redux/es/index.js").connect,i=n("./MapStore2/web/client/selectors/maplayout.js"),a=o(r(i.rightPanelOpenSelector,i.bottomPanelOpenSelector,n("./MapStore2/web/client/selectors/maptype.js").isCesium,(function(e,t,n){return{enabled:!e&&!t&&!n}})));e.exports=a},"./MapStore2/web/client/plugins/widgets/editOptions.js":function(e,t,n){var r=n("./node_modules/recompose/es/Recompose.js").compose,o=n("./node_modules/react-redux/es/index.js").connect,i=n("./node_modules/reselect/es/index.js").createSelector,a=n("./MapStore2/web/client/selectors/map.js"),s=a.mapInfoSelector,l=a.mapIdSelector,c=n("./MapStore2/web/client/selectors/security.js").userSelector,u=n("./MapStore2/web/client/components/misc/enhancers/security/accessRuleParser.jsx");e.exports=function(){return r(o(i(l,s,c,(function(e,t,n){return{accessInfo:{mapId:e,mapInfo:t,user:n}}}))),u.apply(void 0,arguments))}},"./MapStore2/web/client/plugins/widgets/getWidgetFilterRenderers.js":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n("./node_modules/recompose/es/Recompose.js"),s=a.compose,l=a.withPropsOnChange,c=a.withProps,u=a.mapPropsStream,p=n("./node_modules/lodash/lodash.js").find,d=n("./MapStore2/web/client/utils/FeatureGridUtils.js").getAttributeFields,f=n("./MapStore2/web/client/components/data/featuregrid/filterRenderers/index.js").getFilterRenderer,m=s(u((function(e){return e.combineLatest(e.pluck("quickFilterStream$").distinctUntilChanged().switchMap((function(e){return e})).startWith(void 0),(function(e,t){var n=t&&e.options&&p(e.options.propertyName,(function(t){return t===e.attributeName}))&&t[e.attributeName]||{},r=n&&(n.rawValue||n.value);return o(o({},e),{},{value:r})}))}))),y=function(e){var t=e.options,n=e.localType,r=e.attributeName,o=e.quickFilterStream$;return s(c({quickFilterStream$:o,attributeName:r,options:t}),m)(f(n,{name:r}))},b=s(u((function(e){return e.map((function(t){return o(o({},t),{},{quickFilterStream$:e.pluck("quickFilters").distinctUntilChanged()})}))}))),g=s(b,l(["describeFeatureType","options"],(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.describeFeatureType,n=e.options,r=e.quickFilterStream$;return t?{filterRenderers:d(t).reduce((function(e,t){var a=t.localType,s=t.name,l=y({options:n,localType:a,attributeName:s,quickFilterStream$:r});return o(o({},e),{},i({},s,l))}),{})}:{}})));e.exports={getWidgetFilterRenderers:g}},"./MapStore2/web/client/plugins/widgets/widgetsPermission.js":function(e,t,n){var r=n("./node_modules/recompose/es/Recompose.js"),o=r.compose,i=r.withProps,a=r.defaultProps,s=n("./MapStore2/web/client/plugins/widgets/editOptions.js");e.exports={filterHiddenWidgets:o(a({toolsOptions:{seeHidden:"user.role===ADMIN"}}),s("toolsOptions",{asObject:!0}),i((function(e){var t=e.widgets,n=e.toolsOptions;return{widgets:(void 0===n?{seeHidden:!1}:n).seeHidden?t:t.filter((function(e){return!e.hide}))}})))}},"./MapStore2/web/client/reducers/catalog.js":function(e,t,n){function r(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=n("./MapStore2/web/client/actions/catalog.js"),l=s.RECORD_LIST_LOADED,c=s.RECORD_LIST_LOAD_ERROR,u=s.CHANGE_CATALOG_FORMAT,p=s.ADD_LAYER_ERROR,d=s.RESET_CATALOG,f=s.CHANGE_SELECTED_SERVICE,m=s.CHANGE_CATALOG_MODE,y=s.CHANGE_TITLE,b=s.CHANGE_TEXT,g=s.CHANGE_SERVICE_PROPERTY,h=s.CHANGE_TYPE,v=s.CHANGE_URL,S=s.CHANGE_SERVICE_FORMAT,w=s.FOCUS_SERVICES_LIST,O=s.ADD_CATALOG_SERVICE,j=s.DELETE_CATALOG_SERVICE,E=s.SAVING_SERVICE,x=s.CHANGE_METADATA_TEMPLATE,P=s.SET_LOADING,C=s.TOGGLE_THUMBNAIL,T=s.TOGGLE_TEMPLATE,M=s.TOGGLE_ADVANCED_SETTINGS,_=n("./MapStore2/web/client/actions/config.js").MAP_CONFIG_LOADED,A=n("./MapStore2/web/client/utils/ImmutableUtils.js").set,R=n("./node_modules/lodash/lodash.js").isNil,I=n("./node_modules/object-assign/index.js"),D=n("./node_modules/uuid/index.js"),k={url:"",type:"wms",title:"",isNew:!0,autoload:!1,showAdvancedSettings:!1,showTemplate:!1,hideThumbnail:!1,metadataTemplate:"<p>${description}</p>"};e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{default:{services:{},selectedService:"",newService:{}},delayAutoSearch:1e3,loading:!1,pageSize:4,services:{},selectedService:"",newService:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return i(i({},e),{},{saving:t.status});case l:return I({},e,{result:t.result,searchOptions:t.searchOptions,loadingError:null,layerError:null,loading:!1});case d:return I({},e,{result:null,loadingError:null,searchOptions:null});case c:return I({},e,{result:null,searchOptions:null,loadingError:t.error,loading:!1,layerError:null});case u:return I({},e,{result:null,loadingError:null,format:t.format,layerError:null});case p:return I({},e,{layerError:t.error});case m:return I({},e,{newService:t.isNew?k:I({},e.services&&e.services[e.selectedService||""]||{},{oldService:e.selectedService||""}),mode:t.mode,result:null,loadingError:null,layerError:null});case _:return e&&!R(e.default)?t.config&&!R(t.config.catalogServices)?I({},e,{services:t.config.catalogServices.services,selectedService:t.config.catalogServices.selectedService}):I({},e,{services:e.default.services,selectedService:e.default.selectedService}):e;case w:return A("openCatalogServiceList",t.status,e);case b:return A("searchOptions.text",t.text,e);case g:return A('newService["'.concat(t.property,'"]'),t.value,e);case y:return A("newService.title",t.title,e);case v:return A("newService.url",t.url,e);case S:return A("newService.format",t.format,e);case h:var n=t.newType.toLowerCase(),o={};return"csw"!==n&&(o={showTemplate:!1,metadataTemplate:""}),I({},e,{newService:I({},e.newService,i({type:n},o))});case O:var s=t.service,L=s.isNew,N=r(s,["isNew"]),F=L?N.title+D():e.selectedService,U=I({},e.services,a({},F,N));return I({},e,{services:U,selectedService:F,mode:"view",result:null,loadingError:null,searchOptions:I({},e.searchOptions,{text:""}),layerError:null});case f:return t.service!==e.selectedService?I({},e,{selectedService:t.service,result:null,loadingError:null,layerError:null}):e;case j:var G,B="";return delete(G=I({},e.services))[t.service],Object.keys(G).length&&(B=G[Object.keys(G)[0]].title),I({},e,{services:G,selectedService:B,mode:"view",result:null,loadingError:null,layerError:null});case C:return A("newService.hideThumbnail",!e.newService.hideThumbnail,e);case P:return A("loading",t.loading,e);case x:return A("newService.metadataTemplate",t.metadataTemplate,e);case T:var z=A("newService.showTemplate",!e.newService.showTemplate,e);return z.newService.showTemplate&&(z=A("newService.metadataTemplate",z.newService.metadataTemplate||"<p>${description}</p>",z)),z;case M:return A("newService.showAdvancedSettings",!e.newService.showAdvancedSettings,e);default:return e}}},"./MapStore2/web/client/reducers/featuregrid.js":function(e,t,n){function r(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=n("./node_modules/object-assign/index.js"),c=n("./node_modules/lodash/lodash.js"),u=c.head,p=c.get,d=n("./MapStore2/web/client/actions/featuregrid.js"),f=d.SELECT_FEATURES,m=d.DESELECT_FEATURES,y=d.TOGGLE_FEATURES_SELECTION,b=d.CLEAR_SELECTION,g=d.SET_FEATURES,h=d.FEATURES_MODIFIED,v=d.CREATE_NEW_FEATURE,S=d.SAVING,w=d.SAVE_SUCCESS,O=d.SAVE_ERROR,j=d.CLEAR_CHANGES,E=d.CHANGE_PAGE,x=d.DOCK_SIZE_FEATURES,P=d.SET_LAYER,C=d.TOGGLE_TOOL,T=d.CUSTOMIZE_ATTRIBUTE,M=d.SET_SELECTION_OPTIONS,_=d.TOGGLE_MODE,A=d.MODES,R=d.GEOMETRY_CHANGED,I=d.HIDE_SYNC_POPOVER,D=d.TOGGLE_SHOW_AGAIN_FLAG,k=d.DELETE_GEOMETRY_FEATURE,L=d.START_DRAWING_FEATURE,N=d.SET_PERMISSION,F=d.DISABLE_TOOLBAR,U=d.OPEN_FEATURE_GRID,G=d.CLOSE_FEATURE_GRID,B=d.UPDATE_FILTER,z=d.INIT_PLUGIN,W=d.SIZE_CHANGE,V=d.STORE_ADVANCED_SEARCH_FILTER,H=d.GRID_QUERY_RESULT,q=d.LOAD_MORE_FEATURES,Y=d.SET_UP,Q=d.SET_TIME_SYNC,K=d.ENABLE_GEOMETRY_FILTER,Z=n("./MapStore2/web/client/actions/wfsquery.js"),X=Z.FEATURE_TYPE_LOADED,J=Z.QUERY_CREATE,$=n("./MapStore2/web/client/actions/draw.js").CHANGE_DRAWING_STATUS,ee=n("./node_modules/uuid/index.js"),te={advancedFilters:{},filters:{},editingAllowedRoles:["ADMIN"],enableColumnFilters:!0,showFilteredObject:!1,timeSync:!1,showTimeSync:!1,open:!1,canEdit:!1,focusOnEdit:!0,showAgain:!1,showPopoverSync:!localStorage||null===localStorage.getItem("showPopoverSync")||"true"===localStorage.getItem("showPopoverSync"),mode:A.VIEW,changes:[],pagination:{page:0,size:20},select:[],multiselect:!1,drawing:!1,newFeatures:[],features:[],dockSize:.35},ne=function(e,t){return t===e||void 0!==e.id&&null!==e.id&&e.id===t.id},re=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t.filter((function(t){return ne(e,t)})).length>0},oe=function(e,t,n,r){return e.map((function(e){return re(e,t)?function(e,t,n){return a(a({},e),{},n?{properties:a(a({},e.properties),t),geometry:n.geometry}:{properties:a(a({},e.properties),t)})}(e,n,r):e}))};e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case z:return l({},e,{showPopoverSync:!localStorage||null===localStorage.getItem("showPopoverSync")||"true"===localStorage.getItem("showPopoverSync"),editingAllowedRoles:t.options.editingAllowedRoles||e.editingAllowedRoles||["ADMIN"],virtualScroll:!!t.options.virtualScroll,maxStoredPages:t.options.maxStoredPages||5});case q:case E:return l({},e,{pagination:{page:void 0!==t.page?t.page:e.pagination.page,size:void 0!==t.size?t.size:e.pagination.size}});case f:var n=t.features.filter((function(e){return"empty_row"!==e.id}));return e.multiselect&&t.append?l({},e,{select:t.append?[].concat(r(e.select),r(n)):n}):n&&e.select&&e.select[0]&&n[0]&&1===e.select.length&&ne(n[0],e.select[0])?e:l({},e,{select:(n||[]).splice(0,1)});case y:var o=e.select.filter((function(e){return!re(e,t.features)})),i=t.features.filter((function(t){return!re(t,e.select)})),c=o.concat(i||[]);return l({},e,{select:c});case m:return l({},e,{select:e.select.filter((function(e){return!re(e,t.features)}))});case M:return l({},e,{multiselect:t.multiselect});case Y:return l({},e,t.options||{});case b:return l({},e,{select:[],changes:[]});case g:return l({},e,{features:t.features});case x:return l({},e,{dockSize:t.dockSize});case P:return l({},e,{selectedLayer:t.id});case C:return l({},e,{tools:a(a({},e.tools),{},s({},t.tool,void 0===t.value?!(e.tools&&e.tools[t.tool]):t.value))});case T:return l({},e,{attributes:a(a({},e.attributes),{},s({},t.name,a(a({},e.attributes&&e.attributes[t.name]||{}),{},s({},t.key,t.value||e.attributes&&e.attributes[t.name]&&!e.attributes[t.name][t.key]))))});case _:return l({},e,{showPopoverSync:localStorage&&null!==localStorage.getItem("showPopoverSync")?"true"===localStorage.getItem("showPopoverSync"):t.mode!==A.EDIT,tools:t.mode===A.EDIT?{}:e.tools,mode:t.mode,multiselect:t.mode===A.EDIT,drawing:!1});case h:var d=t.features.filter((function(e){return e._new}))||[];return l({},e,{newFeatures:d.length>0?oe(e.newFeatures,d,t.updated,null):e.newFeatures,changes:[].concat(r(e&&e.changes||[]),r(t.features.filter((function(e){return!e._new})).map((function(e){return{id:e.id,updated:t.updated}}))))});case S:return l({},e,{saving:!0,loading:!0});case w:return l({},e,{deleteConfirm:!1,saved:!0,saving:!1,drawing:!1,loading:!1});case j:return l({},e,{saved:!1,deleteConfirm:!1,drawing:!1,newFeatures:[],changes:[],select:[]});case v:var Z=ee.v1();return l({},e,{newFeatures:t.features.map((function(e){return a(a({},e),{},{_new:!0,id:Z,type:"Feature",geometry:null})})),select:t.features.map((function(e){return a(a({},e),{},{_new:!0,id:Z,type:"Feature",geometry:null})}))});case O:return l({},e,{deleteConfirm:!1,saving:!1,loading:!1,drawing:!1});case R:var ie=t.features.filter((function(e){return e._new}))||[];return l({},e,{newFeatures:ie.length>0?oe(e.newFeatures,ie,null,{geometry:a({},u(ie).geometry)}):e.newFeatures,changes:[].concat(r(e&&e.changes||[]),r(t.features.filter((function(e){return!e._new})).map((function(e){return{id:e.id,updated:{geometry:u(t.features).geometry}}})))),drawing:!1});case k:var ae=t.features.filter((function(e){return e._new}))||[];return l({},e,{newFeatures:ae.length>0?oe(e.newFeatures,ae,null,{geometry:null}):e.newFeatures,changes:[].concat(r(e&&e.changes||[]),r(t.features.filter((function(e){return!e._new})).map((function(e){return{id:e.id,updated:{geometry:null}}}))))});case X:return l({},e,{localType:p(t,"featureType.original.featureTypes[0].properties[1].localType")});case L:return l({},e,{drawing:!e.drawing});case U:return l({},e,{open:!0});case G:return l({},e,{open:!1,pagination:{page:0,size:e.pagination.size},mode:A.VIEW,tools:{},saved:!1,deleteConfirm:!1,drawing:!1,newFeatures:[],changes:[],select:[]});case F:return l({},e,{disableToolbar:t.disabled});case N:return l({},e,{canEdit:t.permission.canEdit});case $:return"clean"===t.status?l({},e,{drawing:!1}):e;case B:var se=t.update||{},le=se.attribute;return le?l({},e,{filters:a(a({},e.filters),{},s({},le,t.update))}):e;case J:return l({},e,{filters:{}});case W:var ce=t.dockProps&&t.dockProps.maxDockSize,ue=t.dockProps&&t.dockProps.minDockSize,pe=ce&&ue&&ue<=t.size&&ce>=t.size&&t.size||ce&&ce<t.size&&ce||ue&&ue>t.size&&ue||t.size;return l({},e,{dockSize:pe});case V:return l({},e,{advancedFilters:l({},e.advancedFilters,s({},e.selectedLayer,t.filterObj))});case H:return l({},e,{features:t.features||[],pages:t.pages||[]});case I:return l({},e,{showPopoverSync:!1});case D:return l({},e,{showAgain:!e.showAgain});case Q:return l({},e,{timeSync:t.value});case K:return l({},e,{geometryFilterEnabled:t.enable});default:return e}}},"./MapStore2/web/client/reducers/floatinglegend.js":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n("./MapStore2/web/client/actions/floatinglegend.js"),s=a.RESIZE_LEGEND,l=a.EXPAND_LEGEND,c=n("./MapStore2/web/client/utils/ImmutableUtils.js").set;e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s:return c("size",{width:t.size&&t.size.width,height:t.size&&t.size.height},e);case l:return o(o({},e),{},{expanded:t.expanded});default:return e}}},"./MapStore2/web/client/reducers/layerFilter.js":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n("./MapStore2/web/client/actions/layerFilter.js"),s=a.APPLIED_FILTER,l=a.STORE_CURRENT_APPLIED_FILTER,c=a.INIT_LAYER_FILTER,u=a.DISCARD_CURRENT_FILTER,p=n("./MapStore2/web/client/actions/queryform.js").QUERY_FORM_RESET,d={};e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c:return o(o({},d),{},{persisted:t.filter,applied:t.filter});case u:return o(o({},e),{},{applied:e.persisted});case s:return o(o({},e),{},{applied:t.filter});case l:return o(o({},e),{},{persisted:e.applied});case p:return o(o({},e),{},{applied:void 0});default:return e}}},"./MapStore2/web/client/reducers/locate.js":function(e,t,n){var r=n("./MapStore2/web/client/actions/locate.js"),o=r.CHANGE_LOCATE_STATE,i=r.LOCATE_ERROR,a=n("./node_modules/object-assign/index.js");e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{state:"DISABLED"},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o:return a({},e,{state:t.state});case i:return a({},e,{error:t.error});default:return e}}},"./MapStore2/web/client/reducers/mapPopups.js":function(e,t,n){"use strict";n.r(t);var r=n("./MapStore2/web/client/actions/mapPopups.js"),o=n("./MapStore2/web/client/utils/ImmutableUtils.js");function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l={popups:[]};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.ADD_MAP_POPUP:var n=t.popup,i=t.single;return a(a({},e),{},{popups:i&&[n]||(e.popups||[]).concat([n])});case r.REMOVE_MAP_POPUP:var s=t.id;return Object(o.arrayDelete)("popups",{id:s},e);case r.CLEAN_MAP_POPUPS:return a(a({},e),{},{popups:[]});default:return e}}},"./MapStore2/web/client/reducers/mapimport.js":function(e,t,n){function r(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var i=n("./MapStore2/web/client/actions/mapimport.js"),a=i.SET_LAYERS,s=i.ON_ERROR,l=i.ON_SELECT_LAYER,c=i.LOADING,u=i.ON_LAYER_ADDED,p=i.UPDATE_BBOX,d=i.ON_SUCCESS,f=i.ON_SHAPE_ERROR,m=i.ON_LAYER_SKIPPED,y=n("./node_modules/lodash/lodash.js").uniqWith,b=n("./MapStore2/web/client/actions/controls.js").TOGGLE_CONTROL,g=n("./node_modules/object-assign/index.js"),h={layers:null,errors:null,loading:!1,selected:null,bbox:[190,190,-190,-190]};e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return g({},e,{error:t.message,success:null});case a:var n=t.layers&&t.layers[0]?t.layers[0]:null,o=t.layers?t.errors:null;return g({},e,{layers:t.layers,selected:n,bbox:[190,190,-190,-190],errors:o},n?{}:{success:null});case s:return g({},e,{errors:y([].concat(r(e.errors||[]),[t.error]),(function(e,t){return(e.name&&e.name===t.name||e.filename&&e.filename===t.fileName)&&e.message===t.message})),success:null});case c:return g({},e,{loading:t.status});case l:return g({},e,{selected:t.layer});case u:var i=e.layers.filter((function(e){return t.layer.name!==e.name}),this),v=i&&i[0]?i[0]:null;return g({},e,{layers:i,selected:v},v?{}:{bbox:[190,190,-190,-190]});case p:return g({},e,{bbox:t.bbox});case d:return g({},e,{success:t.message,errors:null,error:null});case b:return"shapefile"===t.control?g({},e,{errors:null,success:null}):e;case m:var S=e.layers.filter((function(e){return t.layer.name!==e.name}),this),w=S&&S[0]?S[0]:null;return g({},e,{layers:S,selected:w,success:null});default:return e}}},"./MapStore2/web/client/reducers/measurement.js":function(e,t,n){function r(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=n("./MapStore2/web/client/actions/measurement.js"),c=l.CHANGE_MEASUREMENT_TOOL,u=l.CHANGE_MEASUREMENT_STATE,p=l.CHANGE_UOM,d=l.RESET_GEOMETRY,f=l.CHANGED_GEOMETRY,m=l.SET_TEXT_LABELS,y=l.SET_CURRENT_FEATURE,b=l.CHANGE_FORMAT,g=l.CHANGE_COORDINATES,h=l.UPDATE_MEASURES,v=l.INIT,S=n("./MapStore2/web/client/actions/controls.js"),w=S.TOGGLE_CONTROL,O=S.RESET_CONTROLS,j=S.SET_CONTROL_PROPERTY,E=n("./MapStore2/web/client/utils/ImmutableUtils.js").set,x=n("./MapStore2/web/client/utils/openlayers/DrawUtils.js").isPolygon,P=n("./node_modules/lodash/lodash.js").dropRight,C=n("./node_modules/object-assign/index.js"),T={lineMeasureEnabled:!0,geomType:"LineString",areaMeasureEnabled:!1,bearingMeasureEnabled:!1,customStartEndPoint:{startPointOptions:{radius:3,fillColor:"green"},endPointOptions:{radius:3,fillColor:"red"}},uom:{length:{unit:"m",label:"m"},area:{unit:"sqm",label:"m"}},lengthFormula:"haversine",showLabel:!0,showSegmentLengths:!0,currentFeature:0,features:[]};e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c:return C({},e,{lineMeasureEnabled:t.geomType!==e.geomType&&"LineString"===t.geomType,areaMeasureEnabled:t.geomType!==e.geomType&&"Polygon"===t.geomType,bearingMeasureEnabled:t.geomType!==e.geomType&&"Bearing"===t.geomType,geomType:t.geomType===e.geomType?null:t.geomType,features:null===t.geomType?[]:e.features,textLabels:null===t.geomType?[]:e.textLabels,feature:{properties:{disabled:!0}},currentFeature:e.features&&e.features.length||0,len:0,area:0,bearing:0});case u:var n=t.feature;return x(n)&&(n=E("geometry.coordinates[0]",P(n.geometry.coordinates[0]),n)),C({},e,{lineMeasureEnabled:t.lineMeasureEnabled,areaMeasureEnabled:t.areaMeasureEnabled,bearingMeasureEnabled:t.bearingMeasureEnabled,geomType:t.geomType,values:t.values,feature:E("properties.disabled",e.feature.properties.disabled,n),point:t.point,len:t.len,area:t.area,bearing:t.bearing,lenUnit:t.lenUnit,areaUnit:t.areaUnit});case h:var o=t.measures,i=o.point,l=o.len,S=o.area,M=o.bearing;return a(a({},e),{},{point:i,len:l,area:S,bearing:M});case d:var _=E("feature.properties.disabled",!0,e);return a(a({},_),{},{isDrawing:!0,updatedByUI:!1});case p:var A,R="length"===t.uom?"lenUnit":"lenArea",I=t.value,D=I.value,k=I.label;return C({},e,(s(A={},R,D),s(A,"uom",C({},t.previousUom,s({},t.uom,{unit:D,label:k}))),s(A,"updatedByUI",!0),A));case f:var L=t.features;return a(a({},e),{},{features:L,updatedByUI:!1,isDrawing:!1});case m:return a(a({},e),{},{textLabels:t.textLabels});case y:return a(a({},e),{},{currentFeature:t.featureIndex});case w:return"info"===t.control?a(a({},e),{},{len:0,area:0,bearing:0,lineMeasureEnabled:!1,areaMeasureEnabled:!1,bearingMeasureEnabled:!1,feature:{properties:{disabled:!0}},geomType:""}):"measure"===t.control?a(a({},e),{},{geomType:"",lineMeasureEnabled:!1,areaMeasureEnabled:!1,bearingMeasureEnabled:!1}):e;case j:return"measure"===t.control&&!1===t.value?a(a({},e),{},{geomType:"",lineMeasureEnabled:!1,areaMeasureEnabled:!1,bearingMeasureEnabled:!1}):e;case O:return a(a({},e),{},{len:0,area:0,bearing:0,lineMeasureEnabled:!1,areaMeasureEnabled:!1,bearingMeasureEnabled:!1,feature:{properties:{disabled:!0}},geomType:""});case b:return a(a({},e),{},{format:t.format});case v:return a(a({},e),t.defaultOptions);case g:var N=t.coordinates.map((function(e){return[e.lon,e.lat]})),F=e.features||[],U=F[e.currentFeature]||{},G=N.filter((function(e){return!isNaN(parseFloat(e[0]))&&!isNaN(parseFloat(e[1]))})).length!==N.length;return a(a({},e),{},{feature:{type:"Feature",properties:{disabled:N.filter((function(e){return!isNaN(parseFloat(e[0]))&&!isNaN(parseFloat(e[1]))})).length!==N.length},geometry:{type:e.bearingMeasureEnabled?"LineString":e.geomType,coordinates:e.areaMeasureEnabled?[P(N)]:N}},features:[].concat(r(F.slice(0,e.currentFeature)),[a(a({},U),{},{type:"Feature",properties:a(a({},U.properties||{}),{},{disabled:G||e.bearingMeasureEnabled&&N.length<2}),geometry:{type:e.bearingMeasureEnabled?"LineString":e.geomType,coordinates:e.areaMeasureEnabled?[[].concat(r(N),[N[0]])]:N}})],r(F.slice(e.currentFeature+1,F.length))),updatedByUI:!0});default:return e}}},"./MapStore2/web/client/reducers/mousePosition.js":function(e,t,n){var r=n("./MapStore2/web/client/actions/mousePosition.js"),o=r.CHANGE_MOUSE_POSITION,i=r.CHANGE_MOUSE_POSITION_CRS,a=r.CHANGE_MOUSE_POSITION_STATE,s=n("./MapStore2/web/client/actions/map.js"),l=s.MOUSE_MOVE,c=s.MOUSE_OUT,u=n("./node_modules/object-assign/index.js");e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{enabled:!0,position:null,crs:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a:return u({},e,{enabled:t.enabled});case o:return u({},e,{position:t.position});case i:return u({},e,{crs:t.crs});case l:return u({},e,{position:t.position,mouseOut:!1});case c:return u({},e,{mouseOut:!0});default:return e}}},"./MapStore2/web/client/reducers/notifications.js":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var c=n("./MapStore2/web/client/actions/notifications.js"),u=c.SHOW_NOTIFICATION,p=c.HIDE_NOTIFICATION,d=c.CLEAR_NOTIFICATIONS;e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case u:t.type;var n=l(t,["type"]);return[].concat(a(e),[o({},n)]);case p:return e.filter((function(e){return e.uid!==t.uid}));case d:return[];default:return e}}},"./MapStore2/web/client/reducers/query.js":function(e,t,n){function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var a=n("./MapStore2/web/client/actions/wfsquery.js"),s=a.FEATURE_TYPE_SELECTED,l=a.FEATURE_TYPE_LOADED,c=a.FEATURE_TYPE_ERROR,u=a.FEATURE_LOADING,p=a.FEATURE_LOADED,d=a.FEATURE_ERROR,f=a.QUERY_CREATE,m=a.QUERY_RESULT,y=a.QUERY_ERROR,b=a.RESET_QUERY,g=a.UPDATE_QUERY,h=a.TOGGLE_SYNC_WMS,v=a.TOGGLE_LAYER_FILTER,S=n("./MapStore2/web/client/actions/queryform.js").QUERY_FORM_RESET,w=n("./MapStore2/web/client/actions/controls.js").RESET_CONTROLS,O=n("./node_modules/object-assign/index.js"),j=function(e){return["STATE_NAME","STATE_ABBR","SUB_REGION","STATE_FIPS"].map((function(t){return{attribute:t,values:e.features.reduce((function(e,n){return-1===e.indexOf(n.properties[t])?[].concat(o(e),[n.properties[t]]).sort():e}),[])}})).reduce((function(e,t){return O(e,r({},t.attribute,t.values.map((function(e){return{id:e,name:e}}))))}),{})},E={featureTypes:{},data:{},result:null,resultError:null,syncWmsFilter:!0,isLayerFilter:!1};e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s:return O({},e,{typeName:t.typeName,url:t.url});case l:return O({},e,{featureTypes:O({},e.featureTypes,r({},t.typeName,t.featureType))});case c:return O({},e,{featureTypes:O({},e.featureTypes,r({},t.typeName,{error:t.error}))});case u:return O({},e,{featureLoading:t.isLoading});case p:return O({},e,{featureLoading:!1,data:O({},e.data,r({},t.typeName,j(t.feature)))});case d:return O({},e,{featureLoading:!1,featureTypes:O({},e.data,r({},t.typeName,{error:t.error}))});case f:return O({},e,{isNew:!0,searchUrl:t.searchUrl,filterObj:t.filterObj});case g:return O({},e,{filterObj:O({},e.filterObj,t.updates)});case m:return O({},e,{isNew:!1,result:t.result,searchUrl:t.searchUrl,filterObj:t.filterObj,resultError:null});case y:return O({},e,{isNew:!1,result:null,resultError:t.error});case w:case S:return t.skip&&t.skip.indexOf("query")>=0?e:O({},e,{isNew:!1,result:null,filterObj:null,searchUrl:null});case b:return O({},e,{result:null,resultError:null});case h:return O({},e,{syncWmsFilter:!e.syncWmsFilter});case v:return O({},e,{isLayerFilter:!e.isLayerFilter});default:return e}}},"./MapStore2/web/client/reducers/queryform.js":function(e,t,n){function r(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=n("./MapStore2/web/client/actions/queryform.js"),p=u.ADD_FILTER_FIELD,d=u.REMOVE_FILTER_FIELD,f=u.UPDATE_FILTER_FIELD,m=u.UPDATE_EXCEPTION_FIELD,y=u.ADD_GROUP_FIELD,b=u.UPDATE_LOGIC_COMBO,g=u.REMOVE_GROUP_FIELD,h=u.CHANGE_CASCADING_VALUE,v=u.EXPAND_ATTRIBUTE_PANEL,S=u.EXPAND_SPATIAL_PANEL,w=u.EXPAND_CROSS_LAYER,O=u.SET_CROSS_LAYER_PARAMETER,j=u.SELECT_SPATIAL_METHOD,E=u.SELECT_SPATIAL_OPERATION,x=u.CHANGE_SPATIAL_ATTRIBUTE,P=u.CHANGE_SPATIAL_FILTER_VALUE,C=u.REMOVE_SPATIAL_SELECT,T=u.SHOW_SPATIAL_DETAILS,M=u.QUERY_FORM_RESET,_=u.SHOW_GENERATED_FILTER,A=u.CHANGE_DWITHIN_VALUE,R=u.ZONE_FILTER,I=u.ZONE_SEARCH,D=u.UPDATE_GEOMETRY,k=u.ZONE_CHANGE,L=u.ZONES_RESET,N=u.ZONE_SEARCH_ERROR,F=u.SIMPLE_FILTER_FIELD_UPDATE,U=u.ADD_SIMPLE_FILTER_FIELD,G=u.REMOVE_SIMPLE_FILTER_FIELD,B=u.REMOVE_ALL_SIMPLE_FILTER_FIELDS,z=u.UPDATE_FILTER_FIELD_OPTIONS,W=u.LOADING_FILTER_FIELD_OPTIONS,V=u.ADD_CROSS_LAYER_FILTER_FIELD,H=u.UPDATE_CROSS_LAYER_FILTER_FIELD,q=u.REMOVE_CROSS_LAYER_FILTER_FIELD,Y=u.RESET_CROSS_LAYER_FILTER,Q=u.SET_AUTOCOMPLETE_MODE,K=u.TOGGLE_AUTOCOMPLETE_MENU,Z=u.LOAD_FILTER,X=n("./MapStore2/web/client/actions/draw.js"),J=X.END_DRAWING,$=X.CHANGE_DRAWING_STATUS,ee=n("./node_modules/object-assign/index.js"),te=n("./node_modules/turf-union/index.js"),ne=n("./node_modules/turf-bbox/index.js"),re=n("./node_modules/lodash/lodash.js").get,oe=n("./MapStore2/web/client/utils/ImmutableUtils.js"),ie=oe.set,ae=oe.arrayUpsert,se=oe.arrayDelete,le={searchUrl:null,featureTypeConfigUrl:null,showGeneratedFilter:!1,attributePanelExpanded:!0,spatialPanelExpanded:!0,crossLayerExpanded:!0,showDetailsPanel:!1,groupLevels:5,useMapProjection:!1,toolbarEnabled:!0,groupFields:[{id:1,logic:"OR",index:0}],maxFeaturesWPS:5,filterFields:[],spatialField:{method:null,attribute:"the_geom",operation:"INTERSECTS",geometry:null},simpleFilterFields:[]},ce=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=ee({},t,(c(e={},n.fieldName,n.fieldValue),c(e,"type",n.fieldType),e),{fieldOptions:ee({},l({},t.fieldOptions),{currentPage:void 0===n.fieldOptions.currentPage?1:n.fieldOptions.currentPage})});return"attribute"===n.fieldName&&(r.value="string"===n.fieldType?"":null,r.operator="="),"operator"===n.fieldName&&(r.value=null),r};e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:var n={rowId:(new Date).getTime(),groupId:t.groupId,attribute:null,operator:"=",value:null,type:null,fieldOptions:{valuesCount:0,currentPage:1},exception:null};return ee({},e,{filterFields:e.filterFields?[].concat(i(e.filterFields),[n]):[n]});case d:return ee({},e,{filterFields:e.filterFields.filter((function(e){return e.rowId!==t.rowId}))});case f:return ee({},e,{filterFields:e.filterFields.map((function(e){return e.rowId===t.rowId?ce(e,t):e}))});case z:return ee({},e,{filterFields:e.filterFields.map((function(e){return e.rowId===t.filterField.rowId?ee({},e,{options:ee({},l({},e.options),c({},e.attribute,t.options))},{fieldOptions:ee({},l({},e.fieldOptions),{valuesCount:t.valuesCount})}):e}))});case K:return ee({},e,{filterFields:e.filterFields.map((function(e){return e.rowId===t.rowId?ee({},e,{openAutocompleteMenu:t.status}):e}))});case Q:return ee({},e,{autocompleteEnabled:t.status});case W:return ee({},e,{filterFields:e.filterFields.map((function(e){return e.rowId===t.filterField.rowId?ee({},e,{loading:t.status}):e}))});case m:return ee({},e,{filterFields:e.filterFields.map((function(e){return e.rowId===t.rowId?ee({},e,{exception:t.exceptionMessage}):e}))});case y:var a={id:(new Date).getTime(),logic:"OR",groupId:t.groupId,index:t.index+1};return ee({},e,{groupFields:e.groupFields?[].concat(i(e.groupFields),[a]):[a]});case b:return ee({},e,{groupFields:e.groupFields.map((function(e){return e.id===t.groupId?ee({},e,{logic:t.logic}):e}))});case g:return ee({},e,{filterFields:e.filterFields.filter((function(e){return e.groupId!==t.groupId})),groupFields:e.groupFields.filter((function(e){return e.id!==t.groupId}))});case h:return ee({},e,{filterFields:e.filterFields.map((function(e){for(var n=0;n<t.attributes.length;n++)if(e.attribute===t.attributes[n].id)return ee({},e,{value:null});return e}))});case v:return ee({},e,{attributePanelExpanded:t.expand});case S:return ee({},e,{spatialPanelExpanded:t.expand});case w:return ee({},e,{crossLayerExpanded:t.expand});case O:return ee({},e,{crossLayerFilter:ie(t.key,t.value,e.crossLayerFilter)});case V:return ae("crossLayerFilter.collectGeometries.queryCollection.filterFields",{rowId:t.rowId,groupId:t.groupId,attribute:null,operator:"=",value:null,type:null,fieldOptions:{valuesCount:0,currentPage:1},exception:null},{rowId:t.rowId},e);case H:return ie("crossLayerFilter.collectGeometries.queryCollection.filterFields",(re(e,"crossLayerFilter.collectGeometries.queryCollection.filterFields")||[]).map((function(e){return e.rowId===t.rowId?ce(e,t):e})),e);case q:return se("crossLayerFilter.collectGeometries.queryCollection.filterFields",{rowId:t.rowId},e);case Y:return ee({},e,{crossLayerFilter:{attribute:e.crossLayerFilter&&e.crossLayerFilter.attribute}});case j:var s;return ee({},e,{spatialField:ee({},e.spatialField,(s={},c(s,t.fieldName,t.method),c(s,"geometry",null),s))});case D:return ee({},e,{spatialField:ee({},e.spatialField,{geometry:t.geometry})},{toolbarEnabled:!0});case E:return ee({},e,{spatialField:ee({},e.spatialField,c({},t.fieldName,t.operation))});case x:return ee({},e,{spatialField:ee({},e.spatialField,{attribute:t.attribute}),crossLayerFilter:ee({},e.crossLayerFilter,{attribute:t.attribute})});case $:return"queryform"===t.owner&&"start"===t.status?ee({},e,{toolbarEnabled:!1}):e;case P:return ee({},e,{toolbarEnabled:!0,spatialField:ee({},e.spatialField,{value:t.value,collectGeometries:t.collectGeometries,geometry:t.srsName?l(l({},t.geometry),{},{projection:t.srsName}):t.geometry})});case J:return"queryform"===t.owner?ee({},e,{toolbarEnabled:!0,spatialField:ee({},e.spatialField,{collectGeometries:t.collectGeometries,geometry:t.geometry})}):e;case C:var u=ee({},le.spatialField,{attribute:e.spatialField.attribute,value:void 0});return ee({},e,{spatialField:ee({},e.spatialField,u)});case T:return ee({},e,{showDetailsPanel:t.show});case M:var X=ee({},le.spatialField,{attribute:e.spatialField.attribute,value:void 0}),oe={attribute:e.crossLayerFilter&&e.crossLayerFilter.attribute};return ee({},e,le,{spatialField:X,crossLayerFilter:oe});case _:return ee({},e,{showGeneratedFilter:t.data});case A:return ee({},e,{spatialField:ee({},e.spatialField,{geometry:ee({},e.spatialField.geometry,{distance:t.distance})})});case R:return ee({},e,{spatialField:ee({},e.spatialField,{zoneFields:e.spatialField.zoneFields.map((function(e){return e.id===t.id&&t.data.features&&t.data.features.length>0?ee({},e,{values:t.data.features,open:!0,error:null}):e}))})});case I:return ee({},e,{spatialField:ee({},e.spatialField,{zoneFields:e.spatialField.zoneFields.map((function(e){return e.id===t.id?ee({},e,{busy:t.active}):e}))})});case k:var ue,pe,de=e.spatialField.zoneFields.map((function(e){if(e.id===t.id){if(ue=e.multivalue?t.value.value:t.value.value[0],t.value.feature[0]){var n=t.value.feature[0],r=n.geometry_name;if(e.multivalue&&t.value.feature.length>1){for(var o=1;o<t.value.feature.length;o++){var i=t.value.feature[o];i&&(n=te(n,i))}pe={coordinates:n.geometry.coordinates,geometryName:r,geometryType:n.geometry.type}}else pe={coordinates:n.geometry.coordinates,geometryName:r,geometryType:n.geometry.type}}return ee({},e,{value:ue,open:!1,geometryName:pe?pe.geometryName:null})}return e.dependson&&t.id===e.dependson.id?ee({},e,{disabled:!1,values:null,value:null,open:!1,dependson:ee({},e.dependson,{value:ue})}):e})),fe=ne({type:"FeatureCollection",features:t.value.feature});return ee({},e,{spatialField:ee({},e.spatialField,{zoneFields:de,geometry:fe&&pe?{extent:fe,type:pe.geometryType,coordinates:pe.coordinates}:null})});case L:return ee({},e,{spatialField:ee({},e.spatialField,{zoneFields:e.spatialField.zoneFields.map((function(e){var t=ee({},e,{values:null,value:null,open:!1,error:null});return e.dependson?ee({},t,{disabled:!0,open:!1,value:null,dependson:ee({},e.dependson,{value:null})}):t})),geometry:null})});case N:var me;return ee({},e,{spatialField:ee({},e.spatialField,{zoneFields:e.spatialField.zoneFields.map((function(e){return e.id===t.id?(me="object"!==o(t.error)?t.error.status&&t.error.statusText&&t.error.data?{status:t.error.status,statusText:t.error.statusText,data:t.error.data}:{message:t.error.message||"unknown error"}:t.error,ee({},e,{error:me,busy:!1})):e}))})});case F:var ye=e.simpleFilterFields.reduce((function(e,n){return n.fieldId===t.id?e.push(l(l({},n),t.properties)):e.push(n),e}),[]);return l(l({},e),{},{simpleFilterFields:ye});case U:var be=t.properties.fieldId?t.properties:l(l({},t.properties),{},{fieldId:(new Date).getTime()}),ge=e.simpleFilterFields?[].concat(i(e.simpleFilterFields),[be]):[be];return l(l({},e),{},{simpleFilterFields:ge});case G:return l(l({},e),{},{simpleFilterFields:e.simpleFilterFields.filter((function(e){return e.fieldId!==t.id}))});case B:return l(l({},e),{},{simpleFilterFields:[]});case Z:var he=le.spatialField,ve=(he.attribute,r(he,["attribute"])),Se=ee({},le,{spatialField:l({},ve)}),we=t.filter||Se,Oe=we.spatialField,je=we.filterFields,Ee=we.groupFields,xe=we.crossLayerFilter,Pe=we.attributePanelExpanded,Ce=we.spatialPanelExpanded,Te=we.crossLayerExpanded;return l(l({},e),{attributePanelExpanded:Pe,spatialPanelExpanded:Ce,crossLayerExpanded:Te,spatialField:l(l({},Oe),{},{attribute:Oe&&Oe.attribute||e.spatialField&&e.spatialField.attribute}),filterFields:je,groupFields:Ee,crossLayerFilter:l(l({},xe),{},{attribute:xe&&xe.attribute||e.crossLayerFilter&&e.crossLayerFilter.attribute})});default:return e}}},"./MapStore2/web/client/reducers/rasterstyler.js":function(e,t,n){function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=n("./MapStore2/web/client/actions/rasterstyler.js"),i=o.SET_RASTERSTYLE_PARAMETER,a=o.SET_RASTER_LAYER,s=n("./node_modules/object-assign/index.js"),l=n("./MapStore2/web/client/actions/styler.js").STYLER_RESET,c={pseudoband:{band:"1",contrast:"none",algorithm:"none",gammaValue:1,min:1,max:255},redband:{band:"1",contrast:"none",algorithm:"none",gammaValue:1,min:1,max:255},blueband:{band:"3",contrast:"none",algorithm:"none",gammaValue:1,min:1,max:255},greenband:{band:"2",contrast:"none",algorithm:"none",gammaValue:1,min:1,max:255},grayband:{band:"1",contrast:"none",algorithm:"none",gammaValue:1,min:1,max:255},pseudocolor:{colorMapEntry:[],type:"ramp",selected:null,opacity:"1.00",activepanel:"1"},equalinterval:{classes:6,max:255,min:0,ramp:"Blues"}};function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={};return Object.keys(c).reduce((function(e,t){return e[t]=s({},c[t]),e}),t),e.bands&&e.bands.length>0&&(t.pseudoband.band=e.bands[0],t.redband.band=e.bands[0],t.greenband.band=e.bands.length>1?e.bands[1]:e.bands[0],t.blueband.band=e.bands.length>2?e.bands[2]:e.bands[0],t.grayband.band=e.bands[0]),e.range&&(t.equalinterval.min=e.range.min,t.equalinterval.max=e.range.max),t}e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i:return s({},e,r({},t.component,s({},e[t.component],r({},t.property,t.value))));case a:return s({},u(t.layer.describeLayer),{layer:t.layer});case l:return c;default:return e}}},"./MapStore2/web/client/reducers/rulesmanager.js":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function i(e){var t=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===r(t)?t:String(t)}function a(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=n("./node_modules/object-assign/index.js"),d=n("./node_modules/wellknown/index.js"),f=n("./node_modules/lodash/lodash.js").isEmpty,m=n("./MapStore2/web/client/actions/rulesmanager.js"),y=m.RULES_SELECTED,b=m.OPTIONS_LOADED,g=m.UPDATE_FILTERS_VALUES,h=m.LOADING,v=m.EDIT_RULE,S=m.SET_FILTER,w=m.CLEAN_EDITING,O=m.RULE_SAVED,j=n("./MapStore2/web/client/actions/draw.js").CHANGE_DRAWING_STATUS,E=n("./node_modules/lodash/lodash.js"),x={services:{WFS:["DescribeFeatureType","GetCapabilities","GetFeature","GetFeatureWithLock","LockFeature","Transaction"],WMS:["DescribeLayer","GetCapabilities","GetFeatureInfo","GetLegendGraphic","GetMap","GetStyles"]},triggerLoad:0,grantDefault:"ALLOW"},P=function(e,t){var n=e.targetPosition,r=void 0===n?{}:n;switch(t){case-1:return r.offsetFromTop;case 1:return r.offsetFromTop+1;default:return 0}},C=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(""===t||f(e)||!e.coordinates||0===e.coordinates.length)return e;var n=e.coordinates[0];return c(c({},e),{},"Polygon"===t?{type:"MultiPolygon",coordinates:[[[].concat(a(n),[n[0]])]]}:{type:"MultiPolygon",coordinates:[[n]]})};e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:if(!t.merge)return p({},e,{selectedRules:t.rules,targetPosition:t.targetPosition});var n=t.rules||[],r=e.selectedRules||[];return t.unselect?p({},e,{selectedRules:E(r).filter((function(e){return!E.head(n.filter((function(t){return t.id===e.id})))})).value()}):p({},e,{selectedRules:E(r).concat(n).uniq((function(e){return e.id})).value()});case g:var a=e.filtersValues||{};return p({},e,{filtersValues:p({},a,t.filtersValues)});case b:var s;return p({},e,{options:p({},e.options,(s={},u(s,t.name,t.values||[]),u(s,t.name+"Page",t.page),u(s,t.name+"Count",t.valuesCount),s))});case h:return p({},e,{loading:t.loading});case S:var l=t.key,m=t.value;if(m)return p({},e,{filters:c(c({},e.filters),{},u({},l,m))});var T=e.filters,M=(T[l],o(T,[l].map(i)));return p({},e,{filters:M});case v:var _=t.createNew,A=t.targetPriority;if(_)return p({},e,{activeRule:{grant:e.grantDefault,position:{value:P(e,A),position:"offsetFromTop"}}});var R=e.selectedRules[0]||{},I=R.constraints&&R.constraints.restrictedAreaWkt&&{wkt:R.constraints.restrictedAreaWkt,geometry:d.parse(R.constraints.restrictedAreaWkt)}||{};return p({},e,{activeRule:R,position:{value:e.targetPosition.offsetFromTop,position:"offsetFromTop"},geometryState:I});case O:return p({},e,{triggerLoad:(e.triggerLoad||0)+1,geometryState:void 0,activeRule:void 0,selectedRules:[],targetPosition:void 0});case w:return p({},e,{activeRule:void 0,geometryState:void 0});case j:var D;if("rulesmanager"!==t.owner||"stop"!==t.status&&"start"!==t.status&&"clean"!==t.status)D=e;else{var k=C((t.features||[])[0]||{},t.method);D=p({},e,{geometryState:p({},{geometry:k,wkt:!f(k)&&d.stringify(k)||void 0})})}return D;default:return e}}},"./MapStore2/web/client/reducers/search.js":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var l=n("./MapStore2/web/client/actions/search.js"),c=l.TEXT_SEARCH_RESULTS_LOADED,u=l.TEXT_SEARCH_RESULTS_PURGE,p=l.TEXT_SEARCH_RESET,d=l.TEXT_SEARCH_ADD_MARKER,f=l.TEXT_SEARCH_TEXT_CHANGE,m=l.TEXT_SEARCH_LOADING,y=l.TEXT_SEARCH_ERROR,b=l.TEXT_SEARCH_NESTED_SERVICES_SELECTED,g=l.TEXT_SEARCH_CANCEL_ITEM,h=l.TEXT_SEARCH_SET_HIGHLIGHTED_FEATURE,v=l.UPDATE_RESULTS_STYLE,S=l.CHANGE_SEARCH_TOOL,w=l.CHANGE_FORMAT,O=l.CHANGE_COORD,j=n("./MapStore2/web/client/actions/controls.js").RESET_CONTROLS,E=n("./node_modules/object-assign/index.js");e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return E({},e,{loading:t.loading});case y:return E({},e,{error:t.error});case f:return E({},e,{searchText:t.searchText,error:null});case c:var n=t.results;return!0===t.append&&e&&e.results&&(n=[].concat(a(e.results),a(t.results))),E({},e,{results:n,error:null});case u:return E({},e,{results:null,error:null});case d:return E({},e,{markerPosition:t.markerPosition,markerLabel:t.markerLabel});case h:return E({},e,{highlightedFeature:t.highlightedFeature});case p:return{style:e.style||{}};case j:return null;case b:return E({},e,{selectedServices:t.services,searchText:t.searchText,selectedItems:(e.selectedItems||[]).concat(t.items)});case g:return E({},{selectedItems:e.selectedItems&&e.selectedItems.filter((function(e){return e!==t.item})),searchText:""===e.searchText&&t.item&&t.item.text?t.item.text.substring(0,t.item.text.length):e.searchText});case v:return E({},e,{style:t.style});case S:return o(o({},e),{},{activeSearchTool:t.activeSearchTool});case w:return o(o({},e),{},{format:t.format});case O:return o(o({},e),{},{coordinate:o(o({},e.coordinate),{},i({},t.coord,t.val))});default:return e}}},"./MapStore2/web/client/reducers/searchconfig.js":function(e,t,n){function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=n("./MapStore2/web/client/actions/searchconfig.js"),i=o.SET_SEARCH_CONFIG_PROP,a=o.RESET_SEARCH_CONFIG,s=o.UPDATE_SERVICE,l=n("./MapStore2/web/client/actions/controls.js").RESET_CONTROLS,c=n("./MapStore2/web/client/actions/config.js").MAP_CONFIG_LOADED,u=n("./node_modules/object-assign/index.js");e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i:return u({},e,r({},t.property,t.value));case c:var n=t.config.map.text_search_config||t.config.map.text_serch_config;return u({},e,{textSearchConfig:n});case l:case a:return u({},e,{service:void 0,page:t.page,init_service_values:void 0,editIdx:void 0});case s:var o=(e.textSearchConfig&&e.textSearchConfig.services||[]).slice(),p=u({},t.service,{priority:parseInt(t.service.priority,10)});return-1!==t.idx?o[t.idx]=p:o.push(p),u({},e,{service:void 0,page:0,init_service_values:void 0,editIdx:void 0,textSearchConfig:{services:o,override:e.textSearchConfig&&e.textSearchConfig.override||!1}});default:return e}}},"./MapStore2/web/client/reducers/snapshot.js":function(e,t,n){function r(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var i=n("./MapStore2/web/client/actions/snapshot.js"),a=i.CHANGE_SNAPSHOT_STATE,s=i.SNAPSHOT_ERROR,l=i.SNAPSHOT_READY,c=i.SNAPSHOT_ADD_QUEUE,u=i.SNAPSHOT_REMOVE_QUEUE,p=n("./node_modules/object-assign/index.js");e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a:return p({},e,{state:t.state,tainted:t.tainted});case l:return p({},e,{img:{data:t.imgData,width:t.width,height:t.height,size:t.size}});case s:return p({},e,{error:t.error});case c:var n=[];return n=e&&void 0!==e.queue?[].concat(r(e.queue),[t.options]):[t.options],p({},e,{queue:n});case u:var o=e.queue||[];return o=o.filter((function(e){return e.key!==t.options.key})),p({},e,{queue:o});default:return e}}},"./MapStore2/web/client/reducers/style.js":function(e,t,n){function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=n("./MapStore2/web/client/actions/style.js").SET_STYLE_PARAMETER,i=n("./node_modules/object-assign/index.js"),a={color:{r:0,g:0,b:255,a:1},width:3,fill:{r:0,g:0,b:255,a:.1},radius:10,marker:!1};e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o:return i({},e,r({},t.name,t.value));default:return e}}},"./MapStore2/web/client/reducers/styleeditor.js":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n("./MapStore2/web/client/actions/styleeditor.js"),s=a.UPDATE_TEMPORARY_STYLE,l=a.UPDATE_STATUS,c=a.ERROR_STYLE,u=a.ADD_STYLE,p=a.RESET_STYLE_EDITOR,d=a.LOADING_STYLE,f=a.LOADED_STYLE,m=a.INIT_STYLE_SERVICE,y=a.SET_EDIT_PERMISSION,b=a.UPDATE_EDITOR_METADATA;e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return o(o({},e),{},{service:t.service,canEdit:t.canEdit});case y:return o(o({},e),{},{canEdit:t.canEdit});case s:return o(o({},e),{},{temporaryId:t.temporaryId,templateId:t.templateId,code:t.code,format:t.format,error:null,languageVersion:t.languageVersion,initialCode:t.init?t.code:e.initialCode});case l:return""===t.status?o(o({},e),{},{status:t.status,code:"",templateId:"",initialCode:"",addStyle:!1,error:{}}):o(o({},e),{},{status:t.status});case p:return{service:e.service&&o({},e.service)||{},canEdit:e.canEdit};case u:return o(o({},e),{},{addStyle:t.add});case d:return o(o({},e),{},{loading:!t.status||t.status,error:{}});case f:return o(o({},e),{},{loading:!1,enabled:!0});case c:var n=t.error&&t.error.statusText||"",r=n.match(/line\s([\d]+)|column\s([\d]+)|lineNumber:\s([\d]+)|columnNumber:\s([\d]+)/g),a=r&&2===r.length&&r.reduce((function(e,t){var n=t.split(" "),r=n[0].replace(/Number:/g,""),a=parseFloat(n[1]);return r&&!isNaN(a)&&o(o({},e),{},i({},r,a))||o({},e)}),{message:n})||{message:n};return o(o({},e),{},{loading:!1,canEdit:!(t.error&&(401===t.error.status||403===t.error.status)),error:o(o({},e.error),{},i({},t.status||"global",o({status:t.error&&t.error.status||404},a)))});case b:return o(o({},e),{},{metadata:o(o({},e.metadata),t.metadata)});default:return e}}},"./MapStore2/web/client/reducers/styler.js":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n("./MapStore2/web/client/actions/vectorstyler.js").SET_VECTOR_LAYER,s=n("./MapStore2/web/client/actions/rasterstyler.js").SET_RASTER_LAYER,l=n("./MapStore2/web/client/actions/styler.js"),c=l.SET_STYLER_LAYER,u=l.STYLER_RESET;e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a:return o(o({},e),{},{layer:t.layer,type:"vector"});case s:return o(o({},e),{},{layer:t.layer,type:"raster"});case u:return{};case c:return o(o({},e),{},{layer:t.layer});default:return e}}},"./MapStore2/web/client/reducers/thematic.js":function(e,t,n){function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var a=n("./MapStore2/web/client/actions/thematic.js"),s=a.LOAD_FIELDS,l=a.FIELDS_LOADED,c=a.FIELDS_ERROR,u=a.LOAD_CLASSIFICATION,p=a.CLASSIFICATION_LOADED,d=a.CLASSIFICATION_ERROR,f=a.CHANGE_CONFIGURATION,m=a.CHANGE_DIRTY,y=a.CHANGE_INPUT_VALIDITY,b=n("./MapStore2/web/client/actions/layers.js").HIDE_SETTINGS,g=n("./node_modules/object-assign/index.js"),h={loadingFields:!1,errorFields:null,loadingClassification:!1,errorClassification:null,customClassification:!1,dirty:!1,adminCfg:{open:!1,current:null,error:null},invalidInputs:{}};e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return g({},h);case s:return g({},e,{fields:null,loadingFields:!0,errorFields:null});case l:return g({},e,{fields:t.fields,loadingFields:!1,errorFields:null});case c:return g({},e,{fields:null,loadingFields:!1,errorFields:t.error});case u:return g({},e,{loadingClassification:!0,errorClassification:null});case p:return g({},e,{classification:t.classification,loadingClassification:!1,errorClassification:null,customClassification:!1});case d:return g({},e,{classification:null,loadingClassification:!1,errorClassification:t.error,customClassification:!1});case f:return g({},e,{adminCfg:{open:t.editEnabled,current:t.current,error:t.error}});case m:return g({},e,{dirty:t.dirty});case y:return t.valid?g({},e,{invalidInputs:Object.keys(e.invalidInputs).reduce((function(e,n){return n===t.input?e:[].concat(o(e),[n])}),{})}):g({},e,{invalidInputs:g({},e.invalidInputs,r({},t.input,{message:t.message,params:t.params||{}}))});default:return e}}},"./MapStore2/web/client/reducers/tutorial.js":function(e,t,n){var r=n("./MapStore2/web/client/actions/tutorial.js"),o=r.START_TUTORIAL,i=r.INIT_TUTORIAL,a=r.SETUP_TUTORIAL,s=r.UPDATE_TUTORIAL,l=r.DISABLE_TUTORIAL,c=r.RESET_TUTORIAL,u=r.CLOSE_TUTORIAL,p=r.TOGGLE_TUTORIAL,d=n("./node_modules/object-assign/index.js"),f=n("./node_modules/react/index.js"),m=n("./MapStore2/web/client/components/I18N/I18N.jsx"),y={run:!1,start:!1,steps:[],enabled:!1,disabled:!1,status:"close",stepIndex:0,tourAction:"next",id:"",presetList:{}};e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o:return d({},e,{run:!0,start:!0,status:"run"});case i:return d({},e,{style:t.style,defaultStep:t.defaultStep,checkbox:t.checkbox,presetList:t.presetList});case a:var n={};n.steps=[].concat(t.steps),n.id=t.id,n.checkbox=t.checkbox?t.checkbox:d({},e.checkbox),n.style=t.style?t.style:d({},e.style),n.defaultStep=t.defaultStep?t.defaultStep:d({},e.defaultStep),n.disabled=!1,n.presetGroup=t.presetGroup;var r="true"===localStorage.getItem("mapstore.plugin.tutorial."+t.id+".disabled");n.steps=n.steps.filter((function(e){var t,n;return"#"===(null==e||null===(t=e.selector)||void 0===t?void 0:t.substring(0,1))||"."===(null==e||null===(n=e.selector)||void 0===n?void 0:n.substring(0,1))})).map((function(e,t){var o=e.title?e.title:"";o=e.translation?f.createElement(m.Message,{msgId:"tutorial."+e.translation+".title"}):o,o=e.translationHTML?f.createElement(m.HTML,{msgId:"tutorial."+e.translationHTML+".title"}):o;var i=e.text?e.text:"";i=e.translation?f.createElement(m.Message,{msgId:"tutorial."+e.translation+".text"}):i,i=e.translationHTML?f.createElement(m.HTML,{msgId:"tutorial."+e.translationHTML+".text"}):i,i="#intro-tutorial"!==e.selector||r?i:f.createElement("div",null,f.createElement("div",null,i),n.checkbox);var a="#intro-tutorial"===e.selector?n.style:{},s="#intro-tutorial"===e.selector||(e.isFixed||!1);return d(a,e.style),d({},n.defaultStep,e,{index:t,title:o,text:i,style:a,isFixed:s})}));var b=r&&!t.ignoreDisabled,g=!1;return n.steps.forEach((function(e){"#intro-tutorial"===e.selector&&(g=!0)})),n.run=!0,n.start=!0,n.status="run",(b||!g||t.stop)&&(n.steps=n.steps.filter((function(e){return"#intro-tutorial"!==e.selector})).map((function(e,t){return d({},e,{index:t})})),n.run=!1,n.start=!1,n.status="close"),d({},e,n);case s:var h={};return h.steps=[].concat(t.steps),h.run=!0,h.start=!0,h.status="run",h.stepIndex=e.stepIndex,h.tourAction=e.tourAction,t.tour&&("close"===t.tour.action||"finished"===t.tour.type?(h.run=!1,h.start=!1,h.status="close",h.steps=h.steps.filter((function(e){return"#intro-tutorial"!==e.selector})).map((function(e,t){return d({},e,{index:t})}))):"error:target_not_found"===t.tour.type&&(h.status="error",h.stepIndex=t.tour.index,h.tourAction=t.tour.action)),d({},e,h);case l:var v=!e.disabled,S=e.presetGroup||[e.id];return S.forEach((function(e){localStorage.setItem("mapstore.plugin.tutorial."+e+".disabled",v)})),d({},e,{disabled:v});case c:return d({},e,{steps:[],run:!1,start:!1,status:"close",enabled:!1});case u:return d({},e,{run:!1,start:!1,status:"close",enabled:!1});case p:return d({},e,{enabled:!e.enabled});default:return e}}},"./MapStore2/web/client/reducers/vectorstyler.js":function(e,t,n){function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var a=n("./MapStore2/web/client/actions/vectorstyler.js"),s=a.NEW_VECTOR_RULE,l=a.SELECT_VECTOR_RULE,c=a.REMOVE_VECTOR_RULE,u=a.SET_VECTORSTYLE_PARAMETER,p=a.SET_VECTOR_LAYER,d=a.SET_VECTOR_RULE_PARAMETER,f=n("./MapStore2/web/client/actions/styler.js").STYLER_RESET,m=n("./node_modules/object-assign/index.js"),y=n("./node_modules/lodash/lodash.js"),b=y.isObject,g=y.findIndex,h={Point:{type:"Point",color:{r:0,g:0,b:255,a:1},width:3,fill:{r:0,g:0,b:255,a:.1},radius:10,marker:!1,markName:"circle"},Line:{type:"Line",color:{r:0,g:0,b:255,a:1},width:3},Polygon:{type:"Polygon",color:{r:0,g:0,b:255,a:1},width:3,fill:{r:0,g:0,b:255,a:.1}}},v={rules:[]};function S(e){switch(e.describeLayer.geometryType){case"Polygon":case"MultiPolygon":return"Polygon";case"MultiLineString":case"LineString":return"Line";case"Point":case"MultiPoint":return"Point";default:return"Polygon"}}function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Polygon",t={},n=h[e];return Object.keys(n).reduce((function(e,t){return e[t]=b(n[t])?m({},n[t]):n[t],e}),t),t}function O(e,t){return g(e,(function(e){return e.id===t}))}e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s:var n={id:t.id,symbol:w(S(e.layer)),name:"New Rule"};return m({},e,{rule:n.id,rules:e.rules?[].concat(o(e.rules),[n]):[n]});case l:return m({},e,{rule:t.id});case c:var i=O(e.rules,t.id),a=e.rules[i-1]?e.rules[i-1].id:void 0;return void 0===a&&(a=e.rules[i+1]?e.rules[i+1].id:void 0),m({},e,{rule:a,rules:e.rules.filter((function(e){return e.id!==t.id}))});case d:var y=e.rules.slice(),b=O(y,e.rule),g=y[b];return y[b]=m({},g,r({},t.property,t.value)),m({},e,{rules:y});case u:var h=e.rules.slice(),j=O(h,e.rule),E=h[j];return h[j]=m({},E,r({},t.component,m({},E[t.component],r({},t.property,t.value)))),m({},e,{rules:h});case p:return m({},v,{layer:t.layer});case f:return v;default:return e}}},"./MapStore2/web/client/reducers/widgets.js":function(e,t,n){function r(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=n("./MapStore2/web/client/actions/widgets.js"),c=l.EDIT_NEW,u=l.INSERT,p=l.EDIT,d=l.UPDATE_PROPERTY,f=l.UPDATE_LAYER,m=l.DELETE,y=l.EDITOR_CHANGE,b=l.EDITOR_SETTING_CHANGE,g=l.CHANGE_LAYOUT,h=l.CLEAR_WIDGETS,v=l.DEFAULT_TARGET,S=l.ADD_DEPENDENCY,w=l.REMOVE_DEPENDENCY,O=l.LOAD_DEPENDENCIES,j=l.RESET_DEPENDENCIES,E=l.TOGGLE_COLLAPSE,x=l.TOGGLE_COLLAPSE_ALL,P=l.TOGGLE_TRAY,C=l.toggleCollapse,T=n("./MapStore2/web/client/actions/config.js").MAP_CONFIG_LOADED,M=n("./MapStore2/web/client/actions/dashboard.js"),_=M.DASHBOARD_LOADED,A=M.DASHBOARD_RESET,R=n("./node_modules/object-assign/index.js"),I=n("./node_modules/lodash/fp/set.js"),D=n("./node_modules/lodash/lodash.js"),k=D.get,L=D.find,N=D.omit,F=D.mapValues,U=D.castArray,G=n("./MapStore2/web/client/utils/ImmutableUtils.js"),B=G.arrayUpsert,z=G.compose,W=G.arrayDelete,V={dependencies:{viewport:"map.bbox",center:"map.center",zoom:"map.zoom"},containers:{floating:{widgets:[]}},builder:{settings:{step:0}}};e.exports=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case b:return I("builder.settings.".concat(n.key),n.value,t);case c:return I("builder.editor",n.widget,I("builder.settings",n.settings||V.settings,t));case p:return I("builder.editor",a(a({},n.widget),{},{widgetType:n.widget&&n.widget.widgetType||"chart"}),I("builder.settings.step","chart"===(n.widget&&n.widget.widgetType||"chart")?1:0,t));case y:return I("builder.editor.".concat(n.key),n.value,t);case u:var o=B("containers[".concat(n.target,"].widgets"),a(a({id:n.id},n.widget),{},{dataGrid:n.id&&{y:0,x:0,w:1,h:1}}),{id:n.widget.id||n.id},t);return o;case d:var i=L(k(t,"containers[".concat(n.target,"].widgets")),{id:n.id});return B("containers[".concat(n.target,"].widgets"),I(n.key,"merge"===n.mode?R({},i[n.key],n.value):n.value,i),{id:n.id},t);case f:if(n.layer){var s=k(t,"containers[".concat(v,"].widgets"));if(s)return I("containers[".concat(v,"].widgets"),s.map((function(e){return k(e,"layer.id")===n.layer.id?I("layer",n.layer,e):e})),t)}return t;case m:return W("containers[".concat(n.target,"].widgets"),{id:n.widget.id},t);case _:var l=n.data;return I("containers[".concat(v,"]"),a({},l),t);case T:var M=n.config||{},D=M.widgetsConfig;return I("containers[".concat(v,"]"),a({},D),t);case g:return I("containers[".concat(n.target,"].layout"),n.layout)(I("containers[".concat(n.target,"].layouts"),n.allLayouts,t));case h:case A:return I("containers[".concat(v,"]"),V.containers[v],t);case S:var G=n.key,H=n.value;return I("dependencies[".concat(G,"]"),H,t);case w:var q=n.key;return I("dependencies[".concat(q,"]"),null,t);case O:var Y=n.dependencies;return I("dependencies",Y,t);case j:return I("dependencies",V.dependencies,t);case E:var Q=n.widget,K=void 0===Q?{}:Q;if(K.dataGrid&&K.dataGrid.static)return t;var Z=k(t,"containers[".concat(n.target,"].collapsed[").concat(K.id));if(Z){var X=[].concat(r(k(t,"containers[".concat(n.target,"].layout"),[])),r(U(k(Z,"layout",[])))),J=F(k(t,"containers[".concat(n.target,"].layouts"),{}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return[].concat(r(e),r(U(k(Z,"layouts[".concat(t,"]"),[]))))}));return N(z(I("containers[".concat(n.target,"].layout"),X),I("containers[".concat(n.target,"].layouts"),J))(t),"containers[".concat(n.target,"].collapsed[").concat(K.id,"]"))}return I("containers[".concat(n.target,"].collapsed[").concat(K.id,"]"),{layout:L(k(t,"containers[".concat(n.target,"].layout"),[]),{i:K.id}),layouts:F(k(t,"containers[".concat(n.target,"].layouts"),{}),(function(e){return L(e,{i:K.id})}))},t);case x:var $=k(t,"containers[".concat(n.target,"].widgets"),[]).filter((function(e){return!e.dataGrid||!e.dataGrid.static})),ee=$.filter((function(e){return k(t,"containers[".concat(n.target,"].collapsed[").concat(e.id,"]"))})),te=$.filter((function(e){return!k(t,"containers[".concat(n.target,"].collapsed[").concat(e.id,"]"))})),ne=0===te.length;return ne?ee.reduce((function(t,n){return e(t,C(n))}),t):te.length>0?te.reduce((function(t,n){return e(t,C(n))}),t):t;case P:return I("tray",n.value,t);default:return t}}},"./MapStore2/web/client/selectors/annotations.js":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=n("./node_modules/reselect/es/index.js").createSelector,a=n("./MapStore2/web/client/selectors/layers.js").layersSelector,s=n("./MapStore2/web/client/selectors/map.js").projectionSelector,l=n("./MapStore2/web/client/selectors/maptype.js").isOpenlayers,c=n("./MapStore2/web/client/selectors/mapInfo.js").isMapInfoOpen,u=n("./node_modules/lodash/lodash.js"),p=u.head,d=u.get,f=n("./node_modules/object-assign/index.js"),m=i([a],(function(e){return p(e.filter((function(e){return"annotations"===e.id})))})),y=function(e){return d(e,"annotations.removing")},b=function(e){return d(e,"annotations.format")},g=function(e){return d(e,"annotations.aeronauticalOptions")},h=function(e){return d(e,"annotations.showUnsavedChangesModal",!1)},v=function(e){return d(e,"annotations.showUnsavedStyleModal",!1)},S=function(e){return d(e,"annotations.showUnsavedGeometryModal",!1)},w=function(e){return d(e,"annotations.showDeleteFeatureModal",!1)},O=function(e){return!!d(e,"annotations.closing")},j=function(e){return d(e,"annotations.editing")},E=function(e){return d(e,"annotations.featureType")},x=function(e){return d(e,"annotations.coordinateEditorEnabled")},P=function(e){return!!d(e,"annotations.drawing")},C=function(e){return d(e,"annotations.stylerType")},T=function(e){return d(e,"annotations.drawingText")},M=function(e){return d(e,"annotations.current")},_=function(e){return d(e,"annotations.editedFields",{})},A=function(e){return!!d(e,"annotations.styling")},R=function(e){return d(e,"annotations.selected",null)},I=function(e){return d(e,"annotations.unsavedChanges",!1)},D=function(e){return d(e,"annotations.unsavedGeometry",!1)},k=function(e){return d(e,"annotations.unsavedStyle",!1)},L=function(e){return d(e,"annotations.validationErrors",{})},N=function(e){return d(e,"annotations.config",{})},F=function(e){return d(e,"annotations.symbolList",[])},U=function(e){return d(e,"annotations.symbolErrors",[])},G=function(e){return(j(e)?"editing":m(e)&&M(e)&&"detail")||"list"},B=function(e){return f({},{symbolErrors:U(e),showEdit:l(e),mouseHoverEvents:c(e),closing:O(e),format:b(e),aeronauticalOptions:g(e),config:N(e),drawing:P(e),drawingText:T(e),errors:L(e),editing:j(e),coordinateEditorEnabled:x(e),editedFields:_(e),mode:G(e),selected:R(e),featureType:E(e),removing:y(e),mapProjection:s(e),showUnsavedChangesModal:h(e),showDeleteFeatureModal:w(e),showUnsavedGeometryModal:S(e),showUnsavedStyleModal:v(e),stylerType:C(e),styling:A(e),unsavedChanges:I(e),unsavedGeometry:D(e),unsavedStyle:k(e),symbolList:F(e)})},z=function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.annotations||{})},W=i([B,z,m,G],(function(e,t,n,r){return f({},{format:t.format,aeronauticalOptions:t.aeronauticalOptions,removing:t.removing,showUnsavedChangesModal:t.showUnsavedChangesModal,showUnsavedGeometryModal:t.showUnsavedGeometryModal,showUnsavedStyleModal:t.showUnsavedStyleModal,showDeleteFeatureModal:t.showDeleteFeatureModal,closing:!!t.closing,mode:r,annotations:n&&n.features||[],current:t.current||null,editing:e.editing,filter:t.filter||""},e.config?{config:e.config}:{})})),V=i([W],(function(e){var t=e.current;return{annotation:p(e.annotations.filter((function(e){return e.properties.id===t})))}}));e.exports={multiGeometrySelector:function(e){return d(e,"annotations.config.multiGeometry",!1)},symbolErrorsSelector:U,modeSelector:G,annotationsLayerSelector:m,annotationsInfoSelector:B,aeronauticalOptionsSelector:g,annotationsSelector:z,annotationsListSelector:W,annotationSelector:V,removingSelector:y,showUnsavedChangesModalSelector:h,showUnsavedStyleModalSelector:v,closingSelector:O,editingSelector:j,drawingSelector:P,stylerTypeSelector:C,drawingTextSelector:T,currentSelector:M,editedFieldsSelector:_,stylingSelector:A,unsavedChangesSelector:I,showUnsavedGeometryModalSelector:S,unsavedGeometrySelector:D,unsavedStyleSelector:k,formatSelector:b,errorsSelector:L,configSelector:N,symbolListSelector:F}},"./MapStore2/web/client/selectors/contextcreator.js":function(e,t,n){"use strict";n.r(t),n.d(t,"newContextSelector",(function(){return i})),n.d(t,"mapConfigSelector",(function(){return a})),n.d(t,"creationStepSelector",(function(){return s})),n.d(t,"resourceSelector",(function(){return l})),n.d(t,"mapViewerLoadedSelector",(function(){return c})),n.d(t,"reloadConfirmSelector",(function(){return u})),n.d(t,"showDialogSelector",(function(){return p})),n.d(t,"isLoadingSelector",(function(){return d})),n.d(t,"loadFlagsSelector",(function(){return f})),n.d(t,"isValidContextNameSelector",(function(){return m})),n.d(t,"contextNameCheckedSelector",(function(){return y})),n.d(t,"pluginsSelector",(function(){return b})),n.d(t,"initialEnabledPluginsSelector",(function(){return g})),n.d(t,"editedPluginSelector",(function(){return h})),n.d(t,"editedCfgSelector",(function(){return v})),n.d(t,"parsedCfgSelector",(function(){return S})),n.d(t,"cfgErrorSelector",(function(){return w})),n.d(t,"validationStatusSelector",(function(){return O})),n.d(t,"parsedTemplateSelector",(function(){return j})),n.d(t,"fileDropStatusSelector",(function(){return E})),n.d(t,"editedTemplateSelector",(function(){return x})),n.d(t,"filterTextSelector",(function(){return P})),n.d(t,"availablePluginsFilterTextSelector",(function(){return C})),n.d(t,"enabledPluginsFilterTextSelector",(function(){return T})),n.d(t,"availableTemplatesFilterTextSelector",(function(){return M})),n.d(t,"enabledTemplatesFilterTextSelector",(function(){return _})),n.d(t,"showBackToPageConfirmationSelector",(function(){return A})),n.d(t,"tutorialsSelector",(function(){return R})),n.d(t,"wasTutorialShownSelector",(function(){return I})),n.d(t,"tutorialStepSelector",(function(){return D}));var r=n("./node_modules/reselect/es/index.js"),o=n("./node_modules/lodash/lodash.js"),i=function(e){return e.contextcreator&&e.contextcreator.newContext},a=Object(r.createSelector)(i,(function(e){return e&&e.mapConfig})),s=function(e){return e.contextcreator&&e.contextcreator.stepId},l=function(e){return e.contextcreator&&e.contextcreator.resource},c=function(e){return e.contextcreator&&e.contextcreator.mapViewerLoaded},u=function(e){return e.contextcreator&&e.contextcreator.showReloadConfirm},p=function(e){return e.contextcreator&&e.contextcreator.showDialog},d=function(e){return e.contextcreator&&e.contextcreator.loading},f=function(e){return e.contextcreator&&e.contextcreator.loadFlags},m=function(e){return e.contextcreator&&e.contextcreator.isValidContextName},y=function(e){return e.contextcreator&&e.contextcreator.contextNameChecked},b=function(e){return e.contextcreator&&e.contextcreator.plugins},g=function(e){return e.contextcreator&&e.contextcreator.initialEnabledPlugins},h=function(e){return e.contextcreator&&e.contextcreator.editedPlugin},v=function(e){return e.contextcreator&&e.contextcreator.editedCfg},S=function(e){return e.contextcreator&&e.contextcreator.parsedCfg},w=function(e){return e.contextcreator&&e.contextcreator.cfgError},O=function(e){return Object(o.get)(e,"contextcreator.validationStatus",!0)},j=function(e){return e.contextcreator&&e.contextcreator.parsedTemplate},E=function(e){return e.contextcreator&&e.contextcreator.fileDropStatus},x=function(e){return e.contextcreator&&e.contextcreator.editedTemplate},P=function(e){return e.contextcreator&&e.contextcreator.filterText},C=Object(r.createSelector)(P,(function(e){return Object(o.get)(e,"availablePlugins")})),T=Object(r.createSelector)(P,(function(e){return Object(o.get)(e,"enabledPlugins")})),M=Object(r.createSelector)(P,(function(e){return Object(o.get)(e,"availableTemplates")})),_=Object(r.createSelector)(P,(function(e){return Object(o.get)(e,"enabledTemplates")})),A=function(e){return Object(o.get)(e,"contextcreator.showBackToPageConfirmation",!1)},R=function(e){var t;return null===(t=e.contextcreator)||void 0===t?void 0:t.tutorials},I=function(e){return function(t){var n,r;return(null===(n=t.contextcreator)||void 0===n||null===(r=n.wasTutorialShown)||void 0===r?void 0:r[e])||!1}},D=function(e){var t;return null===(t=e.contextcreator)||void 0===t?void 0:t.tutorialStep}},"./MapStore2/web/client/selectors/dashboard.js":function(e,t,n){var r=function(e){return e&&e.dashboard&&e.dashboard.resource},o=function(e){return e&&e.browser&&e.browser.mobile},i=(0,n("./node_modules/reselect/es/index.js").createSelector)(n("./MapStore2/web/client/selectors/router.js").pathnameSelector,r,o,(function(e,t,n){return n?!n:t&&t.canEdit||isNaN(e.substr(-4))}));e.exports={isDashboardAvailable:function(e){return e&&e.dashboard&&e.dashboard.editor&&e.dashboard.editor.available},isShowSaveOpen:function(e){return e&&e.dashboard&&e.dashboard.showSaveModal},isShowSaveAsOpen:function(e){return e&&e.dashboard&&e.dashboard.showSaveAsModal},isDashboardEditing:function(e){return e&&e.dashboard&&e.dashboard.editing},showConnectionsSelector:function(e){return e&&e.dashboard&&e.dashboard.showConnections},dashboardResource:r,isDashboardLoading:function(e){return e&&e.dashboard&&e.dashboard.loading},getDashboardSaveErrors:function(e){return e&&e.dashboard&&e.dashboard.saveErrors},isBrowserMobile:o,buttonCanEdit:i}},"./MapStore2/web/client/selectors/floatinglegend.js":function(e,t){e.exports={legendSizeSelector:function(e){return e.floatinglegend&&e.floatinglegend.size||{width:0,height:0}},legendExpandedSelector:function(e){return!(!e.floatinglegend||!e.floatinglegend.expanded)}}},"./MapStore2/web/client/selectors/geostory.js":function(e,t,n){"use strict";n.r(t),n.d(t,"createPathSelector",(function(){return d})),n.d(t,"isCollapsedSelector",(function(){return f})),n.d(t,"currentStorySelector",(function(){return m})),n.d(t,"currentPageSelector",(function(){return y})),n.d(t,"modeSelector",(function(){return b})),n.d(t,"controlSelectorCreator",(function(){return g})),n.d(t,"saveDialogSelector",(function(){return h})),n.d(t,"resourceSelector",(function(){return v})),n.d(t,"canEditSelector",(function(){return S})),n.d(t,"geostoryIdSelector",(function(){return w})),n.d(t,"isEditAllowedSelector",(function(){return O})),n.d(t,"loadingSelector",(function(){return j})),n.d(t,"errorsSelector",(function(){return E})),n.d(t,"saveErrorSelector",(function(){return x})),n.d(t,"sectionsSelector",(function(){return P})),n.d(t,"isToolbarEnabledSelector",(function(){return C})),n.d(t,"isSettingsEnabledSelector",(function(){return T})),n.d(t,"settingsSelector",(function(){return M})),n.d(t,"settingsCheckedSelector",(function(){return _})),n.d(t,"visibleItemsSelector",(function(){return A})),n.d(t,"oldSettingsSelector",(function(){return R})),n.d(t,"settingsChangedSelector",(function(){return I})),n.d(t,"selectedCardSelector",(function(){return D})),n.d(t,"sectionSelectorCreator",(function(){return k})),n.d(t,"sectionAtIndexSelectorCreator",(function(){return L})),n.d(t,"resourceIdSelectorCreator",(function(){return N})),n.d(t,"resourcesSelector",(function(){return F})),n.d(t,"resourceByIdSelectorCreator",(function(){return U})),n.d(t,"navigableItemsSelectorCreator",(function(){return G})),n.d(t,"totalItemsSelector",(function(){return B})),n.d(t,"currentPositionSelector",(function(){return z})),n.d(t,"isFocusOnContentSelector",(function(){return W})),n.d(t,"getFocusedContentSelector",(function(){return V})),n.d(t,"getCurrentFocusedContentEl",(function(){return H})),n.d(t,"settingsItemsSelector",(function(){return q})),n.d(t,"isMediaResourceUsed",(function(){return Y})),n.d(t,"isSharedStory",(function(){return Q})),n.d(t,"hasPendingChanges",(function(){return K})),n.d(t,"updateUrlOnScrollSelector",(function(){return Z}));var r=n("./node_modules/lodash/lodash.js"),o=n("./MapStore2/web/client/utils/GeoStoryUtils.js"),i=n("./MapStore2/web/client/selectors/security.js"),a=n("./MapStore2/web/client/selectors/router.js");function s(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=function(e){return function(t){return Object(r.get)(t,Object(o.n)("geostory.currentStory.".concat(e),t),"")}},f=function(e){return Object(r.get)(e,"geostory.isCollapsed",!1)},m=function(e){return Object(r.get)(e,"geostory.currentStory")},y=function(e){return Object(r.get)(e,"geostory.currentPage",{})},b=function(e){return Object(r.get)(e,"geostory.mode")},g=function(e){return function(t){return Object(r.get)(t,"geostory.controls.".concat(e))}},h=function(e){return g(o.b.SHOW_SAVE)(e)},v=function(e){return Object(r.get)(e,"geostory.resource")},S=function(e){return Object(r.get)(v(e),"canEdit",!1)},w=function(e){return Object(r.get)(v(e),"id")},O=function(e){return S(e)||Object(i.isAdminUserSelector)(e)},j=function(e){return Object(r.get)(e,"geostory.loading")},E=function(e){return Object(r.get)(e,"geostory.errors")},x=function(e){return Object(r.get)(E(e),"save")},P=function(e){return Object(r.get)(m(e),"sections",[])},C=function(e){return P(e).length>0},T=function(e){return Object(r.get)(e,"geostory.isSettingsEnabled",!1)},M=function(e){var t=Object(r.get)(m(e),"settings",{}),n=P(e).filter((function(e){return e.type===o.g.IMMERSIVE})),i=t.checked||[],a=Object(r.uniq)(i.map((function(e){return Object(o.k)(n,e)})).filter((function(e){return e})));return u(u({},t),{},{expanded:a})},_=function(e){return Object(r.get)(M(e),"checked",[])},A=function(e){return Object(r.get)(M(e),"checked",[]).reduce((function(e,t){return u(u({},e),{},p({},t,!0))}),{})},R=function(e){return Object(r.get)(e,"geostory.oldSettings",{})},I=function(e){return!Object(r.isEqual)(Object(r.get)(m(e),"settings",{}),R(e))},D=function(e){return Object(r.get)(e,"geostory.selectedCard","")},k=function(e){return function(t){return Object(r.find)(P(t),{id:e})}},L=function(e){return function(t){return(P(t)||[])[e]}},N=function(e){return function(t){return d("".concat(e,".resourceId"))(t)}},F=function(e){return Object(r.get)(m(e),"resources",[])},U=function(e){return function(t){return Object(r.find)(F(t),{id:e})}},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.withImmersiveSection,n=void 0!==t&&t,r=e.includeAlways,i=void 0===r||r;return function(e){var t=P(e),r=A(e);return t.reduce((function(e,t){if(t.type===o.g.TITLE&&(i||r[t.id]))return[].concat(s(e),[t]);if(t.type===o.g.PARAGRAPH&&(i||r[t.id]))return[].concat(s(e),[t]);if(t.type===o.g.BANNER&&(i||r[t.id]))return[].concat(s(e),[t]);if(t.type===o.g.IMMERSIVE){var a=t.contents&&t.contents.reduce((function(e,t){return i||r[t.id]?[].concat(s(e),[u(u({},t),{},{sectionId:e.id})]):e}),[])||[];return n?[].concat(s(e),[t],s(a)):[].concat(s(e),s(a))}return e}),[])}},B=function(e){return G({includeAlways:!0})(e).length},z=function(e){return Object(r.findIndex)(G({includeAlways:!0})(e),{id:y(e).columns&&y(e).columns[y(e).sectionId]?y(e).columns[y(e).sectionId]:y(e).sectionId||""})},W=function(e){return void 0!==Object(r.get)(e,"geostory.focusedContent.target")},V=function(e){return Object(r.get)(e,"geostory.focusedContent")},H=function(e){return d(Object(r.get)(e,"geostory.focusedContent.path",""))(e)},q=function(e){return P(e).reduce((function(e,t){if(t.type===o.g.IMMERSIVE){var n=t.contents&&t.contents.map((function(e){return{label:e.title||"",value:e.id}}))||[];return[].concat(s(e),[{label:t.title||"",value:t.id,children:n}])}return[].concat(s(e),[{label:t.title||"",value:t.id}])}),[])},Y=function(e,t){return!!Object(r.find)(P(e),(function(e){return function e(t,n){var o=n.contents,i=n.background;return n.resourceId===t||(!(!i||i.resourceId!==t)||!!o&&!!Object(r.find)(o,(function(n){return e(t,n)})))}(t,e)}))},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(a.pathnameSelector)(e).includes("geostory/shared")},K=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return null==t||null===(e=t.geostory)||void 0===e?void 0:e.pendingChanges},Z=function(e){return Object(r.get)(e,"geostory.updateUrlOnScroll",!1)}},"./MapStore2/web/client/selectors/mapsave.js":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n("./MapStore2/web/client/utils/MapUtils.js"),s=n("./MapStore2/web/client/selectors/map.js").mapSelector,l=n("./node_modules/reselect/es/index.js").createStructuredSelector,c=n("./MapStore2/web/client/selectors/catalog.js"),u=c.servicesSelector,p=c.selectedServiceSelector,d=n("./MapStore2/web/client/selectors/widgets.js"),f=d.getFloatingWidgets,m=d.getCollapsedState,y=d.getFloatingWidgetsLayout,b=n("./MapStore2/web/client/selectors/mapInfo.js").mapInfoConfigurationSelector,g=n("./MapStore2/web/client/selectors/dimension.js"),h=g.currentTimeSelector,v=g.offsetTimeSelector,S=n("./MapStore2/web/client/selectors/timeline.js").selectedLayerSelector,w=n("./MapStore2/web/client/selectors/layers.js"),O=w.layersSelector,j=w.groupsSelector,E=n("./MapStore2/web/client/selectors/backgroundselector.js").backgroundListSelector,x=n("./MapStore2/web/client/selectors/searchconfig.js"),P=x.textSearchConfigSelector,C=x.bookmarkSearchConfigSelector,T={},M=l({catalogServices:l({services:u,selectedService:p}),widgetsConfig:l({widgets:f,layouts:y,collapsed:m}),mapInfoConfiguration:b,dimensionData:l({currentTime:h,offsetTime:v}),timelineData:l({selectedLayer:S})}),_=function(e){var t=Object.keys(T).reduce((function(t,n){return o(o({},t),{},i({},n,T[n](e)))}),{});return o(o({},M(e)),t)},A=function(e){var t=s(e),n=O(e),r=j(e),o=E(e),i=P(e),l=C(e),c=_(e);return a.saveMapConfiguration(t,n,r,o,i,l,c)};e.exports={mapSaveSelector:A,mapOptionsToSaveSelector:_,mapHasPendingChangesSelector:function(e){var t=A(e),n=s(e)||{},r=(n.info||{}).canEdit,o=e.mapConfigRawData;return(r||!n.mapId)&&!a.compareMapChanges(o,t)},registerCustomSaveHandler:function(e,t){t?T[e]=t:delete T[e]}}},"./MapStore2/web/client/selectors/rulesmanager.js":function(e,t,n){var r=n("./node_modules/object-assign/index.js"),o=n("./node_modules/lodash/lodash.js"),i=n("./node_modules/reselect/es/index.js").createSelector,a={},s=function(e){return e.rulesmanager&&e.rulesmanager.selectedRules||[]},l=function(e){return e.rulesmanager&&e.rulesmanager.services},c=i(l,(function(e){return e&&Object.keys(e).map((function(e){return{value:e,label:e}}))})),u=i(s,(function(e){return e.rulesmanager&&e.rulesmanager.targetPosition||a}),(function(e,t){var n=t.offsetFromTop;return{showAdd:0===e.length,showEdit:1===e.length,showInsertBefore:1===e.length&&0!==n,showInsertAfter:1===e.length,showDel:e.length>0,showCache:0===e.length}}));e.exports={rulesSelector:function(e){return e.rulesmanager&&e.rulesmanager.rules?e.rulesmanager.rules.map((function(e){var t={};return r(t,{id:e.id}),r(t,{priority:e.priority}),r(t,{roleName:e.roleName?e.roleName:"*"}),r(t,{userName:e.userName?e.userName:"*"}),r(t,{service:e.service?e.service:"*"}),r(t,{request:e.request?e.request:"*"}),r(t,{workspace:e.workspace?e.workspace:"*"}),r(t,{layer:e.layer?e.layer:"*"}),r(t,{access:e.access}),t})):[]},optionsSelector:function(e){var t=e.rulesmanager&&e.rulesmanager.options||{},n={};return n.roles=t.roles,n.users=t.users&&t.users.map((function(e){return e.userName})),n.workspaces=t.workspaces&&t.workspaces.map((function(e){return e.name})),n.layers=t.layers&&t.layers.records&&o.uniq(t.layers.records.map((function(e){return e.dc.identifier.replace(/^.*?:/g,"")}))),n.layersPage=t.layersPage||1,n.layersCount=t.layersCount||0,n},selectedRules:s,filterSelector:function(e){return e.rulesmanager&&e.rulesmanager.filters||a},servicesSelector:c,rulesEditorToolbarSelector:u,isEditorActive:function(e){return e.rulesmanager&&!!e.rulesmanager.activeRule},activeRuleSelector:function(e){return e.rulesmanager&&e.rulesmanager.activeRule},servicesConfigSel:l,triggerLoadSel:function(e){return e.rulesmanager&&e.rulesmanager.triggerLoad},isLoading:function(e){return e.rulesmanager&&e.rulesmanager.loading},isRulesManagerConfigured:function(e){return e.localConfig&&e.localConfig.plugins&&!!e.localConfig.plugins.rulesmanager},geometryStateSel:function(e){return e.rulesmanager&&e.rulesmanager.geometryState}}},"./MapStore2/web/client/selectors/searchconfig.js":function(e,t,n){"use strict";n.r(t),n.d(t,"textSearchConfigSelector",(function(){return r})),n.d(t,"bookmarkSearchConfigSelector",(function(){return o}));var r=function(e){return e.searchconfig&&e.searchconfig.textSearchConfig},o=function(e){return e.searchbookmarkconfig&&e.searchbookmarkconfig.bookmarkSearchConfig}},"./MapStore2/web/client/selectors/styleeditor.js":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n("./node_modules/lodash/lodash.js"),s=a.get,l=a.head,c=a.uniqBy,u=a.find,p=a.isString,d=n("./MapStore2/web/client/selectors/layers.js"),f=d.layerSettingSelector,m=d.getSelectedLayer,y=n("./MapStore2/web/client/utils/StyleEditorUtils.js"),b=y.STYLE_ID_SEPARATOR,g=y.extractFeatureProperties,h=function(e){var t=f(e);return o(o({},m(e)||{}),t&&t.options||{})},v=function(e){var t=h(e);return t.style||t.availableStyles&&t.availableStyles[0]&&t.availableStyles[0].name};e.exports={temporaryIdSelector:function(e){return s(e,"styleeditor.temporaryId")},templateIdSelector:function(e){return s(e,"styleeditor.templateId")},statusStyleSelector:function(e){return s(e,"styleeditor.status")},errorStyleSelector:function(e){return s(e,"styleeditor.error")||{}},loadingStyleSelector:function(e){return s(e,"styleeditor.loading")},formatStyleSelector:function(e){return s(e,"styleeditor.format")||"css"},languageVersionStyleSelector:function(e){return s(e,"styleeditor.languageVersion")||{}},codeStyleSelector:function(e){return s(e,"styleeditor.code")},initialCodeStyleSelector:function(e){return s(e,"styleeditor.initialCode")||""},selectedStyleSelector:v,addStyleSelector:function(e){return s(e,"styleeditor.addStyle")||""},geometryTypeSelector:function(e){var t=h(e),n=g(t).geometryType;return void 0===n?"vector":n},layerPropertiesSelector:function(e){var t=h(e),n=g(t).properties;return void 0===n?{}:n},enabledStyleEditorSelector:function(e){return s(e,"styleeditor.enabled")},styleServiceSelector:function(e){return s(e,"styleeditor.service")||{}},canEditStyleSelector:function(e){return s(e,"styleeditor.canEdit")},getUpdatedLayer:h,selectedStyleFormatSelector:function(e){var t=(h(e)||{}).availableStyles,n=void 0===t?[]:t,r=v(e);return l(n.filter((function(e){return e.name===r})).map((function(e){return e.format})))},getAllStyles:function(e){var t=h(e),n=t.availableStyles||[],r=(l(n)||{}).name,i=t.style||t&&!t.style&&r;return{availableStyles:c(n.map((function(e){var t=e&&e.title&&p(e.title)&&e.title.split(b),n=t&&t[0]||e.name;return o(o({},e),{},{label:n})})),"name"),defaultStyle:r,enabledStyle:i}},editorMetadataSelector:function(e){var t;return null==e||null===(t=e.styleeditor)||void 0===t?void 0:t.metadata},selectedStyleMetadataSelector:function(e){var t=(h(e)||{}).availableStyles,n=void 0===t?[]:t,r=v(e);return(u(n,(function(e){var t=e.name;return r===t}))||{}).metadata||{}}}},"./MapStore2/web/client/selectors/tutorial.js":function(e,t){e.exports={tutorialSelector:function(e){return e&&e.tutorial}}},"./MapStore2/web/client/selectors/vectorstyler.js":function(e,t,n){var r=n("./node_modules/reselect/es/index.js").createSelector,o=n("./node_modules/lodash/lodash.js").head,i=function(e){return e.vectorstyler&&e.vectorstyler.rule&&o(e.vectorstyler.rules.filter((function(t){return t.id===e.vectorstyler.rule})))},a=r([i],(function(e){return{shapeStyle:e&&e.symbol||{}}}));e.exports={ruleselctor:i,symbolselector:a}},"./MapStore2/web/client/selectors/widgets.js":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n("./node_modules/lodash/lodash.js"),s=a.find,l=a.get,c=a.castArray,u=a.isArray,p=n("./MapStore2/web/client/selectors/map.js").mapSelector,d=n("./MapStore2/web/client/selectors/layers.js").getSelectedLayer,f=n("./MapStore2/web/client/selectors/router.js").pathnameSelector,m=n("./MapStore2/web/client/actions/widgets.js"),y=m.DEFAULT_TARGET,b=m.DEPENDENCY_SELECTOR_KEY,g=m.WIDGETS_REGEX,h=n("./MapStore2/web/client/utils/WidgetsUtils.js"),v=h.getWidgetsGroups,S=h.getWidgetDependency,w=n("./MapStore2/web/client/selectors/dashboard.js"),O=w.isDashboardAvailable,j=w.isDashboardEditing,E=n("./node_modules/reselect/es/index.js"),x=E.createSelector,P=E.createStructuredSelector,C=n("./MapStore2/web/client/utils/ReselectUtils.js").createShallowSelector,T=function(e){return l(e,"widgets.builder.settings")},M=function(e){return l(e,"widgets.dependencies")||{}},_=function(e){return Object.keys(M(e)).map((function(t){return M(e)[t]}))},A=function(e){return l(e,"widgets.builder.editor")},R=x(A,d,(function(e){return O(e)&&j(e)}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layer,n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;return t||!r&&n})),I=function(e){return l(e,"widgets.containers[".concat(y,"].widgets"))},D=function(e){return l(e,"widgets.containers[".concat(y,"].collapsed"))},k=x(I,D,(function(e,t){return e&&t?e.filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.id;return!t[n]})):e})),L=x(D,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e)})),N=function(e){return(I(e)||[]).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.widgetType;return"map"===t}))},F=function(e){return(I(e)||[]).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.widgetType;return"table"===t}))},U=x(N,F,p,f,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3?arguments[3]:void 0;return{availableDependencies:e.map((function(e){var t=e.id;return"widgets[".concat(t,"].map")})).concat(c(n).map((function(){return"map"}))).concat(c(t).filter((function(){return-1===r.indexOf("viewer")})).map((function(e){var t=e.id;return"widgets[".concat(t,"]")})))}})),G=x(N,F,p,f,A,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,i=o&&"map"!==o.widgetType?o&&o.layer||{}:o&&o.map&&o.map.layers||[];return{availableDependencies:e.map((function(e){var t=e.id;return"widgets[".concat(t,"].map")})).concat(c(n).map((function(){return n?"map":null}))).filter((function(e){return e})).concat(c(t).filter((function(){return-1===r.indexOf("viewer")})).filter((function(e){return u(i)||i.name===e.layer.name})).filter((function(e){return o&&o.id!==e.id})).map((function(e){var t=e.id;return"widgets[".concat(t,"]")})))}})),B=function(e){return l(T(e),"".concat(b))},z=x(I,(function(e){return v(e)})),W=function(e){return l(e,"widgets.containers[".concat(y,"].layouts"))},V=function(e){return l(e,"widgets.containers[".concat(y,"].widgets"))};e.exports={getFloatingWidgets:I,getVisibleFloatingWidgets:k,getCollapsedState:D,getCollapsedIds:L,getFloatingWidgetsLayout:W,getFloatingWidgetsCurrentLayout:function(e){return l(e,"widgets.containers[".concat(y,"].layout"))},getDashboardWidgets:V,dashboardHasWidgets:function(e){return(V(e)||[]).length>0},getDashboardWidgetsLayout:function(e){return l(e,"widgets.containers[".concat(y,"].layouts"))},getEditingWidget:A,getEditingWidgetLayer:function(e){return l(A(e),"layer")},returnToFeatureGridSelector:function(e){return l(e,"widgets.builder.editor.returnToFeatureGrid",!1)},getEditingWidgetFilter:function(e){return l(A(e),"filter")},getEditorSettings:T,getWidgetLayer:R,getMapWidgets:N,getWidgetAttributeFilter:function(e,t){return x(k,(function(n){var r=s(n,{id:e});return r&&r.quickFilters&&r.options&&s(r.options.propertyName,(function(e){return e===t}))&&r.quickFilters[t]||{}}))},availableDependenciesSelector:U,availableDependenciesForEditingWidgetSelector:G,dashBoardDependenciesSelector:function(){return{}},dependenciesSelector:C(M,_,(function(e){return _(e).map((function(t){return 0===t.indexOf("map.")?l(p(e),t.slice(4)):t.match(g)?S(t,I(e)):l(e,t)}))}),(function(e,t,n){return t.reduce((function(t,r,a){return o(o({},t),{},i({},Object.keys(e)[a],n[a]))}),{})})),isWidgetSelectionActive:function(e){return l(B(e),"active")},getDependencySelectorConfig:B,getWidgetsDependenciesGroups:z,widgetsConfig:P({widgets:I,layouts:W}),isTrayEnabled:function(e){return l(e,"widgets.tray")}}},"./MapStore2/web/client/selectors/widgetsTray.js":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n("./node_modules/reselect/es/index.js").createSelector,s=n("./MapStore2/web/client/selectors/widgets.js"),l=s.getFloatingWidgets,c=s.getFloatingWidgetsCurrentLayout,u=s.getCollapsedIds,p=s.getCollapsedState,d=n("./node_modules/lodash/lodash.js"),f=d.find,m=d.findIndex,y=d.sortBy,b=function(e){return!e.dataGrid||!e.dataGrid.static},g=a(l,u,c,p,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return y(e.filter(b).map((function(e){return m(t,(function(t){return t===e.id}))>=0?o(o({},e),{},{collapsed:!0}):e})),(function(e){var t=r[e.id]&&r[e.id].layout,o=f(n,{i:e.id})||t||{},i=o.x,a=void 0===i?0:i,s=o.y;return 100*(void 0===s?0:s)+a}))}));e.exports={trayWidgets:g}},"./MapStore2/web/client/utils/CatalogUtils.js":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n("./node_modules/object-assign/index.js"),s=n("./node_modules/lodash/lodash.js"),l=s.head,c=s.isArray,u=s.isString,p=s.castArray,d=s.isObject,f=s.sortBy,m=s.uniq,y=s.includes,b=s.get,g=s.isNil,h=n("./node_modules/url/url.js"),v=n("./MapStore2/web/client/utils/CoordinatesUtils.js"),S=n("./MapStore2/web/client/utils/ConfigUtils.js"),w=n("./MapStore2/web/client/utils/LayersUtils.js"),O=n("./MapStore2/web/client/utils/LocaleUtils.js"),j=n("./MapStore2/web/client/utils/WMTSUtils.js"),E=n("./MapStore2/web/client/utils/SecurityUtils.js").cleanAuthParamsFromURL,x=n("./MapStore2/web/client/api/WMS.js"),P=function(e){return e&&e.replace(/\/csw$/,"/")},C=function(e){return d(e)&&e._||e},T=function(e,t){return e.filter((function(n){return j.getTileMatrixSet(t,n,e,t,null)}))},M=function(e){var t=Array.isArray(e.references)?e.references:[e.references];return l([].filter.call(t,(function(t){return"WWW:LINK-1.0-http--image-thumbnail"===t.scheme||"thumbnail"===t.scheme||"WWW:DOWNLOAD-1.0-http--download"===t.scheme&&-1!==(t.value||"").indexOf("".concat(e.identifier||"","-thumb"))||"WWW:DOWNLOAD-REST_MAP"===t.scheme&&-1!==(t.value||"").indexOf("".concat(e.identifier||"","-thumb"))})))},_={csw:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e;return r&&r.records?r.records.map((function(e){var r,s,d,b=e.dc;if(b&&b.URI){var g=c(b.URI)?b.URI:b.URI&&[b.URI]||[],v=l([].filter.call(g,(function(e){return"thumbnail"===e.name})));r=v?v.value:null,s=l([].filter.call(g,(function(e){return e.protocol&&(e.protocol.match(/^OGC:WMS-(.*)-http-get-map/g)||e.protocol.match(/^OGC:WMS/g))})))}if(!s&&b&&b.references&&b.references.length){var S=Array.isArray(b.references)?b.references:[b.references];if(s=l([].filter.call(S,(function(e){return e.scheme&&(e.scheme.match(/^OGC:WMS-(.*)-http-get-map/g)||"OGC:WMS"===e.scheme)})))){var w=h.parse(s.value,!0),j=w.query&&w.query.layers||b.alternative;s=a({},s,{name:j})}}if(!s&&b&&b.references&&b.references.length){var E=Array.isArray(b.references)?b.references:[b.references];if(d=l([].filter.call(E,(function(e){return e.scheme&&"WWW:DOWNLOAD-REST_MAP"===e.scheme})))){var x=b.alternative;d=a({},d,{name:x})}}if(!r&&b&&b.references){var C=M(b);C&&(r=C.value)}var T=[];b&&b.references&&(Array.isArray(b.references)?b.references:[b.references]).filter((function(e){return e.scheme.indexOf("http-get-capabilities")>-1})).forEach((function(e){var n=0===e.value.indexOf("http")?e.value:(t&&t.catalogURL||"")+"/"+e.value;T.push({type:e.scheme,url:n})}));if(s&&s.name){0===s.value.indexOf("http")||a({},s,{value:(t&&t.catalogURL||"")+"/"+s.value});var _={type:s.protocol||s.scheme,url:s.value,SRS:[],params:{name:s.name}};T.push(_)}if(d&&d.name){var A={type:"arcgis",url:d.value,SRS:[],params:{name:d.name}};T.push(A)}r&&(0===r.indexOf("http")||(r=(P(t&&t.url)||"")+r));var R={boundingBox:e.boundingBox&&e.boundingBox.extent&&p(e.boundingBox.extent.join(","))};if(b&&(R=o(o({},R),f(Object.keys(b)).reduce((function(e,t){return o(o({},e),{},i({},t,m(p(b[t]))))}),{}))),b&&b.URI&&p(b.URI)&&p(b.URI).length&&(R=o(o({},R),{},{uri:["<ul>"+p(b.URI).map((function(e){return'<li><a target="_blank" href="'.concat(e.value,'">').concat(e.name,"</a></li>")})).join("")+"</ul>"]})),b&&b.subject&&p(b.subject)&&p(b.subject).length&&(R=o(o({},R),{},{subject:["<ul>"+p(b.subject).map((function(e){return"<li>".concat(e,"</li>")})).join("")+"</ul>"]})),T&&p(T).length?R=o(o({},R),{},{references:["<ul>"+p(T).map((function(e){return'<li><a target="_blank" href="'.concat(e.url,'">').concat(e.params&&e.params.name||e.url,"</a></li>")})).join("")+"</ul>"]}):delete R.references,b&&b.temporal){var I=b.temporal.split("; ");if(I.length){var D=I.filter((function(e){return-1!==e.indexOf("scheme=")})).map((function(e){var t=e.indexOf("=");return e.substr(t+1,e.length-1)}));D=D.length?D[0]:"W3C-DTF";var k=I.filter((function(e){return-1!==e.indexOf("start=")||-1!==e.indexOf("end=")})).map((function(e){var t=e.indexOf("="),r=e.substr(0,t),o=e.substr(t+1,e.length-1),i=e.length-t-1<=10;return y(["start","end"],r)&&"W3C-DTF"===D&&!i?O.getMessageById(n,"catalog.".concat(r))+new Date(o).toLocaleString():y(["start","end"],r)?O.getMessageById(n,"catalog.".concat(r))+o:""}));R=o(o({},R),{},{temporal:["<ul>"+k.map((function(e){return"<li>".concat(e,"</li>")})).join("")+"</ul>"]})}}return{boundingBox:e.boundingBox,description:b&&u(b.abstract)&&b.abstract||"",layerOptions:t&&t.layerOptions||{},identifier:b&&u(b.identifier)&&b.identifier||"",references:T,thumbnail:r,title:b&&u(b.title)&&b.title||"",tags:b&&b.tags||"",metadata:R}})):null},wms:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e&&e.records?e.records.map((function(n){return{capabilities:n,credits:n.credits,boundingBox:x.getBBox(n),description:n.Abstract||n.Title||n.Name,identifier:n.Name,service:e.service,tags:"",layerOptions:t&&t.layerOptions||{},title:w.getLayerTitleTranslations(n)||n.Name,formats:p(n.formats||[]),dimensions:(n.Dimension&&p(n.Dimension)||[]).map((function(e){return a({},{values:e._&&e._.split(",")||[]},e.$||{})})).filter((function(e){return e&&"time"!==e.name})),references:[{type:"OGC:WMS",url:t&&t.url,SRS:n.SRS&&(c(n.SRS)?n.SRS:[n.SRS])||[],params:{name:n.Name}}]}})):null},wmts:function(e,t){return e&&e.records?e.records.map((function(e){var n=p(j.getGetTileURL(e)||t&&t.url);1===n.length&&(n=n[0]);var r=j.getCapabilitiesURL(e),o=p(e.TileMatrixSetLink||[]).reduce((function(t,n){var r,o=l((e.TileMatrixSet&&p(e.TileMatrixSet)||[]).filter((function(e){return e["ows:Identifier"]===n.TileMatrixSet}))),s=o&&v.getEPSGCode(o["ows:SupportedCRS"]),c=n.TileMatrixSetLimits&&(n.TileMatrixSetLimits.TileMatrixLimits||[]).map((function(e){return{identifier:e.TileMatrix,ranges:{cols:{min:e.MinTileCol,max:e.MaxTileCol},rows:{min:e.MinTileRow,max:e.MaxTileRow}}}}))||o.TileMatrix.map((function(e){return{identifier:e["ows:Identifier"]}}));return a(t,(i(r={},o["ows:Identifier"],c),i(r,s,c),r))}),{}),s=function(e){var t=e["ows:WGS84BoundingBox"];return t||(t={"ows:LowerCorner":"-180.0 -90.0","ows:UpperCorner":"180.0 90.0"}),t}(e);return{title:C(e["ows:Title"]||e["ows:Identifier"]),description:C(e["ows:Abstract"]||e["ows:Title"]||e["ows:Identifier"]),identifier:C(e["ows:Identifier"]),tags:"",layerOptions:t&&t.layerOptions||{},style:e.style,capabilitiesURL:r,queryable:e.queryable,requestEncoding:e.requestEncoding,tileMatrixSet:e.TileMatrixSet,matrixIds:o,format:e.format,TileMatrixSetLink:p(e.TileMatrixSetLink),boundingBox:{extent:[s["ows:LowerCorner"].split(" ")[0],s["ows:LowerCorner"].split(" ")[1],s["ows:UpperCorner"].split(" ")[0],s["ows:UpperCorner"].split(" ")[1]],crs:"EPSG:4326"},references:[{type:"OGC:WMTS",url:n,SRS:T(e.SRS||[],o),params:{name:e["ows:Identifier"]}}]}})):null},tms:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e&&e.records){var n=t.service&&"tms"===t.service.provider;return n?e.records.map((function(e){return{title:e.title,tileMapUrl:e.href,description:"".concat(e.srs).concat(e.format?", "+e.format:""),tmsUrl:t.tmsUrl,references:[{type:"OGC:TMS",version:"1.0.0",url:t.url}]}})):e.records.map((function(e){return{title:e.title||e.provider,url:e.url,attribution:e.attribution,options:e.options,provider:e.provider,type:"tileprovider",references:[]}}))}return null},wfs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.records;return t?t.map((function(e){return o(o({},e),{},{references:[{type:"OGC:WFS-1.1.0-http-get-capabilities",url:e.url},{type:"OGC:WFS-1.1.0-http-get-feature",url:e.url}]})})):null},backgrounds:function(e){return e&&e.records?e.records.map((function(e){return{description:e.title,title:e.title,identifier:e.name,thumbnail:e.thumbURL,references:[],background:e}})):null}},A=function(e){return e.filter((function(e){return v.isSRSAllowed(e)})).reduce((function(e,t){return a(e,i({},t,!0))}),{})},R=function(e,t){var n=e.split("?"),r={};n.length>=2&&n[1]&&n[1].split(/[&;]/g).forEach((function(e){var n=e.split("=");-1===t.indexOf(n[0].toLowerCase())&&(r[n[0]]=n[1])}));return{url:n[0],params:r}},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.references,n=void 0===t?[]:t;return{wfs:l(n.filter((function(e){return e.type&&("OGC:WFS"===e.type||e.type.indexOf("OGC:WFS")>-1&&e.type.indexOf("http-get-feature")>-1)}))),wms:l(n.filter((function(e){return e.type&&("OGC:WMS"===e.type||e.type.indexOf("OGC:WMS")>-1&&e.type.indexOf("http-get-map")>-1)}))),wmts:l(n.filter((function(e){return e.type&&("OGC:WMTS"===e.type||e.type.indexOf("OGC:WMTS")>-1&&e.type.indexOf("http-get-map")>-1)}))),tms:l(n.filter((function(e){return e.type&&("OGC:TMS"===e.type||e.type.indexOf("OGC:TMS")>-1)})))}},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{references:[]};return{esri:l(e.references.filter((function(e){return e.type&&("ESRI:SERVER"===e.type||"arcgis"===e.type)})))}},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.references,n=void 0===t?[]:t,r=l(n.filter((function(e){return e.type&&e.type.indexOf("OGC:WMS")>-1&&e.type.indexOf("http-get-capabilities")>-1}))),o=l(n.filter((function(e){return e.type&&e.type.indexOf("OGC:WFS")>-1&&e.type.indexOf("http-get-capabilities")>-1}))),i=l(n.filter((function(e){return e.type&&e.type.indexOf("OGC:WMTS")>-1&&e.type.indexOf("http-get-capabilities")>-1}))),a=[];return r&&a.push({type:"WMS_GET_CAPABILITIES",url:r.url,labelId:"catalog.wmsGetCapLink"}),i&&a.push({type:"WMTS_GET_CAPABILITIES",url:i.url,labelId:"catalog.wmtsGetCapLink"}),o&&a.push({type:"WFS_GET_CAPABILITIES",url:o.url,labelId:"catalog.wfsGetCapLink"}),a},L=function(e){return e&&!c(e)&&-1!==e.indexOf(",")?e.split(",").map((function(e){return e.trim()})):e},N={buildSRSMap:A,removeParameters:R,getRecordLinks:k,extractOGCServicesReferences:I,extractEsriReferences:D,recordToLayer:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"wms",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.removeParams,i=void 0===r?[]:r,a=n.format,s=n.catalogURL,l=n.url,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},p=arguments.length>4?arguments[4]:void 0;if(!e||!e.references)return null;var d,f,m=I(e),y=m.wms,b=m.wmts,h=y||b,v=function(e){return R(S.cleanDuplicatedQuestionMarks(e),["request","layer","layers","service","version"].concat(i))},w=L(h.url);if(w&&c(w))d=w.map((function(e){return v(e)})).map((function(e){return e.url})),f=w.map((function(e){return v(e)})).map((function(e){return e.params})).reduce((function(e,t){return o(o({},e),t)}),{});else{var O=v(w||s),j=O.url,E=O.params;d=j,f=E}var x=function(e){return c(e)&&1===e.length?e[0]:e},P=x(l||d),C=A(h.SRS);return o(o(o({type:t,requestEncoding:e.requestEncoding,style:e.style,format:a,url:P,capabilitiesURL:e.capabilitiesURL,queryable:e.queryable,visibility:!0,dimensions:e.dimensions||[],name:h.params&&h.params.name,title:e.title||h.params&&h.params.name,matrixIds:"wmts"===t?e.matrixIds||[]:void 0,description:e.description||"",tileMatrixSet:"wmts"===t?e.tileMatrixSet||[]:void 0,credits:!S.getConfigProp("noCreditsFromCatalog")&&e.credits,bbox:{crs:e.boundingBox.crs,bounds:{minx:e.boundingBox.extent[0],miny:e.boundingBox.extent[1],maxx:e.boundingBox.extent[2],maxy:e.boundingBox.extent[3]}},links:k(e),params:f,allowedSRS:C,catalogURL:s},u),e.layerOptions),{},{localizedLayerStyles:g(p)?void 0:p})},getCatalogRecords:function(e,t,n,r){return _[e]&&_[e](t,n,r)||null},esriToLayer:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e||!e.references)return null;var n=D(e),r=n.esri;return o({type:r.type,url:r.url,visibility:!0,dimensions:e.dimensions||[],name:r.params&&r.params.name,bbox:{crs:e.boundingBox.crs,bounds:{minx:e.boundingBox.extent[0],miny:e.boundingBox.extent[1],maxx:e.boundingBox.extent[2],maxy:e.boundingBox.extent[3]}}},t)},tmsToLayer:function(e,t,n){var r=e.tileMapUrl,o=t.TileMap,a=void 0===o?{}:o,s=n.forceDefaultTileGrid,l=a.Title,c=a.Abstract,u=a.SRS,d=a.BoundingBox,f=void 0===d?{}:d,m=a.Origin,y=a.TileFormat,g=void 0===y?{}:y,h=a.TileSets,v=a.$,S=v.version,w=v.tilemapservice,O=b(f,"$",{}),j=O.minx,x=O.miny,P=O.maxx,C=O.maxy,T=b(m,"$"),M=T.x,_=T.y,A=b(g,"$",{}),R=A.width,I=A.height,D=A["mime-type"],k=A.extension,L=[parseFloat(R),parseFloat(I,10)],N=p(b(h,"TileSet",[]).map((function(e){return e.$}))).map((function(e){var t=e.href,n=e.order,r=e["units-per-pixel"];return{href:E(t),order:parseFloat(n),resolution:parseFloat(r)}})),F=b(h,"profile");return{title:l,visibility:!0,hideErrors:!0,name:l,allowedSRS:i({},u,!0),description:c,srs:u,version:S,tileMapService:w?E(w):void 0,type:"tms",profile:F,tileMapUrl:r,forceDefaultTileGrid:s,bbox:f&&{crs:u,bounds:{minx:parseFloat(j),miny:parseFloat(x),maxx:parseFloat(P),maxy:parseFloat(C)}},tileSets:N,origin:{x:parseFloat(M),y:parseFloat(_)},format:D,tileSize:L,extension:k}},wfsToLayer:function(e){return o({type:e.type||"wfs",search:{url:e.url,type:"wfs"},url:e.url,queryable:e.queryable,visibility:!0,name:e.name,title:e.title||e.name,description:e.description||"",bbox:e.boundingBox,links:k(e),style:{weight:1,color:"rgba(0, 0, 255, 1)",opacity:1,fillColor:"rgba(0, 0, 255, 0.1)",fillOpacity:.1,radius:10}},e.layerOptions)},tileProviderToLayer:function(e){return{type:"tileprovider",visibility:!0,url:e.url,title:e.title,attribution:e.attribution,options:e.options,provider:e.provider,name:e.provider}}};e.exports=N},"./MapStore2/web/client/utils/FeatureGridEditorUtils.js":function(e,t){e.exports={forceSelection:function(e){var t=e.oldValue,n=e.changedValue,r=e.data;return e.allowEmpty&&""===n?"":-1!==r.indexOf(n)?n:t}}},"./MapStore2/web/client/utils/FeatureTypeUtils.js":function(e,t,n){var r=n("./node_modules/lodash/lodash.js").get,o={"xsd:normalizedString":"string","xsd:string":"string","xsd:date":"date","xsd:dateTime":"date","xsd:date-time":"date-time","xsd:time":"time","xsd:decimal":"number","xsd:int":"number","xsd:integer":"number","xsd:long":"number","xsd:negativeInteger":"number","xsd:nonNegativeInteger":"number","xsd:nonPositiveInteger":"number","xsd:positiveInteger":"number","xsd:short":"number","xsd:unsignedLong":"number","xsd:unsignedInt":"number","xsd:unsignedShort":"number","xsd:number":"number","xsd:boolean":"boolean","xsd:double":"number","xsd:float":"number"};e.exports={describeFeatureTypeToAttributes:function(e){return r(e,"featureTypes[0].properties").filter((function(e){return 0!==e.type.indexOf("gml:")&&o[e.type]})).map((function(e){return{label:e.name,attribute:e.name,type:o[e.type],valueId:"id",valueLabel:"name",values:[]}}))}}},"./MapStore2/web/client/utils/FileUtils.js":function(e,t,n){var r=n("./node_modules/file-saver/FileSaver.js"),o=n("./node_modules/canvas-to-blob/index.js"),i=n("./node_modules/shpjs/lib/index.js"),a=n("./node_modules/@mapbox/togeojson/togeojson.js"),s=n("./node_modules/jszip/lib/index.js"),l=n("./node_modules/es6-promise/dist/es6-promise.js").Promise,c=new DOMParser,u=n("./node_modules/object-assign/index.js"),p=n("./node_modules/@mapbox/geojsonhint/lib/object.js").hint,d=n("./MapStore2/web/client/utils/ogc/WMC/index.js").toMapConfig,f={MIME_LOOKUPS:{avi:"video/avi",gpx:"application/gpx+xml",kmz:"application/vnd.google-earth.kmz",kml:"application/vnd.google-earth.kml+xml",zip:"application/zip",json:"application/json",geojson:"application/json",wmc:"application/vnd.wmc"},recognizeExt:function(e){return e.split(".").slice(-1)[0]},download:function(e,t,n){var o=new Blob([e],{type:n});r.saveAs(o,t)},downloadCanvasDataURL:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"snapshot.png",n=arguments.length>2?arguments[2]:void 0;f.download(o(e),t,n)},shpToGeoJSON:function(e){return[].concat(i.parseZip(e))},kmlToGeoJSON:function(e){var t=function(e){return[].slice.call(e.documentElement.getElementsByTagName("StyleMap")).map((function(e){return e.parentNode.removeChild(e)})),[].slice.call(e.documentElement.getElementsByTagName("Style")).map((function(e){return e.parentNode.removeChild(e)})),[].slice.call(e.documentElement.getElementsByTagName("LineStyle")).map((function(e){return e.parentNode.removeChild(e)})),[].slice.call(e.documentElement.getElementsByTagName("PointStyle")).map((function(e){return e.parentNode.removeChild(e)})),[].slice.call(e.documentElement.getElementsByTagName("PolyStyle")).map((function(e){return e.parentNode.removeChild(e)})),[].slice.call(e.documentElement.getElementsByTagName("IconStyle")).map((function(e){return e.parentNode.removeChild(e)})),[].slice.call(e.documentElement.getElementsByTagName("LabelStyle")).map((function(e){return e.parentNode.removeChild(e)})),[].slice.call(e.documentElement.getElementsByTagName("ListStyle")).map((function(e){return e.parentNode.removeChild(e)})),[].slice.call(e.documentElement.getElementsByTagName("BallonStyle")).map((function(e){return e.parentNode.removeChild(e)})),[].slice.call(e.documentElement.getElementsByTagName("styleUrl")).map((function(e){return e.parentNode.removeChild(e)})),e}(e);return[].concat(a.kml(t)).map((function(e){return u({},e,{fileName:t.getElementsByTagName("name")[0].innerHTML})}))},gpxToGeoJSON:function(e,t){return[].concat(a.gpx(e)).map((function(n){return u({},n,{fileName:e.getElementsByTagName("name")[0]&&e.getElementsByTagName("name")[0].innerHTML||t})}))},readZip:function(e){return new l((function(t,n){var r=new FileReader;r.onload=function(){t(r.result)},r.onerror=function(){n(r.error.name)},r.readAsArrayBuffer(e)}))},readKml:function(e){return new l((function(t,n){var r=new FileReader;r.onload=function(){t(c.parseFromString(r.result,"text/xml"))},r.onerror=function(){n(r.error.name)},r.readAsText(e)}))},readJson:function(e){return new l((function(t,n){var r=new FileReader;r.onload=function(){try{t(JSON.parse(r.result))}catch(e){n(e)}},r.onerror=function(){n(r.error.name)},r.readAsText(e)}))},readKmz:function(e){var t=new s;return new l((function(n,r){t.loadAsync(e).then((function(e){e.filter((function(e){return-1!==e.indexOf("kml")})).forEach((function(e){return e.async("string").then((function(e){n(c.parseFromString(e,"text/xml"))})).catch((function(e){r(e.message)}))}))}))}))},readGeoJson:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new l((function(n,r){var o=new FileReader;o.onload=function(){try{var e=JSON.parse(o.result);n({geoJSON:e,errors:p(e).filter((function(e){return t||"message"!==e.level}))})}catch(e){r(e)}},o.onerror=function(){r(o.error.name)},o.readAsText(e)}))},readWMC:function(e){return new l((function(t,n){var r=new FileReader;r.onload=function(){d(r.result,!0).then((function(e){return t(e)})).catch((function(e){return n(e)}))},r.onerror=function(){n(r.error.name)},r.readAsText(e)}))},checkShapePrj:function(e){var t=new s;return new l((function(n){t.loadAsync(e).then((function(e){var t=e.files,r=void 0===t?{}:t,o=Object.keys(r).filter((function(e){return!r[e].dir&&0!==e.indexOf("__MACOSX")&&e.indexOf(".shp")===e.length-4})).map((function(e){return e.slice(0,-4)})).reduce((function(e,t){return e.concat(!r["".concat(t,".prj")]&&t||[])}),[]);n(o)}))}))}};e.exports=f},"./MapStore2/web/client/utils/GeoCodeUtils.js":function(e,t){function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function r(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i={nominiatimIndexToBboxIndex:function(e){switch(e){case 0:return 1;case 1:return 3;case 2:return 0;case 3:return 2;default:return-1}},nominatimToGeoJson:function(e){return null===e?[]:e.map((function(e){return{properties:r({},e),id:e.osm_id,type:"Feature",bbox:e.boundingbox.map((function(e){return parseFloat(e)})).reduce((function(e,t,n){return e[i.nominiatimIndexToBboxIndex(n)]=t,e}),[]),geometry:e.geojson||{type:"Point",coordinates:[parseFloat(e.lon),parseFloat(e.lat)]}}}))},nominatimToLayer:function(e,t){return{type:"vector",visibility:!0,name:e||"Search Results",styleName:"marker",features:i.nominatimToGeoJson(t)}}};e.exports=i},"./MapStore2/web/client/utils/GeoStoryUtils.js":function(e,t,n){"use strict";n.d(t,"c",(function(){return C})),n.d(t,"h",(function(){return T})),n.d(t,"g",(function(){return M})),n.d(t,"a",(function(){return _})),n.d(t,"f",(function(){return A})),n.d(t,"d",(function(){return R})),n.d(t,"e",(function(){return I})),n.d(t,"b",(function(){return D})),n.d(t,"t",(function(){return k})),n.d(t,"l",(function(){return L})),n.d(t,"p",(function(){return N})),n.d(t,"r",(function(){return F})),n.d(t,"v",(function(){return U})),n.d(t,"i",(function(){return B})),n.d(t,"j",(function(){return z})),n.d(t,"m",(function(){return W})),n.d(t,"n",(function(){return V})),n.d(t,"o",(function(){return H})),n.d(t,"k",(function(){return q})),n.d(t,"s",(function(){return Y})),n.d(t,"q",(function(){return Q})),n.d(t,"u",(function(){return K}));var r=n("./node_modules/lodash/get.js"),o=n.n(r),i=n("./node_modules/lodash/findIndex.js"),a=n.n(i),s=n("./node_modules/lodash/toPath.js"),l=n.n(s),c=n("./node_modules/lodash/isArray.js"),u=n.n(c),p=n("./node_modules/lodash/values.js"),d=n.n(p),f=(n("./node_modules/lodash/filter.js"),n("./node_modules/lodash/merge.js")),m=n.n(f),y=n("./node_modules/lodash/isString.js"),b=n.n(y),g=n("./node_modules/lodash/isObject.js"),h=n.n(g),v=n("./node_modules/lodash/includes.js"),S=n.n(v),w=n("./node_modules/lodash/replace.js"),O=n.n(w),j=n("./node_modules/uuid/index.js"),E=n.n(j);function x(e){return function(e){if(Array.isArray(e))return P(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return P(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return P(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var C="EMPTY_CONTENT",T={CASCADE:"cascade"},M={TITLE:"title",PARAGRAPH:"paragraph",IMMERSIVE:"immersive",BANNER:"banner"},_={TEXT:"text",MEDIA:"media",WEBPAGE:"webPage",COLUMN:"column"},A={MEDIA:"template-media",WEBPAGE:"template-web-page"},R={IMAGE:"image",MAP:"map",VIDEO:"video"},I={EDIT:"edit",VIEW:"view"},D={SHOW_SAVE:"save.show",LOADING:"loading"},k={StoryTypes:d()(T),SectionTypes:d()(M),MediaTypes:d()(R),Modes:d()(I)},L=function(e){var t=e.theme,n=void 0===t?{}:t,r=e.align,o=void 0===r?"center":r,i=e.size,a=void 0===i?"full":i,s=(null==n?void 0:n.value)||b()(n)&&n,l=s&&"custom"!==s&&b()(s)&&" ms-".concat(s)||"",c=" ms-align-".concat(o),u=" ms-size-".concat(a);return"".concat(l).concat(c).concat(u)},N=function(e){var t=e.theme,n=void 0===t?{}:t,r=null==n?void 0:n.value,o=null==n?void 0:n[r];return h()(o)&&o||{}},F=function(e){return e.type===M.PARAGRAPH&&e&&u()(e.contents)&&e.contents.length&&u()(e.contents[0].contents)&&e.contents[0].contents.length&&e.contents[0].contents[0].type===_.MEDIA},U=function(e,t){var n=document.getElementById(e);n&&n.scrollIntoView(t)},G={zoomControl:!0,mapInfoControl:!1,mapOptions:{scrollWheelZoom:!1,interactions:{mouseWheelZoom:!1,dragPan:!0}}},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return m()({},G,e)},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return m()({},e,t)},W=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e};switch(t){case M.TITLE:return{id:E()(),type:M.TITLE,title:n("geostory.builder.defaults.titleTitle"),cover:!1,contents:[{id:E()(),type:_.TEXT,html:"",size:"large",align:"center",theme:"bright",background:{fit:"cover",size:"full",align:"center"}}]};case M.BANNER:return{id:E()(),type:M.BANNER,title:n("geostory.builder.defaults.titleBanner"),cover:!1,contents:[{id:E()(),background:{fit:"cover",size:"full",align:"center"}}]};case M.PARAGRAPH:return{id:E()(),type:M.PARAGRAPH,title:n("geostory.builder.defaults.titleParagraph"),contents:[{id:E()(),type:_.COLUMN,size:"full",align:"center",contents:[{id:E()(),type:_.TEXT,html:""}]}]};case M.IMMERSIVE:return{id:E()(),type:M.IMMERSIVE,title:n("geostory.builder.defaults.titleImmersive"),contents:[e(_.COLUMN,n)]};case A.MEDIA:return{id:E()(),type:M.PARAGRAPH,title:n("geostory.builder.defaults.titleMedia"),contents:[{id:E()(),type:_.COLUMN,contents:[{id:E()(),type:_.MEDIA,size:"large",align:"center"}]}]};case A.WEBPAGE:return{id:E()(),type:M.PARAGRAPH,title:n("geostory.builder.defaults.titleWebPageSection"),contents:[{id:E()(),type:_.COLUMN,contents:[{id:E()(),type:_.WEBPAGE,size:"medium",align:"center"}]}]};case _.COLUMN:return{id:E()(),type:_.COLUMN,align:"left",size:"small",theme:"bright",title:n("geostory.builder.defaults.titleImmersiveContent"),contents:[{id:E()(),type:_.TEXT,html:""}],background:{fit:"cover",size:"full",align:"center"}};case _.TEXT:return{id:E()(),type:_.TEXT,title:n("geostory.builder.defaults.titleText"),html:""};case _.IMAGE:return{id:E()(),type:t,title:n("geostory.builder.defaults.titleMedia"),size:"full",align:"center"};case _.WEBPAGE:return{id:E()(),type:t,title:n("geostory.builder.defaults.titleWebPage"),size:"medium",align:"center"};case _.MEDIA:return{id:E()(),type:t,title:n("geostory.builder.defaults.titleUnknown"),size:"large",align:"center"};default:return{id:E()(),type:t,title:n("geostory.builder.defaults.titleUnknown"),size:"full",align:"center"}}},V=function(e,t){return l()(e).reduce((function(e,n){if(n&&0===n.indexOf("{")){var r=JSON.parse(n),i=o()(t,e),s=a()(i,r);return s>=0?[].concat(x(e),[s]):e}return[].concat(x(e),[n])}),[])},H=function(e,t){return l()(e).reduce((function(e,n){var r=e.path,i=e.flatPath;if(n&&0===n.indexOf("{")){var s=JSON.parse(n),l=o()(t,r),c=a()(l,s);if(c>=0){var u=l[c],p=u.id,d=u.type;return{path:[].concat(x(r),[c]),flatPath:[].concat(x(i),[{id:p,type:r[r.length-1],contentType:d}])}}return{path:r,flatPath:i}}return{path:[].concat(x(r),[n]),flatPath:i}}),{path:[],flatPath:[]})},q=function(e,t){return e.reduce((function(e,n){return S()(n.contents.map((function(e){return e.id})),t)?n.id:e}),null)},Y=function(e){return e.type===M.PARAGRAPH&&!1!==e.editURL&&e&&u()(e.contents)&&e.contents.length&&u()(e.contents[0].contents)&&e.contents[0].contents.length&&e.contents[0].contents[0].type===_.WEBPAGE&&!1!==e.contents[0].contents[0].editURL},Q=function(e,t){if(t)switch(e){case"small":return.4*t;case"medium":return.6*t;case"large":return.8*t;default:return t}return 0},K=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,i="EMPTY",a=t.substring(t.indexOf(n)).split("/");return r&&n?a.length>1&&a[1]?3===a.length?O()(e,"".concat(a[1],"/").concat(a[2]),"".concat(r)):O()(e,"".concat(a[1]),"".concat(r)):(t.includes("shared"),""!==a[1]?"".concat(e,"/").concat(r):"".concat(e).concat(r)):!r&&o&&b()(o)&&o!==i&&a.length>1?t.includes("shared")&&!a[1]?e:3===a.length?O()(e,"".concat(a[2]),"".concat(o)):"".concat(e,"/").concat(o):e}},"./MapStore2/web/client/utils/GraphUtils.js":function(e,t){var n=function(e,t,n){var r,o,i=[],a=[],s=e;for(i.push(s);i.length>0;)if(!n[s=i.shift()])for(n[s]=!0,a.push(s),r=0;r<t.length;r+=1)(o=t[r])[0]!==s||n[o[1]]?o[1]!==s||n[o[0]]||i.push(o[0]):i.push(o[1]);return a};e.exports={bfs:n,findGroups:function(e){for(var t={},r=[],o=0,i=e.length;o<i;o+=1){var a=e[o],s=a[0],l=a[1],c=null;t[s]?t[l]||(c=l):c=s,c&&r.push(n(c,e,t))}return r}}},"./MapStore2/web/client/utils/MeasurementUtils.js":function(e,t,n){"use strict";n.r(t),n.d(t,"convertMeasuresToGeoJSON",(function(){return g}));var r=n("./node_modules/lodash/lodash.js"),o=n("./node_modules/uuid/v1.js"),i=n.n(o),a=n("./MapStore2/web/client/utils/AnnotationsUtils.js"),s=n("./MapStore2/web/client/utils/MeasureUtils.js"),l=n("./MapStore2/web/client/utils/CoordinatesUtils.js");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var m=function(e,t){return{length:Object(r.round)(Object(s.convertUom)(t,"m",e.length.label)||0,2)+" "+e.length.label,area:Object(r.round)(Object(s.convertUom)(t,"sqm",e.area.label)||0,2)+" "+e.area.label,bearing:Object(s.getFormattedBearingValue)(Object(r.round)(t||0,6)).toString()}},y={offsetY:1,fontSize:"10",fontSizeUom:"px",fontFamily:"Courier New",font:"10px Courier New",textAlign:"center",color:"#000000",opacity:1,fillColor:"#000000",fillOpacity:1},b={offsetY:-15,fontSize:"13",fontSizeUom:"px",fontFamily:"Courier New",font:"13px Courier New",textAlign:"center",color:"#000000",opacity:1,fillColor:"#000000",fillOpacity:1},g=function(e,t,n,o,c,p){return{type:"FeatureCollection",features:[].concat(d(Object(r.flatten)(e.map((function(e){return function(e,t,n){var r=n||b;return[{type:"Feature",geometry:{type:"LineString"===e.geometry.type?"MultiPoint":e.geometry.type,coordinates:Object(s.validateFeatureCoordinates)(e.geometry)},properties:{id:i()(),isValidFeature:!0,geometryGeodesic:"LineString"===e.geometry.type?{type:"LineString",coordinates:Object(l.transformLineToArcs)(e.geometry.coordinates)}:null,useGeodesicLines:"LineString"===e.geometry.type},style:[u(u({},a.DEFAULT_ANNOTATIONS_STYLES[e.geometry.type]),{},{type:e.geometry.type,id:i()(),geometry:"LineString"===e.geometry.type?"lineToArc":null,title:"".concat(e.geometry.type," Style"),filtering:!0})].concat("LineString"===e.geometry.type?Object(a.getStartEndPointsForLinestring)():[])}].concat(d(e.properties.values.map((function(e){var n=e.value,o=e.formattedValue,a=e.type;return{type:"Feature",geometry:{type:"Point",coordinates:e.position},properties:{valueText:o||m(t,n)[a],isText:!0,isValidFeature:!0,id:i()()},style:u(u({},r),{},{id:i()(),filtering:!0,title:"Text Style",type:"Text"})}}))))}(e,n,p)})))),d(t.filter((function(e){return!!e})).map((function(e){var t=e.text;return{type:"Feature",geometry:{type:"Point",coordinates:e.position},properties:{valueText:t,isValidFeature:!0,isText:!0,id:i()()},style:u(u({},y),{},{id:i()(),filtering:!0,title:"Text Style",type:"Text"})}})))),properties:{id:o,description:c},style:{}}}},"./MapStore2/web/client/utils/RuleServiceUtils.jsx":function(e,t,n){var r=n("./node_modules/lodash/lodash.js").castArray;e.exports={convertRuleGS2GF:function(e){var t=e.id,n=e.priority,o=e.access,i=e.layer,a=e.workspace,s=e.service,l=e.request,c=e.userName,u=e.roleName,p=e.limits,d=e.addressRange,f=e.layerDetails;return{id:t,priority:n,grant:o,layer:i,workspace:a,service:s,request:l,username:c,rolename:u,limits:p,ipaddress:d,constraints:f&&i&&{type:f.layerType,defaultStyle:f.defaultStyle,cqlFilterRead:f.cqlFilterRead,cqlFilterWrite:f.cqlFilterWrite,restrictedAreaWkt:f.allowedArea,allowedStyles:f.allowedStyles&&{style:r(f.allowedStyles)},attributes:f.attributes&&{attribute:f.attributes.map((function(e){return{name:e.name,access:e.accessType}}))}}}},convertRuleGF2GS:function(e){return{id:e.id,priority:e.priority,access:e.grant,layer:e.layer,workspace:e.workspace,service:e.service,request:e.request,userName:e.username,roleName:e.rolename,limits:e.limits,addressRange:e.ipaddress}}}},"./MapStore2/web/client/utils/RulesEditor.js":function(e,t,n){var r=n("./node_modules/lodash/lodash.js"),o=r.isEqual,i=r.isEmpty,a=/^((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)(\.)){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?(\/)(?:3[0-2]|[1-2]?[0-9]))\b/g,s={isSaveDisabled:function(e,t){return s.isRulePristine(e,t)&&t&&t.hasOwnProperty("id")},areDetailsActive:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.grant;return!!e&&"DENY"!==n},isRulePristine:function(e,t){return o(e,t)},isRuleValid:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.ipaddress,n=void 0===t?"":t;return!(null!==n&&n.length>0)||!!n.match(a)},askConfirm:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.constraints,n=void 0===t?{}:t,r=arguments.length>1?arguments[1]:void 0,o=arguments.length>2?arguments[2]:void 0;return!i(n)&&("workspace"===r||"layer"===r||"grant"===r&&"ALLOW"!==o)},checkIp:a};e.exports=s},"./MapStore2/web/client/utils/SLDUtils.js":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n("./node_modules/object-assign/index.js"),s=n("./node_modules/w3c-schemas/w3c-schemas.js").XLink_1_0,l=n("./node_modules/ogc-schemas/ogc-schemas.js"),c=l.WMS_1_3_0,u=l.SMIL_2_0_Language,p=l.SMIL_2_0,d=l.GML_2_1_2,f=l.GML_3_1_1,m=l.OWS_1_0_0,y=l.Filter_1_1_0,b=l.Filter_1_0_0,g=l.SE_1_1_0,h=n("./node_modules/ogc-schemas/lib/SLD_1_0_0_GeoServer.js").SLD_1_0_0;h.tis[4].ps=[{n:"vendorOption",mno:0,col:!0,en:"VendorOption",ti:".VendorOption"}];var v=new(n("./node_modules/@boundlessgeo/jsonix/jsonix.js").Jsonix.Context)([s,c,m,u,p,d,f,y,b,g,h],{namespacePrefixes:{"http://www.opengis.net/ogc":"ogc","http://www.opengis.net/gml":"gml","http://www.opengis.net/sld":"sld"},mappingStyle:"simplified"}).createMarshaller(),S=function(e){var t=e.r,n=e.g,r=e.b;return"#".concat(t<16?0:"").concat(t.toString(16)).concat(n<16?0:"").concat(n.toString(16)).concat(r<16?0:"").concat(r.toString(16))},w=function(e){return{TYPE_NAME:"SLD_1_0_0.ParameterValueType",content:[e]}},O=function(e){return e.map((function(e){return a({TYPE_NAME:"SLD_1_0_0.ColorMapEntry"},e)}))},j=function(e,t,n){return{TYPE_NAME:"SLD_1_0_0.ColorMap",type:e,extended:t,colorMapEntry:O(n)}},E=function(e,t){return{TYPE_NAME:"SLD_1_0_0.VendorOption",name:e,value:""+t}},x=function(e){var t={TYPE_NAME:"SLD_1_0_0.ContrastEnhancement"};switch(e.contrast){case"Normalize":t.normalize={TYPE_NAME:"SLD_1_0_0.Normalize"},"none"!==e.algorithm&&(t.normalize.vendorOption=function(e){return[E("algorithm",e.algorithm),E("minValue",e.min),E("maxValue",e.max)]}(e));break;case"Histogram":t.histogram={TYPE_NAME:"SLD_1_0_0.Histogram"};break;case"GammaValue":t.gammaValue=e.gammaValue}return t},P=function(e,t){var n={TYPE_NAME:"SLD_1_0_0.ChannelSelection"},r=function(e){return{TYPE_NAME:"SLD_1_0_0.SelectedChannelType",sourceChannelName:e}}(e.band);return"none"!==e.contrast&&(r.contrastEnhancement=x(e)),n[t]=r,n},C=function(e,t,n){var r=P(e,"redChannel"),o=P(t,"greenChannel"),i=P(n,"blueChannel");return a(r,o,i),r},T=function(e,t){return{"sld:StyledLayerDescriptor":{TYPE_NAME:"SLD_1_0_0.StyledLayerDescriptor",version:"1.0.0",namedLayerOrUserLayer:[{TYPE_NAME:"SLD_1_0_0.NamedLayer",name:e.name,namedStyleOrUserStyle:[{TYPE_NAME:"SLD_1_0_0.UserStyle",featureTypeStyle:[{TYPE_NAME:"SLD_1_0_0.FeatureTypeStyle",rule:[{TYPE_NAME:"SLD_1_0_0.Rule",symbolizer:[{"sld:RasterSymbolizer":t}]}]}]}]}]}}},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.a,n=void 0===t?1:t,r=e.r,o=void 0===r?0:r,i=e.g,a=void 0===i?0:i,s=e.b,l=void 0===s?255:s,c=e.width,u=void 0===c?1:c;return{cssParameter:[{TYPE_NAME:"SLD_1_0_0.CssParameter",content:[S({r:o,g:a,b:l})],name:"stroke"},{TYPE_NAME:"SLD_1_0_0.CssParameter",content:["".concat(n)],name:"stroke-opacity"},{TYPE_NAME:"SLD_1_0_0.CssParameter",content:["".concat(u)],name:"stroke-width"}]}},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.a,n=void 0===t?1:t,r=e.r,o=void 0===r?0:r,i=e.g,a=void 0===i?0:i,s=e.b,l=void 0===s?255:s;return{cssParameter:[{TYPE_NAME:"SLD_1_0_0.CssParameter",content:[S({r:o,g:a,b:l})],name:"fill"},{TYPE_NAME:"SLD_1_0_0.CssParameter",content:["".concat(n)],name:"fill-opacity"}]}},A=function(e){return{TYPE_NAME:"SLD_1_0_0.Mark",fill:_(e.fill),stroke:M(o(o({},e.color),{},{width:e.width})),wellKnownName:(t=e.markName,{TYPE_NAME:"SLD_1_0_0.WellKnownName",content:[t]})};var t},R=function(e){return{TYPE_NAME:"SLD_1_0_0.Graphic",externalGraphicOrMark:[A(e)],size:(t=e.radius,{TYPE_NAME:"SLD_1_0_0.ParameterValueType",content:["".concat(t)]})};var t},I=function(e){return{TYPE_NAME:"SLD_1_0_0.PolygonSymbolizer",fill:_(e.fill),stroke:M(o(o({},e.color),{},{width:e.width}))}},D=function(e){return{TYPE_NAME:"SLD_1_0_0.LineSymbolizer",stroke:M(o(o({},e.color),{},{width:e.width}))}},k=function(e){return{TYPE_NAME:"SLD_1_0_0.PointSymbolizer",graphic:R(e)}},L=function(e){switch(e.type){case"Point":return{PointSymbolizer:k(e)};case"Line":return{LineSymbolizer:D(e)};case"Polygon":return{PolygonSymbolizer:I(e)};default:return I(e)}},N=function(e){return e.map((function(e){var t={};return e.maxDenominator&&(t.maxScaleDenominator=e.maxDenominator),e.minDenominator&&(t.minScaleDenominator=e.minDenominator),o({TYPE_NAME:"SLD_1_0_0.Rule",symbolizer:[L(e.symbol)]},t)}))};e.exports={jsonToSLD:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.styletype,n=e.opacity,r=void 0===n?"1.0":n,o=e.state,i=e.layer,a={TYPE_NAME:"SLD_1_0_0.RasterSymbolizer"};switch(a.opacity=w(r),t){case"pseudo":a.colorMap=j(o.pseudocolor.type,o.pseudocolor.extended,o.pseudocolor.colorMapEntry),"none"!==o.pseudoband.band&&(a.channelSelection=P(o.pseudoband,"grayChannel"));break;case"gray":a.channelSelection=P(o.grayband,"grayChannel");break;case"rgb":a.channelSelection=C(o.redband,o.greenband,o.blueband)}return v.marshalString(T(i,a))},vecStyleToSLD:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.rules,n=void 0===t?[]:t,r=e.layer,o=void 0===r?{}:r;return v.marshalString({"sld:StyledLayerDescriptor":{TYPE_NAME:"SLD_1_0_0.StyledLayerDescriptor",version:"1.0.0",namedLayerOrUserLayer:[{TYPE_NAME:"SLD_1_0_0.NamedLayer",name:o.name,namedStyleOrUserStyle:[{TYPE_NAME:"SLD_1_0_0.UserStyle",featureTypeStyle:[{TYPE_NAME:"SLD_1_0_0.FeatureTypeStyle",rule:N(n)}]}]}]}})}}},"./MapStore2/web/client/utils/ShareUtils.js":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=n("./node_modules/url/url.js"),l=n("./node_modules/lodash/lodash.js"),c=l.trimStart,u=l.replace,p={getAbsoluteURL:function(e,t){return 0===t.indexOf("http")||0===t.indexOf("//")?t:s.resolve(e,t)},getConfigUrl:function(e,t){var n=s.parse(e,!0);if(!n.hash)return null;var r=n.hash.lastIndexOf("/")+1,o=n.hash.lastIndexOf("?")>=0?n.hash.lastIndexOf("?"):n.hash.length,i=n.hash.substring(r,o);return s.resolve(p.getAbsoluteURL(e,t),"data/"+i)},getApiUrl:function(e){var t=s.parse(e,!1);return t.protocol+"//"+t.host+t.pathname},removeQueryFromUrl:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=s.parse(e),n=t.hash,r=void 0===n?"":n,i=a(t,["hash"]),l=s.parse(r&&c(r,"#")||""),u=s.format(o(o({},l),{},{query:null,search:null}));return s.format(o(o({},i),{},{query:null,search:null,hash:u?"#".concat(u):null}))},getSharedGeostoryUrl:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.match(/\#\/(geostory)/)){var n=e.match(/\/(geostory)\/((shared)|(newgeostory))/)?e:e.replace("/geostory/","/geostory/shared/");if(t){var r,o=null===(r=n.split("#")[1])||void 0===r?void 0:r.split("/");5===o.length&&o.includes("shared")&&(n=u(n,"/".concat(o[o.length-1]),"")),6===o.length&&o.includes("shared")&&(n=u(n,"/".concat(o[o.length-2],"/").concat(o[o.length-1]),""))}return n}return e}};e.exports=p},"./MapStore2/web/client/utils/StyleEditorUtils.js":function(e,t,n){"use strict";n.r(t),n.d(t,"STYLE_ID_SEPARATOR",(function(){return R})),n.d(t,"STYLE_OWNER_NAME",(function(){return I})),n.d(t,"generateTemporaryStyleId",(function(){return N})),n.d(t,"generateStyleId",(function(){return F})),n.d(t,"extractFeatureProperties",(function(){return U})),n.d(t,"getEditorMode",(function(){return G})),n.d(t,"isSameOrigin",(function(){return B})),n.d(t,"getStyleTemplates",(function(){return z})),n.d(t,"setCustomUtils",(function(){return W})),n.d(t,"getNameParts",(function(){return V})),n.d(t,"stringifyNameParts",(function(){return H})),n.d(t,"filterObjectToFilterArray",(function(){return q})),n.d(t,"filterArrayToFilterObject",(function(){return Y})),n.d(t,"parseJSONStyle",(function(){return Q})),n.d(t,"formatJSONStyle",(function(){return K}));var r=n("./node_modules/lodash/head.js"),o=n.n(r),i=n("./node_modules/lodash/get.js"),a=n.n(i),s=n("./node_modules/lodash/isArray.js"),l=n.n(s),c=n("./node_modules/lodash/isString.js"),u=n.n(c),p=n("./node_modules/lodash/flatten.js"),d=n.n(p),f=n("./node_modules/lodash/isNil.js"),m=n.n(f),y=n("./node_modules/lodash/omit.js"),b=n.n(y),g=n("./node_modules/uuid/v1.js"),h=n.n(g),v=n("./node_modules/url/url.js"),S=n.n(v);function w(e){return function(e){if(Array.isArray(e))return e}(e)||E(e)||j(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e){return function(e){if(Array.isArray(e))return x(e)}(e)||E(e)||j(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){if(e){if("string"==typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?x(e,t):void 0}}function E(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){T(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var M=n("./MapStore2/web/client/utils/styleeditor/stylesTemplates.js"),_=M.baseTemplates,A=M.customTemplates,R="___",I="styleeditor",D={},k={css:"geocss",sld:"xml"},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type&&e.type.localPart&&e.type.localPart.toLowerCase()||"";return-1!==t.indexOf("polygon")||-1!==t.indexOf("surface")?"polygon":-1!==t.indexOf("linestring")?"linestring":-1!==t.indexOf("point")?"point":"vector"},N=function(){return"".concat(h()(),"_ms_").concat(Date.now().toString())},F=function(e){var t=e.title;return"".concat((void 0===t?"":t).toLowerCase().replace(/\s/g,"_")).concat(R).concat(h()())},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.describeLayer,n=void 0===t?{}:t,r=e.describeFeatureType,i=void 0===r?{}:r,s=n&&n.owsType||null,l=a()(i,"complexType[0].complexContent.extension.sequence.element")||null,c=l&&o()(l.filter((function(e){var t=e.type;return t&&"gml"===t.prefix}))),u=("WCS"===s?"raster":c&&"WFS"===s&&L(c))||null,p="raster"===u?n.bands:l&&l.reduce((function(e,t){var n=t.name,r=t.type,o=void 0===r?{}:r;return C(C({},e),{},T({},n,{localPart:o.localPart,prefix:o.prefix}))}),{});return{geometryType:u,properties:p,owsType:s}},G=function(e){return k[e]||e},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(D.isSameOrigin)return D.isSameOrigin(e,t);if(!t.baseUrl||!e.url)return!1;var n=[t.baseUrl].concat(O(t.availableUrls||[])),r=n.map((function(e){var t=S.a.parse(e);return"".concat(t.protocol,"//").concat(t.host)})),o=S.a.parse(e.url),i="".concat(o.protocol,"//").concat(o.host);return-1!==r.indexOf(i)},z=function(){if(D.getStyleTemplates){var e=D.getStyleTemplates();return[].concat(O(l()(e)?e:[]),O(_))}return[].concat(O(A),O(_))},W=function(e,t){D[e]=t},V=function(e){var t=u()(e)&&e.split(":")||[];return{workspace:t[1]&&t[0],name:t[1]||t[0]}},H=function(e){var t=e.name,n=e.workspace;return"".concat(n&&n.name&&"".concat(n.name,":")||"").concat(t)},q=function(e){var t,n=null==e||null===(t=e.groupFields)||void 0===t?void 0:t.find((function(e){return!e.groupId}));return n&&function e(t,n){if(!(t&&t.filterFields&&t.groupFields&&n))return null;var r=t.filterFields.filter((function(e){return e.groupId===n.id})),o=t.groupFields.filter((function(e){return e.groupId===n.id})),i=[].concat(O(r),O(o)),a={OR:"||",AND:"&&",like:"*=","=":"==","<>":"!=",isNull:"=="},s=i.map((function(n){if(void 0!==n.rowId){var r=n.operator,o=n.attribute,i=n.value;return r&&o&&!m()(i)?[a[r]||r,o,"isNull"===r?null:i]:null}return e(t,n)})).filter((function(e){return e})),l=n.logic;return 0===s.length?null:[a[l]].concat(O(s))}(e,n)},Y=function(e){var t=[],n=[];return function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.index,o=void 0===r?0:r,i=n.groupId,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};if(!t)return null;var s={"||":"OR","&&":"AND","*=":"like","==":"=","!=":"<>"},c=w(t),u=c[0],p=c.slice(1),d=l()(u),f=d?u[0]:u,m=d?u.filter((function(e,t){return 0!==t})):p;if("||"===f||"&&"===f){var y=h()();return a("groupField",{id:y,index:o,logic:s[f]}),e(p,{index:o+1,groupId:y},a)}return f?(a("filterField",{attribute:m[0],groupId:i,operator:s[f]||f,rowId:h()(),type:isNaN(parseFloat(m[1]))?"string":"number",value:m[1]}),e(p,{index:o,groupId:i},a)):null}(e,void 0,(function(e,r){"groupField"===e&&t.push(r),"filterField"===e&&n.push(r)})),{groupFields:t,filterFields:n}};function Q(e){return e&&e.rules?C(C({},e),{},{rules:d()(e.rules.map((function(e){if("Classification"===e.kind)return(e.classification||[]).map((function(t,n){var r=n===e.classification.length-1?"<=":"<",o=null!==t.min?[[">=",e.attribute,t.min]]:[],i=null!==t.max?[[r,e.attribute,t.max]]:[],a=null!==t.min&&">= "+t.min,s=null!==t.max&&r+" "+t.max;return C(C({name:a&&s?a+" and "+s:a||s,filter:o[0]||i[0]?["&&"].concat(o,i):void 0},e.scaleDenominator&&{scaleDenominator:e.scaleDenominator}),{},{symbolizers:[C(C({},b()(e,["ruleId","classification","intervals","method","ramp","reverse","attribute","symbolizerKind"])),{},{kind:e.symbolizerKind||"Fill",color:t.color})]})}));if("Raster"===e.kind){var t=e.classification&&e.classification.length>0&&{colorMapEntries:(e.classification||[]).map((function(e){return{label:e.label,quantity:e.quantity,color:e.color,opacity:e.opacity}}))};return C(C({name:e.name||""},e.scaleDenominator&&{scaleDenominator:e.scaleDenominator}),{},{symbolizers:[C(C({},b()(e,["ruleId","classification","intervals","method","ramp","reverse","continuous","symbolizerKind","name"])),{},{kind:"Raster"},t&&{colorMap:t})]})}var n=q(e.filter);return C(C({},e),{},{filter:n})})))}):e}function K(e){return C(C({},e),{},{rules:e.rules.map((function(e){return C(C({},e),{},{ruleId:h()(),filter:e.filter&&Y(e.filter),symbolizers:e.symbolizers&&e.symbolizers.map((function(e){return C(C({},e),{},{symbolizerId:h()()})}))||[]})}))})}t.default={STYLE_ID_SEPARATOR:R,STYLE_OWNER_NAME:I,generateTemporaryStyleId:N,generateStyleId:F,extractFeatureProperties:U,getEditorMode:G,isSameOrigin:B,getStyleTemplates:z,setCustomUtils:W,getNameParts:V,stringifyNameParts:H,parseJSONStyle:Q,formatJSONStyle:K}},"./MapStore2/web/client/utils/URLUtils.js":function(e,t,n){"use strict";n.r(t),n.d(t,"urlParts",(function(){return u})),n.d(t,"sameQueryParams",(function(){return p})),n.d(t,"isSameUrl",(function(){return d})),n.d(t,"getQueryParams",(function(){return f})),n.d(t,"isValidURL",(function(){return m})),n.d(t,"isValidURLTemplate",(function(){return y}));var r=n("./node_modules/url/url.js"),o=n.n(r),i=n("./node_modules/lodash/lodash.js"),a=n("./node_modules/query-string/index.js"),s=n.n(a);function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var u=function(e){if(!e)return{};var t=!(0===e.indexOf("http")),n=t?[]:e.match(/([^:]*:)\/\/([^:]*:?[^@]*@)?([^:\/\?]*):?([^\/\?]*)/);if(t){var r=window.location;n[1]=r.protocol,n[3]=r.hostname,n[4]=r.port,n[5]=e}n[4]=""!==n[4]&&n[4]?n[4]:"https:"===n[1]?"443":"80",n[5]=n[5]?n[5]:e.slice(n[0].length);var o=l(n,6),i=o[1],a=o[3],s=o[4],c=o[5],u=0===c.indexOf("/")?c.split("/")[1]:"";return{protocol:i,domain:a,port:s,rootPath:c,applicationRootPath:u}},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e===t)return!0;if(!e&&!t)return!0;var n=e?e.split("&").filter((function(e){return!!e})):[],r=t?t.split("&").filter((function(e){return!!e})):[];return Object(i.isEqual)(Object(i.sortBy)(n),Object(i.sortBy)(r))},d=function(e,t){var n=Object(i.isArray)(e)?e[0]:e,r=Object(i.isArray)(t)?t[0]:t;if(n===r)return!0;if(!n||!r)return!1;if(!Object(i.isString)(n)||!Object(i.isString)(r))return!1;var a=o.a.parse(n),s=o.a.parse(r),l=u(n),c=u(r),d=l.protocol===c.protocol,f=l.domain===c.domain,m=l.port===c.port,y=a.pathname===s.pathname,b=p(a.query,s.query);return d&&m&&f&&y&&b},f=function(e){return s.a.parse(e)},m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:/^(http(s{0,1}):\/\/)+?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\(\)\*\+,;=.]+$/,n=new RegExp(t);return n.test(e)},y=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:/^(http(s{0,1}):\/\/)+?[\w.\-{}]+(?:\.[\w\.-]+)+[\w\-\._~\/\;\.\%\:\&\=\?{}]+$/,r=new RegExp(n),o=r.test(e);if(!o)return!1;if(o&&!t)return!0;if(o&&t){var a=/\{(.*?)\}/.test(e);return 0===t.filter((function(e){return Object(i.find)(a,e)})).length}return!1}},"./MapStore2/web/client/utils/WFSTimeUtils.js":function(e,t,n){"use strict";n.r(t),n.d(t,"addTimeParameter",(function(){return p}));var r=n("./node_modules/url/url.js"),o=n("./node_modules/lodash/lodash.js"),i=n("./MapStore2/web/client/selectors/featuregrid.js"),a=n("./MapStore2/web/client/selectors/layers.js"),s=n("./MapStore2/web/client/selectors/dimension.js");function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=function(e,t,n){var l=Object(i.selectedLayerIdSelector)(n),u=Object(s.layerDimensionSelectorCreator)({id:l},"time")(n),p=Object(a.getLayerFromId)(n,l)||{},d=Object(o.get)(p,'params["time"]');if(Object(i.timeSyncActive)(n)&&u&&d){var f=Object(r.parse)(e)||{};return{url:Object(r.format)(c(c({},f),{},{query:c(c({},f.query),{},{time:d})})),options:t}}return{url:e,options:t}}},"./MapStore2/web/client/utils/WidgetsUtils.js":function(e,t,n){function r(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||i(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||i(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var s=n("./node_modules/lodash/lodash.js"),l=s.get,c=s.find,u=s.isNumber,p=s.round,d=n("./MapStore2/web/client/actions/widgets.js").WIDGETS_REGEX,f=n("./MapStore2/web/client/utils/GraphUtils.js").findGroups,m=n("./MapStore2/web/client/utils/ColorUtils.js").sameToneRangeColors,y=function(e,t){var n=o(d.exec(e),2),r=n[0],i=n[1];return r?c(t,{id:i}):null},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.reduce((function(t,n){var o=l(n,"mapSync")&&l(n,"dependenciesMap")||{},i=Object.keys(o).map((function(t){return y(o[t],e)}))||[];return[].concat(r(t),r(i.filter((function(e){return void 0!==e})).map((function(e){return[n.id,e.id]}))))}),[])};e.exports={shortenLabel:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(!u(e))return e;var o=p(e),i=o.toString().length%3;if(o>=n){var a=o.toString().length-(0===i?i+3:i),s=a/3,l=o/Math.pow(10,a);switch(s){case 1:t=" K";break;case 2:t=" M";break;case 3:t=" B";break;case 4:t=" T";break;default:t=""}o=p(l,r)+t}else o=p(e,Math.abs(4-o.toString().length));return o},getWidgetDependency:function(e,t){var n=d.exec(e),r=n&&n[2],o=y(e,t);return r?l(o,r):o},getConnectionList:b,getWidgetsGroups:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=f(b(e)),n={base:190,range:340,options:{base:10,range:360,s:.67,v:.67}},r=m(n.base,n.range,t.length+1,n.options);return t.map((function(e,t){return{color:r[t],widgets:e}}))}}},"./MapStore2/web/client/utils/featuregrid/EditorRegistry.jsx":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n("./node_modules/lodash/lodash.js").find,s=n("./node_modules/object-assign/index.js")({},n("./MapStore2/web/client/components/data/featuregrid/editors/customEditors.jsx")),l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(e).length>0&&Object.keys(e).reduce((function(n,r){var o=new RegExp(e[r]);return n&&o.test(t[r])}),!0)},c=function(e,t,n){if(s[t]){if(s[t][e])return s[t][e](n);if(s[t].defaultEditor)return s[t].defaultEditor(n)}return null};e.exports={get:function(){return s},register:function(e){var t=e.name,n=e.editors;n&&(s[t]=n)},remove:function(e){if(t=e,-1!==Object.keys(s).indexOf(t))try{return delete s[e],!0}catch(e){return!1}var t;return!1},clean:function(){s={}},getCustomEditor:function(e){var t=e.attribute,n=e.url,r=e.typeName,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],s=arguments.length>2?arguments[2]:void 0,u=s.type,p=s.generalProps,d=void 0===p?{}:p,f=s.props,m=a(i,(function(e){return l(e.regex,{attribute:t,url:n,typeName:r})}));if(m){var y=c(u,m.editor,o(o(o({},f),d),m.editorProps||{}));return y}return null}}},"./MapStore2/web/client/utils/ogc/Filter/base.js":function(e,t,n){var r=n("./MapStore2/web/client/utils/ogc/Filter/filter.js"),o=r.filter,i=r.fidFilter;e.exports={fidFilter:i,filter:o}},"./MapStore2/web/client/utils/ogc/WFS/RequestBuilder.js":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n("./MapStore2/web/client/utils/ogc/Filter/FilterBuilder.js"),s=n("./node_modules/lodash/lodash.js").castArray,l=n("./MapStore2/web/client/utils/ogc/WFS/base.js").wfsToGmlVersion,c=function(e){return'service="WFS" version="'+e+'" '+("1.0.0"===e?'outputFormat="GML2" ':"")+'xmlns:gml="http://www.opengis.net/gml" xmlns:wfs="http://www.opengis.net/wfs" xmlns:ogc="http://www.opengis.net/ogc" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.opengis.net/wfs '+"http://schemas.opengis.net/wfs/".concat(e,"1.0.0"===e?'/WFS-basic.xsd"':'/wfs.xsd"')},u=function(e){return'service="WFS" version="'+e+'" xmlns:wfs="http://www.opengis.net/wfs/2.0" xmlns:fes="http://www.opengis.net/fes/2.0" xmlns:gml="http://www.opengis.net/gml/3.2" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd http://www.opengis.net/gml/3.2 http://schemas.opengis.net/gml/3.2.1/gml.xsd"'};e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.wfsVersion,n=void 0===t?"1.1.0":t,r=e.gmlVersion,i=e.filterNS,p=e.wfsNS,d=void 0===p?"wfs":p,f=r;!f&&n?f=l(n):f||(f="3.1.1");var m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.viewParams,r=e.resultType,o=e.outputFormat,i=e.startIndex,a=e.maxFeatures,s=function(e){return 0===n.indexOf("2.")?'count="'.concat(e,'"'):'maxFeatures="'.concat(e,'"')};return(0===n.indexOf("1.")?c(n):u(n))+(r?' resultType="'.concat(r,'"'):"")+(o?' outputFormat="'.concat(o,'"'):"")+(i||0===i?' startIndex="'.concat(i,'"'):"")+(a||0===a?" ".concat(s(a)):"")+(t?' viewParams="'.concat(t,'"'):"")},y=function(e){return s(e).map((function(e){return"<".concat("2.0"===n?"fes":"ogc",":PropertyName>").concat(e,"</").concat("2.0"===n?"fes":"ogc",":PropertyName>")})).join("")};return o(o({propertyName:y},a({gmlVersion:f,wfsVersion:n,filterNS:i||"2.0"===n?"fes":"ogc"})),{},{getFeature:function(e,t){return"<".concat(d,":GetFeature ").concat(m(t),">").concat(Array.isArray(e)?e.join(""):e,"</").concat(d,":GetFeature>")},sortBy:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ASC";return"<".concat(d,":SortBy><").concat(d,":SortProperty>").concat(y(e),"<").concat(d,":SortOrder>").concat(t,"</").concat(d,":SortOrder></").concat(d,":SortProperty></").concat(d,":SortBy>")},query:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=r.srsName,i=void 0===o?"EPSG:4326":o;return"<".concat(d,":Query ").concat("2.0"===n?"typeNames":"typeName",'="').concat(e,'" srsName="').concat(i,'">')+"".concat(Array.isArray(t)?t.join(""):t)+"</".concat(d,":Query>")}})}},"./MapStore2/web/client/utils/ogc/WFST/RequestBuilder.js":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function s(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var c=n("./node_modules/lodash/lodash.js").get,u=n("./MapStore2/web/client/utils/ogc/WFST/insert.js"),p=u.insert,d=u.feature,f=u.attribute,m=n("./MapStore2/web/client/utils/ogc/WFST/transaction.js").transaction,y=n("./MapStore2/web/client/utils/ogc/WFST/delete.js"),b=y.deleteFeaturesByFilter,g=y.deleteFeature,h=n("./MapStore2/web/client/utils/ogc/WFST/update.js"),v=h.update,S=h.propertyChange,w=n("./MapStore2/web/client/utils/ogc/WFS/base.js"),O=w.getPropertyDesciptor,j=w.getValue,E=w.findGeometryProperty,x=w.featureTypeSchema,P=n("./MapStore2/web/client/utils/ogc/WFS/RequestBuilder.js"),C=function(e,t){return t&&t.length>0?[e].concat(s(t)):e},T=function(e){this.version=e},M=function(e){return c(e,"featureTypes[0].typeName")},_=function(e){return e.targetPrefix?"".concat(e.targetPrefix,":").concat(M(e)):M(e)},A=function(e,t){return e.geometry_name||E(t).name},R=function(e,t){return"geometry"===e||e===A({},t)?A({},t):e};e.exports=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.wfsVersion,r=void 0===n?"1.1.0":n,i=t.wfsNS,s=void 0===i?"wfs":i,l=a(t,["wfsVersion","wfsNS"]);if("1.1.0"!==r)throw new T(r);var c=function(t){return d(e.targetPrefix,M(e),Object.keys(t.properties||[]).filter((function(t){return O(t,e)})).map((function(n){return f(e.targetPrefix,n,j(t.properties[n],n,e))})).concat(t.geometry?f(e.targetPrefix,A(t,e),j(t.geometry,A(t,e),e)):[]))},u=function(e){return e.features?e.features.map(c):c(e)};return o(o({},P(o(o({},l),{},{wfsVersion:r,wfsNS:s}))),{},{insert:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return p(s,Array.isArray(C(e,n))?C(e,n).map(u):u(e))},getPropertyName:function(t){return R(t,e)},deleteByFilter:function(t){return b(s,t,_(e))},deleteFeature:function(t){return g(s,t,_(e))},update:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return v(s,_(e),C(t,r))},propertyChange:function(t,n){return S(s,t,j(n,t,e))},transaction:function(t){for(var n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];return m(C(t,o),x(e),r,s)}})}},"./MapStore2/web/client/utils/ogc/WFST/delete.js":function(e,t,n){var r=n("./MapStore2/web/client/utils/ogc/Filter/base.js").fidFilter,o=function(e,t,n){return"<".concat(e,':Delete typeName="').concat(n,'">').concat(t,"</").concat(e,":Delete>")},i=function(e,t,n){return o(e,r("ogc",t),n)};e.exports={deleteFeaturesByFilter:o,deleteById:i,deleteFeature:function(e,t,n){return i(e,t.features&&1===t.features.length?t.features[0].id:t.id,n)}}},"./MapStore2/web/client/utils/ogc/WFST/insert.js":function(e,t){var n=function(e,t,n){return"<".concat(e?e+":"+t:t,">").concat(Array.isArray(n)?n.join(""):n,"</").concat(e?e+":"+t:t,">")},r=n,o=n;e.exports={insert:function(e,t){return"<".concat(e,":Insert>").concat(Array.isArray(t)?t.join(""):t,"</").concat(e,":Insert>")},feature:o,attribute:r}},"./MapStore2/web/client/utils/ogc/WFST/transaction.js":function(e,t){e.exports={transaction:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.wfsNS,o=void 0===r?"wfs":r,i=n.wfsVersion,a=void 0===i?"1.1.0":i;return"<".concat(o,":Transaction ")+'service="WFS" '+'version="'.concat(a,'" ')+"xmlns:".concat(o,'="http://www.opengis.net/wfs" ')+'xmlns:gml="http://www.opengis.net/gml" xmlns:ogc="http://www.opengis.net/ogc" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.opengis.net/wfs" '+"".concat(t,">")+"".concat(Array.isArray(e)?e.join(""):e)+"</".concat(o,":Transaction>")}}},"./MapStore2/web/client/utils/ogc/WFST/update.js":function(e,t){e.exports={update:function(e,t,n){return"<".concat(e,':Update typeName="').concat(t,'">').concat(Array.isArray(n)?n.join(""):n,"</wfs:Update>")},propertyChange:function(e,t,n){return"<".concat(e,":Property>")+"<".concat(e,":Name>").concat(t,"</").concat(e,":Name>")+"<".concat(e,":Value>").concat(n,"</").concat(e,":Value>")+"</".concat(e,":Property>")}}},"./MapStore2/web/client/utils/ogc/WMC/index.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/xml2js/lib/xml2js.js"),o=n("./node_modules/lodash/lodash.js"),i=n("./node_modules/uuid/v1.js"),a=n.n(i);function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||d(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||d(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){if(e){if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=Object(o.get)(t,"childObject",t);return Object(o.keys)(r).filter((function(e){return"$"!==e&&"_"!==e&&"$ns"!==e})).reduce((function(t,i){return[].concat(p(t),p(Object(o.flatten)(r[i].map((function(t){var r=Object(o.get)(t,"$ns",{});return r.uri!==e||r.local!==n?[]:[{params:Object(o.get)(t,"$",{}),charContent:Object(o.get)(t,"_"),childObject:Object(o.omit)(t,"$","_","$ns")}]})))))}),[])},y=function(e,t,n){return Object(o.head)(m(e,t,n))},b=function(e,t,n){return Object(o.values)(Object(o.get)(t,"params",{})).reduce((function(t,r){return t||r.local===n&&r.uri===e&&r.value}),void 0)},g=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Object(o.values)(Object(o.get)(e,"params",{})).reduce((function(e,t){var r=n.reduce((function(e,n){var r=Object(o.isString)(n)?{local:n,paramName:n,uri:""}:n,i=r.local,a=r.uri,s=r.paramName;return e||i===t.local&&a===t.uri&&s}),null);return r?c(c({},e),{},u({},r,t.value)):e}),{})},h=function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";return Object(o.flatten)([[[/\&/g,"&amp;"]],e?[]:[[/\"/g,"&quot;"]],t?[]:[[/\'/g,"&apos;"]],n?[]:[[/\>/g,"&gt;"]],r?[]:[[/\</g,"&lt;"]]]).reduce((function(e,t){var n=s(t,2),r=n[0],o=n[1];return e.replace(r,o)}),i)},v=h.bind(null,!0,!0,!0,!1),S=h.bind(null,!1,!1,!0,!1),w=function(e){var t=e.ns,n=e.prefix;return"xmlns".concat(n?":".concat(n):"",'="').concat(t,'"')},O=function(e){var t=e.xmlns,n=e.name,r=e.value;return"".concat(t&&t.prefix?"".concat(t.prefix,":"):"").concat(n,'="').concat(S(r.toString()),'"')},j=function e(t){var n=t.name,r=t.xmlns,i=t.textContent,a=void 0===i?"":i,s=t.attributes,l=void 0===s?[]:s,u=t.children,d=void 0===u?[]:u,f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],m=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,y=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"\n",b=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,g=function(e){return"".concat(y).concat(" ".repeat(b*m)).concat(e)},h="".concat(r&&r.prefix?"".concat(r.prefix,":"):"").concat(n),S=f.length>0?f:Object(o.uniqWith)([r].concat(p(l.map((function(e){return e.xmlns})))).filter((function(e){return!!e})),(function(e,t){return e.ns===t.ns})),j=(f.length>0&&0===b||0===f.length)&&S.length>0;return(0===b?'<?xml version="1.0" encoding="UTF-8"?>'.concat(y):"")+" ".repeat(b*m)+"<".concat(h)+"".concat(j?" ".concat(S.map(w).join(" ")):"").concat(l.length>0?" ":"")+l.map((function(e){return O(c(c({},e),{},{xmlns:e.xmlns&&c(c({},e.xmlns),{},{prefix:Object(o.get)(Object(o.find)(S,{ns:e.xmlns.ns}),"prefix")})}))})).join(" ")+(a.length>0||d.length>0?">".concat(v(a))+"".concat(d.map((function(t){return"".concat(y).concat(e(t,f,m,y,b+1))})).join(""))+(d.length>0?g:o.identity)("</".concat(h,">")):"/>")},E=function e(t){var n=t.children||[],r=t.attributes||[];return c(c({},t),{},{attributes:r.filter((function(e){return!!e})),children:n.filter((function(e){return!!e})).map(e)})},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return Object(o.keys)(e).filter((function(t){return void 0!==e[t]})).map((function(n){return{name:n,value:e[n],xmlns:t}}))},P=function(e,t){return e.filter((function(e){return!!e})).map((function(e){return c(c({},e),{},{xmlns:t})}))},C=n("./MapStore2/web/client/utils/LayersUtils.js"),T=n("./MapStore2/web/client/utils/CoordinatesUtils.js");function M(e){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||R(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e){return function(e){if(Array.isArray(e))return I(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||R(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){if(e){if("string"==typeof e)return I(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?I(e,t):void 0}}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){L(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"toMapConfig",(function(){return H})),n.d(t,"toWMC",(function(){return Q}));var N={maxExtent:[0,0,1e4,1e4],projection:"EPSG:900913",layerType:"wms"},F={root:{ns:"http://www.opengis.net/context"},xsi:{ns:"http://www.w3.org/2001/XMLSchema-instance",prefix:"xsi"},xlink:{ns:"http://www.w3.org/1999/xlink",prefix:"xlink"},ol:{ns:"http://openlayers.org/context",prefix:"ol"},ms:{ns:"http://geo-solutions.it/mapstore/context",prefix:"ms"}},U={group:"background",id:"empty_background",source:"ol",title:"Empty Background",type:"empty",visibility:!0},G=function(e){switch(e){case"OGC:WMS":return"wms";default:return N.layerType}},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.toLowerCase();return"true"===t||"1"===t},z=function(e){return Object(o.keys)(e).filter((function(t){return void 0!==e[t]})).reduce((function(t,n){return k(k({},t),{},L({},n,e[n]))}),{})},W=function(e){return!!(e&&e.minx&&e.miny&&e.maxx&&e.maxy)},V=function(e){return!!(e&&W(e.bounds)&&e.crs)},H=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=new r.Parser({explicitRoot:!1,xmlns:!0});return new Promise((function(r){n.parseString(e,(function(e,n){if(e)throw new Error("General XML parsing error");var i=y.bind(null,F.root.ns),s=m.bind(null,F.root.ns),l=y.bind(null,F.ol.ns),c=y.bind(null,F.ms.ns),u=m.bind(null,F.ms.ns),p=b.bind(null,""),d=b.bind(null,F.xlink.ns),f=function(e){var t,n=g(e,"name","type"),r=n.name,o=n.type;switch(o){case"number":t=parseFloat(e.charContent);break;case"object":t=JSON.parse(e.charContent);break;case"boolean":t=B(e.charContent);break;default:t=e.charContent}return{name:r,type:o,value:t}},h=i({root:[n]},"ViewContext"),v=i(h,"General"),S=i(h,"LayerList"),w=p(h,"version");if(!h||!w)throw new Error("Not a WMC file!");var O=Object(o.get)(i(v,"Title"),"charContent"),j=i(v,"Extension"),E=l(j,"maxExtent"),x=i(v,"BoundingBox"),P=Object(o.mapValues)(E&&g(E,"minx","miny","maxx","maxy")||g(x,"minx","miny","maxx","maxy"),parseFloat),C=W(P)&&[P.minx,P.miny,P.maxx,P.maxy]||N.maxExtent,T=p(x,"SRS")||N.projection,M={bounds:Object(o.mapValues)(g(x,"minx","miny","maxx","maxy"),parseFloat),crs:p(x,"SRS")},R=V(M)?M:void 0,I=t?a()():void 0,D=s(S,"Layer").map((function(e){var t=i(e,"Extension"),n=i(e,"Server"),r=Object(o.head)(s(i(e,"StyleList"),"Style").filter((function(e){return B(p(e,"current"))}))),f=Object(o.get)(l(t,"transparent"),"charContent"),m=Object(o.get)(l(t,"opacity"),"charContent"),y={maxExtent:Object(o.mapValues)(g(l(t,"maxExtent"),"minx","maxx","miny","maxy"),parseFloat),tileSize:Object(o.mapValues)(g(l(t,"tileSize"),"width","height"),parseInt),transparent:f&&B(f),isBaseLayer:B(Object(o.get)(l(t,"isBaseLayer"),"charContent")),singleTile:B(Object(o.get)(l(t,"singleTile"),"charContent")),opacity:m&&parseFloat(m)},b=c(t,"search"),h=u(c(t,"DimensionList"),"Dimension"),v=Object(o.get)(c(t,"filter"),"charContent"),S={group:Object(o.get)(c(t,"group"),"charContent"),search:b&&{url:d(b,"href"),type:p(b,"type")},dimensions:h.map((function(e){return{name:p(e,"name"),source:{type:p(e,"type"),url:d(e,"href")}}})),filter:v&&function(){try{return JSON.parse(v)}catch(e){return null}}()||void 0},w=s(i(e,"DimensionList"),"Dimension").map((function(e){return{name:p(e,"name"),units:p(e,"units"),unitSymbol:p(e,"unitSymbol"),default:p(e,"default"),values:Object(o.get)(e,"charContent","").split(",")}})),O={id:a()(),visibility:!B(p(e,"hidden")),type:G(p(n,"service")),url:d(i(n,"OnlineResource"),"href"),name:Object(o.get)(i(e,"Name"),"charContent"),title:Object(o.get)(i(e,"Title"),"charContent"),format:Object(o.get)(Object(o.head)(s(i(e,"FormatList"),"Format").filter((function(e){return B(p(e,"current"))}))),"charContent"),style:Object(o.get)(i(r,"Name"),"charContent"),singleTile:y.singleTile,queryable:B(p(e,"queryable")),bbox:W(y.maxExtent)?{bounds:y.maxExtent,crs:T}:void 0,group:S.group||(y.isBaseLayer?"background":I),opacity:y.opacity,search:S.search,layerFilter:S.filter,dimensions:Object(o.uniqWith)([].concat(A(S.dimensions),A(w)),(function(e,t){return e.name===t.name}))};return k(k({},z(O)),{},{params:z(O.params)})})),H=[].concat(A(D.filter((function(e){return"background"===e.group}))),A(D.filter((function(e){return"background"!==e.group})))),q=0===H.filter((function(e){return"background"===e.group&&e.visibility})).length?[U].concat(A(H)):H,Y=c(j,"GroupList"),Q=u(Y,"Group").map((function(e){return{id:p(e,"id"),title:p(e,"title"),expanded:B(p(e,"expanded"))}})),K=Y&&Q||[].concat(A(q.filter((function(e){return!e.group||"Default"===e.group})).length>0?[{id:"Default",title:"Default",expanded:!0}]:[]),A(t?[{id:I,title:O||I}]:[])),Z=c(j,"center"),X=k(k({},Object(o.mapValues)(g(Z,"x","y"),parseFloat)),{},{crs:p(Z,"crs")}),J=parseFloat(Object(o.get)(c(j,"zoom"),"charContent")),$=c(j,"CatalogServices"),ee=p($,"selectedService"),te=u($,"Service").map((function(e){return[p(e,"serviceName"),u(e,"Attribute")]})).reduce((function(e,t){var n=_(t,2),r=n[0],o=n[1];return k(k({},e),{},L({},r,o.map(f).reduce((function(e,t){var n=t.name,r=t.value;return k(k({},e),{},L({},n,r))}),{})))}),{}),ne={catalogServices:$&&{selectedService:ee,services:te},map:{maxExtent:C,bbox:J?void 0:R,projection:T,backgrounds:[],groups:K,layers:q,center:Object(o.has)(X,"x","y","crs")?X:void 0,zoom:J},version:2};r(ne)}))}))},q=function(e){return e?"1":"0"},Y={wms:"OGC:WMS"},Q=function(e,t){var n=e.map,r=e.catalogServices,i=t.title,a=void 0===i?"MapStore Context":i,s=t.abstract,l=void 0===s?"This is a map exported from MapStore2.":s,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"\n",p=function(e){return x({type:"simple",href:e},F.xlink)},d=function(e){return{name:"OnlineResource",attributes:p(e)}},f=n.maxExtent,m=n.bbox,y=n.projection,b=n.layers,g=n.groups,h=n.center,v=n.zoom,S=function(e){var t=Object(T.reprojectBbox)(e.bounds,e.crs,y);return{name:"maxExtent",attributes:x({minx:t[0],miny:t[1],maxx:t[2],maxy:t[3]})}},w=P([{name:"maxExtent",attributes:x({minx:f[0],miny:f[1],maxx:f[2],maxy:f[3]})}],F.ol),O=P([g.length>0?{name:"GroupList",children:g.map((function(e){return{name:"Group",xmlns:F.ms,attributes:x({id:e.id,title:e.title,expanded:e.expanded})}}))}:null,r&&{name:"CatalogServices",attributes:r.selectedService&&x({selectedService:r.selectedService}),children:Object(o.toPairs)(r.services).map((function(e){var t=_(e,2),n=t[0],r=t[1];return{name:"Service",xmlns:F.ms,attributes:x({serviceName:n}),children:Object(o.keys)(r).filter((function(e){return void 0!==r[e]&&null!==r[e]&&("string"==typeof r[e]||"boolean"==typeof r[e]||"number"==typeof r[e]||"bigint"==typeof r[e]||"object"===M(r[e]))})).map((function(e){return{name:"Attribute",xmlns:F.ms,attributes:x({name:e,type:M(r[e])}),textContent:"object"===M(r[e])?JSON.stringify(r[e]):r[e].toString()}}))}}))},h&&{name:"center",attributes:x(h)},v&&{name:"zoom",textContent:v.toString()}],F.ms),R={name:"LayerList",children:b.filter((function(e){return"wms"===e.type})).map((function(e){var t=e.capabilities||{},n=(e.dimensions||[]).filter((function(e){return!!e.source})),r=[].concat(A((e.dimensions||[]).filter((function(e){return!e.source}))),A(Object(o.get)(t,"dimension",[]).filter((function(e){var t=e.name;return Object(o.findIndex)(n,(function(e){return e.name===t}))>-1})).map((function(e){var t=e._default,n=e.name,r=e.units,o=e.unitSymbol,i=e.value;return{name:n,units:r,unitSymbol:o,values:(void 0===i?"":i).split(","),default:t}})))),i=Object(o.get)(t,"style",[]).map((function(t){var n=t.name,r=t.title,i=t.legendURL,a=void 0===i?[]:i;return{name:n,title:r,legendURL:a[0]&&Object(o.pick)(a[0],"width","height","format","onlineResource"),current:n===e.style}})),a=P([e.bbox?S(e.bbox):null,{name:"singleTile",textContent:(e.singleTile||!1).toString()},{name:"transparent",textContent:(void 0===e.transparent||e.transparent).toString()},{name:"isBaseLayer",textContent:("background"===e.group).toString()},{name:"opacity",textContent:(void 0===e.opacity?1:e.opacity).toString()}],F.ol),s=P([{name:"group",textContent:e.group||"Default"},e.search&&{name:"search",attributes:[{name:"type",value:e.search.type}].concat(A(p(e.search.url)))},e.layerFilter&&{name:"filter",textContent:JSON.stringify(e.layerFilter)},n.length>0&&{name:"DimensionList",children:n.map((function(e){var t=e.source,n=t.type,r=t.url,o=e.name;return{name:"Dimension",xmlns:F.ms,attributes:[].concat(A(x({name:o,type:n})),A(p(r)))}}))}],F.ms);return{name:"Layer",attributes:x(Object(o.mapValues)({queryable:e.queryable,hidden:!e.visibility},q)),children:[{name:"Name",textContent:e.name},{name:"Title",textContent:e.title},{name:"Server",attributes:x({service:Y[e.type],version:"1.3.0"}),children:[d(Object(C.getLayerUrl)(e))]},r.length>0&&{name:"DimensionList",children:r.map((function(e){var t=e.name,n=e.units,r=e.unitSymbol,o=e.values,i=void 0===o?[]:o,a=e.default;return{name:"Dimension",attributes:x({name:t,units:n,unitSymbol:r,default:a,multipleValues:i.length>1?"1":void 0}),textContent:i.toString()}}))},e.format&&{name:"FormatList",children:[{name:"Format",attributes:[{name:"current",value:"1"}],textContent:e.format}]},i.length>0&&{name:"StyleList",children:i.map((function(e){var t=e.name,n=e.title,r=e.current,i=e.legendURL,a=Object(o.get)(i,"onlineResource.href");return{name:"Style",attributes:r&&x({current:r})||[],children:[{name:"Name",textContent:t},{name:"Title",textContent:n},i&&{name:"LegendURL",attributes:x(k({},Object(o.pick)(i,"width","height","format"))),children:a&&[d(a)]}]}}))},{name:"Extension",children:[].concat(A(a),A(s))}]}}))};return j(E({name:"ViewContext",xmlns:F.root,attributes:[{name:"version",value:"1.1.0"},{name:"schemaLocation",value:"http://www.opengis.net/context http://schemas.opengis.net/context/1.1.0/context.xsd",xmlns:F.xsi}],children:[{name:"General",children:[{name:"Title",textContent:a},{name:"Abstract",textContent:l},{name:"BoundingBox",attributes:x(V(m)?k(k({},m.bounds),{},{SRS:m.crs}):{minx:f[0],miny:f[1],maxx:f[2],maxy:f[3],SRS:y})},{name:"Extension",children:[].concat(A(w),A(O))}]},R]}),Object(o.values)(F),c,u)}},"./MapStore2/web/client/utils/ogc/WPS/autocomplete.js":function(e,t,n){function r(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var i=n("./MapStore2/web/client/utils/FilterUtils.jsx"),a=n("./MapStore2/web/client/utils/ogc/Filter/FilterBuilder.js")({}).and;e.exports={getWpsPayload:function(e){var t=e.layerName,n=e.layerFilter,o=e.attribute,s=e.maxFeatures,l=e.startIndex,c=e.value,u=c?'<ogc:PropertyIsLike matchCase="false" wildCard="*" singleChar="." escapeChar="!">   <ogc:PropertyName>'+o+"</ogc:PropertyName>   <ogc:Literal>*"+c+"*</ogc:Literal></ogc:PropertyIsLike>":"",p=n&&!n.disabled&&i.isFilterValid(n)?i.toOGCFilterParts(n,"1.1.0","ogc"):[];return'<wps:Execute xmlns:wps="http://www.opengis.net/wps/1.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="1.0.0" service="WPS" xsi:schemaLocation="http://www.opengis.net/wps/1.0.0 http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd">  <ows:Identifier xmlns:ows="http://www.opengis.net/ows/1.1">gs:PagedUnique</ows:Identifier>  <wps:DataInputs>    <wps:Input>      <ows:Identifier xmlns:ows="http://www.opengis.net/ows/1.1">features</ows:Identifier>      <ows:Title xmlns:ows="http://www.opengis.net/ows/1.1">features</ows:Title>      <wps:Data />      <wps:Reference xmlns:xlink="http://www.w3.org/1999/xlink" mimeType="text/xml" xlink:href="http://geoserver/wfs" method="POST">        <wps:Body>         <wfs:GetFeature xmlns:wfs="http://www.opengis.net/wfs" service="WFS" version="1.0.0">           <wfs:Query typeName="'+t+'">'+(u.length>0||p.length>0?'<ogc:Filter xmlns:ogc="http://www.opengis.net/ogc" xmlns:gml="http://www.opengis.net/gml">'+a.apply(void 0,r(p).concat([u]))+"</ogc:Filter>":"")+'             <ogc:SortBy xmlns:ogc="http://www.opengis.net/ogc">               <ogc:SortProperty>                 <ogc:PropertyName>'+o+'</ogc:PropertyName>               </ogc:SortProperty>             </ogc:SortBy>           </wfs:Query>         </wfs:GetFeature>       </wps:Body>     </wps:Reference>   </wps:Input>   <wps:Input>     <ows:Identifier xmlns:ows="http://www.opengis.net/ows/1.1">fieldName</ows:Identifier>     <ows:Title xmlns:ows="http://www.opengis.net/ows/1.1">fieldName</ows:Title>     <wps:Data>       <wps:LiteralData>'+o+'</wps:LiteralData>     </wps:Data>   </wps:Input>   <wps:Input>     <ows:Identifier xmlns:ows="http://www.opengis.net/ows/1.1">maxFeatures</ows:Identifier>     <ows:Title xmlns:ows="http://www.opengis.net/ows/1.1">maxFeatures</ows:Title>     <wps:Data>       <wps:LiteralData>'+s+'</wps:LiteralData>     </wps:Data>   </wps:Input>   <wps:Input>     <ows:Identifier xmlns:ows="http://www.opengis.net/ows/1.1">startIndex</ows:Identifier>     <ows:Title xmlns:ows="http://www.opengis.net/ows/1.1">startIndex</ows:Title>     <wps:Data>       <wps:LiteralData>'+l+'</wps:LiteralData>     </wps:Data>   </wps:Input> </wps:DataInputs> <wps:ResponseForm>   <wps:RawDataOutput mimeType="application/json">     <ows:Identifier xmlns:ows="http://www.opengis.net/ows/1.1">result</ows:Identifier>   </wps:RawDataOutput> </wps:ResponseForm></wps:Execute>'}}},"./MapStore2/web/client/utils/styleeditor/stylesTemplates.js":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n("./node_modules/uuid/v1.js"),s=[{types:["point","linestring","polygon","vector"],title:"Base CSS",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\tmark: symbol(square);\n\t:mark { fill: #ff0000; };\n}\n\n* {\n\tstroke: #999999;\n}",preview:{config:{backgroundColor:"#333333",texts:[{text:"CSS",fill:"#ffaa33",style:{fontSize:64,fontWeight:"bold"}}]}}},{types:["point","linestring","polygon","vector"],title:"Base SLD",format:"sld",code:'<?xml version="1.0" encoding="ISO-8859-1"?>\n<StyledLayerDescriptor version="1.0.0"\n\t\txsi:schemaLocation="http://www.opengis.net/sld StyledLayerDescriptor.xsd"\n\t\txmlns="http://www.opengis.net/sld"\n\t\txmlns:ogc="http://www.opengis.net/ogc"\n\t\txmlns:xlink="http://www.w3.org/1999/xlink"\n\t\txmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">\n\n\t<NamedLayer>\n\t\t<Name>Default Style</Name>\n\t\t<UserStyle>\n\t\t\t<Title>${styleTitle}</Title>\n\t\t\t<Abstract>${styleAbstract}</Abstract>\n\t\t\t<FeatureTypeStyle>\n\t\t\t\t<Rule>\n\t\t\t\t\t<Name>Rule Name</Name>\n\t\t\t\t\t<Title>Rule Title</Title>\n\t\t\t\t\t<Abstract>Rule Abstract</Abstract>\n\t\t\t\t\t<LineSymbolizer>\n\t\t\t\t\t\t<Stroke>\n\t\t\t\t\t\t\t<CssParameter name="stroke">#0000FF</CssParameter>\n\t\t\t\t\t\t</Stroke>\n\t\t\t\t\t\t</LineSymbolizer>\n\t\t\t\t\t<PointSymbolizer>\n\t\t\t\t\t\t<Graphic>\n\t\t\t\t\t\t\t<Mark>\n\t\t\t\t\t\t\t\t<WellKnownName>square</WellKnownName>\n\t\t\t\t\t\t\t\t<Fill>\n\t\t\t\t\t\t\t\t\t<CssParameter name="fill">#FF0000</CssParameter>\n\t\t\t\t\t\t\t\t</Fill>\n\t\t\t\t\t\t\t</Mark>\n\t\t\t\t\t\t</Graphic>\n\t\t\t\t\t</PointSymbolizer>\n\t\t\t\t\t</Rule>\n\t\t\t\t</FeatureTypeStyle>\n\t\t\t</UserStyle>\n\t\t</NamedLayer>\n\t</StyledLayerDescriptor>\n',preview:{config:{backgroundColor:"#333333",texts:[{text:"SLD",fill:"#33ffaa",style:{fontSize:64,fontWeight:"bold"}}]}}},{types:["raster"],title:"Base CSS",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\traster-channels: auto;\n}",preview:{config:{backgroundColor:"#333333",texts:[{text:"CSS",fill:"#ffaa33",style:{fontSize:64,fontWeight:"bold"}}]}}},{types:["raster"],title:"Base SLD",format:"sld",code:'<?xml version="1.0" encoding="ISO-8859-1"?>\n<StyledLayerDescriptor version="1.0.0"\n\t\txsi:schemaLocation="http://www.opengis.net/sld StyledLayerDescriptor.xsd"\n\t\txmlns="http://www.opengis.net/sld"\n\t\txmlns:ogc="http://www.opengis.net/ogc"\n\t\txmlns:xlink="http://www.w3.org/1999/xlink"\n\t\txmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">\n\n\t<NamedLayer>\n\t\t<Name>Default Style</Name>\n\t\t<UserStyle>\n\t\t\t<Title>${styleTitle}</Title>\n\t\t\t<Abstract>${styleAbstract}</Abstract>\n\t\t\t<FeatureTypeStyle>\n\t\t\t\t<Rule>\n\t\t\t\t\t<Name>Rule Name</Name>\n\t\t\t\t\t<Title>Rule Title</Title>\n\t\t\t\t\t<Abstract>Rule Abstract</Abstract>\n\t\t\t\t\t<RasterSymbolizer>\n\t\t\t\t\t\t<Opacity>1.0</Opacity>\n\t\t\t\t\t\t</RasterSymbolizer>\n\t\t\t\t\t</Rule>\n\t\t\t\t</FeatureTypeStyle>\n\t\t\t</UserStyle>\n\t\t</NamedLayer>\n\t</StyledLayerDescriptor>\n',preview:{config:{backgroundColor:"#333333",texts:[{text:"SLD",fill:"#33ffaa",style:{fontSize:64,fontWeight:"bold"}}]}}}].map((function(e){return o(o({},e),{},{styleId:a()})})),l=[{types:["linestring","vector"],title:"Line",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n\tstroke: #999999;\n}",preview:{config:{type:"linestring",paths:[{stroke:"#999999"}]}}},{types:["linestring","vector"],title:"Dashed line",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n\tstroke: #333333;\n\tstroke-width: 0.75;\n\tstroke-dasharray: 6 2;\n}",preview:{config:{type:"linestring",paths:[{stroke:"#333333",strokeWidth:4,strokeDasharray:"20 4"}]}}},{types:["linestring","vector"],title:"Section line",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n\tstroke: #330033;\n\tstroke-width: 1;\n\tstroke-dasharray: 10 4 1 4;\n}",preview:{config:{type:"linestring",paths:[{stroke:"#330033",strokeWidth:4,strokeDasharray:"20 10 4 10"}]}}},{types:["linestring","vector"],title:"Simple railway",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n    stroke: symbol('shape://vertline'), #000000;\n    :stroke {\n        stroke: #000000;\n        size: 8;\n    };\n}\n",preview:{config:{type:"linestring",paths:[{stroke:"#333333",strokeWidth:2,strokeLinejoin:"round"},{stroke:"#333333",strokeWidth:16,strokeDasharray:"2 20",strokeLinejoin:"round"}]}}},{types:["linestring","vector"],title:"Railway",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n\tstroke: #777777, #ffffff;\n\tstroke-width: 4, 2;\n\tstroke-dasharray: 1 0, 10 10;\n}",preview:{config:{type:"linestring",paths:[{stroke:"#777777",strokeWidth:8,strokeLinejoin:"round"},{stroke:"#ffffff",strokeWidth:6,strokeDasharray:"20 20",strokeLinejoin:"round"}]}}},{types:["linestring","vector"],title:"Waterway",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n\tstroke: #8bbceb, #bbddff;\n\tstroke-width: 10, 8;\n\tstroke-linejoin: round;\n}",preview:{config:{type:"linestring",paths:[{stroke:"#8bbceb",strokeWidth:14,strokeLinejoin:"round"},{stroke:"#bbddff",strokeWidth:12,strokeLinejoin:"round"}]}}},{types:["linestring","vector"],title:"Red road",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n\tstroke: #ff5539, #ffffff;\n\tstroke-width: 8, 5;\n}",preview:{config:{type:"linestring",paths:[{stroke:"#ff5539",strokeWidth:14},{stroke:"#ffffff",strokeWidth:7}]}}},{code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n    stroke: symbol('circle');\n    stroke-dasharray: 8 20;\n    :stroke {\n        size: 8;\n        fill: #ddd;\n        stroke: #777;\n        stroke-width: 0.5;\n    };\n}\n",types:["linestring","vector"],title:"Stroke Pattern",format:"css",preview:{config:{type:"linestring",paths:[{type:"point",transform:"translate(-0, -55)",d:"M 100, 100 m -10, 0 a 10,10 0 1,0 20,0 a 10,10 0 1,0 -20,0",stroke:"#777",strokeWidth:2,fill:"#ddd"},{type:"point",transform:"translate(-65, 55)",d:"M 100, 100 m -10, 0 a 10,10 0 1,0 20,0 a 10,10 0 1,0 -20,0",stroke:"#777",strokeWidth:2,fill:"#ddd"},{type:"point",transform:"translate(-33, 0)",d:"M 100, 100 m -10, 0 a 10,10 0 1,0 20,0 a 10,10 0 1,0 -20,0",stroke:"#777",strokeWidth:2,fill:"#ddd"},{type:"point",transform:"translate(33, 0)",d:"M 100, 100 m -10, 0 a 10,10 0 1,0 20,0 a 10,10 0 1,0 -20,0",stroke:"#777",strokeWidth:2,fill:"#ddd"},{type:"point",transform:"translate(65, 55)",d:"M 100, 100 m -10, 0 a 10,10 0 1,0 20,0 a 10,10 0 1,0 -20,0",stroke:"#777",strokeWidth:2,fill:"#ddd"}]}}},{code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n    stroke: #333;\n    label: 'Label';\n    label-anchor: 0.5 0.5;\n    label-conflict-resolution: false;\n\n    font-fill: #000;\n    font-family: 'sans-serif';\n    font-size: 20;\n\n    halo-color: #fff;\n    halo-radius: 4;\n}\n",types:["linestring","vector"],title:"Label",format:"css",preview:{config:{type:"linestring",paths:[{stroke:"#333",strokeWidth:4}],texts:[{text:"Label",transform:"translate(-40, 0)",style:{fontSize:30,fontWeight:"bold",strokeWidth:12,stroke:"#ffffff"}},{text:"Label",fill:"#000000",transform:"translate(-40, 0)",style:{fontSize:30,fontWeight:"bold",strokeWidth:1,stroke:"#000000"}}]}}},{code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n    fill: #ddd;\n}\n",types:["polygon","vector"],title:"Fill",format:"css",preview:{config:{type:"polygon",paths:[{fill:"#ddd"}]}}},{code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n    stroke: #333;\n    stroke-width: 1;\n}\n",types:["polygon","vector"],title:"Border",format:"css",preview:{config:{type:"polygon",paths:[{fill:"transparent",stroke:"#333",strokeWidth:4}]}}},{code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n    stroke: #333;\n    stroke-dasharray: 10 5;\n    stroke-width: 2;\n    stroke-opacity: 0.5;\n}\n",types:["polygon","vector"],title:"Dashed Border",format:"css",preview:{config:{type:"polygon",paths:[{fill:"transparent",stroke:"#333",strokeWidth:4,strokeDasharray:"20 10",strokeOpacity:.5}]}}},{code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n    fill: #ddd;\n    stroke: #333;\n    stroke-width: 1;\n}\n",types:["polygon","vector"],title:"Simple",format:"css",preview:{config:{type:"polygon",paths:[{fill:"#ddd",stroke:"#333",strokeWidth:4}]}}},{code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n    fill: symbol('shape://slash');\n    :fill {\n        size: 8;\n        stroke: #000;\n        stroke-width: 1;\n        stroke-linecap: round;\n    };\n}\n",types:["polygon","vector"],title:"Line Pattern",format:"css",preview:{config:{type:"polygon",paths:[{fill:"url(#line)"}],patterns:[{id:"line",icon:{d:"M0.0 1.0 L1.0 0.0",stroke:"#000",strokeWidth:.05}}]}}},{code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n    fill: symbol('shape://dot');\n    :fill {\n        size: 8;\n        stroke: #000000;\n        stroke-width: 4;\n    };\n}\n",types:["polygon","vector"],title:"Dot Pattern",format:"css",preview:{config:{type:"polygon",paths:[{fill:"url(#poly_dot)"}],patterns:[{id:"poly_dot",icon:{d:"M0.5 0.5 L0.5 0.52Z",stroke:"#000",strokeLinecap:"round",strokeWidth:.2}}]}}},{code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n    mark: symbol('circle');\n    :mark {\n        size: 16;\n        stroke: #333;\n        stroke-width: 2;\n        fill: #ddd;\n    };\n}\n\n* {\n    stroke: #333333;\n    stroke-width: 0.5;\n}\n",types:["polygon","vector"],title:"Marker",format:"css",preview:{config:{type:"polygon",paths:[{fill:"transparent",stroke:"#333"},{type:"point",d:"M 160,100 A 60,60 0 0 1 100,160 60,60 0 0 1 40,100 60,60 0 0 1 100,40 60,60 0 0 1 160,100 Z",stroke:"#333",fill:"#ddd",strokeWidth:4}]}}},{code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n    fill: #ddd, symbol('cross');\n    :fill {\n        size: 20;\n        stroke: #333;\n        stroke-width: 1;\n        fill: #f2f2f2;\n    };\n}\n",types:["polygon","vector"],title:"Fill Pattern",format:"css",preview:{config:{type:"polygon",paths:[{fill:"#ddd"},{fill:"url(#poly_square)"}],patterns:[{id:"poly_square",icon:{d:"M0.1 0.1 L0.9 0.1 L0.9 0.9 L0.1 0.9Z",stroke:"#333",strokeLinecap:"round",strokeWidth:.05,fill:"#f2f2f2"}}]}}},{code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n    label: 'Label';\n    label-anchor: 0.5 0.5;\n\n    font-fill: #000;\n    font-family: 'sans-serif';\n    font-size: 20;\n\n    halo-color: #fff;\n    halo-radius: 4;\n\n    stroke: #474747;\n    fill: symbol('shape://slash');\n    :fill {\n        size: 8;\n        stroke: #000;\n        stroke-width: 1;\n        stroke-linecap: round;\n    };\n}\n",types:["polygon","vector"],title:"Label and Fill",format:"css",preview:{config:{type:"polygon",paths:[{fill:"transparent",stroke:"#000",strokeWidth:2},{fill:"url(#line)"}],texts:[{text:"Label",style:{fontSize:50,fontWeight:"bold",strokeWidth:12,stroke:"#ffffff"}},{text:"Label",fill:"#000000",style:{fontSize:50,fontWeight:"bold",strokeWidth:1,stroke:"#000000"}}]}}},{types:["point","vector"],title:"Square",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\tmark: symbol('square');\n\t:mark {\n\t\tstroke: #ff338f;\n\t\tfill: #bcedff;\n\t};\n}",preview:{config:{type:"point",paths:[{d:"M40 40 L160 40 L160 160 L40 160Z",stroke:"#ff338f",fill:"#bcedff",strokeWidth:4}]}}},{types:["point","vector"],title:"Circle",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\tmark: symbol('circle');\n\t:mark {\n\t\tstroke: #ff338f;\n\t\tfill: #bcedff;\n\t};\n}",preview:{config:{type:"point",paths:[{d:"M 160,100 A 60,60 0 0 1 100,160 60,60 0 0 1 40,100 60,60 0 0 1 100,40 60,60 0 0 1 160,100 Z",stroke:"#ff338f",fill:"#bcedff",strokeWidth:4}]}}},{types:["point","vector"],title:"Triangle",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\tmark: symbol('triangle');\n\t:mark {\n\t\tstroke: #ff338f;\n\t\tfill: #bcedff;\n\t};\n}",preview:{config:{type:"point",paths:[{d:"M 160,151.96151 H 40 L 99.999999,48.038488 Z",stroke:"#ff338f",fill:"#bcedff",strokeWidth:4}]}}},{types:["point","vector"],title:"Star",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\tmark: symbol('star');\n\t:mark {\n\t\tstroke: #ff338f;\n\t\tfill: #bcedff;\n\t};\n}",preview:{config:{type:"point",paths:[{d:"M 165.07677,84.40286 131.87672,116.49613 139.49277,162.03972 98.710865,140.38195 57.749838,161.699 65.745291,116.22048 32.813927,83.851564 78.537289,77.40206 99.145626,36.079922 119.40876,77.572419 Z",stroke:"#ff338f",fill:"#bcedff",strokeWidth:4}]}}},{types:["point","vector"],title:"Cross",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\tmark: symbol('cross');\n\t:mark {\n\t\tstroke: #ff338f;\n\t\tfill: #bcedff;\n\t};\n}",preview:{config:{type:"point",paths:[{d:"M 84.99987,39.999998 V 84.999868 H 39.999999 V 115.00013 H 84.99987 V 160 H 115.00013 V 115.00013 H 160 V 84.999868 H 115.00013 V 39.999998 Z",stroke:"#ff338f",fill:"#bcedff",strokeWidth:4}]}}},{types:["point","vector"],title:"X",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\tmark: symbol('x');\n\t:mark {\n\t\tstroke: #ff338f;\n\t\tfill: #bcedff;\n\t};\n}",preview:{config:{type:"point",paths:[{d:"M 131.81971,46.966899 100,78.786612 68.180288,46.966898 46.966899,68.180287 78.786613,100 46.9669,131.81971 68.180287,153.0331 100,121.21339 131.81971,153.0331 153.0331,131.81971 121.21339,99.999999 153.0331,68.180286 Z",stroke:"#ff338f",fill:"#bcedff",strokeWidth:4}]}}},{types:["point","vector"],title:"Line",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\tmark: symbol('shape://vertline');\n\t:mark { stroke: #ff338f; };\n}",preview:{config:{type:"point",paths:[{d:"M 100,40 V 160 Z",stroke:"#ff338f",strokeWidth:4,fill:"none"}]}}},{types:["point","vector"],title:"Plus",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\tmark: symbol('shape://plus');\n\t:mark { stroke: #ff338f; };\n}",preview:{config:{type:"point",paths:[{d:"M 100,40 V 160 Z",stroke:"#ff338f",strokeWidth:4,fill:"none"},{d:"M 160,100 40.000002,100 Z",stroke:"#ff338f",strokeWidth:4,fill:"none"}]}}},{types:["point","vector"],title:"Times",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\tmark: symbol('shape://times');\n\t:mark { stroke: #ff338f; };\n}",preview:{config:{type:"point",paths:[{d:"M 142.42641,57.573591 57.573595,142.4264 Z",stroke:"#ff338f",strokeWidth:4,fill:"none"},{d:"M 142.42641,142.42641 57.573595,57.573594 Z",stroke:"#ff338f",strokeWidth:4,fill:"none"}]}}},{types:["point","vector"],title:"Open arrow",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\tmark: symbol('shape://oarrow');\n\t:mark { stroke: #ff338f; };\n}",preview:{config:{type:"point",paths:[{d:"M 40.027335,53.266123 159.77305,100 40.027335,146.73388",stroke:"#ff338f",strokeWidth:4,fill:"none"}]}}},{types:["point","vector"],title:"Closed arrow",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\tmark: symbol('shape://carrow');\n\t:mark { stroke: #ff338f; };\n}",preview:{config:{type:"point",paths:[{d:"M 40.027335,53.266123 159.77305,100 40.027335,146.73388Z",stroke:"#ff338f",strokeWidth:4,fill:"none"}]}}},{code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n    label: 'Label';\n    label-anchor: 0.5 2;\n    label-conflict-resolution: false;\n\n    font-fill: #000;\n    font-family: 'sans-serif';\n    font-size: 20;\n\n    halo-color: #fff;\n    halo-radius: 4;\n\n    mark: symbol('circle');\n    :mark {\n        size: 7;\n        stroke: #0d0d0d;\n        stroke-width: 0.7;\n    };\n}\n",types:["polygon","point","vector"],title:"Label and Marker",format:"css",preview:{config:{type:"polygon",paths:[{type:"point",d:"M 100, 100 m -10, 0 a 10,10 0 1,0 20,0 a 10,10 0 1,0 -20,0",stroke:"#0d0d0d",fill:"transparent",strokeWidth:2}],texts:[{text:"Label",y:150,style:{fontSize:50,fontWeight:"bold",strokeWidth:12,stroke:"#ffffff"}},{text:"Label",fill:"#000000",y:150,style:{fontSize:50,fontWeight:"bold",strokeWidth:1,stroke:"#000000"}}]}}}].map((function(e){return o(o({},e),{},{styleId:a()})}));e.exports={baseTemplates:s,customTemplates:l}},"./js/plugins.js":function(e,t,n){var r=n("./js/epics/index.js");e.exports={plugins:{AddGroupPlugin:n("./MapStore2/web/client/plugins/AddGroup.jsx").default,IdentifyPlugin:n("./MapStore2/web/client/plugins/Identify.jsx"),TOCPlugin:n("./MapStore2/web/client/plugins/TOC.jsx"),MapPlugin:n("./MapStore2/web/client/plugins/Map.jsx"),ToolbarPlugin:n("./MapStore2/web/client/plugins/Toolbar.jsx"),DrawerMenuPlugin:n("./MapStore2/web/client/plugins/DrawerMenu.jsx"),ZoomAllPlugin:n("./MapStore2/web/client/plugins/ZoomAll.jsx"),MapLoadingPlugin:n("./MapStore2/web/client/plugins/MapLoading.jsx"),OmniBarPlugin:n("./MapStore2/web/client/plugins/OmniBar.jsx"),BackgroundSelectorPlugin:n("./MapStore2/web/client/plugins/BackgroundSelector.jsx"),FullScreenPlugin:n("./MapStore2/web/client/plugins/FullScreen.jsx"),ZoomInPlugin:n("./MapStore2/web/client/plugins/ZoomIn.jsx"),ZoomOutPlugin:n("./MapStore2/web/client/plugins/ZoomOut.jsx"),ExpanderPlugin:n("./MapStore2/web/client/plugins/Expander.jsx"),BurgerMenuPlugin:n("./MapStore2/web/client/plugins/BurgerMenu.jsx"),UndoPlugin:n("./MapStore2/web/client/plugins/History.jsx"),RedoPlugin:n("./MapStore2/web/client/plugins/History.jsx"),ScaleBoxPlugin:n("./MapStore2/web/client/plugins/ScaleBox.jsx"),MapFooterPlugin:n("./MapStore2/web/client/plugins/MapFooter.jsx"),PrintPlugin:n("./MapStore2/web/client/plugins/Print.jsx"),MeasurePlugin:n("./MapStore2/web/client/plugins/Measure.jsx"),FilterLayerPlugin:n("./MapStore2/web/client/plugins/FilterLayer.jsx").default,TOCItemsSettingsPlugin:n("./MapStore2/web/client/plugins/TOCItemsSettings.jsx").default,WidgetsPlugin:n("./MapStore2/web/client/plugins/Widgets.jsx").default,WidgetsBuilderPlugin:n("./MapStore2/web/client/plugins/WidgetsBuilder.jsx").default,WidgetsTrayPlugin:n("./MapStore2/web/client/plugins/WidgetsTray.jsx").default,NotificationsPlugin:n("./MapStore2/web/client/plugins/Notifications.jsx"),FeatureEditorPlugin:n("./MapStore2/web/client/plugins/FeatureEditor.jsx").default,QueryPanelPlugin:n("./MapStore2/web/client/plugins/QueryPanel.jsx"),SavePlugin:n("./MapStore2/web/client/plugins/Save.jsx").default,SaveAsPlugin:n("./MapStore2/web/client/plugins/SaveAs.jsx").default,MetadataExplorerPlugin:n("./MapStore2/web/client/plugins/MetadataExplorer.jsx"),GridContainerPlugin:n("./MapStore2/web/client/plugins/GridContainer.jsx"),StyleEditorPlugin:n("./MapStore2/web/client/plugins/StyleEditor.jsx"),TimelinePlugin:n("./MapStore2/web/client/plugins/Timeline.jsx"),PlaybackPlugin:n("./MapStore2/web/client/plugins/Playback.jsx"),SettingsPlugin:n("./MapStore2/web/client/plugins/Settings.jsx"),GeoStoryPlugin:n("./MapStore2/web/client/plugins/GeoStory.jsx"),ConnectedSamplePlugin:n("./MapStore2/web/client/plugins/example.jsx"),MousePositionPlugin:n("./MapStore2/web/client/plugins/MousePosition.jsx"),SearchPlugin:n("./MapStore2/web/client/plugins/Search.jsx"),StylerPlugin:n("./MapStore2/web/client/plugins/Styler.jsx"),SnapshotPlugin:n("./MapStore2/web/client/plugins/Snapshot.jsx"),ThematicLayerPlugin:n("./MapStore2/web/client/plugins/ThematicLayer.jsx"),TutorialPlugin:n("./MapStore2/web/client/plugins/Tutorial.jsx"),LocatePlugin:n("./MapStore2/web/client/plugins/Locate.jsx"),MapImportPlugin:n("./MapStore2/web/client/plugins/MapImport.jsx"),SharePlugin:n("./MapStore2/web/client/plugins/Share.jsx"),FloatingPlugin:n("./MapStore2/web/client/plugins/FloatingLegend.jsx"),RulesEditorPlugin:n("./MapStore2/web/client/plugins/RulesEditor.jsx"),SearchServicesConfigPlugin:n("./MapStore2/web/client/plugins/SearchServicesConfig.jsx"),AddReducersAndEpics:{reducers:{security:n("./MapStore2/web/client/reducers/security.js"),maps:n("./MapStore2/web/client/reducers/maps.js"),currentMap:n("./MapStore2/web/client/reducers/currentMap.js"),mapPopups:n("./MapStore2/web/client/reducers/mapPopups.js")},epics:r}},requires:{ReactSwipe:n("./node_modules/react-swipeable-views/lib/index.js").default,SwipeHeader:n("./MapStore2/web/client/components/data/identify/SwipeHeader.jsx")}}},"./node_modules/css-loader/index.js!./node_modules/postcss-loader/src/index.js?!./MapStore2/web/client/components/TOC/css/toc.css":function(e,t,n){(e.exports=n("./node_modules/css-loader/lib/css-base.js")()).push([e.i,"",""])},"./node_modules/css-loader/index.js!./node_modules/postcss-loader/src/index.js?!./MapStore2/web/client/components/TOC/fragments/css/groupchildren.css":function(e,t,n){(e.exports=n("./node_modules/css-loader/lib/css-base.js")()).push([e.i,".msgapi .toc-group-children {\n    margin-left: 15px;\n}\n\n.msgapi .TOC-Node-enter, .msgapi .TOC-Node-leave {\n    transition: all 250ms ease-out;\n    -o-transition: all 250ms ease-out;\n    -moz-transition: all 250ms ease-out;\n    -webkit-transition: all 250ms ease-out;\n    overflow: hidden;\n}\n.msgapi .TOC-Node-enter,.msgapi .TOC-Node-leave.TOC-Node-leave-active {\n    opacity: 0;\n    transform: scale(1, 0);\n    transform-origin: top;\n}\n.msgapi .TOC-Node-leave, .msgapi .TOC-Node-enter.TOC-Node-enter-active {\n    opacity: 1;\n    transform: scale(1, 1);\n    transform-origin: top;\n}\n",""])},"./node_modules/css-loader/index.js!./node_modules/postcss-loader/src/index.js?!./MapStore2/web/client/components/TOC/fragments/css/settingsModal.css":function(e,t,n){(e.exports=n("./node_modules/css-loader/lib/css-base.js")()).push([e.i,"\n.msgapi #mapstore-layer-settings {\n    min-width: 400px;\n}\n\n.msgapi .portal-dialog {\n    position: absolute;\n}\n\n@media all and (min-width: 635px) {\n    .msgapi .portal-dialog {\n        left: calc(50% - 315px);\n        top: 100px;\n        max-width: 630px;\n        background-color: #fff;\n    }\n}\n\n@media all and (max-width: 634px) {\n    .msgapi .portal-dialog {\n        width: 100%;\n    }\n}\n",""])},"./node_modules/css-loader/index.js!./node_modules/postcss-loader/src/index.js?!./MapStore2/web/client/components/TOC/fragments/css/toctitle.css":function(e,t,n){(e.exports=n("./node_modules/css-loader/lib/css-base.js")()).push([e.i,".msgapi .toc-title {\n    display: inline-block;\n    max-width: 150px;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n}\n",""])},"./node_modules/css-loader/index.js!./node_modules/postcss-loader/src/index.js?!./MapStore2/web/client/components/TOC/fragments/settings/css/elevation.css":function(e,t,n){(e.exports=n("./node_modules/css-loader/lib/css-base.js")()).push([e.i,".msgapi #mapstore-elevation {\n    width: 100%;\n    /*margin-top: -46px;*/\n    height: 80px;\n    padding: 0 5px;\n}\n\n.msgapi label#mapstore-elevation-label {\n    margin-top: 10px;\n}\n\n.msgapi .custom-tooltip {\n    width: auto;\n    margin: 0;\n    line-height: 24px;\n    border: 1px solid #C1C1C1;\n    background-color: rgba(255, 255, 255, 0.8);\n    padding: 5px;\n}\n.msgapi .custom-tooltip  .label {\n  margin: 0;\n  color: #82CA9D;\n  font-weight: bold;\n  font-size: 16px;\n}\n",""])},"./node_modules/css-loader/index.js!./node_modules/postcss-loader/src/index.js?!./MapStore2/web/client/components/data/featuregrid/toolbars/toolbar.css":function(e,t,n){(e.exports=n("./node_modules/css-loader/lib/css-base.js")()).push([e.i,"\n.msgapi .featuregrid-toolbar {\n    margin-top: 5px;\n    margin-bottom: 5px;\n}\n\n.msgapi #featuregrid-toolbar .btn {\n    overflow: hidden;\n}\n",""])},"./node_modules/css-loader/index.js!./node_modules/postcss-loader/src/index.js?!./MapStore2/web/client/components/data/query/queryform.css":function(e,t,n){(e.exports=n("./node_modules/css-loader/lib/css-base.js")()).push([e.i,"",""])},"./node_modules/css-loader/index.js!./node_modules/postcss-loader/src/index.js?!./MapStore2/web/client/components/map/leaflet/snapshot/snapshotMapStyle.css":function(e,t,n){(e.exports=n("./node_modules/css-loader/lib/css-base.js")()).push([e.i,"  .msgapi .snapshot_hidden_map{\n            position:absolute;\n            width: 100%;\n            height: 100%;\n            margin: 0;\n            padding: 0;\n            visibility: hidden;\n            overflow: hidden;\n            z-index:-1000;\n        }\n",""])},"./node_modules/css-loader/index.js!./node_modules/postcss-loader/src/index.js?!./MapStore2/web/client/components/map/openlayers/snapshot/snapshotMapStyle.css":function(e,t,n){(e.exports=n("./node_modules/css-loader/lib/css-base.js")()).push([e.i,"  .msgapi .snapshot_hidden_map{\n            position:absolute;\n            width: 100%;\n            height: 100%;\n            margin: 0;\n            padding: 0;\n            visibility: hidden;\n            overflow: hidden;\n            z-index:-1000;\n        }\n",""])},"./node_modules/css-loader/index.js!./node_modules/postcss-loader/src/index.js?!./MapStore2/web/client/components/mapcontrols/Snapshot/css/snapshot.css":function(e,t,n){(e.exports=n("./node_modules/css-loader/lib/css-base.js")()).push([e.i," .msgapi .snapshot-panel {\n    width: 700px;\n}\n.msgapi .snapshot-panel ul {\n    list-style:none;\n    padding-left:0;\n}\n\n.msgapi #mapstore-snapshot-panel {\n    position: absolute;\n    right: 200px;\n    min-width: 725px;\n}\n",""])},"./node_modules/css-loader/index.js!./node_modules/postcss-loader/src/index.js?!./MapStore2/web/client/components/mapcontrols/locate/css/locate.css":function(e,t,n){(e.exports=n("./node_modules/css-loader/lib/css-base.js")()).push([e.i,".msgapi #navigationBar #locate-btn {\n    position: static;\n}\n",""])},"./node_modules/css-loader/index.js!./node_modules/postcss-loader/src/index.js?!./MapStore2/web/client/components/mapcontrols/measure/measure.css":function(e,t,n){(e.exports=n("./node_modules/css-loader/lib/css-base.js")()).push([e.i,'.msgapi .option-icon {\n    margin-right: 15px;\n}\n.msgapi #measure-result-panel button {\n    padding: 14px;\n}\n.msgapi #measure-result-panel .glyphicon {\n    margin: 0 15px 0 0;\n}\n.msgapi #measure-result-panel .option-text {\n    font-size: 14px;\n    text-transform: uppercase;\n    vertical-align: middle!important;\n    vertical-align: -webkit-baseline-middle!important;\n}\n.msgapi #measure-result-panel .option-icon {\n    font-size: 32px;\n    text-transform: uppercase;\n    vertical-align: middle;\n    vertical-align: middle!important;\n    vertical-align: -webkit-baseline-middle!important;\n    vertical-align: -moz-middle-with-baseline !important;\n}\n\n.msgapi .measure-value {\n    /* this is necessary to show the uom list correctly,\n     * otherwise the list will be hidden since it exceeds the modal\n     */\n    font-family: Menlo, Monaco, Consolas, Courier New, monospace;\n}\n\n.msgapi #measure .modal-body > div[role="body"] > div {\n    overflow: visible!important;\n}\n',""])},"./node_modules/css-loader/index.js!./node_modules/postcss-loader/src/index.js?!./MapStore2/web/client/components/mapcontrols/mouseposition/mousePosition.css":function(e,t,n){(e.exports=n("./node_modules/css-loader/lib/css-base.js")()).push([e.i," .msgapi #mapstore-mouseposition {\n    z-index: 10;\n    top: -10px;\n    right: 45%;\n    position: absolute;\n    margin: 8px;\n    text-shadow: -1px -1px 1px #000,\n                  1px -1px 1px #000,\n                 -1px  1px 1px #000,\n                  1px  1px 1px #000;\n}\n\n.msgapi #mapstore-mouseposition .label {\n    max-width: 350px;\n    min-width: 200px;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    vertical-align: middle;\n\n}\n\n.msgapi #mapstore-mouseposition .label-info {\n    background-color:rgba(91,192,222,0);\n    color: white;\n    font-size: 110%;\n}\n\n.msgapi #mapstore-mouseposition h5 {\n    display: inline-block;\n}\n\n\n.msgapi #mapstore-mousepositionsettings .form-group {\n    margin-bottom: 0 !important;\n}\n\n.msgapi #mapstore-mousepositionsettings select, .msgapi #mapstore-mousepositionsettings button {\n    width: 60% !important;\n    float: right;\n    height: 35px;\n}\n\n.msgapi #mapstore-mousepositionsettings label {\n    width: 100% !important;\n}\n\n\n.msgapi #mapstore-mouseposition .label-info {\n    white-space: normal;\n    color: black;\n    font-size: 110%;\n    padding: 0;\n}\n\n.msgapi #mapstore-mouseposition {\n    bottom: 5px;\n    right: 264px;\n    top: auto;\n    margin: 0;\n    text-shadow: none;\n    background-color: white;\n    width: 160px;\n    height: 46px;\n    padding-left: 5px;\n    padding-top: 2px;\n}\n\n.msgapi #mapstore-mouseposition h5 {\n    margin-top: 5px;\n}\n\n.msgapi .mouseposition-separator {\n    display: block;\n}\n\n.msgapi #mapstore-mouseposition-mobile {\n        bottom: 25px;\n        right: 30px;\n        z-index: 10;\n        position: absolute;\n        text-shadow: -1px -1px 1px #000, 1px -1px 1px #000, -1px 1px 1px #000, 1px 1px 1px #000;\n    }\n\n.msgapi #mapstore-mouseposition-mobile .label {\n        display: inline-block;\n        max-width: 280px;\n        min-width: 200px;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n        vertical-align: middle;\n}\n\n.msgapi #mapstore-mouseposition-mobile .label-info {\n        background-color:rgba(91,192,222,0);\n        color: white;\n        font-size: 90%;\n}\n\n.msgapi #mapstore-mouseposition .form-group {\n    float: right;\n}\n\n.msgapi #mapstore-mouseposition .form-group .control-label {\n    display: none;\n}\n\n.msgapi #mapstore-mouseposition .form-group select {\n    width: 90px;\n    font-size: 11px;\n    padding: 2px;\n}\n",""])},"./node_modules/css-loader/index.js!./node_modules/postcss-loader/src/index.js?!./MapStore2/web/client/components/misc/quillmodules/assets/css/resizemodule.css":function(e,t,n){(e.exports=n("./node_modules/css-loader/lib/css-base.js")()).push([e.i,'\n\n.msgapi .ql-snow .ms-ql-iframe-tooltip[data-mode=video]::before {\n    content: "Enter iframe url:";\n}\n\n\n',""])},"./node_modules/css-loader/index.js!./node_modules/postcss-loader/src/index.js?!./MapStore2/web/client/components/misc/spinners/BasicSpinner/basicSpinner.css":function(e,t,n){(e.exports=n("./node_modules/css-loader/lib/css-base.js")()).push([e.i,"@-moz-keyframes whirly-loader {\n  .msgapi 0% {\n    -moz-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n  .msgapi 100% {\n    -moz-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n@-webkit-keyframes whirly-loader {\n  .msgapi 0% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n  .msgapi 100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n@keyframes whirly-loader {\n  0% {\n    -moz-transform: rotate(0deg);\n    -ms-transform: rotate(0deg);\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n  100% {\n    -moz-transform: rotate(360deg);\n    -ms-transform: rotate(360deg);\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n/* :not(:required) hides this rule from IE9 and below */\n.msgapi .whirly-loader:not(:required) {\n  overflow: hidden;\n  position: relative;\n  text-indent: -9999px;\n  display: inline-block;\n  width: 8px;\n  height: 8px;\n  background: transparent;\n  -moz-border-radius: 100%;\n  -webkit-border-radius: 100%;\n  border-radius: 100%;\n  -moz-box-shadow: #e66 0px 26px 0 6px, #e66 0.90971px 26.05079px 0 5.93333px, #e66 1.82297px 26.06967px 0 5.86667px, #e66 2.73865px 26.05647px 0 5.8px, #e66 3.65561px 26.01104px 0 5.73333px, #e66 4.57274px 25.93327px 0 5.66667px, #e66 5.48887px 25.8231px 0 5.6px, #e66 6.40287px 25.68049px 0 5.53333px, #e66 7.31358px 25.50548px 0 5.46667px, #e66 8.21985px 25.2981px 0 5.4px, #e66 9.12054px 25.05847px 0 5.33333px, #e66 10.01448px 24.78672px 0 5.26667px, #e66 10.90054px 24.48302px 0 5.2px, #e66 11.77757px 24.1476px 0 5.13333px, #e66 12.64443px 23.78072px 0 5.06667px, #e66 13.5px 23.38269px 0 5px, #e66 14.34315px 22.95384px 0 4.93333px, #e66 15.17277px 22.49455px 0 4.86667px, #e66 15.98776px 22.00526px 0 4.8px, #e66 16.78704px 21.48643px 0 4.73333px, #e66 17.56953px 20.93855px 0 4.66667px, #e66 18.33418px 20.36217px 0 4.6px, #e66 19.07995px 19.75787px 0 4.53333px, #e66 19.80582px 19.12626px 0 4.46667px, #e66 20.5108px 18.468px 0 4.4px, #e66 21.1939px 17.78379px 0 4.33333px, #e66 21.85416px 17.07434px 0 4.26667px, #e66 22.49067px 16.34043px 0 4.2px, #e66 23.10251px 15.58284px 0 4.13333px, #e66 23.68881px 14.80241px 0 4.06667px, #e66 24.24871px 14.0px 0 4px, #e66 24.7814px 13.1765px 0 3.93333px, #e66 25.28607px 12.33284px 0 3.86667px, #e66 25.76198px 11.46997px 0 3.8px, #e66 26.2084px 10.58888px 0 3.73333px, #e66 26.62462px 9.69057px 0 3.66667px, #e66 27.01001px 8.77608px 0 3.6px, #e66 27.36392px 7.84648px 0 3.53333px, #e66 27.68577px 6.90284px 0 3.46667px, #e66 27.97502px 5.94627px 0 3.4px, #e66 28.23116px 4.97791px 0 3.33333px, #e66 28.4537px 3.99891px 0 3.26667px, #e66 28.64223px 3.01042px 0 3.2px, #e66 28.79635px 2.01364px 0 3.13333px, #e66 28.91571px 1.00976px 0 3.06667px, #e66 29px 0.0px 0 3px, #e66 29.04896px -1.01441px 0 2.93333px, #e66 29.06237px -2.03224px 0 2.86667px, #e66 29.04004px -3.05223px 0 2.8px, #e66 28.98185px -4.07313px 0 2.73333px, #e66 28.88769px -5.09368px 0 2.66667px, #e66 28.75754px -6.1126px 0 2.6px, #e66 28.59138px -7.12863px 0 2.53333px, #e66 28.38926px -8.14049px 0 2.46667px, #e66 28.15127px -9.1469px 0 2.4px, #e66 27.87755px -10.1466px 0 2.33333px, #e66 27.56827px -11.1383px 0 2.26667px, #e66 27.22365px -12.12075px 0 2.2px, #e66 26.84398px -13.09268px 0 2.13333px, #e66 26.42956px -14.05285px 0 2.06667px, #e66 25.98076px -15.0px 0 2px, #e66 25.49798px -15.93291px 0 1.93333px, #e66 24.98167px -16.85035px 0 1.86667px, #e66 24.43231px -17.75111px 0 1.8px, #e66 23.85046px -18.63402px 0 1.73333px, #e66 23.23668px -19.49789px 0 1.66667px, #e66 22.5916px -20.34157px 0 1.6px, #e66 21.91589px -21.16393px 0 1.53333px, #e66 21.21024px -21.96384px 0 1.46667px, #e66 20.4754px -22.74023px 0 1.4px, #e66 19.71215px -23.49203px 0 1.33333px, #e66 18.92133px -24.2182px 0 1.26667px, #e66 18.10379px -24.91772px 0 1.2px, #e66 17.26042px -25.58963px 0 1.13333px, #e66 16.39217px -26.23295px 0 1.06667px, #e66 15.5px -26.84679px 0 1px, #e66 14.58492px -27.43024px 0 0.93333px, #e66 13.64796px -27.98245px 0 0.86667px, #e66 12.69018px -28.50262px 0 0.8px, #e66 11.7127px -28.98995px 0 0.73333px, #e66 10.71663px -29.4437px 0 0.66667px, #e66 9.70313px -29.86317px 0 0.6px, #e66 8.67339px -30.2477px 0 0.53333px, #e66 7.6286px -30.59666px 0 0.46667px, #e66 6.57001px -30.90946px 0 0.4px, #e66 5.49886px -31.18558px 0 0.33333px, #e66 4.41643px -31.42451px 0 0.26667px, #e66 3.32401px -31.6258px 0 0.2px, #e66 2.22291px -31.78904px 0 0.13333px, #e66 1.11446px -31.91388px 0 0.06667px, #e66 0.0px -32px 0 0px, #e66 -1.11911px -32.04713px 0 -0.06667px, #e66 -2.24151px -32.05506px 0 -0.13333px, #e66 -3.36582px -32.02361px 0 -0.2px, #e66 -4.49065px -31.95265px 0 -0.26667px, #e66 -5.61462px -31.84212px 0 -0.33333px, #e66 -6.73634px -31.69198px 0 -0.4px, #e66 -7.8544px -31.50227px 0 -0.46667px, #e66 -8.9674px -31.27305px 0 -0.53333px, #e66 -10.07395px -31.00444px 0 -0.6px, #e66 -11.17266px -30.69663px 0 -0.66667px, #e66 -12.26212px -30.34982px 0 -0.73333px, #e66 -13.34096px -29.96429px 0 -0.8px, #e66 -14.4078px -29.54036px 0 -0.86667px, #e66 -15.46126px -29.07841px 0 -0.93333px, #e66 -16.5px -28.57884px 0 -1px, #e66 -17.52266px -28.04212px 0 -1.06667px, #e66 -18.52792px -27.46878px 0 -1.13333px, #e66 -19.51447px -26.85936px 0 -1.2px, #e66 -20.48101px -26.21449px 0 -1.26667px, #e66 -21.42625px -25.53481px 0 -1.33333px, #e66 -22.34896px -24.82104px 0 -1.4px, #e66 -23.2479px -24.07391px 0 -1.46667px, #e66 -24.12186px -23.29421px 0 -1.53333px, #e66 -24.96967px -22.48279px 0 -1.6px, #e66 -25.79016px -21.64052px 0 -1.66667px, #e66 -26.58223px -20.76831px 0 -1.73333px, #e66 -27.34477px -19.86714px 0 -1.8px, #e66 -28.07674px -18.938px 0 -1.86667px, #e66 -28.7771px -17.98193px 0 -1.93333px, #e66 -29.44486px -17.0px 0 -2px, #e66 -30.07908px -15.99333px 0 -2.06667px, #e66 -30.67884px -14.96307px 0 -2.13333px, #e66 -31.24325px -13.91039px 0 -2.2px, #e66 -31.7715px -12.83652px 0 -2.26667px, #e66 -32.26278px -11.74269px 0 -2.33333px, #e66 -32.71634px -10.63018px 0 -2.4px, #e66 -33.13149px -9.5003px 0 -2.46667px, #e66 -33.50755px -8.35437px 0 -2.53333px, #e66 -33.84391px -7.19374px 0 -2.6px, #e66 -34.14px -6.0198px 0 -2.66667px, #e66 -34.39531px -4.83395px 0 -2.73333px, #e66 -34.60936px -3.63759px 0 -2.8px, #e66 -34.78173px -2.43218px 0 -2.86667px, #e66 -34.91205px -1.21916px 0 -2.93333px, #e66 -35px 0.0px 0 -3px, #e66 -35.04531px 1.22381px 0 -3.06667px, #e66 -35.04775px 2.45078px 0 -3.13333px, #e66 -35.00717px 3.6794px 0 -3.2px, #e66 -34.92345px 4.90817px 0 -3.26667px, #e66 -34.79654px 6.13557px 0 -3.33333px, #e66 -34.62643px 7.36007px 0 -3.4px, #e66 -34.41316px 8.58016px 0 -3.46667px, #e66 -34.15683px 9.79431px 0 -3.53333px, #e66 -33.85761px 11.001px 0 -3.6px, #e66 -33.5157px 12.19872px 0 -3.66667px, #e66 -33.13137px 13.38594px 0 -3.73333px, #e66 -32.70493px 14.56117px 0 -3.8px, #e66 -32.23675px 15.72291px 0 -3.86667px, #e66 -31.72725px 16.86968px 0 -3.93333px, #e66 -31.17691px 18px 0 -4px, #e66 -30.58627px 19.11242px 0 -4.06667px, #e66 -29.95589px 20.2055px 0 -4.13333px, #e66 -29.28642px 21.27783px 0 -4.2px, #e66 -28.57852px 22.32799px 0 -4.26667px, #e66 -27.83295px 23.35462px 0 -4.33333px, #e66 -27.05047px 24.35635px 0 -4.4px, #e66 -26.23192px 25.33188px 0 -4.46667px, #e66 -25.37819px 26.27988px 0 -4.53333px, #e66 -24.49018px 27.1991px 0 -4.6px, #e66 -23.56888px 28.0883px 0 -4.66667px, #e66 -22.6153px 28.94626px 0 -4.73333px, #e66 -21.6305px 29.77183px 0 -4.8px, #e66 -20.61558px 30.56385px 0 -4.86667px, #e66 -19.57168px 31.32124px 0 -4.93333px, #e66 -18.5px 32.04294px 0 -5px, #e66 -17.40175px 32.72792px 0 -5.06667px, #e66 -16.27818px 33.37522px 0 -5.13333px, #e66 -15.1306px 33.98389px 0 -5.2px, #e66 -13.96034px 34.55305px 0 -5.26667px, #e66 -12.76875px 35.08186px 0 -5.33333px, #e66 -11.55724px 35.56951px 0 -5.4px, #e66 -10.32721px 36.01527px 0 -5.46667px, #e66 -9.08014px 36.41843px 0 -5.53333px, #e66 -7.81748px 36.77835px 0 -5.6px, #e66 -6.54075px 37.09443px 0 -5.66667px, #e66 -5.25147px 37.36612px 0 -5.73333px, #e66 -3.95118px 37.59293px 0 -5.8px, #e66 -2.64145px 37.77443px 0 -5.86667px, #e66 -1.32385px 37.91023px 0 -5.93333px;\n  -webkit-box-shadow: #e66 0px 26px 0 6px, #e66 0.90971px 26.05079px 0 5.93333px, #e66 1.82297px 26.06967px 0 5.86667px, #e66 2.73865px 26.05647px 0 5.8px, #e66 3.65561px 26.01104px 0 5.73333px, #e66 4.57274px 25.93327px 0 5.66667px, #e66 5.48887px 25.8231px 0 5.6px, #e66 6.40287px 25.68049px 0 5.53333px, #e66 7.31358px 25.50548px 0 5.46667px, #e66 8.21985px 25.2981px 0 5.4px, #e66 9.12054px 25.05847px 0 5.33333px, #e66 10.01448px 24.78672px 0 5.26667px, #e66 10.90054px 24.48302px 0 5.2px, #e66 11.77757px 24.1476px 0 5.13333px, #e66 12.64443px 23.78072px 0 5.06667px, #e66 13.5px 23.38269px 0 5px, #e66 14.34315px 22.95384px 0 4.93333px, #e66 15.17277px 22.49455px 0 4.86667px, #e66 15.98776px 22.00526px 0 4.8px, #e66 16.78704px 21.48643px 0 4.73333px, #e66 17.56953px 20.93855px 0 4.66667px, #e66 18.33418px 20.36217px 0 4.6px, #e66 19.07995px 19.75787px 0 4.53333px, #e66 19.80582px 19.12626px 0 4.46667px, #e66 20.5108px 18.468px 0 4.4px, #e66 21.1939px 17.78379px 0 4.33333px, #e66 21.85416px 17.07434px 0 4.26667px, #e66 22.49067px 16.34043px 0 4.2px, #e66 23.10251px 15.58284px 0 4.13333px, #e66 23.68881px 14.80241px 0 4.06667px, #e66 24.24871px 14.0px 0 4px, #e66 24.7814px 13.1765px 0 3.93333px, #e66 25.28607px 12.33284px 0 3.86667px, #e66 25.76198px 11.46997px 0 3.8px, #e66 26.2084px 10.58888px 0 3.73333px, #e66 26.62462px 9.69057px 0 3.66667px, #e66 27.01001px 8.77608px 0 3.6px, #e66 27.36392px 7.84648px 0 3.53333px, #e66 27.68577px 6.90284px 0 3.46667px, #e66 27.97502px 5.94627px 0 3.4px, #e66 28.23116px 4.97791px 0 3.33333px, #e66 28.4537px 3.99891px 0 3.26667px, #e66 28.64223px 3.01042px 0 3.2px, #e66 28.79635px 2.01364px 0 3.13333px, #e66 28.91571px 1.00976px 0 3.06667px, #e66 29px 0.0px 0 3px, #e66 29.04896px -1.01441px 0 2.93333px, #e66 29.06237px -2.03224px 0 2.86667px, #e66 29.04004px -3.05223px 0 2.8px, #e66 28.98185px -4.07313px 0 2.73333px, #e66 28.88769px -5.09368px 0 2.66667px, #e66 28.75754px -6.1126px 0 2.6px, #e66 28.59138px -7.12863px 0 2.53333px, #e66 28.38926px -8.14049px 0 2.46667px, #e66 28.15127px -9.1469px 0 2.4px, #e66 27.87755px -10.1466px 0 2.33333px, #e66 27.56827px -11.1383px 0 2.26667px, #e66 27.22365px -12.12075px 0 2.2px, #e66 26.84398px -13.09268px 0 2.13333px, #e66 26.42956px -14.05285px 0 2.06667px, #e66 25.98076px -15.0px 0 2px, #e66 25.49798px -15.93291px 0 1.93333px, #e66 24.98167px -16.85035px 0 1.86667px, #e66 24.43231px -17.75111px 0 1.8px, #e66 23.85046px -18.63402px 0 1.73333px, #e66 23.23668px -19.49789px 0 1.66667px, #e66 22.5916px -20.34157px 0 1.6px, #e66 21.91589px -21.16393px 0 1.53333px, #e66 21.21024px -21.96384px 0 1.46667px, #e66 20.4754px -22.74023px 0 1.4px, #e66 19.71215px -23.49203px 0 1.33333px, #e66 18.92133px -24.2182px 0 1.26667px, #e66 18.10379px -24.91772px 0 1.2px, #e66 17.26042px -25.58963px 0 1.13333px, #e66 16.39217px -26.23295px 0 1.06667px, #e66 15.5px -26.84679px 0 1px, #e66 14.58492px -27.43024px 0 0.93333px, #e66 13.64796px -27.98245px 0 0.86667px, #e66 12.69018px -28.50262px 0 0.8px, #e66 11.7127px -28.98995px 0 0.73333px, #e66 10.71663px -29.4437px 0 0.66667px, #e66 9.70313px -29.86317px 0 0.6px, #e66 8.67339px -30.2477px 0 0.53333px, #e66 7.6286px -30.59666px 0 0.46667px, #e66 6.57001px -30.90946px 0 0.4px, #e66 5.49886px -31.18558px 0 0.33333px, #e66 4.41643px -31.42451px 0 0.26667px, #e66 3.32401px -31.6258px 0 0.2px, #e66 2.22291px -31.78904px 0 0.13333px, #e66 1.11446px -31.91388px 0 0.06667px, #e66 0.0px -32px 0 0px, #e66 -1.11911px -32.04713px 0 -0.06667px, #e66 -2.24151px -32.05506px 0 -0.13333px, #e66 -3.36582px -32.02361px 0 -0.2px, #e66 -4.49065px -31.95265px 0 -0.26667px, #e66 -5.61462px -31.84212px 0 -0.33333px, #e66 -6.73634px -31.69198px 0 -0.4px, #e66 -7.8544px -31.50227px 0 -0.46667px, #e66 -8.9674px -31.27305px 0 -0.53333px, #e66 -10.07395px -31.00444px 0 -0.6px, #e66 -11.17266px -30.69663px 0 -0.66667px, #e66 -12.26212px -30.34982px 0 -0.73333px, #e66 -13.34096px -29.96429px 0 -0.8px, #e66 -14.4078px -29.54036px 0 -0.86667px, #e66 -15.46126px -29.07841px 0 -0.93333px, #e66 -16.5px -28.57884px 0 -1px, #e66 -17.52266px -28.04212px 0 -1.06667px, #e66 -18.52792px -27.46878px 0 -1.13333px, #e66 -19.51447px -26.85936px 0 -1.2px, #e66 -20.48101px -26.21449px 0 -1.26667px, #e66 -21.42625px -25.53481px 0 -1.33333px, #e66 -22.34896px -24.82104px 0 -1.4px, #e66 -23.2479px -24.07391px 0 -1.46667px, #e66 -24.12186px -23.29421px 0 -1.53333px, #e66 -24.96967px -22.48279px 0 -1.6px, #e66 -25.79016px -21.64052px 0 -1.66667px, #e66 -26.58223px -20.76831px 0 -1.73333px, #e66 -27.34477px -19.86714px 0 -1.8px, #e66 -28.07674px -18.938px 0 -1.86667px, #e66 -28.7771px -17.98193px 0 -1.93333px, #e66 -29.44486px -17.0px 0 -2px, #e66 -30.07908px -15.99333px 0 -2.06667px, #e66 -30.67884px -14.96307px 0 -2.13333px, #e66 -31.24325px -13.91039px 0 -2.2px, #e66 -31.7715px -12.83652px 0 -2.26667px, #e66 -32.26278px -11.74269px 0 -2.33333px, #e66 -32.71634px -10.63018px 0 -2.4px, #e66 -33.13149px -9.5003px 0 -2.46667px, #e66 -33.50755px -8.35437px 0 -2.53333px, #e66 -33.84391px -7.19374px 0 -2.6px, #e66 -34.14px -6.0198px 0 -2.66667px, #e66 -34.39531px -4.83395px 0 -2.73333px, #e66 -34.60936px -3.63759px 0 -2.8px, #e66 -34.78173px -2.43218px 0 -2.86667px, #e66 -34.91205px -1.21916px 0 -2.93333px, #e66 -35px 0.0px 0 -3px, #e66 -35.04531px 1.22381px 0 -3.06667px, #e66 -35.04775px 2.45078px 0 -3.13333px, #e66 -35.00717px 3.6794px 0 -3.2px, #e66 -34.92345px 4.90817px 0 -3.26667px, #e66 -34.79654px 6.13557px 0 -3.33333px, #e66 -34.62643px 7.36007px 0 -3.4px, #e66 -34.41316px 8.58016px 0 -3.46667px, #e66 -34.15683px 9.79431px 0 -3.53333px, #e66 -33.85761px 11.001px 0 -3.6px, #e66 -33.5157px 12.19872px 0 -3.66667px, #e66 -33.13137px 13.38594px 0 -3.73333px, #e66 -32.70493px 14.56117px 0 -3.8px, #e66 -32.23675px 15.72291px 0 -3.86667px, #e66 -31.72725px 16.86968px 0 -3.93333px, #e66 -31.17691px 18px 0 -4px, #e66 -30.58627px 19.11242px 0 -4.06667px, #e66 -29.95589px 20.2055px 0 -4.13333px, #e66 -29.28642px 21.27783px 0 -4.2px, #e66 -28.57852px 22.32799px 0 -4.26667px, #e66 -27.83295px 23.35462px 0 -4.33333px, #e66 -27.05047px 24.35635px 0 -4.4px, #e66 -26.23192px 25.33188px 0 -4.46667px, #e66 -25.37819px 26.27988px 0 -4.53333px, #e66 -24.49018px 27.1991px 0 -4.6px, #e66 -23.56888px 28.0883px 0 -4.66667px, #e66 -22.6153px 28.94626px 0 -4.73333px, #e66 -21.6305px 29.77183px 0 -4.8px, #e66 -20.61558px 30.56385px 0 -4.86667px, #e66 -19.57168px 31.32124px 0 -4.93333px, #e66 -18.5px 32.04294px 0 -5px, #e66 -17.40175px 32.72792px 0 -5.06667px, #e66 -16.27818px 33.37522px 0 -5.13333px, #e66 -15.1306px 33.98389px 0 -5.2px, #e66 -13.96034px 34.55305px 0 -5.26667px, #e66 -12.76875px 35.08186px 0 -5.33333px, #e66 -11.55724px 35.56951px 0 -5.4px, #e66 -10.32721px 36.01527px 0 -5.46667px, #e66 -9.08014px 36.41843px 0 -5.53333px, #e66 -7.81748px 36.77835px 0 -5.6px, #e66 -6.54075px 37.09443px 0 -5.66667px, #e66 -5.25147px 37.36612px 0 -5.73333px, #e66 -3.95118px 37.59293px 0 -5.8px, #e66 -2.64145px 37.77443px 0 -5.86667px, #e66 -1.32385px 37.91023px 0 -5.93333px;\n  box-shadow: #e66 0px 26px 0 6px, #e66 0.90971px 26.05079px 0 5.93333px, #e66 1.82297px 26.06967px 0 5.86667px, #e66 2.73865px 26.05647px 0 5.8px, #e66 3.65561px 26.01104px 0 5.73333px, #e66 4.57274px 25.93327px 0 5.66667px, #e66 5.48887px 25.8231px 0 5.6px, #e66 6.40287px 25.68049px 0 5.53333px, #e66 7.31358px 25.50548px 0 5.46667px, #e66 8.21985px 25.2981px 0 5.4px, #e66 9.12054px 25.05847px 0 5.33333px, #e66 10.01448px 24.78672px 0 5.26667px, #e66 10.90054px 24.48302px 0 5.2px, #e66 11.77757px 24.1476px 0 5.13333px, #e66 12.64443px 23.78072px 0 5.06667px, #e66 13.5px 23.38269px 0 5px, #e66 14.34315px 22.95384px 0 4.93333px, #e66 15.17277px 22.49455px 0 4.86667px, #e66 15.98776px 22.00526px 0 4.8px, #e66 16.78704px 21.48643px 0 4.73333px, #e66 17.56953px 20.93855px 0 4.66667px, #e66 18.33418px 20.36217px 0 4.6px, #e66 19.07995px 19.75787px 0 4.53333px, #e66 19.80582px 19.12626px 0 4.46667px, #e66 20.5108px 18.468px 0 4.4px, #e66 21.1939px 17.78379px 0 4.33333px, #e66 21.85416px 17.07434px 0 4.26667px, #e66 22.49067px 16.34043px 0 4.2px, #e66 23.10251px 15.58284px 0 4.13333px, #e66 23.68881px 14.80241px 0 4.06667px, #e66 24.24871px 14.0px 0 4px, #e66 24.7814px 13.1765px 0 3.93333px, #e66 25.28607px 12.33284px 0 3.86667px, #e66 25.76198px 11.46997px 0 3.8px, #e66 26.2084px 10.58888px 0 3.73333px, #e66 26.62462px 9.69057px 0 3.66667px, #e66 27.01001px 8.77608px 0 3.6px, #e66 27.36392px 7.84648px 0 3.53333px, #e66 27.68577px 6.90284px 0 3.46667px, #e66 27.97502px 5.94627px 0 3.4px, #e66 28.23116px 4.97791px 0 3.33333px, #e66 28.4537px 3.99891px 0 3.26667px, #e66 28.64223px 3.01042px 0 3.2px, #e66 28.79635px 2.01364px 0 3.13333px, #e66 28.91571px 1.00976px 0 3.06667px, #e66 29px 0.0px 0 3px, #e66 29.04896px -1.01441px 0 2.93333px, #e66 29.06237px -2.03224px 0 2.86667px, #e66 29.04004px -3.05223px 0 2.8px, #e66 28.98185px -4.07313px 0 2.73333px, #e66 28.88769px -5.09368px 0 2.66667px, #e66 28.75754px -6.1126px 0 2.6px, #e66 28.59138px -7.12863px 0 2.53333px, #e66 28.38926px -8.14049px 0 2.46667px, #e66 28.15127px -9.1469px 0 2.4px, #e66 27.87755px -10.1466px 0 2.33333px, #e66 27.56827px -11.1383px 0 2.26667px, #e66 27.22365px -12.12075px 0 2.2px, #e66 26.84398px -13.09268px 0 2.13333px, #e66 26.42956px -14.05285px 0 2.06667px, #e66 25.98076px -15.0px 0 2px, #e66 25.49798px -15.93291px 0 1.93333px, #e66 24.98167px -16.85035px 0 1.86667px, #e66 24.43231px -17.75111px 0 1.8px, #e66 23.85046px -18.63402px 0 1.73333px, #e66 23.23668px -19.49789px 0 1.66667px, #e66 22.5916px -20.34157px 0 1.6px, #e66 21.91589px -21.16393px 0 1.53333px, #e66 21.21024px -21.96384px 0 1.46667px, #e66 20.4754px -22.74023px 0 1.4px, #e66 19.71215px -23.49203px 0 1.33333px, #e66 18.92133px -24.2182px 0 1.26667px, #e66 18.10379px -24.91772px 0 1.2px, #e66 17.26042px -25.58963px 0 1.13333px, #e66 16.39217px -26.23295px 0 1.06667px, #e66 15.5px -26.84679px 0 1px, #e66 14.58492px -27.43024px 0 0.93333px, #e66 13.64796px -27.98245px 0 0.86667px, #e66 12.69018px -28.50262px 0 0.8px, #e66 11.7127px -28.98995px 0 0.73333px, #e66 10.71663px -29.4437px 0 0.66667px, #e66 9.70313px -29.86317px 0 0.6px, #e66 8.67339px -30.2477px 0 0.53333px, #e66 7.6286px -30.59666px 0 0.46667px, #e66 6.57001px -30.90946px 0 0.4px, #e66 5.49886px -31.18558px 0 0.33333px, #e66 4.41643px -31.42451px 0 0.26667px, #e66 3.32401px -31.6258px 0 0.2px, #e66 2.22291px -31.78904px 0 0.13333px, #e66 1.11446px -31.91388px 0 0.06667px, #e66 0.0px -32px 0 0px, #e66 -1.11911px -32.04713px 0 -0.06667px, #e66 -2.24151px -32.05506px 0 -0.13333px, #e66 -3.36582px -32.02361px 0 -0.2px, #e66 -4.49065px -31.95265px 0 -0.26667px, #e66 -5.61462px -31.84212px 0 -0.33333px, #e66 -6.73634px -31.69198px 0 -0.4px, #e66 -7.8544px -31.50227px 0 -0.46667px, #e66 -8.9674px -31.27305px 0 -0.53333px, #e66 -10.07395px -31.00444px 0 -0.6px, #e66 -11.17266px -30.69663px 0 -0.66667px, #e66 -12.26212px -30.34982px 0 -0.73333px, #e66 -13.34096px -29.96429px 0 -0.8px, #e66 -14.4078px -29.54036px 0 -0.86667px, #e66 -15.46126px -29.07841px 0 -0.93333px, #e66 -16.5px -28.57884px 0 -1px, #e66 -17.52266px -28.04212px 0 -1.06667px, #e66 -18.52792px -27.46878px 0 -1.13333px, #e66 -19.51447px -26.85936px 0 -1.2px, #e66 -20.48101px -26.21449px 0 -1.26667px, #e66 -21.42625px -25.53481px 0 -1.33333px, #e66 -22.34896px -24.82104px 0 -1.4px, #e66 -23.2479px -24.07391px 0 -1.46667px, #e66 -24.12186px -23.29421px 0 -1.53333px, #e66 -24.96967px -22.48279px 0 -1.6px, #e66 -25.79016px -21.64052px 0 -1.66667px, #e66 -26.58223px -20.76831px 0 -1.73333px, #e66 -27.34477px -19.86714px 0 -1.8px, #e66 -28.07674px -18.938px 0 -1.86667px, #e66 -28.7771px -17.98193px 0 -1.93333px, #e66 -29.44486px -17.0px 0 -2px, #e66 -30.07908px -15.99333px 0 -2.06667px, #e66 -30.67884px -14.96307px 0 -2.13333px, #e66 -31.24325px -13.91039px 0 -2.2px, #e66 -31.7715px -12.83652px 0 -2.26667px, #e66 -32.26278px -11.74269px 0 -2.33333px, #e66 -32.71634px -10.63018px 0 -2.4px, #e66 -33.13149px -9.5003px 0 -2.46667px, #e66 -33.50755px -8.35437px 0 -2.53333px, #e66 -33.84391px -7.19374px 0 -2.6px, #e66 -34.14px -6.0198px 0 -2.66667px, #e66 -34.39531px -4.83395px 0 -2.73333px, #e66 -34.60936px -3.63759px 0 -2.8px, #e66 -34.78173px -2.43218px 0 -2.86667px, #e66 -34.91205px -1.21916px 0 -2.93333px, #e66 -35px 0.0px 0 -3px, #e66 -35.04531px 1.22381px 0 -3.06667px, #e66 -35.04775px 2.45078px 0 -3.13333px, #e66 -35.00717px 3.6794px 0 -3.2px, #e66 -34.92345px 4.90817px 0 -3.26667px, #e66 -34.79654px 6.13557px 0 -3.33333px, #e66 -34.62643px 7.36007px 0 -3.4px, #e66 -34.41316px 8.58016px 0 -3.46667px, #e66 -34.15683px 9.79431px 0 -3.53333px, #e66 -33.85761px 11.001px 0 -3.6px, #e66 -33.5157px 12.19872px 0 -3.66667px, #e66 -33.13137px 13.38594px 0 -3.73333px, #e66 -32.70493px 14.56117px 0 -3.8px, #e66 -32.23675px 15.72291px 0 -3.86667px, #e66 -31.72725px 16.86968px 0 -3.93333px, #e66 -31.17691px 18px 0 -4px, #e66 -30.58627px 19.11242px 0 -4.06667px, #e66 -29.95589px 20.2055px 0 -4.13333px, #e66 -29.28642px 21.27783px 0 -4.2px, #e66 -28.57852px 22.32799px 0 -4.26667px, #e66 -27.83295px 23.35462px 0 -4.33333px, #e66 -27.05047px 24.35635px 0 -4.4px, #e66 -26.23192px 25.33188px 0 -4.46667px, #e66 -25.37819px 26.27988px 0 -4.53333px, #e66 -24.49018px 27.1991px 0 -4.6px, #e66 -23.56888px 28.0883px 0 -4.66667px, #e66 -22.6153px 28.94626px 0 -4.73333px, #e66 -21.6305px 29.77183px 0 -4.8px, #e66 -20.61558px 30.56385px 0 -4.86667px, #e66 -19.57168px 31.32124px 0 -4.93333px, #e66 -18.5px 32.04294px 0 -5px, #e66 -17.40175px 32.72792px 0 -5.06667px, #e66 -16.27818px 33.37522px 0 -5.13333px, #e66 -15.1306px 33.98389px 0 -5.2px, #e66 -13.96034px 34.55305px 0 -5.26667px, #e66 -12.76875px 35.08186px 0 -5.33333px, #e66 -11.55724px 35.56951px 0 -5.4px, #e66 -10.32721px 36.01527px 0 -5.46667px, #e66 -9.08014px 36.41843px 0 -5.53333px, #e66 -7.81748px 36.77835px 0 -5.6px, #e66 -6.54075px 37.09443px 0 -5.66667px, #e66 -5.25147px 37.36612px 0 -5.73333px, #e66 -3.95118px 37.59293px 0 -5.8px, #e66 -2.64145px 37.77443px 0 -5.86667px, #e66 -1.32385px 37.91023px 0 -5.93333px;\n  -moz-animation: whirly-loader 1.25s infinite linear;\n  -webkit-animation: whirly-loader 1.25s infinite linear;\n  animation: whirly-loader 1.25s infinite linear;\n  -moz-transform-origin: 50% 50%;\n  -ms-transform-origin: 50% 50%;\n  -webkit-transform-origin: 50% 50%;\n  transform-origin: 50% 50%;\n}\n@-moz-keyframes spinner-loader {\n  .msgapi 0% {\n    -moz-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n  .msgapi 100% {\n    -moz-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n@-webkit-keyframes spinner-loader {\n  .msgapi 0% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n  .msgapi 100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n@keyframes spinner-loader {\n  0% {\n    -moz-transform: rotate(0deg);\n    -ms-transform: rotate(0deg);\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n  100% {\n    -moz-transform: rotate(360deg);\n    -ms-transform: rotate(360deg);\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n/* :not(:required) hides this rule from IE9 and below */\n.msgapi .spinner-loader:not(:required) {\n  -moz-animation: spinner-loader 1500ms infinite linear;\n  -webkit-animation: spinner-loader 1500ms infinite linear;\n  animation: spinner-loader 1500ms infinite linear;\n  -moz-border-radius: 0.5em;\n  -webkit-border-radius: 0.5em;\n  border-radius: 0.5em;\n  -moz-box-shadow: rgba(0, 0, 51, 0.3) 1.5em 0 0 0, rgba(0, 0, 51, 0.3) 1.1em 1.1em 0 0, rgba(0, 0, 51, 0.3) 0 1.5em 0 0, rgba(0, 0, 51, 0.3) -1.1em 1.1em 0 0, rgba(0, 0, 51, 0.3) -1.5em 0 0 0, rgba(0, 0, 51, 0.3) -1.1em -1.1em 0 0, rgba(0, 0, 51, 0.3) 0 -1.5em 0 0, rgba(0, 0, 51, 0.3) 1.1em -1.1em 0 0;\n  -webkit-box-shadow: rgba(0, 0, 51, 0.3) 1.5em 0 0 0, rgba(0, 0, 51, 0.3) 1.1em 1.1em 0 0, rgba(0, 0, 51, 0.3) 0 1.5em 0 0, rgba(0, 0, 51, 0.3) -1.1em 1.1em 0 0, rgba(0, 0, 51, 0.3) -1.5em 0 0 0, rgba(0, 0, 51, 0.3) -1.1em -1.1em 0 0, rgba(0, 0, 51, 0.3) 0 -1.5em 0 0, rgba(0, 0, 51, 0.3) 1.1em -1.1em 0 0;\n  box-shadow: rgba(0, 0, 51, 0.3) 1.5em 0 0 0, rgba(0, 0, 51, 0.3) 1.1em 1.1em 0 0, rgba(0, 0, 51, 0.3) 0 1.5em 0 0, rgba(0, 0, 51, 0.3) -1.1em 1.1em 0 0, rgba(0, 0, 51, 0.3) -1.5em 0 0 0, rgba(0, 0, 51, 0.3) -1.1em -1.1em 0 0, rgba(0, 0, 51, 0.3) 0 -1.5em 0 0, rgba(0, 0, 51, 0.3) 1.1em -1.1em 0 0;\n  display: inline-block;\n  font-size: 10px;\n  width: 1em;\n  height: 1em;\n  margin: 1.5em;\n  overflow: hidden;\n  text-indent: 100%;\n}\n.msgapi .spinner{\n  float: left;\n  display: table;\n  width: 20px;\n  text-align: center;\n  margin-right: 4px;\n\n}\n.msgapi .spinner-card{\n  text-align: center;\n  vertical-align: middle;\n  height: 20px;\n  position:relative;\n  top:-7px;\n\n}\n\n.msgapi .spinner-fg{\n  position: relative;\n  top: -36px;\n  left: 1px;\n  font-size: 14px;\n}\n.msgapi .sp-small{\n    zoom:0.8;\n    -moz-transform: scale(0.8);\n}\n.msgapi .sp-big{\n    zoom:1.5;\n    -moz-transform: scale(0.5);\n}\n",""])},"./node_modules/css-loader/index.js!./node_modules/postcss-loader/src/index.js?!./MapStore2/web/client/components/misc/style/filter.css":function(e,t,n){(e.exports=n("./node_modules/css-loader/lib/css-base.js")()).push([e.i,".msgapi .mapstore-filter input::-ms-clear,\n.msgapi .mapstore-filter input::-ms-reveal {\n  display: none;\n}\n",""])},"./node_modules/css-loader/index.js!./node_modules/postcss-loader/src/index.js?!./MapStore2/web/client/components/style/ColorMapGridComponents/colorenderer.css":function(e,t,n){(e.exports=n("./node_modules/css-loader/lib/css-base.js")()).push([e.i,".msgapi .cpr-color\n {\n  box-sizing: border-box;\n  width: 100%;\n  min-height: 28px;\n  -webkit-border-radius: 3px;\n  -moz-border-radius: 3px;\n  border-radius: 3px;\n  padding: 2px;\n\n}\n.msgapi .cpe-popover\n{\n  white-space: normal;\n  position: fixed;\n  z-index: 1000;\n}\n.msgapi .cpe-cover\n{\n  position: fixed;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n}\n.msgapi .cpe-popover > div > div {\n    position: relative;\n}\n",""])},"./node_modules/css-loader/index.js!./node_modules/postcss-loader/src/index.js?!./MapStore2/web/client/components/style/ColorMapGridComponents/numberpicker.css":function(e,t,n){(e.exports=n("./node_modules/css-loader/lib/css-base.js")()).push([e.i,".msgapi .numberpicker {\n    font-size: small;\n    -ms-transform: scaleY(0.9) translateY(-2px); /* IE 9 */\n    -webkit-transform: scaleY(0.9) translateY(-2px); /* Chrome, Safari, Opera */\n    transform: scaleY(0.9) translateY(-2px);\n\n}",""])},"./node_modules/css-loader/index.js!./node_modules/postcss-loader/src/index.js?!./MapStore2/web/client/components/style/opacitypicker.css":function(e,t,n){(e.exports=n("./node_modules/css-loader/lib/css-base.js")()).push([e.i,".msgapi .opacity-picker .noUi-tooltip {\n  display: block;\n  position: absolute;\n  border: 1px solid #D9D9D9;\n  border-radius: 3px;\n  background: #fff;\n  padding: 5px;\n  left: -1px;\n  text-align: center;\n  width: 34px;\n  font-style: normal;\n  font-variant: normal;\n  font-weight: 700;\n  font-stretch: normal;\n  font-size: 10px;\n  line-height: 12px;\n  font-family: Arial;\n        }\n\n.msgapi .opacity-picker .noUi-handle-lower .noUi-tooltip {\n  top: 28px;\n}\n",""])},"./node_modules/css-loader/index.js!./node_modules/postcss-loader/src/index.js?!./MapStore2/web/client/components/tutorial/style/tutorial.css":function(e,t,n){(e.exports=n("./node_modules/css-loader/lib/css-base.js")()).push([e.i,"/**\n * Copyright 2017, GeoSolutions Sas.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n.msgapi .joyride-hole {\n    box-shadow: 0 0 0 9999px rgba(0,0,0,.75), 0 0 15px rgba(0,0,0,.75);\n}\n\n.msgapi .joyride-tooltip__button--secondary{\n    color: #888;\n}\n\n.msgapi .joyride-tooltip__header {\n    font-family: Georgia, serif;\n    font-size: 1.5em;\n    border-bottom: 1px solid #ddd;\n}\n\n.msgapi .joyride-tooltip__main {\n    font-size: 0.9em;\n}\n\n.msgapi .tutorial-presentation-position{\n    position: fixed;\n    width: 100%;\n    left: 0;\n}\n\n.msgapi #tutorial-intro-checkbox-container {\n    overflow: hidden;\n    margin: 5px 0 5px 0;\n    border-top: 1px dashed #777;\n    font-size: 0.8em;\n    font-style: italic;\n}\n\n.msgapi #tutorial-intro-checkbox {\n    margin: 5px 10px 0 0;\n    width: 10px;\n    height: 10px;\n    cursor: pointer;\n}\n",""])},"./node_modules/css-loader/index.js!./node_modules/postcss-loader/src/index.js?!./MapStore2/web/client/plugins/drawer/drawer.css":function(e,t,n){(e.exports=n("./node_modules/css-loader/lib/css-base.js")()).push([e.i,"/* Menu Button */\n.msgapi .drawer-menu-button {\n    position: absolute;\n    z-index:1000;\n    left: 30px;\n    top: 8px;\n    width:30px;\n    background: transparent;\n    outline: none;\n    border: transparent;\n    font-size: 14px;\n}\n\n.msgapi .drawer-menu-button:hover {\n    background: transparent;\n}\n\n.msgapi #drawer-menu-button:active{\n    box-shadow: none;\n}\n\n.msgapi #mapstore-drawermenu > div > div:nth-child(2) {\n    display: none;\n}\n\n.msgapi .nav-content #background-switcher .thumbnail {\n    border-radius: 0 !important;\n    margin-bottom: 40px;\n    width: 220px !important;\n}\n.msgapi .nav-content #background-switcher .thumbnail img {\n    border-radius: 0 !important;\n    height: 90px;\n    width: 220px !important;\n}\n\n.msgapi .nav-content #background-switcher .thumbnail .caption {\n    font-size: 14px !important;\n    text-align: left !important;\n    top: -20px !important;\n    position: absolute !important;\n}\n\n.msgapi .nav-content #background-switcher {\n    margin-top: 10px;\n}\n\n.msgapi #mapstore-drawermenu .panel {\n    border: none;\n    box-shadow: none;\n}\n\n.msgapi div.nav-menu {\n    -webkit-transform:   translate3d(300px, 0, 0);\n    -moz-transform: \t translate3d(300px, 0, 0);\n    -ms-transform: \t\t translate3d(300px, 0, 0);\n    -o-transform: \t\t translate3d(300px, 0, 0);\n    box-shadow: 2px 0px 15px #A7A7A7;\n}\n\n.msgapi .nav-menu  .navHeader {\n    height: 50px;\n}\n.msgapi .nav-menu > .nav-content .navHeader .title{\n    font-size: 16px;\n    position: absolute;\n    margin: 13px;\n    font-weight: bold;\n}\n.msgapi .nav-content  .section {\n    margin-bottom: 2px;\n}\n.msgapi .nav-content  .section .sectionHeader{\n    padding: 5px;\n    cursor: pointer;\n}\n.msgapi .nav-content .section .sectionHeader>.glyphicon{\n    /* Firefox */\n    -moz-transition: all .3s ease;\n    /* WebKit */\n    -webkit-transition: all .3s ease;\n    /* Opera */\n    -o-transition: all .3s ease;\n    /* Standard */\n    transition: all .3s ease;\n}\n.msgapi .nav-content  .section .sectionTitle{\n    padding-left: 10px;\n\n}\n.msgapi .nav-content  .section .sectionContent{\n    -moz-transition: max-height .3s ease;\n    -webkit-transition: max-height .3s ease;\n    -o-transition: max-height .3s ease;\n    transition: max-height .3s ease;\n\n    box-shadow: inset 0px 0px 10px rgba(0,0,0,.5);\n    padding: 5px;\n}\n\n.msgapi .navButtons {\n    float: right;\n}\n\n.msgapi #drawer-menu-button {\n     position: absolute;\n}\n",""])},"./node_modules/css-loader/index.js!./node_modules/postcss-loader/src/index.js?!./MapStore2/web/client/plugins/locate/locate.css":function(e,t,n){(e.exports=n("./node_modules/css-loader/lib/css-base.js")()).push([e.i,".msgapi #locate-btn {\n    position: absolute;\n    z-index: 1000;\n    right: 10px;\n    bottom: 150px;\n}\n\n.msgapi #mapstore-toolbar #locate-btn {\n    position: static;\n}\n",""])},"./node_modules/css-loader/index.js!./node_modules/postcss-loader/src/index.js?!./MapStore2/web/client/plugins/metadataexplorer/css/style.css":function(e,t,n){(e.exports=n("./node_modules/css-loader/lib/css-base.js")()).push([e.i,".msgapi div.record-grid {\n    padding-left: 0;\n    padding-right: 0;\n}\n\n.msgapi div.record-grid .record-item{\n    height: auto;\n}\n.msgapi div.record-grid .record-item .panel-body{\n    padding: 0;\n}\n\n.msgapi #mapstore-catalog-panel button.search-button {\n    margin-bottom: 10px;\n}\n\n.msgapi #mapstore-catalog-panel .record-item {\n    min-height: 150px;\n}\n.msgapi #catalog-root {\n    position: static!important;\n}\n\n/*\n!important is needed because the library we used\nuse inline style which cannot be overridden unless\nwe use !important*/\n@media (max-width: 500px) {\n    .msgapi div .catalog-sidebar.nav-menu {\n        width: 100% !important\n    }\n}\n\n.msgapi #mapstore-metadata-explorer{\n    margin-bottom: 0\n}\n",""])},"./node_modules/css-loader/index.js!./node_modules/postcss-loader/src/index.js?!./MapStore2/web/client/plugins/rasterstyler/rasterstyler.css":function(e,t,n){(e.exports=n("./node_modules/css-loader/lib/css-base.js")()).push([e.i,".msgapi .mapstore-rasterstyler-panel {\n    width: 600px;\n    position: absolute;\n    top: 10px;\n    right: 60px;\n    z-index: 1000;\n}",""])},"./node_modules/css-loader/index.js!./node_modules/postcss-loader/src/index.js?!./MapStore2/web/client/plugins/settings/css/settings.css":function(e,t,n){(e.exports=n("./node_modules/css-loader/lib/css-base.js")()).push([e.i,"\n.msgapi #mapstore-settings .btn-group {\n    width: auto;\n}\n\n.msgapi #mapstore-settings .modal-body #mapstore-mousepositionsettings button {\n    float: none;\n    margin-left: 40%;\n}\n\n.msgapi #mapstore-settings .modal-body #mapstore-mousepositionsettings select {\n    float: none;\n    margin-left: 40%;\n}\n\n.msgapi #mapstore-settings .modal-body .form-group {\n    margin-top: 15px;\n    border-top: solid 1px #EEE;\n    padding-top: 10px;\n}\n",""])},"./node_modules/css-loader/index.js!./node_modules/postcss-loader/src/index.js?!./MapStore2/web/client/plugins/styler/styler.css":function(e,t,n){(e.exports=n("./node_modules/css-loader/lib/css-base.js")()).push([e.i,".msgapi .mapstore-styler-panel {\n    width: 600px;\n    position: absolute;\n    top: 10px;\n    right: 60px;\n    z-index: 1000;\n}\n.msgapi .mapstore-styler-panel button{\n    font-size:14px !important;\n    border-radius: 4px;\n    height: 30px;\n    padding-bottom: 5px;\n}\n.msgapi .mapstore-styler-panel button:disabled{\n    color:white;\n}\n.msgapi .mapstore-styler-panel .panel-heading{\n    background-color: #078AA3 !important;\n    color:white !important;\n}\n\n.msgapi .mapstore-styler-panel .form-control{\n    height: 32px !important;\n\n}\n\n.msgapi .mapstore-styler-panel, .msgapi .panel, .msgapi .panel-default{\n    overflow: visible !important;\n}\n",""])},"./node_modules/css-loader/index.js!./node_modules/postcss-loader/src/index.js?!./MapStore2/web/client/plugins/vectorstyler/vectorstyler.css":function(e,t,n){(e.exports=n("./node_modules/css-loader/lib/css-base.js")()).push([e.i,".msgapi .mapstore-vectorstyler-panel {\n    width: 600px;\n    position: absolute;\n    top: 10px;\n    right: 60px;\n    z-index: 1000;\n}",""])},"./node_modules/raw-loader/index.js!./MapStore2/web/client/components/share/api-template.raw":function(e,t){e.exports='<!DOCTYPE html>\n<html>\n    <head>\n        <meta charset="UTF-8">\n        <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">\n        <meta name="viewport" content="width=device-width, initial-scale=1">\n        <title>Page with MapStore API</title>\n        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway" type=\'text/css\'>\n        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.3.1/leaflet.css" />\n        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.2/leaflet.draw.css" />\n        <link rel="shortcut icon" type="image/png" href="https://cdn.jslibs.mapstore2.geo-solutions.it/leaflet/favicon.ico" />\n        <script src="https://maps.google.com/maps/api/js?v=3"><\/script>\n        \x3c!--script src="https://cdnjs.cloudflare.com/ajax/libs/proj4js/2.3.10/proj4.js"></script--\x3e\n        <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.3.1/leaflet.js"><\/script>\n        <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.2/leaflet.draw.js"><\/script>\n        <style>\n        #container {\n            position: absolute;\n            top: 100px;\n            left: 100px;\n            right: 100px;\n            bottom: 100px;\n        }\n        #mapstore2-embedded, #map, .fill {\n            width: 100%;\n            height: 100%;\n        }\n        </style>\n    </head>\n    <body onload="init()">\n        <div id="container" class="ms2"></div>\n        <script id="ms2-api" src="__BASE__URL__dist/ms2-api.js__VERSION__"><\/script>\n        <script type="text/javascript">\n        function init() {\n            MapStore2.create(\'container\',{\n                configUrl: "__CONFIG__URL__",\n                originalUrl: "__ORIGINAL_URL__"\n            });\n        }\n        <\/script>\n    </body>\n</html>\n'},"./node_modules/raw-loader/index.js!./MapStore2/web/client/plugins/tocitemssettings/featureInfoPreviews/responseHTML.txt":function(e,t){e.exports='<html>\n  <head>\n    <title>Geoserver GetFeatureInfo output</title>\n  </head>\n    <style type="text/css">\n    \ttable.featureInfo, table.featureInfo td, table.featureInfo th {\n    \t\tborder:1px solid #ddd;\n    \t\tborder-collapse:collapse;\n    \t\tmargin:0;\n    \t\tpadding:0;\n    \t\tfont-size: 90%;\n    \t\tpadding:.2em .1em;\n    \t}\n    \ttable.featureInfo th {\n    \t    padding:.2em .2em;\n    \t\tfont-weight:bold;\n    \t\tbackground:#eee;\n    \t}\n    \ttable.featureInfo td{\n    \t\tbackground:#fff;\n    \t}\n    \ttable.featureInfo tr.odd td{\n    \t\tbackground:#eee;\n    \t}\n    \ttable.featureInfo caption{\n    \t\ttext-align:left;\n    \t\tfont-size:100%;\n    \t\tfont-weight:bold;\n    \t\tpadding:.2em .2em;\n    \t}\n    </style>\n  <body>\n    <table class="featureInfo">\n      <caption class="featureInfo">states</caption>\n      <tr>\n        <th>fid</th>\n          <th >STATE_NAME</th>\n          <th >STATE_FIPS</th>\n          <th >SUB_REGION</th>\n          <th >STATE_ABBR</th>\n          <th >LAND_KM</th>\n      </tr>\n      <tr>\n        <td>states.29</td>\n        <td>Wyoming</td>\n        <td>56</td>\n        <td>Mtn</td>\n        <td>WY</td>\n        <td>251500.801</td>\n      </tr>\n    </table>\n    <br/>\n  </body>\n</html>'},"./node_modules/raw-loader/index.js!./MapStore2/web/client/plugins/tocitemssettings/featureInfoPreviews/responseJSON.txt":function(e,t){e.exports='{\n  "type": "FeatureCollection",\n  "totalFeatures": "unknown",\n  "features": [\n      {\n    "type": "Feature",\n    "id": "states.29",\n    "geometry": {\n      "type": "MultiPolygon",\n      "coordinates": [\n        [\n          [\n            [-1.15831389980175E7, 5115884.78673627],\n            [-1.158334883525764E7, 5095927.61163692],\n            [-1.158318319185534E7, 5069757.00399456],\n            [-1.158292671174856E7, 5012817.65726345],\n            [-1.168119588467766E7, 5011501.68893432],\n            [-1.171952218348237E7, 5011805.51696107],\n            [-1.182245230349099E7, 5012358.03633596],\n            [-1.183643948618967E7, 5012535.77548496],\n            [-1.189613934986567E7, 5012118.79424704],\n            [-1.194496385588862E7, 5012366.44384074],\n            [-1.201338092624966E7, 5012844.6510808],\n            [-1.213912753436923E7, 5012116.58180143],\n            [-1.224530617975818E7, 5011994.45558498],\n            [-1.225209889508638E7, 5012037.8190659],\n            [-1.23620611786479E7, 5011845.33978484],\n            [-1.236213086464914E7, 5050542.48847943],\n            [-1.236206540878855E7, 5098070.44035716],\n            [-1.236180135895639E7, 5160419.97558219],\n            [-1.23615872915756E7, 5236675.5279452],\n            [-1.236185657342383E7, 5315010.76063796],\n            [-1.236166543785814E7, 5355424.25785557],\n            [-1.236158395199088E7, 5390784.55533999],\n            [-1.236198815306194E7, 5462754.83859328],\n            [-1.236211728367126E7, 5538995.97145504],\n            [-1.236212318360428E7, 5568867.31982516],\n            [-1.236232444924363E7, 5620854.95417318],\n            [-1.229288824894438E7, 5620316.91583206],\n            [-1.2288781895568E7, 5621314.94100872],\n            [-1.224456390139357E7, 5621970.64383454],\n            [-1.222273014174734E7, 5621455.36603028],\n            [-1.209203215399677E7, 5621150.43241323],\n            [-1.205128866376898E7, 5621546.67495262],\n            [-1.201067341359458E7, 5621492.04691732],\n            [-1.182865814246373E7, 5620919.18090556],\n            [-1.180215653392956E7, 5621084.9446589],\n            [-1.169794913408358E7, 5621495.03806919],\n            [-1.169313957548385E7, 5621693.24344854],\n            [-1.158383374295954E7, 5621104.15015297],\n            [-1.158379210946998E7, 5554761.48947335],\n            [-1.158396710370951E7, 5493626.06569343],\n            [-1.158382183177402E7, 5488039.68771347],\n            [-1.158379377926234E7, 5442710.58976854],\n            [-1.158361967557875E7, 5388962.94229949],\n            [-1.158375815702529E7, 5385191.61647555],\n            [-1.158342865133254E7, 5312442.79715209],\n            [-1.15834303211249E7, 5253508.54391938],\n            [-1.158312797738791E7, 5160957.12459852],\n            [-1.15831389980175E7, 5115884.78673627]\n          ]\n        ]\n      ]\n    },\n    "geometry_name": "the_geom",\n    "properties": {\n      "STATE_NAME": "Wyoming",\n      "STATE_FIPS": "56",\n      "SUB_REGION": "Mtn",\n      "STATE_ABBR": "WY",\n      "LAND_KM": 251500.801,\n      "WATER_KM": 1848.149,\n      "PERSONS": 453588,\n      "FAMILIES": 119825,\n      "HOUSHOLD": 168839,\n      "MALE": 227007,\n      "FEMALE": 226581,\n      "WORKERS": 164561,\n      "DRVALONE": 153679,\n      "CARPOOL": 28109,\n      "PUBTRANS": 2963,\n      "EMPLOYED": 207868,\n      "UNEMPLOY": 13112,\n      "SERVICE": 71419,\n      "MANUAL": 29157,\n      "P_MALE": 0.5,\n      "P_FEMALE": 0.5,\n      "SAMP_POP": 83202,\n      "bbox": [-1.236232444924363E7, 5011501.68893432, -1.158292671174856E7, 5621970.64383454]\n    }\n  }],\n  "crs": {\n    "type": "name",\n    "properties": {\n      "name": "urn:ogc:def:crs:EPSG::3857"\n    }\n  },\n  "bbox": [-1.236232444924363E7, 5011501.68893432, -1.158292671174856E7, 5621970.64383454]\n}'},"./node_modules/raw-loader/index.js!./MapStore2/web/client/plugins/tocitemssettings/featureInfoPreviews/responseText.txt":function(e,t){e.exports="Results for FeatureType 'http://www.openplans.org/topp:states':\n--------------------------------------------\nthe_geom = [GEOMETRY (Polygon) with 48 points]\nSTATE_NAME = Wyoming\nSTATE_FIPS = 56\nSUB_REGION = Mtn\nSTATE_ABBR = WY\nLAND_KM = 251500.801\nWATER_KM = 1848.149\nPERSONS = 453588.0\nFAMILIES = 119825.0\nHOUSHOLD = 168839.0\nMALE = 227007.0\nFEMALE = 226581.0\nWORKERS = 164561.0\nDRVALONE = 153679.0\nCARPOOL = 28109.0\nPUBTRANS = 2963.0\nEMPLOYED = 207868.0\nUNEMPLOY = 13112.0\nSERVICE = 71419.0\nMANUAL = 29157.0\nP_MALE = 0.5\nP_FEMALE = 0.5\nSAMP_POP = 83202.0\n--------------------------------------------"},5:function(e,t){},6:function(e,t){},7:function(e,t){}}]);